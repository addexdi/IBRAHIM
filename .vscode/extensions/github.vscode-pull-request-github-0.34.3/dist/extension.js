(()=>{var xp={9669:(d,ne,q)=>{d.exports=q(1609)},7970:(d,ne,q)=>{"use strict";var W=q(4867),J=q(6026),se=q(4097),U=q(5327),M=q(8605),L=q(7211),I=q(938).http,P=q(938).https,$=q(8835),G=q(8761),z=q(696),O=q(5061),V=q(481),B=/https:?/;function j(ce,ee,Se){if(ce.hostname=ee.host,ce.host=ee.host,ce.port=ee.port,ce.path=Se,ee.auth){var fe=Buffer.from(ee.auth.username+":"+ee.auth.password,"utf8").toString("base64");ce.headers["Proxy-Authorization"]="Basic "+fe}ce.beforeRedirect=function(Z){Z.headers.host=Z.host,j(Z,ee,Z.href)}}d.exports=function(ee){return new Promise(function(fe,De){var Z=function(bt){fe(bt)},de=function(bt){De(bt)},ie=ee.data,re=ee.headers;if("User-Agent"in re||"user-agent"in re?!re["User-Agent"]&&!re["user-agent"]&&(delete re["User-Agent"],delete re["user-agent"]):re["User-Agent"]="axios/"+z.version,ie&&!W.isStream(ie)){if(!Buffer.isBuffer(ie))if(W.isArrayBuffer(ie))ie=Buffer.from(new Uint8Array(ie));else if(W.isString(ie))ie=Buffer.from(ie,"utf-8");else return de(O("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",ee));re["Content-Length"]=ie.length}var X=void 0;if(ee.auth){var he=ee.auth.username||"",we=ee.auth.password||"";X=he+":"+we}var Ee=se(ee.baseURL,ee.url),Pe=$.parse(Ee),ke=Pe.protocol||"http:";if(!X&&Pe.auth){var je=Pe.auth.split(":"),Ye=je[0]||"",ct=je[1]||"";X=Ye+":"+ct}X&&delete re.Authorization;var yt=B.test(ke),zt=yt?ee.httpsAgent:ee.httpAgent,Yt={path:U(Pe.path,ee.params,ee.paramsSerializer).replace(/^\?/,""),method:ee.method.toUpperCase(),headers:re,agent:zt,agents:{http:ee.httpAgent,https:ee.httpsAgent},auth:X};ee.socketPath?Yt.socketPath=ee.socketPath:(Yt.hostname=Pe.hostname,Yt.port=Pe.port);var rr=ee.proxy;if(!rr&&rr!==!1){var Xt=ke.slice(0,-1)+"_proxy",Ir=process.env[Xt]||process.env[Xt.toUpperCase()];if(Ir){var qr=$.parse(Ir),Sn=process.env.no_proxy||process.env.NO_PROXY,Ts=!0;if(Sn){var ui=Sn.split(",").map(function(bt){return bt.trim()});Ts=!ui.some(function(bt){return bt?bt==="*"||bt[0]==="."&&Pe.hostname.substr(Pe.hostname.length-bt.length)===bt?!0:Pe.hostname===bt:!1})}if(Ts&&(rr={host:qr.hostname,port:qr.port,protocol:qr.protocol},qr.auth)){var rs=qr.auth.split(":");rr.auth={username:rs[0],password:rs[1]}}}}rr&&(Yt.headers.host=Pe.hostname+(Pe.port?":"+Pe.port:""),j(Yt,rr,ke+"//"+Pe.hostname+(Pe.port?":"+Pe.port:"")+Yt.path));var li,qn=yt&&(rr?B.test(rr.protocol):!0);ee.transport?li=ee.transport:ee.maxRedirects===0?li=qn?L:M:(ee.maxRedirects&&(Yt.maxRedirects=ee.maxRedirects),li=qn?P:I),ee.maxBodyLength>-1&&(Yt.maxBodyLength=ee.maxBodyLength);var $t=li.request(Yt,function(bt){if(!$t.aborted){var gr=bt,Un=bt.req||$t;if(bt.statusCode!==204&&Un.method!=="HEAD"&&ee.decompress!==!1)switch(bt.headers["content-encoding"]){case"gzip":case"compress":case"deflate":gr=gr.pipe(G.createUnzip()),delete bt.headers["content-encoding"];break}var di={status:bt.statusCode,statusText:bt.statusMessage,headers:bt.headers,config:ee,request:Un};if(ee.responseType==="stream")di.data=gr,J(Z,de,di);else{var hi=[],ns=0;gr.on("data",function(ir){hi.push(ir),ns+=ir.length,ee.maxContentLength>-1&&ns>ee.maxContentLength&&(gr.destroy(),de(O("maxContentLength size of "+ee.maxContentLength+" exceeded",ee,null,Un)))}),gr.on("error",function(ir){$t.aborted||de(V(ir,ee,null,Un))}),gr.on("end",function(){var ir=Buffer.concat(hi);ee.responseType!=="arraybuffer"&&(ir=ir.toString(ee.responseEncoding),(!ee.responseEncoding||ee.responseEncoding==="utf8")&&(ir=W.stripBOM(ir))),di.data=ir,J(Z,de,di)})}}});if($t.on("error",function(bt){$t.aborted&&bt.code!=="ERR_FR_TOO_MANY_REDIRECTS"||de(V(bt,ee,null,$t))}),ee.timeout){var ci=parseInt(ee.timeout,10);if(isNaN(ci)){de(O("error trying to parse `config.timeout` to int",ee,"ERR_PARSE_TIMEOUT",$t));return}$t.setTimeout(ci,function(){$t.abort(),de(O("timeout of "+ci+"ms exceeded",ee,ee.transitional&&ee.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",$t))})}ee.cancelToken&&ee.cancelToken.promise.then(function(bt){$t.aborted||($t.abort(),de(bt))}),W.isStream(ie)?ie.on("error",function(bt){de(V(bt,ee,null,$t))}).pipe($t):$t.end(ie)})}},5448:(d,ne,q)=>{"use strict";var W=q(4867),J=q(6026),se=q(4372),U=q(5327),M=q(4097),L=q(4109),I=q(7985),P=q(5061);d.exports=function(G){return new Promise(function(O,V){var B=G.data,j=G.headers,ce=G.responseType;W.isFormData(B)&&delete j["Content-Type"];var ee=new XMLHttpRequest;if(G.auth){var Se=G.auth.username||"",fe=G.auth.password?unescape(encodeURIComponent(G.auth.password)):"";j.Authorization="Basic "+btoa(Se+":"+fe)}var De=M(G.baseURL,G.url);ee.open(G.method.toUpperCase(),U(De,G.params,G.paramsSerializer),!0),ee.timeout=G.timeout;function Z(){if(!!ee){var ie="getAllResponseHeaders"in ee?L(ee.getAllResponseHeaders()):null,re=!ce||ce==="text"||ce==="json"?ee.responseText:ee.response,X={data:re,status:ee.status,statusText:ee.statusText,headers:ie,config:G,request:ee};J(O,V,X),ee=null}}if("onloadend"in ee?ee.onloadend=Z:ee.onreadystatechange=function(){!ee||ee.readyState!==4||ee.status===0&&!(ee.responseURL&&ee.responseURL.indexOf("file:")===0)||setTimeout(Z)},ee.onabort=function(){!ee||(V(P("Request aborted",G,"ECONNABORTED",ee)),ee=null)},ee.onerror=function(){V(P("Network Error",G,null,ee)),ee=null},ee.ontimeout=function(){var re="timeout of "+G.timeout+"ms exceeded";G.timeoutErrorMessage&&(re=G.timeoutErrorMessage),V(P(re,G,G.transitional&&G.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",ee)),ee=null},W.isStandardBrowserEnv()){var de=(G.withCredentials||I(De))&&G.xsrfCookieName?se.read(G.xsrfCookieName):void 0;de&&(j[G.xsrfHeaderName]=de)}"setRequestHeader"in ee&&W.forEach(j,function(re,X){typeof B=="undefined"&&X.toLowerCase()==="content-type"?delete j[X]:ee.setRequestHeader(X,re)}),W.isUndefined(G.withCredentials)||(ee.withCredentials=!!G.withCredentials),ce&&ce!=="json"&&(ee.responseType=G.responseType),typeof G.onDownloadProgress=="function"&&ee.addEventListener("progress",G.onDownloadProgress),typeof G.onUploadProgress=="function"&&ee.upload&&ee.upload.addEventListener("progress",G.onUploadProgress),G.cancelToken&&G.cancelToken.promise.then(function(re){!ee||(ee.abort(),V(re),ee=null)}),B||(B=null),ee.send(B)})}},1609:(d,ne,q)=>{"use strict";var W=q(4867),J=q(1849),se=q(321),U=q(7185),M=q(5655);function L(P){var $=new se(P),G=J(se.prototype.request,$);return W.extend(G,se.prototype,$),W.extend(G,$),G}var I=L(M);I.Axios=se,I.create=function($){return L(U(I.defaults,$))},I.Cancel=q(5263),I.CancelToken=q(4972),I.isCancel=q(6502),I.all=function($){return Promise.all($)},I.spread=q(8713),I.isAxiosError=q(6268),d.exports=I,d.exports.default=I},5263:d=>{"use strict";function ne(q){this.message=q}ne.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},ne.prototype.__CANCEL__=!0,d.exports=ne},4972:(d,ne,q)=>{"use strict";var W=q(5263);function J(se){if(typeof se!="function")throw new TypeError("executor must be a function.");var U;this.promise=new Promise(function(I){U=I});var M=this;se(function(I){M.reason||(M.reason=new W(I),U(M.reason))})}J.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},J.source=function(){var U,M=new J(function(I){U=I});return{token:M,cancel:U}},d.exports=J},6502:d=>{"use strict";d.exports=function(q){return!!(q&&q.__CANCEL__)}},321:(d,ne,q)=>{"use strict";var W=q(4867),J=q(5327),se=q(782),U=q(3572),M=q(7185),L=q(4875),I=L.validators;function P($){this.defaults=$,this.interceptors={request:new se,response:new se}}P.prototype.request=function(G){typeof G=="string"?(G=arguments[1]||{},G.url=arguments[0]):G=G||{},G=M(this.defaults,G),G.method?G.method=G.method.toLowerCase():this.defaults.method?G.method=this.defaults.method.toLowerCase():G.method="get";var z=G.transitional;z!==void 0&&L.assertOptions(z,{silentJSONParsing:I.transitional(I.boolean,"1.0.0"),forcedJSONParsing:I.transitional(I.boolean,"1.0.0"),clarifyTimeoutError:I.transitional(I.boolean,"1.0.0")},!1);var O=[],V=!0;this.interceptors.request.forEach(function(Z){typeof Z.runWhen=="function"&&Z.runWhen(G)===!1||(V=V&&Z.synchronous,O.unshift(Z.fulfilled,Z.rejected))});var B=[];this.interceptors.response.forEach(function(Z){B.push(Z.fulfilled,Z.rejected)});var j;if(!V){var ce=[U,void 0];for(Array.prototype.unshift.apply(ce,O),ce=ce.concat(B),j=Promise.resolve(G);ce.length;)j=j.then(ce.shift(),ce.shift());return j}for(var ee=G;O.length;){var Se=O.shift(),fe=O.shift();try{ee=Se(ee)}catch(De){fe(De);break}}try{j=U(ee)}catch(De){return Promise.reject(De)}for(;B.length;)j=j.then(B.shift(),B.shift());return j},P.prototype.getUri=function(G){return G=M(this.defaults,G),J(G.url,G.params,G.paramsSerializer).replace(/^\?/,"")},W.forEach(["delete","get","head","options"],function(G){P.prototype[G]=function(z,O){return this.request(M(O||{},{method:G,url:z,data:(O||{}).data}))}}),W.forEach(["post","put","patch"],function(G){P.prototype[G]=function(z,O,V){return this.request(M(V||{},{method:G,url:z,data:O}))}}),d.exports=P},782:(d,ne,q)=>{"use strict";var W=q(4867);function J(){this.handlers=[]}J.prototype.use=function(U,M,L){return this.handlers.push({fulfilled:U,rejected:M,synchronous:L?L.synchronous:!1,runWhen:L?L.runWhen:null}),this.handlers.length-1},J.prototype.eject=function(U){this.handlers[U]&&(this.handlers[U]=null)},J.prototype.forEach=function(U){W.forEach(this.handlers,function(L){L!==null&&U(L)})},d.exports=J},4097:(d,ne,q)=>{"use strict";var W=q(1793),J=q(9002);d.exports=function(U,M){return U&&!W(M)?J(U,M):M}},5061:(d,ne,q)=>{"use strict";var W=q(481);d.exports=function(se,U,M,L,I){var P=new Error(se);return W(P,U,M,L,I)}},3572:(d,ne,q)=>{"use strict";var W=q(4867),J=q(8527),se=q(6502),U=q(5655);function M(L){L.cancelToken&&L.cancelToken.throwIfRequested()}d.exports=function(I){M(I),I.headers=I.headers||{},I.data=J.call(I,I.data,I.headers,I.transformRequest),I.headers=W.merge(I.headers.common||{},I.headers[I.method]||{},I.headers),W.forEach(["delete","get","head","post","put","patch","common"],function(G){delete I.headers[G]});var P=I.adapter||U.adapter;return P(I).then(function(G){return M(I),G.data=J.call(I,G.data,G.headers,I.transformResponse),G},function(G){return se(G)||(M(I),G&&G.response&&(G.response.data=J.call(I,G.response.data,G.response.headers,I.transformResponse))),Promise.reject(G)})}},481:d=>{"use strict";d.exports=function(q,W,J,se,U){return q.config=W,J&&(q.code=J),q.request=se,q.response=U,q.isAxiosError=!0,q.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},q}},7185:(d,ne,q)=>{"use strict";var W=q(4867);d.exports=function(se,U){U=U||{};var M={},L=["url","method","data"],I=["headers","auth","proxy","params"],P=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],$=["validateStatus"];function G(B,j){return W.isPlainObject(B)&&W.isPlainObject(j)?W.merge(B,j):W.isPlainObject(j)?W.merge({},j):W.isArray(j)?j.slice():j}function z(B){W.isUndefined(U[B])?W.isUndefined(se[B])||(M[B]=G(void 0,se[B])):M[B]=G(se[B],U[B])}W.forEach(L,function(j){W.isUndefined(U[j])||(M[j]=G(void 0,U[j]))}),W.forEach(I,z),W.forEach(P,function(j){W.isUndefined(U[j])?W.isUndefined(se[j])||(M[j]=G(void 0,se[j])):M[j]=G(void 0,U[j])}),W.forEach($,function(j){j in U?M[j]=G(se[j],U[j]):j in se&&(M[j]=G(void 0,se[j]))});var O=L.concat(I).concat(P).concat($),V=Object.keys(se).concat(Object.keys(U)).filter(function(j){return O.indexOf(j)===-1});return W.forEach(V,z),M}},6026:(d,ne,q)=>{"use strict";var W=q(5061);d.exports=function(se,U,M){var L=M.config.validateStatus;!M.status||!L||L(M.status)?se(M):U(W("Request failed with status code "+M.status,M.config,null,M.request,M))}},8527:(d,ne,q)=>{"use strict";var W=q(4867),J=q(5655);d.exports=function(U,M,L){var I=this||J;return W.forEach(L,function($){U=$.call(I,U,M)}),U}},5655:(d,ne,q)=>{"use strict";var W=q(4867),J=q(6016),se=q(481),U={"Content-Type":"application/x-www-form-urlencoded"};function M($,G){!W.isUndefined($)&&W.isUndefined($["Content-Type"])&&($["Content-Type"]=G)}function L(){var $;return typeof XMLHttpRequest!="undefined"?$=q(5448):typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]"&&($=q(7970)),$}function I($,G,z){if(W.isString($))try{return(G||JSON.parse)($),W.trim($)}catch(O){if(O.name!=="SyntaxError")throw O}return(z||JSON.stringify)($)}var P={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:L(),transformRequest:[function(G,z){return J(z,"Accept"),J(z,"Content-Type"),W.isFormData(G)||W.isArrayBuffer(G)||W.isBuffer(G)||W.isStream(G)||W.isFile(G)||W.isBlob(G)?G:W.isArrayBufferView(G)?G.buffer:W.isURLSearchParams(G)?(M(z,"application/x-www-form-urlencoded;charset=utf-8"),G.toString()):W.isObject(G)||z&&z["Content-Type"]==="application/json"?(M(z,"application/json"),I(G)):G}],transformResponse:[function(G){var z=this.transitional,O=z&&z.silentJSONParsing,V=z&&z.forcedJSONParsing,B=!O&&this.responseType==="json";if(B||V&&W.isString(G)&&G.length)try{return JSON.parse(G)}catch(j){if(B)throw j.name==="SyntaxError"?se(j,this,"E_JSON_PARSE"):j}return G}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(G){return G>=200&&G<300}};P.headers={common:{Accept:"application/json, text/plain, */*"}},W.forEach(["delete","get","head"],function(G){P.headers[G]={}}),W.forEach(["post","put","patch"],function(G){P.headers[G]=W.merge(U)}),d.exports=P},1849:d=>{"use strict";d.exports=function(q,W){return function(){for(var se=new Array(arguments.length),U=0;U<se.length;U++)se[U]=arguments[U];return q.apply(W,se)}}},5327:(d,ne,q)=>{"use strict";var W=q(4867);function J(se){return encodeURIComponent(se).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}d.exports=function(U,M,L){if(!M)return U;var I;if(L)I=L(M);else if(W.isURLSearchParams(M))I=M.toString();else{var P=[];W.forEach(M,function(z,O){z===null||typeof z=="undefined"||(W.isArray(z)?O=O+"[]":z=[z],W.forEach(z,function(B){W.isDate(B)?B=B.toISOString():W.isObject(B)&&(B=JSON.stringify(B)),P.push(J(O)+"="+J(B))}))}),I=P.join("&")}if(I){var $=U.indexOf("#");$!==-1&&(U=U.slice(0,$)),U+=(U.indexOf("?")===-1?"?":"&")+I}return U}},9002:d=>{"use strict";d.exports=function(q,W){return W?q.replace(/\/+$/,"")+"/"+W.replace(/^\/+/,""):q}},4372:(d,ne,q)=>{"use strict";var W=q(4867);d.exports=W.isStandardBrowserEnv()?function(){return{write:function(U,M,L,I,P,$){var G=[];G.push(U+"="+encodeURIComponent(M)),W.isNumber(L)&&G.push("expires="+new Date(L).toGMTString()),W.isString(I)&&G.push("path="+I),W.isString(P)&&G.push("domain="+P),$===!0&&G.push("secure"),document.cookie=G.join("; ")},read:function(U){var M=document.cookie.match(new RegExp("(^|;\\s*)("+U+")=([^;]*)"));return M?decodeURIComponent(M[3]):null},remove:function(U){this.write(U,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},1793:d=>{"use strict";d.exports=function(q){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(q)}},6268:d=>{"use strict";d.exports=function(q){return typeof q=="object"&&q.isAxiosError===!0}},7985:(d,ne,q)=>{"use strict";var W=q(4867);d.exports=W.isStandardBrowserEnv()?function(){var se=/(msie|trident)/i.test(navigator.userAgent),U=document.createElement("a"),M;function L(I){var P=I;return se&&(U.setAttribute("href",P),P=U.href),U.setAttribute("href",P),{href:U.href,protocol:U.protocol?U.protocol.replace(/:$/,""):"",host:U.host,search:U.search?U.search.replace(/^\?/,""):"",hash:U.hash?U.hash.replace(/^#/,""):"",hostname:U.hostname,port:U.port,pathname:U.pathname.charAt(0)==="/"?U.pathname:"/"+U.pathname}}return M=L(window.location.href),function(P){var $=W.isString(P)?L(P):P;return $.protocol===M.protocol&&$.host===M.host}}():function(){return function(){return!0}}()},6016:(d,ne,q)=>{"use strict";var W=q(4867);d.exports=function(se,U){W.forEach(se,function(L,I){I!==U&&I.toUpperCase()===U.toUpperCase()&&(se[U]=L,delete se[I])})}},4109:(d,ne,q)=>{"use strict";var W=q(4867),J=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];d.exports=function(U){var M={},L,I,P;return U&&W.forEach(U.split(`
`),function(G){if(P=G.indexOf(":"),L=W.trim(G.substr(0,P)).toLowerCase(),I=W.trim(G.substr(P+1)),L){if(M[L]&&J.indexOf(L)>=0)return;L==="set-cookie"?M[L]=(M[L]?M[L]:[]).concat([I]):M[L]=M[L]?M[L]+", "+I:I}}),M}},8713:d=>{"use strict";d.exports=function(q){return function(J){return q.apply(null,J)}}},4875:(d,ne,q)=>{"use strict";var W=q(696),J={};["object","boolean","number","function","string","symbol"].forEach(function(I,P){J[I]=function(G){return typeof G===I||"a"+(P<1?"n ":" ")+I}});var se={},U=W.version.split(".");function M(I,P){for(var $=P?P.split("."):U,G=I.split("."),z=0;z<3;z++){if($[z]>G[z])return!0;if($[z]<G[z])return!1}return!1}J.transitional=function(P,$,G){var z=$&&M($);function O(V,B){return"[Axios v"+W.version+"] Transitional option '"+V+"'"+B+(G?". "+G:"")}return function(V,B,j){if(P===!1)throw new Error(O(B," has been removed in "+$));return z&&!se[B]&&(se[B]=!0,console.warn(O(B," has been deprecated since v"+$+" and will be removed in the near future"))),P?P(V,B,j):!0}};function L(I,P,$){if(typeof I!="object")throw new TypeError("options must be an object");for(var G=Object.keys(I),z=G.length;z-- >0;){var O=G[z],V=P[O];if(V){var B=I[O],j=B===void 0||V(B,O,I);if(j!==!0)throw new TypeError("option "+O+" must be "+j);continue}if($!==!0)throw Error("Unknown option "+O)}}d.exports={isOlderVersion:M,assertOptions:L,validators:J}},4867:(d,ne,q)=>{"use strict";var W=q(1849),J=Object.prototype.toString;function se(X){return J.call(X)==="[object Array]"}function U(X){return typeof X=="undefined"}function M(X){return X!==null&&!U(X)&&X.constructor!==null&&!U(X.constructor)&&typeof X.constructor.isBuffer=="function"&&X.constructor.isBuffer(X)}function L(X){return J.call(X)==="[object ArrayBuffer]"}function I(X){return typeof FormData!="undefined"&&X instanceof FormData}function P(X){var he;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?he=ArrayBuffer.isView(X):he=X&&X.buffer&&X.buffer instanceof ArrayBuffer,he}function $(X){return typeof X=="string"}function G(X){return typeof X=="number"}function z(X){return X!==null&&typeof X=="object"}function O(X){if(J.call(X)!=="[object Object]")return!1;var he=Object.getPrototypeOf(X);return he===null||he===Object.prototype}function V(X){return J.call(X)==="[object Date]"}function B(X){return J.call(X)==="[object File]"}function j(X){return J.call(X)==="[object Blob]"}function ce(X){return J.call(X)==="[object Function]"}function ee(X){return z(X)&&ce(X.pipe)}function Se(X){return typeof URLSearchParams!="undefined"&&X instanceof URLSearchParams}function fe(X){return X.trim?X.trim():X.replace(/^\s+|\s+$/g,"")}function De(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function Z(X,he){if(!(X===null||typeof X=="undefined"))if(typeof X!="object"&&(X=[X]),se(X))for(var we=0,Ee=X.length;we<Ee;we++)he.call(null,X[we],we,X);else for(var Pe in X)Object.prototype.hasOwnProperty.call(X,Pe)&&he.call(null,X[Pe],Pe,X)}function de(){var X={};function he(Pe,ke){O(X[ke])&&O(Pe)?X[ke]=de(X[ke],Pe):O(Pe)?X[ke]=de({},Pe):se(Pe)?X[ke]=Pe.slice():X[ke]=Pe}for(var we=0,Ee=arguments.length;we<Ee;we++)Z(arguments[we],he);return X}function ie(X,he,we){return Z(he,function(Pe,ke){we&&typeof Pe=="function"?X[ke]=W(Pe,we):X[ke]=Pe}),X}function re(X){return X.charCodeAt(0)===65279&&(X=X.slice(1)),X}d.exports={isArray:se,isArrayBuffer:L,isBuffer:M,isFormData:I,isArrayBufferView:P,isString:$,isNumber:G,isObject:z,isPlainObject:O,isUndefined:U,isDate:V,isFile:B,isBlob:j,isFunction:ce,isStream:ee,isURLSearchParams:Se,isStandardBrowserEnv:De,forEach:Z,merge:de,extend:ie,trim:fe,stripBOM:re}},696:d=>{"use strict";d.exports=JSON.parse('{"name":"axios","version":"0.21.4","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://axios-http.com","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.14.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')},5186:(d,ne,q)=>{var W=q(3698),J=q(2505),se=q(5382),U=Function.bind,M=U.bind(U);function L(z,O,V){var B=M(se,null).apply(null,V?[O,V]:[O]);z.api={remove:B},z.remove=B,["before","error","after","wrap"].forEach(function(j){var ce=V?[O,j,V]:[O,j];z[j]=z.api[j]=M(J,null).apply(null,ce)})}function I(){var z="h",O={registry:{}},V=W.bind(null,O,z);return L(V,O,z),V}function P(){var z={registry:{}},O=W.bind(null,z);return L(O,z),O}var $=!1;function G(){return $||(console.warn('[before-after-hook]: "Hook()" repurposing warning, use "Hook.Collection()". Read more: https://git.io/upgrade-before-after-hook-to-1.4'),$=!0),P()}G.Singular=I.bind(),G.Collection=P.bind(),d.exports=G,d.exports.Hook=G,d.exports.Singular=G.Singular,d.exports.Collection=G.Collection},2505:d=>{d.exports=ne;function ne(q,W,J,se){var U=se;q.registry[J]||(q.registry[J]=[]),W==="before"&&(se=function(M,L){return Promise.resolve().then(U.bind(null,L)).then(M.bind(null,L))}),W==="after"&&(se=function(M,L){var I;return Promise.resolve().then(M.bind(null,L)).then(function(P){return I=P,U(I,L)}).then(function(){return I})}),W==="error"&&(se=function(M,L){return Promise.resolve().then(M.bind(null,L)).catch(function(I){return U(I,L)})}),q.registry[J].push({hook:se,orig:U})}},3698:d=>{d.exports=ne;function ne(q,W,J,se){if(typeof J!="function")throw new Error("method for before hook must be a function");return se||(se={}),Array.isArray(W)?W.reverse().reduce(function(U,M){return ne.bind(null,q,M,U,se)},J)():Promise.resolve().then(function(){return q.registry[W]?q.registry[W].reduce(function(U,M){return M.hook.bind(null,U,se)},J)():J(se)})}},5382:d=>{d.exports=ne;function ne(q,W,J){if(!!q.registry[W]){var se=q.registry[W].map(function(U){return U.orig}).indexOf(J);se!==-1&&q.registry[W].splice(se,1)}}},5175:d=>{"use strict";function ne(q){if(!/^data:/i.test(q))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');q=q.replace(/\r?\n/g,"");const W=q.indexOf(",");if(W===-1||W<=4)throw new TypeError("malformed data: URI");const J=q.substring(5,W).split(";");let se="",U=!1;const M=J[0]||"text/plain";let L=M;for(let G=1;G<J.length;G++)J[G]==="base64"?U=!0:(L+=`;${J[G]}`,J[G].indexOf("charset=")===0&&(se=J[G].substring(8)));!J[0]&&!se.length&&(L+=";charset=US-ASCII",se="US-ASCII");const I=U?"base64":"ascii",P=unescape(q.substring(W+1)),$=Buffer.from(P,I);return $.type=M,$.typeFull=L,$.charset=se,$}d.exports=ne},7484:function(d){(function(ne,q){d.exports=q()})(this,function(){"use strict";var ne="millisecond",q="second",W="minute",J="hour",se="day",U="week",M="month",L="quarter",I="year",P="date",$=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,G=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,z={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},O=function(de,ie,re){var X=String(de);return!X||X.length>=ie?de:""+Array(ie+1-X.length).join(re)+de},V={s:O,z:function(de){var ie=-de.utcOffset(),re=Math.abs(ie),X=Math.floor(re/60),he=re%60;return(ie<=0?"+":"-")+O(X,2,"0")+":"+O(he,2,"0")},m:function de(ie,re){if(ie.date()<re.date())return-de(re,ie);var X=12*(re.year()-ie.year())+(re.month()-ie.month()),he=ie.clone().add(X,M),we=re-he<0,Ee=ie.clone().add(X+(we?-1:1),M);return+(-(X+(re-he)/(we?he-Ee:Ee-he))||0)},a:function(de){return de<0?Math.ceil(de)||0:Math.floor(de)},p:function(de){return{M,y:I,w:U,d:se,D:P,h:J,m:W,s:q,ms:ne,Q:L}[de]||String(de||"").toLowerCase().replace(/s$/,"")},u:function(de){return de===void 0}},B="en",j={};j[B]=z;var ce=function(de){return de instanceof De},ee=function(de,ie,re){var X;if(!de)return B;if(typeof de=="string")j[de]&&(X=de),ie&&(j[de]=ie,X=de);else{var he=de.name;j[he]=de,X=he}return!re&&X&&(B=X),X||!re&&B},Se=function(de,ie){if(ce(de))return de.clone();var re=typeof ie=="object"?ie:{};return re.date=de,re.args=arguments,new De(re)},fe=V;fe.l=ee,fe.i=ce,fe.w=function(de,ie){return Se(de,{locale:ie.$L,utc:ie.$u,x:ie.$x,$offset:ie.$offset})};var De=function(){function de(re){this.$L=ee(re.locale,null,!0),this.parse(re)}var ie=de.prototype;return ie.parse=function(re){this.$d=function(X){var he=X.date,we=X.utc;if(he===null)return new Date(NaN);if(fe.u(he))return new Date;if(he instanceof Date)return new Date(he);if(typeof he=="string"&&!/Z$/i.test(he)){var Ee=he.match($);if(Ee){var Pe=Ee[2]-1||0,ke=(Ee[7]||"0").substring(0,3);return we?new Date(Date.UTC(Ee[1],Pe,Ee[3]||1,Ee[4]||0,Ee[5]||0,Ee[6]||0,ke)):new Date(Ee[1],Pe,Ee[3]||1,Ee[4]||0,Ee[5]||0,Ee[6]||0,ke)}}return new Date(he)}(re),this.$x=re.x||{},this.init()},ie.init=function(){var re=this.$d;this.$y=re.getFullYear(),this.$M=re.getMonth(),this.$D=re.getDate(),this.$W=re.getDay(),this.$H=re.getHours(),this.$m=re.getMinutes(),this.$s=re.getSeconds(),this.$ms=re.getMilliseconds()},ie.$utils=function(){return fe},ie.isValid=function(){return this.$d.toString()!=="Invalid Date"},ie.isSame=function(re,X){var he=Se(re);return this.startOf(X)<=he&&he<=this.endOf(X)},ie.isAfter=function(re,X){return Se(re)<this.startOf(X)},ie.isBefore=function(re,X){return this.endOf(X)<Se(re)},ie.$g=function(re,X,he){return fe.u(re)?this[X]:this.set(he,re)},ie.unix=function(){return Math.floor(this.valueOf()/1e3)},ie.valueOf=function(){return this.$d.getTime()},ie.startOf=function(re,X){var he=this,we=!!fe.u(X)||X,Ee=fe.p(re),Pe=function(rr,Xt){var Ir=fe.w(he.$u?Date.UTC(he.$y,Xt,rr):new Date(he.$y,Xt,rr),he);return we?Ir:Ir.endOf(se)},ke=function(rr,Xt){return fe.w(he.toDate()[rr].apply(he.toDate("s"),(we?[0,0,0,0]:[23,59,59,999]).slice(Xt)),he)},je=this.$W,Ye=this.$M,ct=this.$D,yt="set"+(this.$u?"UTC":"");switch(Ee){case I:return we?Pe(1,0):Pe(31,11);case M:return we?Pe(1,Ye):Pe(0,Ye+1);case U:var zt=this.$locale().weekStart||0,Yt=(je<zt?je+7:je)-zt;return Pe(we?ct-Yt:ct+(6-Yt),Ye);case se:case P:return ke(yt+"Hours",0);case J:return ke(yt+"Minutes",1);case W:return ke(yt+"Seconds",2);case q:return ke(yt+"Milliseconds",3);default:return this.clone()}},ie.endOf=function(re){return this.startOf(re,!1)},ie.$set=function(re,X){var he,we=fe.p(re),Ee="set"+(this.$u?"UTC":""),Pe=(he={},he[se]=Ee+"Date",he[P]=Ee+"Date",he[M]=Ee+"Month",he[I]=Ee+"FullYear",he[J]=Ee+"Hours",he[W]=Ee+"Minutes",he[q]=Ee+"Seconds",he[ne]=Ee+"Milliseconds",he)[we],ke=we===se?this.$D+(X-this.$W):X;if(we===M||we===I){var je=this.clone().set(P,1);je.$d[Pe](ke),je.init(),this.$d=je.set(P,Math.min(this.$D,je.daysInMonth())).$d}else Pe&&this.$d[Pe](ke);return this.init(),this},ie.set=function(re,X){return this.clone().$set(re,X)},ie.get=function(re){return this[fe.p(re)]()},ie.add=function(re,X){var he,we=this;re=Number(re);var Ee=fe.p(X),Pe=function(Ye){var ct=Se(we);return fe.w(ct.date(ct.date()+Math.round(Ye*re)),we)};if(Ee===M)return this.set(M,this.$M+re);if(Ee===I)return this.set(I,this.$y+re);if(Ee===se)return Pe(1);if(Ee===U)return Pe(7);var ke=(he={},he[W]=6e4,he[J]=36e5,he[q]=1e3,he)[Ee]||1,je=this.$d.getTime()+re*ke;return fe.w(je,this)},ie.subtract=function(re,X){return this.add(-1*re,X)},ie.format=function(re){var X=this;if(!this.isValid())return"Invalid Date";var he=re||"YYYY-MM-DDTHH:mm:ssZ",we=fe.z(this),Ee=this.$locale(),Pe=this.$H,ke=this.$m,je=this.$M,Ye=Ee.weekdays,ct=Ee.months,yt=function(Xt,Ir,qr,Sn){return Xt&&(Xt[Ir]||Xt(X,he))||qr[Ir].substr(0,Sn)},zt=function(Xt){return fe.s(Pe%12||12,Xt,"0")},Yt=Ee.meridiem||function(Xt,Ir,qr){var Sn=Xt<12?"AM":"PM";return qr?Sn.toLowerCase():Sn},rr={YY:String(this.$y).slice(-2),YYYY:this.$y,M:je+1,MM:fe.s(je+1,2,"0"),MMM:yt(Ee.monthsShort,je,ct,3),MMMM:yt(ct,je),D:this.$D,DD:fe.s(this.$D,2,"0"),d:String(this.$W),dd:yt(Ee.weekdaysMin,this.$W,Ye,2),ddd:yt(Ee.weekdaysShort,this.$W,Ye,3),dddd:Ye[this.$W],H:String(Pe),HH:fe.s(Pe,2,"0"),h:zt(1),hh:zt(2),a:Yt(Pe,ke,!0),A:Yt(Pe,ke,!1),m:String(ke),mm:fe.s(ke,2,"0"),s:String(this.$s),ss:fe.s(this.$s,2,"0"),SSS:fe.s(this.$ms,3,"0"),Z:we};return he.replace(G,function(Xt,Ir){return Ir||rr[Xt]||we.replace(":","")})},ie.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},ie.diff=function(re,X,he){var we,Ee=fe.p(X),Pe=Se(re),ke=6e4*(Pe.utcOffset()-this.utcOffset()),je=this-Pe,Ye=fe.m(this,Pe);return Ye=(we={},we[I]=Ye/12,we[M]=Ye,we[L]=Ye/3,we[U]=(je-ke)/6048e5,we[se]=(je-ke)/864e5,we[J]=je/36e5,we[W]=je/6e4,we[q]=je/1e3,we)[Ee]||je,he?Ye:fe.a(Ye)},ie.daysInMonth=function(){return this.endOf(M).$D},ie.$locale=function(){return j[this.$L]},ie.locale=function(re,X){if(!re)return this.$L;var he=this.clone(),we=ee(re,X,!0);return we&&(he.$L=we),he},ie.clone=function(){return fe.w(this.$d,this)},ie.toDate=function(){return new Date(this.valueOf())},ie.toJSON=function(){return this.isValid()?this.toISOString():null},ie.toISOString=function(){return this.$d.toISOString()},ie.toString=function(){return this.$d.toUTCString()},de}(),Z=De.prototype;return Se.prototype=Z,[["$ms",ne],["$s",q],["$m",W],["$H",J],["$W",se],["$M",M],["$y",I],["$D",P]].forEach(function(de){Z[de[1]]=function(ie){return this.$g(ie,de[0],de[1])}}),Se.extend=function(de,ie){return de.$i||(de(ie,De,Se),de.$i=!0),Se},Se.locale=ee,Se.isDayjs=ce,Se.unix=function(de){return Se(1e3*de)},Se.en=j[B],Se.Ls=j,Se.p={},Se})},4110:function(d){(function(ne,q){d.exports=q()})(this,function(){"use strict";return function(ne,q,W){ne=ne||{};var J=q.prototype,se={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function U(L,I,P,$){return J.fromToBase(L,I,P,$)}W.en.relativeTime=se,J.fromToBase=function(L,I,P,$,G){for(var z,O,V,B=P.$locale().relativeTime||se,j=ne.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],ce=j.length,ee=0;ee<ce;ee+=1){var Se=j[ee];Se.d&&(z=$?W(L).diff(P,Se.d,!0):P.diff(L,Se.d,!0));var fe=(ne.rounding||Math.round)(Math.abs(z));if(V=z>0,fe<=Se.r||!Se.r){fe<=1&&ee>0&&(Se=j[ee-1]);var De=B[Se.l];G&&(fe=G(""+fe)),O=typeof De=="string"?De.replace("%d",fe):De(fe,I,Se.l,V);break}}if(I)return O;var Z=V?B.future:B.past;return typeof Z=="function"?Z(O):Z.replace("%s",O)},J.to=function(L,I){return U(L,I,this,!0)},J.from=function(L,I){return U(L,I,this)};var M=function(L){return L.$u?W.utc():W()};J.toNow=function(L){return this.to(M(this),L)},J.fromNow=function(L){return this.from(M(this),L)}}})},660:function(d){(function(ne,q){d.exports=q()})(this,function(){"use strict";return function(ne,q,W){W.updateLocale=function(J,se){var U=W.Ls[J];if(U)return(se?Object.keys(se):[]).forEach(function(M){U[M]=se[M]}),U}}})},9435:d=>{var ne=1e3,q=ne*60,W=q*60,J=W*24,se=J*7,U=J*365.25;d.exports=function($,G){G=G||{};var z=typeof $;if(z==="string"&&$.length>0)return M($);if(z==="number"&&isFinite($))return G.long?I($):L($);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify($))};function M($){if($=String($),!($.length>100)){var G=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec($);if(!!G){var z=parseFloat(G[1]),O=(G[2]||"ms").toLowerCase();switch(O){case"years":case"year":case"yrs":case"yr":case"y":return z*U;case"weeks":case"week":case"w":return z*se;case"days":case"day":case"d":return z*J;case"hours":case"hour":case"hrs":case"hr":case"h":return z*W;case"minutes":case"minute":case"mins":case"min":case"m":return z*q;case"seconds":case"second":case"secs":case"sec":case"s":return z*ne;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return z;default:return}}}}function L($){var G=Math.abs($);return G>=J?Math.round($/J)+"d":G>=W?Math.round($/W)+"h":G>=q?Math.round($/q)+"m":G>=ne?Math.round($/ne)+"s":$+"ms"}function I($){var G=Math.abs($);return G>=J?P($,G,J,"day"):G>=W?P($,G,W,"hour"):G>=q?P($,G,q,"minute"):G>=ne?P($,G,ne,"second"):$+" ms"}function P($,G,z,O){var V=G>=z*1.5;return Math.round($/z)+" "+O+(V?"s":"")}},1227:(d,ne,q)=>{ne.formatArgs=J,ne.save=se,ne.load=U,ne.useColors=W,ne.storage=M(),ne.destroy=(()=>{let I=!1;return()=>{I||(I=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),ne.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function W(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function J(I){if(I[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+I[0]+(this.useColors?"%c ":" ")+"+"+d.exports.humanize(this.diff),!this.useColors)return;const P="color: "+this.color;I.splice(1,0,P,"color: inherit");let $=0,G=0;I[0].replace(/%[a-zA-Z%]/g,z=>{z!=="%%"&&($++,z==="%c"&&(G=$))}),I.splice(G,0,P)}ne.log=console.debug||console.log||(()=>{});function se(I){try{I?ne.storage.setItem("debug",I):ne.storage.removeItem("debug")}catch(P){}}function U(){let I;try{I=ne.storage.getItem("debug")}catch(P){}return!I&&typeof process!="undefined"&&"env"in process&&(I=process.env.DEBUG),I}function M(){try{return localStorage}catch(I){}}d.exports=q(2447)(ne);const{formatters:L}=d.exports;L.j=function(I){try{return JSON.stringify(I)}catch(P){return"[UnexpectedJSONParseError]: "+P.message}}},2447:(d,ne,q)=>{function W(J){U.debug=U,U.default=U,U.coerce=G,U.disable=I,U.enable=L,U.enabled=P,U.humanize=q(9435),U.destroy=z,Object.keys(J).forEach(O=>{U[O]=J[O]}),U.names=[],U.skips=[],U.formatters={};function se(O){let V=0;for(let B=0;B<O.length;B++)V=(V<<5)-V+O.charCodeAt(B),V|=0;return U.colors[Math.abs(V)%U.colors.length]}U.selectColor=se;function U(O){let V,B=null;function j(...ce){if(!j.enabled)return;const ee=j,Se=Number(new Date),fe=Se-(V||Se);ee.diff=fe,ee.prev=V,ee.curr=Se,V=Se,ce[0]=U.coerce(ce[0]),typeof ce[0]!="string"&&ce.unshift("%O");let De=0;ce[0]=ce[0].replace(/%([a-zA-Z%])/g,(de,ie)=>{if(de==="%%")return"%";De++;const re=U.formatters[ie];if(typeof re=="function"){const X=ce[De];de=re.call(ee,X),ce.splice(De,1),De--}return de}),U.formatArgs.call(ee,ce),(ee.log||U.log).apply(ee,ce)}return j.namespace=O,j.useColors=U.useColors(),j.color=U.selectColor(O),j.extend=M,j.destroy=U.destroy,Object.defineProperty(j,"enabled",{enumerable:!0,configurable:!1,get:()=>B===null?U.enabled(O):B,set:ce=>{B=ce}}),typeof U.init=="function"&&U.init(j),j}function M(O,V){const B=U(this.namespace+(typeof V=="undefined"?":":V)+O);return B.log=this.log,B}function L(O){U.save(O),U.names=[],U.skips=[];let V;const B=(typeof O=="string"?O:"").split(/[\s,]+/),j=B.length;for(V=0;V<j;V++)!B[V]||(O=B[V].replace(/\*/g,".*?"),O[0]==="-"?U.skips.push(new RegExp("^"+O.substr(1)+"$")):U.names.push(new RegExp("^"+O+"$")))}function I(){const O=[...U.names.map($),...U.skips.map($).map(V=>"-"+V)].join(",");return U.enable(""),O}function P(O){if(O[O.length-1]==="*")return!0;let V,B;for(V=0,B=U.skips.length;V<B;V++)if(U.skips[V].test(O))return!1;for(V=0,B=U.names.length;V<B;V++)if(U.names[V].test(O))return!0;return!1}function $(O){return O.toString().substring(2,O.toString().length-2).replace(/\.\*\?$/,"*")}function G(O){return O instanceof Error?O.stack||O.message:O}function z(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return U.enable(U.load()),U}d.exports=W},5158:(d,ne,q)=>{typeof process=="undefined"||process.type==="renderer"||process.browser===!0||process.__nwjs?d.exports=q(1227):d.exports=q(39)},39:(d,ne,q)=>{const W=q(3867),J=q(1669);ne.init=$,ne.log=L,ne.formatArgs=U,ne.save=I,ne.load=P,ne.useColors=se,ne.destroy=J.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),ne.colors=[6,2,3,4,5,1];try{const z=q(2130);z&&(z.stderr||z).level>=2&&(ne.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(z){}ne.inspectOpts=Object.keys(process.env).filter(z=>/^debug_/i.test(z)).reduce((z,O)=>{const V=O.substring(6).toLowerCase().replace(/_([a-z])/g,(j,ce)=>ce.toUpperCase());let B=process.env[O];return/^(yes|on|true|enabled)$/i.test(B)?B=!0:/^(no|off|false|disabled)$/i.test(B)?B=!1:B==="null"?B=null:B=Number(B),z[V]=B,z},{});function se(){return"colors"in ne.inspectOpts?Boolean(ne.inspectOpts.colors):W.isatty(process.stderr.fd)}function U(z){const{namespace:O,useColors:V}=this;if(V){const B=this.color,j="[3"+(B<8?B:"8;5;"+B),ce=`  ${j};1m${O} [0m`;z[0]=ce+z[0].split(`
`).join(`
`+ce),z.push(j+"m+"+d.exports.humanize(this.diff)+"[0m")}else z[0]=M()+O+" "+z[0]}function M(){return ne.inspectOpts.hideDate?"":new Date().toISOString()+" "}function L(...z){return process.stderr.write(J.format(...z)+`
`)}function I(z){z?process.env.DEBUG=z:delete process.env.DEBUG}function P(){return process.env.DEBUG}function $(z){z.inspectOpts={};const O=Object.keys(ne.inspectOpts);for(let V=0;V<O.length;V++)z.inspectOpts[O[V]]=ne.inspectOpts[O[V]]}d.exports=q(2447)(ne);const{formatters:G}=d.exports;G.o=function(z){return this.inspectOpts.colors=this.useColors,J.inspect(z,this.inspectOpts).split(`
`).map(O=>O.trim()).join(" ")},G.O=function(z){return this.inspectOpts.colors=this.useColors,J.inspect(z,this.inspectOpts)}},4063:d=>{"use strict";d.exports=function ne(q,W){if(q===W)return!0;if(q&&W&&typeof q=="object"&&typeof W=="object"){if(q.constructor!==W.constructor)return!1;var J,se,U;if(Array.isArray(q)){if(J=q.length,J!=W.length)return!1;for(se=J;se--!=0;)if(!ne(q[se],W[se]))return!1;return!0}if(q.constructor===RegExp)return q.source===W.source&&q.flags===W.flags;if(q.valueOf!==Object.prototype.valueOf)return q.valueOf()===W.valueOf();if(q.toString!==Object.prototype.toString)return q.toString()===W.toString();if(U=Object.keys(q),J=U.length,J!==Object.keys(W).length)return!1;for(se=J;se--!=0;)if(!Object.prototype.hasOwnProperty.call(W,U[se]))return!1;for(se=J;se--!=0;){var M=U[se];if(!ne(q[M],W[M]))return!1}return!0}return q!==q&&W!==W}},5035:d=>{"use strict";d.exports=function(ne,q){q||(q={}),typeof q=="function"&&(q={cmp:q});var W=typeof q.cycles=="boolean"?q.cycles:!1,J=q.cmp&&function(U){return function(M){return function(L,I){var P={key:L,value:M[L]},$={key:I,value:M[I]};return U(P,$)}}}(q.cmp),se=[];return function U(M){if(M&&M.toJSON&&typeof M.toJSON=="function"&&(M=M.toJSON()),M!==void 0){if(typeof M=="number")return isFinite(M)?""+M:"null";if(typeof M!="object")return JSON.stringify(M);var L,I;if(Array.isArray(M)){for(I="[",L=0;L<M.length;L++)L&&(I+=","),I+=U(M[L])||"null";return I+"]"}if(M===null)return"null";if(se.indexOf(M)!==-1){if(W)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var P=se.push(M)-1,$=Object.keys(M).sort(J&&J(M));for(I="",L=0;L<$.length;L++){var G=$[L],z=U(M[G]);!z||(I&&(I+=","),I+=JSON.stringify(G)+":"+z)}return se.splice(P,1),"{"+I+"}"}}(ne)}},6030:(d,ne,q)=>{const{Readable:W}=q(2413),J=new WeakMap;async function*se(M){for(const L of M)"stream"in L?yield*L.stream():yield L}class U{constructor(L=[],I={type:""}){let P=0;const $=L.map(z=>{let O;return z instanceof Buffer?O=z:ArrayBuffer.isView(z)?O=Buffer.from(z.buffer,z.byteOffset,z.byteLength):z instanceof ArrayBuffer?O=Buffer.from(z):z instanceof U?O=z:O=Buffer.from(typeof z=="string"?z:String(z)),P+=O.length||O.size||0,O}),G=I.type===void 0?"":String(I.type).toLowerCase();J.set(this,{type:/[^\u0020-\u007E]/.test(G)?"":G,size:P,parts:$})}get size(){return J.get(this).size}get type(){return J.get(this).type}async text(){return Buffer.from(await this.arrayBuffer()).toString()}async arrayBuffer(){const L=new Uint8Array(this.size);let I=0;for await(const P of this.stream())L.set(P,I),I+=P.length;return L.buffer}stream(){return W.from(se(J.get(this).parts))}slice(L=0,I=this.size,P=""){const{size:$}=this;let G=L<0?Math.max($+L,0):Math.min(L,$),z=I<0?Math.max($+I,0):Math.min(I,$);const O=Math.max(z-G,0),V=J.get(this).parts.values(),B=[];let j=0;for(const ee of V){const Se=ArrayBuffer.isView(ee)?ee.byteLength:ee.size;if(G&&Se<=G)G-=Se,z-=Se;else{const fe=ee.slice(G,Math.min(Se,z));if(B.push(fe),j+=ArrayBuffer.isView(fe)?fe.byteLength:fe.size,G=0,j>=O)break}}const ce=new U([],{type:P});return Object.assign(J.get(ce),{size:O,parts:B}),ce}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](L){return typeof L=="object"&&typeof L.stream=="function"&&L.stream.length===0&&typeof L.constructor=="function"&&/^(Blob|File)$/.test(L[Symbol.toStringTag])}}Object.defineProperties(U.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),d.exports=U},2261:(d,ne,q)=>{var W;d.exports=function(){if(!W){try{W=q(5158)("follow-redirects")}catch(J){}typeof W!="function"&&(W=function(){})}W.apply(null,arguments)}},938:(d,ne,q)=>{var W=q(8835),J=W.URL,se=q(8605),U=q(7211),M=q(2413).Writable,L=q(2357),I=q(2261),P=["abort","aborted","connect","error","socket","timeout"],$=Object.create(null);P.forEach(function(Z){$[Z]=function(de,ie,re){this._redirectable.emit(Z,de,ie,re)}});var G=fe("ERR_FR_REDIRECTION_FAILURE",""),z=fe("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),O=fe("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),V=fe("ERR_STREAM_WRITE_AFTER_END","write after end");function B(Z,de){M.call(this),this._sanitizeOptions(Z),this._options=Z,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],de&&this.on("response",de);var ie=this;this._onNativeResponse=function(re){ie._processResponse(re)},this._performRequest()}B.prototype=Object.create(M.prototype),B.prototype.abort=function(){De(this._currentRequest),this.emit("abort")},B.prototype.write=function(Z,de,ie){if(this._ending)throw new V;if(!(typeof Z=="string"||typeof Z=="object"&&"length"in Z))throw new TypeError("data should be a string, Buffer or Uint8Array");if(typeof de=="function"&&(ie=de,de=null),Z.length===0){ie&&ie();return}this._requestBodyLength+Z.length<=this._options.maxBodyLength?(this._requestBodyLength+=Z.length,this._requestBodyBuffers.push({data:Z,encoding:de}),this._currentRequest.write(Z,de,ie)):(this.emit("error",new O),this.abort())},B.prototype.end=function(Z,de,ie){if(typeof Z=="function"?(ie=Z,Z=de=null):typeof de=="function"&&(ie=de,de=null),!Z)this._ended=this._ending=!0,this._currentRequest.end(null,null,ie);else{var re=this,X=this._currentRequest;this.write(Z,de,function(){re._ended=!0,X.end(null,null,ie)}),this._ending=!0}},B.prototype.setHeader=function(Z,de){this._options.headers[Z]=de,this._currentRequest.setHeader(Z,de)},B.prototype.removeHeader=function(Z){delete this._options.headers[Z],this._currentRequest.removeHeader(Z)},B.prototype.setTimeout=function(Z,de){var ie=this;function re(we){we.setTimeout(Z),we.removeListener("timeout",we.destroy),we.addListener("timeout",we.destroy)}function X(we){ie._timeout&&clearTimeout(ie._timeout),ie._timeout=setTimeout(function(){ie.emit("timeout"),he()},Z),re(we)}function he(){ie._timeout&&(clearTimeout(ie._timeout),ie._timeout=null),de&&ie.removeListener("timeout",de),ie.socket||ie._currentRequest.removeListener("socket",X)}return de&&this.on("timeout",de),this.socket?X(this.socket):this._currentRequest.once("socket",X),this.on("socket",re),this.once("response",he),this.once("error",he),this},["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(Z){B.prototype[Z]=function(de,ie){return this._currentRequest[Z](de,ie)}}),["aborted","connection","socket"].forEach(function(Z){Object.defineProperty(B.prototype,Z,{get:function(){return this._currentRequest[Z]}})}),B.prototype._sanitizeOptions=function(Z){if(Z.headers||(Z.headers={}),Z.host&&(Z.hostname||(Z.hostname=Z.host),delete Z.host),!Z.pathname&&Z.path){var de=Z.path.indexOf("?");de<0?Z.pathname=Z.path:(Z.pathname=Z.path.substring(0,de),Z.search=Z.path.substring(de))}},B.prototype._performRequest=function(){var Z=this._options.protocol,de=this._options.nativeProtocols[Z];if(!de){this.emit("error",new TypeError("Unsupported protocol "+Z));return}if(this._options.agents){var ie=Z.substr(0,Z.length-1);this._options.agent=this._options.agents[ie]}var re=this._currentRequest=de.request(this._options,this._onNativeResponse);this._currentUrl=W.format(this._options),re._redirectable=this;for(var X=0;X<P.length;X++)re.on(P[X],$[P[X]]);if(this._isRedirect){var he=0,we=this,Ee=this._requestBodyBuffers;(function Pe(ke){if(re===we._currentRequest)if(ke)we.emit("error",ke);else if(he<Ee.length){var je=Ee[he++];re.finished||re.write(je.data,je.encoding,Pe)}else we._ended&&re.end()})()}},B.prototype._processResponse=function(Z){var de=Z.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:Z.headers,statusCode:de});var ie=Z.headers.location;if(ie&&this._options.followRedirects!==!1&&de>=300&&de<400){if(De(this._currentRequest),Z.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new z);return}((de===301||de===302)&&this._options.method==="POST"||de===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],Se(/^content-/i,this._options.headers));var re=Se(/^host$/i,this._options.headers)||W.parse(this._currentUrl).hostname,X=W.resolve(this._currentUrl,ie);I("redirecting to",X),this._isRedirect=!0;var he=W.parse(X);if(Object.assign(this._options,he),he.hostname!==re&&Se(/^authorization$/i,this._options.headers),typeof this._options.beforeRedirect=="function"){var we={headers:Z.headers};try{this._options.beforeRedirect.call(null,this._options,we)}catch(Pe){this.emit("error",Pe);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(Pe){var Ee=new G("Redirected request failed: "+Pe.message);Ee.cause=Pe,this.emit("error",Ee)}}else Z.responseUrl=this._currentUrl,Z.redirects=this._redirects,this.emit("response",Z),this._requestBodyBuffers=[]};function j(Z){var de={maxRedirects:21,maxBodyLength:10*1024*1024},ie={};return Object.keys(Z).forEach(function(re){var X=re+":",he=ie[X]=Z[re],we=de[re]=Object.create(he);function Ee(ke,je,Ye){if(typeof ke=="string"){var ct=ke;try{ke=ee(new J(ct))}catch(yt){ke=W.parse(ct)}}else J&&ke instanceof J?ke=ee(ke):(Ye=je,je=ke,ke={protocol:X});return typeof je=="function"&&(Ye=je,je=null),je=Object.assign({maxRedirects:de.maxRedirects,maxBodyLength:de.maxBodyLength},ke,je),je.nativeProtocols=ie,L.equal(je.protocol,X,"protocol mismatch"),I("options",je),new B(je,Ye)}function Pe(ke,je,Ye){var ct=we.request(ke,je,Ye);return ct.end(),ct}Object.defineProperties(we,{request:{value:Ee,configurable:!0,enumerable:!0,writable:!0},get:{value:Pe,configurable:!0,enumerable:!0,writable:!0}})}),de}function ce(){}function ee(Z){var de={protocol:Z.protocol,hostname:Z.hostname.startsWith("[")?Z.hostname.slice(1,-1):Z.hostname,hash:Z.hash,search:Z.search,pathname:Z.pathname,path:Z.pathname+Z.search,href:Z.href};return Z.port!==""&&(de.port=Number(Z.port)),de}function Se(Z,de){var ie;for(var re in de)Z.test(re)&&(ie=de[re],delete de[re]);return ie}function fe(Z,de){function ie(re){Error.captureStackTrace(this,this.constructor),this.message=re||de}return ie.prototype=new Error,ie.prototype.constructor=ie,ie.prototype.name="Error ["+Z+"]",ie.prototype.code=Z,ie}function De(Z){for(var de=0;de<P.length;de++)Z.removeListener(P[de],$[P[de]]);Z.on("error",ce),Z.abort()}d.exports=j({http:se,https:U}),d.exports.wrap=j},9967:d=>{var ne={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"Merged"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MergedEvent"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"actor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mergeRef"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"commitUrl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"HeadRefDeleted"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"HeadRefDeletedEvent"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"actor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"headRefName"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Ref"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Ref"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"target"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Comment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"IssueComment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"authorAssociation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanUpdate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanReact"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanDelete"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Commit"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequestCommit"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"committer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"authoredDate"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"AssignedEvent"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AssignedEvent"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"actor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Review"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequestReview"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"authorAssociation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"submittedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Reactable"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Reactable"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reactionGroups"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerHasReacted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"users"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ReviewThread"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequestReviewThread"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isResolved"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanResolve"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanUnresolve"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"diffSide"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"line"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"originalLine"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isOutdated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"TimelineEvents"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"last"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"150"},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"timelineItems"},arguments:[{kind:"Argument",name:{kind:"Name",value:"last"},value:{kind:"Variable",name:{kind:"Name",value:"last"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Merged"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Comment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Review"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Commit"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"AssignedEvent"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"HeadRefDeleted"},directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"IssueTimelineEvents"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"last"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"150"},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"pullRequest"},name:{kind:"Name",value:"issue"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"timelineItems"},arguments:[{kind:"Argument",name:{kind:"Name",value:"last"},value:{kind:"Variable",name:{kind:"Name",value:"last"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Comment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"AssignedEvent"},directives:[]}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ReviewComment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequestReviewComment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"originalPosition"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"diffHunk"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"position"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pullRequestReview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"replyTo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"originalCommit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"reactionGroups"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerHasReacted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"users"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"viewerCanUpdate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanDelete"},arguments:[],directives:[]}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetPendingReviewId"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pullRequestId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"author"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"pullRequestId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequest"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reviews"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}},{kind:"Argument",name:{kind:"Name",value:"author"},value:{kind:"Variable",name:{kind:"Name",value:"author"}}},{kind:"Argument",name:{kind:"Name",value:"states"},value:{kind:"ListValue",values:[{kind:"EnumValue",value:"PENDING"}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequestComments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"100"},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reviewThreads"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isResolved"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanResolve"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanUnresolve"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"diffSide"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"line"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"originalLine"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isOutdated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequest"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"headRef"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Ref"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"headRefName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"headRefOid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"headRepository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"baseRef"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Ref"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"baseRefName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"baseRefOid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"baseRepository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"merged"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mergeable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isDraft"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"milestone"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"assignees"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"suggestedReviewers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isAuthor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isCommenter"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reviewer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequestFiles"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"after"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"files"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"after"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerViewedState"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Issue"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"pullRequest"},name:{kind:"Name",value:"issue"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"IssueWithComments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"pullRequest"},name:{kind:"Name",value:"issue"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"IntValue",value:"50"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"bio"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"company"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"location"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contributionsCollection"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commitContributionsByRepository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"maxRepositories"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"contributions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"occurredAt"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nameWithOwner"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequestMergeability"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mergeable"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequestState"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddPullRequestReviewCommentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addPullRequestReviewComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"comment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddReviewThread"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddPullRequestReviewThreadInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addPullRequestReviewThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"thread"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewThread"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"EditComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdatePullRequestReviewCommentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updatePullRequestReviewComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequestReviewComment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ReadyForReview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"MarkPullRequestReadyForReviewInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"markPullRequestReadyForReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isDraft"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"StartReview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddPullRequestReviewInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addPullRequestReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequestReview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SubmitReview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"event"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"PullRequestReviewEvent"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"body"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"submitPullRequestReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"event"},value:{kind:"Variable",name:{kind:"Name",value:"event"}}},{kind:"ObjectField",name:{kind:"Name",value:"pullRequestReviewId"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"ObjectField",name:{kind:"Name",value:"body"},value:{kind:"Variable",name:{kind:"Name",value:"body"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequestReview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"Review"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteReview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DeletePullRequestReviewInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deletePullRequestReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequestReview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddReaction"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddReactionInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addReaction"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reaction"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subject"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Reactable"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteReaction"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"RemoveReactionInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"removeReaction"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reaction"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subject"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Reactable"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdatePullRequest"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdatePullRequestInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updatePullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddIssueComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddCommentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commentEdge"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Comment"},directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"EditIssueComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateIssueCommentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateIssueComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issueComment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Comment"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetMentionableUsers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"after"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mentionableUsers"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"after"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetAssignableUsers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"after"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"assignableUsers"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"after"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"IssuesWithoutMilestone"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"assignee"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issues"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}},{kind:"Argument",name:{kind:"Name",value:"states"},value:{kind:"EnumValue",value:"OPEN"}},{kind:"Argument",name:{kind:"Name",value:"filterBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"assignee"},value:{kind:"Variable",name:{kind:"Name",value:"assignee"}}},{kind:"ObjectField",name:{kind:"Name",value:"milestone"},value:{kind:"NullValue"}}]}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"direction"},value:{kind:"EnumValue",value:"DESC"}},{kind:"ObjectField",name:{kind:"Name",value:"field"},value:{kind:"EnumValue",value:"UPDATED_AT"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Issue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignees"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"IntValue",value:"50"}}],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"milestone"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"MaxIssue"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issues"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"direction"},value:{kind:"EnumValue",value:"DESC"}},{kind:"ObjectField",name:{kind:"Name",value:"field"},value:{kind:"EnumValue",value:"CREATED_AT"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Issue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetMilestones"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"assignee"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"milestones"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"12"}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"direction"},value:{kind:"EnumValue",value:"DESC"}},{kind:"ObjectField",name:{kind:"Name",value:"field"},value:{kind:"EnumValue",value:"DUE_DATE"}}]}},{kind:"Argument",name:{kind:"Name",value:"states"},value:{kind:"EnumValue",value:"OPEN"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"issues"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}},{kind:"Argument",name:{kind:"Name",value:"filterBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"assignee"},value:{kind:"Variable",name:{kind:"Name",value:"assignee"}}}]}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"direction"},value:{kind:"EnumValue",value:"DESC"}},{kind:"ObjectField",name:{kind:"Name",value:"field"},value:{kind:"EnumValue",value:"UPDATED_AT"}}]}},{kind:"Argument",name:{kind:"Name",value:"states"},value:{kind:"EnumValue",value:"OPEN"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Issue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignees"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"IntValue",value:"50"}}],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"milestone"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Issues"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"search"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}},{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"ISSUE"}},{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"query"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issueCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Issue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignees"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"IntValue",value:"50"}}],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"milestone"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetViewerPermission"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewerPermission"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetRepositoryForkDetails"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isFork"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"parent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetChecks"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commits"},arguments:[{kind:"Argument",name:{kind:"Name",value:"last"},value:{kind:"IntValue",value:"1"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"statusCheckRollup"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contexts"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"StatusContext"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"targetUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"context"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CheckRun"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"conclusion"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"detailsUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resourcePath"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"checkSuite"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"app"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"logoUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ResolveReviewThread"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ResolveReviewThreadInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"resolveReviewThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"thread"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewThread"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UnresolveReviewThread"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnresolveReviewThreadInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unresolveReviewThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"thread"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewThread"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"MarkFileAsViewed"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"MarkFileAsViewedInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"markFileAsViewed"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UnmarkFileAsViewed"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnmarkFileAsViewedInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unmarkFileAsViewed"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:14578}};ne.loc.source={body:`# /*---------------------------------------------------------------------------------------------
#  *  Copyright (c) Microsoft Corporation. All rights reserved.
#  *  Licensed under the MIT License. See License.txt in the project root for license information.
#  *--------------------------------------------------------------------------------------------*/

fragment Merged on MergedEvent {
	id
	actor {
		login
		avatarUrl
		url
	}
	createdAt
	mergeRef {
		name
	}
	commit {
		oid
		commitUrl
	}
	url
}

fragment HeadRefDeleted on HeadRefDeletedEvent {
	id
	actor {
		login
		avatarUrl
		url
	}
	createdAt
	headRefName
}

fragment Ref on Ref {
	name
	repository {
		owner {
			login
		}
		url
	}
	target {
		oid
	}
}

fragment Comment on IssueComment {
	id
	databaseId
	authorAssociation
	author {
		login
		avatarUrl
		url
		... on User {
			email
		}
		... on Organization {
			email
		}
	}
	url
	body
	bodyHTML
	updatedAt
	createdAt
	viewerCanUpdate
	viewerCanReact
	viewerCanDelete
}

fragment Commit on PullRequestCommit {
	id
	commit {
		author {
			user {
				login
				avatarUrl
				url
				email
			}
		}
		committer {
			avatarUrl
			name
		}
		oid
		message
		authoredDate
	}
	url
}

fragment AssignedEvent on AssignedEvent {
	actor {
		login
		avatarUrl
		url
	}
	user {
		login
		avatarUrl
		url
	}
}

fragment Review on PullRequestReview {
	id
	databaseId
	authorAssociation
	url
	author {
		login
		avatarUrl
		url
		... on User {
			email
		}
		... on Organization {
			email
		}
	}
	state
	body
	bodyHTML
	submittedAt
	updatedAt
	createdAt
}

fragment Reactable on Reactable {
	reactionGroups {
		content
		viewerHasReacted
		users {
			totalCount
		}
	}
}

fragment ReviewThread on PullRequestReviewThread {
	id
	isResolved
	viewerCanResolve
	viewerCanUnresolve
	path
	diffSide
	line
	originalLine
	isOutdated
	comments(first: 100) {
		nodes {
			...ReviewComment
		}
	}
}

query TimelineEvents($owner: String!, $name: String!, $number: Int!, $last: Int = 150) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			timelineItems(last: $last) {
				nodes {
					__typename
					...Merged
					...Comment
					...Review
					...Commit
					...AssignedEvent
					...HeadRefDeleted
				}
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query IssueTimelineEvents($owner: String!, $name: String!, $number: Int!, $last: Int = 150) {
	repository(owner: $owner, name: $name) {
		pullRequest: issue(number: $number) {
			timelineItems(last: $last) {
				nodes {
					__typename
					...Comment
					...AssignedEvent
				}
			}
		}
	}
}

fragment ReviewComment on PullRequestReviewComment {
	id
	databaseId
	url
	author {
		login
		avatarUrl
		url
		... on User {
			email
		}
		... on Organization {
			email
		}
	}
	path
	originalPosition
	body
	bodyHTML
	diffHunk
	position
	state
	pullRequestReview {
		databaseId
	}
	commit {
		oid
	}
	replyTo {
		databaseId
	}
	createdAt
	originalCommit {
		oid
	}
	reactionGroups {
		content
		viewerHasReacted
		users {
			totalCount
		}
	}
	viewerCanUpdate
	viewerCanDelete
}

query GetPendingReviewId($pullRequestId: ID!, $author: String!) {
	node(id: $pullRequestId) {
		... on PullRequest {
			reviews(first: 1, author: $author, states: [PENDING]) {
				nodes {
					id
				}
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query PullRequestComments($owner: String!, $name: String!, $number: Int!, $first: Int = 100) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			reviewThreads(first: $first) {
				nodes {
					id
					isResolved
					viewerCanResolve
					viewerCanUnresolve
					path
					diffSide
					line
					originalLine
					isOutdated
					comments(first: 100) {
						nodes {
							...ReviewComment
						}
					}
				}
			}
		}
	}
}

query PullRequest($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			number
			url
			state
			body
			bodyHTML
			title
			author {
				login
				url
				avatarUrl
				... on User {
					email
				}
				... on Organization {
					email
				}
			}
			createdAt
			updatedAt
			headRef {
				...Ref
			}
			headRefName
			headRefOid
			headRepository {
				owner {
					login
				}
				url
			}
			baseRef {
				...Ref
			}
			baseRefName
			baseRefOid
			baseRepository {
				owner {
					login
				}
				url
			}
			labels(first: 50) {
				nodes {
					name
				}
			}
			merged
			mergeable
			id
			databaseId
			isDraft
			milestone {
				title
				dueOn
				createdAt
				id
			}
			assignees(first: 10) {
				nodes {
					login
					name
					avatarUrl
					url
					email
				}
			}
			suggestedReviewers {
				isAuthor
				isCommenter
				reviewer {
					login
					avatarUrl
					name
					url
				}
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query PullRequestFiles($owner: String!, $name: String!, $number: Int!, $after: String) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			files(first: 100, after: $after) {
				nodes {
					path
					viewerViewedState
				}
				pageInfo {
					hasNextPage
					endCursor
				}
			}
		}
	}
}

query Issue($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest: issue(number: $number) {
			number
			url
			state
			body
			bodyHTML
			title
			author {
				login
				url
				avatarUrl
				... on User {
					email
				}
				... on Organization {
					email
				}
			}
			createdAt
			updatedAt
			labels(first: 50) {
				nodes {
					name
					color
				}
			}
			id
			databaseId
		}
	}
}

query IssueWithComments($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest: issue(number: $number) {
			number
			url
			state
			body
			bodyHTML
			title
			author {
				login
				url
				avatarUrl
				... on User {
					email
				}
				... on Organization {
					email
				}
			}
			createdAt
			updatedAt
			labels(first: 50) {
				nodes {
					name
					color
				}
			}
			id
			databaseId
			comments(first: 50) {
				nodes {
					author {
						login
						url
						avatarUrl
						... on User {
							email
						}
						... on Organization {
							email
						}
					}
					body
					databaseId
				}
			}
		}
	}
}

query GetUser($login: String!) {
	user(login: $login) {
		login
		avatarUrl(size: 50)
		bio
		name
		company
		location
		contributionsCollection {
			commitContributionsByRepository(maxRepositories: 50) {
				contributions(first: 1) {
					nodes {
						occurredAt
					}
				}
				repository {
					nameWithOwner
				}
			}
		}
		url
	}
}

query PullRequestMergeability($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			mergeable
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query PullRequestState($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			title
			number
			state
		}
	}
}

mutation AddComment($input: AddPullRequestReviewCommentInput!) {
	addPullRequestReviewComment(input: $input) {
		comment {
			...ReviewComment
		}
	}
}

mutation AddReviewThread($input: AddPullRequestReviewThreadInput!) {
	addPullRequestReviewThread(input: $input) {
		thread {
			...ReviewThread
		}
	}
}

mutation EditComment($input: UpdatePullRequestReviewCommentInput!) {
	updatePullRequestReviewComment(input: $input) {
		pullRequestReviewComment {
			...ReviewComment
		}
	}
}

mutation ReadyForReview($input: MarkPullRequestReadyForReviewInput!) {
	markPullRequestReadyForReview(input: $input) {
		pullRequest {
			isDraft
		}
	}
}

mutation StartReview($input: AddPullRequestReviewInput!) {
	addPullRequestReview(input: $input) {
		pullRequestReview {
			id
		}
	}
}

mutation SubmitReview($id: ID!, $event: PullRequestReviewEvent!, $body: String) {
	submitPullRequestReview(input: { event: $event, pullRequestReviewId: $id, body: $body }) {
		pullRequestReview {
			comments(first: 100) {
				nodes {
					...ReviewComment
				}
			}
			...Review
		}
	}
}

mutation DeleteReview($input: DeletePullRequestReviewInput!) {
	deletePullRequestReview(input: $input) {
		pullRequestReview {
			databaseId
			comments(first: 100) {
				nodes {
					...ReviewComment
				}
			}
		}
	}
}

mutation AddReaction($input: AddReactionInput!) {
	addReaction(input: $input) {
		reaction {
			content
		}
		subject {
			...Reactable
		}
	}
}

mutation DeleteReaction($input: RemoveReactionInput!) {
	removeReaction(input: $input) {
		reaction {
			content
		}
		subject {
			...Reactable
		}
	}
}

mutation UpdatePullRequest($input: UpdatePullRequestInput!) {
	updatePullRequest(input: $input) {
		pullRequest {
			body
			bodyHTML
			title
		}
	}
}

mutation AddIssueComment($input: AddCommentInput!) {
	addComment(input: $input) {
		commentEdge {
			node {
				...Comment
			}
		}
	}
}

mutation EditIssueComment($input: UpdateIssueCommentInput!) {
	updateIssueComment(input: $input) {
		issueComment {
			...Comment
		}
	}
}

query GetMentionableUsers($owner: String!, $name: String!, $first: Int!, $after: String) {
	repository(owner: $owner, name: $name) {
		mentionableUsers(first: $first, after: $after) {
			nodes {
				login
				avatarUrl
				name
				url
				email
			}
			pageInfo {
				hasNextPage
				endCursor
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query GetAssignableUsers($owner: String!, $name: String!, $first: Int!, $after: String) {
	repository(owner: $owner, name: $name) {
		assignableUsers(first: $first, after: $after) {
			nodes {
				login
				avatarUrl
				name
				url
				email
			}
			pageInfo {
				hasNextPage
				endCursor
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query IssuesWithoutMilestone($owner: String!, $name: String!, $assignee: String!) {
	repository(owner: $owner, name: $name) {
		issues(
			first: 100
			states: OPEN
			filterBy: { assignee: $assignee, milestone: null }
			orderBy: { direction: DESC, field: UPDATED_AT }
		) {
			edges {
				node {
					... on Issue {
						number
						url
						state
						body
						bodyHTML
						title
						assignees(first: 10) {
							nodes {
								login
								url
								email
							}
						}
						author {
							login
							url
							avatarUrl(size: 50)
							... on User {
								email
							}
							... on Organization {
								email
							}
						}
						createdAt
						updatedAt
						labels(first: 50) {
							nodes {
								name
								color
							}
						}
						id
						databaseId
						milestone {
							title
							dueOn
						}
					}
				}
			}
			pageInfo {
				hasNextPage
				endCursor
			}
		}
	}
}

query MaxIssue($owner: String!, $name: String!) {
	repository(owner: $owner, name: $name) {
		issues(first: 1, orderBy: { direction: DESC, field: CREATED_AT }) {
			edges {
				node {
					... on Issue {
						number
					}
				}
			}
		}
	}
}

query GetMilestones($owner: String!, $name: String!, $assignee: String!) {
	repository(owner: $owner, name: $name) {
		milestones(first: 12, orderBy: { direction: DESC, field: DUE_DATE }, states: OPEN) {
			nodes {
				dueOn
				title
				createdAt
				id
				issues(
					first: 100
					filterBy: { assignee: $assignee }
					orderBy: { direction: DESC, field: UPDATED_AT }
					states: OPEN
				) {
					edges {
						node {
							... on Issue {
								number
								url
								state
								body
								bodyHTML
								title
								assignees(first: 10) {
									nodes {
										avatarUrl
										email
										login
										url
									}
								}
								author {
									login
									url
									avatarUrl(size: 50)
									... on User {
										email
									}
									... on Organization {
										email
									}
								}
								createdAt
								updatedAt
								labels(first: 50) {
									nodes {
										name
										color
									}
								}
								id
								databaseId
								milestone {
									title
									dueOn
								}
							}
						}
					}
				}
			}
			pageInfo {
				hasNextPage
				endCursor
			}
		}
	}
}

query Issues($query: String!) {
	search(first: 100, type: ISSUE, query: $query) {
		issueCount
		pageInfo {
			hasNextPage
			endCursor
		}
		edges {
			node {
				... on Issue {
					number
					url
					state
					body
					bodyHTML
					title
					assignees(first: 10) {
						nodes {
							avatarUrl
							email
							login
							url
						}
					}
					author {
						login
						url
						avatarUrl(size: 50)
						... on User {
							email
						}
						... on Organization {
							email
						}
					}
					createdAt
					updatedAt
					labels(first: 50) {
						nodes {
							name
							color
						}
					}
					id
					databaseId
					milestone {
						title
						dueOn
						id
						createdAt
					}
					repository {
						name
						owner {
							login
						}
						url
					}
				}
			}
		}
	}
}

query GetViewerPermission($owner: String!, $name: String!) {
	repository(owner: $owner, name: $name) {
		viewerPermission
	}
}

query GetRepositoryForkDetails($owner: String!, $name: String!) {
	repository(owner: $owner, name: $name) {
		isFork
		parent {
			name
			owner {
				login
			}
		}
	}
}

query GetChecks($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			commits(last: 1) {
				nodes {
					commit {
						statusCheckRollup {
							state
							contexts(first: 100) {
								nodes {
									... on StatusContext {
										id
										state
										targetUrl
										description
										context
										avatarUrl
									}
									... on CheckRun {
										id
										conclusion
										title
										detailsUrl
										name
										resourcePath
										checkSuite {
											app {
												logoUrl
												url
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}

mutation ResolveReviewThread($input: ResolveReviewThreadInput!) {
	resolveReviewThread(input: $input) {
		thread {
			...ReviewThread
		}
	}
}

mutation UnresolveReviewThread($input: UnresolveReviewThreadInput!) {
	unresolveReviewThread(input: $input) {
		thread {
			...ReviewThread
		}
	}
}

mutation MarkFileAsViewed($input: MarkFileAsViewedInput!) {
	markFileAsViewed(input: $input) {
		pullRequest {
			id
		}
	}
}

mutation UnmarkFileAsViewed($input: UnmarkFileAsViewedInput!) {
	unmarkFileAsViewed(input: $input) {
		pullRequest {
			id
		}
	}
}`,name:"GraphQL request",locationOffset:{line:1,column:1}};var q={};function W(L){return L.filter(function(I){if(I.kind!=="FragmentDefinition")return!0;var P=I.name.value;return q[P]?!1:(q[P]=!0,!0)})}function J(L,I){if(L.kind==="FragmentSpread")I.add(L.name.value);else if(L.kind==="VariableDefinition"){var P=L.type;P.kind==="NamedType"&&I.add(P.name.value)}L.selectionSet&&L.selectionSet.selections.forEach(function($){J($,I)}),L.variableDefinitions&&L.variableDefinitions.forEach(function($){J($,I)}),L.definitions&&L.definitions.forEach(function($){J($,I)})}var se={};(function(){ne.definitions.forEach(function(I){if(I.name){var P=new Set;J(I,P),se[I.name.value]=P}})})();function U(L,I){for(var P=0;P<L.definitions.length;P++){var $=L.definitions[P];if($.name&&$.name.value==I)return $}}function M(L,I){var P={kind:L.kind,definitions:[U(L,I)]};L.hasOwnProperty("loc")&&(P.loc=L.loc);var $=se[I]||new Set,G=new Set,z=new Set;for($.forEach(function(V){z.add(V)});z.size>0;){var O=z;z=new Set,O.forEach(function(V){if(!G.has(V)){G.add(V);var B=se[V]||new Set;B.forEach(function(j){z.add(j)})}})}return G.forEach(function(V){var B=U(L,V);B&&P.definitions.push(B)}),P}d.exports=ne,d.exports.TimelineEvents=M(ne,"TimelineEvents"),d.exports.IssueTimelineEvents=M(ne,"IssueTimelineEvents"),d.exports.GetPendingReviewId=M(ne,"GetPendingReviewId"),d.exports.PullRequestComments=M(ne,"PullRequestComments"),d.exports.PullRequest=M(ne,"PullRequest"),d.exports.PullRequestFiles=M(ne,"PullRequestFiles"),d.exports.Issue=M(ne,"Issue"),d.exports.IssueWithComments=M(ne,"IssueWithComments"),d.exports.GetUser=M(ne,"GetUser"),d.exports.PullRequestMergeability=M(ne,"PullRequestMergeability"),d.exports.PullRequestState=M(ne,"PullRequestState"),d.exports.AddComment=M(ne,"AddComment"),d.exports.AddReviewThread=M(ne,"AddReviewThread"),d.exports.EditComment=M(ne,"EditComment"),d.exports.ReadyForReview=M(ne,"ReadyForReview"),d.exports.StartReview=M(ne,"StartReview"),d.exports.SubmitReview=M(ne,"SubmitReview"),d.exports.DeleteReview=M(ne,"DeleteReview"),d.exports.AddReaction=M(ne,"AddReaction"),d.exports.DeleteReaction=M(ne,"DeleteReaction"),d.exports.UpdatePullRequest=M(ne,"UpdatePullRequest"),d.exports.AddIssueComment=M(ne,"AddIssueComment"),d.exports.EditIssueComment=M(ne,"EditIssueComment"),d.exports.GetMentionableUsers=M(ne,"GetMentionableUsers"),d.exports.GetAssignableUsers=M(ne,"GetAssignableUsers"),d.exports.IssuesWithoutMilestone=M(ne,"IssuesWithoutMilestone"),d.exports.MaxIssue=M(ne,"MaxIssue"),d.exports.GetMilestones=M(ne,"GetMilestones"),d.exports.Issues=M(ne,"Issues"),d.exports.GetViewerPermission=M(ne,"GetViewerPermission"),d.exports.GetRepositoryForkDetails=M(ne,"GetRepositoryForkDetails"),d.exports.GetChecks=M(ne,"GetChecks"),d.exports.ResolveReviewThread=M(ne,"ResolveReviewThread"),d.exports.UnresolveReviewThread=M(ne,"UnresolveReviewThread"),d.exports.MarkFileAsViewed=M(ne,"MarkFileAsViewed"),d.exports.UnmarkFileAsViewed=M(ne,"UnmarkFileAsViewed")},972:(d,ne,q)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0}),ne.default=U;var W=se(q(7706)),J=se(q(8554));function se(M){return M&&M.__esModule?M:{default:M}}function U(M){var L=M.prototype.toJSON;typeof L=="function"||(0,W.default)(0),M.prototype.inspect=L,J.default&&(M.prototype[J.default]=L)}},8002:(d,ne,q)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0}),ne.default=L;var W=J(q(8554));function J(V){return V&&V.__esModule?V:{default:V}}function se(V){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?se=function(j){return typeof j}:se=function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},se(V)}var U=10,M=2;function L(V){return I(V,[])}function I(V,B){switch(se(V)){case"string":return JSON.stringify(V);case"function":return V.name?"[function ".concat(V.name,"]"):"[function]";case"object":return V===null?"null":P(V,B);default:return String(V)}}function P(V,B){if(B.indexOf(V)!==-1)return"[Circular]";var j=[].concat(B,[V]),ce=z(V);if(ce!==void 0){var ee=ce.call(V);if(ee!==V)return typeof ee=="string"?ee:I(ee,j)}else if(Array.isArray(V))return G(V,j);return $(V,j)}function $(V,B){var j=Object.keys(V);if(j.length===0)return"{}";if(B.length>M)return"["+O(V)+"]";var ce=j.map(function(ee){var Se=I(V[ee],B);return ee+": "+Se});return"{ "+ce.join(", ")+" }"}function G(V,B){if(V.length===0)return"[]";if(B.length>M)return"[Array]";for(var j=Math.min(U,V.length),ce=V.length-j,ee=[],Se=0;Se<j;++Se)ee.push(I(V[Se],B));return ce===1?ee.push("... 1 more item"):ce>1&&ee.push("... ".concat(ce," more items")),"["+ee.join(", ")+"]"}function z(V){var B=V[String(W.default)];if(typeof B=="function")return B;if(typeof V.inspect=="function")return V.inspect}function O(V){var B=Object.prototype.toString.call(V).replace(/^\[object /,"").replace(/]$/,"");if(B==="Object"&&typeof V.constructor=="function"){var j=V.constructor.name;if(typeof j=="string"&&j!=="")return j}return B}},7706:(d,ne)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0}),ne.default=q;function q(W,J){var se=Boolean(W);if(!se)throw new Error(J!=null?J:"Unexpected invariant triggered.")}},8554:(d,ne)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0}),ne.default=void 0;var q=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):void 0,W=q;ne.default=W},1807:(d,ne,q)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0}),ne.isNode=M,ne.Token=ne.Location=void 0;var W=J(q(972));function J(L){return L&&L.__esModule?L:{default:L}}var se=function(){function L(P,$,G){this.start=P.start,this.end=$.end,this.startToken=P,this.endToken=$,this.source=G}var I=L.prototype;return I.toJSON=function(){return{start:this.start,end:this.end}},L}();ne.Location=se,(0,W.default)(se);var U=function(){function L(P,$,G,z,O,V,B){this.kind=P,this.start=$,this.end=G,this.line=z,this.column=O,this.value=B,this.prev=V,this.next=null}var I=L.prototype;return I.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},L}();ne.Token=U,(0,W.default)(U);function M(L){return L!=null&&typeof L.kind=="string"}},849:(d,ne)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0}),ne.dedentBlockStringValue=q,ne.getBlockStringIndentation=J,ne.printBlockString=se;function q(U){var M=U.split(/\r\n|[\n\r]/g),L=J(U);if(L!==0)for(var I=1;I<M.length;I++)M[I]=M[I].slice(L);for(var P=0;P<M.length&&W(M[P]);)++P;for(var $=M.length;$>P&&W(M[$-1]);)--$;return M.slice(P,$).join(`
`)}function W(U){for(var M=0;M<U.length;++M)if(U[M]!==" "&&U[M]!=="	")return!1;return!0}function J(U){for(var M,L=!0,I=!0,P=0,$=null,G=0;G<U.length;++G)switch(U.charCodeAt(G)){case 13:U.charCodeAt(G+1)===10&&++G;case 10:L=!1,I=!0,P=0;break;case 9:case 32:++P;break;default:I&&!L&&($===null||P<$)&&($=P),I=!1}return(M=$)!==null&&M!==void 0?M:0}function se(U){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",L=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,I=U.indexOf(`
`)===-1,P=U[0]===" "||U[0]==="	",$=U[U.length-1]==='"',G=U[U.length-1]==="\\",z=!I||$||G||L,O="";return z&&!(I&&P)&&(O+=`
`+M),O+=M?U.replace(/\n/g,`
`+M):U,z&&(O+=`
`),'"""'+O.replace(/"""/g,'\\"""')+'"""'}},3033:(d,ne,q)=>{"use strict";var W;W={value:!0},ne.S=U;var J=q(285),se=q(849);function U(B){return(0,J.visit)(B,{leave:L})}var M=80,L={Name:function(j){return j.value},Variable:function(j){return"$"+j.name},Document:function(j){return P(j.definitions,`

`)+`
`},OperationDefinition:function(j){var ce=j.operation,ee=j.name,Se=G("(",P(j.variableDefinitions,", "),")"),fe=P(j.directives," "),De=j.selectionSet;return!ee&&!fe&&!Se&&ce==="query"?De:P([ce,P([ee,Se]),fe,De]," ")},VariableDefinition:function(j){var ce=j.variable,ee=j.type,Se=j.defaultValue,fe=j.directives;return ce+": "+ee+G(" = ",Se)+G(" ",P(fe," "))},SelectionSet:function(j){var ce=j.selections;return $(ce)},Field:function(j){var ce=j.alias,ee=j.name,Se=j.arguments,fe=j.directives,De=j.selectionSet,Z=G("",ce,": ")+ee,de=Z+G("(",P(Se,", "),")");return de.length>M&&(de=Z+G(`(
`,z(P(Se,`
`)),`
)`)),P([de,P(fe," "),De]," ")},Argument:function(j){var ce=j.name,ee=j.value;return ce+": "+ee},FragmentSpread:function(j){var ce=j.name,ee=j.directives;return"..."+ce+G(" ",P(ee," "))},InlineFragment:function(j){var ce=j.typeCondition,ee=j.directives,Se=j.selectionSet;return P(["...",G("on ",ce),P(ee," "),Se]," ")},FragmentDefinition:function(j){var ce=j.name,ee=j.typeCondition,Se=j.variableDefinitions,fe=j.directives,De=j.selectionSet;return"fragment ".concat(ce).concat(G("(",P(Se,", "),")")," ")+"on ".concat(ee," ").concat(G("",P(fe," ")," "))+De},IntValue:function(j){var ce=j.value;return ce},FloatValue:function(j){var ce=j.value;return ce},StringValue:function(j,ce){var ee=j.value,Se=j.block;return Se?(0,se.printBlockString)(ee,ce==="description"?"":"  "):JSON.stringify(ee)},BooleanValue:function(j){var ce=j.value;return ce?"true":"false"},NullValue:function(){return"null"},EnumValue:function(j){var ce=j.value;return ce},ListValue:function(j){var ce=j.values;return"["+P(ce,", ")+"]"},ObjectValue:function(j){var ce=j.fields;return"{"+P(ce,", ")+"}"},ObjectField:function(j){var ce=j.name,ee=j.value;return ce+": "+ee},Directive:function(j){var ce=j.name,ee=j.arguments;return"@"+ce+G("(",P(ee,", "),")")},NamedType:function(j){var ce=j.name;return ce},ListType:function(j){var ce=j.type;return"["+ce+"]"},NonNullType:function(j){var ce=j.type;return ce+"!"},SchemaDefinition:I(function(B){var j=B.directives,ce=B.operationTypes;return P(["schema",P(j," "),$(ce)]," ")}),OperationTypeDefinition:function(j){var ce=j.operation,ee=j.type;return ce+": "+ee},ScalarTypeDefinition:I(function(B){var j=B.name,ce=B.directives;return P(["scalar",j,P(ce," ")]," ")}),ObjectTypeDefinition:I(function(B){var j=B.name,ce=B.interfaces,ee=B.directives,Se=B.fields;return P(["type",j,G("implements ",P(ce," & ")),P(ee," "),$(Se)]," ")}),FieldDefinition:I(function(B){var j=B.name,ce=B.arguments,ee=B.type,Se=B.directives;return j+(V(ce)?G(`(
`,z(P(ce,`
`)),`
)`):G("(",P(ce,", "),")"))+": "+ee+G(" ",P(Se," "))}),InputValueDefinition:I(function(B){var j=B.name,ce=B.type,ee=B.defaultValue,Se=B.directives;return P([j+": "+ce,G("= ",ee),P(Se," ")]," ")}),InterfaceTypeDefinition:I(function(B){var j=B.name,ce=B.interfaces,ee=B.directives,Se=B.fields;return P(["interface",j,G("implements ",P(ce," & ")),P(ee," "),$(Se)]," ")}),UnionTypeDefinition:I(function(B){var j=B.name,ce=B.directives,ee=B.types;return P(["union",j,P(ce," "),ee&&ee.length!==0?"= "+P(ee," | "):""]," ")}),EnumTypeDefinition:I(function(B){var j=B.name,ce=B.directives,ee=B.values;return P(["enum",j,P(ce," "),$(ee)]," ")}),EnumValueDefinition:I(function(B){var j=B.name,ce=B.directives;return P([j,P(ce," ")]," ")}),InputObjectTypeDefinition:I(function(B){var j=B.name,ce=B.directives,ee=B.fields;return P(["input",j,P(ce," "),$(ee)]," ")}),DirectiveDefinition:I(function(B){var j=B.name,ce=B.arguments,ee=B.repeatable,Se=B.locations;return"directive @"+j+(V(ce)?G(`(
`,z(P(ce,`
`)),`
)`):G("(",P(ce,", "),")"))+(ee?" repeatable":"")+" on "+P(Se," | ")}),SchemaExtension:function(j){var ce=j.directives,ee=j.operationTypes;return P(["extend schema",P(ce," "),$(ee)]," ")},ScalarTypeExtension:function(j){var ce=j.name,ee=j.directives;return P(["extend scalar",ce,P(ee," ")]," ")},ObjectTypeExtension:function(j){var ce=j.name,ee=j.interfaces,Se=j.directives,fe=j.fields;return P(["extend type",ce,G("implements ",P(ee," & ")),P(Se," "),$(fe)]," ")},InterfaceTypeExtension:function(j){var ce=j.name,ee=j.interfaces,Se=j.directives,fe=j.fields;return P(["extend interface",ce,G("implements ",P(ee," & ")),P(Se," "),$(fe)]," ")},UnionTypeExtension:function(j){var ce=j.name,ee=j.directives,Se=j.types;return P(["extend union",ce,P(ee," "),Se&&Se.length!==0?"= "+P(Se," | "):""]," ")},EnumTypeExtension:function(j){var ce=j.name,ee=j.directives,Se=j.values;return P(["extend enum",ce,P(ee," "),$(Se)]," ")},InputObjectTypeExtension:function(j){var ce=j.name,ee=j.directives,Se=j.fields;return P(["extend input",ce,P(ee," "),$(Se)]," ")}};function I(B){return function(j){return P([j.description,B(j)],`
`)}}function P(B){var j,ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(j=B==null?void 0:B.filter(function(ee){return ee}).join(ce))!==null&&j!==void 0?j:""}function $(B){return G(`{
`,z(P(B,`
`)),`
}`)}function G(B,j){var ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return j!=null&&j!==""?B+j+ce:""}function z(B){return G("  ",B.replace(/\n/g,`
  `))}function O(B){return B.indexOf(`
`)!==-1}function V(B){return B!=null&&B.some(O)}},285:(d,ne,q)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0}),ne.visit=L,ne.visitInParallel=I,ne.getVisitFn=P,ne.BREAK=ne.QueryDocumentKeys=void 0;var W=se(q(8002)),J=q(1807);function se($){return $&&$.__esModule?$:{default:$}}var U={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]};ne.QueryDocumentKeys=U;var M=Object.freeze({});ne.BREAK=M;function L($,G){var z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:U,O=void 0,V=Array.isArray($),B=[$],j=-1,ce=[],ee=void 0,Se=void 0,fe=void 0,De=[],Z=[],de=$;do{j++;var ie=j===B.length,re=ie&&ce.length!==0;if(ie){if(Se=Z.length===0?void 0:De[De.length-1],ee=fe,fe=Z.pop(),re){if(V)ee=ee.slice();else{for(var X={},he=0,we=Object.keys(ee);he<we.length;he++){var Ee=we[he];X[Ee]=ee[Ee]}ee=X}for(var Pe=0,ke=0;ke<ce.length;ke++){var je=ce[ke][0],Ye=ce[ke][1];V&&(je-=Pe),V&&Ye===null?(ee.splice(je,1),Pe++):ee[je]=Ye}}j=O.index,B=O.keys,ce=O.edits,V=O.inArray,O=O.prev}else{if(Se=fe?V?j:B[j]:void 0,ee=fe?fe[Se]:de,ee==null)continue;fe&&De.push(Se)}var ct=void 0;if(!Array.isArray(ee)){if(!(0,J.isNode)(ee))throw new Error("Invalid AST Node: ".concat((0,W.default)(ee),"."));var yt=P(G,ee.kind,ie);if(yt){if(ct=yt.call(G,ee,Se,fe,De,Z),ct===M)break;if(ct===!1){if(!ie){De.pop();continue}}else if(ct!==void 0&&(ce.push([Se,ct]),!ie))if((0,J.isNode)(ct))ee=ct;else{De.pop();continue}}}if(ct===void 0&&re&&ce.push([Se,ee]),ie)De.pop();else{var zt;O={inArray:V,index:j,keys:B,edits:ce,prev:O},V=Array.isArray(ee),B=V?ee:(zt=z[ee.kind])!==null&&zt!==void 0?zt:[],j=-1,ce=[],fe&&Z.push(fe),fe=ee}}while(O!==void 0);return ce.length!==0&&(de=ce[ce.length-1][1]),de}function I($){var G=new Array($.length);return{enter:function(O){for(var V=0;V<$.length;V++)if(G[V]==null){var B=P($[V],O.kind,!1);if(B){var j=B.apply($[V],arguments);if(j===!1)G[V]=O;else if(j===M)G[V]=M;else if(j!==void 0)return j}}},leave:function(O){for(var V=0;V<$.length;V++)if(G[V]==null){var B=P($[V],O.kind,!0);if(B){var j=B.apply($[V],arguments);if(j===M)G[V]=M;else if(j!==void 0&&j!==!1)return j}}else G[V]===O&&(G[V]=null)}}}function P($,G,z){var O=$[G];if(O){if(!z&&typeof O=="function")return O;var V=z?O.leave:O.enter;if(typeof V=="function")return V}else{var B=z?$.leave:$.enter;if(B){if(typeof B=="function")return B;var j=B[G];if(typeof j=="function")return j}}}},6560:d=>{"use strict";d.exports=(ne,q=process.argv)=>{const W=ne.startsWith("-")?"":ne.length===1?"-":"--",J=q.indexOf(W+ne),se=q.indexOf("--");return J!==-1&&(se===-1||J<se)}},9593:(d,ne,q)=>{"use strict";const W=q(4411),J=Symbol("max"),se=Symbol("length"),U=Symbol("lengthCalculator"),M=Symbol("allowStale"),L=Symbol("maxAge"),I=Symbol("dispose"),P=Symbol("noDisposeOnSet"),$=Symbol("lruList"),G=Symbol("cache"),z=Symbol("updateAgeOnGet"),O=()=>1;class V{constructor(Z){if(typeof Z=="number"&&(Z={max:Z}),Z||(Z={}),Z.max&&(typeof Z.max!="number"||Z.max<0))throw new TypeError("max must be a non-negative number");const de=this[J]=Z.max||Infinity,ie=Z.length||O;if(this[U]=typeof ie!="function"?O:ie,this[M]=Z.stale||!1,Z.maxAge&&typeof Z.maxAge!="number")throw new TypeError("maxAge must be a number");this[L]=Z.maxAge||0,this[I]=Z.dispose,this[P]=Z.noDisposeOnSet||!1,this[z]=Z.updateAgeOnGet||!1,this.reset()}set max(Z){if(typeof Z!="number"||Z<0)throw new TypeError("max must be a non-negative number");this[J]=Z||Infinity,ce(this)}get max(){return this[J]}set allowStale(Z){this[M]=!!Z}get allowStale(){return this[M]}set maxAge(Z){if(typeof Z!="number")throw new TypeError("maxAge must be a non-negative number");this[L]=Z,ce(this)}get maxAge(){return this[L]}set lengthCalculator(Z){typeof Z!="function"&&(Z=O),Z!==this[U]&&(this[U]=Z,this[se]=0,this[$].forEach(de=>{de.length=this[U](de.value,de.key),this[se]+=de.length})),ce(this)}get lengthCalculator(){return this[U]}get length(){return this[se]}get itemCount(){return this[$].length}rforEach(Z,de){de=de||this;for(let ie=this[$].tail;ie!==null;){const re=ie.prev;fe(this,Z,ie,de),ie=re}}forEach(Z,de){de=de||this;for(let ie=this[$].head;ie!==null;){const re=ie.next;fe(this,Z,ie,de),ie=re}}keys(){return this[$].toArray().map(Z=>Z.key)}values(){return this[$].toArray().map(Z=>Z.value)}reset(){this[I]&&this[$]&&this[$].length&&this[$].forEach(Z=>this[I](Z.key,Z.value)),this[G]=new Map,this[$]=new W,this[se]=0}dump(){return this[$].map(Z=>j(this,Z)?!1:{k:Z.key,v:Z.value,e:Z.now+(Z.maxAge||0)}).toArray().filter(Z=>Z)}dumpLru(){return this[$]}set(Z,de,ie){if(ie=ie||this[L],ie&&typeof ie!="number")throw new TypeError("maxAge must be a number");const re=ie?Date.now():0,X=this[U](de,Z);if(this[G].has(Z)){if(X>this[J])return ee(this,this[G].get(Z)),!1;const Ee=this[G].get(Z).value;return this[I]&&(this[P]||this[I](Z,Ee.value)),Ee.now=re,Ee.maxAge=ie,Ee.value=de,this[se]+=X-Ee.length,Ee.length=X,this.get(Z),ce(this),!0}const he=new Se(Z,de,X,re,ie);return he.length>this[J]?(this[I]&&this[I](Z,de),!1):(this[se]+=he.length,this[$].unshift(he),this[G].set(Z,this[$].head),ce(this),!0)}has(Z){if(!this[G].has(Z))return!1;const de=this[G].get(Z).value;return!j(this,de)}get(Z){return B(this,Z,!0)}peek(Z){return B(this,Z,!1)}pop(){const Z=this[$].tail;return Z?(ee(this,Z),Z.value):null}del(Z){ee(this,this[G].get(Z))}load(Z){this.reset();const de=Date.now();for(let ie=Z.length-1;ie>=0;ie--){const re=Z[ie],X=re.e||0;if(X===0)this.set(re.k,re.v);else{const he=X-de;he>0&&this.set(re.k,re.v,he)}}}prune(){this[G].forEach((Z,de)=>B(this,de,!1))}}const B=(De,Z,de)=>{const ie=De[G].get(Z);if(ie){const re=ie.value;if(j(De,re)){if(ee(De,ie),!De[M])return}else de&&(De[z]&&(ie.value.now=Date.now()),De[$].unshiftNode(ie));return re.value}},j=(De,Z)=>{if(!Z||!Z.maxAge&&!De[L])return!1;const de=Date.now()-Z.now;return Z.maxAge?de>Z.maxAge:De[L]&&de>De[L]},ce=De=>{if(De[se]>De[J])for(let Z=De[$].tail;De[se]>De[J]&&Z!==null;){const de=Z.prev;ee(De,Z),Z=de}},ee=(De,Z)=>{if(Z){const de=Z.value;De[I]&&De[I](de.key,de.value),De[se]-=de.length,De[G].delete(de.key),De[$].removeNode(Z)}};class Se{constructor(Z,de,ie,re,X){this.key=Z,this.value=de,this.length=ie,this.now=re,this.maxAge=X||0}}const fe=(De,Z,de,ie)=>{let re=de.value;j(De,re)&&(ee(De,de),De[M]||(re=void 0)),re&&Z.call(ie,re.value,re.key,De)};d.exports=V},7468:(d,ne,q)=>{const W=q(9930),{defaults:J}=q(8644),{inline:se}=q(9709),{findClosingBracket:U,escape:M}=q(621);d.exports=class oo{constructor(I,P){if(this.options=P||J,this.links=I,this.rules=se.normal,this.options.renderer=this.options.renderer||new W,this.renderer=this.options.renderer,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=se.pedantic:this.options.gfm&&(this.options.breaks?this.rules=se.breaks:this.rules=se.gfm)}static get rules(){return se}static output(I,P,$){return new oo(P,$).output(I)}output(I){let P="",$,G,z,O,V,B;for(;I;){if(V=this.rules.escape.exec(I)){I=I.substring(V[0].length),P+=M(V[1]);continue}if(V=this.rules.tag.exec(I)){!this.inLink&&/^<a /i.test(V[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(V[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(V[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(V[0])&&(this.inRawBlock=!1),I=I.substring(V[0].length),P+=this.renderer.html(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(V[0]):M(V[0]):V[0]);continue}if(V=this.rules.link.exec(I)){const j=U(V[2],"()");if(j>-1){const ee=(V[0].indexOf("!")===0?5:4)+V[1].length+j;V[2]=V[2].substring(0,j),V[0]=V[0].substring(0,ee).trim(),V[3]=""}I=I.substring(V[0].length),this.inLink=!0,z=V[2],this.options.pedantic?($=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(z),$?(z=$[1],O=$[3]):O=""):O=V[3]?V[3].slice(1,-1):"",z=z.trim().replace(/^<([\s\S]*)>$/,"$1"),P+=this.outputLink(V,{href:oo.escapes(z),title:oo.escapes(O)}),this.inLink=!1;continue}if((V=this.rules.reflink.exec(I))||(V=this.rules.nolink.exec(I))){if(I=I.substring(V[0].length),$=(V[2]||V[1]).replace(/\s+/g," "),$=this.links[$.toLowerCase()],!$||!$.href){P+=V[0].charAt(0),I=V[0].substring(1)+I;continue}this.inLink=!0,P+=this.outputLink(V,$),this.inLink=!1;continue}if(V=this.rules.strong.exec(I)){I=I.substring(V[0].length),P+=this.renderer.strong(this.output(V[4]||V[3]||V[2]||V[1]));continue}if(V=this.rules.em.exec(I)){I=I.substring(V[0].length),P+=this.renderer.em(this.output(V[6]||V[5]||V[4]||V[3]||V[2]||V[1]));continue}if(V=this.rules.code.exec(I)){I=I.substring(V[0].length),P+=this.renderer.codespan(M(V[2].trim(),!0));continue}if(V=this.rules.br.exec(I)){I=I.substring(V[0].length),P+=this.renderer.br();continue}if(V=this.rules.del.exec(I)){I=I.substring(V[0].length),P+=this.renderer.del(this.output(V[1]));continue}if(V=this.rules.autolink.exec(I)){I=I.substring(V[0].length),V[2]==="@"?(G=M(this.mangle(V[1])),z="mailto:"+G):(G=M(V[1]),z=G),P+=this.renderer.link(z,null,G);continue}if(!this.inLink&&(V=this.rules.url.exec(I))){if(V[2]==="@")G=M(V[0]),z="mailto:"+G;else{do B=V[0],V[0]=this.rules._backpedal.exec(V[0])[0];while(B!==V[0]);G=M(V[0]),V[1]==="www."?z="http://"+G:z=G}I=I.substring(V[0].length),P+=this.renderer.link(z,null,G);continue}if(V=this.rules.text.exec(I)){I=I.substring(V[0].length),this.inRawBlock?P+=this.renderer.text(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(V[0]):M(V[0]):V[0]):P+=this.renderer.text(M(this.smartypants(V[0])));continue}if(I)throw new Error("Infinite loop on byte: "+I.charCodeAt(0))}return P}static escapes(I){return I&&I.replace(oo.rules._escapes,"$1")}outputLink(I,P){const $=P.href,G=P.title?M(P.title):null;return I[0].charAt(0)!=="!"?this.renderer.link($,G,this.output(I[1])):this.renderer.image($,G,M(I[1]))}smartypants(I){return this.options.smartypants?I.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026"):I}mangle(I){if(!this.options.mangle)return I;const P=I.length;let $="",G=0,z;for(;G<P;G++)z=I.charCodeAt(G),Math.random()>.5&&(z="x"+z.toString(16)),$+="&#"+z+";";return $}}},1092:(d,ne,q)=>{const{defaults:W}=q(8644),{block:J}=q(9709),{rtrim:se,splitCells:U,escape:M}=q(621);d.exports=class Dp{constructor(I){this.tokens=[],this.tokens.links=Object.create(null),this.options=I||W,this.rules=J.normal,this.options.pedantic?this.rules=J.pedantic:this.options.gfm&&(this.rules=J.gfm)}static get rules(){return J}static lex(I,P){return new Dp(P).lex(I)}lex(I){return I=I.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.token(I,!0)}token(I,P){I=I.replace(/^ +$/gm,"");let $,G,z,O,V,B,j,ce,ee,Se,fe,De,Z,de,ie,re;for(;I;){if((z=this.rules.newline.exec(I))&&(I=I.substring(z[0].length),z[0].length>1&&this.tokens.push({type:"space"})),z=this.rules.code.exec(I)){const X=this.tokens[this.tokens.length-1];I=I.substring(z[0].length),X&&X.type==="paragraph"?X.text+=`
`+z[0].trimRight():(z=z[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",codeBlockStyle:"indented",text:this.options.pedantic?z:se(z,`
`)}));continue}if(z=this.rules.fences.exec(I)){I=I.substring(z[0].length),this.tokens.push({type:"code",lang:z[2]?z[2].trim():z[2],text:z[3]||""});continue}if(z=this.rules.heading.exec(I)){I=I.substring(z[0].length),this.tokens.push({type:"heading",depth:z[1].length,text:z[2]});continue}if((z=this.rules.nptable.exec(I))&&(B={type:"table",header:U(z[1].replace(/^ *| *\| *$/g,"")),align:z[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:z[3]?z[3].replace(/\n$/,"").split(`
`):[]},B.header.length===B.align.length)){for(I=I.substring(z[0].length),fe=0;fe<B.align.length;fe++)/^ *-+: *$/.test(B.align[fe])?B.align[fe]="right":/^ *:-+: *$/.test(B.align[fe])?B.align[fe]="center":/^ *:-+ *$/.test(B.align[fe])?B.align[fe]="left":B.align[fe]=null;for(fe=0;fe<B.cells.length;fe++)B.cells[fe]=U(B.cells[fe],B.header.length);this.tokens.push(B);continue}if(z=this.rules.hr.exec(I)){I=I.substring(z[0].length),this.tokens.push({type:"hr"});continue}if(z=this.rules.blockquote.exec(I)){I=I.substring(z[0].length),this.tokens.push({type:"blockquote_start"}),z=z[0].replace(/^ *> ?/gm,""),this.token(z,P),this.tokens.push({type:"blockquote_end"});continue}if(z=this.rules.list.exec(I)){for(I=I.substring(z[0].length),O=z[2],de=O.length>1,j={type:"list_start",ordered:de,start:de?+O:"",loose:!1},this.tokens.push(j),z=z[0].match(this.rules.item),ce=[],$=!1,Z=z.length,fe=0;fe<Z;fe++)B=z[fe],Se=B.length,B=B.replace(/^ *([*+-]|\d+\.) */,""),~B.indexOf(`
 `)&&(Se-=B.length,B=this.options.pedantic?B.replace(/^ {1,4}/gm,""):B.replace(new RegExp("^ {1,"+Se+"}","gm"),"")),fe!==Z-1&&(V=J.bullet.exec(z[fe+1])[0],(O.length>1?V.length===1:V.length>1||this.options.smartLists&&V!==O)&&(I=z.slice(fe+1).join(`
`)+I,fe=Z-1)),G=$||/\n\n(?!\s*$)/.test(B),fe!==Z-1&&($=B.charAt(B.length-1)===`
`,G||(G=$)),G&&(j.loose=!0),ie=/^\[[ xX]\] /.test(B),re=void 0,ie&&(re=B[1]!==" ",B=B.replace(/^\[[ xX]\] +/,"")),ee={type:"list_item_start",task:ie,checked:re,loose:G},ce.push(ee),this.tokens.push(ee),this.token(B,!1),this.tokens.push({type:"list_item_end"});if(j.loose)for(Z=ce.length,fe=0;fe<Z;fe++)ce[fe].loose=!0;this.tokens.push({type:"list_end"});continue}if(z=this.rules.html.exec(I)){I=I.substring(z[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&(z[1]==="pre"||z[1]==="script"||z[1]==="style"),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(z[0]):M(z[0]):z[0]});continue}if(P&&(z=this.rules.def.exec(I))){I=I.substring(z[0].length),z[3]&&(z[3]=z[3].substring(1,z[3].length-1)),De=z[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[De]||(this.tokens.links[De]={href:z[2],title:z[3]});continue}if((z=this.rules.table.exec(I))&&(B={type:"table",header:U(z[1].replace(/^ *| *\| *$/g,"")),align:z[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:z[3]?z[3].replace(/\n$/,"").split(`
`):[]},B.header.length===B.align.length)){for(I=I.substring(z[0].length),fe=0;fe<B.align.length;fe++)/^ *-+: *$/.test(B.align[fe])?B.align[fe]="right":/^ *:-+: *$/.test(B.align[fe])?B.align[fe]="center":/^ *:-+ *$/.test(B.align[fe])?B.align[fe]="left":B.align[fe]=null;for(fe=0;fe<B.cells.length;fe++)B.cells[fe]=U(B.cells[fe].replace(/^ *\| *| *\| *$/g,""),B.header.length);this.tokens.push(B);continue}if(z=this.rules.lheading.exec(I)){I=I.substring(z[0].length),this.tokens.push({type:"heading",depth:z[2].charAt(0)==="="?1:2,text:z[1]});continue}if(P&&(z=this.rules.paragraph.exec(I))){I=I.substring(z[0].length),this.tokens.push({type:"paragraph",text:z[1].charAt(z[1].length-1)===`
`?z[1].slice(0,-1):z[1]});continue}if(z=this.rules.text.exec(I)){I=I.substring(z[0].length),this.tokens.push({type:"text",text:z[0]});continue}if(I)throw new Error("Infinite loop on byte: "+I.charCodeAt(0))}return this.tokens}}},9170:(d,ne,q)=>{const W=q(9930),J=q(1846),se=q(7468),U=q(1477),{defaults:M}=q(8644),{merge:L,unescape:I}=q(621);d.exports=class Op{constructor($){this.tokens=[],this.token=null,this.options=$||M,this.options.renderer=this.options.renderer||new W,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new J}static parse($,G){return new Op(G).parse($)}parse($){this.inline=new se($.links,this.options),this.inlineText=new se($.links,L({},this.options,{renderer:new U})),this.tokens=$.reverse();let G="";for(;this.next();)G+=this.tok();return G}next(){return this.token=this.tokens.pop(),this.token}peek(){return this.tokens[this.tokens.length-1]||0}parseText(){let $=this.token.text;for(;this.peek().type==="text";)$+=`
`+this.next().text;return this.inline.output($)}tok(){let $="";switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,I(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":{let G="",z,O,V,B;for(V="",z=0;z<this.token.header.length;z++)V+=this.renderer.tablecell(this.inline.output(this.token.header[z]),{header:!0,align:this.token.align[z]});for(G+=this.renderer.tablerow(V),z=0;z<this.token.cells.length;z++){for(O=this.token.cells[z],V="",B=0;B<O.length;B++)V+=this.renderer.tablecell(this.inline.output(O[B]),{header:!1,align:this.token.align[B]});$+=this.renderer.tablerow(V)}return this.renderer.table(G,$)}case"blockquote_start":{for($="";this.next().type!=="blockquote_end";)$+=this.tok();return this.renderer.blockquote($)}case"list_start":{$="";const G=this.token.ordered,z=this.token.start;for(;this.next().type!=="list_end";)$+=this.tok();return this.renderer.list($,G,z)}case"list_item_start":{$="";const G=this.token.loose,z=this.token.checked,O=this.token.task;if(this.token.task)if(G)if(this.peek().type==="text"){const V=this.peek();V.text=this.renderer.checkbox(z)+" "+V.text}else this.tokens.push({type:"text",text:this.renderer.checkbox(z)});else $+=this.renderer.checkbox(z);for(;this.next().type!=="list_item_end";)$+=!G&&this.token.type==="text"?this.parseText():this.tok();return this.renderer.listitem($,O,z)}case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:{const G='Token with "'+this.token.type+'" type was not found.';if(this.options.silent)console.log(G);else throw new Error(G)}}}}},9930:(d,ne,q)=>{const{defaults:W}=q(8644),{cleanUrl:J,escape:se}=q(621);d.exports=class{constructor(M){this.options=M||W}code(M,L,I){const P=(L||"").match(/\S*/)[0];if(this.options.highlight){const $=this.options.highlight(M,P);$!=null&&$!==M&&(I=!0,M=$)}return P?'<pre><code class="'+this.options.langPrefix+se(P,!0)+'">'+(I?M:se(M,!0))+`</code></pre>
`:"<pre><code>"+(I?M:se(M,!0))+"</code></pre>"}blockquote(M){return`<blockquote>
`+M+`</blockquote>
`}html(M){return M}heading(M,L,I,P){return this.options.headerIds?"<h"+L+' id="'+this.options.headerPrefix+P.slug(I)+'">'+M+"</h"+L+`>
`:"<h"+L+">"+M+"</h"+L+`>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(M,L,I){const P=L?"ol":"ul",$=L&&I!==1?' start="'+I+'"':"";return"<"+P+$+`>
`+M+"</"+P+`>
`}listitem(M){return"<li>"+M+`</li>
`}checkbox(M){return"<input "+(M?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(M){return"<p>"+M+`</p>
`}table(M,L){return L&&(L="<tbody>"+L+"</tbody>"),`<table>
<thead>
`+M+`</thead>
`+L+`</table>
`}tablerow(M){return`<tr>
`+M+`</tr>
`}tablecell(M,L){const I=L.header?"th":"td";return(L.align?"<"+I+' align="'+L.align+'">':"<"+I+">")+M+"</"+I+`>
`}strong(M){return"<strong>"+M+"</strong>"}em(M){return"<em>"+M+"</em>"}codespan(M){return"<code>"+M+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(M){return"<del>"+M+"</del>"}link(M,L,I){if(M=J(this.options.sanitize,this.options.baseUrl,M),M===null)return I;let P='<a href="'+se(M)+'"';return L&&(P+=' title="'+L+'"'),P+=">"+I+"</a>",P}image(M,L,I){if(M=J(this.options.sanitize,this.options.baseUrl,M),M===null)return I;let P='<img src="'+M+'" alt="'+I+'"';return L&&(P+=' title="'+L+'"'),P+=this.options.xhtml?"/>":">",P}text(M){return M}}},1846:d=>{d.exports=class{constructor(){this.seen={}}slug(q){let W=q.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(W)){const J=W;do this.seen[J]++,W=J+"-"+this.seen[J];while(this.seen.hasOwnProperty(W))}return this.seen[W]=0,W}}},1477:d=>{d.exports=class{strong(q){return q}em(q){return q}codespan(q){return q}del(q){return q}html(q){return q}text(q){return q}link(q,W,J){return""+J}image(q,W,J){return""+J}br(){return""}}},8644:d=>{function ne(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1}}function q(W){d.exports.defaults=W}d.exports={defaults:ne(),getDefaults:ne,changeDefaults:q}},621:d=>{const ne=/[&<>"']/,q=/[&<>"']/g,W=/[<>"']|&(?!#?\w+;)/,J=/[<>"']|&(?!#?\w+;)/g,se={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},U=re=>se[re];function M(re,X){if(X){if(ne.test(re))return re.replace(q,U)}else if(W.test(re))return re.replace(J,U);return re}const L=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function I(re){return re.replace(L,(X,he)=>(he=he.toLowerCase(),he==="colon"?":":he.charAt(0)==="#"?he.charAt(1)==="x"?String.fromCharCode(parseInt(he.substring(2),16)):String.fromCharCode(+he.substring(1)):""))}const P=/(^|[^\[])\^/g;function $(re,X){re=re.source||re,X=X||"";const he={replace:(we,Ee)=>(Ee=Ee.source||Ee,Ee=Ee.replace(P,"$1"),re=re.replace(we,Ee),he),getRegex:()=>new RegExp(re,X)};return he}const G=/[^\w:]/g,z=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function O(re,X,he){if(re){let we;try{we=decodeURIComponent(I(he)).replace(G,"").toLowerCase()}catch(Ee){return null}if(we.indexOf("javascript:")===0||we.indexOf("vbscript:")===0||we.indexOf("data:")===0)return null}X&&!z.test(he)&&(he=ee(X,he));try{he=encodeURI(he).replace(/%25/g,"%")}catch(we){return null}return he}const V={},B=/^[^:]+:\/*[^/]*$/,j=/^([^:]+:)[\s\S]*$/,ce=/^([^:]+:\/*[^/]*)[\s\S]*$/;function ee(re,X){V[" "+re]||(B.test(re)?V[" "+re]=re+"/":V[" "+re]=Z(re,"/",!0)),re=V[" "+re];const he=re.indexOf(":")===-1;return X.substring(0,2)==="//"?he?X:re.replace(j,"$1")+X:X.charAt(0)==="/"?he?X:re.replace(ce,"$1")+X:re+X}const Se={exec:function(){}};function fe(re){let X=1,he,we;for(;X<arguments.length;X++){he=arguments[X];for(we in he)Object.prototype.hasOwnProperty.call(he,we)&&(re[we]=he[we])}return re}function De(re,X){const he=re.replace(/\|/g,(Pe,ke,je)=>{let Ye=!1,ct=ke;for(;--ct>=0&&je[ct]==="\\";)Ye=!Ye;return Ye?"|":" |"}),we=he.split(/ \|/);let Ee=0;if(we.length>X)we.splice(X);else for(;we.length<X;)we.push("");for(;Ee<we.length;Ee++)we[Ee]=we[Ee].trim().replace(/\\\|/g,"|");return we}function Z(re,X,he){const we=re.length;if(we===0)return"";let Ee=0;for(;Ee<we;){const Pe=re.charAt(we-Ee-1);if(Pe===X&&!he)Ee++;else if(Pe!==X&&he)Ee++;else break}return re.substr(0,we-Ee)}function de(re,X){if(re.indexOf(X[1])===-1)return-1;const he=re.length;let we=0,Ee=0;for(;Ee<he;Ee++)if(re[Ee]==="\\")Ee++;else if(re[Ee]===X[0])we++;else if(re[Ee]===X[1]&&(we--,we<0))return Ee;return-1}function ie(re){re&&re.sanitize&&!re.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}d.exports={escape:M,unescape:I,edit:$,cleanUrl:O,resolveUrl:ee,noopTest:Se,merge:fe,splitCells:De,rtrim:Z,findClosingBracket:de,checkSanitizeDeprecation:ie}},7228:(d,ne,q)=>{const W=q(1092),J=q(9170),se=q(9930),U=q(1477),M=q(7468),L=q(1846),{merge:I,checkSanitizeDeprecation:P,escape:$}=q(621),{getDefaults:G,changeDefaults:z,defaults:O}=q(8644);function V(B,j,ce){if(typeof B=="undefined"||B===null)throw new Error("marked(): input parameter is undefined or null");if(typeof B!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(B)+", string expected");if(ce||typeof j=="function"){ce||(ce=j,j=null),j=I({},V.defaults,j||{}),P(j);const ee=j.highlight;let Se,fe,De=0;try{Se=W.lex(B,j)}catch(de){return ce(de)}fe=Se.length;const Z=function(de){if(de)return j.highlight=ee,ce(de);let ie;try{ie=J.parse(Se,j)}catch(re){de=re}return j.highlight=ee,de?ce(de):ce(null,ie)};if(!ee||ee.length<3||(delete j.highlight,!fe))return Z();for(;De<Se.length;De++)(function(de){return de.type!=="code"?--fe||Z():ee(de.text,de.lang,function(ie,re){if(ie)return Z(ie);if(re==null||re===de.text)return--fe||Z();de.text=re,de.escaped=!0,--fe||Z()})})(Se[De]);return}try{return j=I({},V.defaults,j||{}),P(j),J.parse(W.lex(B,j),j)}catch(ee){if(ee.message+=`
Please report this to https://github.com/markedjs/marked.`,(j||V.defaults).silent)return"<p>An error occurred:</p><pre>"+$(ee.message+"",!0)+"</pre>";throw ee}}V.options=V.setOptions=function(B){return I(V.defaults,B),z(V.defaults),V},V.getDefaults=G,V.defaults=O,V.Parser=J,V.parser=J.parse,V.Renderer=se,V.TextRenderer=U,V.Lexer=W,V.lexer=W.lex,V.InlineLexer=M,V.inlineLexer=M.output,V.Slugger=L,V.parse=V,d.exports=V},9709:(d,ne,q)=>{const{noopTest:W,edit:J,merge:se}=q(621),U={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:W,table:W,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/};U._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,U._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,U.def=J(U.def).replace("label",U._label).replace("title",U._title).getRegex(),U.bullet=/(?:[*+-]|\d{1,9}\.)/,U.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,U.item=J(U.item,"gm").replace(/bull/g,U.bullet).getRegex(),U.list=J(U.list).replace(/bull/g,U.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+U.def.source+")").getRegex(),U._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",U._comment=/<!--(?!-?>)[\s\S]*?-->/,U.html=J(U.html,"i").replace("comment",U._comment).replace("tag",U._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),U.paragraph=J(U._paragraph).replace("hr",U.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",U._tag).getRegex(),U.blockquote=J(U.blockquote).replace("paragraph",U.paragraph).getRegex(),U.normal=se({},U),U.gfm=se({},U.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n *([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n *\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),U.gfm.nptable=J(U.gfm.nptable).replace("hr",U.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",U._tag).getRegex(),U.gfm.table=J(U.gfm.table).replace("hr",U.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",U._tag).getRegex(),U.pedantic=se({},U.normal,{html:J(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",U._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:W,paragraph:J(U.normal._paragraph).replace("hr",U.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",U.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const M={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:W,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\spunctuation])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:W,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/};M._punctuation=`!"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~`,M.em=J(M.em).replace(/punctuation/g,M._punctuation).getRegex(),M._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,M._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,M._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,M.autolink=J(M.autolink).replace("scheme",M._scheme).replace("email",M._email).getRegex(),M._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,M.tag=J(M.tag).replace("comment",U._comment).replace("attribute",M._attribute).getRegex(),M._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,M._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,M._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,M.link=J(M.link).replace("label",M._label).replace("href",M._href).replace("title",M._title).getRegex(),M.reflink=J(M.reflink).replace("label",M._label).getRegex(),M.normal=se({},M),M.pedantic=se({},M.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:J(/^!?\[(label)\]\((.*?)\)/).replace("label",M._label).getRegex(),reflink:J(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",M._label).getRegex()}),M.gfm=se({},M.normal,{escape:J(M.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),M.gfm.url=J(M.gfm.url,"i").replace("email",M.gfm._extended_email).getRegex(),M.breaks=se({},M.gfm,{br:J(M.br).replace("{2,}","*").getRegex(),text:J(M.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),d.exports={block:U,inline:M}},778:(d,ne,q)=>{var W=q(2479);d.exports=W(J),d.exports.strict=W(se),J.proto=J(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return J(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return se(this)},configurable:!0})});function J(U){var M=function(){return M.called?M.value:(M.called=!0,M.value=U.apply(this,arguments))};return M.called=!1,M}function se(U){var M=function(){if(M.called)throw new Error(M.onceError);return M.called=!0,M.value=U.apply(this,arguments)},L=U.name||"Function wrapped with `once`";return M.onceError=L+" shouldn't be called more than once",M.called=!1,M}},6200:(d,ne,q)=>{"use strict";const W=q(1669),J=q(1003),se=/\s/,U=/\r|\n/,M=/^(Host|Match)$/i,L=1,I=2;function P(G,z){return z.hasOwnProperty(G.param)&&z[G.param]===G.value}class $ extends Array{compute(z){const O={},V=(B,j)=>{B==="IdentityFile"?(O[B]||(O[B]=[])).push(j):O[B]==null&&(O[B]=j)};for(const B of this)B.type===L&&(B.param==="Host"?J(B.value,z)&&(V(B.param,B.value),B.config.filter(j=>j.type===L).forEach(j=>V(j.param,j.value))):B.param==="Match"||V(B.param,B.value));return O}find(z={}){if(typeof z=="function")return super.find(z);if(!(z&&("Host"in z||"Match"in z)))throw new Error("Can only find by Host or Match");return super.find(O=>P(O,z))}remove(z={}){if(!(z&&("Host"in z||"Match"in z)))throw new Error("Can only remove by Host or Match");const O=typeof z=="function"?super.findIndex(z):super.findIndex(V=>P(V,z));if(O>=0)return this.splice(O,1)}toString(){return this.constructor.stringify(this)}append(z){let O="  ";e:for(const j of this)if(M.test(j.param)){for(const ce of j.config)if(ce.before){O=ce.before;break e}}if(this.length>0){let j=this[this.length-1];j.config&&(j=j.config[j.config.length-1]),j.after=`
`}let V=this,B=this;for(const j in z){const ce={type:L,param:j,separator:" ",value:z[j],before:"",after:`
`};M.test(j)?(V=B,V.push(ce),V=ce.config=new $):(ce.before=V===B?"":O,V.push(ce))}return B}static stringify(z){let O="";const V=(j,ce)=>Array.isArray(j)?j.map(ee=>V(ee,se.test(ee))).join(" "):ce?`"${j}"`:j,B=j=>{if(O+=j.before,j.type===I)O+=j.content;else if(j.type===L){const ce=j.quoted||/IdentityFile/i.test(j.param)&&se.test(j.value),ee=V(j.value,ce);O+=`${j.param}${j.separator}${ee}`}O+=j.after,j.config&&j.config.forEach(B)};return z.forEach(B),O}static get DIRECTIVE(){return L}static get COMMENT(){return I}static parse(z){let O=0,V=ce(),B=new $,j=B;function ce(){return z[O++]}function ee(){let he="";for(;se.test(V);)he+=V,V=ce();return he}function Se(){let he="";for(;U.test(V);)he+=V,V=ce();return he}function fe(){let he="";for(;V&&/[^ \t=]/.test(V);)he+=V,V=ce();return he}function De(){let he=ee();return V==="="&&(he+=V,V=ce()),he+ee()}function Z(){let he="",we=!1,Ee=!1;for(;V&&!U.test(V);)Ee?(he+=V==='"'?V:`\\${V}`,Ee=!1):V==='"'&&(!he||we)?we=!we:V==="\\"?Ee=!0:he+=V,V=ce();if(we||Ee)throw new Error(`Unexpected line break at ${he}`);return he.trim()}function de(){const he=I;let we="";for(;V&&!U.test(V);)we+=V,V=ce();return{type:he,content:we}}function ie(){const he=[];let we="",Ee=!1,Pe=!1;for(;V&&!U.test(V);)Pe?(we+=V==='"'?V:`\\${V}`,Pe=!1):V==='"'?Ee=!Ee:V==="\\"?Pe=!0:Ee?we+=V:/[ \t]/.test(V)?we&&(he.push(we),we=""):we+=V,V=ce();if(Ee||Pe)throw new Error(`Unexpected line break at ${he.concat(we).join(" ")}`);return he.push(we),he.length>1?he:he[0]}function re(){const he=L,we=fe(),Ee=we.toLowerCase()=="host",Pe={type:he,param:we,separator:De(),quoted:!Ee&&V==='"',value:Ee?ie():Z()};return Pe.quoted||delete Pe.quoted,Pe}function X(){const he=ee(),we=V==="#"?de():re(),Ee=Se();return we.before=he,we.after=Ee,we}for(;V;){let he=X();he.type===L&&M.test(he.param)?(B=j,B.push(he),B=he.config=new $):B.push(he)}return j}}$.find=W.deprecate((G,z)=>{const O=G.find(z);return O?[O,G.indexOf(O)]:null},"SSHConfig.find() is deprected. Use SSHConfig.prototype.find() instead."),d.exports=$},1003:d=>{"use strict";function ne(W,J){return W=W.replace(/\./g,"\\.").replace(/\+/g,"\\+").replace(/\*/g,".*").replace(/\?/g,".?"),new RegExp("^(?:"+W+")$").test(J)}function q(W,J){const se=Array.isArray(W)?W:W.split(/,/);let U=!1;for(const M of se){if(M[0]=="!"&&ne(M.slice(1),J))return!1;ne(M,J)&&(U=!0)}return U}d.exports=q},2130:(d,ne,q)=>{"use strict";const W=q(2087),J=q(3867),se=q(6560),{env:U}=process;let M;se("no-color")||se("no-colors")||se("color=false")||se("color=never")?M=0:(se("color")||se("colors")||se("color=true")||se("color=always"))&&(M=1),"FORCE_COLOR"in U&&(U.FORCE_COLOR==="true"?M=1:U.FORCE_COLOR==="false"?M=0:M=U.FORCE_COLOR.length===0?1:Math.min(parseInt(U.FORCE_COLOR,10),3));function L($){return $===0?!1:{level:$,hasBasic:!0,has256:$>=2,has16m:$>=3}}function I($,G){if(M===0)return 0;if(se("color=16m")||se("color=full")||se("color=truecolor"))return 3;if(se("color=256"))return 2;if($&&!G&&M===void 0)return 0;const z=M||0;if(U.TERM==="dumb")return z;if(process.platform==="win32"){const O=W.release().split(".");return Number(O[0])>=10&&Number(O[2])>=10586?Number(O[2])>=14931?3:2:1}if("CI"in U)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(O=>O in U)||U.CI_NAME==="codeship"?1:z;if("TEAMCITY_VERSION"in U)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(U.TEAMCITY_VERSION)?1:0;if(U.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in U){const O=parseInt((U.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(U.TERM_PROGRAM){case"iTerm.app":return O>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(U.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(U.TERM)||"COLORTERM"in U?1:z}function P($){const G=I($,$&&$.isTTY);return L(G)}d.exports={supportsColor:P,stdout:L(I(!0,J.isatty(1))),stderr:L(I(!0,J.isatty(2)))}},7121:(d,ne,q)=>{"use strict";q.d(ne,{Z:()=>U});function W(M){var L,I=M.Symbol;return typeof I=="function"?I.observable?L=I.observable:(L=I("observable"),I.observable=L):L="@@observable",L}d=q.hmd(d);var J;typeof self!="undefined"?J=self:typeof window!="undefined"?J=window:typeof global!="undefined"?J=global:J=d;var se=W(J);const U=se},4802:(d,ne,q)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});var W=q(6363);ne.ExperimentationService=W.ExperimentationService},6363:(d,ne,q)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});const W=q(4067),J=q(4234),se=q(5975);class U extends se.ExperimentationServiceAutoPolling{constructor(L){super(L.telemetry,L.filterProviders||[],L.refetchInterval!=null?L.refetchInterval:0,L.featuresTelemetryPropertyName,L.assignmentContextTelemetryPropertyName,L.telemetryEventName,L.storageKey,L.keyValueStorage);this.options=L,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new W.TasApiFeatureProvider(new J.AxiosHttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}}ne.ExperimentationService=U,U.REFRESH_RATE_IN_MINUTES=30},5975:(d,ne,q)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});const W=q(3663),J=q(3334);class se extends W.ExperimentationServiceBase{constructor(M,L,I,P,$,G,z,O){super(M,P,$,G,z,O);if(this.telemetry=M,this.filterProviders=L,this.refreshRateMs=I,this.featuresTelemetryPropertyName=P,this.assignmentContextTelemetryPropertyName=$,this.telemetryEventName=G,this.storageKey=z,this.storage=O,I<1e3&&I!==0)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");I>0&&(this.pollingService=new J.PollingService(I),this.pollingService.OnPollTick(async()=>{await super.getFeaturesAsync()}))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(M=!1){if(this.pollingService){this.pollingService.StopPolling();let L=await super.getFeaturesAsync(M);return this.pollingService.StartPolling(),L}else return await super.getFeaturesAsync(M)}}ne.ExperimentationServiceAutoPolling=se},3663:(d,ne,q)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});const W=q(7002);class J{constructor(U,M,L,I,P,$){this.telemetry=U,this.featuresTelemetryPropertyName=M,this.assignmentContextTelemetryPropertyName=L,this.telemetryEventName=I,this.storageKey=P,this.storage=$,this.featuresConsumed=!1,this.initializePromise=this.loadCachePromise,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||($=new W.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData()}get features(){return this._features}set features(U){this._features=U,this.telemetry&&(this.telemetry.setSharedProperty(this.featuresTelemetryPropertyName,this.features.features.join(";")),this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext))}async getFeaturesAsync(U=!1){if(this.fetchPromise!=null)return await this.fetchPromise,this.features;if(!this.featureProviders||this.featureProviders.length===0)return Promise.resolve({features:[],assignmentContext:"",configs:[]});this.fetchPromise=Promise.all(this.featureProviders.map(async L=>await L.getFeatures()));let M=await this.fetchPromise;return this.fetchPromise=void 0,this.updateFeatures(M,U),this.features}updateFeatures(U,M=!1){let L={features:[],assignmentContext:"",configs:[]};for(let I of U){for(let P of I.features)L.features.includes(P)||L.features.push(P);for(let P of I.configs){const $=L.configs.find(G=>G.Id===P.Id);$?$.Parameters=Object.assign(Object.assign({},$.Parameters),P.Parameters):L.configs.push(P)}L.assignmentContext+=I.assignmentContext}(M||!this.featuresConsumed)&&(this.features=L),this.storage&&this.storage.setValue(this.storageKey,L)}async loadCachedFeatureData(){let U;this.storage&&(U=await this.storage.getValue(this.storageKey),U!==void 0&&U.configs===void 0&&(U.configs=[])),this.features.features.length===0&&(this.features=U||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(U){return this.featuresConsumed=!0,this.PostEventToTelemetry(U),this.features.features.includes(U)}async isCachedFlightEnabled(U){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(U),this.features.features.includes(U)}async isFlightEnabledAsync(U){const M=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(U),M.features.includes(U)}getTreatmentVariable(U,M){var L;return this.featuresConsumed=!0,this.PostEventToTelemetry(`${U}.${M}`),(L=this.features.configs.find(P=>P.Id===U))===null||L===void 0?void 0:L.Parameters[M]}async getTreatmentVariableAsync(U,M){return await this.getFeaturesAsync(!0),this.getTreatmentVariable(U,M)}PostEventToTelemetry(U){this.cachedTelemetryEvents.includes(U)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",U]])),this.cachedTelemetryEvents.push(U))}invokeInit(){this.init()}addFeatureProvider(...U){if(!(U==null||this.featureProviders==null))for(let M of U)this.featureProviders.push(M)}}ne.ExperimentationServiceBase=J},69:(d,ne)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});class q{constructor(J){this.telemetry=J,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let J=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,J}}ne.BaseFeatureProvider=q},4e3:(d,ne,q)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});const W=q(69);class J extends W.BaseFeatureProvider{constructor(U,M){super(U);this.telemetry=U,this.filterProviders=M,this.cachedTelemetryEvents=[]}getFilters(){let U=new Map;for(let M of this.filterProviders){let L=M.getFilters();for(let I of L.keys()){let P=L.get(I);U.set(I,P)}}return U}PostEventToTelemetry(U){if(this.cachedTelemetryEvents.includes(U))return;const M=JSON.stringify(U);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",M]])),this.cachedTelemetryEvents.push(U)}}ne.FilteredFeatureProvider=J},4067:(d,ne,q)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});const W=q(4e3);class J extends W.FilteredFeatureProvider{constructor(U,M,L){super(M,L);this.httpClient=U,this.telemetry=M,this.filterProviders=L}async fetch(){let U=this.getFilters(),M={};for(let G of U.keys()){const z=U.get(G);M[G]=z}let L=await this.httpClient.get({headers:M});U.keys.length>0&&this.PostEventToTelemetry(M);let I=L.data,P=I.Configs,$=[];for(let G of P)if(!!G.Parameters)for(let z of Object.keys(G.Parameters)){const O=z+(G.Parameters[z]?"":"cf");$.includes(O)||$.push(O)}return{features:$,assignmentContext:I.AssignmentContext,configs:P}}}ne.TasApiFeatureProvider=J},4234:(d,ne,q)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});const W=q(9669);class J{constructor(U){this.endpoint=U}get(U){return W.default.get(this.endpoint,Object.assign(Object.assign({},U),{proxy:!1}))}}ne.AxiosHttpClient=J},7002:(d,ne)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});class q{constructor(){this.storage=new Map}async getValue(J,se){return this.storage.has(J)?await Promise.resolve(this.storage.get(J)):await Promise.resolve(se||void 0)}setValue(J,se){this.storage.set(J,se)}}ne.MemoryKeyValueStorage=q},3334:(d,ne)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});class q{constructor(J){this.fetchInterval=J}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(J){this.onTick=J}StartPolling(J=!1){this.intervalHandle&&this.StopPolling(),this.onTick!=null&&(J&&this.onTick().then(()=>{}).catch(()=>{}),this.intervalHandle=setInterval(async()=>{await this.onTick()},this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}}ne.PollingService=q},6149:(d,ne,q)=>{d.exports=q(5468)},5468:(d,ne,q)=>{"use strict";var W,J=q(1631),se=q(4016),U=q(8605),M=q(7211),L=q(8614),I=q(2357),P=q(1669);W=$,ne.httpsOverHttp=G,W=z,W=O;function $(Se){var fe=new V(Se);return fe.request=U.request,fe}function G(Se){var fe=new V(Se);return fe.request=U.request,fe.createSocket=B,fe.defaultPort=443,fe}function z(Se){var fe=new V(Se);return fe.request=M.request,fe}function O(Se){var fe=new V(Se);return fe.request=M.request,fe.createSocket=B,fe.defaultPort=443,fe}function V(Se){var fe=this;fe.options=Se||{},fe.proxyOptions=fe.options.proxy||{},fe.maxSockets=fe.options.maxSockets||U.Agent.defaultMaxSockets,fe.requests=[],fe.sockets=[],fe.on("free",function(Z,de,ie,re){for(var X=j(de,ie,re),he=0,we=fe.requests.length;he<we;++he){var Ee=fe.requests[he];if(Ee.host===X.host&&Ee.port===X.port){fe.requests.splice(he,1),Ee.request.onSocket(Z);return}}Z.destroy(),fe.removeSocket(Z)})}P.inherits(V,L.EventEmitter),V.prototype.addRequest=function(fe,De,Z,de){var ie=this,re=ce({request:fe},ie.options,j(De,Z,de));if(ie.sockets.length>=this.maxSockets){ie.requests.push(re);return}ie.createSocket(re,function(X){X.on("free",he),X.on("close",we),X.on("agentRemove",we),fe.onSocket(X);function he(){ie.emit("free",X,re)}function we(Ee){ie.removeSocket(X),X.removeListener("free",he),X.removeListener("close",we),X.removeListener("agentRemove",we)}})},V.prototype.createSocket=function(fe,De){var Z=this,de={};Z.sockets.push(de);var ie=ce({},Z.proxyOptions,{method:"CONNECT",path:fe.host+":"+fe.port,agent:!1,headers:{host:fe.host+":"+fe.port}});fe.localAddress&&(ie.localAddress=fe.localAddress),ie.proxyAuth&&(ie.headers=ie.headers||{},ie.headers["Proxy-Authorization"]="Basic "+new Buffer(ie.proxyAuth).toString("base64")),ee("making CONNECT request");var re=Z.request(ie);re.useChunkedEncodingByDefault=!1,re.once("response",X),re.once("upgrade",he),re.once("connect",we),re.once("error",Ee),re.end();function X(Pe){Pe.upgrade=!0}function he(Pe,ke,je){process.nextTick(function(){we(Pe,ke,je)})}function we(Pe,ke,je){if(re.removeAllListeners(),ke.removeAllListeners(),Pe.statusCode!==200){ee("tunneling socket could not be established, statusCode=%d",Pe.statusCode),ke.destroy();var Ye=new Error("tunneling socket could not be established, statusCode="+Pe.statusCode);Ye.code="ECONNRESET",fe.request.emit("error",Ye),Z.removeSocket(de);return}if(je.length>0){ee("got illegal response body from proxy"),ke.destroy();var Ye=new Error("got illegal response body from proxy");Ye.code="ECONNRESET",fe.request.emit("error",Ye),Z.removeSocket(de);return}return ee("tunneling connection has established"),Z.sockets[Z.sockets.indexOf(de)]=ke,De(ke)}function Ee(Pe){re.removeAllListeners(),ee(`tunneling socket could not be established, cause=%s
`,Pe.message,Pe.stack);var ke=new Error("tunneling socket could not be established, cause="+Pe.message);ke.code="ECONNRESET",fe.request.emit("error",ke),Z.removeSocket(de)}},V.prototype.removeSocket=function(fe){var De=this.sockets.indexOf(fe);if(De!==-1){this.sockets.splice(De,1);var Z=this.requests.shift();Z&&this.createSocket(Z,function(de){Z.request.onSocket(de)})}};function B(Se,fe){var De=this;V.prototype.createSocket.call(De,Se,function(Z){var de=Se.request.getHeader("host"),ie=ce({},De.options,{socket:Z,servername:de?de.replace(/:.*$/,""):Se.host}),re=se.connect(0,ie);De.sockets[De.sockets.indexOf(Z)]=re,fe(re)})}function j(Se,fe,De){return typeof Se=="string"?{host:Se,port:fe,localAddress:De}:Se}function ce(Se){for(var fe=1,De=arguments.length;fe<De;++fe){var Z=arguments[fe];if(typeof Z=="object")for(var de=Object.keys(Z),ie=0,re=de.length;ie<re;++ie){var X=de[ie];Z[X]!==void 0&&(Se[X]=Z[X])}}return Se}var ee;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?ee=function(){var Se=Array.prototype.slice.call(arguments);typeof Se[0]=="string"?Se[0]="TUNNEL: "+Se[0]:Se.unshift("TUNNEL:"),console.error.apply(console,Se)}:ee=function(){},W=ee},8361:(d,ne,q)=>{var W=Object.create,J=Object.defineProperty,se=Object.getOwnPropertyDescriptor,U=Object.getOwnPropertyNames,M=Object.getOwnPropertySymbols,L=Object.getPrototypeOf,I=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,$=(s,k,c)=>k in s?J(s,k,{enumerable:!0,configurable:!0,writable:!0,value:c}):s[k]=c,G=(s,k)=>{for(var c in k||(k={}))I.call(k,c)&&$(s,c,k[c]);if(M)for(var c of M(k))P.call(k,c)&&$(s,c,k[c]);return s},z=s=>J(s,"__esModule",{value:!0}),O=(s,k)=>()=>(k||s((k={exports:{}}).exports,k),k.exports),V=(s,k)=>{z(s);for(var c in k)J(s,c,{get:k[c],enumerable:!0})},B=(s,k,c)=>{if(k&&typeof k=="object"||typeof k=="function")for(let v of U(k))!I.call(s,v)&&v!=="default"&&J(s,v,{get:()=>k[v],enumerable:!(c=se(k,v))||c.enumerable});return s},j=s=>B(z(J(s!=null?W(L(s)):{},"default",s&&s.__esModule&&"default"in s?{get:()=>s.default,enumerable:!0}:{value:s,enumerable:!0})),s),ce=O((s,k)=>{"use strict";var c=function(){function v(){}return v.info=function(_){for(var p=[],l=1;l<arguments.length;l++)p[l-1]=arguments[l];v.enableDebug&&console.info(v.TAG+_,p)},v.warn=function(_){for(var p=[],l=1;l<arguments.length;l++)p[l-1]=arguments[l];v.disableWarnings||console.warn(v.TAG+_,p)},v.enableDebug=!1,v.disableWarnings=!1,v.disableErrors=!1,v.TAG="ApplicationInsights:",v}();k.exports=c}),ee=O(s=>{"use strict";var k=s&&s.__assign||function(){return k=Object.assign||function(p){for(var l,u=1,h=arguments.length;u<h;u++){l=arguments[u];for(var g in l)Object.prototype.hasOwnProperty.call(l,g)&&(p[g]=l[g])}return p},k.apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0}),s.AsyncScopeManager=s.OpenTelemetryScopeManagerWrapper=void 0;var c=ji(),v=q(8614),_=function(){function p(){}return p.prototype.active=function(){var l=this,u=c.CorrelationContextManager.getCurrentContext();return k(k({},u),{getValue:function(h){return l._activeSymbol?h===l._activeSymbol?u:!1:(l._activeSymbol=h,u)},setValue:function(){}})},p.prototype.with=function(l,u){var h=l.parentSpanId,g=l.name,y=p._spanToContext(l,h,g);return c.CorrelationContextManager.runWithContext(y,u)()},p.prototype.bind=function(l){return typeof l=="function"?c.CorrelationContextManager.wrapCallback(l):(l instanceof v.EventEmitter&&c.CorrelationContextManager.wrapEmitter(l),l)},p.prototype.enable=function(){return c.CorrelationContextManager.enable(),this},p.prototype.disable=function(){return c.CorrelationContextManager.disable(),this},p._spanToContext=function(l,u,h){var g=u?"|"+l.spanContext().traceId+"."+u+".":l.spanContext().traceId,y=k(k({},l.spanContext()),{traceFlags:l.spanContext().traceFlags}),f=c.CorrelationContextManager.spanToContextObject(y,g,h);return f},p}();s.OpenTelemetryScopeManagerWrapper=_,s.AsyncScopeManager=new _}),Se=O((s,k)=>{s=k.exports=Ie;var c;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?c=function(){var b=Array.prototype.slice.call(arguments,0);b.unshift("SEMVER"),console.log.apply(console,b)}:c=function(){},s.SEMVER_SPEC_VERSION="2.0.0";var v=256,_=Number.MAX_SAFE_INTEGER||9007199254740991,p=16,l=s.re=[],u=s.src=[],h=0,g=h++;u[g]="0|[1-9]\\d*";var y=h++;u[y]="[0-9]+";var f=h++;u[f]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var w=h++;u[w]="("+u[g]+")\\.("+u[g]+")\\.("+u[g]+")";var E=h++;u[E]="("+u[y]+")\\.("+u[y]+")\\.("+u[y]+")";var R=h++;u[R]="(?:"+u[g]+"|"+u[f]+")";var C=h++;u[C]="(?:"+u[y]+"|"+u[f]+")";var D=h++;u[D]="(?:-("+u[R]+"(?:\\."+u[R]+")*))";var x=h++;u[x]="(?:-?("+u[C]+"(?:\\."+u[C]+")*))";var Q=h++;u[Q]="[0-9A-Za-z-]+";var te=h++;u[te]="(?:\\+("+u[Q]+"(?:\\."+u[Q]+")*))";var K=h++,ue="v?"+u[w]+u[D]+"?"+u[te]+"?";u[K]="^"+ue+"$";var _e="[v=\\s]*"+u[E]+u[x]+"?"+u[te]+"?",Te=h++;u[Te]="^"+_e+"$";var Re=h++;u[Re]="((?:<|>)?=?)";var xe=h++;u[xe]=u[y]+"|x|X|\\*";var qe=h++;u[qe]=u[g]+"|x|X|\\*";var He=h++;u[He]="[v=\\s]*("+u[qe]+")(?:\\.("+u[qe]+")(?:\\.("+u[qe]+")(?:"+u[D]+")?"+u[te]+"?)?)?";var ze=h++;u[ze]="[v=\\s]*("+u[xe]+")(?:\\.("+u[xe]+")(?:\\.("+u[xe]+")(?:"+u[x]+")?"+u[te]+"?)?)?";var ut=h++;u[ut]="^"+u[Re]+"\\s*"+u[He]+"$";var at=h++;u[at]="^"+u[Re]+"\\s*"+u[ze]+"$";var Ct=h++;u[Ct]="(?:^|[^\\d])(\\d{1,"+p+"})(?:\\.(\\d{1,"+p+"}))?(?:\\.(\\d{1,"+p+"}))?(?:$|[^\\d])";var tt=h++;u[tt]="(?:~>?)";var Fe=h++;u[Fe]="(\\s*)"+u[tt]+"\\s+",l[Fe]=new RegExp(u[Fe],"g");var Be="$1~",Ve=h++;u[Ve]="^"+u[tt]+u[He]+"$";var Xe=h++;u[Xe]="^"+u[tt]+u[ze]+"$";var rt=h++;u[rt]="(?:\\^)";var lt=h++;u[lt]="(\\s*)"+u[rt]+"\\s+",l[lt]=new RegExp(u[lt],"g");var Je="$1^",kt=h++;u[kt]="^"+u[rt]+u[He]+"$";var qt=h++;u[qt]="^"+u[rt]+u[ze]+"$";var Nt=h++;u[Nt]="^"+u[Re]+"\\s*("+_e+")$|^$";var Tt=h++;u[Tt]="^"+u[Re]+"\\s*("+ue+")$|^$";var gt=h++;u[gt]="(\\s*)"+u[Re]+"\\s*("+_e+"|"+u[He]+")",l[gt]=new RegExp(u[gt],"g");var Zt="$1$2$3",ar=h++;u[ar]="^\\s*("+u[He]+")\\s+-\\s+("+u[He]+")\\s*$";var et=h++;u[et]="^\\s*("+u[ze]+")\\s+-\\s+("+u[ze]+")\\s*$";var Ze=h++;for(u[Ze]="(<|>)?=?\\s*\\*",ot=0;ot<h;ot++)c(ot,u[ot]),l[ot]||(l[ot]=new RegExp(u[ot]));var ot;s.parse=Et;function Et(b,N){if((!N||typeof N!="object")&&(N={loose:!!N,includePrerelease:!1}),b instanceof Ie)return b;if(typeof b!="string"||b.length>v)return null;var F=N.loose?l[Te]:l[K];if(!F.test(b))return null;try{return new Ie(b,N)}catch(oe){return null}}s.valid=An;function An(b,N){var F=Et(b,N);return F?F.version:null}s.clean=tn;function tn(b,N){var F=Et(b.trim().replace(/^[=v]+/,""),N);return F?F.version:null}s.SemVer=Ie;function Ie(b,N){if((!N||typeof N!="object")&&(N={loose:!!N,includePrerelease:!1}),b instanceof Ie){if(b.loose===N.loose)return b;b=b.version}else if(typeof b!="string")throw new TypeError("Invalid Version: "+b);if(b.length>v)throw new TypeError("version is longer than "+v+" characters");if(!(this instanceof Ie))return new Ie(b,N);c("SemVer",b,N),this.options=N,this.loose=!!N.loose;var F=b.trim().match(N.loose?l[Te]:l[K]);if(!F)throw new TypeError("Invalid Version: "+b);if(this.raw=b,this.major=+F[1],this.minor=+F[2],this.patch=+F[3],this.major>_||this.major<0)throw new TypeError("Invalid major version");if(this.minor>_||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>_||this.patch<0)throw new TypeError("Invalid patch version");F[4]?this.prerelease=F[4].split(".").map(function(oe){if(/^[0-9]+$/.test(oe)){var le=+oe;if(le>=0&&le<_)return le}return oe}):this.prerelease=[],this.build=F[5]?F[5].split("."):[],this.format()}Ie.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},Ie.prototype.toString=function(){return this.version},Ie.prototype.compare=function(b){return c("SemVer.compare",this.version,this.options,b),b instanceof Ie||(b=new Ie(b,this.options)),this.compareMain(b)||this.comparePre(b)},Ie.prototype.compareMain=function(b){return b instanceof Ie||(b=new Ie(b,this.options)),Ht(this.major,b.major)||Ht(this.minor,b.minor)||Ht(this.patch,b.patch)},Ie.prototype.comparePre=function(b){if(b instanceof Ie||(b=new Ie(b,this.options)),this.prerelease.length&&!b.prerelease.length)return-1;if(!this.prerelease.length&&b.prerelease.length)return 1;if(!this.prerelease.length&&!b.prerelease.length)return 0;var N=0;do{var F=this.prerelease[N],oe=b.prerelease[N];if(c("prerelease compare",N,F,oe),F===void 0&&oe===void 0)return 0;if(oe===void 0)return 1;if(F===void 0)return-1;if(F!==oe)return Ht(F,oe)}while(++N)},Ie.prototype.inc=function(b,N){switch(b){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",N);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",N);break;case"prepatch":this.prerelease.length=0,this.inc("patch",N),this.inc("pre",N);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",N),this.inc("pre",N);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var F=this.prerelease.length;--F>=0;)typeof this.prerelease[F]=="number"&&(this.prerelease[F]++,F=-2);F===-1&&this.prerelease.push(0)}N&&(this.prerelease[0]===N?isNaN(this.prerelease[1])&&(this.prerelease=[N,0]):this.prerelease=[N,0]);break;default:throw new Error("invalid increment argument: "+b)}return this.format(),this.raw=this.version,this},s.inc=hn;function hn(b,N,F,oe){typeof F=="string"&&(oe=F,F=void 0);try{return new Ie(b,F).inc(N,oe).version}catch(le){return null}}s.diff=pn;function pn(b,N){if(Hr(b,N))return null;var F=Et(b),oe=Et(N),le="";if(F.prerelease.length||oe.prerelease.length){le="pre";var ge="prerelease"}for(var ye in F)if((ye==="major"||ye==="minor"||ye==="patch")&&F[ye]!==oe[ye])return le+ye;return ge}s.compareIdentifiers=Ht;var wr=/^[0-9]+$/;function Ht(b,N){var F=wr.test(b),oe=wr.test(N);return F&&oe&&(b=+b,N=+N),b===N?0:F&&!oe?-1:oe&&!F?1:b<N?-1:1}s.rcompareIdentifiers=mn;function mn(b,N){return Ht(N,b)}s.major=_r;function _r(b,N){return new Ie(b,N).major}s.minor=Kn;function Kn(b,N){return new Ie(b,N).minor}s.patch=fn;function fn(b,N){return new Ie(b,N).patch}s.compare=Rt;function Rt(b,N,F){return new Ie(b,F).compare(new Ie(N,F))}s.compareLoose=gn;function gn(b,N){return Rt(b,N,!0)}s.rcompare=vn;function vn(b,N,F){return Rt(N,b,F)}s.sort=Yn;function Yn(b,N){return b.sort(function(F,oe){return s.compare(F,oe,N)})}s.rsort=Xn;function Xn(b,N){return b.sort(function(F,oe){return s.rcompare(F,oe,N)})}s.gt=er;function er(b,N,F){return Rt(b,N,F)>0}s.lt=or;function or(b,N,F){return Rt(b,N,F)<0}s.eq=Hr;function Hr(b,N,F){return Rt(b,N,F)===0}s.neq=Er;function Er(b,N,F){return Rt(b,N,F)!==0}s.gte=pr;function pr(b,N,F){return Rt(b,N,F)>=0}s.lte=mr;function mr(b,N,F){return Rt(b,N,F)<=0}s.cmp=tr;function tr(b,N,F,oe){switch(N){case"===":return typeof b=="object"&&(b=b.version),typeof F=="object"&&(F=F.version),b===F;case"!==":return typeof b=="object"&&(b=b.version),typeof F=="object"&&(F=F.version),b!==F;case"":case"=":case"==":return Hr(b,F,oe);case"!=":return Er(b,F,oe);case">":return er(b,F,oe);case">=":return pr(b,F,oe);case"<":return or(b,F,oe);case"<=":return mr(b,F,oe);default:throw new TypeError("Invalid operator: "+N)}}s.Comparator=dt;function dt(b,N){if((!N||typeof N!="object")&&(N={loose:!!N,includePrerelease:!1}),b instanceof dt){if(b.loose===!!N.loose)return b;b=b.value}if(!(this instanceof dt))return new dt(b,N);c("comparator",b,N),this.options=N,this.loose=!!N.loose,this.parse(b),this.semver===nr?this.value="":this.value=this.operator+this.semver.version,c("comp",this)}var nr={};dt.prototype.parse=function(b){var N=this.options.loose?l[Nt]:l[Tt],F=b.match(N);if(!F)throw new TypeError("Invalid comparator: "+b);this.operator=F[1],this.operator==="="&&(this.operator=""),F[2]?this.semver=new Ie(F[2],this.options.loose):this.semver=nr},dt.prototype.toString=function(){return this.value},dt.prototype.test=function(b){return c("Comparator.test",b,this.options.loose),this.semver===nr?!0:(typeof b=="string"&&(b=new Ie(b,this.options)),tr(b,this.operator,this.semver,this.options))},dt.prototype.intersects=function(b,N){if(!(b instanceof dt))throw new TypeError("a Comparator is required");(!N||typeof N!="object")&&(N={loose:!!N,includePrerelease:!1});var F;if(this.operator==="")return F=new Qe(b.value,N),kr(this.value,F,N);if(b.operator==="")return F=new Qe(this.value,N),kr(b.semver,F,N);var oe=(this.operator===">="||this.operator===">")&&(b.operator===">="||b.operator===">"),le=(this.operator==="<="||this.operator==="<")&&(b.operator==="<="||b.operator==="<"),ge=this.semver.version===b.semver.version,ye=(this.operator===">="||this.operator==="<=")&&(b.operator===">="||b.operator==="<="),Me=tr(this.semver,"<",b.semver,N)&&(this.operator===">="||this.operator===">")&&(b.operator==="<="||b.operator==="<"),Oe=tr(this.semver,">",b.semver,N)&&(this.operator==="<="||this.operator==="<")&&(b.operator===">="||b.operator===">");return oe||le||ge&&ye||Me||Oe},s.Range=Qe;function Qe(b,N){if((!N||typeof N!="object")&&(N={loose:!!N,includePrerelease:!1}),b instanceof Qe)return b.loose===!!N.loose&&b.includePrerelease===!!N.includePrerelease?b:new Qe(b.raw,N);if(b instanceof dt)return new Qe(b.value,N);if(!(this instanceof Qe))return new Qe(b,N);if(this.options=N,this.loose=!!N.loose,this.includePrerelease=!!N.includePrerelease,this.raw=b,this.set=b.split(/\s*\|\|\s*/).map(function(F){return this.parseRange(F.trim())},this).filter(function(F){return F.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+b);this.format()}Qe.prototype.format=function(){return this.range=this.set.map(function(b){return b.join(" ").trim()}).join("||").trim(),this.range},Qe.prototype.toString=function(){return this.range},Qe.prototype.parseRange=function(b){var N=this.options.loose;b=b.trim();var F=N?l[et]:l[ar];b=b.replace(F,wi),c("hyphen replace",b),b=b.replace(l[gt],Zt),c("comparator trim",b,l[gt]),b=b.replace(l[Fe],Be),b=b.replace(l[lt],Je),b=b.split(/\s+/).join(" ");var oe=N?l[Nt]:l[Tt],le=b.split(" ").map(function(ge){return Or(ge,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(le=le.filter(function(ge){return!!ge.match(oe)})),le=le.map(function(ge){return new dt(ge,this.options)},this),le},Qe.prototype.intersects=function(b,N){if(!(b instanceof Qe))throw new TypeError("a Range is required");return this.set.some(function(F){return F.every(function(oe){return b.set.some(function(le){return le.every(function(ge){return oe.intersects(ge,N)})})})})},s.toComparators=yn;function yn(b,N){return new Qe(b,N).set.map(function(F){return F.map(function(oe){return oe.value}).join(" ").trim().split(" ")})}function Or(b,N){return c("comp",b,N),b=bi(b,N),c("caret",b),b=Wr(b,N),c("tildes",b),b=bn(b,N),c("xrange",b),b=Sr(b,N),c("stars",b),b}function st(b){return!b||b.toLowerCase()==="x"||b==="*"}function Wr(b,N){return b.trim().split(/\s+/).map(function(F){return Jn(F,N)}).join(" ")}function Jn(b,N){var F=N.loose?l[Xe]:l[Ve];return b.replace(F,function(oe,le,ge,ye,Me){c("tilde",b,oe,le,ge,ye,Me);var Oe;return st(le)?Oe="":st(ge)?Oe=">="+le+".0.0 <"+(+le+1)+".0.0":st(ye)?Oe=">="+le+"."+ge+".0 <"+le+"."+(+ge+1)+".0":Me?(c("replaceTilde pr",Me),Oe=">="+le+"."+ge+"."+ye+"-"+Me+" <"+le+"."+(+ge+1)+".0"):Oe=">="+le+"."+ge+"."+ye+" <"+le+"."+(+ge+1)+".0",c("tilde return",Oe),Oe})}function bi(b,N){return b.trim().split(/\s+/).map(function(F){return Zn(F,N)}).join(" ")}function Zn(b,N){c("caret",b,N);var F=N.loose?l[qt]:l[kt];return b.replace(F,function(oe,le,ge,ye,Me){c("caret",b,oe,le,ge,ye,Me);var Oe;return st(le)?Oe="":st(ge)?Oe=">="+le+".0.0 <"+(+le+1)+".0.0":st(ye)?le==="0"?Oe=">="+le+"."+ge+".0 <"+le+"."+(+ge+1)+".0":Oe=">="+le+"."+ge+".0 <"+(+le+1)+".0.0":Me?(c("replaceCaret pr",Me),le==="0"?ge==="0"?Oe=">="+le+"."+ge+"."+ye+"-"+Me+" <"+le+"."+ge+"."+(+ye+1):Oe=">="+le+"."+ge+"."+ye+"-"+Me+" <"+le+"."+(+ge+1)+".0":Oe=">="+le+"."+ge+"."+ye+"-"+Me+" <"+(+le+1)+".0.0"):(c("no pr"),le==="0"?ge==="0"?Oe=">="+le+"."+ge+"."+ye+" <"+le+"."+ge+"."+(+ye+1):Oe=">="+le+"."+ge+"."+ye+" <"+le+"."+(+ge+1)+".0":Oe=">="+le+"."+ge+"."+ye+" <"+(+le+1)+".0.0"),c("caret return",Oe),Oe})}function bn(b,N){return c("replaceXRanges",b,N),b.split(/\s+/).map(function(F){return In(F,N)}).join(" ")}function In(b,N){b=b.trim();var F=N.loose?l[at]:l[ut];return b.replace(F,function(oe,le,ge,ye,Me,Oe){c("xRange",b,oe,le,ge,ye,Me,Oe);var pt=st(ge),vt=pt||st(ye),mt=vt||st(Me),ht=mt;return le==="="&&ht&&(le=""),pt?le===">"||le==="<"?oe="<0.0.0":oe="*":le&&ht?(vt&&(ye=0),Me=0,le===">"?(le=">=",vt?(ge=+ge+1,ye=0,Me=0):(ye=+ye+1,Me=0)):le==="<="&&(le="<",vt?ge=+ge+1:ye=+ye+1),oe=le+ge+"."+ye+"."+Me):vt?oe=">="+ge+".0.0 <"+(+ge+1)+".0.0":mt&&(oe=">="+ge+"."+ye+".0 <"+ge+"."+(+ye+1)+".0"),c("xRange return",oe),oe})}function Sr(b,N){return c("replaceStars",b,N),b.trim().replace(l[Ze],"")}function wi(b,N,F,oe,le,ge,ye,Me,Oe,pt,vt,mt,ht){return st(F)?N="":st(oe)?N=">="+F+".0.0":st(le)?N=">="+F+"."+oe+".0":N=">="+N,st(Oe)?Me="":st(pt)?Me="<"+(+Oe+1)+".0.0":st(vt)?Me="<"+Oe+"."+(+pt+1)+".0":mt?Me="<="+Oe+"."+pt+"."+vt+"-"+mt:Me="<="+Me,(N+" "+Me).trim()}Qe.prototype.test=function(b){if(!b)return!1;typeof b=="string"&&(b=new Ie(b,this.options));for(var N=0;N<this.set.length;N++)if(_i(this.set[N],b,this.options))return!0;return!1};function _i(b,N,F){for(var oe=0;oe<b.length;oe++)if(!b[oe].test(N))return!1;if(N.prerelease.length&&!F.includePrerelease){for(oe=0;oe<b.length;oe++)if(c(b[oe].semver),b[oe].semver!==nr&&b[oe].semver.prerelease.length>0){var le=b[oe].semver;if(le.major===N.major&&le.minor===N.minor&&le.patch===N.patch)return!0}return!1}return!0}s.satisfies=kr;function kr(b,N,F){try{N=new Qe(N,F)}catch(oe){return!1}return N.test(b)}s.maxSatisfying=ei;function ei(b,N,F){var oe=null,le=null;try{var ge=new Qe(N,F)}catch(ye){return null}return b.forEach(function(ye){ge.test(ye)&&(!oe||le.compare(ye)===-1)&&(oe=ye,le=new Ie(oe,F))}),oe}s.minSatisfying=ti;function ti(b,N,F){var oe=null,le=null;try{var ge=new Qe(N,F)}catch(ye){return null}return b.forEach(function(ye){ge.test(ye)&&(!oe||le.compare(ye)===1)&&(oe=ye,le=new Ie(oe,F))}),oe}s.minVersion=rn;function rn(b,N){b=new Qe(b,N);var F=new Ie("0.0.0");if(b.test(F)||(F=new Ie("0.0.0-0"),b.test(F)))return F;F=null;for(var oe=0;oe<b.set.length;++oe){var le=b.set[oe];le.forEach(function(ge){var ye=new Ie(ge.semver.version);switch(ge.operator){case">":ye.prerelease.length===0?ye.patch++:ye.prerelease.push(0),ye.raw=ye.format();case"":case">=":(!F||er(F,ye))&&(F=ye);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+ge.operator)}})}return F&&b.test(F)?F:null}s.validRange=Ei;function Ei(b,N){try{return new Qe(b,N).range||"*"}catch(F){return null}}s.ltr=Si;function Si(b,N,F){return xr(b,N,"<",F)}s.gtr=ki;function ki(b,N,F){return xr(b,N,">",F)}s.outside=xr;function xr(b,N,F,oe){b=new Ie(b,oe),N=new Qe(N,oe);var le,ge,ye,Me,Oe;switch(F){case">":le=er,ge=mr,ye=or,Me=">",Oe=">=";break;case"<":le=or,ge=pr,ye=er,Me="<",Oe="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(kr(b,N,oe))return!1;for(var pt=0;pt<N.set.length;++pt){var vt=N.set[pt],mt=null,ht=null;if(vt.forEach(function(At){At.semver===nr&&(At=new dt(">=0.0.0")),mt=mt||At,ht=ht||At,le(At.semver,mt.semver,oe)?mt=At:ye(At.semver,ht.semver,oe)&&(ht=At)}),mt.operator===Me||mt.operator===Oe||(!ht.operator||ht.operator===Me)&&ge(b,ht.semver)||ht.operator===Oe&&ye(b,ht.semver))return!1}return!0}s.prerelease=Ti;function Ti(b,N){var F=Et(b,N);return F&&F.prerelease.length?F.prerelease:null}s.intersects=Kr;function Kr(b,N,F){return b=new Qe(b,F),N=new Qe(N,F),b.intersects(N)}s.coerce=Dn;function Dn(b){if(b instanceof Ie)return b;if(typeof b!="string")return null;var N=b.match(l[Ct]);return N==null?null:Et(N[1]+"."+(N[2]||"0")+"."+(N[3]||"0"))}}),fe=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.makePatchingRequire=void 0;var k=q(5622),c=Se(),v=q(2282),_=Object.keys(process.binding("natives")),p=v.prototype.require;function l(u){var h={};return function(g){var y=p.apply(this,arguments);if(u[g]){var f=v._resolveFilename(g,this);if(h.hasOwnProperty(f))return h[f];var w=void 0;if(_.indexOf(g)<0)try{w=p.call(this,k.join(g,"package.json")).version}catch(Q){return y}else w=process.version.substring(1);var E=w.indexOf("-");E>=0&&(w=w.substring(0,E));for(var R=y,C=0,D=u[g];C<D.length;C++){var x=D[C];c.satisfies(w,x.versionSpecifier)&&(R=x.patch(R,f))}return h[f]=R}return y}}s.makePatchingRequire=l}),De=O((s,k)=>{k.exports={name:"diagnostic-channel",version:"1.0.0",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"tslint -c tslint.json -p tsconfig.json",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^5.3.0"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}}),Z=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.channel=s.makePatchingRequire=void 0;var k=fe(),c=fe();Object.defineProperty(s,"makePatchingRequire",{enumerable:!0,get:function(){return c.makePatchingRequire}});var v=function(l){return!0},_=function(){function l(){this.version=De().version,this.subscribers={},this.contextPreservationFunction=function(u){return u},this.knownPatches={},this.currentlyPublishing=!1}return l.prototype.shouldPublish=function(u){var h=this.subscribers[u];return h?h.some(function(g){var y=g.filter;return!y||y(!1)}):!1},l.prototype.publish=function(u,h){if(!this.currentlyPublishing){var g=this.subscribers[u];if(g){var y={timestamp:Date.now(),data:h};this.currentlyPublishing=!0,g.forEach(function(f){var w=f.listener,E=f.filter;try{E&&E(!0)&&w(y)}catch(R){}}),this.currentlyPublishing=!1}}},l.prototype.subscribe=function(u,h,g){g===void 0&&(g=v),this.subscribers[u]||(this.subscribers[u]=[]),this.subscribers[u].push({listener:h,filter:g})},l.prototype.unsubscribe=function(u,h,g){g===void 0&&(g=v);var y=this.subscribers[u];if(y){for(var f=0;f<y.length;++f)if(y[f].listener===h&&y[f].filter===g)return y.splice(f,1),!0}return!1},l.prototype.reset=function(){var u=this;this.subscribers={},this.contextPreservationFunction=function(h){return h},Object.getOwnPropertyNames(this.knownPatches).forEach(function(h){return delete u.knownPatches[h]})},l.prototype.bindToContext=function(u){return this.contextPreservationFunction(u)},l.prototype.addContextPreservation=function(u){var h=this.contextPreservationFunction;this.contextPreservationFunction=function(g){return u(h(g))}},l.prototype.registerMonkeyPatch=function(u,h){this.knownPatches[u]||(this.knownPatches[u]=[]),this.knownPatches[u].push(h)},l.prototype.getPatchesObject=function(){return this.knownPatches},l}();global.diagnosticsSource||(global.diagnosticsSource=new _,p=q(2282),p.prototype.require=k.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var p;s.channel=global.diagnosticsSource}),de=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),ie=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s._globalThis=void 0,s._globalThis=typeof globalThis=="object"?globalThis:global}),re=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),c=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),c(ie(),s)}),X=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),c=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),c(re(),s)}),he=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.VERSION=void 0,s.VERSION="1.0.3"}),we=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.isCompatible=s._makeCompatibilityCheck=void 0;var k=he(),c=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function v(_){var p=new Set([_]),l=new Set,u=_.match(c);if(!u)return function(){return!1};var h={major:+u[1],minor:+u[2],patch:+u[3],prerelease:u[4]};if(h.prerelease!=null)return function(f){return f===_};function g(f){return l.add(f),!1}function y(f){return p.add(f),!0}return function(f){if(p.has(f))return!0;if(l.has(f))return!1;var w=f.match(c);if(!w)return g(f);var E={major:+w[1],minor:+w[2],patch:+w[3],prerelease:w[4]};return E.prerelease!=null||h.major!==E.major?g(f):h.major===0?h.minor===E.minor&&h.patch<=E.patch?y(f):g(f):h.minor<=E.minor?y(f):g(f)}}s._makeCompatibilityCheck=v,s.isCompatible=v(k.VERSION)}),Ee=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.unregisterGlobal=s.getGlobal=s.registerGlobal=void 0;var k=X(),c=he(),v=we(),_=c.VERSION.split(".")[0],p=Symbol.for("opentelemetry.js.api."+_),l=k._globalThis;function u(y,f,w,E){var R;E===void 0&&(E=!1);var C=l[p]=(R=l[p])!==null&&R!==void 0?R:{version:c.VERSION};if(!E&&C[y]){var D=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+y);return w.error(D.stack||D.message),!1}if(C.version!==c.VERSION){var D=new Error("@opentelemetry/api: All API registration versions must match");return w.error(D.stack||D.message),!1}return C[y]=f,w.debug("@opentelemetry/api: Registered a global for "+y+" v"+c.VERSION+"."),!0}s.registerGlobal=u;function h(y){var f,w,E=(f=l[p])===null||f===void 0?void 0:f.version;if(!(!E||!v.isCompatible(E)))return(w=l[p])===null||w===void 0?void 0:w[y]}s.getGlobal=h;function g(y,f){f.debug("@opentelemetry/api: Unregistering a global for "+y+" v"+c.VERSION+".");var w=l[p];w&&delete w[y]}s.unregisterGlobal=g}),Pe=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.DiagComponentLogger=void 0;var k=Ee(),c=function(){function _(p){this._namespace=p.namespace||"DiagComponentLogger"}return _.prototype.debug=function(){for(var p=[],l=0;l<arguments.length;l++)p[l]=arguments[l];return v("debug",this._namespace,p)},_.prototype.error=function(){for(var p=[],l=0;l<arguments.length;l++)p[l]=arguments[l];return v("error",this._namespace,p)},_.prototype.info=function(){for(var p=[],l=0;l<arguments.length;l++)p[l]=arguments[l];return v("info",this._namespace,p)},_.prototype.warn=function(){for(var p=[],l=0;l<arguments.length;l++)p[l]=arguments[l];return v("warn",this._namespace,p)},_.prototype.verbose=function(){for(var p=[],l=0;l<arguments.length;l++)p[l]=arguments[l];return v("verbose",this._namespace,p)},_}();s.DiagComponentLogger=c;function v(_,p,l){var u=k.getGlobal("diag");if(u)return l.unshift(p),u[_].apply(u,l)}}),ke=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.DiagLogLevel=void 0;var k;(function(c){c[c.NONE=0]="NONE",c[c.ERROR=30]="ERROR",c[c.WARN=50]="WARN",c[c.INFO=60]="INFO",c[c.DEBUG=70]="DEBUG",c[c.VERBOSE=80]="VERBOSE",c[c.ALL=9999]="ALL"})(k=s.DiagLogLevel||(s.DiagLogLevel={}))}),je=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.createLogLevelDiagLogger=void 0;var k=ke();function c(v,_){v<k.DiagLogLevel.NONE?v=k.DiagLogLevel.NONE:v>k.DiagLogLevel.ALL&&(v=k.DiagLogLevel.ALL),_=_||{};function p(l,u){var h=_[l];return typeof h=="function"&&v>=u?h.bind(_):function(){}}return{error:p("error",k.DiagLogLevel.ERROR),warn:p("warn",k.DiagLogLevel.WARN),info:p("info",k.DiagLogLevel.INFO),debug:p("debug",k.DiagLogLevel.DEBUG),verbose:p("verbose",k.DiagLogLevel.VERBOSE)}}s.createLogLevelDiagLogger=c}),Ye=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.DiagAPI=void 0;var k=Pe(),c=je(),v=ke(),_=Ee(),p="diag",l=function(){function u(){function h(y){return function(){var f=_.getGlobal("diag");if(f)return f[y].apply(f,arguments)}}var g=this;g.setLogger=function(y,f){var w,E;if(f===void 0&&(f=v.DiagLogLevel.INFO),y===g){var R=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return g.error((w=R.stack)!==null&&w!==void 0?w:R.message),!1}var C=_.getGlobal("diag"),D=c.createLogLevelDiagLogger(f,y);if(C){var x=(E=new Error().stack)!==null&&E!==void 0?E:"<failed to generate stacktrace>";C.warn("Current logger will be overwritten from "+x),D.warn("Current logger will overwrite one already registered from "+x)}return _.registerGlobal("diag",D,g,!0)},g.disable=function(){_.unregisterGlobal(p,g)},g.createComponentLogger=function(y){return new k.DiagComponentLogger(y)},g.verbose=h("verbose"),g.debug=h("debug"),g.info=h("info"),g.warn=h("warn"),g.error=h("error")}return u.instance=function(){return this._instance||(this._instance=new u),this._instance},u}();s.DiagAPI=l}),ct=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.BaggageImpl=void 0;var k=function(){function c(v){this._entries=v?new Map(v):new Map}return c.prototype.getEntry=function(v){var _=this._entries.get(v);if(_)return Object.assign({},_)},c.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(v){var _=v[0],p=v[1];return[_,p]})},c.prototype.setEntry=function(v,_){var p=new c(this._entries);return p._entries.set(v,_),p},c.prototype.removeEntry=function(v){var _=new c(this._entries);return _._entries.delete(v),_},c.prototype.removeEntries=function(){for(var v=[],_=0;_<arguments.length;_++)v[_]=arguments[_];for(var p=new c(this._entries),l=0,u=v;l<u.length;l++){var h=u[l];p._entries.delete(h)}return p},c.prototype.clear=function(){return new c},c}();s.BaggageImpl=k}),yt=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.baggageEntryMetadataSymbol=void 0,s.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")}),zt=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.baggageEntryMetadataFromString=s.createBaggage=void 0;var k=Ye(),c=ct(),v=yt(),_=k.DiagAPI.instance();function p(u){return u===void 0&&(u={}),new c.BaggageImpl(new Map(Object.entries(u)))}s.createBaggage=p;function l(u){return typeof u!="string"&&(_.error("Cannot create baggage metadata from unknown type: "+typeof u),u=""),{__TYPE__:v.baggageEntryMetadataSymbol,toString:function(){return u}}}s.baggageEntryMetadataFromString=l}),Yt=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),rr=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Xt=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.DiagConsoleLogger=void 0;var k=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],c=function(){function v(){function _(l){return function(){var u=arguments;if(console){var h=console[l];if(typeof h!="function"&&(h=console.log),typeof h=="function")return h.apply(console,u)}}}for(var p=0;p<k.length;p++)this[k[p].n]=_(k[p].c)}return v}();s.DiagConsoleLogger=c}),Ir=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),c=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),c(Xt(),s),c(ke(),s)}),qr=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.defaultTextMapSetter=s.defaultTextMapGetter=void 0,s.defaultTextMapGetter={get:function(k,c){if(k!=null)return k[c]},keys:function(k){return k==null?[]:Object.keys(k)}},s.defaultTextMapSetter={set:function(k,c,v){k!=null&&(k[c]=v)}}}),Sn=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Ts=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),ui=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.ROOT_CONTEXT=s.createContextKey=void 0;function k(v){return Symbol.for(v)}s.createContextKey=k;var c=function(){function v(_){var p=this;p._currentContext=_?new Map(_):new Map,p.getValue=function(l){return p._currentContext.get(l)},p.setValue=function(l,u){var h=new v(p._currentContext);return h._currentContext.set(l,u),h},p.deleteValue=function(l){var u=new v(p._currentContext);return u._currentContext.delete(l),u}}return v}();s.ROOT_CONTEXT=new c}),rs=O(s=>{"use strict";var k=s&&s.__spreadArray||function(_,p){for(var l=0,u=p.length,h=_.length;l<u;l++,h++)_[h]=p[l];return _};Object.defineProperty(s,"__esModule",{value:!0}),s.NoopContextManager=void 0;var c=ui(),v=function(){function _(){}return _.prototype.active=function(){return c.ROOT_CONTEXT},_.prototype.with=function(p,l,u){for(var h=[],g=3;g<arguments.length;g++)h[g-3]=arguments[g];return l.call.apply(l,k([u],h))},_.prototype.bind=function(p,l){return l},_.prototype.enable=function(){return this},_.prototype.disable=function(){return this},_}();s.NoopContextManager=v}),li=O(s=>{"use strict";var k=s&&s.__spreadArray||function(h,g){for(var y=0,f=g.length,w=h.length;y<f;y++,w++)h[w]=g[y];return h};Object.defineProperty(s,"__esModule",{value:!0}),s.ContextAPI=void 0;var c=rs(),v=Ee(),_=Ye(),p="context",l=new c.NoopContextManager,u=function(){function h(){}return h.getInstance=function(){return this._instance||(this._instance=new h),this._instance},h.prototype.setGlobalContextManager=function(g){return v.registerGlobal(p,g,_.DiagAPI.instance())},h.prototype.active=function(){return this._getContextManager().active()},h.prototype.with=function(g,y,f){for(var w,E=[],R=3;R<arguments.length;R++)E[R-3]=arguments[R];return(w=this._getContextManager()).with.apply(w,k([g,y,f],E))},h.prototype.bind=function(g,y){return this._getContextManager().bind(g,y)},h.prototype._getContextManager=function(){return v.getGlobal(p)||l},h.prototype.disable=function(){this._getContextManager().disable(),v.unregisterGlobal(p,_.DiagAPI.instance())},h}();s.ContextAPI=u}),qn=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.TraceFlags=void 0;var k;(function(c){c[c.NONE=0]="NONE",c[c.SAMPLED=1]="SAMPLED"})(k=s.TraceFlags||(s.TraceFlags={}))}),$t=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.INVALID_SPAN_CONTEXT=s.INVALID_TRACEID=s.INVALID_SPANID=void 0;var k=qn();s.INVALID_SPANID="0000000000000000",s.INVALID_TRACEID="00000000000000000000000000000000",s.INVALID_SPAN_CONTEXT={traceId:s.INVALID_TRACEID,spanId:s.INVALID_SPANID,traceFlags:k.TraceFlags.NONE}}),ci=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.NonRecordingSpan=void 0;var k=$t(),c=function(){function v(_){_===void 0&&(_=k.INVALID_SPAN_CONTEXT),this._spanContext=_}return v.prototype.spanContext=function(){return this._spanContext},v.prototype.setAttribute=function(_,p){return this},v.prototype.setAttributes=function(_){return this},v.prototype.addEvent=function(_,p){return this},v.prototype.setStatus=function(_){return this},v.prototype.updateName=function(_){return this},v.prototype.end=function(_){},v.prototype.isRecording=function(){return!1},v.prototype.recordException=function(_,p){},v}();s.NonRecordingSpan=c}),Jt=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.getSpanContext=s.setSpanContext=s.deleteSpan=s.setSpan=s.getSpan=void 0;var k=ui(),c=ci(),v=k.createContextKey("OpenTelemetry Context Key SPAN");function _(g){return g.getValue(v)||void 0}s.getSpan=_;function p(g,y){return g.setValue(v,y)}s.setSpan=p;function l(g){return g.deleteValue(v)}s.deleteSpan=l;function u(g,y){return p(g,new c.NonRecordingSpan(y))}s.setSpanContext=u;function h(g){var y;return(y=_(g))===null||y===void 0?void 0:y.spanContext()}s.getSpanContext=h}),bt=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.wrapSpanContext=s.isSpanContextValid=s.isValidSpanId=s.isValidTraceId=void 0;var k=$t(),c=ci(),v=/^([0-9a-f]{32})$/i,_=/^[0-9a-f]{16}$/i;function p(g){return v.test(g)&&g!==k.INVALID_TRACEID}s.isValidTraceId=p;function l(g){return _.test(g)&&g!==k.INVALID_SPANID}s.isValidSpanId=l;function u(g){return p(g.traceId)&&l(g.spanId)}s.isSpanContextValid=u;function h(g){return new c.NonRecordingSpan(g)}s.wrapSpanContext=h}),gr=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.NoopTracer=void 0;var k=li(),c=Jt(),v=ci(),_=bt(),p=k.ContextAPI.getInstance(),l=function(){function h(){}return h.prototype.startSpan=function(g,y,f){var w=Boolean(y==null?void 0:y.root);if(w)return new v.NonRecordingSpan;var E=f&&c.getSpanContext(f);return u(E)&&_.isSpanContextValid(E)?new v.NonRecordingSpan(E):new v.NonRecordingSpan},h.prototype.startActiveSpan=function(g,y,f,w){var E,R,C;if(!(arguments.length<2)){arguments.length===2?C=y:arguments.length===3?(E=y,C=f):(E=y,R=f,C=w);var D=R!=null?R:p.active(),x=this.startSpan(g,E,D),Q=c.setSpan(D,x);return p.with(Q,C,void 0,x)}},h}();s.NoopTracer=l;function u(h){return typeof h=="object"&&typeof h.spanId=="string"&&typeof h.traceId=="string"&&typeof h.traceFlags=="number"}}),Un=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.ProxyTracer=void 0;var k=gr(),c=new k.NoopTracer,v=function(){function _(p,l,u){this._provider=p,this.name=l,this.version=u}return _.prototype.startSpan=function(p,l,u){return this._getTracer().startSpan(p,l,u)},_.prototype.startActiveSpan=function(p,l,u,h){var g=this._getTracer();return Reflect.apply(g.startActiveSpan,g,arguments)},_.prototype._getTracer=function(){if(this._delegate)return this._delegate;var p=this._provider.getDelegateTracer(this.name,this.version);return p?(this._delegate=p,this._delegate):c},_}();s.ProxyTracer=v}),di=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.NoopTracerProvider=void 0;var k=gr(),c=function(){function v(){}return v.prototype.getTracer=function(_,p){return new k.NoopTracer},v}();s.NoopTracerProvider=c}),hi=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.ProxyTracerProvider=void 0;var k=Un(),c=di(),v=new c.NoopTracerProvider,_=function(){function p(){}return p.prototype.getTracer=function(l,u){var h;return(h=this.getDelegateTracer(l,u))!==null&&h!==void 0?h:new k.ProxyTracer(this,l,u)},p.prototype.getDelegate=function(){var l;return(l=this._delegate)!==null&&l!==void 0?l:v},p.prototype.setDelegate=function(l){this._delegate=l},p.prototype.getDelegateTracer=function(l,u){var h;return(h=this._delegate)===null||h===void 0?void 0:h.getTracer(l,u)},p}();s.ProxyTracerProvider=_}),ns=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),is=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.SamplingDecision=void 0;var k;(function(c){c[c.NOT_RECORD=0]="NOT_RECORD",c[c.RECORD=1]="RECORD",c[c.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(k=s.SamplingDecision||(s.SamplingDecision={}))}),ir=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Gu=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.SpanKind=void 0;var k;(function(c){c[c.INTERNAL=0]="INTERNAL",c[c.SERVER=1]="SERVER",c[c.CLIENT=2]="CLIENT",c[c.PRODUCER=3]="PRODUCER",c[c.CONSUMER=4]="CONSUMER"})(k=s.SpanKind||(s.SpanKind={}))}),uo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),$n=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Rs=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.SpanStatusCode=void 0;var k;(function(c){c[c.UNSET=0]="UNSET",c[c.OK=1]="OK",c[c.ERROR=2]="ERROR"})(k=s.SpanStatusCode||(s.SpanStatusCode={}))}),Fi=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Dr=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Hu=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Vu=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),lo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.TraceAPI=void 0;var k=Ee(),c=hi(),v=bt(),_=Jt(),p=Ye(),l="trace",u=function(){function h(){this._proxyTracerProvider=new c.ProxyTracerProvider,this.wrapSpanContext=v.wrapSpanContext,this.isSpanContextValid=v.isSpanContextValid,this.deleteSpan=_.deleteSpan,this.getSpan=_.getSpan,this.getSpanContext=_.getSpanContext,this.setSpan=_.setSpan,this.setSpanContext=_.setSpanContext}return h.getInstance=function(){return this._instance||(this._instance=new h),this._instance},h.prototype.setGlobalTracerProvider=function(g){var y=k.registerGlobal(l,this._proxyTracerProvider,p.DiagAPI.instance());return y&&this._proxyTracerProvider.setDelegate(g),y},h.prototype.getTracerProvider=function(){return k.getGlobal(l)||this._proxyTracerProvider},h.prototype.getTracer=function(g,y){return this.getTracerProvider().getTracer(g,y)},h.prototype.disable=function(){k.unregisterGlobal(l,p.DiagAPI.instance()),this._proxyTracerProvider=new c.ProxyTracerProvider},h}();s.TraceAPI=u}),ca=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.NoopTextMapPropagator=void 0;var k=function(){function c(){}return c.prototype.inject=function(v,_){},c.prototype.extract=function(v,_){return v},c.prototype.fields=function(){return[]},c}();s.NoopTextMapPropagator=k}),cn=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.deleteBaggage=s.setBaggage=s.getBaggage=void 0;var k=ui(),c=k.createContextKey("OpenTelemetry Baggage Key");function v(l){return l.getValue(c)||void 0}s.getBaggage=v;function _(l,u){return l.setValue(c,u)}s.setBaggage=_;function p(l){return l.deleteValue(c)}s.deleteBaggage=p}),co=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.PropagationAPI=void 0;var k=Ee(),c=ca(),v=qr(),_=cn(),p=zt(),l=Ye(),u="propagation",h=new c.NoopTextMapPropagator,g=function(){function y(){this.createBaggage=p.createBaggage,this.getBaggage=_.getBaggage,this.setBaggage=_.setBaggage,this.deleteBaggage=_.deleteBaggage}return y.getInstance=function(){return this._instance||(this._instance=new y),this._instance},y.prototype.setGlobalPropagator=function(f){return k.registerGlobal(u,f,l.DiagAPI.instance())},y.prototype.inject=function(f,w,E){return E===void 0&&(E=v.defaultTextMapSetter),this._getGlobalPropagator().inject(f,w,E)},y.prototype.extract=function(f,w,E){return E===void 0&&(E=v.defaultTextMapGetter),this._getGlobalPropagator().extract(f,w,E)},y.prototype.fields=function(){return this._getGlobalPropagator().fields()},y.prototype.disable=function(){k.unregisterGlobal(u,l.DiagAPI.instance())},y.prototype._getGlobalPropagator=function(){return k.getGlobal(u)||h},y}();s.PropagationAPI=g}),Ft=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(y,f,w,E){E===void 0&&(E=w),Object.defineProperty(y,E,{enumerable:!0,get:function(){return f[w]}})}:function(y,f,w,E){E===void 0&&(E=w),y[E]=f[w]}),c=s&&s.__exportStar||function(y,f){for(var w in y)w!=="default"&&!Object.prototype.hasOwnProperty.call(f,w)&&k(f,y,w)};Object.defineProperty(s,"__esModule",{value:!0}),s.diag=s.propagation=s.trace=s.context=s.INVALID_SPAN_CONTEXT=s.INVALID_TRACEID=s.INVALID_SPANID=s.isValidSpanId=s.isValidTraceId=s.isSpanContextValid=s.baggageEntryMetadataFromString=void 0,c(de(),s);var v=zt();Object.defineProperty(s,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return v.baggageEntryMetadataFromString}}),c(Yt(),s),c(rr(),s),c(Ir(),s),c(qr(),s),c(Sn(),s),c(Ts(),s),c(Un(),s),c(hi(),s),c(ns(),s),c(is(),s),c(ir(),s),c(Gu(),s),c(uo(),s),c($n(),s),c(Rs(),s),c(qn(),s),c(Fi(),s),c(Dr(),s),c(Hu(),s);var _=bt();Object.defineProperty(s,"isSpanContextValid",{enumerable:!0,get:function(){return _.isSpanContextValid}}),Object.defineProperty(s,"isValidTraceId",{enumerable:!0,get:function(){return _.isValidTraceId}}),Object.defineProperty(s,"isValidSpanId",{enumerable:!0,get:function(){return _.isValidSpanId}});var p=$t();Object.defineProperty(s,"INVALID_SPANID",{enumerable:!0,get:function(){return p.INVALID_SPANID}}),Object.defineProperty(s,"INVALID_TRACEID",{enumerable:!0,get:function(){return p.INVALID_TRACEID}}),Object.defineProperty(s,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return p.INVALID_SPAN_CONTEXT}}),c(ui(),s),c(Vu(),s);var l=li();s.context=l.ContextAPI.getInstance();var u=lo();s.trace=u.TraceAPI.getInstance();var h=co();s.propagation=h.PropagationAPI.getInstance();var g=Ye();s.diag=g.DiagAPI.instance(),s.default={trace:s.trace,context:s.context,propagation:s.propagation,diag:s.diag}}),Gn=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.isTracingSuppressed=s.unsuppressTracing=s.suppressTracing=void 0;var k=Ft(),c=k.createContextKey("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function v(l){return l.setValue(c,!0)}s.suppressTracing=v;function _(l){return l.deleteValue(c)}s.unsuppressTracing=_;function p(l){return l.getValue(c)===!0}s.isTracingSuppressed=p}),Cs=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.BAGGAGE_MAX_TOTAL_LENGTH=s.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=s.BAGGAGE_MAX_NAME_VALUE_PAIRS=s.BAGGAGE_HEADER=s.BAGGAGE_ITEMS_SEPARATOR=s.BAGGAGE_PROPERTIES_SEPARATOR=s.BAGGAGE_KEY_PAIR_SEPARATOR=void 0,s.BAGGAGE_KEY_PAIR_SEPARATOR="=",s.BAGGAGE_PROPERTIES_SEPARATOR=";",s.BAGGAGE_ITEMS_SEPARATOR=",",s.BAGGAGE_HEADER="baggage",s.BAGGAGE_MAX_NAME_VALUE_PAIRS=180,s.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096,s.BAGGAGE_MAX_TOTAL_LENGTH=8192}),Hn=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.parseKeyPairsIntoRecord=s.parsePairKeyValue=s.getKeyPairs=s.serializeKeyPairs=void 0;var k=Ft(),c=Cs(),v=u=>u.reduce((h,g)=>{let y=`${h}${h!==""?c.BAGGAGE_ITEMS_SEPARATOR:""}${g}`;return y.length>c.BAGGAGE_MAX_TOTAL_LENGTH?h:y},"");s.serializeKeyPairs=v;var _=u=>u.getAllEntries().map(([h,g])=>`${encodeURIComponent(h)}=${encodeURIComponent(g.value)}`);s.getKeyPairs=_;var p=u=>{let h=u.split(c.BAGGAGE_PROPERTIES_SEPARATOR);if(h.length<=0)return;let g=h.shift();if(!g)return;let y=g.split(c.BAGGAGE_KEY_PAIR_SEPARATOR);if(y.length!==2)return;let f=decodeURIComponent(y[0].trim()),w=decodeURIComponent(y[1].trim()),E;return h.length>0&&(E=k.baggageEntryMetadataFromString(h.join(c.BAGGAGE_PROPERTIES_SEPARATOR))),{key:f,value:w,metadata:E}};s.parsePairKeyValue=p;var l=u=>typeof u!="string"||u.length===0?{}:u.split(c.BAGGAGE_ITEMS_SEPARATOR).map(h=>s.parsePairKeyValue(h)).filter(h=>h!==void 0&&h.value.length>0).reduce((h,g)=>(h[g.key]=g.value,h),{});s.parseKeyPairsIntoRecord=l}),Bu=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.HttpBaggagePropagator=void 0;var k=Ft(),c=Gn(),v=Cs(),_=Hn(),p=class{inject(l,u,h){let g=k.propagation.getBaggage(l);if(!g||c.isTracingSuppressed(l))return;let y=_.getKeyPairs(g).filter(w=>w.length<=v.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS).slice(0,v.BAGGAGE_MAX_NAME_VALUE_PAIRS),f=_.serializeKeyPairs(y);f.length>0&&h.set(u,v.BAGGAGE_HEADER,f)}extract(l,u,h){let g=h.get(u,v.BAGGAGE_HEADER);if(!g)return l;let y={};return g.length===0||(g.split(v.BAGGAGE_ITEMS_SEPARATOR).forEach(f=>{let w=_.parsePairKeyValue(f);if(w){let E={value:w.value};w.metadata&&(E.metadata=w.metadata),y[w.key]=E}}),Object.entries(y).length===0)?l:k.propagation.setBaggage(l,k.propagation.createBaggage(y))}fields(){return[v.BAGGAGE_HEADER]}};s.HttpBaggagePropagator=p}),ju=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.isAttributeValue=s.sanitizeAttributes=void 0;function k(p){let l={};if(p==null||typeof p!="object")return l;for(let[u,h]of Object.entries(p))c(h)&&(Array.isArray(h)?l[u]=h.slice():l[u]=h);return l}s.sanitizeAttributes=k;function c(p){return p==null?!0:Array.isArray(p)?v(p):_(p)}s.isAttributeValue=c;function v(p){let l;for(let u of p)if(u!=null){if(!l){if(_(u)){l=typeof u;continue}return!1}if(typeof u!==l)return!1}return!0}function _(p){switch(typeof p){case"number":return!0;case"boolean":return!0;case"string":return!0}return!1}}),Vn=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.loggingErrorHandler=void 0;var k=Ft();function c(){return p=>{k.diag.error(v(p))}}s.loggingErrorHandler=c;function v(p){return typeof p=="string"?p:JSON.stringify(_(p))}function _(p){let l={},u=p;for(;u!==null;)Object.getOwnPropertyNames(u).forEach(h=>{if(l[h])return;let g=u[h];g&&(l[h]=String(g))}),u=Object.getPrototypeOf(u);return l}}),Ps=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.globalErrorHandler=s.setGlobalErrorHandler=void 0;var k=Vn(),c=k.loggingErrorHandler();function v(p){c=p}s.setGlobalErrorHandler=v;var _=p=>{try{c(p)}catch(l){}};s.globalErrorHandler=_}),da=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.TracesSamplerValues=void 0;var k;(function(c){c.AlwaysOff="always_off",c.AlwaysOn="always_on",c.ParentBasedAlwaysOff="parentbased_always_off",c.ParentBasedAlwaysOn="parentbased_always_on",c.ParentBasedTraceIdRatio="parentbased_traceidratio",c.TraceIdRatio="traceidratio"})(k=s.TracesSamplerValues||(s.TracesSamplerValues={}))}),ha=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.parseEnvironment=s.DEFAULT_ENVIRONMENT=void 0;var k=Ft(),c=da(),v=",",_=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT"];function p(E){return _.indexOf(E)>-1}var l=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function u(E){return l.indexOf(E)>-1}s.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:k.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:c.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:""};function h(E,R,C,D=-1/0,x=1/0){if(typeof C[E]!="undefined"){let Q=Number(C[E]);isNaN(Q)||(Q<D?R[E]=D:Q>x?R[E]=x:R[E]=Q)}}function g(E,R,C,D=v){let x=C[E];typeof x=="string"&&(R[E]=x.split(D).map(Q=>Q.trim()))}var y={ALL:k.DiagLogLevel.ALL,VERBOSE:k.DiagLogLevel.VERBOSE,DEBUG:k.DiagLogLevel.DEBUG,INFO:k.DiagLogLevel.INFO,WARN:k.DiagLogLevel.WARN,ERROR:k.DiagLogLevel.ERROR,NONE:k.DiagLogLevel.NONE};function f(E,R,C){let D=C[E];if(typeof D=="string"){let x=y[D.toUpperCase()];x!=null&&(R[E]=x)}}function w(E){let R={};for(let C in s.DEFAULT_ENVIRONMENT){let D=C;switch(D){case"OTEL_LOG_LEVEL":f(D,R,E);break;default:if(p(D))h(D,R,E);else if(u(D))g(D,R,E);else{let x=E[D];typeof x!="undefined"&&x!==null&&(R[D]=String(x))}}}return R}s.parseEnvironment=w}),ho=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.getEnv=void 0;var k=q(2087),c=ha();function v(){let _=c.parseEnvironment(process.env);return Object.assign({HOSTNAME:k.hostname()},c.DEFAULT_ENVIRONMENT,_)}s.getEnv=v}),Li=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.hexToBase64=void 0;function k(c){let v=c.length,_="";for(let p=0;p<v;p+=2){let l=c.substring(p,p+2),u=parseInt(l,16);_+=String.fromCharCode(u)}return Buffer.from(_,"ascii").toString("base64")}s.hexToBase64=k}),po=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.RandomIdGenerator=void 0;var k=8,c=16,v=class{constructor(){this.generateTraceId=p(c),this.generateSpanId=p(k)}};s.RandomIdGenerator=v;var _=Buffer.allocUnsafe(c);function p(l){return function(){for(let u=0;u<l/4;u++)_.writeUInt32BE(Math.random()*2**32>>>0,u*4);for(let u=0;u<l&&!(_[u]>0);u++)u===l-1&&(_[l-1]=1);return _.toString("hex",0,l)}}}),zu=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.otperformance=void 0;var k=q(630);s.otperformance=k.performance}),pa=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.VERSION=void 0,s.VERSION="0.23.0"}),Gt=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.RpcGrpcStatusCodeValues=s.MessagingOperationValues=s.MessagingDestinationKindValues=s.HttpFlavorValues=s.NetTransportValues=s.FaasInvokedProviderValues=s.FaasDocumentOperationValues=s.FaasTriggerValues=s.DbCassandraConsistencyLevelValues=s.DbSystemValues=s.SemanticAttributes=void 0,s.SemanticAttributes={DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_METHOD:"rpc.jsonrpc.method",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message"};var k;(function(f){f.OTHER_SQL="other_sql",f.MSSQL="mssql",f.MYSQL="mysql",f.ORACLE="oracle",f.DB2="db2",f.POSTGRESQL="postgresql",f.REDSHIFT="redshift",f.HIVE="hive",f.CLOUDSCAPE="cloudscape",f.HSQLDB="hsqldb",f.PROGRESS="progress",f.MAXDB="maxdb",f.HANADB="hanadb",f.INGRES="ingres",f.FIRSTSQL="firstsql",f.EDB="edb",f.CACHE="cache",f.ADABAS="adabas",f.FIREBIRD="firebird",f.DERBY="derby",f.FILEMAKER="filemaker",f.INFORMIX="informix",f.INSTANTDB="instantdb",f.INTERBASE="interbase",f.MARIADB="mariadb",f.NETEZZA="netezza",f.PERVASIVE="pervasive",f.POINTBASE="pointbase",f.SQLITE="sqlite",f.SYBASE="sybase",f.TERADATA="teradata",f.VERTICA="vertica",f.H2="h2",f.COLDFUSION="coldfusion",f.CASSANDRA="cassandra",f.HBASE="hbase",f.MONGODB="mongodb",f.REDIS="redis",f.COUCHBASE="couchbase",f.COUCHDB="couchdb",f.COSMOSDB="cosmosdb",f.DYNAMODB="dynamodb",f.NEO4J="neo4j",f.GEODE="geode",f.ELASTICSEARCH="elasticsearch",f.MEMCACHED="memcached",f.COCKROACHDB="cockroachdb"})(k=s.DbSystemValues||(s.DbSystemValues={}));var c;(function(f){f.ALL="all",f.EACH_QUORUM="each_quorum",f.QUORUM="quorum",f.LOCAL_QUORUM="local_quorum",f.ONE="one",f.TWO="two",f.THREE="three",f.LOCAL_ONE="local_one",f.ANY="any",f.SERIAL="serial",f.LOCAL_SERIAL="local_serial"})(c=s.DbCassandraConsistencyLevelValues||(s.DbCassandraConsistencyLevelValues={}));var v;(function(f){f.DATASOURCE="datasource",f.HTTP="http",f.PUBSUB="pubsub",f.TIMER="timer",f.OTHER="other"})(v=s.FaasTriggerValues||(s.FaasTriggerValues={}));var _;(function(f){f.INSERT="insert",f.EDIT="edit",f.DELETE="delete"})(_=s.FaasDocumentOperationValues||(s.FaasDocumentOperationValues={}));var p;(function(f){f.AWS="aws",f.AZURE="azure",f.GCP="gcp"})(p=s.FaasInvokedProviderValues||(s.FaasInvokedProviderValues={}));var l;(function(f){f.IP_TCP="ip_tcp",f.IP_UDP="ip_udp",f.IP="ip",f.UNIX="unix",f.PIPE="pipe",f.INPROC="inproc",f.OTHER="other"})(l=s.NetTransportValues||(s.NetTransportValues={}));var u;(function(f){f.HTTP_1_0="1.0",f.HTTP_1_1="1.1",f.HTTP_2_0="2.0",f.SPDY="SPDY",f.QUIC="QUIC"})(u=s.HttpFlavorValues||(s.HttpFlavorValues={}));var h;(function(f){f.QUEUE="queue",f.TOPIC="topic"})(h=s.MessagingDestinationKindValues||(s.MessagingDestinationKindValues={}));var g;(function(f){f.RECEIVE="receive",f.PROCESS="process"})(g=s.MessagingOperationValues||(s.MessagingOperationValues={}));var y;(function(f){f[f.OK=0]="OK",f[f.CANCELLED=1]="CANCELLED",f[f.UNKNOWN=2]="UNKNOWN",f[f.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",f[f.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",f[f.NOT_FOUND=5]="NOT_FOUND",f[f.ALREADY_EXISTS=6]="ALREADY_EXISTS",f[f.PERMISSION_DENIED=7]="PERMISSION_DENIED",f[f.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",f[f.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",f[f.ABORTED=10]="ABORTED",f[f.OUT_OF_RANGE=11]="OUT_OF_RANGE",f[f.UNIMPLEMENTED=12]="UNIMPLEMENTED",f[f.INTERNAL=13]="INTERNAL",f[f.UNAVAILABLE=14]="UNAVAILABLE",f[f.DATA_LOSS=15]="DATA_LOSS",f[f.UNAUTHENTICATED=16]="UNAUTHENTICATED"})(y=s.RpcGrpcStatusCodeValues||(s.RpcGrpcStatusCodeValues={}))}),Ur=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),c=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),c(Gt(),s)}),nt=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.TelemetrySdkLanguageValues=s.OsTypeValues=s.HostArchValues=s.AwsEcsLaunchtypeValues=s.CloudPlatformValues=s.CloudProviderValues=s.ResourceAttributes=void 0,s.ResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"};var k;(function(u){u.AWS="aws",u.AZURE="azure",u.GCP="gcp"})(k=s.CloudProviderValues||(s.CloudProviderValues={}));var c;(function(u){u.AWS_EC2="aws_ec2",u.AWS_ECS="aws_ecs",u.AWS_EKS="aws_eks",u.AWS_LAMBDA="aws_lambda",u.AWS_ELASTIC_BEANSTALK="aws_elastic_beanstalk",u.AZURE_VM="azure_vm",u.AZURE_CONTAINER_INSTANCES="azure_container_instances",u.AZURE_AKS="azure_aks",u.AZURE_FUNCTIONS="azure_functions",u.AZURE_APP_SERVICE="azure_app_service",u.GCP_COMPUTE_ENGINE="gcp_compute_engine",u.GCP_CLOUD_RUN="gcp_cloud_run",u.GCP_KUBERNETES_ENGINE="gcp_kubernetes_engine",u.GCP_CLOUD_FUNCTIONS="gcp_cloud_functions",u.GCP_APP_ENGINE="gcp_app_engine"})(c=s.CloudPlatformValues||(s.CloudPlatformValues={}));var v;(function(u){u.EC2="ec2",u.FARGATE="fargate"})(v=s.AwsEcsLaunchtypeValues||(s.AwsEcsLaunchtypeValues={}));var _;(function(u){u.AMD64="amd64",u.ARM32="arm32",u.ARM64="arm64",u.IA64="ia64",u.PPC32="ppc32",u.PPC64="ppc64",u.X86="x86"})(_=s.HostArchValues||(s.HostArchValues={}));var p;(function(u){u.WINDOWS="windows",u.LINUX="linux",u.DARWIN="darwin",u.FREEBSD="freebsd",u.NETBSD="netbsd",u.OPENBSD="openbsd",u.DRAGONFLYBSD="dragonflybsd",u.HPUX="hpux",u.AIX="aix",u.SOLARIS="solaris",u.Z_OS="z_os"})(p=s.OsTypeValues||(s.OsTypeValues={}));var l;(function(u){u.CPP="cpp",u.DOTNET="dotnet",u.ERLANG="erlang",u.GO="go",u.JAVA="java",u.NODEJS="nodejs",u.PHP="php",u.PYTHON="python",u.RUBY="ruby",u.WEBJS="webjs"})(l=s.TelemetrySdkLanguageValues||(s.TelemetrySdkLanguageValues={}))}),mo=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),c=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),c(nt(),s)}),qi=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),c=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),c(Ur(),s),c(mo(),s)}),Qu=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.SDK_INFO=void 0;var k=pa(),c=qi();s.SDK_INFO={[c.ResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[c.ResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[c.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:c.TelemetrySdkLanguageValues.NODEJS,[c.ResourceAttributes.TELEMETRY_SDK_VERSION]:k.VERSION}}),Wu=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.unrefTimer=void 0;function k(c){c.unref()}s.unrefTimer=k}),$r=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),c=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),c(ho(),s),c(Li(),s),c(po(),s),c(zu(),s),c(Qu(),s),c(Wu(),s)}),ma=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),c=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),c($r(),s)}),Ku=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.isTimeInput=s.isTimeInputHrTime=s.hrTimeToMicroseconds=s.hrTimeToMilliseconds=s.hrTimeToNanoseconds=s.hrTimeToTimeStamp=s.hrTimeDuration=s.timeInputToHrTime=s.hrTime=void 0;var k=ma(),c=9,v=Math.pow(10,c);function _(C){let D=C/1e3,x=Math.trunc(D),Q=Number((D-x).toFixed(c))*v;return[x,Q]}function p(){let C=k.otperformance.timeOrigin;if(typeof C!="number"){let D=k.otperformance;C=D.timing&&D.timing.fetchStart}return C}function l(C){let D=_(p()),x=_(typeof C=="number"?C:k.otperformance.now()),Q=D[0]+x[0],te=D[1]+x[1];return te>v&&(te-=v,Q+=1),[Q,te]}s.hrTime=l;function u(C){if(E(C))return C;if(typeof C=="number")return C<p()?l(C):_(C);if(C instanceof Date)return _(C.getTime());throw TypeError("Invalid input type")}s.timeInputToHrTime=u;function h(C,D){let x=D[0]-C[0],Q=D[1]-C[1];return Q<0&&(x-=1,Q+=v),[x,Q]}s.hrTimeDuration=h;function g(C){let D=c,x=`${"0".repeat(D)}${C[1]}Z`,Q=x.substr(x.length-D-1);return new Date(C[0]*1e3).toISOString().replace("000Z",Q)}s.hrTimeToTimeStamp=g;function y(C){return C[0]*v+C[1]}s.hrTimeToNanoseconds=y;function f(C){return Math.round(C[0]*1e3+C[1]/1e6)}s.hrTimeToMilliseconds=f;function w(C){return Math.round(C[0]*1e6+C[1]/1e3)}s.hrTimeToMicroseconds=w;function E(C){return Array.isArray(C)&&C.length===2&&typeof C[0]=="number"&&typeof C[1]=="number"}s.isTimeInputHrTime=E;function R(C){return E(C)||typeof C=="number"||C instanceof Date}s.isTimeInput=R}),Yu=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),fo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.ExportResultCode=void 0;var k;(function(c){c[c.SUCCESS=0]="SUCCESS",c[c.FAILED=1]="FAILED"})(k=s.ExportResultCode||(s.ExportResultCode={}))}),Xu=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.CompositePropagator=void 0;var k=Ft(),c=class{constructor(v={}){var _;this._propagators=(_=v.propagators)!==null&&_!==void 0?_:[],this._fields=Array.from(new Set(this._propagators.map(p=>typeof p.fields=="function"?p.fields():[]).reduce((p,l)=>p.concat(l),[])))}inject(v,_,p){for(let l of this._propagators)try{l.inject(v,_,p)}catch(u){k.diag.warn(`Failed to inject with ${l.constructor.name}. Err: ${u.message}`)}}extract(v,_,p){return this._propagators.reduce((l,u)=>{try{return u.extract(l,_,p)}catch(h){k.diag.warn(`Failed to inject with ${u.constructor.name}. Err: ${h.message}`)}return l},v)}fields(){return this._fields.slice()}};s.CompositePropagator=c}),Ju=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.validateValue=s.validateKey=void 0;var k="[_0-9a-z-*/]",c=`[a-z]${k}{0,255}`,v=`[a-z0-9]${k}{0,240}@[a-z]${k}{0,13}`,_=new RegExp(`^(?:${c}|${v})$`),p=/^[ -~]{0,255}[!-~]$/,l=/,|=/;function u(g){return _.test(g)}s.validateKey=u;function h(g){return p.test(g)&&!l.test(g)}s.validateValue=h}),Ui=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.TraceState=void 0;var k=Ju(),c=32,v=512,_=",",p="=",l=class{constructor(u){this._internalState=new Map,u&&this._parse(u)}set(u,h){let g=this._clone();return g._internalState.has(u)&&g._internalState.delete(u),g._internalState.set(u,h),g}unset(u){let h=this._clone();return h._internalState.delete(u),h}get(u){return this._internalState.get(u)}serialize(){return this._keys().reduce((u,h)=>(u.push(h+p+this.get(h)),u),[]).join(_)}_parse(u){u.length>v||(this._internalState=u.split(_).reverse().reduce((h,g)=>{let y=g.trim(),f=y.indexOf(p);if(f!==-1){let w=y.slice(0,f),E=y.slice(f+1,g.length);k.validateKey(w)&&k.validateValue(E)&&h.set(w,E)}return h},new Map),this._internalState.size>c&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,c))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let u=new l;return u._internalState=new Map(this._internalState),u}};s.TraceState=l}),fa=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.HttpTraceContextPropagator=s.parseTraceParent=s.TRACE_STATE_HEADER=s.TRACE_PARENT_HEADER=void 0;var k=Ft(),c=Gn(),v=Ui();s.TRACE_PARENT_HEADER="traceparent",s.TRACE_STATE_HEADER="tracestate";var _="00",p="(?!ff)[\\da-f]{2}",l="(?![0]{32})[\\da-f]{32}",u="(?![0]{16})[\\da-f]{16}",h="[\\da-f]{2}",g=new RegExp(`^\\s?(${p})-(${l})-(${u})-(${h})(-.*)?\\s?$`);function y(w){let E=g.exec(w);return!E||E[1]==="00"&&E[5]?null:{traceId:E[2],spanId:E[3],traceFlags:parseInt(E[4],16)}}s.parseTraceParent=y;var f=class{inject(w,E,R){let C=k.trace.getSpanContext(w);if(!C||c.isTracingSuppressed(w)||!k.isSpanContextValid(C))return;let D=`${_}-${C.traceId}-${C.spanId}-0${Number(C.traceFlags||k.TraceFlags.NONE).toString(16)}`;R.set(E,s.TRACE_PARENT_HEADER,D),C.traceState&&R.set(E,s.TRACE_STATE_HEADER,C.traceState.serialize())}extract(w,E,R){let C=R.get(E,s.TRACE_PARENT_HEADER);if(!C)return w;let D=Array.isArray(C)?C[0]:C;if(typeof D!="string")return w;let x=y(D);if(!x)return w;x.isRemote=!0;let Q=R.get(E,s.TRACE_STATE_HEADER);if(Q){let te=Array.isArray(Q)?Q.join(","):Q;x.traceState=new v.TraceState(typeof te=="string"?te:void 0)}return k.trace.setSpanContext(w,x)}fields(){return[s.TRACE_PARENT_HEADER,s.TRACE_STATE_HEADER]}};s.HttpTraceContextPropagator=f}),Zu=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),ga=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.getRPCMetadata=s.deleteRPCMetadata=s.setRPCMetadata=s.RPCType=void 0;var k=Ft(),c=k.createContextKey("OpenTelemetry SDK Context Key RPC_METADATA"),v;(function(u){u.HTTP="http"})(v=s.RPCType||(s.RPCType={}));function _(u,h){return u.setValue(c,h)}s.setRPCMetadata=_;function p(u){return u.deleteValue(c)}s.deleteRPCMetadata=p;function l(u){return u.getValue(c)}s.getRPCMetadata=l}),Ns=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.AlwaysOffSampler=void 0;var k=Ft(),c=class{shouldSample(){return{decision:k.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}};s.AlwaysOffSampler=c}),go=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.AlwaysOnSampler=void 0;var k=Ft(),c=class{shouldSample(){return{decision:k.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}};s.AlwaysOnSampler=c}),el=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.ParentBasedSampler=void 0;var k=Ft(),c=Ps(),v=Ns(),_=go(),p=class{constructor(l){var u,h,g,y;this._root=l.root,this._root||(c.globalErrorHandler(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new _.AlwaysOnSampler),this._remoteParentSampled=(u=l.remoteParentSampled)!==null&&u!==void 0?u:new _.AlwaysOnSampler,this._remoteParentNotSampled=(h=l.remoteParentNotSampled)!==null&&h!==void 0?h:new v.AlwaysOffSampler,this._localParentSampled=(g=l.localParentSampled)!==null&&g!==void 0?g:new _.AlwaysOnSampler,this._localParentNotSampled=(y=l.localParentNotSampled)!==null&&y!==void 0?y:new v.AlwaysOffSampler}shouldSample(l,u,h,g,y,f){let w=k.trace.getSpanContext(l);return!w||!k.isSpanContextValid(w)?this._root.shouldSample(l,u,h,g,y,f):w.isRemote?w.traceFlags&k.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(l,u,h,g,y,f):this._remoteParentNotSampled.shouldSample(l,u,h,g,y,f):w.traceFlags&k.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(l,u,h,g,y,f):this._localParentNotSampled.shouldSample(l,u,h,g,y,f)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}};s.ParentBasedSampler=p}),tl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.TraceIdRatioBasedSampler=void 0;var k=Ft(),c=class{constructor(v=0){this._ratio=v,this._ratio=this._normalize(v),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(v,_){return{decision:k.isValidTraceId(_)&&this._accumulate(_)<this._upperBound?k.SamplingDecision.RECORD_AND_SAMPLED:k.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(v){return typeof v!="number"||isNaN(v)?0:v>=1?1:v<=0?0:v}_accumulate(v){let _=0;for(let p=0;p<v.length/8;p++){let l=p*8,u=parseInt(v.slice(l,l+8),16);_=(_^u)>>>0}return _}};s.TraceIdRatioBasedSampler=c}),rl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.isUrlIgnored=s.urlMatches=void 0;function k(v,_){return typeof _=="string"?v===_:_.test(v)}s.urlMatches=k;function c(v,_){if(!_)return!1;for(let p of _)if(k(v,p))return!0;return!1}s.isUrlIgnored=c}),vo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.isWrapped=void 0;function k(c){return typeof c=="function"&&typeof c.__original=="function"&&typeof c.__unwrap=="function"&&c.__wrapped===!0}s.isWrapped=k}),Jr=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),c=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),s.baggageUtils=void 0,c(Bu(),s),c(ju(),s),c(Ps(),s),c(Vn(),s),c(Ku(),s),c(Yu(),s),c(fo(),s),c(pa(),s),s.baggageUtils=Hn(),c(ma(),s),c(Xu(),s),c(fa(),s),c(Zu(),s),c(ga(),s),c(Ns(),s),c(go(),s),c(el(),s),c(tl(),s),c(Gn(),s),c(Ui(),s),c(ha(),s),c(da(),s),c(rl(),s),c(vo(),s),c(pa(),s)}),nl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.ExceptionEventName=void 0,s.ExceptionEventName="exception"}),va=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.Span=void 0;var k=Ft(),c=Jr(),v=qi(),_=nl(),p=class{constructor(l,u,h,g,y,f,w=[],E=c.hrTime()){this.attributes={},this.links=[],this.events=[],this.status={code:k.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=h,this._spanContext=g,this.parentSpanId=f,this.kind=y,this.links=w,this.startTime=c.timeInputToHrTime(E),this.resource=l.resource,this.instrumentationLibrary=l.instrumentationLibrary,this._spanLimits=l.getSpanLimits(),this._spanProcessor=l.getActiveSpanProcessor(),this._spanProcessor.onStart(this,u)}spanContext(){return this._spanContext}setAttribute(l,u){return u==null||this._isSpanEnded()?this:l.length===0?(k.diag.warn(`Invalid attribute key: ${l}`),this):c.isAttributeValue(u)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,l)?this:(this.attributes[l]=u,this):(k.diag.warn(`Invalid attribute value set for key: ${l}`),this)}setAttributes(l){for(let[u,h]of Object.entries(l))this.setAttribute(u,h);return this}addEvent(l,u,h){return this._isSpanEnded()?this:(this.events.length>=this._spanLimits.eventCountLimit&&(k.diag.warn("Dropping extra events."),this.events.shift()),c.isTimeInput(u)&&(typeof h=="undefined"&&(h=u),u=void 0),typeof h=="undefined"&&(h=c.hrTime()),this.events.push({name:l,attributes:u,time:c.timeInputToHrTime(h)}),this)}setStatus(l){return this._isSpanEnded()?this:(this.status=l,this)}updateName(l){return this._isSpanEnded()?this:(this.name=l,this)}end(l=c.hrTime()){if(this._isSpanEnded()){k.diag.error("You can only call end() on a span once.");return}this._ended=!0,this.endTime=c.timeInputToHrTime(l),this._duration=c.hrTimeDuration(this.startTime,this.endTime),this._duration[0]<0&&k.diag.warn("Inconsistent start and end time, startTime > endTime",this.startTime,this.endTime),this._spanProcessor.onEnd(this)}isRecording(){return this._ended===!1}recordException(l,u=c.hrTime()){let h={};typeof l=="string"?h[v.SemanticAttributes.EXCEPTION_MESSAGE]=l:l&&(l.code?h[v.SemanticAttributes.EXCEPTION_TYPE]=l.code.toString():l.name&&(h[v.SemanticAttributes.EXCEPTION_TYPE]=l.name),l.message&&(h[v.SemanticAttributes.EXCEPTION_MESSAGE]=l.message),l.stack&&(h[v.SemanticAttributes.EXCEPTION_STACKTRACE]=l.stack)),h[v.SemanticAttributes.EXCEPTION_TYPE]||h[v.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(_.ExceptionEventName,h,u):k.diag.warn(`Failed to record an exception ${l}`)}get duration(){return this._duration}get ended(){return this._ended}_isSpanEnded(){return this._ended&&k.diag.warn("Can not execute the operation on ended Span {traceId: %s, spanId: %s}",this._spanContext.traceId,this._spanContext.spanId),this._ended}};s.Span=p}),il=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.buildSamplerFromEnv=s.DEFAULT_CONFIG=void 0;var k=Ft(),c=Jr(),v=c.getEnv(),_=c.TracesSamplerValues.AlwaysOn;s.DEFAULT_CONFIG={sampler:p(v),forceFlushTimeoutMillis:3e4,spanLimits:{attributeCountLimit:c.getEnv().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:c.getEnv().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:c.getEnv().OTEL_SPAN_EVENT_COUNT_LIMIT}};function p(h=c.getEnv()){switch(h.OTEL_TRACES_SAMPLER){case c.TracesSamplerValues.AlwaysOn:return new c.AlwaysOnSampler;case c.TracesSamplerValues.AlwaysOff:return new c.AlwaysOffSampler;case c.TracesSamplerValues.ParentBasedAlwaysOn:return new c.ParentBasedSampler({root:new c.AlwaysOnSampler});case c.TracesSamplerValues.ParentBasedAlwaysOff:return new c.ParentBasedSampler({root:new c.AlwaysOffSampler});case c.TracesSamplerValues.TraceIdRatio:return new c.TraceIdRatioBasedSampler(u(h));case c.TracesSamplerValues.ParentBasedTraceIdRatio:return new c.ParentBasedSampler({root:new c.TraceIdRatioBasedSampler(u(h))});default:return k.diag.error(`OTEL_TRACES_SAMPLER value "${h.OTEL_TRACES_SAMPLER} invalid, defaulting to ${_}".`),new c.AlwaysOnSampler}}s.buildSamplerFromEnv=p;var l=1;function u(h){if(h.OTEL_TRACES_SAMPLER_ARG===void 0||h.OTEL_TRACES_SAMPLER_ARG==="")return k.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${l}.`),l;let g=Number(h.OTEL_TRACES_SAMPLER_ARG);return isNaN(g)?(k.diag.error(`OTEL_TRACES_SAMPLER_ARG=${h.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${l}.`),l):g<0||g>1?(k.diag.error(`OTEL_TRACES_SAMPLER_ARG=${h.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${l}.`),l):g}}),As=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.mergeConfig=void 0;var k=il();function c(v){let _={sampler:k.buildSamplerFromEnv()},p=Object.assign({},k.DEFAULT_CONFIG,_,v);return p.spanLimits=Object.assign({},k.DEFAULT_CONFIG.spanLimits,v.spanLimits||{}),p}s.mergeConfig=c}),ya=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.Tracer=void 0;var k=Ft(),c=Jr(),v=va(),_=As(),p=class{constructor(u,h,g){this._tracerProvider=g;let y=_.mergeConfig(h);this._sampler=y.sampler,this._spanLimits=y.spanLimits,this._idGenerator=h.idGenerator||new c.RandomIdGenerator,this.resource=g.resource,this.instrumentationLibrary=u}startSpan(u,h={},g=k.context.active()){var y,f;if(c.isTracingSuppressed(g))return k.diag.debug("Instrumentation suppressed, returning Noop Span"),k.trace.wrapSpanContext(k.INVALID_SPAN_CONTEXT);let w=l(h,g),E=this._idGenerator.generateSpanId(),R,C,D;!w||!k.trace.isSpanContextValid(w)?R=this._idGenerator.generateTraceId():(R=w.traceId,C=w.traceState,D=w.spanId);let x=(y=h.kind)!==null&&y!==void 0?y:k.SpanKind.INTERNAL,Q=(f=h.links)!==null&&f!==void 0?f:[],te=c.sanitizeAttributes(h.attributes),K=this._sampler.shouldSample(h.root?k.trace.setSpanContext(g,k.INVALID_SPAN_CONTEXT):g,R,u,x,te,Q),ue=K.decision===k.SamplingDecision.RECORD_AND_SAMPLED?k.TraceFlags.SAMPLED:k.TraceFlags.NONE,_e={traceId:R,spanId:E,traceFlags:ue,traceState:C};if(K.decision===k.SamplingDecision.NOT_RECORD)return k.diag.debug("Recording is off, propagating context in a non-recording span"),k.trace.wrapSpanContext(_e);let Te=new v.Span(this,g,u,_e,x,D,Q,h.startTime);return Te.setAttributes(Object.assign(te,K.attributes)),Te}startActiveSpan(u,h,g,y){let f,w,E;if(arguments.length<2)return;arguments.length===2?E=h:arguments.length===3?(f=h,E=g):(f=h,w=g,E=y);let R=w!=null?w:k.context.active(),C=this.startSpan(u,f,R),D=k.trace.setSpan(R,C);return k.context.with(D,E,void 0,C)}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}};s.Tracer=p;function l(u,h){if(!u.root)return k.trace.getSpanContext(h)}}),ba=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.defaultServiceName=void 0;function k(){return`unknown_service:${process.argv0}`}s.defaultServiceName=k}),yo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.detectResources=void 0;var k=_o(),c=Ft(),v=q(1669),_=async(l={})=>{let u=Object.assign(l),h=await Promise.all((u.detectors||[]).map(async g=>{try{let y=await g.detect(u);return c.diag.debug(`${g.constructor.name} found resource.`,y),y}catch(y){return c.diag.debug(`${g.constructor.name} failed: ${y.message}`),k.Resource.empty()}}));return p(h),h.reduce((g,y)=>g.merge(y),k.Resource.empty())};s.detectResources=_;var p=l=>{l.forEach(u=>{if(Object.keys(u.attributes).length>0){let h=v.inspect(u.attributes,{depth:2,breakLength:1/0,sorted:!0,compact:!1});c.diag.verbose(h)}})}}),wa=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.envDetector=void 0;var k=Ft(),c=Jr(),v=qi(),_=pi(),p=class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}async detect(l){let u={},h=c.getEnv(),g=h.OTEL_RESOURCE_ATTRIBUTES,y=h.OTEL_SERVICE_NAME;if(g)try{let f=this._parseResourceAttributes(g);Object.assign(u,f)}catch(f){k.diag.debug(`EnvDetector failed: ${f.message}`)}return y&&(u[v.ResourceAttributes.SERVICE_NAME]=y),new _.Resource(u)}_parseResourceAttributes(l){if(!l)return{};let u={},h=l.split(this._COMMA_SEPARATOR,-1);for(let g of h){let y=g.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(y.length!==2)continue;let[f,w]=y;if(f=f.trim(),w=w.trim().split('^"|"$').join(""),!this._isValidAndNotEmpty(f))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(w))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);u[f]=w}return u}_isValid(l){return l.length<=this._MAX_LENGTH&&this._isPrintableString(l)}_isPrintableString(l){for(let u=0;u<l.length;u++){let h=l.charAt(u);if(h<=" "||h>="~")return!1}return!0}_isValidAndNotEmpty(l){return l.length>0&&this._isValid(l)}};s.envDetector=new p}),sl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.processDetector=void 0;var k=Ft(),c=qi(),v=pi(),_=class{async detect(p){let l={[c.ResourceAttributes.PROCESS_PID]:process.pid,[c.ResourceAttributes.PROCESS_EXECUTABLE_NAME]:process.title||"",[c.ResourceAttributes.PROCESS_COMMAND]:process.argv[1]||"",[c.ResourceAttributes.PROCESS_COMMAND_LINE]:process.argv.join(" ")||""};return this._getResourceAttributes(l,p)}_getResourceAttributes(p,l){return p[c.ResourceAttributes.PROCESS_EXECUTABLE_NAME]===""||p[c.ResourceAttributes.PROCESS_EXECUTABLE_PATH]===""||p[c.ResourceAttributes.PROCESS_COMMAND]===""||p[c.ResourceAttributes.PROCESS_COMMAND_LINE]===""?(k.diag.debug("ProcessDetector failed: Unable to find required process resources. "),v.Resource.empty()):new v.Resource(Object.assign({},p))}};s.processDetector=new _}),bo=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),c=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),c(wa(),s),c(sl(),s)}),wo=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),c=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),c(ba(),s),c(yo(),s),c(bo(),s)}),Is=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),c=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),c(wo(),s)}),_o=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.Resource=void 0;var k=qi(),c=Jr(),v=Is(),_=class{constructor(p){this.attributes=p}static empty(){return _.EMPTY}static default(){return new _({[k.ResourceAttributes.SERVICE_NAME]:v.defaultServiceName(),[k.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:c.SDK_INFO[k.ResourceAttributes.TELEMETRY_SDK_LANGUAGE],[k.ResourceAttributes.TELEMETRY_SDK_NAME]:c.SDK_INFO[k.ResourceAttributes.TELEMETRY_SDK_NAME],[k.ResourceAttributes.TELEMETRY_SDK_VERSION]:c.SDK_INFO[k.ResourceAttributes.TELEMETRY_SDK_VERSION]})}merge(p){if(!p||!Object.keys(p.attributes).length)return this;let l=Object.assign({},this.attributes,p.attributes);return new _(l)}};s.Resource=_,_.EMPTY=new _({})}),al=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),ol=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),pi=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),c=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),c(_o(),s),c(Is(),s),c(al(),s),c(ol(),s)}),_a=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.MultiSpanProcessor=void 0;var k=Jr(),c=class{constructor(v){this._spanProcessors=v}forceFlush(){let v=[];for(let _ of this._spanProcessors)v.push(_.forceFlush());return new Promise(_=>{Promise.all(v).then(()=>{_()}).catch(p=>{k.globalErrorHandler(p||new Error("MultiSpanProcessor: forceFlush failed")),_()})})}onStart(v,_){for(let p of this._spanProcessors)p.onStart(v,_)}onEnd(v){for(let _ of this._spanProcessors)_.onEnd(v)}shutdown(){let v=[];for(let _ of this._spanProcessors)v.push(_.shutdown());return new Promise((_,p)=>{Promise.all(v).then(()=>{_()},p)})}};s.MultiSpanProcessor=c}),Bn=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.NoopSpanProcessor=void 0;var k=class{onStart(c,v){}onEnd(c){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}};s.NoopSpanProcessor=k}),ul=O((s,k)=>{var c=200,v="__lodash_hash_undefined__",_=800,p=16,l=9007199254740991,u="[object Arguments]",h="[object Array]",g="[object AsyncFunction]",y="[object Boolean]",f="[object Date]",w="[object Error]",E="[object Function]",R="[object GeneratorFunction]",C="[object Map]",D="[object Number]",x="[object Null]",Q="[object Object]",te="[object Proxy]",K="[object RegExp]",ue="[object Set]",_e="[object String]",Te="[object Undefined]",Re="[object WeakMap]",xe="[object ArrayBuffer]",qe="[object DataView]",He="[object Float32Array]",ze="[object Float64Array]",ut="[object Int8Array]",at="[object Int16Array]",Ct="[object Int32Array]",tt="[object Uint8Array]",Fe="[object Uint8ClampedArray]",Be="[object Uint16Array]",Ve="[object Uint32Array]",Xe=/[\\^$.*+?()[\]{}|]/g,rt=/^\[object .+?Constructor\]$/,lt=/^(?:0|[1-9]\d*)$/,Je={};Je[He]=Je[ze]=Je[ut]=Je[at]=Je[Ct]=Je[tt]=Je[Fe]=Je[Be]=Je[Ve]=!0,Je[u]=Je[h]=Je[xe]=Je[y]=Je[qe]=Je[f]=Je[w]=Je[E]=Je[C]=Je[D]=Je[Q]=Je[K]=Je[ue]=Je[_e]=Je[Re]=!1;var kt=typeof global=="object"&&global&&global.Object===Object&&global,qt=typeof self=="object"&&self&&self.Object===Object&&self,Nt=kt||qt||Function("return this")(),Tt=typeof s=="object"&&s&&!s.nodeType&&s,gt=Tt&&typeof k=="object"&&k&&!k.nodeType&&k,Zt=gt&&gt.exports===Tt,ar=Zt&&kt.process,et=function(){try{var ae=gt&&gt.require&&gt.require("util").types;return ae||ar&&ar.binding&&ar.binding("util")}catch(ve){}}(),Ze=et&&et.isTypedArray;function ot(ae,ve,Ce){switch(Ce.length){case 0:return ae.call(ve);case 1:return ae.call(ve,Ce[0]);case 2:return ae.call(ve,Ce[0],Ce[1]);case 3:return ae.call(ve,Ce[0],Ce[1],Ce[2])}return ae.apply(ve,Ce)}function Et(ae,ve){for(var Ce=-1,Ke=Array(ae);++Ce<ae;)Ke[Ce]=ve(Ce);return Ke}function An(ae){return function(ve){return ae(ve)}}function tn(ae,ve){return ae==null?void 0:ae[ve]}function Ie(ae,ve){return function(Ce){return ae(ve(Ce))}}var hn=Array.prototype,pn=Function.prototype,wr=Object.prototype,Ht=Nt["__core-js_shared__"],mn=pn.toString,_r=wr.hasOwnProperty,Kn=function(){var ae=/[^.]+$/.exec(Ht&&Ht.keys&&Ht.keys.IE_PROTO||"");return ae?"Symbol(src)_1."+ae:""}(),fn=wr.toString,Rt=mn.call(Object),gn=RegExp("^"+mn.call(_r).replace(Xe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),vn=Zt?Nt.Buffer:void 0,Yn=Nt.Symbol,Xn=Nt.Uint8Array,er=vn?vn.allocUnsafe:void 0,or=Ie(Object.getPrototypeOf,Object),Hr=Object.create,Er=wr.propertyIsEnumerable,pr=hn.splice,mr=Yn?Yn.toStringTag:void 0,tr=function(){try{var ae=Qi(Object,"defineProperty");return ae({},"",{}),ae}catch(ve){}}(),dt=vn?vn.isBuffer:void 0,nr=Math.max,Qe=Date.now,yn=Qi(Nt,"Map"),Or=Qi(Object,"create"),st=function(){function ae(){}return function(ve){if(!Mr(ve))return{};if(Hr)return Hr(ve);ae.prototype=ve;var Ce=new ae;return ae.prototype=void 0,Ce}}();function Wr(ae){var ve=-1,Ce=ae==null?0:ae.length;for(this.clear();++ve<Ce;){var Ke=ae[ve];this.set(Ke[0],Ke[1])}}function Jn(){this.__data__=Or?Or(null):{},this.size=0}function bi(ae){var ve=this.has(ae)&&delete this.__data__[ae];return this.size-=ve?1:0,ve}function Zn(ae){var ve=this.__data__;if(Or){var Ce=ve[ae];return Ce===v?void 0:Ce}return _r.call(ve,ae)?ve[ae]:void 0}function bn(ae){var ve=this.__data__;return Or?ve[ae]!==void 0:_r.call(ve,ae)}function In(ae,ve){var Ce=this.__data__;return this.size+=this.has(ae)?0:1,Ce[ae]=Or&&ve===void 0?v:ve,this}Wr.prototype.clear=Jn,Wr.prototype.delete=bi,Wr.prototype.get=Zn,Wr.prototype.has=bn,Wr.prototype.set=In;function Sr(ae){var ve=-1,Ce=ae==null?0:ae.length;for(this.clear();++ve<Ce;){var Ke=ae[ve];this.set(Ke[0],Ke[1])}}function wi(){this.__data__=[],this.size=0}function _i(ae){var ve=this.__data__,Ce=Me(ve,ae);if(Ce<0)return!1;var Ke=ve.length-1;return Ce==Ke?ve.pop():pr.call(ve,Ce,1),--this.size,!0}function kr(ae){var ve=this.__data__,Ce=Me(ve,ae);return Ce<0?void 0:ve[Ce][1]}function ei(ae){return Me(this.__data__,ae)>-1}function ti(ae,ve){var Ce=this.__data__,Ke=Me(Ce,ae);return Ke<0?(++this.size,Ce.push([ae,ve])):Ce[Ke][1]=ve,this}Sr.prototype.clear=wi,Sr.prototype.delete=_i,Sr.prototype.get=kr,Sr.prototype.has=ei,Sr.prototype.set=ti;function rn(ae){var ve=-1,Ce=ae==null?0:ae.length;for(this.clear();++ve<Ce;){var Ke=ae[ve];this.set(Ke[0],Ke[1])}}function Ei(){this.size=0,this.__data__={hash:new Wr,map:new(yn||Sr),string:new Wr}}function Si(ae){var ve=Ma(this,ae).delete(ae);return this.size-=ve?1:0,ve}function ki(ae){return Ma(this,ae).get(ae)}function xr(ae){return Ma(this,ae).has(ae)}function Ti(ae,ve){var Ce=Ma(this,ae),Ke=Ce.size;return Ce.set(ae,ve),this.size+=Ce.size==Ke?0:1,this}rn.prototype.clear=Ei,rn.prototype.delete=Si,rn.prototype.get=ki,rn.prototype.has=xr,rn.prototype.set=Ti;function Kr(ae){var ve=this.__data__=new Sr(ae);this.size=ve.size}function Dn(){this.__data__=new Sr,this.size=0}function b(ae){var ve=this.__data__,Ce=ve.delete(ae);return this.size=ve.size,Ce}function N(ae){return this.__data__.get(ae)}function F(ae){return this.__data__.has(ae)}function oe(ae,ve){var Ce=this.__data__;if(Ce instanceof Sr){var Ke=Ce.__data__;if(!yn||Ke.length<c-1)return Ke.push([ae,ve]),this.size=++Ce.size,this;Ce=this.__data__=new rn(Ke)}return Ce.set(ae,ve),this.size=Ce.size,this}Kr.prototype.clear=Dn,Kr.prototype.delete=b,Kr.prototype.get=N,Kr.prototype.has=F,Kr.prototype.set=oe;function le(ae,ve){var Ce=Vt(ae),Ke=!Ce&&La(ae),St=!Ce&&!Ke&&Ci(ae),Mt=!Ce&&!Ke&&!St&&iu(ae),Bt=Ce||Ke||St||Mt,wt=Bt?Et(ae.length,String):[],jt=wt.length;for(var an in ae)(ve||_r.call(ae,an))&&!(Bt&&(an=="length"||St&&(an=="offset"||an=="parent")||Mt&&(an=="buffer"||an=="byteLength"||an=="byteOffset")||rc(an,jt)))&&wt.push(an);return wt}function ge(ae,ve,Ce){(Ce!==void 0&&!Ri(ae[ve],Ce)||Ce===void 0&&!(ve in ae))&&Oe(ae,ve,Ce)}function ye(ae,ve,Ce){var Ke=ae[ve];(!(_r.call(ae,ve)&&Ri(Ke,Ce))||Ce===void 0&&!(ve in ae))&&Oe(ae,ve,Ce)}function Me(ae,ve){for(var Ce=ae.length;Ce--;)if(Ri(ae[Ce][0],ve))return Ce;return-1}function Oe(ae,ve,Ce){ve=="__proto__"&&tr?tr(ae,ve,{configurable:!0,enumerable:!0,value:Ce,writable:!0}):ae[ve]=Ce}var pt=tc();function vt(ae){return ae==null?ae===void 0?Te:x:mr&&mr in Object(ae)?Rd(ae):fs(ae)}function mt(ae){return sn(ae)&&vt(ae)==u}function ht(ae){if(!Mr(ae)||ic(ae))return!1;var ve=qa(ae)?gn:rt;return ve.test(nn(ae))}function At(ae){return sn(ae)&&nu(ae.length)&&!!Je[vt(ae)]}function Da(ae){if(!Mr(ae))return eu(ae);var ve=Zo(ae),Ce=[];for(var Ke in ae)Ke=="constructor"&&(ve||!_r.call(ae,Ke))||Ce.push(Ke);return Ce}function Oa(ae,ve,Ce,Ke,St){ae!==ve&&pt(ve,function(Mt,Bt){if(St||(St=new Kr),Mr(Mt))Yo(ae,ve,Bt,Ce,Oa,Ke,St);else{var wt=Ke?Ke(Fa(ae,Bt),Mt,Bt+"",ae,ve,St):void 0;wt===void 0&&(wt=Mt),ge(ae,Bt,wt)}},Bs)}function Yo(ae,ve,Ce,Ke,St,Mt,Bt){var wt=Fa(ae,Ce),jt=Fa(ve,Ce),an=Bt.get(jt);if(an){ge(ae,Ce,an);return}var Vr=Mt?Mt(wt,jt,Ce+"",ae,ve,Bt):void 0,vs=Vr===void 0;if(vs){var Wi=Vt(jt),Ua=!Wi&&Ci(jt),ou=!Wi&&!Ua&&iu(jt);Vr=jt,Wi||Ua||ou?Vt(wt)?Vr=wt:gs(wt)?Vr=Zl(wt):Ua?(vs=!1,Vr=kd(jt,!0)):ou?(vs=!1,Vr=Jl(jt,!0)):Vr=[]:ac(jt)||La(jt)?(Vr=wt,La(wt)?Vr=oc(wt):(!Mr(wt)||qa(wt))&&(Vr=Cd(jt))):vs=!1}vs&&(Bt.set(jt,Vr),St(Vr,jt,Ke,Mt,Bt),Bt.delete(jt)),ge(ae,Ce,Vr)}function xa(ae,ve){return ru(tu(ae,ve,au),ae+"")}var Xo=tr?function(ae,ve){return tr(ae,"toString",{configurable:!0,enumerable:!1,value:uc(ve),writable:!0})}:au;function kd(ae,ve){if(ve)return ae.slice();var Ce=ae.length,Ke=er?er(Ce):new ae.constructor(Ce);return ae.copy(Ke),Ke}function Td(ae){var ve=new ae.constructor(ae.byteLength);return new Xn(ve).set(new Xn(ae)),ve}function Jl(ae,ve){var Ce=ve?Td(ae.buffer):ae.buffer;return new ae.constructor(Ce,ae.byteOffset,ae.length)}function Zl(ae,ve){var Ce=-1,Ke=ae.length;for(ve||(ve=Array(Ke));++Ce<Ke;)ve[Ce]=ae[Ce];return ve}function ec(ae,ve,Ce,Ke){var St=!Ce;Ce||(Ce={});for(var Mt=-1,Bt=ve.length;++Mt<Bt;){var wt=ve[Mt],jt=Ke?Ke(Ce[wt],ae[wt],wt,Ce,ae):void 0;jt===void 0&&(jt=ae[wt]),St?Oe(Ce,wt,jt):ye(Ce,wt,jt)}return Ce}function Cr(ae){return xa(function(ve,Ce){var Ke=-1,St=Ce.length,Mt=St>1?Ce[St-1]:void 0,Bt=St>2?Ce[2]:void 0;for(Mt=ae.length>3&&typeof Mt=="function"?(St--,Mt):void 0,Bt&&Jo(Ce[0],Ce[1],Bt)&&(Mt=St<3?void 0:Mt,St=1),ve=Object(ve);++Ke<St;){var wt=Ce[Ke];wt&&ae(ve,wt,Ke,Mt)}return ve})}function tc(ae){return function(ve,Ce,Ke){for(var St=-1,Mt=Object(ve),Bt=Ke(ve),wt=Bt.length;wt--;){var jt=Bt[ae?wt:++St];if(Ce(Mt[jt],jt,Mt)===!1)break}return ve}}function Ma(ae,ve){var Ce=ae.__data__;return nc(ve)?Ce[typeof ve=="string"?"string":"hash"]:Ce.map}function Qi(ae,ve){var Ce=tn(ae,ve);return ht(Ce)?Ce:void 0}function Rd(ae){var ve=_r.call(ae,mr),Ce=ae[mr];try{ae[mr]=void 0;var Ke=!0}catch(Mt){}var St=fn.call(ae);return Ke&&(ve?ae[mr]=Ce:delete ae[mr]),St}function Cd(ae){return typeof ae.constructor=="function"&&!Zo(ae)?st(or(ae)):{}}function rc(ae,ve){var Ce=typeof ae;return ve=ve==null?l:ve,!!ve&&(Ce=="number"||Ce!="symbol"&&lt.test(ae))&&ae>-1&&ae%1==0&&ae<ve}function Jo(ae,ve,Ce){if(!Mr(Ce))return!1;var Ke=typeof ve;return(Ke=="number"?Vs(Ce)&&rc(ve,Ce.length):Ke=="string"&&ve in Ce)?Ri(Ce[ve],ae):!1}function nc(ae){var ve=typeof ae;return ve=="string"||ve=="number"||ve=="symbol"||ve=="boolean"?ae!=="__proto__":ae===null}function ic(ae){return!!Kn&&Kn in ae}function Zo(ae){var ve=ae&&ae.constructor,Ce=typeof ve=="function"&&ve.prototype||wr;return ae===Ce}function eu(ae){var ve=[];if(ae!=null)for(var Ce in Object(ae))ve.push(Ce);return ve}function fs(ae){return fn.call(ae)}function tu(ae,ve,Ce){return ve=nr(ve===void 0?ae.length-1:ve,0),function(){for(var Ke=arguments,St=-1,Mt=nr(Ke.length-ve,0),Bt=Array(Mt);++St<Mt;)Bt[St]=Ke[ve+St];St=-1;for(var wt=Array(ve+1);++St<ve;)wt[St]=Ke[St];return wt[ve]=Ce(Bt),ot(ae,this,wt)}}function Fa(ae,ve){if(!(ve==="constructor"&&typeof ae[ve]=="function")&&ve!="__proto__")return ae[ve]}var ru=sc(Xo);function sc(ae){var ve=0,Ce=0;return function(){var Ke=Qe(),St=p-(Ke-Ce);if(Ce=Ke,St>0){if(++ve>=_)return arguments[0]}else ve=0;return ae.apply(void 0,arguments)}}function nn(ae){if(ae!=null){try{return mn.call(ae)}catch(ve){}try{return ae+""}catch(ve){}}return""}function Ri(ae,ve){return ae===ve||ae!==ae&&ve!==ve}var La=mt(function(){return arguments}())?mt:function(ae){return sn(ae)&&_r.call(ae,"callee")&&!Er.call(ae,"callee")},Vt=Array.isArray;function Vs(ae){return ae!=null&&nu(ae.length)&&!qa(ae)}function gs(ae){return sn(ae)&&Vs(ae)}var Ci=dt||lc;function qa(ae){if(!Mr(ae))return!1;var ve=vt(ae);return ve==E||ve==R||ve==g||ve==te}function nu(ae){return typeof ae=="number"&&ae>-1&&ae%1==0&&ae<=l}function Mr(ae){var ve=typeof ae;return ae!=null&&(ve=="object"||ve=="function")}function sn(ae){return ae!=null&&typeof ae=="object"}function ac(ae){if(!sn(ae)||vt(ae)!=Q)return!1;var ve=or(ae);if(ve===null)return!0;var Ce=_r.call(ve,"constructor")&&ve.constructor;return typeof Ce=="function"&&Ce instanceof Ce&&mn.call(Ce)==Rt}var iu=Ze?An(Ze):At;function oc(ae){return ec(ae,Bs(ae))}function Bs(ae){return Vs(ae)?le(ae,!0):Da(ae)}var su=Cr(function(ae,ve,Ce){Oa(ae,ve,Ce)});function uc(ae){return function(){return ae}}function au(ae){return ae}function lc(){return!1}k.exports=su}),ll=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.BatchSpanProcessorBase=void 0;var k=Ft(),c=Jr(),v=class{constructor(_,p){this._exporter=_,this._finishedSpans=[],this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve();let l=c.getEnv();this._maxExportBatchSize=typeof(p==null?void 0:p.maxExportBatchSize)=="number"?p.maxExportBatchSize:l.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof(p==null?void 0:p.maxQueueSize)=="number"?p.maxQueueSize:l.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof(p==null?void 0:p.scheduledDelayMillis)=="number"?p.scheduledDelayMillis:l.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof(p==null?void 0:p.exportTimeoutMillis)=="number"?p.exportTimeoutMillis:l.OTEL_BSP_EXPORT_TIMEOUT}forceFlush(){return this._isShutdown?this._shuttingDownPromise:this._flushAll()}onStart(_){}onEnd(_){this._isShutdown||this._addToBuffer(_)}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((_,p)=>{Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown()).then(_).catch(l=>{p(l)})}),this._shuttingDownPromise)}_addToBuffer(_){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(_),this._maybeStartTimer())}_flushAll(){return new Promise((_,p)=>{let l=[],u=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let h=0,g=u;h<g;h++)l.push(this._flushOneBatch());Promise.all(l).then(()=>{_()}).catch(p)})}_flushOneBatch(){return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise((_,p)=>{let l=setTimeout(()=>{p(new Error("Timeout"))},this._exportTimeoutMillis);k.context.with(c.suppressTracing(k.context.active()),()=>{this._exporter.export(this._finishedSpans.splice(0,this._maxExportBatchSize),u=>{var h;clearTimeout(l),u.code===c.ExportResultCode.SUCCESS?_():p((h=u.error)!==null&&h!==void 0?h:new Error("BatchSpanProcessor: span export failed"))})})})}_maybeStartTimer(){this._timer===void 0&&(this._timer=setTimeout(()=>{this._flushOneBatch().then(()=>{this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(_=>{c.globalErrorHandler(_)})},this._scheduledDelayMillis),c.unrefTimer(this._timer))}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)}};s.BatchSpanProcessorBase=v}),Eo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.BatchSpanProcessor=void 0;var k=ll(),c=class extends k.BatchSpanProcessorBase{onShutdown(){}};s.BatchSpanProcessor=c}),sr=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),c=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),c(Eo(),s)}),Ds=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),c=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),c(sr(),s)}),cl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.BasicTracerProvider=s.ForceFlushState=void 0;var k=Ft(),c=Jr(),v=pi(),_=Tn(),p=il(),l=_a(),u=Bn(),h=ul(),g=Ds(),y;(function(w){w[w.resolved=0]="resolved",w[w.timeout=1]="timeout",w[w.error=2]="error",w[w.unresolved=3]="unresolved"})(y=s.ForceFlushState||(s.ForceFlushState={}));var f=class{constructor(w={}){var E;this._registeredSpanProcessors=[],this._tracers=new Map;let R=h({},p.DEFAULT_CONFIG,w);this.resource=(E=R.resource)!==null&&E!==void 0?E:v.Resource.empty(),this.resource=v.Resource.default().merge(this.resource),this._config=Object.assign({},R,{resource:this.resource});let C=this._buildExporterFromEnv();if(C!==void 0){let D=new g.BatchSpanProcessor(C);this.activeSpanProcessor=D}else this.activeSpanProcessor=new u.NoopSpanProcessor}getTracer(w,E){let R=`${w}@${E||""}`;return this._tracers.has(R)||this._tracers.set(R,new _.Tracer({name:w,version:E},this._config,this)),this._tracers.get(R)}addSpanProcessor(w){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(E=>k.diag.error("Error while trying to shutdown current span processor",E)),this._registeredSpanProcessors.push(w),this.activeSpanProcessor=new l.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(w={}){k.trace.setGlobalTracerProvider(this),w.propagator===void 0&&(w.propagator=this._buildPropagatorFromEnv()),w.contextManager&&k.context.setGlobalContextManager(w.contextManager),w.propagator&&k.propagation.setGlobalPropagator(w.propagator)}forceFlush(){let w=this._config.forceFlushTimeoutMillis,E=this._registeredSpanProcessors.map(R=>new Promise(C=>{let D,x=setTimeout(()=>{C(new Error(`Span processor did not completed within timeout period of ${w} ms`)),D=y.timeout},w);R.forceFlush().then(()=>{clearTimeout(x),D!==y.timeout&&(D=y.resolved,C(D))}).catch(Q=>{clearTimeout(x),D=y.error,C(Q)})}));return new Promise((R,C)=>{Promise.all(E).then(D=>{let x=D.filter(Q=>Q!==y.resolved);x.length>0?C(x):R()}).catch(D=>C([D]))})}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(w){var E;return(E=f._registeredPropagators.get(w))===null||E===void 0?void 0:E()}_getSpanExporter(w){var E;return(E=f._registeredExporters.get(w))===null||E===void 0?void 0:E()}_buildPropagatorFromEnv(){let w=Array.from(new Set(c.getEnv().OTEL_PROPAGATORS)),E=w.map(R=>{let C=this._getPropagator(R);return C||k.diag.warn(`Propagator "${R}" requested through environment variable is unavailable.`),C}).reduce((R,C)=>(C&&R.push(C),R),[]);if(E.length!==0)return w.length===1?E[0]:new c.CompositePropagator({propagators:E})}_buildExporterFromEnv(){let w=c.getEnv().OTEL_TRACES_EXPORTER;if(w==="none")return;let E=this._getSpanExporter(w);return E||k.diag.error(`Exporter "${w}" requested through environment variable is unavailable.`),E}};s.BasicTracerProvider=f,f._registeredPropagators=new Map([["tracecontext",()=>new c.HttpTraceContextPropagator],["baggage",()=>new c.HttpBaggagePropagator]]),f._registeredExporters=new Map}),dl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.ConsoleSpanExporter=void 0;var k=Jr(),c=class{export(v,_){return this._sendSpans(v,_)}shutdown(){return this._sendSpans([]),Promise.resolve()}_exportInfo(v){return{traceId:v.spanContext().traceId,parentId:v.parentSpanId,name:v.name,id:v.spanContext().spanId,kind:v.kind,timestamp:k.hrTimeToMicroseconds(v.startTime),duration:k.hrTimeToMicroseconds(v.duration),attributes:v.attributes,status:v.status,events:v.events}}_sendSpans(v,_){for(let p of v)console.log(this._exportInfo(p));if(_)return _({code:k.ExportResultCode.SUCCESS})}};s.ConsoleSpanExporter=c}),pd=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.InMemorySpanExporter=void 0;var k=Jr(),c=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(v,_){if(this._stopped)return _({code:k.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...v),setTimeout(()=>_({code:k.ExportResultCode.SUCCESS}),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}};s.InMemorySpanExporter=c}),md=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),fd=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.SimpleSpanProcessor=void 0;var k=Ft(),c=Jr(),v=class{constructor(_){this._exporter=_,this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve()}forceFlush(){return Promise.resolve()}onStart(_){}onEnd(_){this._isShutdown||k.context.with(c.suppressTracing(k.context.active()),()=>{this._exporter.export([_],p=>{var l;p.code!==c.ExportResultCode.SUCCESS&&c.globalErrorHandler((l=p.error)!==null&&l!==void 0?l:new Error(`SimpleSpanProcessor: span export failed (status ${p})`))})})}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((_,p)=>{Promise.resolve().then(()=>this._exporter.shutdown()).then(_).catch(l=>{p(l)})}),this._shuttingDownPromise)}};s.SimpleSpanProcessor=v}),hl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),dr=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),kn=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Qt=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Tn=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),c=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),c(ya(),s),c(cl(),s),c(Ds(),s),c(dl(),s),c(pd(),s),c(md(),s),c(fd(),s),c(hl(),s),c(Bn(),s),c(va(),s),c(dr(),s),c(kn(),s),c(Qt(),s)}),Ea=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.azureCoreTracing=s.AzureMonitorSymbol=void 0;var k=Z();s.AzureMonitorSymbol="Azure_Monitor_Tracer";var c=!1,v=function(p){if(c)return p;try{var l=Tn(),u=Ft(),h=new l.BasicTracerProvider,g=h.getTracer("applicationinsights tracer"),y=p.setTracer;p.setTracer=function(f){var w=f.startSpan;f.startSpan=function(E,R,C){var D=w.call(this,E,R,C),x=D.end;return D.end=function(){var Q=x.apply(this,arguments);return k.channel.publish("azure-coretracing",D),Q},D},f[s.AzureMonitorSymbol]=!0,y.call(this,f)},u.trace.getSpan(u.context.active()),p.setTracer(g),c=!0}catch(f){}return p};s.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:v};function _(){k.channel.registerMonkeyPatch("@azure/core-tracing",s.azureCoreTracing)}s.enable=_}),pl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.bunyan=void 0;var k=Z(),c=function(_){var p=_.prototype._emit;return _.prototype._emit=function(l,u){var h=p.apply(this,arguments);if(!u){var g=h;g||(g=p.call(this,l,!0)),k.channel.publish("bunyan",{level:l.level,result:g})}return h},_};s.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:c};function v(){k.channel.registerMonkeyPatch("bunyan",s.bunyan)}s.enable=v}),ml=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.console=void 0;var k=Z(),c=q(2413),v=function(p){var l=new c.Writable,u=new c.Writable;l.write=function(R){if(!R)return!0;var C=R.toString();return k.channel.publish("console",{message:C}),!0},u.write=function(R){if(!R)return!0;var C=R.toString();return k.channel.publish("console",{message:C,stderr:!0}),!0};for(var h=new p.Console(l,u),g=["log","info","warn","error","dir","time","timeEnd","trace","assert"],y=function(R){var C=p[R];C&&(p[R]=function(){if(h[R])try{h[R].apply(h,arguments)}catch(D){}return C.apply(p,arguments)})},f=0,w=g;f<w.length;f++){var E=w[f];y(E)}return p};s.console={versionSpecifier:">= 4.0.0",patch:v};function _(){k.channel.registerMonkeyPatch("console",s.console),q(7082)}s.enable=_}),fl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.mongoCore=void 0;var k=Z(),c=function(_){var p=_.Server.prototype.connect;return _.Server.prototype.connect=function(){var l=p.apply(this,arguments),u=this.s.pool.write;this.s.pool.write=function(){var g=typeof arguments[1]=="function"?1:2;return typeof arguments[g]=="function"&&(arguments[g]=k.channel.bindToContext(arguments[g])),u.apply(this,arguments)};var h=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=k.channel.bindToContext(arguments[1])),h.apply(this,arguments)},l},_};s.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:c};function v(){k.channel.registerMonkeyPatch("mongodb-core",s.mongoCore)}s.enable=v}),So=O(s=>{"use strict";var k=s&&s.__assign||function(){return k=Object.assign||function(h){for(var g,y=1,f=arguments.length;y<f;y++){g=arguments[y];for(var w in g)Object.prototype.hasOwnProperty.call(g,w)&&(h[w]=g[w])}return h},k.apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.mongo330=s.mongo3=s.mongo2=void 0;var c=Z(),v=function(h){var g=h.instrument({operationIdGenerator:{next:function(){return c.channel.bindToContext(function(f){return f()})}}}),y={};return g.on("started",function(f){y[f.requestId]||(y[f.requestId]=k(k({},f),{time:new Date}))}),g.on("succeeded",function(f){var w=y[f.requestId];w&&delete y[f.requestId],typeof f.operationId=="function"?f.operationId(function(){return c.channel.publish("mongodb",{startedData:w,event:f,succeeded:!0})}):c.channel.publish("mongodb",{startedData:w,event:f,succeeded:!0})}),g.on("failed",function(f){var w=y[f.requestId];w&&delete y[f.requestId],typeof f.operationId=="function"?f.operationId(function(){return c.channel.publish("mongodb",{startedData:w,event:f,succeeded:!1})}):c.channel.publish("mongodb",{startedData:w,event:f,succeeded:!1})}),h},_=function(h){var g=h.instrument(),y={},f={};return g.on("started",function(w){y[w.requestId]||(f[w.requestId]=c.channel.bindToContext(function(E){return E()}),y[w.requestId]=k(k({},w),{time:new Date}))}),g.on("succeeded",function(w){var E=y[w.requestId];E&&delete y[w.requestId],typeof w=="object"&&typeof f[w.requestId]=="function"&&(f[w.requestId](function(){return c.channel.publish("mongodb",{startedData:E,event:w,succeeded:!0})}),delete f[w.requestId])}),g.on("failed",function(w){var E=y[w.requestId];E&&delete y[w.requestId],typeof w=="object"&&typeof f[w.requestId]=="function"&&(f[w.requestId](function(){return c.channel.publish("mongodb",{startedData:E,event:w,succeeded:!1})}),delete f[w.requestId])}),h},p=function(h){var g=h.Server.prototype.connect;return h.Server.prototype.connect=function(){var y=g.apply(this,arguments),f=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var E=typeof arguments[1]=="function"?1:2;return typeof arguments[E]=="function"&&(arguments[E]=c.channel.bindToContext(arguments[E])),f.apply(this,arguments)};var w=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=c.channel.bindToContext(arguments[1])),w.apply(this,arguments)},y},h},l=function(h){p(h);var g=h.instrument(),y={},f={};return g.on("started",function(w){y[w.requestId]||(f[w.requestId]=c.channel.bindToContext(function(E){return E()}),y[w.requestId]=w)}),g.on("succeeded",function(w){var E=y[w.requestId];E&&delete y[w.requestId],typeof w=="object"&&typeof f[w.requestId]=="function"&&(f[w.requestId](function(){return c.channel.publish("mongodb",{startedData:E,event:w,succeeded:!0})}),delete f[w.requestId])}),g.on("failed",function(w){var E=y[w.requestId];E&&delete y[w.requestId],typeof w=="object"&&typeof f[w.requestId]=="function"&&(f[w.requestId](function(){return c.channel.publish("mongodb",{startedData:E,event:w,succeeded:!1})}),delete f[w.requestId])}),h};s.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:v},s.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:_},s.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:l};function u(){c.channel.registerMonkeyPatch("mongodb",s.mongo2),c.channel.registerMonkeyPatch("mongodb",s.mongo3),c.channel.registerMonkeyPatch("mongodb",s.mongo330)}s.enable=u}),dn=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.mysql=void 0;var k=Z(),c=q(5622),v=function(p,l){var u=function(E,R){return function(C,D){var x=E[C];x&&(E[C]=function(){for(var Q=arguments.length-1,te=arguments.length-1;te>=0;--te)if(typeof arguments[te]=="function"){Q=te;break}else if(typeof arguments[te]!="undefined")break;var K=arguments[Q],ue={result:null,startTime:null,startDate:null};typeof K=="function"&&(D?(ue.startTime=process.hrtime(),ue.startDate=new Date,arguments[Q]=k.channel.bindToContext(D(ue,K))):arguments[Q]=k.channel.bindToContext(K));var _e=x.apply(this,arguments);return ue.result=_e,_e})}},h=function(E,R){return u(E.prototype,R+".prototype")},g=["connect","changeUser","ping","statistics","end"],y=q(3255)(c.dirname(l)+"/lib/Connection");g.forEach(function(E){return h(y,"Connection")(E)}),u(y,"Connection")("createQuery",function(E,R){return function(C){var D=process.hrtime(E.startTime),x=D[0]*1e3+D[1]/1e6|0;k.channel.publish("mysql",{query:E.result,callbackArgs:arguments,err:C,duration:x,time:E.startDate}),R.apply(this,arguments)}});var f=["_enqueueCallback"],w=q(9118)(c.dirname(l)+"/lib/Pool");return f.forEach(function(E){return h(w,"Pool")(E)}),p};s.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:v};function _(){k.channel.registerMonkeyPatch("mysql",s.mysql)}s.enable=_}),Os=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.postgresPool1=void 0;var k=Z();function c(_){var p=_.prototype.connect;return _.prototype.connect=function(l){return l&&(arguments[0]=k.channel.bindToContext(l)),p.apply(this,arguments)},_}s.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:c};function v(){k.channel.registerMonkeyPatch("pg-pool",s.postgresPool1)}s.enable=v}),gl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.postgres7=s.postgres6=void 0;var k=Z(),c=q(8614);function v(l,u){var h=l.Client.prototype.query,g="__diagnosticOriginalFunc";return l.Client.prototype.query=function(y,f,w){var E={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},R=process.hrtime(),C;function D(x){x&&x[g]&&(x=x[g]);var Q=k.channel.bindToContext(function(te,K){var ue=process.hrtime(R);if(E.result=K&&{rowCount:K.rowCount,command:K.command},E.error=te,E.duration=Math.ceil(ue[0]*1e3+ue[1]/1e6),k.channel.publish("postgres",E),te){if(x)return x.apply(this,arguments);C&&C instanceof c.EventEmitter&&C.emit("error",te)}else x&&x.apply(this,arguments)});try{return Object.defineProperty(Q,g,{value:x}),Q}catch(te){return x}}try{typeof y=="string"?f instanceof Array?(E.query.preparable={text:y,args:f},w=D(w)):(E.query.text=y,w?w=D(w):f=D(f)):(typeof y.name=="string"?E.query.plan=y.name:y.values instanceof Array?E.query.preparable={text:y.text,args:y.values}:E.query.text=y.text,w?w=D(w):f?f=D(f):y.callback=D(y.callback))}catch(x){return h.apply(this,arguments)}return arguments[0]=y,arguments[1]=f,arguments[2]=w,arguments.length=arguments.length>3?arguments.length:3,C=h.apply(this,arguments),C},l}function _(l,u){var h=l.Client.prototype.query,g="__diagnosticOriginalFunc";return l.Client.prototype.query=function(y,f,w){var E=this,R=!!w,C={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},D=process.hrtime(),x;function Q(te){te&&te[g]&&(te=te[g]);var K=k.channel.bindToContext(function(ue,_e){var Te=process.hrtime(D);if(C.result=_e&&{rowCount:_e.rowCount,command:_e.command},C.error=ue,C.duration=Math.ceil(Te[0]*1e3+Te[1]/1e6),k.channel.publish("postgres",C),ue){if(te)return te.apply(this,arguments);x&&x instanceof c.EventEmitter&&x.emit("error",ue)}else te&&te.apply(this,arguments)});try{return Object.defineProperty(K,g,{value:te}),K}catch(ue){return te}}try{typeof y=="string"?f instanceof Array?(C.query.preparable={text:y,args:f},R=typeof w=="function",w=R?Q(w):w):(C.query.text=y,w?(R=typeof w=="function",w=R?Q(w):w):(R=typeof f=="function",f=R?Q(f):f)):(typeof y.name=="string"?C.query.plan=y.name:y.values instanceof Array?C.query.preparable={text:y.text,args:y.values}:C.query.text=y.text,w?(R=typeof w=="function",w=Q(w)):f?(R=typeof f=="function",f=R?Q(f):f):(R=typeof y.callback=="function",y.callback=R?Q(y.callback):y.callback))}catch(te){return h.apply(this,arguments)}return arguments[0]=y,arguments[1]=f,arguments[2]=w,arguments.length=arguments.length>3?arguments.length:3,x=h.apply(this,arguments),R?x:x.then(function(te){return Q()(void 0,te),new E._Promise(function(K,ue){K(te)})}).catch(function(te){return Q()(te,void 0),new E._Promise(function(K,ue){ue(te)})})},l}s.postgres6={versionSpecifier:"6.*",patch:v},s.postgres7={versionSpecifier:">=7.* <=8.*",patch:_};function p(){k.channel.registerMonkeyPatch("pg",s.postgres6),k.channel.registerMonkeyPatch("pg",s.postgres7)}s.enable=p}),ko=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.redis=void 0;var k=Z(),c=function(_){var p=_.RedisClient.prototype.internal_send_command;return _.RedisClient.prototype.internal_send_command=function(l){if(l){var u=l.callback;if(!u||!u.pubsubBound){var h=this.address,g=process.hrtime(),y=new Date;l.callback=k.channel.bindToContext(function(f,w){var E=process.hrtime(g),R=E[0]*1e3+E[1]/1e6|0;k.channel.publish("redis",{duration:R,address:h,commandObj:l,err:f,result:w,time:y}),typeof u=="function"&&u.apply(this,arguments)}),l.callback.pubsubBound=!0}}return p.call(this,l)},_};s.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:c};function v(){k.channel.registerMonkeyPatch("redis",s.redis)}s.enable=v}),To=O(s=>{"use strict";var k=s&&s.__assign||function(){return k=Object.assign||function(p){for(var l,u=1,h=arguments.length;u<h;u++){l=arguments[u];for(var g in l)Object.prototype.hasOwnProperty.call(l,g)&&(p[g]=l[g])}return p},k.apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.tedious=void 0;var c=Z(),v=function(p){var l=p.Connection.prototype.makeRequest;return p.Connection.prototype.makeRequest=function(){function u(g){var y=process.hrtime(),f={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return c.channel.bindToContext(function(w,E,R){var C=process.hrtime(y);f=k(k({},f),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!w&&{rowCount:E,rows:R},query:{text:this.parametersByName.statement.value},error:w,duration:Math.ceil(C[0]*1e3+C[1]/1e6)}),c.channel.publish("tedious",f),g.call(this,w,E,R)})}var h=arguments[0];arguments[0].callback=u(h.callback),l.apply(this,arguments)},p};s.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:v};function _(){c.channel.registerMonkeyPatch("tedious",s.tedious)}s.enable=_}),vl=O(s=>{"use strict";var k=s&&s.__extends||function(){var u=function(h,g){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,f){y.__proto__=f}||function(y,f){for(var w in f)Object.prototype.hasOwnProperty.call(f,w)&&(y[w]=f[w])},u(h,g)};return function(h,g){u(h,g);function y(){this.constructor=h}h.prototype=g===null?Object.create(g):(y.prototype=g.prototype,new y)}}(),c=s&&s.__rest||function(u,h){var g={};for(var y in u)Object.prototype.hasOwnProperty.call(u,y)&&h.indexOf(y)<0&&(g[y]=u[y]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,y=Object.getOwnPropertySymbols(u);f<y.length;f++)h.indexOf(y[f])<0&&Object.prototype.propertyIsEnumerable.call(u,y[f])&&(g[y[f]]=u[y[f]]);return g};Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.winston2=s.winston3=void 0;var v=Z(),_=function(u){var h=u.Logger.prototype.log,g,y=function(f,w,E){var R;return g===u.config.npm.levels?R="npm":g===u.config.syslog.levels?R="syslog":R="unknown",v.channel.publish("winston",{level:f,message:w,meta:E,levelKind:R}),w};return u.Logger.prototype.log=function(){return g=this.levels,!this.filters||this.filters.length===0?this.filters=[y]:this.filters[this.filters.length-1]!==y&&(this.filters=this.filters.filter(function(f){return f!==y}),this.filters.push(y)),h.apply(this,arguments)},u},p=function(u){var h=function(E,R){var C;return E.config.npm.levels[R]!=null?C="npm":E.config.syslog.levels[R]!=null?C="syslog":C="unknown",C},g=function(E){k(R,E);function R(C,D){var x=E.call(this,D)||this;return x.winston=C,x}return R.prototype.log=function(C,D){var x=C.message,Q=C.level,te=C.meta,K=c(C,["message","level","meta"]);Q=typeof Symbol.for=="function"?C[Symbol.for("level")]:Q,x=C instanceof Error?C:x;var ue=h(this.winston,Q);te=te||{};for(var _e in K)K.hasOwnProperty(_e)&&(te[_e]=K[_e]);v.channel.publish("winston",{message:x,level:Q,levelKind:ue,meta:te}),D()},R}(u.Transport);function y(){var E=arguments[0].levels||u.config.npm.levels,R;for(var C in E)E.hasOwnProperty(C)&&(R=R===void 0||E[C]>E[R]?C:R);this.add(new g(u,{level:R}))}var f=u.createLogger;u.createLogger=function(){var E=arguments[0].levels||u.config.npm.levels,R;for(var C in E)E.hasOwnProperty(C)&&(R=R===void 0||E[C]>E[R]?C:R);var D=f.apply(this,arguments);D.add(new g(u,{level:R}));var x=D.configure;return D.configure=function(){x.apply(this,arguments),y.apply(this,arguments)},D};var w=u.configure;return u.configure=function(){w.apply(this,arguments),y.apply(this,arguments)},u.add(new g(u)),u};s.winston3={versionSpecifier:"3.x",patch:p},s.winston2={versionSpecifier:"2.x",patch:_};function l(){v.channel.registerMonkeyPatch("winston",s.winston2),v.channel.registerMonkeyPatch("winston",s.winston3)}s.enable=l}),Ro=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.tedious=s.pgPool=s.pg=s.winston=s.redis=s.mysql=s.mongodb=s.mongodbCore=s.console=s.bunyan=s.azuresdk=void 0;var k=Ea();s.azuresdk=k;var c=pl();s.bunyan=c;var v=ml();s.console=v;var _=fl();s.mongodbCore=_;var p=So();s.mongodb=p;var l=dn();s.mysql=l;var u=Os();s.pgPool=u;var h=gl();s.pg=h;var g=ko();s.redis=g;var y=To();s.tedious=y;var f=vl();s.winston=f;function w(){c.enable(),v.enable(),_.enable(),p.enable(),l.enable(),h.enable(),u.enable(),g.enable(),f.enable(),k.enable(),y.enable()}s.enable=w}),xs=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.registerContextPreservation=s.IsInitialized=void 0;var k=ee(),c=ce();s.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var v="DiagnosticChannel";if(s.IsInitialized){_=Ro(),p=process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"",l=p.split(","),u={bunyan:_.bunyan,console:_.console,mongodb:_.mongodb,mongodbCore:_.mongodbCore,mysql:_.mysql,redis:_.redis,pg:_.pg,pgPool:_.pgPool,winston:_.winston,azuresdk:_.azuresdk};for(h in u)l.indexOf(h)===-1&&(u[h].enable(),c.info(v,"Subscribed to "+h+" events"));l.length>0&&c.info(v,"Some modules will not be patched",l)}else c.info(v,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");var _,p,l,u,h;function g(y){if(s.IsInitialized){var f=Z();f.channel.addContextPreservation(y),f.channel.spanContextPropagator=k.AsyncScopeManager}}s.registerContextPreservation=g}),mi=O((s,k)=>{"use strict";k.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}}),zr=O((s,k)=>{"use strict";var c=s&&s.__assign||function(){return c=Object.assign||function(y){for(var f,w=1,E=arguments.length;w<E;w++){f=arguments[w];for(var R in f)Object.prototype.hasOwnProperty.call(f,R)&&(y[R]=f[R])}return y},c.apply(this,arguments)},v=q(8605),_=q(7211),p=q(8835),l=q(7619),u=ce(),h=mi(),g=function(){function y(){}return y.getCookie=function(f,w){var E="";if(f&&f.length&&typeof w=="string")for(var R=f+"=",C=w.split(";"),D=0;D<C.length;D++){var w=C[D];if(w=y.trim(w),w&&w.indexOf(R)===0){E=w.substring(R.length,C[D].length);break}}return E},y.trim=function(f){return typeof f=="string"?f.replace(/^\s+|\s+$/g,""):""},y.int32ArrayToBase64=function(f){var w=function(x,Q){return String.fromCharCode(x>>Q&255)},E=function(x){return w(x,24)+w(x,16)+w(x,8)+w(x,0)},R=f.map(E).join(""),C=Buffer.from?Buffer.from(R,"binary"):new Buffer(R,"binary"),D=C.toString("base64");return D.substr(0,D.indexOf("="))},y.random32=function(){return 4294967296*Math.random()|0},y.randomu32=function(){return y.random32()+2147483648},y.w3cTraceId=function(){for(var f=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],w="",E,R=0;R<4;R++)E=y.random32(),w+=f[E&15]+f[E>>4&15]+f[E>>8&15]+f[E>>12&15]+f[E>>16&15]+f[E>>20&15]+f[E>>24&15]+f[E>>28&15];var C=f[8+Math.random()*4|0];return w.substr(0,8)+w.substr(9,4)+"4"+w.substr(13,3)+C+w.substr(16,3)+w.substr(19,12)},y.w3cSpanId=function(){return y.w3cTraceId().substring(16)},y.isValidW3CId=function(f){return f.length===32&&f!=="00000000000000000000000000000000"},y.isArray=function(f){return Object.prototype.toString.call(f)==="[object Array]"},y.isError=function(f){return f instanceof Error},y.isPrimitive=function(f){var w=typeof f;return w==="string"||w==="number"||w==="boolean"},y.isDate=function(f){return Object.prototype.toString.call(f)==="[object Date]"},y.msToTimeSpan=function(f){(isNaN(f)||f<0)&&(f=0);var w=(f/1e3%60).toFixed(7).replace(/0{0,4}$/,""),E=""+Math.floor(f/(1e3*60))%60,R=""+Math.floor(f/(1e3*60*60))%24,C=Math.floor(f/(1e3*60*60*24));w=w.indexOf(".")<2?"0"+w:w,E=E.length<2?"0"+E:E,R=R.length<2?"0"+R:R;var D=C>0?C+".":"";return D+R+":"+E+":"+w},y.extractError=function(f){var w=f;return{message:f.message,code:w.code||w.id||""}},y.extractObject=function(f){return f instanceof Error?y.extractError(f):typeof f.toJSON=="function"?f.toJSON():f},y.validateStringMap=function(f){if(typeof f!="object"){u.info("Invalid properties dropped from payload");return}var w={};for(var E in f){var R="",C=f[E],D=typeof C;if(y.isPrimitive(C))R=C.toString();else if(C===null||D==="undefined")R="";else if(D==="function"){u.info("key: "+E+" was function; will not serialize");continue}else{var x=y.isArray(C)?C:y.extractObject(C);try{y.isPrimitive(x)?R=x:R=JSON.stringify(x)}catch(Q){R=C.constructor.name.toString()+" (Error: "+Q.message+")",u.info("key: "+E+", could not be serialized")}}w[E]=R.substring(0,y.MAX_PROPERTY_LENGTH)}return w},y.canIncludeCorrelationHeader=function(f,w){var E=f&&f.config&&f.config.correlationHeaderExcludedDomains;if(!E||E.length==0||!w)return!0;for(var R=0;R<E.length;R++){var C=new RegExp(E[R].replace(/\./g,".").replace(/\*/g,".*"));if(C.test(p.parse(w).hostname))return!1}return!0},y.getCorrelationContextTarget=function(f,w){var E=f.headers&&f.headers[h.requestContextHeader];if(E)for(var R=E.split(","),C=0;C<R.length;++C){var D=R[C].split("=");if(D.length==2&&D[0]==w)return D[1]}},y.makeRequest=function(f,w,E,R){w&&w.indexOf("//")===0&&(w="https:"+w);var C=p.parse(w),D=c(c({},E),{host:C.hostname,port:C.port,path:C.pathname}),x=void 0;if(C.protocol==="https:"&&(x=f.proxyHttpsUrl||void 0),C.protocol==="http:"&&(x=f.proxyHttpUrl||void 0),x){x.indexOf("//")===0&&(x="http:"+x);var Q=p.parse(x);Q.protocol==="https:"?(u.info("Proxies that use HTTPS are not supported"),x=void 0):D=c(c({},D),{host:Q.hostname,port:Q.port||"80",path:w,headers:c(c({},D.headers),{Host:C.hostname})})}var te=C.protocol==="https:"&&!x;return te&&f.httpsAgent!==void 0?D.agent=f.httpsAgent:!te&&f.httpAgent!==void 0?D.agent=f.httpAgent:te&&(D.agent=y.tlsRestrictedAgent),te?_.request(D,R):v.request(D,R)},y.safeIncludeCorrelationHeader=function(f,w,E){var R;if(typeof E=="string")R=E;else if(E instanceof Array)R=E.join(",");else if(E&&typeof E.toString=="function")try{R=E.toString()}catch(C){u.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",C,E)}R?y.addCorrelationIdHeaderFromString(f,w,R):w.setHeader(h.requestContextHeader,h.requestContextSourceKey+"="+f.config.correlationId)},y.dumpObj=function(f){var w=Object.prototype.toString.call(f),E="";return w==="[object Error]"?E="{ stack: '"+f.stack+"', message: '"+f.message+"', name: '"+f.name+"'":E=JSON.stringify(f),w+E},y.addCorrelationIdHeaderFromString=function(f,w,E){var R=E.split(","),C=h.requestContextSourceKey+"=",D=R.some(function(x){return x.substring(0,C.length)===C});D||w.setHeader(h.requestContextHeader,E+","+h.requestContextSourceKey+"="+f.config.correlationId)},y.MAX_PROPERTY_LENGTH=8192,y.tlsRestrictedAgent=new _.Agent({keepAlive:!0,maxSockets:25,secureOptions:l.SSL_OP_NO_SSLv2|l.SSL_OP_NO_SSLv3|l.SSL_OP_NO_TLSv1|l.SSL_OP_NO_TLSv1_1}),y}();k.exports=g}),$i=O((s,k)=>{"use strict";var c=zr(),v=ce(),_=function(){function p(){}return p.queryCorrelationId=function(l,u){var h=l.profileQueryEndpoint+"/api/profiles/"+l.instrumentationKey+"/appId";if(p.completedLookups.hasOwnProperty(h)){u(p.completedLookups[h]);return}else if(p.pendingLookups[h]){p.pendingLookups[h].push(u);return}p.pendingLookups[h]=[u];var g=function(){if(p.pendingLookups[h]){var y={method:"GET",disableAppInsightsAutoCollection:!0};v.info(p.TAG,y);var f=c.makeRequest(l,h,y,function(w){if(w.statusCode===200){var E="";w.setEncoding("utf-8"),w.on("data",function(R){E+=R}),w.on("end",function(){v.info(p.TAG,E);var R=p.correlationIdPrefix+E;p.completedLookups[h]=R,p.pendingLookups[h]&&p.pendingLookups[h].forEach(function(C){return C(R)}),delete p.pendingLookups[h]})}else w.statusCode>=400&&w.statusCode<500?(p.completedLookups[h]=void 0,delete p.pendingLookups[h]):setTimeout(g,l.correlationIdRetryIntervalMs)});f&&(f.on("error",function(w){v.warn(p.TAG,w)}),f.end())}};setTimeout(g,0)},p.cancelCorrelationIdQuery=function(l,u){var h=l.profileQueryEndpoint+"/api/profiles/"+l.instrumentationKey+"/appId",g=p.pendingLookups[h];g&&(p.pendingLookups[h]=g.filter(function(y){return y!=u}),p.pendingLookups[h].length==0&&delete p.pendingLookups[h])},p.generateRequestId=function(l){if(l){l=l[0]=="|"?l:"|"+l,l[l.length-1]!=="."&&(l+=".");var u=(p.currentRootId++).toString(16);return p.appendSuffix(l,u,"_")}else return p.generateRootId()},p.getRootId=function(l){var u=l.indexOf(".");u<0&&(u=l.length);var h=l[0]==="|"?1:0;return l.substring(h,u)},p.generateRootId=function(){return"|"+c.w3cTraceId()+"."},p.appendSuffix=function(l,u,h){if(l.length+u.length<p.requestIdMaxLength)return l+u+h;var g=p.requestIdMaxLength-9;if(l.length>g)for(;g>1;--g){var y=l[g-1];if(y==="."||y==="_")break}if(g<=1)return p.generateRootId();for(u=c.randomu32().toString(16);u.length<8;)u="0"+u;return l.substring(0,g)+u+"#"},p.TAG="CorrelationIdManager",p.correlationIdPrefix="cid-v1:",p.w3cEnabled=!0,p.pendingLookups={},p.completedLookups={},p.requestIdMaxLength=1024,p.currentRootId=c.randomu32(),p}();k.exports=_}),Ms=O((s,k)=>{"use strict";var c=zr(),v=$i(),_=function(){function p(l,u){if(this.traceFlag=p.DEFAULT_TRACE_FLAG,this.version=p.DEFAULT_VERSION,l&&typeof l=="string")if(l.split(",").length>1)this.traceId=c.w3cTraceId(),this.spanId=c.w3cTraceId().substr(0,16);else{var h=l.trim().split("-"),g=h.length;g>=4?(this.version=h[0],this.traceId=h[1],this.spanId=h[2],this.traceFlag=h[3]):(this.traceId=c.w3cTraceId(),this.spanId=c.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=p.DEFAULT_VERSION,this.traceId=c.w3cTraceId()),this.version==="00"&&g!==4&&(this.traceId=c.w3cTraceId(),this.spanId=c.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=p.DEFAULT_VERSION,this.traceId=c.w3cTraceId(),this.spanId=c.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=p.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=p.DEFAULT_TRACE_FLAG,this.traceId=c.w3cTraceId()),p.isValidTraceId(this.traceId)||(this.traceId=c.w3cTraceId()),p.isValidSpanId(this.spanId)||(this.spanId=c.w3cTraceId().substr(0,16),this.traceId=c.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(u){this.parentId=u.slice();var y=v.getRootId(u);p.isValidTraceId(y)||(this.legacyRootId=y,y=c.w3cTraceId()),u.indexOf("|")!==-1&&(u=u.substring(1+u.substring(0,u.length-1).lastIndexOf("."),u.length-1)),this.traceId=y,this.spanId=u}else this.traceId=c.w3cTraceId(),this.spanId=c.w3cTraceId().substr(0,16)}return p.isValidTraceId=function(l){return l.match(/^[0-9a-f]{32}$/)&&l!=="00000000000000000000000000000000"},p.isValidSpanId=function(l){return l.match(/^[0-9a-f]{16}$/)&&l!=="0000000000000000"},p.formatOpenTelemetryTraceFlags=function(l){var u="0"+l.toString(16);return u.substring(u.length-2)},p.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},p.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},p.prototype.updateSpanId=function(){this.spanId=c.w3cTraceId().substr(0,16)},p.DEFAULT_TRACE_FLAG="01",p.DEFAULT_VERSION="00",p}();k.exports=_}),Co=O((s,k)=>{"use strict";var c=function(){function v(_){this.fieldmap=[],!!_&&(this.fieldmap=this.parseHeader(_))}return v.prototype.toString=function(){var _=this.fieldmap;return!_||_.length==0?null:_.join(", ")},v.validateKeyChars=function(_){var p=_.split("@");if(p.length==2){var l=p[0].trim(),u=p[1].trim(),h=Boolean(l.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),g=Boolean(u.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return h&&g}else if(p.length==1)return Boolean(_.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/));return!1},v.prototype.parseHeader=function(_){var p=[],l={},u=_.split(",");if(u.length>32)return null;for(var h=0,g=u;h<g.length;h++){var y=g[h],f=y.trim();if(f.length!==0){var w=f.split("=");if(w.length!==2||!v.validateKeyChars(w[0])||l[w[0]])return null;l[w[0]]=!0,p.push(f)}}return p},v.strict=!0,v}();k.exports=c}),Rn=O((s,k)=>{"use strict";var c=function(){function v(){}return v}();k.exports=c}),Po=O((s,k)=>{"use strict";var c=s&&s.__extends||function(){var p=function(l,u){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(h[y]=g[y])},p(l,u)};return function(l,u){p(l,u);function h(){this.constructor=l}l.prototype=u===null?Object.create(u):(h.prototype=u.prototype,new h)}}(),v=Rn(),_=function(p){c(l,p);function l(){var u=p.call(this)||this;return u.ver=2,u.properties={},u.measurements={},u}return l}(v);k.exports=_}),fi=O((s,k)=>{"use strict";var c=function(){function v(){}return v}();k.exports=c}),ss=O((s,k)=>{"use strict";var c=function(){function v(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return v}();k.exports=c}),Gi=O((s,k)=>{"use strict";var c=s&&s.__extends||function(){var p=function(l,u){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(h[y]=g[y])},p(l,u)};return function(l,u){p(l,u);function h(){this.constructor=l}l.prototype=u===null?Object.create(u):(h.prototype=u.prototype,new h)}}(),v=fi(),_=function(p){c(l,p);function l(){return p.call(this)||this}return l}(v);k.exports=_}),Fs=O((s,k)=>{"use strict";var c;(function(v){v[v.Measurement=0]="Measurement",v[v.Aggregation=1]="Aggregation"})(c||(c={})),k.exports=c}),yl=O((s,k)=>{"use strict";var c=Fs(),v=function(){function _(){this.kind=c.Measurement}return _}();k.exports=v}),bl=O((s,k)=>{"use strict";var c=function(){function v(){this.ver=1,this.sampleRate=100,this.tags={}}return v}();k.exports=c}),No=O((s,k)=>{"use strict";var c=s&&s.__extends||function(){var p=function(l,u){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(h[y]=g[y])},p(l,u)};return function(l,u){p(l,u);function h(){this.constructor=l}l.prototype=u===null?Object.create(u):(h.prototype=u.prototype,new h)}}(),v=Rn(),_=function(p){c(l,p);function l(){var u=p.call(this)||this;return u.ver=2,u.properties={},u.measurements={},u}return l}(v);k.exports=_}),Ao=O((s,k)=>{"use strict";var c=s&&s.__extends||function(){var p=function(l,u){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(h[y]=g[y])},p(l,u)};return function(l,u){p(l,u);function h(){this.constructor=l}l.prototype=u===null?Object.create(u):(h.prototype=u.prototype,new h)}}(),v=Rn(),_=function(p){c(l,p);function l(){var u=p.call(this)||this;return u.ver=2,u.exceptions=[],u.properties={},u.measurements={},u}return l}(v);k.exports=_}),wl=O((s,k)=>{"use strict";var c=function(){function v(){this.hasFullStack=!0,this.parsedStack=[]}return v}();k.exports=c}),Io=O((s,k)=>{"use strict";var c=s&&s.__extends||function(){var p=function(l,u){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(h[y]=g[y])},p(l,u)};return function(l,u){p(l,u);function h(){this.constructor=l}l.prototype=u===null?Object.create(u):(h.prototype=u.prototype,new h)}}(),v=Rn(),_=function(p){c(l,p);function l(){var u=p.call(this)||this;return u.ver=2,u.properties={},u}return l}(v);k.exports=_}),gd=O((s,k)=>{"use strict";var c=s&&s.__extends||function(){var p=function(l,u){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(h[y]=g[y])},p(l,u)};return function(l,u){p(l,u);function h(){this.constructor=l}l.prototype=u===null?Object.create(u):(h.prototype=u.prototype,new h)}}(),v=Rn(),_=function(p){c(l,p);function l(){var u=p.call(this)||this;return u.ver=2,u.metrics=[],u.properties={},u}return l}(v);k.exports=_}),_l=O((s,k)=>{"use strict";var c=s&&s.__extends||function(){var p=function(l,u){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(h[y]=g[y])},p(l,u)};return function(l,u){p(l,u);function h(){this.constructor=l}l.prototype=u===null?Object.create(u):(h.prototype=u.prototype,new h)}}(),v=No(),_=function(p){c(l,p);function l(){var u=p.call(this)||this;return u.ver=2,u.properties={},u.measurements={},u}return l}(v);k.exports=_}),vd=O((s,k)=>{"use strict";var c=s&&s.__extends||function(){var p=function(l,u){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(h[y]=g[y])},p(l,u)};return function(l,u){p(l,u);function h(){this.constructor=l}l.prototype=u===null?Object.create(u):(h.prototype=u.prototype,new h)}}(),v=Rn(),_=function(p){c(l,p);function l(){var u=p.call(this)||this;return u.ver=2,u.success=!0,u.properties={},u.measurements={},u}return l}(v);k.exports=_}),El=O((s,k)=>{"use strict";var c=s&&s.__extends||function(){var p=function(l,u){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(h[y]=g[y])},p(l,u)};return function(l,u){p(l,u);function h(){this.constructor=l}l.prototype=u===null?Object.create(u):(h.prototype=u.prototype,new h)}}(),v=Rn(),_=function(p){c(l,p);function l(){var u=p.call(this)||this;return u.ver=2,u.properties={},u.measurements={},u}return l}(v);k.exports=_}),Pt=O((s,k)=>{"use strict";var c;(function(v){v[v.Verbose=0]="Verbose",v[v.Information=1]="Information",v[v.Warning=2]="Warning",v[v.Error=3]="Error",v[v.Critical=4]="Critical"})(c||(c={})),k.exports=c}),gi=O((s,k)=>{"use strict";var c=function(){function v(){}return v}();k.exports=c}),vi=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.AvailabilityData=Po(),s.Base=fi(),s.ContextTagKeys=ss(),s.Data=Gi(),s.DataPoint=yl(),s.DataPointType=Fs(),s.Domain=Rn(),s.Envelope=bl(),s.EventData=No(),s.ExceptionData=Ao(),s.ExceptionDetails=wl(),s.MessageData=Io(),s.MetricData=gd(),s.PageViewData=_l(),s.RemoteDependencyData=vd(),s.RequestData=El(),s.SeverityLevel=Pt(),s.StackFrame=gi()}),Ls=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.domainSupportsProperties=s.RemoteDependencyDataConstants=void 0;var k=vi(),c=function(){function _(){}return _.TYPE_HTTP="Http",_.TYPE_AI="Http (tracked component)",_}();s.RemoteDependencyDataConstants=c;function v(_){return"properties"in _||_ instanceof k.EventData||_ instanceof k.ExceptionData||_ instanceof k.MessageData||_ instanceof k.MetricData||_ instanceof k.PageViewData||_ instanceof k.RemoteDependencyData||_ instanceof k.RequestData}s.domainSupportsProperties=v}),Gr=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Sl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Cn=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Sa=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Hi=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Rr=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),ka=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Pn=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Do=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),hr=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Vi=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),kl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Oo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.TelemetryType=s.TelemetryTypeString=s.baseTypeToTelemetryType=s.telemetryTypeToBaseType=void 0;function k(_){switch(_){case v.Event:return"EventData";case v.Exception:return"ExceptionData";case v.Trace:return"MessageData";case v.Metric:return"MetricData";case v.Request:return"RequestData";case v.Dependency:return"RemoteDependencyData";case v.Availability:return"AvailabilityData";case v.PageView:return"PageViewData"}}s.telemetryTypeToBaseType=k;function c(_){switch(_){case"EventData":return v.Event;case"ExceptionData":return v.Exception;case"MessageData":return v.Trace;case"MetricData":return v.Metric;case"RequestData":return v.Request;case"RemoteDependencyData":return v.Dependency;case"AvailabilityData":return v.Availability;case"PageViewData":return v.PageView}}s.baseTypeToTelemetryType=c,s.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"};var v;(function(_){_[_.Event=0]="Event",_[_.Exception=1]="Exception",_[_.Trace=2]="Trace",_[_.Metric=3]="Metric",_[_.Request=4]="Request",_[_.Dependency=5]="Dependency",_[_.Availability=6]="Availability",_[_.PageView=7]="PageView"})(v=s.TelemetryType||(s.TelemetryType={}))}),as=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),c=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),c(Gr(),s),c(Sl(),s),c(Cn(),s),c(Sa(),s),c(Hi(),s),c(Rr(),s),c(ka(),s),c(Pn(),s),c(Do(),s),c(hr(),s),c(Vi(),s),c(kl(),s),c(Oo(),s)}),xo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Mo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Fo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Tl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Lo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Ta=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),os=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),qo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Bi=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),c=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),c(xo(),s),c(Mo(),s),c(Fo(),s),c(Tl(),s),c(Lo(),s),c(Ta(),s),c(os(),s),c(qo(),s)}),_t=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),c=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),c(Ls(),s),c(vi(),s),c(as(),s),c(Bi(),s)}),Qr=O((s,k)=>{"use strict";var c=function(){function v(){}return v.prototype.getUrl=function(){return this.url},v.prototype.RequestParser=function(){this.startTime=+new Date},v.prototype._setStatus=function(_,p){var l=+new Date;this.duration=l-this.startTime,this.statusCode=_;var u=this.properties||{};if(p){if(typeof p=="string")u.error=p;else if(p instanceof Error)u.error=p.message;else if(typeof p=="object")for(var h in p)u[h]=p[h]&&p[h].toString&&p[h].toString()}this.properties=u},v.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},v}();k.exports=c}),qs=O((s,k)=>{"use strict";var c=s&&s.__extends||function(){var w=function(E,R){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,D){C.__proto__=D}||function(C,D){for(var x in D)Object.prototype.hasOwnProperty.call(D,x)&&(C[x]=D[x])},w(E,R)};return function(E,R){w(E,R);function C(){this.constructor=E}E.prototype=R===null?Object.create(R):(C.prototype=R.prototype,new C)}}(),v=q(8835),_=_t(),p=zr(),l=mi(),u=Qr(),h=$i(),g=Co(),y=Ms(),f=function(w){c(E,w);function E(R,C){var D=w.call(this)||this;return R&&(D.method=R.method,D.url=D._getAbsoluteUrl(R),D.startTime=+new Date,D.socketRemoteAddress=R.socket&&R.socket.remoteAddress,D.parseHeaders(R,C),R.connection&&(D.connectionRemoteAddress=R.connection.remoteAddress,D.legacySocketRemoteAddress=R.connection.socket&&R.connection.socket.remoteAddress)),D}return E.prototype.onError=function(R,C){this._setStatus(void 0,R),C&&(this.duration=C)},E.prototype.onResponse=function(R,C){this._setStatus(R.statusCode,void 0),C&&(this.duration=C)},E.prototype.getRequestTelemetry=function(R){var C={id:this.requestId,name:this.method+" "+v.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(R&&R.time?C.time=R.time:this.startTime&&(C.time=new Date(this.startTime)),R){for(var D in R)C[D]||(C[D]=R[D]);if(R.properties)for(var D in R.properties)C.properties[D]=R.properties[D]}return C},E.prototype.getRequestTags=function(R){var C={};for(var D in R)C[D]=R[D];return C[E.keys.locationIp]=R[E.keys.locationIp]||this._getIp(),C[E.keys.sessionId]=R[E.keys.sessionId]||this._getId("ai_session"),C[E.keys.userId]=R[E.keys.userId]||this._getId("ai_user"),C[E.keys.userAuthUserId]=R[E.keys.userAuthUserId]||this._getId("ai_authUser"),C[E.keys.operationName]=this.getOperationName(R),C[E.keys.operationParentId]=this.getOperationParentId(R),C[E.keys.operationId]=this.getOperationId(R),C},E.prototype.getOperationId=function(R){return R[E.keys.operationId]||this.operationId},E.prototype.getOperationParentId=function(R){return R[E.keys.operationParentId]||this.parentId||this.getOperationId(R)},E.prototype.getOperationName=function(R){return R[E.keys.operationName]||this.method+" "+v.parse(this.url).pathname},E.prototype.getRequestId=function(){return this.requestId},E.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},E.prototype.getTraceparent=function(){return this.traceparent},E.prototype.getTracestate=function(){return this.tracestate},E.prototype.getLegacyRootId=function(){return this.legacyRootId},E.prototype._getAbsoluteUrl=function(R){if(!R.headers)return R.url;var C=R.connection?R.connection.encrypted:null,D=v.parse(R.url),x=D.pathname,Q=D.search,te=C||R.headers["x-forwarded-proto"]=="https"?"https":"http",K=v.format({protocol:te,host:R.headers.host,pathname:x,search:Q});return K},E.prototype._getIp=function(){var R=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,C=function(x){var Q=R.exec(x);if(Q)return Q[0]},D=C(this.rawHeaders["x-forwarded-for"])||C(this.rawHeaders["x-client-ip"])||C(this.rawHeaders["x-real-ip"])||C(this.connectionRemoteAddress)||C(this.socketRemoteAddress)||C(this.legacySocketRemoteAddress);return!D&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(D="127.0.0.1"),D},E.prototype._getId=function(R){var C=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"",D=E.parseId(p.getCookie(R,C));return D},E.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},E.prototype.parseHeaders=function(R,C){if(this.rawHeaders=R.headers||R.rawHeaders,this.userAgent=R.headers&&R.headers["user-agent"],this.sourceCorrelationId=p.getCorrelationContextTarget(R,l.requestContextSourceKey),R.headers){var D=R.headers[l.traceStateHeader]?R.headers[l.traceStateHeader].toString():null,x=R.headers[l.traceparentHeader]?R.headers[l.traceparentHeader].toString():null,Q=R.headers[l.requestIdHeader]?R.headers[l.requestIdHeader].toString():null,te=R.headers[l.parentIdHeader]?R.headers[l.parentIdHeader].toString():null,K=R.headers[l.rootIdHeader]?R.headers[l.rootIdHeader].toString():null;this.correlationContextHeader=R.headers[l.correlationContextHeader]?R.headers[l.correlationContextHeader].toString():null,h.w3cEnabled&&(x||D)?(this.traceparent=new y(x?x.toString():null),this.tracestate=x&&D&&new g(D?D.toString():null),this.setBackCompatFromThisTraceContext()):Q?h.w3cEnabled?(this.traceparent=new y(null,Q),this.setBackCompatFromThisTraceContext()):(this.parentId=Q,this.requestId=h.generateRequestId(this.parentId),this.operationId=h.getRootId(this.requestId)):h.w3cEnabled?(this.traceparent=new y,this.traceparent.parentId=te,this.traceparent.legacyRootId=K||te,this.setBackCompatFromThisTraceContext()):(this.parentId=te,this.requestId=h.generateRequestId(K||this.parentId),this.correlationContextHeader=null,this.operationId=h.getRootId(this.requestId)),C&&(this.requestId=C,this.operationId=h.getRootId(this.requestId))}},E.parseId=function(R){var C=R.split("|");return C.length>0?C[0]:""},E.keys=new _.ContextTagKeys,E}(u);k.exports=f}),Ra=O((s,k)=>{s=k.exports=Ie;var c;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?c=function(){var b=Array.prototype.slice.call(arguments,0);b.unshift("SEMVER"),console.log.apply(console,b)}:c=function(){},s.SEMVER_SPEC_VERSION="2.0.0";var v=256,_=Number.MAX_SAFE_INTEGER||9007199254740991,p=16,l=s.re=[],u=s.src=[],h=0,g=h++;u[g]="0|[1-9]\\d*";var y=h++;u[y]="[0-9]+";var f=h++;u[f]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var w=h++;u[w]="("+u[g]+")\\.("+u[g]+")\\.("+u[g]+")";var E=h++;u[E]="("+u[y]+")\\.("+u[y]+")\\.("+u[y]+")";var R=h++;u[R]="(?:"+u[g]+"|"+u[f]+")";var C=h++;u[C]="(?:"+u[y]+"|"+u[f]+")";var D=h++;u[D]="(?:-("+u[R]+"(?:\\."+u[R]+")*))";var x=h++;u[x]="(?:-?("+u[C]+"(?:\\."+u[C]+")*))";var Q=h++;u[Q]="[0-9A-Za-z-]+";var te=h++;u[te]="(?:\\+("+u[Q]+"(?:\\."+u[Q]+")*))";var K=h++,ue="v?"+u[w]+u[D]+"?"+u[te]+"?";u[K]="^"+ue+"$";var _e="[v=\\s]*"+u[E]+u[x]+"?"+u[te]+"?",Te=h++;u[Te]="^"+_e+"$";var Re=h++;u[Re]="((?:<|>)?=?)";var xe=h++;u[xe]=u[y]+"|x|X|\\*";var qe=h++;u[qe]=u[g]+"|x|X|\\*";var He=h++;u[He]="[v=\\s]*("+u[qe]+")(?:\\.("+u[qe]+")(?:\\.("+u[qe]+")(?:"+u[D]+")?"+u[te]+"?)?)?";var ze=h++;u[ze]="[v=\\s]*("+u[xe]+")(?:\\.("+u[xe]+")(?:\\.("+u[xe]+")(?:"+u[x]+")?"+u[te]+"?)?)?";var ut=h++;u[ut]="^"+u[Re]+"\\s*"+u[He]+"$";var at=h++;u[at]="^"+u[Re]+"\\s*"+u[ze]+"$";var Ct=h++;u[Ct]="(?:^|[^\\d])(\\d{1,"+p+"})(?:\\.(\\d{1,"+p+"}))?(?:\\.(\\d{1,"+p+"}))?(?:$|[^\\d])";var tt=h++;u[tt]="(?:~>?)";var Fe=h++;u[Fe]="(\\s*)"+u[tt]+"\\s+",l[Fe]=new RegExp(u[Fe],"g");var Be="$1~",Ve=h++;u[Ve]="^"+u[tt]+u[He]+"$";var Xe=h++;u[Xe]="^"+u[tt]+u[ze]+"$";var rt=h++;u[rt]="(?:\\^)";var lt=h++;u[lt]="(\\s*)"+u[rt]+"\\s+",l[lt]=new RegExp(u[lt],"g");var Je="$1^",kt=h++;u[kt]="^"+u[rt]+u[He]+"$";var qt=h++;u[qt]="^"+u[rt]+u[ze]+"$";var Nt=h++;u[Nt]="^"+u[Re]+"\\s*("+_e+")$|^$";var Tt=h++;u[Tt]="^"+u[Re]+"\\s*("+ue+")$|^$";var gt=h++;u[gt]="(\\s*)"+u[Re]+"\\s*("+_e+"|"+u[He]+")",l[gt]=new RegExp(u[gt],"g");var Zt="$1$2$3",ar=h++;u[ar]="^\\s*("+u[He]+")\\s+-\\s+("+u[He]+")\\s*$";var et=h++;u[et]="^\\s*("+u[ze]+")\\s+-\\s+("+u[ze]+")\\s*$";var Ze=h++;for(u[Ze]="(<|>)?=?\\s*\\*",ot=0;ot<h;ot++)c(ot,u[ot]),l[ot]||(l[ot]=new RegExp(u[ot]));var ot;s.parse=Et;function Et(b,N){if((!N||typeof N!="object")&&(N={loose:!!N,includePrerelease:!1}),b instanceof Ie)return b;if(typeof b!="string"||b.length>v)return null;var F=N.loose?l[Te]:l[K];if(!F.test(b))return null;try{return new Ie(b,N)}catch(oe){return null}}s.valid=An;function An(b,N){var F=Et(b,N);return F?F.version:null}s.clean=tn;function tn(b,N){var F=Et(b.trim().replace(/^[=v]+/,""),N);return F?F.version:null}s.SemVer=Ie;function Ie(b,N){if((!N||typeof N!="object")&&(N={loose:!!N,includePrerelease:!1}),b instanceof Ie){if(b.loose===N.loose)return b;b=b.version}else if(typeof b!="string")throw new TypeError("Invalid Version: "+b);if(b.length>v)throw new TypeError("version is longer than "+v+" characters");if(!(this instanceof Ie))return new Ie(b,N);c("SemVer",b,N),this.options=N,this.loose=!!N.loose;var F=b.trim().match(N.loose?l[Te]:l[K]);if(!F)throw new TypeError("Invalid Version: "+b);if(this.raw=b,this.major=+F[1],this.minor=+F[2],this.patch=+F[3],this.major>_||this.major<0)throw new TypeError("Invalid major version");if(this.minor>_||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>_||this.patch<0)throw new TypeError("Invalid patch version");F[4]?this.prerelease=F[4].split(".").map(function(oe){if(/^[0-9]+$/.test(oe)){var le=+oe;if(le>=0&&le<_)return le}return oe}):this.prerelease=[],this.build=F[5]?F[5].split("."):[],this.format()}Ie.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},Ie.prototype.toString=function(){return this.version},Ie.prototype.compare=function(b){return c("SemVer.compare",this.version,this.options,b),b instanceof Ie||(b=new Ie(b,this.options)),this.compareMain(b)||this.comparePre(b)},Ie.prototype.compareMain=function(b){return b instanceof Ie||(b=new Ie(b,this.options)),Ht(this.major,b.major)||Ht(this.minor,b.minor)||Ht(this.patch,b.patch)},Ie.prototype.comparePre=function(b){if(b instanceof Ie||(b=new Ie(b,this.options)),this.prerelease.length&&!b.prerelease.length)return-1;if(!this.prerelease.length&&b.prerelease.length)return 1;if(!this.prerelease.length&&!b.prerelease.length)return 0;var N=0;do{var F=this.prerelease[N],oe=b.prerelease[N];if(c("prerelease compare",N,F,oe),F===void 0&&oe===void 0)return 0;if(oe===void 0)return 1;if(F===void 0)return-1;if(F!==oe)return Ht(F,oe)}while(++N)},Ie.prototype.inc=function(b,N){switch(b){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",N);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",N);break;case"prepatch":this.prerelease.length=0,this.inc("patch",N),this.inc("pre",N);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",N),this.inc("pre",N);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var F=this.prerelease.length;--F>=0;)typeof this.prerelease[F]=="number"&&(this.prerelease[F]++,F=-2);F===-1&&this.prerelease.push(0)}N&&(this.prerelease[0]===N?isNaN(this.prerelease[1])&&(this.prerelease=[N,0]):this.prerelease=[N,0]);break;default:throw new Error("invalid increment argument: "+b)}return this.format(),this.raw=this.version,this},s.inc=hn;function hn(b,N,F,oe){typeof F=="string"&&(oe=F,F=void 0);try{return new Ie(b,F).inc(N,oe).version}catch(le){return null}}s.diff=pn;function pn(b,N){if(Hr(b,N))return null;var F=Et(b),oe=Et(N),le="";if(F.prerelease.length||oe.prerelease.length){le="pre";var ge="prerelease"}for(var ye in F)if((ye==="major"||ye==="minor"||ye==="patch")&&F[ye]!==oe[ye])return le+ye;return ge}s.compareIdentifiers=Ht;var wr=/^[0-9]+$/;function Ht(b,N){var F=wr.test(b),oe=wr.test(N);return F&&oe&&(b=+b,N=+N),b===N?0:F&&!oe?-1:oe&&!F?1:b<N?-1:1}s.rcompareIdentifiers=mn;function mn(b,N){return Ht(N,b)}s.major=_r;function _r(b,N){return new Ie(b,N).major}s.minor=Kn;function Kn(b,N){return new Ie(b,N).minor}s.patch=fn;function fn(b,N){return new Ie(b,N).patch}s.compare=Rt;function Rt(b,N,F){return new Ie(b,F).compare(new Ie(N,F))}s.compareLoose=gn;function gn(b,N){return Rt(b,N,!0)}s.rcompare=vn;function vn(b,N,F){return Rt(N,b,F)}s.sort=Yn;function Yn(b,N){return b.sort(function(F,oe){return s.compare(F,oe,N)})}s.rsort=Xn;function Xn(b,N){return b.sort(function(F,oe){return s.rcompare(F,oe,N)})}s.gt=er;function er(b,N,F){return Rt(b,N,F)>0}s.lt=or;function or(b,N,F){return Rt(b,N,F)<0}s.eq=Hr;function Hr(b,N,F){return Rt(b,N,F)===0}s.neq=Er;function Er(b,N,F){return Rt(b,N,F)!==0}s.gte=pr;function pr(b,N,F){return Rt(b,N,F)>=0}s.lte=mr;function mr(b,N,F){return Rt(b,N,F)<=0}s.cmp=tr;function tr(b,N,F,oe){switch(N){case"===":return typeof b=="object"&&(b=b.version),typeof F=="object"&&(F=F.version),b===F;case"!==":return typeof b=="object"&&(b=b.version),typeof F=="object"&&(F=F.version),b!==F;case"":case"=":case"==":return Hr(b,F,oe);case"!=":return Er(b,F,oe);case">":return er(b,F,oe);case">=":return pr(b,F,oe);case"<":return or(b,F,oe);case"<=":return mr(b,F,oe);default:throw new TypeError("Invalid operator: "+N)}}s.Comparator=dt;function dt(b,N){if((!N||typeof N!="object")&&(N={loose:!!N,includePrerelease:!1}),b instanceof dt){if(b.loose===!!N.loose)return b;b=b.value}if(!(this instanceof dt))return new dt(b,N);c("comparator",b,N),this.options=N,this.loose=!!N.loose,this.parse(b),this.semver===nr?this.value="":this.value=this.operator+this.semver.version,c("comp",this)}var nr={};dt.prototype.parse=function(b){var N=this.options.loose?l[Nt]:l[Tt],F=b.match(N);if(!F)throw new TypeError("Invalid comparator: "+b);this.operator=F[1],this.operator==="="&&(this.operator=""),F[2]?this.semver=new Ie(F[2],this.options.loose):this.semver=nr},dt.prototype.toString=function(){return this.value},dt.prototype.test=function(b){return c("Comparator.test",b,this.options.loose),this.semver===nr?!0:(typeof b=="string"&&(b=new Ie(b,this.options)),tr(b,this.operator,this.semver,this.options))},dt.prototype.intersects=function(b,N){if(!(b instanceof dt))throw new TypeError("a Comparator is required");(!N||typeof N!="object")&&(N={loose:!!N,includePrerelease:!1});var F;if(this.operator==="")return F=new Qe(b.value,N),kr(this.value,F,N);if(b.operator==="")return F=new Qe(this.value,N),kr(b.semver,F,N);var oe=(this.operator===">="||this.operator===">")&&(b.operator===">="||b.operator===">"),le=(this.operator==="<="||this.operator==="<")&&(b.operator==="<="||b.operator==="<"),ge=this.semver.version===b.semver.version,ye=(this.operator===">="||this.operator==="<=")&&(b.operator===">="||b.operator==="<="),Me=tr(this.semver,"<",b.semver,N)&&(this.operator===">="||this.operator===">")&&(b.operator==="<="||b.operator==="<"),Oe=tr(this.semver,">",b.semver,N)&&(this.operator==="<="||this.operator==="<")&&(b.operator===">="||b.operator===">");return oe||le||ge&&ye||Me||Oe},s.Range=Qe;function Qe(b,N){if((!N||typeof N!="object")&&(N={loose:!!N,includePrerelease:!1}),b instanceof Qe)return b.loose===!!N.loose&&b.includePrerelease===!!N.includePrerelease?b:new Qe(b.raw,N);if(b instanceof dt)return new Qe(b.value,N);if(!(this instanceof Qe))return new Qe(b,N);if(this.options=N,this.loose=!!N.loose,this.includePrerelease=!!N.includePrerelease,this.raw=b,this.set=b.split(/\s*\|\|\s*/).map(function(F){return this.parseRange(F.trim())},this).filter(function(F){return F.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+b);this.format()}Qe.prototype.format=function(){return this.range=this.set.map(function(b){return b.join(" ").trim()}).join("||").trim(),this.range},Qe.prototype.toString=function(){return this.range},Qe.prototype.parseRange=function(b){var N=this.options.loose;b=b.trim();var F=N?l[et]:l[ar];b=b.replace(F,wi),c("hyphen replace",b),b=b.replace(l[gt],Zt),c("comparator trim",b,l[gt]),b=b.replace(l[Fe],Be),b=b.replace(l[lt],Je),b=b.split(/\s+/).join(" ");var oe=N?l[Nt]:l[Tt],le=b.split(" ").map(function(ge){return Or(ge,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(le=le.filter(function(ge){return!!ge.match(oe)})),le=le.map(function(ge){return new dt(ge,this.options)},this),le},Qe.prototype.intersects=function(b,N){if(!(b instanceof Qe))throw new TypeError("a Range is required");return this.set.some(function(F){return F.every(function(oe){return b.set.some(function(le){return le.every(function(ge){return oe.intersects(ge,N)})})})})},s.toComparators=yn;function yn(b,N){return new Qe(b,N).set.map(function(F){return F.map(function(oe){return oe.value}).join(" ").trim().split(" ")})}function Or(b,N){return c("comp",b,N),b=bi(b,N),c("caret",b),b=Wr(b,N),c("tildes",b),b=bn(b,N),c("xrange",b),b=Sr(b,N),c("stars",b),b}function st(b){return!b||b.toLowerCase()==="x"||b==="*"}function Wr(b,N){return b.trim().split(/\s+/).map(function(F){return Jn(F,N)}).join(" ")}function Jn(b,N){var F=N.loose?l[Xe]:l[Ve];return b.replace(F,function(oe,le,ge,ye,Me){c("tilde",b,oe,le,ge,ye,Me);var Oe;return st(le)?Oe="":st(ge)?Oe=">="+le+".0.0 <"+(+le+1)+".0.0":st(ye)?Oe=">="+le+"."+ge+".0 <"+le+"."+(+ge+1)+".0":Me?(c("replaceTilde pr",Me),Oe=">="+le+"."+ge+"."+ye+"-"+Me+" <"+le+"."+(+ge+1)+".0"):Oe=">="+le+"."+ge+"."+ye+" <"+le+"."+(+ge+1)+".0",c("tilde return",Oe),Oe})}function bi(b,N){return b.trim().split(/\s+/).map(function(F){return Zn(F,N)}).join(" ")}function Zn(b,N){c("caret",b,N);var F=N.loose?l[qt]:l[kt];return b.replace(F,function(oe,le,ge,ye,Me){c("caret",b,oe,le,ge,ye,Me);var Oe;return st(le)?Oe="":st(ge)?Oe=">="+le+".0.0 <"+(+le+1)+".0.0":st(ye)?le==="0"?Oe=">="+le+"."+ge+".0 <"+le+"."+(+ge+1)+".0":Oe=">="+le+"."+ge+".0 <"+(+le+1)+".0.0":Me?(c("replaceCaret pr",Me),le==="0"?ge==="0"?Oe=">="+le+"."+ge+"."+ye+"-"+Me+" <"+le+"."+ge+"."+(+ye+1):Oe=">="+le+"."+ge+"."+ye+"-"+Me+" <"+le+"."+(+ge+1)+".0":Oe=">="+le+"."+ge+"."+ye+"-"+Me+" <"+(+le+1)+".0.0"):(c("no pr"),le==="0"?ge==="0"?Oe=">="+le+"."+ge+"."+ye+" <"+le+"."+ge+"."+(+ye+1):Oe=">="+le+"."+ge+"."+ye+" <"+le+"."+(+ge+1)+".0":Oe=">="+le+"."+ge+"."+ye+" <"+(+le+1)+".0.0"),c("caret return",Oe),Oe})}function bn(b,N){return c("replaceXRanges",b,N),b.split(/\s+/).map(function(F){return In(F,N)}).join(" ")}function In(b,N){b=b.trim();var F=N.loose?l[at]:l[ut];return b.replace(F,function(oe,le,ge,ye,Me,Oe){c("xRange",b,oe,le,ge,ye,Me,Oe);var pt=st(ge),vt=pt||st(ye),mt=vt||st(Me),ht=mt;return le==="="&&ht&&(le=""),pt?le===">"||le==="<"?oe="<0.0.0":oe="*":le&&ht?(vt&&(ye=0),Me=0,le===">"?(le=">=",vt?(ge=+ge+1,ye=0,Me=0):(ye=+ye+1,Me=0)):le==="<="&&(le="<",vt?ge=+ge+1:ye=+ye+1),oe=le+ge+"."+ye+"."+Me):vt?oe=">="+ge+".0.0 <"+(+ge+1)+".0.0":mt&&(oe=">="+ge+"."+ye+".0 <"+ge+"."+(+ye+1)+".0"),c("xRange return",oe),oe})}function Sr(b,N){return c("replaceStars",b,N),b.trim().replace(l[Ze],"")}function wi(b,N,F,oe,le,ge,ye,Me,Oe,pt,vt,mt,ht){return st(F)?N="":st(oe)?N=">="+F+".0.0":st(le)?N=">="+F+"."+oe+".0":N=">="+N,st(Oe)?Me="":st(pt)?Me="<"+(+Oe+1)+".0.0":st(vt)?Me="<"+Oe+"."+(+pt+1)+".0":mt?Me="<="+Oe+"."+pt+"."+vt+"-"+mt:Me="<="+Me,(N+" "+Me).trim()}Qe.prototype.test=function(b){if(!b)return!1;typeof b=="string"&&(b=new Ie(b,this.options));for(var N=0;N<this.set.length;N++)if(_i(this.set[N],b,this.options))return!0;return!1};function _i(b,N,F){for(var oe=0;oe<b.length;oe++)if(!b[oe].test(N))return!1;if(N.prerelease.length&&!F.includePrerelease){for(oe=0;oe<b.length;oe++)if(c(b[oe].semver),b[oe].semver!==nr&&b[oe].semver.prerelease.length>0){var le=b[oe].semver;if(le.major===N.major&&le.minor===N.minor&&le.patch===N.patch)return!0}return!1}return!0}s.satisfies=kr;function kr(b,N,F){try{N=new Qe(N,F)}catch(oe){return!1}return N.test(b)}s.maxSatisfying=ei;function ei(b,N,F){var oe=null,le=null;try{var ge=new Qe(N,F)}catch(ye){return null}return b.forEach(function(ye){ge.test(ye)&&(!oe||le.compare(ye)===-1)&&(oe=ye,le=new Ie(oe,F))}),oe}s.minSatisfying=ti;function ti(b,N,F){var oe=null,le=null;try{var ge=new Qe(N,F)}catch(ye){return null}return b.forEach(function(ye){ge.test(ye)&&(!oe||le.compare(ye)===1)&&(oe=ye,le=new Ie(oe,F))}),oe}s.minVersion=rn;function rn(b,N){b=new Qe(b,N);var F=new Ie("0.0.0");if(b.test(F)||(F=new Ie("0.0.0-0"),b.test(F)))return F;F=null;for(var oe=0;oe<b.set.length;++oe){var le=b.set[oe];le.forEach(function(ge){var ye=new Ie(ge.semver.version);switch(ge.operator){case">":ye.prerelease.length===0?ye.patch++:ye.prerelease.push(0),ye.raw=ye.format();case"":case">=":(!F||er(F,ye))&&(F=ye);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+ge.operator)}})}return F&&b.test(F)?F:null}s.validRange=Ei;function Ei(b,N){try{return new Qe(b,N).range||"*"}catch(F){return null}}s.ltr=Si;function Si(b,N,F){return xr(b,N,"<",F)}s.gtr=ki;function ki(b,N,F){return xr(b,N,">",F)}s.outside=xr;function xr(b,N,F,oe){b=new Ie(b,oe),N=new Qe(N,oe);var le,ge,ye,Me,Oe;switch(F){case">":le=er,ge=mr,ye=or,Me=">",Oe=">=";break;case"<":le=or,ge=pr,ye=er,Me="<",Oe="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(kr(b,N,oe))return!1;for(var pt=0;pt<N.set.length;++pt){var vt=N.set[pt],mt=null,ht=null;if(vt.forEach(function(At){At.semver===nr&&(At=new dt(">=0.0.0")),mt=mt||At,ht=ht||At,le(At.semver,mt.semver,oe)?mt=At:ye(At.semver,ht.semver,oe)&&(ht=At)}),mt.operator===Me||mt.operator===Oe||(!ht.operator||ht.operator===Me)&&ge(b,ht.semver)||ht.operator===Oe&&ye(b,ht.semver))return!1}return!0}s.prerelease=Ti;function Ti(b,N){var F=Et(b,N);return F&&F.prerelease.length?F.prerelease:null}s.intersects=Kr;function Kr(b,N,F){return b=new Qe(b,F),N=new Qe(N,F),b.intersects(N)}s.coerce=Dn;function Dn(b){if(b instanceof Ie)return b;if(typeof b!="string")return null;var N=b.match(l[Ct]);return N==null?null:Et(N[1]+"."+(N[2]||"0")+"."+(N[3]||"0"))}}),us=O((s,k)=>{"use strict";function c(y){return typeof y=="function"}var v=console.error.bind(console);function _(y,f,w){var E=!!y[f]&&y.propertyIsEnumerable(f);Object.defineProperty(y,f,{configurable:!0,enumerable:E,writable:!0,value:w})}function p(y){y&&y.logger&&(c(y.logger)?v=y.logger:v("new logger isn't a function, not replacing"))}function l(y,f,w){if(!y||!y[f]){v("no original function "+f+" to wrap");return}if(!w){v("no wrapper function"),v(new Error().stack);return}if(!c(y[f])||!c(w)){v("original object and wrapper must be functions");return}var E=y[f],R=w(E,f);return _(R,"__original",E),_(R,"__unwrap",function(){y[f]===R&&_(y,f,E)}),_(R,"__wrapped",!0),_(y,f,R),R}function u(y,f,w){if(y)Array.isArray(y)||(y=[y]);else{v("must provide one or more modules to patch"),v(new Error().stack);return}if(!(f&&Array.isArray(f))){v("must provide one or more functions to wrap on modules");return}y.forEach(function(E){f.forEach(function(R){l(E,R,w)})})}function h(y,f){if(!y||!y[f]){v("no function to unwrap."),v(new Error().stack);return}if(!y[f].__unwrap)v("no original to unwrap to -- has "+f+" already been unwrapped?");else return y[f].__unwrap()}function g(y,f){if(y)Array.isArray(y)||(y=[y]);else{v("must provide one or more modules to patch"),v(new Error().stack);return}if(!(f&&Array.isArray(f))){v("must provide one or more functions to unwrap on modules");return}y.forEach(function(w){f.forEach(function(E){h(w,E)})})}p.wrap=l,p.massWrap=u,p.unwrap=h,p.massUnwrap=g,k.exports=p}),ls=O((s,k)=>{"use strict";var c=us(),v=c.wrap,_=c.unwrap,p="wrap@before";function l(f,w,E){var R=!!f[w]&&f.propertyIsEnumerable(w);Object.defineProperty(f,w,{configurable:!0,enumerable:R,writable:!0,value:E})}function u(f,w){for(var E=w.length,R=0;R<E;R++){var C=w[R],D=f[p];if(typeof D=="function")D(C);else if(Array.isArray(D))for(var x=D.length,Q=0;Q<x;Q++)D[Q](C)}}function h(f,w){var E;return E=f._events&&f._events[w],Array.isArray(E)||(E?E=[E]:E=[]),E}function g(f,w,E){var R=h(f,w),C=R.filter(function(D){return E.indexOf(D)===-1});C.length>0&&u(f,C)}function y(f,w){if(f){var E=f;if(typeof f=="function")E=w(f);else if(Array.isArray(f)){E=[];for(var R=0;R<f.length;R++)E[R]=w(f[R])}return E}}k.exports=function(f,w,E){if(!f||!f.on||!f.addListener||!f.removeListener||!f.emit)throw new Error("can only wrap real EEs");if(!w)throw new Error("must have function to run on listener addition");if(!E)throw new Error("must have function to wrap listeners when emitting");function R(D){return function(x,Q){var te=h(this,x).slice();try{var K=D.call(this,x,Q);return g(this,x,te),K}finally{this.on.__wrapped||v(this,"on",R),this.addListener.__wrapped||v(this,"addListener",R)}}}function C(D){return function(x){if(!this._events||!this._events[x])return D.apply(this,arguments);var Q=this._events[x];function te(K){return function(){this._events[x]=Q;try{return K.apply(this,arguments)}finally{Q=this._events[x],this._events[x]=y(Q,E)}}}v(this,"removeListener",te);try{return this._events[x]=y(Q,E),D.apply(this,arguments)}finally{_(this,"removeListener"),this._events[x]=Q}}}f[p]?typeof f[p]=="function"?l(f,p,[f[p],w]):Array.isArray(f[p])&&f[p].push(w):l(f,p,w),f.__wrapped||(v(f,"addListener",R),v(f,"on",R),v(f,"emit",C),l(f,"__unwrap",function(){_(f,"addListener"),_(f,"on"),_(f,"emit"),delete f[p],delete f.__wrapped}),l(f,"__wrapped",!0))}}),Rl=O((s,k)=>{"use strict";var c=q(1669),v=q(2357),_=ls(),p=q(7303),l="cls@contexts",u="error@context",h=process.env.DEBUG_CLS_HOOKED,g=-1;k.exports={getNamespace:f,createNamespace:w,destroyNamespace:E,reset:R,ERROR_SYMBOL:u};function y(D){this.name=D,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}y.prototype.set=function(D,x){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[D]=x,h){let Q=" ".repeat(this._indent<0?0:this._indent);C(Q+"CONTEXT-SET KEY:"+D+"="+x+" in ns:"+this.name+" currentUid:"+g+" active:"+c.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return x},y.prototype.get=function(D){if(!this.active){if(h){let x=p.currentId(),Q=p.triggerAsyncId(),te=" ".repeat(this._indent<0?0:this._indent);C(`${te}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${D}=undefined currentUid:${g} asyncHooksCurrentId:${x} triggerId:${Q} len:${this._set.length}`)}return}if(h){let x=p.executionAsyncId(),Q=p.triggerAsyncId(),te=" ".repeat(this._indent<0?0:this._indent);C(te+"CONTEXT-GETTING KEY:"+D+"="+this.active[D]+" ("+this.name+") currentUid:"+g+" active:"+c.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),C(`${te}CONTEXT-GETTING KEY: (${this.name}) ${D}=${this.active[D]} currentUid:${g} asyncHooksCurrentId:${x} triggerId:${Q} len:${this._set.length} active:${c.inspect(this.active)}`)}return this.active[D]},y.prototype.createContext=function(){let D=Object.create(this.active?this.active:Object.prototype);if(D._ns_name=this.name,D.id=g,h){let x=p.executionAsyncId(),Q=p.triggerAsyncId(),te=" ".repeat(this._indent<0?0:this._indent);C(`${te}CONTEXT-CREATED Context: (${this.name}) currentUid:${g} asyncHooksCurrentId:${x} triggerId:${Q} len:${this._set.length} context:${c.inspect(D,{showHidden:!0,depth:2,colors:!0})}`)}return D},y.prototype.run=function(D){let x=this.createContext();this.enter(x);try{if(h){let Q=p.triggerAsyncId(),te=p.executionAsyncId(),K=" ".repeat(this._indent<0?0:this._indent);C(`${K}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${g} triggerId:${Q} asyncHooksCurrentId:${te} len:${this._set.length} context:${c.inspect(x)}`)}return D(x),x}catch(Q){throw Q&&(Q[u]=x),Q}finally{if(h){let Q=p.triggerAsyncId(),te=p.executionAsyncId(),K=" ".repeat(this._indent<0?0:this._indent);C(`${K}CONTEXT-RUN END: (${this.name}) currentUid:${g} triggerId:${Q} asyncHooksCurrentId:${te} len:${this._set.length} ${c.inspect(x)}`)}this.exit(x)}},y.prototype.runAndReturn=function(D){let x;return this.run(function(Q){x=D(Q)}),x},y.prototype.runPromise=function(D){let x=this.createContext();this.enter(x);let Q=D(x);if(!Q||!Q.then||!Q.catch)throw new Error("fn must return a promise.");return h&&C("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+g+" len:"+this._set.length+" "+c.inspect(x)),Q.then(te=>(h&&C("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+g+" len:"+this._set.length+" "+c.inspect(x)),this.exit(x),te)).catch(te=>{throw te[u]=x,h&&C("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+g+" len:"+this._set.length+" "+c.inspect(x)),this.exit(x),te})},y.prototype.bind=function(D,x){x||(this.active?x=this.active:x=this.createContext());let Q=this;return function(){Q.enter(x);try{return D.apply(this,arguments)}catch(te){throw te&&(te[u]=x),te}finally{Q.exit(x)}}},y.prototype.enter=function(D){if(v.ok(D,"context must be provided for entering"),h){let x=p.executionAsyncId(),Q=p.triggerAsyncId(),te=" ".repeat(this._indent<0?0:this._indent);C(`${te}CONTEXT-ENTER: (${this.name}) currentUid:${g} triggerId:${Q} asyncHooksCurrentId:${x} len:${this._set.length} ${c.inspect(D)}`)}this._set.push(this.active),this.active=D},y.prototype.exit=function(D){if(v.ok(D,"context must be provided for exiting"),h){let Q=p.executionAsyncId(),te=p.triggerAsyncId(),K=" ".repeat(this._indent<0?0:this._indent);C(`${K}CONTEXT-EXIT: (${this.name}) currentUid:${g} triggerId:${te} asyncHooksCurrentId:${Q} len:${this._set.length} ${c.inspect(D)}`)}if(this.active===D){v.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let x=this._set.lastIndexOf(D);x<0?(h&&C("??ERROR?? context exiting but not entered - ignoring: "+c.inspect(D)),v.ok(x>=0,`context not currently entered; can't exit. 
`+c.inspect(this)+`
`+c.inspect(D))):(v.ok(x,"can't remove top context"),this._set.splice(x,1))},y.prototype.bindEmitter=function(D){v.ok(D.on&&D.addListener&&D.emit,"can only bind real EEs");let x=this,Q="context@"+this.name;function te(ue){!ue||(ue[l]||(ue[l]=Object.create(null)),ue[l][Q]={namespace:x,context:x.active})}function K(ue){if(!(ue&&ue[l]))return ue;let _e=ue,Te=ue[l];return Object.keys(Te).forEach(function(Re){let xe=Te[Re];_e=xe.namespace.bind(_e,xe.context)}),_e}_(D,te,K)},y.prototype.fromException=function(D){return D[u]};function f(D){return process.namespaces[D]}function w(D){v.ok(D,"namespace must be given a name."),h&&C(`NS-CREATING NAMESPACE (${D})`);let x=new y(D);return x.id=g,p.createHook({init(Q,te,K,ue){if(g=p.executionAsyncId(),x.active){if(x._contexts.set(Q,x.active),h){let _e=" ".repeat(x._indent<0?0:x._indent);C(`${_e}INIT [${te}] (${D}) asyncId:${Q} currentUid:${g} triggerId:${K} active:${c.inspect(x.active,{showHidden:!0,depth:2,colors:!0})} resource:${ue}`)}}else if(g===0){let _e=p.triggerAsyncId(),Te=x._contexts.get(_e);if(Te){if(x._contexts.set(Q,Te),h){let Re=" ".repeat(x._indent<0?0:x._indent);C(`${Re}INIT USING CONTEXT FROM TRIGGERID [${te}] (${D}) asyncId:${Q} currentUid:${g} triggerId:${_e} active:${c.inspect(x.active,{showHidden:!0,depth:2,colors:!0})} resource:${ue}`)}}else if(h){let Re=" ".repeat(x._indent<0?0:x._indent);C(`${Re}INIT MISSING CONTEXT [${te}] (${D}) asyncId:${Q} currentUid:${g} triggerId:${_e} active:${c.inspect(x.active,{showHidden:!0,depth:2,colors:!0})} resource:${ue}`)}}if(h&&te==="PROMISE"){C(c.inspect(ue,{showHidden:!0}));let _e=ue.parentId,Te=" ".repeat(x._indent<0?0:x._indent);C(`${Te}INIT RESOURCE-PROMISE [${te}] (${D}) parentId:${_e} asyncId:${Q} currentUid:${g} triggerId:${K} active:${c.inspect(x.active,{showHidden:!0,depth:2,colors:!0})} resource:${ue}`)}},before(Q){g=p.executionAsyncId();let te;if(te=x._contexts.get(Q)||x._contexts.get(g),te){if(h){let K=p.triggerAsyncId(),ue=" ".repeat(x._indent<0?0:x._indent);C(`${ue}BEFORE (${D}) asyncId:${Q} currentUid:${g} triggerId:${K} active:${c.inspect(x.active,{showHidden:!0,depth:2,colors:!0})} context:${c.inspect(te)}`),x._indent+=2}x.enter(te)}else if(h){let K=p.triggerAsyncId(),ue=" ".repeat(x._indent<0?0:x._indent);C(`${ue}BEFORE MISSING CONTEXT (${D}) asyncId:${Q} currentUid:${g} triggerId:${K} active:${c.inspect(x.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${c.inspect(x._contexts,{showHidden:!0,depth:2,colors:!0})}`),x._indent+=2}},after(Q){g=p.executionAsyncId();let te;if(te=x._contexts.get(Q)||x._contexts.get(g),te){if(h){let K=p.triggerAsyncId();x._indent-=2;let ue=" ".repeat(x._indent<0?0:x._indent);C(`${ue}AFTER (${D}) asyncId:${Q} currentUid:${g} triggerId:${K} active:${c.inspect(x.active,{showHidden:!0,depth:2,colors:!0})} context:${c.inspect(te)}`)}x.exit(te)}else if(h){let K=p.triggerAsyncId();x._indent-=2;let ue=" ".repeat(x._indent<0?0:x._indent);C(`${ue}AFTER MISSING CONTEXT (${D}) asyncId:${Q} currentUid:${g} triggerId:${K} active:${c.inspect(x.active,{showHidden:!0,depth:2,colors:!0})} context:${c.inspect(te)}`)}},destroy(Q){if(g=p.executionAsyncId(),h){let te=p.triggerAsyncId(),K=" ".repeat(x._indent<0?0:x._indent);C(`${K}DESTROY (${D}) currentUid:${g} asyncId:${Q} triggerId:${te} active:${c.inspect(x.active,{showHidden:!0,depth:2,colors:!0})} context:${c.inspect(x._contexts.get(g))}`)}x._contexts.delete(Q)}}).enable(),process.namespaces[D]=x,x}function E(D){let x=f(D);v.ok(x,`can't delete nonexistent namespace! "`+D+'"'),v.ok(x.id,"don't assign to process.namespaces directly! "+c.inspect(x)),process.namespaces[D]=null}function R(){process.namespaces&&Object.keys(process.namespaces).forEach(function(D){E(D)}),process.namespaces=Object.create(null)}process.namespaces={};function C(...D){h&&process._rawDebug(`${c.format(...D)}`)}}),Cl=O((s,k)=>{"use strict";function c(){}k.exports=function(){let v=this._hooks,_=this._state,p=process.nextTick;process.nextTick=function(){if(!_.enabled)return p.apply(process,arguments);let l=new Array(arguments.length);for(let y=0;y<arguments.length;y++)l[y]=arguments[y];let u=l[0];if(typeof u!="function")throw new TypeError("callback is not a function");let h=new c,g=--_.counter;return v.init.call(h,g,0,null,null),l[0]=function(){v.pre.call(h,g);let y=!0;try{u.apply(this,arguments),y=!1}finally{y&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){v.post.call(h,g,!0),v.destroy.call(null,g)})}v.post.call(h,g,!1),v.destroy.call(null,g)},p.apply(process,l)}}}),jn=O((s,k)=>{"use strict";function c(){}k.exports=function(){let v=this._hooks,_=this._state,p=global.Promise,l=p.prototype.then;p.prototype.then=y;function u(f,w,E,R){return typeof f!="function"?R?h(E):g(E):function(){v.pre.call(w,E);try{return f.apply(this,arguments)}finally{v.post.call(w,E,!1),v.destroy.call(null,E)}}}function h(f){return function(w){return v.destroy.call(null,f),w}}function g(f){return function(w){throw v.destroy.call(null,f),w}}function y(f,w){if(!_.enabled)return l.call(this,f,w);let E=new c,R=--_.counter;return v.init.call(E,R,0,null,null),l.call(this,u(f,E,R,!0),u(w,E,R,!1))}}}),Pl=O((s,k)=>{"use strict";var c=q(8213);function v(){}function _(){}function p(){}var l=new Map,u=new Map,h=new Map,g=null,y=!1;k.exports=function(){f(this._hooks,this._state,"setTimeout","clearTimeout",v,l,!0),f(this._hooks,this._state,"setInterval","clearInterval",_,u,!1),f(this._hooks,this._state,"setImmediate","clearImmediate",p,h,!0),global.setTimeout=c.setTimeout,global.setInterval=c.setInterval,global.setImmediate=c.setImmediate,global.clearTimeout=c.clearTimeout,global.clearInterval=c.clearInterval,global.clearImmediate=c.clearImmediate};function f(w,E,R,C,D,x,Q){let te=c[R],K=c[C];c[R]=function(){if(!E.enabled)return te.apply(c,arguments);let ue=new Array(arguments.length);for(let qe=0;qe<arguments.length;qe++)ue[qe]=arguments[qe];let _e=ue[0];if(typeof _e!="function")throw new TypeError('"callback" argument must be a function');let Te=new D,Re=--E.counter,xe;return w.init.call(Te,Re,0,null,null),ue[0]=function(){g=xe,w.pre.call(Te,Re);let qe=!0;try{_e.apply(this,arguments),qe=!1}finally{qe&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){w.post.call(Te,Re,!0),x.delete(xe),w.destroy.call(null,Re)})}w.post.call(Te,Re,!1),g=null,(Q||y)&&(y=!1,x.delete(xe),w.destroy.call(null,Re))},xe=te.apply(c,ue),x.set(xe,Re),xe},c[C]=function(ue){if(g===ue&&ue!==null)y=!0;else if(x.has(ue)){let _e=x.get(ue);x.delete(ue),w.destroy.call(null,_e)}K.apply(c,arguments)}}}),Zr=O((s,k)=>{k.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}}),Nn=O((s,k)=>{"use strict";var c=process.binding("async_wrap"),v=c.Providers.TIMERWRAP,_={nextTick:Cl(),promise:jn(),timers:Pl()},p=new Set;function l(){this.enabled=!1,this.counter=0}function u(){let y=this.initFns=[],f=this.preFns=[],w=this.postFns=[],E=this.destroyFns=[];this.init=function(R,C,D,x){if(C===v){p.add(R);return}for(let Q of y)Q(R,this,C,D,x)},this.pre=function(R){if(!p.has(R))for(let C of f)C(R,this)},this.post=function(R,C){if(!p.has(R))for(let D of w)D(R,this,C)},this.destroy=function(R){if(p.has(R)){p.delete(R);return}for(let C of E)C(R)}}u.prototype.add=function(y){y.init&&this.initFns.push(y.init),y.pre&&this.preFns.push(y.pre),y.post&&this.postFns.push(y.post),y.destroy&&this.destroyFns.push(y.destroy)};function h(y,f){let w=y.indexOf(f);w!==-1&&y.splice(w,1)}u.prototype.remove=function(y){y.init&&h(this.initFns,y.init),y.pre&&h(this.preFns,y.pre),y.post&&h(this.postFns,y.post),y.destroy&&h(this.destroyFns,y.destroy)};function g(){this._state=new l,this._hooks=new u,this.version=Zr().version,this.providers=c.Providers;for(let y of Object.keys(_))_[y].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),c.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}k.exports=g,g.prototype.addHooks=function(y){this._hooks.add(y)},g.prototype.removeHooks=function(y){this._hooks.remove(y)},g.prototype.enable=function(){this._state.enabled=!0,c.enable()},g.prototype.disable=function(){this._state.enabled=!1,c.disable()}}),Us=O((s,k)=>{k.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}}),Nl=O((s,k)=>{function c(v){try{return Error.prototype.toString.call(v)}catch(_){try{return"<error: "+_+">"}catch(p){return"<error>"}}}k.exports=function(v,_){var p=[];p.push(c(v));for(var l=0;l<_.length;l++){var u=_[l],h;try{h=u.toString()}catch(g){try{h="<error: "+g+">"}catch(y){h="<error>"}}p.push("    at "+h)}return p.join(`
`)}}),Al=O((s,k)=>{var c=Nl();function v(){this.extend=new l,this.filter=new l,this.format=new u,this.version=Us().version}var _=!1;v.prototype.callSite=function f(w){w||(w={}),_=!0;var E={};Error.captureStackTrace(E,f);var R=E.stack;return _=!1,R=R.slice(w.slice||0),w.extend&&(R=this.extend._modify(E,R)),w.filter&&(R=this.filter._modify(E,R)),R};var p=new v;function l(){this._modifiers=[]}l.prototype._modify=function(f,w){for(var E=0,R=this._modifiers.length;E<R;E++)w=this._modifiers[E](f,w);return w},l.prototype.attach=function(f){this._modifiers.push(f)},l.prototype.deattach=function(f){var w=this._modifiers.indexOf(f);return w===-1?!1:(this._modifiers.splice(w,1),!0)};function u(){this._formater=c,this._previous=void 0}u.prototype.replace=function(f){f?this._formater=f:this.restore()},u.prototype.restore=function(){this._formater=c,this._previous=void 0},u.prototype._backup=function(){this._previous=this._formater},u.prototype._roolback=function(){this._previous===c?this.replace(void 0):this.replace(this._previous),this._previous=void 0},Error.prepareStackTrace&&p.format.replace(Error.prepareStackTrace);var h=!1;function g(f,w){if(_)return w;if(h)return c(f,w);var E=w.concat();E=p.extend._modify(f,E),E=p.filter._modify(f,E),E=E.slice(0,Error.stackTraceLimit),Object.isExtensible(f)&&Object.getOwnPropertyDescriptor(f,"callSite")===void 0&&(f.callSite={original:w,mutated:E}),h=!0;var R=p.format._formater(f,E);return h=!1,R}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return g},set:function(f){f===g?p.format._roolback():(p.format._backup(),p.format.replace(f))}});function y(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:y,set:function(f){Object.defineProperty(this,"callSite",{value:f,writable:!0,configurable:!0})},configurable:!0}),k.exports=p}),cs=O((s,k)=>{if(global._stackChain)if(global._stackChain.version===Us().version)k.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else k.exports=global._stackChain=Al()}),Il=O((s,k)=>{"use strict";var c=Nn();if(global._asyncHook)if(global._asyncHook.version===Zr().version)k.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else cs().filter.attach(function(v,_){return _.filter(function(p){let l=p.getFileName();return!(l&&l.slice(0,__dirname.length)===__dirname)})}),k.exports=global._asyncHook=new c}),yi=O((s,k)=>{"use strict";var c=q(1669),v=q(2357),_=ls(),p=Il(),l="cls@contexts",u="error@context",h=[];for(let K in p.providers)h[p.providers[K]]=K;var g=process.env.DEBUG_CLS_HOOKED,y=-1;k.exports={getNamespace:w,createNamespace:E,destroyNamespace:R,reset:C,ERROR_SYMBOL:u};function f(K){this.name=K,this.active=null,this._set=[],this.id=null,this._contexts=new Map}f.prototype.set=function(K,ue){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return g&&D("    SETTING KEY:"+K+"="+ue+" in ns:"+this.name+" uid:"+y+" active:"+c.inspect(this.active,!0)),this.active[K]=ue,ue},f.prototype.get=function(K){if(!this.active){g&&D("    GETTING KEY:"+K+"=undefined "+this.name+" uid:"+y+" active:"+c.inspect(this.active,!0));return}return g&&D("    GETTING KEY:"+K+"="+this.active[K]+" "+this.name+" uid:"+y+" active:"+c.inspect(this.active,!0)),this.active[K]},f.prototype.createContext=function(){g&&D("   CREATING Context: "+this.name+" uid:"+y+" len:"+this._set.length+"  active:"+c.inspect(this.active,!0,2,!0));let K=Object.create(this.active?this.active:Object.prototype);return K._ns_name=this.name,K.id=y,g&&D("   CREATED Context: "+this.name+" uid:"+y+" len:"+this._set.length+"  context:"+c.inspect(K,!0,2,!0)),K},f.prototype.run=function(K){let ue=this.createContext();this.enter(ue);try{return g&&D(" BEFORE RUN: "+this.name+" uid:"+y+" len:"+this._set.length+" "+c.inspect(ue)),K(ue),ue}catch(_e){throw _e&&(_e[u]=ue),_e}finally{g&&D(" AFTER RUN: "+this.name+" uid:"+y+" len:"+this._set.length+" "+c.inspect(ue)),this.exit(ue)}},f.prototype.runAndReturn=function(K){var ue;return this.run(function(_e){ue=K(_e)}),ue},f.prototype.runPromise=function(K){let ue=this.createContext();this.enter(ue);let _e=K(ue);if(!_e||!_e.then||!_e.catch)throw new Error("fn must return a promise.");return g&&D(" BEFORE runPromise: "+this.name+" uid:"+y+" len:"+this._set.length+" "+c.inspect(ue)),_e.then(Te=>(g&&D(" AFTER runPromise: "+this.name+" uid:"+y+" len:"+this._set.length+" "+c.inspect(ue)),this.exit(ue),Te)).catch(Te=>{throw Te[u]=ue,g&&D(" AFTER runPromise: "+this.name+" uid:"+y+" len:"+this._set.length+" "+c.inspect(ue)),this.exit(ue),Te})},f.prototype.bind=function(K,ue){ue||(this.active?ue=this.active:ue=this.createContext());let _e=this;return function(){_e.enter(ue);try{return K.apply(this,arguments)}catch(Te){throw Te&&(Te[u]=ue),Te}finally{_e.exit(ue)}}},f.prototype.enter=function(K){v.ok(K,"context must be provided for entering"),g&&D("  ENTER "+this.name+" uid:"+y+" len:"+this._set.length+" context: "+c.inspect(K)),this._set.push(this.active),this.active=K},f.prototype.exit=function(K){if(v.ok(K,"context must be provided for exiting"),g&&D("  EXIT "+this.name+" uid:"+y+" len:"+this._set.length+" context: "+c.inspect(K)),this.active===K){v.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let ue=this._set.lastIndexOf(K);ue<0?(g&&D("??ERROR?? context exiting but not entered - ignoring: "+c.inspect(K)),v.ok(ue>=0,`context not currently entered; can't exit. 
`+c.inspect(this)+`
`+c.inspect(K))):(v.ok(ue,"can't remove top context"),this._set.splice(ue,1))},f.prototype.bindEmitter=function(K){v.ok(K.on&&K.addListener&&K.emit,"can only bind real EEs");let ue=this,_e="context@"+this.name;function Te(xe){!xe||(xe[l]||(xe[l]=Object.create(null)),xe[l][_e]={namespace:ue,context:ue.active})}function Re(xe){if(!(xe&&xe[l]))return xe;let qe=xe,He=xe[l];return Object.keys(He).forEach(function(ze){let ut=He[ze];qe=ut.namespace.bind(qe,ut.context)}),qe}_(K,Te,Re)},f.prototype.fromException=function(K){return K[u]};function w(K){return process.namespaces[K]}function E(K){v.ok(K,"namespace must be given a name."),g&&D("CREATING NAMESPACE "+K);let ue=new f(K);return ue.id=y,p.addHooks({init(_e,Te,Re,xe,qe){y=_e,xe?(ue._contexts.set(_e,ue._contexts.get(xe)),g&&D("PARENTID: "+K+" uid:"+_e+" parent:"+xe+" provider:"+Re)):ue._contexts.set(y,ue.active),g&&D("INIT "+K+" uid:"+_e+" parent:"+xe+" provider:"+h[Re]+" active:"+c.inspect(ue.active,!0))},pre(_e,Te){y=_e;let Re=ue._contexts.get(_e);Re?(g&&D(" PRE "+K+" uid:"+_e+" handle:"+x(Te)+" context:"+c.inspect(Re)),ue.enter(Re)):g&&D(" PRE MISSING CONTEXT "+K+" uid:"+_e+" handle:"+x(Te))},post(_e,Te){y=_e;let Re=ue._contexts.get(_e);Re?(g&&D(" POST "+K+" uid:"+_e+" handle:"+x(Te)+" context:"+c.inspect(Re)),ue.exit(Re)):g&&D(" POST MISSING CONTEXT "+K+" uid:"+_e+" handle:"+x(Te))},destroy(_e){y=_e,g&&D("DESTROY "+K+" uid:"+_e+" context:"+c.inspect(ue._contexts.get(y))+" active:"+c.inspect(ue.active,!0)),ue._contexts.delete(_e)}}),process.namespaces[K]=ue,ue}function R(K){let ue=w(K);v.ok(ue,`can't delete nonexistent namespace! "`+K+'"'),v.ok(ue.id,"don't assign to process.namespaces directly! "+c.inspect(ue)),process.namespaces[K]=null}function C(){process.namespaces&&Object.keys(process.namespaces).forEach(function(K){R(K)}),process.namespaces=Object.create(null)}process.namespaces={},p._state&&!p._state.enabled&&p.enable();function D(K){process.env.DEBUG&&process._rawDebug(K)}function x(K){if(!K)return K;if(typeof K=="function")return K.name?K.name:(K.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(K.constructor&&K.constructor.name)return K.constructor.name}if(g){Q=cs();for(te in Q.filter._modifiers)Q.filter.deattach(te)}var Q,te}),Dl=O((s,k)=>{"use strict";var c=Ra();process&&c.gte(process.versions.node,"8.0.0")?k.exports=Rl():k.exports=yi()}),ds=O((s,k)=>{s=k.exports=Ie;var c;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?c=function(){var b=Array.prototype.slice.call(arguments,0);b.unshift("SEMVER"),console.log.apply(console,b)}:c=function(){},s.SEMVER_SPEC_VERSION="2.0.0";var v=256,_=Number.MAX_SAFE_INTEGER||9007199254740991,p=16,l=s.re=[],u=s.src=[],h=0,g=h++;u[g]="0|[1-9]\\d*";var y=h++;u[y]="[0-9]+";var f=h++;u[f]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var w=h++;u[w]="("+u[g]+")\\.("+u[g]+")\\.("+u[g]+")";var E=h++;u[E]="("+u[y]+")\\.("+u[y]+")\\.("+u[y]+")";var R=h++;u[R]="(?:"+u[g]+"|"+u[f]+")";var C=h++;u[C]="(?:"+u[y]+"|"+u[f]+")";var D=h++;u[D]="(?:-("+u[R]+"(?:\\."+u[R]+")*))";var x=h++;u[x]="(?:-?("+u[C]+"(?:\\."+u[C]+")*))";var Q=h++;u[Q]="[0-9A-Za-z-]+";var te=h++;u[te]="(?:\\+("+u[Q]+"(?:\\."+u[Q]+")*))";var K=h++,ue="v?"+u[w]+u[D]+"?"+u[te]+"?";u[K]="^"+ue+"$";var _e="[v=\\s]*"+u[E]+u[x]+"?"+u[te]+"?",Te=h++;u[Te]="^"+_e+"$";var Re=h++;u[Re]="((?:<|>)?=?)";var xe=h++;u[xe]=u[y]+"|x|X|\\*";var qe=h++;u[qe]=u[g]+"|x|X|\\*";var He=h++;u[He]="[v=\\s]*("+u[qe]+")(?:\\.("+u[qe]+")(?:\\.("+u[qe]+")(?:"+u[D]+")?"+u[te]+"?)?)?";var ze=h++;u[ze]="[v=\\s]*("+u[xe]+")(?:\\.("+u[xe]+")(?:\\.("+u[xe]+")(?:"+u[x]+")?"+u[te]+"?)?)?";var ut=h++;u[ut]="^"+u[Re]+"\\s*"+u[He]+"$";var at=h++;u[at]="^"+u[Re]+"\\s*"+u[ze]+"$";var Ct=h++;u[Ct]="(?:^|[^\\d])(\\d{1,"+p+"})(?:\\.(\\d{1,"+p+"}))?(?:\\.(\\d{1,"+p+"}))?(?:$|[^\\d])";var tt=h++;u[tt]="(?:~>?)";var Fe=h++;u[Fe]="(\\s*)"+u[tt]+"\\s+",l[Fe]=new RegExp(u[Fe],"g");var Be="$1~",Ve=h++;u[Ve]="^"+u[tt]+u[He]+"$";var Xe=h++;u[Xe]="^"+u[tt]+u[ze]+"$";var rt=h++;u[rt]="(?:\\^)";var lt=h++;u[lt]="(\\s*)"+u[rt]+"\\s+",l[lt]=new RegExp(u[lt],"g");var Je="$1^",kt=h++;u[kt]="^"+u[rt]+u[He]+"$";var qt=h++;u[qt]="^"+u[rt]+u[ze]+"$";var Nt=h++;u[Nt]="^"+u[Re]+"\\s*("+_e+")$|^$";var Tt=h++;u[Tt]="^"+u[Re]+"\\s*("+ue+")$|^$";var gt=h++;u[gt]="(\\s*)"+u[Re]+"\\s*("+_e+"|"+u[He]+")",l[gt]=new RegExp(u[gt],"g");var Zt="$1$2$3",ar=h++;u[ar]="^\\s*("+u[He]+")\\s+-\\s+("+u[He]+")\\s*$";var et=h++;u[et]="^\\s*("+u[ze]+")\\s+-\\s+("+u[ze]+")\\s*$";var Ze=h++;for(u[Ze]="(<|>)?=?\\s*\\*",ot=0;ot<h;ot++)c(ot,u[ot]),l[ot]||(l[ot]=new RegExp(u[ot]));var ot;s.parse=Et;function Et(b,N){if((!N||typeof N!="object")&&(N={loose:!!N,includePrerelease:!1}),b instanceof Ie)return b;if(typeof b!="string"||b.length>v)return null;var F=N.loose?l[Te]:l[K];if(!F.test(b))return null;try{return new Ie(b,N)}catch(oe){return null}}s.valid=An;function An(b,N){var F=Et(b,N);return F?F.version:null}s.clean=tn;function tn(b,N){var F=Et(b.trim().replace(/^[=v]+/,""),N);return F?F.version:null}s.SemVer=Ie;function Ie(b,N){if((!N||typeof N!="object")&&(N={loose:!!N,includePrerelease:!1}),b instanceof Ie){if(b.loose===N.loose)return b;b=b.version}else if(typeof b!="string")throw new TypeError("Invalid Version: "+b);if(b.length>v)throw new TypeError("version is longer than "+v+" characters");if(!(this instanceof Ie))return new Ie(b,N);c("SemVer",b,N),this.options=N,this.loose=!!N.loose;var F=b.trim().match(N.loose?l[Te]:l[K]);if(!F)throw new TypeError("Invalid Version: "+b);if(this.raw=b,this.major=+F[1],this.minor=+F[2],this.patch=+F[3],this.major>_||this.major<0)throw new TypeError("Invalid major version");if(this.minor>_||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>_||this.patch<0)throw new TypeError("Invalid patch version");F[4]?this.prerelease=F[4].split(".").map(function(oe){if(/^[0-9]+$/.test(oe)){var le=+oe;if(le>=0&&le<_)return le}return oe}):this.prerelease=[],this.build=F[5]?F[5].split("."):[],this.format()}Ie.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},Ie.prototype.toString=function(){return this.version},Ie.prototype.compare=function(b){return c("SemVer.compare",this.version,this.options,b),b instanceof Ie||(b=new Ie(b,this.options)),this.compareMain(b)||this.comparePre(b)},Ie.prototype.compareMain=function(b){return b instanceof Ie||(b=new Ie(b,this.options)),Ht(this.major,b.major)||Ht(this.minor,b.minor)||Ht(this.patch,b.patch)},Ie.prototype.comparePre=function(b){if(b instanceof Ie||(b=new Ie(b,this.options)),this.prerelease.length&&!b.prerelease.length)return-1;if(!this.prerelease.length&&b.prerelease.length)return 1;if(!this.prerelease.length&&!b.prerelease.length)return 0;var N=0;do{var F=this.prerelease[N],oe=b.prerelease[N];if(c("prerelease compare",N,F,oe),F===void 0&&oe===void 0)return 0;if(oe===void 0)return 1;if(F===void 0)return-1;if(F!==oe)return Ht(F,oe)}while(++N)},Ie.prototype.inc=function(b,N){switch(b){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",N);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",N);break;case"prepatch":this.prerelease.length=0,this.inc("patch",N),this.inc("pre",N);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",N),this.inc("pre",N);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var F=this.prerelease.length;--F>=0;)typeof this.prerelease[F]=="number"&&(this.prerelease[F]++,F=-2);F===-1&&this.prerelease.push(0)}N&&(this.prerelease[0]===N?isNaN(this.prerelease[1])&&(this.prerelease=[N,0]):this.prerelease=[N,0]);break;default:throw new Error("invalid increment argument: "+b)}return this.format(),this.raw=this.version,this},s.inc=hn;function hn(b,N,F,oe){typeof F=="string"&&(oe=F,F=void 0);try{return new Ie(b,F).inc(N,oe).version}catch(le){return null}}s.diff=pn;function pn(b,N){if(Hr(b,N))return null;var F=Et(b),oe=Et(N),le="";if(F.prerelease.length||oe.prerelease.length){le="pre";var ge="prerelease"}for(var ye in F)if((ye==="major"||ye==="minor"||ye==="patch")&&F[ye]!==oe[ye])return le+ye;return ge}s.compareIdentifiers=Ht;var wr=/^[0-9]+$/;function Ht(b,N){var F=wr.test(b),oe=wr.test(N);return F&&oe&&(b=+b,N=+N),b===N?0:F&&!oe?-1:oe&&!F?1:b<N?-1:1}s.rcompareIdentifiers=mn;function mn(b,N){return Ht(N,b)}s.major=_r;function _r(b,N){return new Ie(b,N).major}s.minor=Kn;function Kn(b,N){return new Ie(b,N).minor}s.patch=fn;function fn(b,N){return new Ie(b,N).patch}s.compare=Rt;function Rt(b,N,F){return new Ie(b,F).compare(new Ie(N,F))}s.compareLoose=gn;function gn(b,N){return Rt(b,N,!0)}s.rcompare=vn;function vn(b,N,F){return Rt(N,b,F)}s.sort=Yn;function Yn(b,N){return b.sort(function(F,oe){return s.compare(F,oe,N)})}s.rsort=Xn;function Xn(b,N){return b.sort(function(F,oe){return s.rcompare(F,oe,N)})}s.gt=er;function er(b,N,F){return Rt(b,N,F)>0}s.lt=or;function or(b,N,F){return Rt(b,N,F)<0}s.eq=Hr;function Hr(b,N,F){return Rt(b,N,F)===0}s.neq=Er;function Er(b,N,F){return Rt(b,N,F)!==0}s.gte=pr;function pr(b,N,F){return Rt(b,N,F)>=0}s.lte=mr;function mr(b,N,F){return Rt(b,N,F)<=0}s.cmp=tr;function tr(b,N,F,oe){switch(N){case"===":return typeof b=="object"&&(b=b.version),typeof F=="object"&&(F=F.version),b===F;case"!==":return typeof b=="object"&&(b=b.version),typeof F=="object"&&(F=F.version),b!==F;case"":case"=":case"==":return Hr(b,F,oe);case"!=":return Er(b,F,oe);case">":return er(b,F,oe);case">=":return pr(b,F,oe);case"<":return or(b,F,oe);case"<=":return mr(b,F,oe);default:throw new TypeError("Invalid operator: "+N)}}s.Comparator=dt;function dt(b,N){if((!N||typeof N!="object")&&(N={loose:!!N,includePrerelease:!1}),b instanceof dt){if(b.loose===!!N.loose)return b;b=b.value}if(!(this instanceof dt))return new dt(b,N);c("comparator",b,N),this.options=N,this.loose=!!N.loose,this.parse(b),this.semver===nr?this.value="":this.value=this.operator+this.semver.version,c("comp",this)}var nr={};dt.prototype.parse=function(b){var N=this.options.loose?l[Nt]:l[Tt],F=b.match(N);if(!F)throw new TypeError("Invalid comparator: "+b);this.operator=F[1],this.operator==="="&&(this.operator=""),F[2]?this.semver=new Ie(F[2],this.options.loose):this.semver=nr},dt.prototype.toString=function(){return this.value},dt.prototype.test=function(b){return c("Comparator.test",b,this.options.loose),this.semver===nr?!0:(typeof b=="string"&&(b=new Ie(b,this.options)),tr(b,this.operator,this.semver,this.options))},dt.prototype.intersects=function(b,N){if(!(b instanceof dt))throw new TypeError("a Comparator is required");(!N||typeof N!="object")&&(N={loose:!!N,includePrerelease:!1});var F;if(this.operator==="")return F=new Qe(b.value,N),kr(this.value,F,N);if(b.operator==="")return F=new Qe(this.value,N),kr(b.semver,F,N);var oe=(this.operator===">="||this.operator===">")&&(b.operator===">="||b.operator===">"),le=(this.operator==="<="||this.operator==="<")&&(b.operator==="<="||b.operator==="<"),ge=this.semver.version===b.semver.version,ye=(this.operator===">="||this.operator==="<=")&&(b.operator===">="||b.operator==="<="),Me=tr(this.semver,"<",b.semver,N)&&(this.operator===">="||this.operator===">")&&(b.operator==="<="||b.operator==="<"),Oe=tr(this.semver,">",b.semver,N)&&(this.operator==="<="||this.operator==="<")&&(b.operator===">="||b.operator===">");return oe||le||ge&&ye||Me||Oe},s.Range=Qe;function Qe(b,N){if((!N||typeof N!="object")&&(N={loose:!!N,includePrerelease:!1}),b instanceof Qe)return b.loose===!!N.loose&&b.includePrerelease===!!N.includePrerelease?b:new Qe(b.raw,N);if(b instanceof dt)return new Qe(b.value,N);if(!(this instanceof Qe))return new Qe(b,N);if(this.options=N,this.loose=!!N.loose,this.includePrerelease=!!N.includePrerelease,this.raw=b,this.set=b.split(/\s*\|\|\s*/).map(function(F){return this.parseRange(F.trim())},this).filter(function(F){return F.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+b);this.format()}Qe.prototype.format=function(){return this.range=this.set.map(function(b){return b.join(" ").trim()}).join("||").trim(),this.range},Qe.prototype.toString=function(){return this.range},Qe.prototype.parseRange=function(b){var N=this.options.loose;b=b.trim();var F=N?l[et]:l[ar];b=b.replace(F,wi),c("hyphen replace",b),b=b.replace(l[gt],Zt),c("comparator trim",b,l[gt]),b=b.replace(l[Fe],Be),b=b.replace(l[lt],Je),b=b.split(/\s+/).join(" ");var oe=N?l[Nt]:l[Tt],le=b.split(" ").map(function(ge){return Or(ge,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(le=le.filter(function(ge){return!!ge.match(oe)})),le=le.map(function(ge){return new dt(ge,this.options)},this),le},Qe.prototype.intersects=function(b,N){if(!(b instanceof Qe))throw new TypeError("a Range is required");return this.set.some(function(F){return F.every(function(oe){return b.set.some(function(le){return le.every(function(ge){return oe.intersects(ge,N)})})})})},s.toComparators=yn;function yn(b,N){return new Qe(b,N).set.map(function(F){return F.map(function(oe){return oe.value}).join(" ").trim().split(" ")})}function Or(b,N){return c("comp",b,N),b=bi(b,N),c("caret",b),b=Wr(b,N),c("tildes",b),b=bn(b,N),c("xrange",b),b=Sr(b,N),c("stars",b),b}function st(b){return!b||b.toLowerCase()==="x"||b==="*"}function Wr(b,N){return b.trim().split(/\s+/).map(function(F){return Jn(F,N)}).join(" ")}function Jn(b,N){var F=N.loose?l[Xe]:l[Ve];return b.replace(F,function(oe,le,ge,ye,Me){c("tilde",b,oe,le,ge,ye,Me);var Oe;return st(le)?Oe="":st(ge)?Oe=">="+le+".0.0 <"+(+le+1)+".0.0":st(ye)?Oe=">="+le+"."+ge+".0 <"+le+"."+(+ge+1)+".0":Me?(c("replaceTilde pr",Me),Oe=">="+le+"."+ge+"."+ye+"-"+Me+" <"+le+"."+(+ge+1)+".0"):Oe=">="+le+"."+ge+"."+ye+" <"+le+"."+(+ge+1)+".0",c("tilde return",Oe),Oe})}function bi(b,N){return b.trim().split(/\s+/).map(function(F){return Zn(F,N)}).join(" ")}function Zn(b,N){c("caret",b,N);var F=N.loose?l[qt]:l[kt];return b.replace(F,function(oe,le,ge,ye,Me){c("caret",b,oe,le,ge,ye,Me);var Oe;return st(le)?Oe="":st(ge)?Oe=">="+le+".0.0 <"+(+le+1)+".0.0":st(ye)?le==="0"?Oe=">="+le+"."+ge+".0 <"+le+"."+(+ge+1)+".0":Oe=">="+le+"."+ge+".0 <"+(+le+1)+".0.0":Me?(c("replaceCaret pr",Me),le==="0"?ge==="0"?Oe=">="+le+"."+ge+"."+ye+"-"+Me+" <"+le+"."+ge+"."+(+ye+1):Oe=">="+le+"."+ge+"."+ye+"-"+Me+" <"+le+"."+(+ge+1)+".0":Oe=">="+le+"."+ge+"."+ye+"-"+Me+" <"+(+le+1)+".0.0"):(c("no pr"),le==="0"?ge==="0"?Oe=">="+le+"."+ge+"."+ye+" <"+le+"."+ge+"."+(+ye+1):Oe=">="+le+"."+ge+"."+ye+" <"+le+"."+(+ge+1)+".0":Oe=">="+le+"."+ge+"."+ye+" <"+(+le+1)+".0.0"),c("caret return",Oe),Oe})}function bn(b,N){return c("replaceXRanges",b,N),b.split(/\s+/).map(function(F){return In(F,N)}).join(" ")}function In(b,N){b=b.trim();var F=N.loose?l[at]:l[ut];return b.replace(F,function(oe,le,ge,ye,Me,Oe){c("xRange",b,oe,le,ge,ye,Me,Oe);var pt=st(ge),vt=pt||st(ye),mt=vt||st(Me),ht=mt;return le==="="&&ht&&(le=""),pt?le===">"||le==="<"?oe="<0.0.0":oe="*":le&&ht?(vt&&(ye=0),Me=0,le===">"?(le=">=",vt?(ge=+ge+1,ye=0,Me=0):(ye=+ye+1,Me=0)):le==="<="&&(le="<",vt?ge=+ge+1:ye=+ye+1),oe=le+ge+"."+ye+"."+Me):vt?oe=">="+ge+".0.0 <"+(+ge+1)+".0.0":mt&&(oe=">="+ge+"."+ye+".0 <"+ge+"."+(+ye+1)+".0"),c("xRange return",oe),oe})}function Sr(b,N){return c("replaceStars",b,N),b.trim().replace(l[Ze],"")}function wi(b,N,F,oe,le,ge,ye,Me,Oe,pt,vt,mt,ht){return st(F)?N="":st(oe)?N=">="+F+".0.0":st(le)?N=">="+F+"."+oe+".0":N=">="+N,st(Oe)?Me="":st(pt)?Me="<"+(+Oe+1)+".0.0":st(vt)?Me="<"+Oe+"."+(+pt+1)+".0":mt?Me="<="+Oe+"."+pt+"."+vt+"-"+mt:Me="<="+Me,(N+" "+Me).trim()}Qe.prototype.test=function(b){if(!b)return!1;typeof b=="string"&&(b=new Ie(b,this.options));for(var N=0;N<this.set.length;N++)if(_i(this.set[N],b,this.options))return!0;return!1};function _i(b,N,F){for(var oe=0;oe<b.length;oe++)if(!b[oe].test(N))return!1;if(N.prerelease.length&&!F.includePrerelease){for(oe=0;oe<b.length;oe++)if(c(b[oe].semver),b[oe].semver!==nr&&b[oe].semver.prerelease.length>0){var le=b[oe].semver;if(le.major===N.major&&le.minor===N.minor&&le.patch===N.patch)return!0}return!1}return!0}s.satisfies=kr;function kr(b,N,F){try{N=new Qe(N,F)}catch(oe){return!1}return N.test(b)}s.maxSatisfying=ei;function ei(b,N,F){var oe=null,le=null;try{var ge=new Qe(N,F)}catch(ye){return null}return b.forEach(function(ye){ge.test(ye)&&(!oe||le.compare(ye)===-1)&&(oe=ye,le=new Ie(oe,F))}),oe}s.minSatisfying=ti;function ti(b,N,F){var oe=null,le=null;try{var ge=new Qe(N,F)}catch(ye){return null}return b.forEach(function(ye){ge.test(ye)&&(!oe||le.compare(ye)===1)&&(oe=ye,le=new Ie(oe,F))}),oe}s.minVersion=rn;function rn(b,N){b=new Qe(b,N);var F=new Ie("0.0.0");if(b.test(F)||(F=new Ie("0.0.0-0"),b.test(F)))return F;F=null;for(var oe=0;oe<b.set.length;++oe){var le=b.set[oe];le.forEach(function(ge){var ye=new Ie(ge.semver.version);switch(ge.operator){case">":ye.prerelease.length===0?ye.patch++:ye.prerelease.push(0),ye.raw=ye.format();case"":case">=":(!F||er(F,ye))&&(F=ye);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+ge.operator)}})}return F&&b.test(F)?F:null}s.validRange=Ei;function Ei(b,N){try{return new Qe(b,N).range||"*"}catch(F){return null}}s.ltr=Si;function Si(b,N,F){return xr(b,N,"<",F)}s.gtr=ki;function ki(b,N,F){return xr(b,N,">",F)}s.outside=xr;function xr(b,N,F,oe){b=new Ie(b,oe),N=new Qe(N,oe);var le,ge,ye,Me,Oe;switch(F){case">":le=er,ge=mr,ye=or,Me=">",Oe=">=";break;case"<":le=or,ge=pr,ye=er,Me="<",Oe="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(kr(b,N,oe))return!1;for(var pt=0;pt<N.set.length;++pt){var vt=N.set[pt],mt=null,ht=null;if(vt.forEach(function(At){At.semver===nr&&(At=new dt(">=0.0.0")),mt=mt||At,ht=ht||At,le(At.semver,mt.semver,oe)?mt=At:ye(At.semver,ht.semver,oe)&&(ht=At)}),mt.operator===Me||mt.operator===Oe||(!ht.operator||ht.operator===Me)&&ge(b,ht.semver)||ht.operator===Oe&&ye(b,ht.semver))return!1}return!0}s.prerelease=Ti;function Ti(b,N){var F=Et(b,N);return F&&F.prerelease.length?F.prerelease:null}s.intersects=Kr;function Kr(b,N,F){return b=new Qe(b,F),N=new Qe(N,F),b.intersects(N)}s.coerce=Dn;function Dn(b){if(b instanceof Ie)return b;if(typeof b!="string")return null;var N=b.match(l[Ct]);return N==null?null:Et(N[1]+"."+(N[2]||"0")+"."+(N[3]||"0"))}}),Uo=O((s,k)=>{var c=us().wrap,v=1<<0,_=1<<1,p=1<<2,l=1<<3,u=[],h=0,g=!1,y=[],f,w;function E(Te,Re){var xe=Te.length,qe=Re.length,He=[];if(xe===0&&qe===0)return He;for(var ze=0;ze<xe;ze++)He[ze]=Te[ze];if(qe===0)return He;for(var ut=0;ut<qe;ut++){var at=!0;for(ze=0;ze<xe;ze++)if(Te[ze].uid===Re[ut].uid){at=!1;break}at&&He.push(Re[ut])}return He}process._fatalException?(R=!1,f=function(Te){var Re=u.length;if(R||Re===0)return!1;var xe=!1;R=!0;for(var qe=0;qe<Re;++qe){var He=u[qe];if((He.flags&l)!=0){var ze=C&&C[He.uid];xe=He.error(ze,Te)||xe}}return R=!1,y.length>0&&(u=y.pop()),C=void 0,xe&&!g},w=function(Te,Re,xe){var qe=[];g=!0;for(var He=0;He<xe;++He){var ze=Re[He];if(qe[ze.uid]=ze.data,(ze.flags&v)!=0){var ut=ze.create(ze.data);ut!==void 0&&(qe[ze.uid]=ut)}}return g=!1,function(){C=qe,y.push(u),u=E(Re,u),g=!0;for(var at=0;at<xe;++at)(Re[at].flags&_)>0&&Re[at].before(this,qe[Re[at].uid]);g=!1;var Ct=Te.apply(this,arguments);for(g=!0,at=0;at<xe;++at)(Re[at].flags&p)>0&&Re[at].after(this,qe[Re[at].uid]);return g=!1,u=y.pop(),C=void 0,Ct}},c(process,"_fatalException",function(Te){return function(Re){return f(Re)||Te(Re)}})):(D=!1,f=function(Te){if(D)throw Te;for(var Re=!1,xe=u.length,qe=0;qe<xe;++qe){var He=u[qe];(He.flags&l)!=0&&(Re=He.error(null,Te)||Re)}if(!Re&&g)throw Te},w=function(Te,Re,xe){var qe=[];g=!0;for(var He=0;He<xe;++He){var ze=Re[He];if(qe[ze.uid]=ze.data,(ze.flags&v)!=0){var ut=ze.create(ze.data);ut!==void 0&&(qe[ze.uid]=ut)}}return g=!1,function(){var at=!1,Ct=!1;y.push(u),u=E(Re,u),g=!0;for(var tt=0;tt<xe;++tt)(Re[tt].flags&_)>0&&Re[tt].before(this,qe[Re[tt].uid]);g=!1;var Fe;try{Fe=Te.apply(this,arguments)}catch(Be){at=!0;for(var tt=0;tt<xe;++tt)if((u[tt].flags&l)!=0)try{Ct=u[tt].error(qe[Re[tt].uid],Be)||Ct}catch(Xe){throw D=!0,Xe}if(!Ct)throw process.removeListener("uncaughtException",f),process._originalNextTick(function(){process.addListener("uncaughtException",f)}),Be}finally{if(!at||Ct){for(g=!0,tt=0;tt<xe;++tt)(Re[tt].flags&p)>0&&Re[tt].after(this,qe[Re[tt].uid]);g=!1}u=y.pop()}return Fe}},process.addListener("uncaughtException",f));var R,C,D;function x(Te,Re,xe){g=!0;for(var qe=0;qe<xe;++qe){var He=Re[qe];He.create&&He.create(He.data)}return g=!1,function(){y.push(u),u=E(Re,u);var ze=Te.apply(this,arguments);return u=y.pop(),ze}}function Q(Te){var Re=u.length;if(Re===0)return Te;for(var xe=u.slice(),qe=0;qe<Re;++qe)if(xe[qe].flags>0)return w(Te,xe,Re);return x(Te,xe,Re)}function te(Te,Re){typeof Te.create=="function"&&(this.create=Te.create,this.flags|=v),typeof Te.before=="function"&&(this.before=Te.before,this.flags|=_),typeof Te.after=="function"&&(this.after=Te.after,this.flags|=p),typeof Te.error=="function"&&(this.error=Te.error,this.flags|=l),this.uid=++h,this.data=Re===void 0?null:Re}te.prototype.create=void 0,te.prototype.before=void 0,te.prototype.after=void 0,te.prototype.error=void 0,te.prototype.data=void 0,te.prototype.uid=0,te.prototype.flags=0;function K(Te,Re){if(typeof Te!="object"||!Te)throw new TypeError("callbacks argument must be an object");return Te instanceof te?Te:new te(Te,Re)}function ue(Te,Re){var xe;Te instanceof te?xe=Te:xe=K(Te,Re);for(var qe=!1,He=0;He<u.length;He++)if(xe===u[He]){qe=!0;break}return qe||u.push(xe),xe}function _e(Te){for(var Re=0;Re<u.length;Re++)if(Te===u[Re]){u.splice(Re,1);break}}process.createAsyncListener=K,process.addAsyncListener=ue,process.removeAsyncListener=_e,k.exports=Q}),Ol=O((s,k)=>{"use strict";k.exports=(c,v)=>class extends c{constructor(_){var p,l;super(h);var u=this;try{_.apply(p,l)}catch(g){l[1](g)}return u;function h(g,y){p=this,l=[f,w];function f(E){return v(u,!1),g(E)}function w(E){return v(u,!1),y(E)}}}}}),zn=O(()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var s=us(),k=ds(),c=s.wrap,v=s.massWrap,_=Uo(),p=q(1669),l=k.gte(process.version,"6.0.0"),u=k.gte(process.version,"7.0.0"),h=k.gte(process.version,"8.0.0"),g=k.gte(process.version,"11.0.0"),y=q(1631);u&&!y._normalizeArgs?y._normalizeArgs=function(Fe){if(Fe.length===0)return[{},null];var Be=Fe[0],Ve={};typeof Be=="object"&&Be!==null?Ve=Be:tt(Be)?Ve.path=Be:(Ve.port=Be,Fe.length>1&&typeof Fe[1]=="string"&&(Ve.host=Fe[1]));var Xe=Fe[Fe.length-1];return typeof Xe!="function"?[Ve,null]:[Ve,Xe]}:!u&&!y._normalizeConnectArgs&&(y._normalizeConnectArgs=function(Fe){var Be={};function Ve(rt){return(rt=Number(rt))>=0?rt:!1}typeof Fe[0]=="object"&&Fe[0]!==null?Be=Fe[0]:typeof Fe[0]=="string"&&Ve(Fe[0])===!1?Be.path=Fe[0]:(Be.port=Fe[0],typeof Fe[1]=="string"&&(Be.host=Fe[1]));var Xe=Fe[Fe.length-1];return typeof Xe=="function"?[Be,Xe]:[Be]}),"_setUpListenHandle"in y.Server.prototype?c(y.Server.prototype,"_setUpListenHandle",f):c(y.Server.prototype,"_listen2",f);function f(Fe){return function(){this.on("connection",function(Be){Be._handle&&(Be._handle.onread=_(Be._handle.onread))});try{return Fe.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=_(this._handle.onconnection))}}}function w(Fe){if(Fe&&Fe._handle){var Be=Fe._handle;Be._originalOnread||(Be._originalOnread=Be.onread),Be.onread=_(Be._originalOnread)}}c(y.Socket.prototype,"connect",function(Fe){return function(){var Be;h&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?Be=arguments[0]:Be=u?y._normalizeArgs(arguments):y._normalizeConnectArgs(arguments),Be[1]&&(Be[1]=_(Be[1]));var Ve=Fe.apply(this,Be);return w(this),Ve}});var E=q(8605);c(E.Agent.prototype,"addRequest",function(Fe){return function(Be){var Ve=Be.onSocket;return Be.onSocket=_(function(Xe){return w(Xe),Ve.apply(this,arguments)}),Fe.apply(this,arguments)}});var R=q(3129);function C(Fe){Array.isArray(Fe.stdio)&&Fe.stdio.forEach(function(Be){Be&&Be._handle&&(Be._handle.onread=_(Be._handle.onread),c(Be._handle,"close",at))}),Fe._handle&&(Fe._handle.onexit=_(Fe._handle.onexit))}R.ChildProcess?c(R.ChildProcess.prototype,"spawn",function(Fe){return function(){var Be=Fe.apply(this,arguments);return C(this),Be}}):v(R,["execFile","fork","spawn"],function(Fe){return function(){var Be=Fe.apply(this,arguments);return C(Be),Be}}),process._fatalException||(process._originalNextTick=process.nextTick);var D=[];process._nextDomainTick&&D.push("_nextDomainTick"),process._tickDomainCallback&&D.push("_tickDomainCallback"),v(process,D,ut),c(process,"nextTick",at);var x=["setTimeout","setInterval"];global.setImmediate&&x.push("setImmediate");var Q=q(8213),te=global.setTimeout===Q.setTimeout;v(Q,x,at),te&&v(global,x,at);var K=q(881);v(K,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],ut),K.resolveNaptr&&c(K,"resolveNaptr",ut);var ue=q(5747);v(ue,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],ut),ue.lchown&&c(ue,"lchown",ut),ue.lchmod&&c(ue,"lchmod",ut),ue.ftruncate&&c(ue,"ftruncate",ut);var _e;try{_e=q(8761)}catch(Fe){}_e&&_e.Deflate&&_e.Deflate.prototype&&(Te=Object.getPrototypeOf(_e.Deflate.prototype),Te._transform?c(Te,"_transform",ut):Te.write&&Te.flush&&Te.end&&v(Te,["write","flush","end"],ut));var Te,Re;try{Re=q(6417)}catch(Fe){}Re&&(xe=["pbkdf2","randomBytes"],g||xe.push("pseudoRandomBytes"),v(Re,xe,ut));var xe,qe=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";qe&&(He=process.addAsyncListener({create:function(){qe=!1}}),global.Promise.resolve(!0).then(function(){qe=!1}),process.removeAsyncListener(He));var He;qe&&ze();function ze(){var Fe=global.Promise;function Be(Je){if(!(this instanceof Be))return Fe(Je);if(typeof Je!="function")return new Fe(Je);var kt,qt,Nt=new Fe(Tt);Nt.__proto__=Be.prototype;try{Je.apply(kt,qt)}catch(gt){qt[1](gt)}return Nt;function Tt(gt,Zt){kt=this,qt=[ar,et];function ar(Ze){return Xe(Nt,!1),gt(Ze)}function et(Ze){return Xe(Nt,!1),Zt(Ze)}}}if(p.inherits(Be,Fe),c(Fe.prototype,"then",lt),Fe.prototype.chain&&c(Fe.prototype,"chain",lt),l)global.Promise=Ol()(Fe,Xe);else{var Ve=["all","race","reject","resolve","accept","defer"];Ve.forEach(function(Je){typeof Fe[Je]=="function"&&(Be[Je]=Fe[Je])}),global.Promise=Be}function Xe(Je,kt){(!Je.__asl_wrapper||kt)&&(Je.__asl_wrapper=_(rt))}function rt(Je,kt,qt,Nt){var Tt;try{return Tt=kt.call(Je,qt),{returnVal:Tt,error:!1}}catch(gt){return{errorVal:gt,error:!0}}finally{Tt instanceof Fe?Nt.__asl_wrapper=function(){var gt=Tt.__asl_wrapper||rt;return gt.apply(this,arguments)}:Xe(Nt,!0)}}function lt(Je){return function(){var kt=this,qt=Je.apply(kt,Array.prototype.map.call(arguments,Nt));return qt.__asl_wrapper=function(Tt,gt,Zt,ar){return kt.__asl_wrapper?(kt.__asl_wrapper(Tt,function(){},null,qt),qt.__asl_wrapper(Tt,gt,Zt,ar)):rt(Tt,gt,Zt,ar)},qt;function Nt(Tt){return typeof Tt!="function"?Tt:_(function(gt){var Zt=(kt.__asl_wrapper||rt)(this,Tt,gt,qt);if(Zt.error)throw Zt.errorVal;return Zt.returnVal})}}}}function ut(Fe){var Be=function(){var Ve,Xe=arguments.length-1;if(typeof arguments[Xe]=="function"){Ve=Array(arguments.length);for(var rt=0;rt<arguments.length-1;rt++)Ve[rt]=arguments[rt];Ve[Xe]=_(arguments[Xe])}return Fe.apply(this,Ve||arguments)};switch(Fe.length){case 1:return function(Ve){return arguments.length!==1?Be.apply(this,arguments):(typeof Ve=="function"&&(Ve=_(Ve)),Fe.call(this,Ve))};case 2:return function(Ve,Xe){return arguments.length!==2?Be.apply(this,arguments):(typeof Xe=="function"&&(Xe=_(Xe)),Fe.call(this,Ve,Xe))};case 3:return function(Ve,Xe,rt){return arguments.length!==3?Be.apply(this,arguments):(typeof rt=="function"&&(rt=_(rt)),Fe.call(this,Ve,Xe,rt))};case 4:return function(Ve,Xe,rt,lt){return arguments.length!==4?Be.apply(this,arguments):(typeof lt=="function"&&(lt=_(lt)),Fe.call(this,Ve,Xe,rt,lt))};case 5:return function(Ve,Xe,rt,lt,Je){return arguments.length!==5?Be.apply(this,arguments):(typeof Je=="function"&&(Je=_(Je)),Fe.call(this,Ve,Xe,rt,lt,Je))};case 6:return function(Ve,Xe,rt,lt,Je,kt){return arguments.length!==6?Be.apply(this,arguments):(typeof kt=="function"&&(kt=_(kt)),Fe.call(this,Ve,Xe,rt,lt,Je,kt))};default:return Be}}function at(Fe){var Be=function(){var Ve;if(typeof arguments[0]=="function"){Ve=Array(arguments.length),Ve[0]=_(arguments[0]);for(var Xe=1;Xe<arguments.length;Xe++)Ve[Xe]=arguments[Xe]}return Fe.apply(this,Ve||arguments)};switch(Fe.length){case 1:return function(Ve){return arguments.length!==1?Be.apply(this,arguments):(typeof Ve=="function"&&(Ve=_(Ve)),Fe.call(this,Ve))};case 2:return function(Ve,Xe){return arguments.length!==2?Be.apply(this,arguments):(typeof Ve=="function"&&(Ve=_(Ve)),Fe.call(this,Ve,Xe))};case 3:return function(Ve,Xe,rt){return arguments.length!==3?Be.apply(this,arguments):(typeof Ve=="function"&&(Ve=_(Ve)),Fe.call(this,Ve,Xe,rt))};case 4:return function(Ve,Xe,rt,lt){return arguments.length!==4?Be.apply(this,arguments):(typeof Ve=="function"&&(Ve=_(Ve)),Fe.call(this,Ve,Xe,rt,lt))};case 5:return function(Ve,Xe,rt,lt,Je){return arguments.length!==5?Be.apply(this,arguments):(typeof Ve=="function"&&(Ve=_(Ve)),Fe.call(this,Ve,Xe,rt,lt,Je))};case 6:return function(Ve,Xe,rt,lt,Je,kt){return arguments.length!==6?Be.apply(this,arguments):(typeof Ve=="function"&&(Ve=_(Ve)),Fe.call(this,Ve,Xe,rt,lt,Je,kt))};default:return Be}}function Ct(Fe){return(Fe=Number(Fe))>=0?Fe:!1}function tt(Fe){return typeof Fe=="string"&&Ct(Fe)===!1}}),xl=O((s,k)=>{"use strict";var c=q(2357),v=ls(),_="cls@contexts",p="error@context";process.addAsyncListener||zn();function l(f){this.name=f,this.active=null,this._set=[],this.id=null}l.prototype.set=function(f,w){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[f]=w,w},l.prototype.get=function(f){if(this.active)return this.active[f]},l.prototype.createContext=function(){return Object.create(this.active)},l.prototype.run=function(f){var w=this.createContext();this.enter(w);try{return f(w),w}catch(E){throw E&&(E[p]=w),E}finally{this.exit(w)}},l.prototype.runAndReturn=function(f){var w;return this.run(function(E){w=f(E)}),w},l.prototype.bind=function(f,w){w||(this.active?w=this.active:w=this.createContext());var E=this;return function(){E.enter(w);try{return f.apply(this,arguments)}catch(R){throw R&&(R[p]=w),R}finally{E.exit(w)}}},l.prototype.enter=function(f){c.ok(f,"context must be provided for entering"),this._set.push(this.active),this.active=f},l.prototype.exit=function(f){if(c.ok(f,"context must be provided for exiting"),this.active===f){c.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var w=this._set.lastIndexOf(f);c.ok(w>=0,"context not currently entered; can't exit"),c.ok(w,"can't remove top context"),this._set.splice(w,1)},l.prototype.bindEmitter=function(f){c.ok(f.on&&f.addListener&&f.emit,"can only bind real EEs");var w=this,E="context@"+this.name;function R(D){!D||(D[_]||(D[_]=Object.create(null)),D[_][E]={namespace:w,context:w.active})}function C(D){if(!(D&&D[_]))return D;var x=D,Q=D[_];return Object.keys(Q).forEach(function(te){var K=Q[te];x=K.namespace.bind(x,K.context)}),x}v(f,R,C)},l.prototype.fromException=function(f){return f[p]};function u(f){return process.namespaces[f]}function h(f){c.ok(f,"namespace must be given a name!");var w=new l(f);return w.id=process.addAsyncListener({create:function(){return w.active},before:function(E,R){R&&w.enter(R)},after:function(E,R){R&&w.exit(R)},error:function(E){E&&w.exit(E)}}),process.namespaces[f]=w,w}function g(f){var w=u(f);c.ok(w,"can't delete nonexistent namespace!"),c.ok(w.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(w.id),process.namespaces[f]=null}function y(){process.namespaces&&Object.keys(process.namespaces).forEach(function(f){g(f)}),process.namespaces=Object.create(null)}process.namespaces||y(),k.exports={getNamespace:u,createNamespace:h,destroyNamespace:g,reset:y}}),ji=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.CorrelationContextManager=void 0;var k=ce(),c=xs(),v=Ms(),_=Co(),p=qs(),l=function(){function h(){}return h.getCurrentContext=function(){if(!h.enabled)return null;var g=h.session.get(h.CONTEXT_NAME);return g===void 0?null:g},h.generateContextObject=function(g,y,f,w,E,R){return y=y||g,this.enabled?{operation:{name:f,id:g,parentId:y,traceparent:E,tracestate:R},customProperties:new u(w)}:null},h.spanToContextObject=function(g,y,f){var w=new v;return w.traceId=g.traceId,w.spanId=g.spanId,w.traceFlag=v.formatOpenTelemetryTraceFlags(g.traceFlags)||v.DEFAULT_TRACE_FLAG,w.parentId=y,h.generateContextObject(w.traceId,w.parentId,f,null,w)},h.runWithContext=function(g,y){var f;return h.enabled?h.session.bind(y,(f={},f[h.CONTEXT_NAME]=g,f))():y()},h.wrapEmitter=function(g){h.enabled&&h.session.bindEmitter(g)},h.wrapCallback=function(g,y){var f;return h.enabled?h.session.bind(g,y?(f={},f[h.CONTEXT_NAME]=y,f):void 0):g},h.enable=function(g){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}h.hasEverEnabled||(this.forceClsHooked=g,this.hasEverEnabled=!0,typeof this.cls=="undefined"&&(h.forceClsHooked===!0||h.forceClsHooked===void 0&&h.shouldUseClsHooked()?this.cls=Dl():this.cls=xl()),h.session=this.cls.createNamespace("AI-CLS-Session"),c.registerContextPreservation(function(y){return h.session.bind(y)})),this.enabled=!0}},h.startOperation=function(g,y){var f=g&&g.traceContext||null,w=g&&g.traceId?g:null,E=g&&g.headers;if(w){var R=new v("00-"+w.traceId+"-"+w.spanId+"-01"),C=new _(w.traceState?w.traceState.serialize():null),D=h.generateContextObject(w.traceId,"|"+w.traceId+"."+w.spanId+".",typeof y=="string"?y:"",void 0,R,C);return D}if(f){var R=new v(f.traceparent),C=new _(f.tracestate),x=typeof y=="object"?new p(y):null,D=h.generateContextObject(R.traceId,R.parentId,typeof y=="string"?y:x.getOperationName({}),x&&x.getCorrelationContextHeader()||void 0,R,C);return D}if(E){var R=new v(E.traceparent?E.traceparent.toString():null),C=new _(E.tracestate?E.tracestate.toString():null),x=new p(g),D=h.generateContextObject(R.traceId,R.parentId,x.getOperationName({}),x.getCorrelationContextHeader(),R,C);return D}return k.warn("startOperation was called with invalid arguments",arguments),null},h.disable=function(){this.enabled=!1},h.reset=function(){h.hasEverEnabled&&(h.session=null,h.session=this.cls.createNamespace("AI-CLS-Session"))},h.isNodeVersionCompatible=function(){var g=process.versions.node.split(".");return parseInt(g[0])>3||parseInt(g[0])>2&&parseInt(g[1])>2},h.shouldUseClsHooked=function(){var g=process.versions.node.split(".");return parseInt(g[0])>8||parseInt(g[0])>=8&&parseInt(g[1])>=2},h.canUseClsHooked=function(){var g=process.versions.node.split("."),y=parseInt(g[0])>8||parseInt(g[0])>=8&&parseInt(g[1])>=0,f=parseInt(g[0])<8||parseInt(g[0])<=8&&parseInt(g[1])<2,w=parseInt(g[0])>4||parseInt(g[0])>=4&&parseInt(g[1])>=7;return!(y&&f)&&w},h.enabled=!1,h.hasEverEnabled=!1,h.forceClsHooked=void 0,h.CONTEXT_NAME="ApplicationInsights-Context",h}();s.CorrelationContextManager=l;var u=function(){function h(g){this.props=[],this.addHeaderData(g)}return h.prototype.addHeaderData=function(g){var y=g?g.split(", "):[];this.props=y.map(function(f){var w=f.split("=");return{key:w[0],value:w[1]}}).concat(this.props)},h.prototype.serializeToHeader=function(){return this.props.map(function(g){return g.key+"="+g.value}).join(", ")},h.prototype.getProperty=function(g){for(var y=0;y<this.props.length;++y){var f=this.props[y];if(f.key===g)return f.value}},h.prototype.setProperty=function(g,y){if(h.bannedCharacters.test(g)||h.bannedCharacters.test(y)){k.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+g+" and value: "+y);return}for(var f=0;f<this.props.length;++f){var w=this.props[f];if(w.key===g){w.value=y;return}}this.props.push({key:g,value:y})},h.bannedCharacters=/[,=]/,h}()}),Ml=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.dispose=s.enable=void 0;var k=_t(),c=Z(),v=[],_=function(u){var h=u.data.message;v.forEach(function(g){h instanceof Error?g.trackException({exception:h}):(h.lastIndexOf(`
`)==h.length-1&&(h=h.substring(0,h.length-1)),g.trackTrace({message:h,severity:u.data.stderr?k.SeverityLevel.Warning:k.SeverityLevel.Information}))})};function p(u,h){u?(v.length===0&&c.channel.subscribe("console",_),v.push(h)):(v=v.filter(function(g){return g!=h}),v.length===0&&c.channel.unsubscribe("console",_))}s.enable=p;function l(){c.channel.unsubscribe("console",_),v=[]}s.dispose=l}),Fl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.dispose=s.enable=void 0;var k=_t(),c=Z(),v=[],_={10:k.SeverityLevel.Verbose,20:k.SeverityLevel.Verbose,30:k.SeverityLevel.Information,40:k.SeverityLevel.Warning,50:k.SeverityLevel.Error,60:k.SeverityLevel.Critical},p=function(h){var g=h.data.result;v.forEach(function(y){var f=_[h.data.level];g instanceof Error?y.trackException({exception:g}):y.trackTrace({message:g,severity:f})})};function l(h,g){h?(v.length===0&&c.channel.subscribe("bunyan",p),v.push(g)):(v=v.filter(function(y){return y!=g}),v.length===0&&c.channel.unsubscribe("bunyan",p))}s.enable=l;function u(){c.channel.unsubscribe("bunyan",p),v=[]}s.dispose=u}),Ll=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.dispose=s.enable=void 0;var k=_t(),c=Z(),v=[],_={syslog:function(h){var g={emerg:k.SeverityLevel.Critical,alert:k.SeverityLevel.Critical,crit:k.SeverityLevel.Critical,error:k.SeverityLevel.Error,warning:k.SeverityLevel.Warning,notice:k.SeverityLevel.Information,info:k.SeverityLevel.Information,debug:k.SeverityLevel.Verbose};return g[h]===void 0?k.SeverityLevel.Information:g[h]},npm:function(h){var g={error:k.SeverityLevel.Error,warn:k.SeverityLevel.Warning,info:k.SeverityLevel.Information,verbose:k.SeverityLevel.Verbose,debug:k.SeverityLevel.Verbose,silly:k.SeverityLevel.Verbose};return g[h]===void 0?k.SeverityLevel.Information:g[h]},unknown:function(h){return k.SeverityLevel.Information}},p=function(h){var g=h.data.message;v.forEach(function(y){if(g instanceof Error)y.trackException({exception:g,properties:h.data.meta});else{var f=_[h.data.levelKind](h.data.level);y.trackTrace({message:g,severity:f,properties:h.data.meta})}})};function l(h,g){h?(v.length===0&&c.channel.subscribe("winston",p),v.push(g)):(v=v.filter(function(y){return y!=g}),v.length===0&&c.channel.unsubscribe("winston",p))}s.enable=l;function u(){c.channel.unsubscribe("winston",p),v=[]}s.dispose=u}),hs=O((s,k)=>{"use strict";var c=xs(),v=function(){function _(p){if(_.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=p,_.INSTANCE=this}return _.prototype.enable=function(p,l){c.IsInitialized&&(Ml().enable(p&&l,this._client),Fl().enable(p,this._client),Ll().enable(p,this._client))},_.prototype.isInitialized=function(){return this._isInitialized},_.prototype.dispose=function(){_.INSTANCE=null,this.enable(!1,!1)},_._methodNames=["debug","info","log","warn","error"],_}();k.exports=v}),ql=O((s,k)=>{"use strict";var c=function(){function v(_){if(v.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");v.INSTANCE=this,this._client=_;var p=process.versions.node.split(".");v._canUseUncaughtExceptionMonitor=parseInt(p[0])>13||parseInt(p[0])===13&&parseInt(p[1])>=7}return v.prototype.isInitialized=function(){return this._isInitialized},v.prototype.enable=function(_){var p=this;if(_){this._isInitialized=!0;var l=this;if(!this._exceptionListenerHandle){var u=function(h,g,y){y===void 0&&(y=new Error(v._FALLBACK_ERROR_MESSAGE)),p._client.trackException({exception:y}),p._client.flush({isAppCrashing:!0}),h&&g&&process.listeners(g).length===1&&(console.error(y),process.exit(1))};v._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=u.bind(this,!1,void 0),process.on(v.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=u.bind(this,!0,v.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=u.bind(this,!1,void 0),process.on(v.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(v.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(v._canUseUncaughtExceptionMonitor?process.removeListener(v.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(v.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(v.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},v.prototype.dispose=function(){v.INSTANCE=null,this.enable(!1),this._isInitialized=!1},v.INSTANCE=null,v.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",v.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",v.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",v._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",v._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",v._canUseUncaughtExceptionMonitor=!1,v}();k.exports=c}),Qn=O(s=>{"use strict";var k;Object.defineProperty(s,"__esModule",{value:!0}),s.HeartBeatMetricName=s.DependencyTypeName=s.SpanAttribute=s.TelemetryTypeStringToQuickPulseDocumentType=s.TelemetryTypeStringToQuickPulseType=s.QuickPulseType=s.QuickPulseDocumentType=s.PerformanceToQuickPulseCounter=s.MetricId=s.PerformanceCounter=s.QuickPulseCounter=s.DEFAULT_LIVEMETRICS_HOST=s.DEFAULT_LIVEMETRICS_ENDPOINT=s.DEFAULT_BREEZE_ENDPOINT=void 0,s.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",s.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com",s.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var c;(function(p){p.COMMITTED_BYTES="\\Memory\\Committed Bytes",p.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",p.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",p.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",p.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",p.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",p.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",p.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",p.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(c=s.QuickPulseCounter||(s.QuickPulseCounter={}));var v;(function(p){p.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",p.AVAILABLE_BYTES="\\Memory\\Available Bytes",p.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",p.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",p.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",p.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(v=s.PerformanceCounter||(s.PerformanceCounter={}));var _;(function(p){p.REQUESTS_DURATION="requests/duration",p.DEPENDENCIES_DURATION="dependencies/duration",p.EXCEPTIONS_COUNT="exceptions/count",p.TRACES_COUNT="traces/count"})(_=s.MetricId||(s.MetricId={})),s.PerformanceToQuickPulseCounter=(k={},k[v.PROCESSOR_TIME]=c.PROCESSOR_TIME,k[v.REQUEST_RATE]=c.REQUEST_RATE,k[v.REQUEST_DURATION]=c.REQUEST_DURATION,k[c.COMMITTED_BYTES]=c.COMMITTED_BYTES,k[c.REQUEST_FAILURE_RATE]=c.REQUEST_FAILURE_RATE,k[c.DEPENDENCY_RATE]=c.DEPENDENCY_RATE,k[c.DEPENDENCY_FAILURE_RATE]=c.DEPENDENCY_FAILURE_RATE,k[c.DEPENDENCY_DURATION]=c.DEPENDENCY_DURATION,k[c.EXCEPTION_RATE]=c.EXCEPTION_RATE,k),s.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"},s.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"},s.TelemetryTypeStringToQuickPulseType={EventData:s.QuickPulseType.Event,ExceptionData:s.QuickPulseType.Exception,MessageData:s.QuickPulseType.Trace,MetricData:s.QuickPulseType.Metric,RequestData:s.QuickPulseType.Request,RemoteDependencyData:s.QuickPulseType.Dependency,AvailabilityData:s.QuickPulseType.Availability,PageViewData:s.QuickPulseType.PageView},s.TelemetryTypeStringToQuickPulseDocumentType={EventData:s.QuickPulseDocumentType.Event,ExceptionData:s.QuickPulseDocumentType.Exception,MessageData:s.QuickPulseDocumentType.Trace,MetricData:s.QuickPulseDocumentType.Metric,RequestData:s.QuickPulseDocumentType.Request,RemoteDependencyData:s.QuickPulseDocumentType.Dependency,AvailabilityData:s.QuickPulseDocumentType.Availability,PageViewData:s.QuickPulseDocumentType.PageView},s.SpanAttribute={HttpHost:"http.host",HttpMethod:"http.method",HttpPort:"http.port",HttpStatusCode:"http.status_code",HttpUrl:"http.url",HttpUserAgent:"http.user_agent",GrpcMethod:"grpc.method",GrpcService:"rpc.service"},s.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc"},s.HeartBeatMetricName="HeartBeat"}),$s=O((s,k)=>{"use strict";var c=q(2087),v=Qn(),_=function(){function p(l,u,h){u===void 0&&(u=6e4),h===void 0&&(h=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,p.INSTANCE||(p.INSTANCE=this),this._isInitialized=!1,this._client=l,this._collectionInterval=u,this._enableLiveMetricsCounters=h}return p.prototype.enable=function(l,u){var h=this;this._isEnabled=l,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),l?this._handle||(this._lastCpus=c.cpus(),this._lastRequests={totalRequestCount:p._totalRequestCount,totalFailedRequestCount:p._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:p._totalDependencyCount,totalFailedDependencyCount:p._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:p._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=u||this._collectionInterval,this._handle=setInterval(function(){return h.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},p.countRequest=function(l,u){var h;if(p.isEnabled()){if(typeof l=="string")h=+new Date("1970-01-01T"+l+"Z");else if(typeof l=="number")h=l;else return;p._intervalRequestExecutionTime+=h,u===!1&&p._totalFailedRequestCount++,p._totalRequestCount++}},p.countException=function(){p._totalExceptionCount++},p.countDependency=function(l,u){var h;if(p.isEnabled()){if(typeof l=="string")h=+new Date("1970-01-01T"+l+"Z");else if(typeof l=="number")h=l;else return;p._intervalDependencyExecutionTime+=h,u===!1&&p._totalFailedDependencyCount++,p._totalDependencyCount++}},p.prototype.isInitialized=function(){return this._isInitialized},p.isEnabled=function(){return p.INSTANCE&&p.INSTANCE._isEnabled},p.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},p.prototype._trackCpu=function(){var l=c.cpus();if(l&&l.length&&this._lastCpus&&l.length===this._lastCpus.length){for(var u=0,h=0,g=0,y=0,f=0,w=0;!!l&&w<l.length;w++){var E=l[w],R=this._lastCpus[w],C="% cpu("+w+") ",D=E.model,x=E.speed,Q=E.times,te=R.times,K=Q.user-te.user||0;u+=K;var ue=Q.sys-te.sys||0;h+=ue;var _e=Q.nice-te.nice||0;g+=_e;var Te=Q.idle-te.idle||0;y+=Te;var Re=Q.irq-te.irq||0;f+=Re}var xe=void 0;if(typeof process.cpuUsage=="function"){var qe=process.cpuUsage(),He=process.hrtime(),ze=qe.user-this._lastAppCpuUsage.user+(qe.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime!="undefined"&&this._lastHrtime.length===2){var ut=(He[0]-this._lastHrtime[0])*1e6+(He[1]-this._lastHrtime[1])/1e3||0;xe=100*ze/(ut*l.length)}this._lastAppCpuUsage=qe,this._lastHrtime=He}var at=u+h+g+y+f||1;this._client.trackMetric({name:v.PerformanceCounter.PROCESSOR_TIME,value:(at-y)/at*100}),this._client.trackMetric({name:v.PerformanceCounter.PROCESS_TIME,value:xe||u/at*100})}this._lastCpus=l},p.prototype._trackMemory=function(){var l=c.freemem(),u=process.memoryUsage().rss,h=c.totalmem()-l;this._client.trackMetric({name:v.PerformanceCounter.PRIVATE_BYTES,value:u}),this._client.trackMetric({name:v.PerformanceCounter.AVAILABLE_BYTES,value:l}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:v.QuickPulseCounter.COMMITTED_BYTES,value:h})},p.prototype._trackNetwork=function(){var l=this._lastRequests,u={totalRequestCount:p._totalRequestCount,totalFailedRequestCount:p._totalFailedRequestCount,time:+new Date},h=u.totalRequestCount-l.totalRequestCount||0,g=u.totalFailedRequestCount-l.totalFailedRequestCount||0,y=u.time-l.time,f=y/1e3,w=(p._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/h||0;if(this._lastIntervalRequestExecutionTime=p._intervalRequestExecutionTime,y>0){var E=h/f,R=g/f;this._client.trackMetric({name:v.PerformanceCounter.REQUEST_RATE,value:E}),(!this._enableLiveMetricsCounters||h>0)&&this._client.trackMetric({name:v.PerformanceCounter.REQUEST_DURATION,value:w}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:v.QuickPulseCounter.REQUEST_FAILURE_RATE,value:R})}this._lastRequests=u},p.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var l=this._lastDependencies,u={totalDependencyCount:p._totalDependencyCount,totalFailedDependencyCount:p._totalFailedDependencyCount,time:+new Date},h=u.totalDependencyCount-l.totalDependencyCount||0,g=u.totalFailedDependencyCount-l.totalFailedDependencyCount||0,y=u.time-l.time,f=y/1e3,w=(p._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/h||0;if(this._lastIntervalDependencyExecutionTime=p._intervalDependencyExecutionTime,y>0){var E=h/f,R=g/f;this._client.trackMetric({name:v.QuickPulseCounter.DEPENDENCY_RATE,value:E}),this._client.trackMetric({name:v.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:R}),(!this._enableLiveMetricsCounters||h>0)&&this._client.trackMetric({name:v.QuickPulseCounter.DEPENDENCY_DURATION,value:w})}this._lastDependencies=u}},p.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var l=this._lastExceptions,u={totalExceptionCount:p._totalExceptionCount,time:+new Date},h=u.totalExceptionCount-l.totalExceptionCount||0,g=u.time-l.time,y=g/1e3;if(g>0){var f=h/y;this._client.trackMetric({name:v.QuickPulseCounter.EXCEPTION_RATE,value:f})}this._lastExceptions=u}},p.prototype.dispose=function(){p.INSTANCE=null,this.enable(!1),this._isInitialized=!1},p._totalRequestCount=0,p._totalFailedRequestCount=0,p._totalDependencyCount=0,p._totalFailedDependencyCount=0,p._totalExceptionCount=0,p._intervalDependencyExecutionTime=0,p._intervalRequestExecutionTime=0,p}();k.exports=_}),Ca=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.AggregatedMetricCounter=void 0;var k=function(){function c(v){this.dimensions=v,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}return c}();s.AggregatedMetricCounter=k}),Gs=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.PreaggregatedMetricPropertyNames=void 0,s.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}}),$o=O((s,k)=>{"use strict";var c=s&&s.__assign||function(){return c=Object.assign||function(u){for(var h,g=1,y=arguments.length;g<y;g++){h=arguments[g];for(var f in h)Object.prototype.hasOwnProperty.call(h,f)&&(u[f]=h[f])}return u},c.apply(this,arguments)},v=Qn(),_=Ca(),p=Gs(),l=function(){function u(h,g){g===void 0&&(g=6e4),u.INSTANCE||(u.INSTANCE=this),this._isInitialized=!1,u._dependencyCountersCollection=[],u._requestCountersCollection=[],u._exceptionCountersCollection=[],u._traceCountersCollection=[],this._client=h,this._collectionInterval=g}return u.prototype.enable=function(h,g){var y=this;this._isEnabled=h,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),h?this._handle||(this._collectionInterval=g||this._collectionInterval,this._handle=setInterval(function(){return y.trackPreAggregatedMetrics()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},u.countException=function(h){if(u.isEnabled()){var g=u._getAggregatedCounter(h,this._exceptionCountersCollection);g.totalCount++}},u.countTrace=function(h){if(u.isEnabled()){var g=u._getAggregatedCounter(h,this._traceCountersCollection);g.totalCount++}},u.countRequest=function(h,g){if(u.isEnabled()){var y,f=u._getAggregatedCounter(g,this._requestCountersCollection);if(typeof h=="string")y=+new Date("1970-01-01T"+h+"Z");else if(typeof h=="number")y=h;else return;f.intervalExecutionTime+=y,f.totalCount++}},u.countDependency=function(h,g){if(u.isEnabled()){var y=u._getAggregatedCounter(g,this._dependencyCountersCollection),f;if(typeof h=="string")f=+new Date("1970-01-01T"+h+"Z");else if(typeof h=="number")f=h;else return;y.intervalExecutionTime+=f,y.totalCount++}},u.prototype.isInitialized=function(){return this._isInitialized},u.isEnabled=function(){return u.INSTANCE&&u.INSTANCE._isEnabled},u.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},u._getAggregatedCounter=function(h,g){for(var y=!1,f=0;f<g.length;f++){if(h===g[f].dimensions)return g[f];if(Object.keys(h).length===Object.keys(g[f].dimensions).length){for(var w in h)if(h[w]!=g[f].dimensions[w]){y=!0;break}if(!y)return g[f];y=!1}}var E=new _.AggregatedMetricCounter(h);return g.push(E),E},u.prototype._trackRequestMetrics=function(){for(var h=0;h<u._requestCountersCollection.length;h++){var g=u._requestCountersCollection[h];g.time=+new Date;var y=g.totalCount-g.lastTotalCount||0,f=g.time-g.lastTime,w=(g.intervalExecutionTime-g.lastIntervalExecutionTime)/y||0;g.lastIntervalExecutionTime=g.intervalExecutionTime,f>0&&y>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:g.dimensions,value:w,count:y,aggregationInterval:f,metricType:v.MetricId.REQUESTS_DURATION}),g.lastTotalCount=g.totalCount,g.lastTime=g.time}},u.prototype._trackDependencyMetrics=function(){for(var h=0;h<u._dependencyCountersCollection.length;h++){var g=u._dependencyCountersCollection[h];g.time=+new Date;var y=g.totalCount-g.lastTotalCount||0,f=g.time-g.lastTime,w=(g.intervalExecutionTime-g.lastIntervalExecutionTime)/y||0;g.lastIntervalExecutionTime=g.intervalExecutionTime,f>0&&y>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:g.dimensions,value:w,count:y,aggregationInterval:f,metricType:v.MetricId.DEPENDENCIES_DURATION}),g.lastTotalCount=g.totalCount,g.lastTime=g.time}},u.prototype._trackExceptionMetrics=function(){for(var h=0;h<u._exceptionCountersCollection.length;h++){var g=u._exceptionCountersCollection[h],y=g.totalCount-g.lastTotalCount||0,f=g.time-g.lastTime;this._trackPreAggregatedMetric({name:"Exceptions",dimensions:g.dimensions,value:y,count:y,aggregationInterval:f,metricType:v.MetricId.EXCEPTIONS_COUNT}),g.lastTotalCount=g.totalCount,g.lastTime=g.time}},u.prototype._trackTraceMetrics=function(){for(var h=0;h<u._traceCountersCollection.length;h++){var g=u._traceCountersCollection[h],y=g.totalCount-g.lastTotalCount||0,f=g.time-g.lastTime;this._trackPreAggregatedMetric({name:"Traces",dimensions:g.dimensions,value:y,count:y,aggregationInterval:f,metricType:v.MetricId.TRACES_COUNT}),g.lastTotalCount=g.totalCount,g.lastTime=g.time}},u.prototype._trackPreAggregatedMetric=function(h){var g={};for(var y in h.dimensions)g[p.PreaggregatedMetricPropertyNames[y]]=h.dimensions[y];g=c(c({},g),{"_MS.MetricId":h.metricType,"_MS.AggregationIntervalMs":String(h.aggregationInterval),"_MS.IsAutocollected":"True"});var f={name:h.name,value:h.value,count:h.count,properties:g,kind:"Aggregation"};this._client.trackMetric(f)},u.prototype.dispose=function(){u.INSTANCE=null,this.enable(!1),this._isInitialized=!1},u}();k.exports=l}),Hs=O((s,k)=>{"use strict";var c=q(2087),v=q(5747),_=q(5622),p=_t(),l=ce(),u=function(){function h(g){this.keys=new p.ContextTagKeys,this.tags={},this._loadApplicationContext(g),this._loadDeviceContext(),this._loadInternalContext()}return h.prototype._loadApplicationContext=function(g){if(g=g||_.resolve(__dirname,"../../../../package.json"),!h.appVersion[g]){h.appVersion[g]="unknown";try{var y=JSON.parse(v.readFileSync(g,"utf8"));y&&typeof y.version=="string"&&(h.appVersion[g]=y.version)}catch(f){l.info("unable to read app version: ",f)}}this.tags[this.keys.applicationVersion]=h.appVersion[g]},h.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=c&&c.hostname(),this.tags[this.keys.deviceOSVersion]=c&&c.type()+" "+c.release(),this.tags[this.keys.cloudRole]=h.DefaultRoleName,this.tags["ai.device.osArchitecture"]=c&&c.arch(),this.tags["ai.device.osPlatform"]=c&&c.platform()},h.prototype._loadInternalContext=function(){var g=_.resolve(__dirname,"../../package.json");if(!h.sdkVersion){h.sdkVersion="unknown";try{var y=JSON.parse(v.readFileSync(g,"utf8"));y&&typeof y.version=="string"&&(h.sdkVersion=y.version)}catch(f){l.info("unable to read app version: ",f)}}this.tags[this.keys.internalSdkVersion]="node:"+h.sdkVersion},h.DefaultRoleName="Web",h.appVersion={},h.sdkVersion=null,h}();k.exports=u}),Ul=O((s,k)=>{"use strict";var c=s&&s.__extends||function(){var y=function(f,w){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,R){E.__proto__=R}||function(E,R){for(var C in R)Object.prototype.hasOwnProperty.call(R,C)&&(E[C]=R[C])},y(f,w)};return function(f,w){y(f,w);function E(){this.constructor=f}f.prototype=w===null?Object.create(w):(E.prototype=w.prototype,new E)}}(),v=q(8835),_=_t(),p=zr(),l=mi(),u=Qr(),h=$i(),g=function(y){c(f,y);function f(w,E){var R=y.call(this)||this;return E&&E.method&&w&&(R.method=E.method,R.url=f._getUrlFromRequestOptions(w,E),R.startTime=+new Date),R}return f.prototype.onError=function(w){this._setStatus(void 0,w)},f.prototype.onResponse=function(w){this._setStatus(w.statusCode,void 0),this.correlationId=p.getCorrelationContextTarget(w,l.requestContextTargetKey)},f.prototype.getDependencyTelemetry=function(w,E){var R=v.parse(this.url);R.search=void 0,R.hash=void 0;var C=this.method.toUpperCase()+" "+R.pathname,D=_.RemoteDependencyDataConstants.TYPE_HTTP,x=R.hostname;R.port&&(x+=":"+R.port),this.correlationId?(D=_.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==h.correlationIdPrefix&&(x+=" | "+this.correlationId)):D=_.RemoteDependencyDataConstants.TYPE_HTTP;var Q={id:E,name:C,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:D,target:x};if(w&&w.time?Q.time=w.time:this.startTime&&(Q.time=new Date(this.startTime)),w){for(var te in w)Q[te]||(Q[te]=w[te]);if(w.properties)for(var te in w.properties)Q.properties[te]=w.properties[te]}return Q},f._getUrlFromRequestOptions=function(w,E){if(typeof w=="string")if(w.indexOf("http://")===0||w.indexOf("https://")===0)w=v.parse(w);else{var R=v.parse(w);R.host==="443"?w=v.parse("https://"+w):w=v.parse("http://"+w)}else{if(w&&typeof v.URL=="function"&&w instanceof v.URL)return v.format(w);var C=w;w={},C&&Object.keys(C).forEach(function(Q){w[Q]=C[Q]})}if(w.path){var D=v.parse(w.path);w.pathname=D.pathname,w.search=D.search}if(w.host&&w.port){var x=v.parse("http://"+w.host);!x.port&&w.port&&(w.hostname=w.host,delete w.host)}return w.protocol=w.protocol||E.agent&&E.agent.protocol||E.protocol||void 0,w.hostname=w.hostname||"localhost",v.format(w)},f}(u);k.exports=g}),$l=O(s=>{"use strict";var k=s&&s.__assign||function(){return k=Object.assign||function(l){for(var u,h=1,g=arguments.length;h<g;h++){u=arguments[h];for(var y in u)Object.prototype.hasOwnProperty.call(u,y)&&(l[y]=u[y])}return l},k.apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0}),s.spanToTelemetryContract=void 0;var c=Ft(),v=Qn();function _(l){var u=k({},l);return Object.keys(v.SpanAttribute).forEach(function(h){delete u[h]}),u}function p(l){var u="|"+l.spanContext().traceId+"."+l.spanContext().spanId+".",h=Math.round(l._duration[0]*1e3+l._duration[1]/1e6),g=l.attributes["peer.address"]?l.attributes["peer.address"].toString():"",y=l.attributes.component?l.attributes.component.toString():"",f=y.toUpperCase()===v.DependencyTypeName.Http||!!l.attributes[v.SpanAttribute.HttpUrl],w=y.toLowerCase()===v.DependencyTypeName.Grpc;if(f){var E=l.attributes[v.SpanAttribute.HttpMethod]||"GET",R=new URL(l.attributes[v.SpanAttribute.HttpUrl].toString()),C=l.attributes[v.SpanAttribute.HttpHost]||R.host,D=l.attributes[v.SpanAttribute.HttpPort]||R.port||null,x=R.pathname||"/",Q=E+" "+x,te=v.DependencyTypeName.Http,K=D?(C+":"+D).toString():C.toString(),ue=R.toString(),_e=l.attributes[v.SpanAttribute.HttpStatusCode]||l.status.code||0,Te=_e<400;return{id:u,name:Q,dependencyTypeName:te,target:K,data:ue,success:Te,duration:h,url:ue,resultCode:String(_e),properties:_(l.attributes)}}else if(w){var E=l.attributes[v.SpanAttribute.GrpcMethod]||"rpc",Re=l.attributes[v.SpanAttribute.GrpcService],xe=Re?E+" "+Re:l.name;return{id:u,duration:h,name:xe,target:Re.toString(),data:Re.toString()||xe,url:Re.toString()||xe,dependencyTypeName:v.DependencyTypeName.Grpc,resultCode:String(l.status.code||0),success:l.status.code===0,properties:_(l.attributes)}}else{var qe=l.name,He=l.links&&l.links.map(function(ze){return{operation_Id:ze.context.traceId,id:ze.context.spanId}});return{id:u,duration:h,name:qe,target:g,data:g||qe,url:g||qe,dependencyTypeName:l.kind===c.SpanKind.INTERNAL?v.DependencyTypeName.InProc:y||l.name,resultCode:String(l.status.code||0),success:l.status.code===0,properties:k(k({},_(l.attributes)),{"_MS.links":He||void 0})}}}s.spanToTelemetryContract=p}),Go=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.subscriber=void 0;var k=Ft(),c=Z(),v=Ms(),_=$l(),p=ee(),l=[],u=function(g){var y=g.data,f=_.spanToTelemetryContract(y),w=y.spanContext(),E=new v;E.traceId=w.traceId,E.spanId=w.spanId,E.traceFlag=v.formatOpenTelemetryTraceFlags(w.traceFlags),E.parentId=y.parentSpanId?"|"+w.traceId+"."+y.parentSpanId+".":null,p.AsyncScopeManager.with(y,function(){l.forEach(function(R){y.kind===k.SpanKind.SERVER?R.trackRequest(f):(y.kind===k.SpanKind.CLIENT||y.kind===k.SpanKind.INTERNAL)&&R.trackDependency(f)})})};s.subscriber=u;function h(g,y){g?(l.length===0&&c.channel.subscribe("azure-coretracing",s.subscriber),l.push(y)):(l=l.filter(function(f){return f!=y}),l.length===0&&c.channel.unsubscribe("azure-coretracing",s.subscriber))}s.enable=h}),Gl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.subscriber=void 0;var k=Z(),c=[],v=function(p){p.data.event.commandName!=="ismaster"&&c.forEach(function(l){var u=p.data.startedData&&p.data.startedData.databaseName||"Unknown database";l.trackDependency({target:u,data:p.data.event.commandName,name:p.data.event.commandName,duration:p.data.event.duration,success:p.data.succeeded,resultCode:p.data.succeeded?"0":"1",time:p.data.startedData.time,dependencyTypeName:"mongodb"})})};s.subscriber=v;function _(p,l){p?(c.length===0&&k.channel.subscribe("mongodb",s.subscriber),c.push(l)):(c=c.filter(function(u){return u!=l}),c.length===0&&k.channel.unsubscribe("mongodb",s.subscriber))}s.enable=_}),Pa=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.subscriber=void 0;var k=Z(),c=[],v=function(p){c.forEach(function(l){var u=p.data.query||{},h=u.sql||"Unknown query",g=!p.data.err,y=u._connection||{},f=y.config||{},w=f.socketPath?f.socketPath:(f.host||"localhost")+":"+f.port;l.trackDependency({target:w,data:h,name:h,duration:p.data.duration,success:g,resultCode:g?"0":"1",time:p.data.time,dependencyTypeName:"mysql"})})};s.subscriber=v;function _(p,l){p?(c.length===0&&k.channel.subscribe("mysql",s.subscriber),c.push(l)):(c=c.filter(function(u){return u!=l}),c.length===0&&k.channel.unsubscribe("mysql",s.subscriber))}s.enable=_}),yd=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.subscriber=void 0;var k=Z(),c=[],v=function(p){c.forEach(function(l){p.data.commandObj.command!=="info"&&l.trackDependency({target:p.data.address,name:p.data.commandObj.command,data:p.data.commandObj.command,duration:p.data.duration,success:!p.data.err,resultCode:p.data.err?"1":"0",time:p.data.time,dependencyTypeName:"redis"})})};s.subscriber=v;function _(p,l){p?(c.length===0&&k.channel.subscribe("redis",s.subscriber),c.push(l)):(c=c.filter(function(u){return u!=l}),c.length===0&&k.channel.unsubscribe("redis",s.subscriber))}s.enable=_}),Hl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.subscriber=void 0;var k=Z(),c=[],v=function(p){c.forEach(function(l){var u=p.data.query,h=u.preparable&&u.preparable.text||u.plan||u.text||"unknown query",g=!p.data.error,y=p.data.database.host+":"+p.data.database.port;l.trackDependency({target:y,data:h,name:h,duration:p.data.duration,success:g,resultCode:g?"0":"1",time:p.data.time,dependencyTypeName:"postgres"})})};s.subscriber=v;function _(p,l){p?(c.length===0&&k.channel.subscribe("postgres",s.subscriber),c.push(l)):(c=c.filter(function(u){return u!=l}),c.length===0&&k.channel.unsubscribe("postgres",s.subscriber))}s.enable=_}),ps=O((s,k)=>{"use strict";var c=s&&s.__spreadArrays||function(){for(var R=0,C=0,D=arguments.length;C<D;C++)R+=arguments[C].length;for(var x=Array(R),Q=0,C=0;C<D;C++)for(var te=arguments[C],K=0,ue=te.length;K<ue;K++,Q++)x[Q]=te[K];return x},v=q(8605),_=q(7211),p=ce(),l=zr(),u=mi(),h=Ul(),g=ji(),y=$i(),f=Ms(),w=xs(),E=function(){function R(C){if(R.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");R.INSTANCE=this,this._client=C}return R.prototype.enable=function(C){this._isEnabled=C,this._isEnabled&&!this._isInitialized&&this._initialize(),w.IsInitialized&&(Go().enable(!0,this._client),Gl().enable(C,this._client),Pa().enable(C,this._client),yd().enable(C,this._client),Hl().enable(C,this._client))},R.prototype.isInitialized=function(){return this._isInitialized},R.prototype._initialize=function(){var C=this;this._isInitialized=!0;var D=v.request,x=_.request,Q=function(te,K){var ue=!K[R.disableCollectionRequestOption]&&!te[R.alreadyAutoCollectedFlag];K.headers&&K.headers["user-agent"]&&K.headers["user-agent"].toString().indexOf("azsdk-js")!==-1&&(ue=!1),te[R.alreadyAutoCollectedFlag]=!0,te&&K&&ue&&(g.CorrelationContextManager.wrapEmitter(te),R.trackRequest(C._client,{options:K,request:te}))};v.request=function(te){for(var K=[],ue=1;ue<arguments.length;ue++)K[ue-1]=arguments[ue];var _e=D.call.apply(D,c([v,te],K));return Q(_e,te),_e},_.request=function(te){for(var K=[],ue=1;ue<arguments.length;ue++)K[ue-1]=arguments[ue];var _e=x.call.apply(x,c([_,te],K));return Q(_e,te),_e},v.get=function(te){for(var K,ue=[],_e=1;_e<arguments.length;_e++)ue[_e-1]=arguments[_e];var Te=(K=v.request).call.apply(K,c([v,te],ue));return Te.end(),Te},_.get=function(te){for(var K,ue=[],_e=1;_e<arguments.length;_e++)ue[_e-1]=arguments[_e];var Te=(K=_.request).call.apply(K,c([_,te],ue));return Te.end(),Te}},R.trackRequest=function(C,D){if(!D.options||!D.request||!C){p.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!D.options,!D.request,!C);return}var x=new h(D.options,D.request),Q=g.CorrelationContextManager.getCurrentContext(),te,K;if(Q&&Q.operation&&Q.operation.traceparent&&f.isValidTraceId(Q.operation.traceparent.traceId))Q.operation.traceparent.updateSpanId(),te=Q.operation.traceparent.getBackCompatRequestId();else if(y.w3cEnabled){var ue=new f;K=ue.toString(),te=ue.getBackCompatRequestId()}else te=Q&&Q.operation&&Q.operation.parentId+R.requestNumber+++".";if(l.canIncludeCorrelationHeader(C,x.getUrl())&&D.request.getHeader&&D.request.setHeader&&C.config&&C.config.correlationId){var _e=D.request.getHeader(u.requestContextHeader);try{l.safeIncludeCorrelationHeader(C,D.request,_e)}catch(xe){p.warn("Request-Context header could not be set. Correlation of requests may be lost",xe)}if(Q&&Q.operation)try{if(D.request.setHeader(u.requestIdHeader,te),C.config.ignoreLegacyHeaders||(D.request.setHeader(u.parentIdHeader,Q.operation.id),D.request.setHeader(u.rootIdHeader,te)),K||Q.operation.traceparent)D.request.setHeader(u.traceparentHeader,K||Q.operation.traceparent.toString());else if(y.w3cEnabled){var ue=new f().toString();D.request.setHeader(u.traceparentHeader,ue)}if(Q.operation.tracestate){var Te=Q.operation.tracestate.toString();Te&&D.request.setHeader(u.traceStateHeader,Te)}var Re=Q.customProperties.serializeToHeader();Re&&D.request.setHeader(u.correlationContextHeader,Re)}catch(xe){p.warn("Correlation headers could not be set. Correlation of requests may be lost.",xe)}}D.request.on&&(D.request.on("response",function(xe){x.onResponse(xe);var qe=x.getDependencyTelemetry(D,te);qe.contextObjects=qe.contextObjects||{},qe.contextObjects["http.RequestOptions"]=D.options,qe.contextObjects["http.ClientRequest"]=D.request,qe.contextObjects["http.ClientResponse"]=xe,C.trackDependency(qe)}),D.request.on("error",function(xe){x.onError(xe);var qe=x.getDependencyTelemetry(D,te);qe.contextObjects=qe.contextObjects||{},qe.contextObjects["http.RequestOptions"]=D.options,qe.contextObjects["http.ClientRequest"]=D.request,qe.contextObjects.Error=xe,C.trackDependency(qe)}),D.request.on("abort",function(){x.onError(new Error);var xe=x.getDependencyTelemetry(D,te);xe.contextObjects=xe.contextObjects||{},xe.contextObjects["http.RequestOptions"]=D.options,xe.contextObjects["http.ClientRequest"]=D.request,C.trackDependency(xe)}))},R.prototype.dispose=function(){R.INSTANCE=null,this.enable(!1),this._isInitialized=!1},R.disableCollectionRequestOption="disableAppInsightsAutoCollection",R.requestNumber=1,R.alreadyAutoCollectedFlag="_appInsightsAutoCollected",R}();k.exports=E}),Vl=O((s,k)=>{"use strict";var c=q(2087),v=Qn(),_=zr(),p=Hs(),l=ps(),u="http://169.254.169.254/metadata/instance/compute",h="api-version=2017-12-01",g="format=json",y="ENETUNREACH",f=function(){function w(E){this._collectionInterval=9e5,this._vmData={},this._azInst_vmId="",this._azInst_subscriptionId="",this._azInst_osType="",w.INSTANCE||(w.INSTANCE=this),this._isInitialized=!1,this._client=E}return w.prototype.enable=function(E,R){var C=this;this._isEnabled=E,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),E?this._handle||(this._handle=setInterval(function(){return C.trackHeartBeat(R,function(){})},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},w.prototype.isInitialized=function(){return this._isInitialized},w.isEnabled=function(){return w.INSTANCE&&w.INSTANCE._isEnabled},w.prototype.trackHeartBeat=function(E,R){var C=this,D=!1,x={},Q=p.sdkVersion;x.sdk=Q,x.osType=c.type(),process.env.WEBSITE_SITE_NAME?(x.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",x.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",x.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?x.azfunction_appId=process.env.WEBSITE_HOSTNAME:E&&(this._isVM===void 0?(D=!0,this._getAzureComputeMetadata(E,function(){C._isVM&&Object.keys(C._vmData).length>0&&(x.azInst_vmId=C._vmData.vmId||"",x.azInst_subscriptionId=C._vmData.subscriptionId||"",x.azInst_osType=C._vmData.osType||"",C._azInst_vmId=C._vmData.vmId||"",C._azInst_subscriptionId=C._vmData.subscriptionId||"",C._azInst_osType=C._vmData.osType||""),C._client.trackMetric({name:v.HeartBeatMetricName,value:0,properties:x}),R()})):this._isVM&&(x.azInst_vmId=this._azInst_vmId,x.azInst_subscriptionId=this._azInst_subscriptionId,x.azInst_osType=this._azInst_osType)),D||(this._client.trackMetric({name:v.HeartBeatMetricName,value:0,properties:x}),R())},w.prototype.dispose=function(){w.INSTANCE=null,this.enable(!1),this._isInitialized=!1},w.prototype._getAzureComputeMetadata=function(E,R){var C,D=this,x=u+"?"+h+"&"+g,Q=(C={method:"GET"},C[l.disableCollectionRequestOption]=!0,C.headers={Metadata:"True"},C),te=_.makeRequest(E,x,Q,function(K){if(K.statusCode===200){D._isVM=!0;var ue="";K.on("data",function(_e){ue+=_e}),K.on("end",function(){D._vmData=D._isJSON(ue)?JSON.parse(ue):{},R()})}else R()});te&&(te.on("error",function(K){K&&K.message&&K.message.indexOf(y)>-1&&(D._isVM=!1),R()}),te.end())},w.prototype._isJSON=function(E){try{return JSON.parse(E)&&!!E}catch(R){return!1}},w}();k.exports=f}),Ho=O((s,k)=>{"use strict";var c=q(8605),v=q(7211),_=ce(),p=zr(),l=mi(),u=qs(),h=ji(),g=$s(),y=function(){function f(w){if(f.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");f.INSTANCE=this,this._client=w}return f.prototype.enable=function(w){this._isEnabled=w,(this._isAutoCorrelating||this._isEnabled||g.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},f.prototype.useAutoCorrelation=function(w,E){w&&!this._isAutoCorrelating?h.CorrelationContextManager.enable(E):!w&&this._isAutoCorrelating&&h.CorrelationContextManager.disable(),this._isAutoCorrelating=w},f.prototype.isInitialized=function(){return this._isInitialized},f.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},f.prototype._generateCorrelationContext=function(w){if(this._isAutoCorrelating)return h.CorrelationContextManager.generateContextObject(w.getOperationId(this._client.context.tags),w.getRequestId(),w.getOperationName(this._client.context.tags),w.getCorrelationContextHeader(),w.getTraceparent(),w.getTracestate())},f.prototype._initialize=function(){var w=this;this._isInitialized=!0;var E=function(x){if(x){if(typeof x!="function")throw new Error("onRequest handler must be a function");return function(Q,te){h.CorrelationContextManager.wrapEmitter(Q),h.CorrelationContextManager.wrapEmitter(te);var K=Q&&!Q[f.alreadyAutoCollectedFlag];if(Q&&K){var ue=new u(Q),_e=w._generateCorrelationContext(ue);h.CorrelationContextManager.runWithContext(_e,function(){w._isEnabled&&(Q[f.alreadyAutoCollectedFlag]=!0,f.trackRequest(w._client,{request:Q,response:te},ue)),typeof x=="function"&&x(Q,te)})}else typeof x=="function"&&x(Q,te)}}},R=function(x){var Q=x.addListener.bind(x);x.addListener=function(te,K){switch(te){case"request":case"checkContinue":return Q(te,E(K));default:return Q(te,K)}},x.on=x.addListener},C=c.createServer;c.createServer=function(x,Q){if(Q&&typeof Q=="function"){var te=C(x,E(Q));return R(te),te}else{var te=C(E(x));return R(te),te}};var D=v.createServer;v.createServer=function(x,Q){var te=D(x,E(Q));return R(te),te}},f.trackRequestSync=function(w,E){if(!E.request||!E.response||!w){_.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!E.request,!E.response,!w);return}f.addResponseCorrelationIdHeader(w,E.response);var R=h.CorrelationContextManager.getCurrentContext(),C=new u(E.request,R&&R.operation.parentId);R&&(R.operation.id=C.getOperationId(w.context.tags)||R.operation.id,R.operation.name=C.getOperationName(w.context.tags)||R.operation.name,R.operation.parentId=C.getRequestId()||R.operation.parentId,R.customProperties.addHeaderData(C.getCorrelationContextHeader())),f.endRequest(w,C,E,E.duration,E.error)},f.trackRequest=function(w,E,R){if(!E.request||!E.response||!w){_.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!E.request,!E.response,!w);return}var C=h.CorrelationContextManager.getCurrentContext(),D=R||new u(E.request,C&&C.operation.parentId);p.canIncludeCorrelationHeader(w,D.getUrl())&&f.addResponseCorrelationIdHeader(w,E.response),C&&!R&&(C.operation.id=D.getOperationId(w.context.tags)||C.operation.id,C.operation.name=D.getOperationName(w.context.tags)||C.operation.name,C.operation.parentId=D.getOperationParentId(w.context.tags)||C.operation.parentId,C.customProperties.addHeaderData(D.getCorrelationContextHeader())),E.response.once&&E.response.once("finish",function(){f.endRequest(w,D,E,null,null)}),E.request.on&&E.request.on("error",function(x){f.endRequest(w,D,E,null,x)}),E.request.on&&E.request.on("aborted",function(){var x="The request has been aborted and the network socket has closed.";f.endRequest(w,D,E,null,x)})},f.addResponseCorrelationIdHeader=function(w,E){if(w.config&&w.config.correlationId&&E.getHeader&&E.setHeader&&!E.headersSent){var R=E.getHeader(l.requestContextHeader);p.safeIncludeCorrelationHeader(w,E,R)}},f.endRequest=function(w,E,R,C,D){D?E.onError(D,C):E.onResponse(R.response,C);var x=E.getRequestTelemetry(R);if(x.tagOverrides=E.getRequestTags(w.context.tags),R.tagOverrides)for(var Q in R.tagOverrides)x.tagOverrides[Q]=R.tagOverrides[Q];var te=E.getLegacyRootId();te&&(x.properties.ai_legacyRootId=te),x.contextObjects=x.contextObjects||{},x.contextObjects["http.ServerRequest"]=R.request,x.contextObjects["http.ServerResponse"]=R.response,w.trackRequest(x)},f.prototype.dispose=function(){f.INSTANCE=null,this.enable(!1),this._isInitialized=!1,h.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},f.alreadyAutoCollectedFlag="_appInsightsAutoCollected",f}();k.exports=y}),Bl=O((s,k)=>{"use strict";var c=s&&s.__assign||function(){return c=Object.assign||function(y){for(var f,w=1,E=arguments.length;w<E;w++){f=arguments[w];for(var R in f)Object.prototype.hasOwnProperty.call(f,R)&&(y[R]=f[R])}return y},c.apply(this,arguments)},v=q(2087),_=_t(),p=Qn(),l=zr(),u=ce(),h=l.w3cTraceId(),g=function(){function y(){}return y.createQuickPulseEnvelope=function(f,w,E,R){var C=v&&typeof v.hostname=="function"&&v.hostname()||"Unknown",D=R.tags&&R.keys&&R.keys.cloudRoleInstance&&R.tags[R.keys.cloudRoleInstance]||C,x=R.tags&&R.keys&&R.keys.cloudRole&&R.tags[R.keys.cloudRole]||null,Q={Documents:w.length>0?w:null,InstrumentationKey:E.instrumentationKey||"",Metrics:f.length>0?f:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:R.tags[R.keys.internalSdkVersion],StreamId:h,MachineName:C,Instance:D,RoleName:x};return Q},y.createQuickPulseMetric=function(f){var w;return w={Name:f.name,Value:f.value,Weight:f.count||1},w},y.telemetryEnvelopeToQuickPulseDocument=function(f){switch(f.data.baseType){case _.TelemetryTypeString.Event:return y.createQuickPulseEventDocument(f);case _.TelemetryTypeString.Exception:return y.createQuickPulseExceptionDocument(f);case _.TelemetryTypeString.Trace:return y.createQuickPulseTraceDocument(f);case _.TelemetryTypeString.Dependency:return y.createQuickPulseDependencyDocument(f);case _.TelemetryTypeString.Request:return y.createQuickPulseRequestDocument(f)}return null},y.createQuickPulseEventDocument=function(f){var w=y.createQuickPulseDocument(f),E=f.data.baseData.name,R=c(c({},w),{Name:E});return R},y.createQuickPulseTraceDocument=function(f){var w=y.createQuickPulseDocument(f),E=f.data.baseData.severityLevel||0,R=c(c({},w),{Message:f.data.baseData.message,SeverityLevel:_.SeverityLevel[E]});return R},y.createQuickPulseExceptionDocument=function(f){var w=y.createQuickPulseDocument(f),E=f.data.baseData.exceptions,R="",C="",D="";E&&E.length>0&&(E[0].parsedStack&&E[0].parsedStack.length>0?E[0].parsedStack.forEach(function(Q){R+=Q.assembly+`
`}):E[0].stack&&E[0].stack.length>0&&(R=E[0].stack),C=E[0].message,D=E[0].typeName);var x=c(c({},w),{Exception:R,ExceptionMessage:C,ExceptionType:D});return x},y.createQuickPulseRequestDocument=function(f){var w=y.createQuickPulseDocument(f),E=f.data.baseData,R=c(c({},w),{Name:E.name,Success:E.success,Duration:E.duration,ResponseCode:E.responseCode,OperationName:E.name});return R},y.createQuickPulseDependencyDocument=function(f){var w=y.createQuickPulseDocument(f),E=f.data.baseData,R=c(c({},w),{Name:E.name,Target:E.target,Success:E.success,Duration:E.duration,ResultCode:E.resultCode,CommandName:E.data,OperationName:w.OperationId,DependencyTypeName:E.type});return R},y.createQuickPulseDocument=function(f){var w,E,R,C;f.data.baseType?(E=p.TelemetryTypeStringToQuickPulseType[f.data.baseType],w=p.TelemetryTypeStringToQuickPulseDocumentType[f.data.baseType]):u.warn("Document type invalid; not sending live metric document",f.data.baseType),R=f.tags[y.keys.operationId],C=y.aggregateProperties(f);var D={DocumentType:w,__type:E,OperationId:R,Version:"1.0",Properties:C};return D},y.aggregateProperties=function(f){var w=[],E=f.data.baseData.measurements||{};for(var R in E)if(E.hasOwnProperty(R)){var C=E[R],D={key:R,value:C};w.push(D)}var x=f.data.baseData.properties||{};for(var R in x)if(x.hasOwnProperty(R)){var C=x[R],D={key:R,value:C};w.push(D)}return w},y.keys=new _.ContextTagKeys,y}();k.exports=g}),Vo=O((s,k)=>{"use strict";var c=function(){return(Date.now()+621355968e5)*1e4};k.exports={getTransmissionTime:c}}),Na=O((s,k)=>{"use strict";var c=s&&s.__awaiter||function(f,w,E,R){function C(D){return D instanceof E?D:new E(function(x){x(D)})}return new(E||(E=Promise))(function(D,x){function Q(ue){try{K(R.next(ue))}catch(_e){x(_e)}}function te(ue){try{K(R.throw(ue))}catch(_e){x(_e)}}function K(ue){ue.done?D(ue.value):C(ue.value).then(Q,te)}K((R=R.apply(f,w||[])).next())})},v=s&&s.__generator||function(f,w){var E={label:0,sent:function(){if(D[0]&1)throw D[1];return D[1]},trys:[],ops:[]},R,C,D,x;return x={next:Q(0),throw:Q(1),return:Q(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function Q(K){return function(ue){return te([K,ue])}}function te(K){if(R)throw new TypeError("Generator is already executing.");for(;E;)try{if(R=1,C&&(D=K[0]&2?C.return:K[0]?C.throw||((D=C.return)&&D.call(C),0):C.next)&&!(D=D.call(C,K[1])).done)return D;switch(C=0,D&&(K=[K[0]&2,D.value]),K[0]){case 0:case 1:D=K;break;case 4:return E.label++,{value:K[1],done:!1};case 5:E.label++,C=K[1],K=[0];continue;case 7:K=E.ops.pop(),E.trys.pop();continue;default:if(D=E.trys,!(D=D.length>0&&D[D.length-1])&&(K[0]===6||K[0]===2)){E=0;continue}if(K[0]===3&&(!D||K[1]>D[0]&&K[1]<D[3])){E.label=K[1];break}if(K[0]===6&&E.label<D[1]){E.label=D[1],D=K;break}if(D&&E.label<D[2]){E.label=D[2],E.ops.push(K);break}D[2]&&E.ops.pop(),E.trys.pop();continue}K=w.call(f,E)}catch(ue){K=[6,ue],C=0}finally{R=D=0}if(K[0]&5)throw K[1];return{value:K[0]?K[1]:void 0,done:!0}}},_=q(7211),p=ps(),l=ce(),u=Vo(),h=zr(),g={method:"POST",time:"x-ms-qps-transmission-time",pollingIntervalHint:"x-ms-qps-service-polling-interval-hint",endpointRedirect:"x-ms-qps-service-endpoint-redirect",instanceName:"x-ms-qps-instance-name",streamId:"x-ms-qps-stream-id",machineName:"x-ms-qps-machine-name",roleName:"x-ms-qps-role-name",streamid:"x-ms-qps-stream-id",invariantVersion:"x-ms-qps-invariant-version",subscribed:"x-ms-qps-subscribed"},y=function(){function f(w){this._config=w,this._consecutiveErrors=0}return f.prototype.ping=function(w,E,R){var C=[{name:g.streamId,value:w.StreamId},{name:g.machineName,value:w.MachineName},{name:g.roleName,value:w.RoleName},{name:g.instanceName,value:w.Instance},{name:g.invariantVersion,value:w.InvariantVersion.toString()}];this._submitData(w,E,R,"ping",C)},f.prototype.post=function(w,E,R){return c(this,void 0,void 0,function(){return v(this,function(C){switch(C.label){case 0:return[4,this._submitData([w],E,R,"post")];case 1:return C.sent(),[2]}})})},f.prototype._submitData=function(w,E,R,C,D){return c(this,void 0,void 0,function(){var x,Q,te,K,ue,_e=this;return v(this,function(Te){return x=JSON.stringify(w),Q=(K={},K[p.disableCollectionRequestOption]=!0,K.host=E&&E.length>0?E:this._config.quickPulseHost,K.method=g.method,K.path="/QuickPulseService.svc/"+C+"?ikey="+this._config.instrumentationKey,K.headers=(ue={Expect:"100-continue"},ue[g.time]=u.getTransmissionTime(),ue["Content-Type"]="application/json",ue["Content-Length"]=Buffer.byteLength(x),ue),K),D&&D.length>0&&D.forEach(function(Re){return Q.headers[Re.name]=Re.value}),this._config.httpsAgent?Q.agent=this._config.httpsAgent:Q.agent=h.tlsRestrictedAgent,te=_.request(Q,function(Re){if(Re.statusCode==200){var xe=Re.headers[g.subscribed]==="true",qe=Re.headers[g.endpointRedirect]?Re.headers[g.endpointRedirect].toString():null,He=Re.headers[g.pollingIntervalHint]?parseInt(Re.headers[g.pollingIntervalHint].toString()):null;_e._consecutiveErrors=0,R(xe,Re,qe,He)}else _e._onError("StatusCode:"+Re.statusCode+" StatusMessage:"+Re.statusMessage),R()}),te.on("error",function(Re){_e._onError(Re),R()}),te.write(x),te.end(),[2]})})},f.prototype._onError=function(w){this._consecutiveErrors++;var E="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%f.MAX_QPS_FAILURES_BEFORE_WARN==0?(E="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",l.warn(f.TAG,E,w)):l.info(f.TAG,E,w)},f.TAG="QuickPulseSender",f.MAX_QPS_FAILURES_BEFORE_WARN=25,f}();k.exports=y}),jl=O((s,k)=>{"use strict";var c=s&&s.__awaiter||function(y,f,w,E){function R(C){return C instanceof w?C:new w(function(D){D(C)})}return new(w||(w=Promise))(function(C,D){function x(K){try{te(E.next(K))}catch(ue){D(ue)}}function Q(K){try{te(E.throw(K))}catch(ue){D(ue)}}function te(K){K.done?C(K.value):R(K.value).then(x,Q)}te((E=E.apply(y,f||[])).next())})},v=s&&s.__generator||function(y,f){var w={label:0,sent:function(){if(C[0]&1)throw C[1];return C[1]},trys:[],ops:[]},E,R,C,D;return D={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(D[Symbol.iterator]=function(){return this}),D;function x(te){return function(K){return Q([te,K])}}function Q(te){if(E)throw new TypeError("Generator is already executing.");for(;w;)try{if(E=1,R&&(C=te[0]&2?R.return:te[0]?R.throw||((C=R.return)&&C.call(R),0):R.next)&&!(C=C.call(R,te[1])).done)return C;switch(R=0,C&&(te=[te[0]&2,C.value]),te[0]){case 0:case 1:C=te;break;case 4:return w.label++,{value:te[1],done:!1};case 5:w.label++,R=te[1],te=[0];continue;case 7:te=w.ops.pop(),w.trys.pop();continue;default:if(C=w.trys,!(C=C.length>0&&C[C.length-1])&&(te[0]===6||te[0]===2)){w=0;continue}if(te[0]===3&&(!C||te[1]>C[0]&&te[1]<C[3])){w.label=te[1];break}if(te[0]===6&&w.label<C[1]){w.label=C[1],C=te;break}if(C&&w.label<C[2]){w.label=C[2],w.ops.push(te);break}C[2]&&w.ops.pop(),w.trys.pop();continue}te=f.call(y,w)}catch(K){te=[6,K],R=0}finally{E=C=0}if(te[0]&5)throw te[1];return{value:te[0]?te[1]:void 0,done:!0}}},_=ce(),p=Bl(),l=Na(),u=Qn(),h=Hs(),g=function(){function y(f,w){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=f,this.context=w||new h,this._sender=new l(this.config),this._isEnabled=!1}return y.prototype.addCollector=function(f){this._collectors.push(f)},y.prototype.trackMetric=function(f){this._addMetric(f)},y.prototype.addDocument=function(f){var w=p.telemetryEnvelopeToQuickPulseDocument(f);w&&this._documents.push(w)},y.prototype.enable=function(f){f&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!f&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},y.prototype.enableCollectors=function(f){this._collectors.forEach(function(w){w.enable(f)})},y.prototype._addMetric=function(f){var w=f.value,E=f.count||1,R=u.PerformanceToQuickPulseCounter[f.name];R&&(this._metrics[R]?(this._metrics[R].Value=(this._metrics[R].Value*this._metrics[R].Weight+w*E)/(this._metrics[R].Weight+E),this._metrics[R].Weight+=E):(this._metrics[R]=p.createQuickPulseMetric(f),this._metrics[R].Name=R,this._metrics[R].Weight=1))},y.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},y.prototype._goQuickPulse=function(){return c(this,void 0,void 0,function(){var f,w,E,R,C=this;return v(this,function(D){switch(D.label){case 0:return f=Object.keys(this._metrics).map(function(x){return C._metrics[x]}),w=p.createQuickPulseEnvelope(f,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(w)]:[3,2];case 1:return D.sent(),[3,3];case 2:this._ping(w),D.label=3;case 3:return E=this._pollingIntervalHint>0?this._pollingIntervalHint:y.PING_INTERVAL,R=this._isCollectingData?y.POST_INTERVAL:E,this._isCollectingData&&Date.now()-this._lastSuccessTime>=y.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,R=y.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=y.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(R=y.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),R),this._handle.unref(),[2]}})})},y.prototype._ping=function(f){this._sender.ping(f,this._redirectedHost,this._quickPulseDone.bind(this))},y.prototype._post=function(f){return c(this,void 0,void 0,function(){return v(this,function(w){switch(w.label){case 0:return[4,this._sender.post(f,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return w.sent(),[2]}})})},y.prototype._quickPulseDone=function(f,w,E,R){f!=null?(this._isCollectingData!==f&&(_.info("Live Metrics sending data",f),this.enableCollectors(f)),this._isCollectingData=f,E&&E.length>0&&(this._redirectedHost=E,_.info("Redirecting endpoint to: ",E)),R&&R>0&&(this._pollingIntervalHint=R),w&&w.statusCode<300&&w.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},y.MAX_POST_WAIT_TIME=2e4,y.MAX_PING_WAIT_TIME=6e4,y.FALLBACK_INTERVAL=6e4,y.PING_INTERVAL=5e3,y.POST_INTERVAL=1e3,y}();k.exports=g}),Bo=O((s,k)=>{"use strict";var c=Qn(),v=function(){function _(){}return _.parse=function(p){if(!p)return{};var l=p.split(_._FIELDS_SEPARATOR),u=l.reduce(function(g,y){var f=y.split(_._FIELD_KEY_VALUE_SEPARATOR);if(f.length===2){var w=f[0].toLowerCase(),E=f[1];g[w]=E}return g},{});if(Object.keys(u).length>0){if(u.endpointsuffix){var h=u.location?u.location+".":"";u.ingestionendpoint=u.ingestionendpoint||"https://"+h+"dc."+u.endpointsuffix,u.liveendpoint=u.liveendpoint||"https://"+h+"live."+u.endpointsuffix}u.ingestionendpoint=u.ingestionendpoint||c.DEFAULT_BREEZE_ENDPOINT,u.liveendpoint=u.liveendpoint||c.DEFAULT_LIVEMETRICS_ENDPOINT}return u},_._FIELDS_SEPARATOR=";",_._FIELD_KEY_VALUE_SEPARATOR="=",_}();k.exports=v}),jo=O((s,k)=>{"use strict";var c=$i(),v=Bo(),_=ce(),p=Qn(),l=q(8835),u=function(){function h(g){var y=this;this.endpointBase=p.DEFAULT_BREEZE_ENDPOINT;var f=process.env[h.ENV_connectionString],w=v.parse(g),E=v.parse(f),R=!w.instrumentationkey&&Object.keys(w).length>0?null:g;this.instrumentationKey=w.instrumentationkey||R||E.instrumentationkey||h._getInstrumentationKey(),h._validateInstrumentationKey(this.instrumentationKey),this.endpointUrl=(w.ingestionendpoint||E.ingestionendpoint||this.endpointBase)+"/v2.1/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=30*1e3,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(C){return y.correlationId=C},this.proxyHttpUrl=process.env[h.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[h.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=w.ingestionendpoint||E.ingestionendpoint||process.env[h.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=w.liveendpoint||E.liveendpoint||process.env[h.ENV_quickPulseHost]||p.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=l.parse(this._quickPulseHost).host)}return Object.defineProperty(h.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(g){c.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=g,this.correlationId=c.correlationIdPrefix,c.queryCorrelationId(this,this.setCorrelationId)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(g){this._quickPulseHost=g},enumerable:!1,configurable:!0}),h._getInstrumentationKey=function(){var g=process.env[h.ENV_iKey]||process.env[h.ENV_azurePrefix+h.ENV_iKey]||process.env[h.legacy_ENV_iKey]||process.env[h.ENV_azurePrefix+h.legacy_ENV_iKey];if(!g||g=="")throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return g},h._validateInstrumentationKey=function(g){var y="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",f=new RegExp(y);return f.test(g)},h.ENV_azurePrefix="APPSETTING_",h.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",h.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",h.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",h.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",h.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",h.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",h.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",h.ENV_http_proxy="http_proxy",h.ENV_https_proxy="https_proxy",h}();k.exports=u}),zl=O(s=>{"use strict";var k=s&&s.__assign||function(){return k=Object.assign||function(l){for(var u,h=1,g=arguments.length;h<g;h++){u=arguments[h];for(var y in u)Object.prototype.hasOwnProperty.call(u,y)&&(l[y]=u[y])}return l},k.apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0}),s.AutoCollectNativePerformance=void 0;var c=jo(),v=Hs(),_=ce(),p=function(){function l(u){this._disabledMetrics={},l.INSTANCE&&l.INSTANCE.dispose(),l.INSTANCE=this,this._client=u}return l.isNodeVersionCompatible=function(){var u=process.versions.node.split(".");return parseInt(u[0])>=6},l.prototype.enable=function(u,h,g){var y=this;if(h===void 0&&(h={}),g===void 0&&(g=6e4),!!l.isNodeVersionCompatible()){if(l._metricsAvailable==null&&u&&!this._isInitialized)try{var f=q(6591);l._emitter=new f,l._metricsAvailable=!0,_.info("Native metrics module successfully loaded!")}catch(w){l._metricsAvailable=!1;return}this._isEnabled=u,this._disabledMetrics=h,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&l._emitter?(l._emitter.enable(!0,g),this._handle||(this._handle=setInterval(function(){return y._trackNativeMetrics()},g),this._handle.unref())):l._emitter&&(l._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},l.prototype.dispose=function(){this.enable(!1)},l.parseEnabled=function(u){var h=process.env[c.ENV_nativeMetricsDisableAll],g=process.env[c.ENV_nativeMetricsDisablers];if(h)return{isEnabled:!1,disabledMetrics:{}};if(g){var y=g.split(","),f={};if(y.length>0)for(var w=0,E=y;w<E.length;w++){var R=E[w];f[R]=!0}return typeof u=="object"?{isEnabled:!0,disabledMetrics:k(k({},u),f)}:{isEnabled:u,disabledMetrics:f}}return typeof u=="boolean"?{isEnabled:u,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:u}},l.prototype._trackNativeMetrics=function(){var u=!0;typeof this._isEnabled!="object"&&(u=this._isEnabled),u&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},l.prototype._trackGarbageCollection=function(){var u;if(!this._disabledMetrics.gc){var h=l._emitter.getGCData();for(var g in h){var y=h[g].metrics,f=g+" Garbage Collection Duration",w=Math.sqrt(y.sumSquares/y.count-Math.pow(y.total/y.count,2))||0;this._client.trackMetric({name:f,value:y.total,count:y.count,max:y.max,min:y.min,stdDev:w,tagOverrides:(u={},u[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+v.sdkVersion,u)})}}},l.prototype._trackEventLoop=function(){var u;if(!this._disabledMetrics.loop){var h=l._emitter.getLoopData(),g=h.loopUsage;if(g.count!=0){var y="Event Loop CPU Time",f=Math.sqrt(g.sumSquares/g.count-Math.pow(g.total/g.count,2))||0;this._client.trackMetric({name:y,value:g.total,count:g.count,min:g.min,max:g.max,stdDev:f,tagOverrides:(u={},u[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+v.sdkVersion,u)})}}},l.prototype._trackHeapUsage=function(){var u,h,g;if(!this._disabledMetrics.heap){var y=process.memoryUsage(),f=y.heapUsed,w=y.heapTotal,E=y.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:f,count:1,tagOverrides:(u={},u[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+v.sdkVersion,u)}),this._client.trackMetric({name:"Memory Total (Heap)",value:w,count:1,tagOverrides:(h={},h[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+v.sdkVersion,h)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:E-w,count:1,tagOverrides:(g={},g[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+v.sdkVersion,g)})}},l}();s.AutoCollectNativePerformance=p}),Aa=O((s,k)=>{"use strict";var c=ce(),v=function(){function _(p,l,u,h){this._buffer=[],this._lastSend=0,this._isDisabled=p,this._getBatchSize=l,this._getBatchIntervalMs=u,this._sender=h}return _.prototype.setUseDiskRetryCaching=function(p,l,u){this._sender.setDiskRetryMode(p,l,u)},_.prototype.send=function(p){var l=this;if(!this._isDisabled()){if(!p){c.warn("Cannot send null/undefined telemetry");return}if(this._buffer.push(p),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){l._timeoutHandle=null,l.triggerSend(!1)},this._getBatchIntervalMs()))}},_.prototype.triggerSend=function(p,l){var u=this._buffer.length<1;u||(p?(this._sender.saveOnCrash(this._buffer),typeof l=="function"&&l("data saved on crash")):this._sender.send(this._buffer,l)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,u&&typeof l=="function"&&l("no data to send")},_}();k.exports=v}),zo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.azureRoleEnvironmentTelemetryProcessor=void 0;function k(c,v){process.env.WEBSITE_SITE_NAME&&(c.tags[v.keys.cloudRole]=process.env.WEBSITE_SITE_NAME)}s.azureRoleEnvironmentTelemetryProcessor=k}),Qo=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.getSamplingHashCode=s.samplingTelemetryProcessor=void 0;var k=_t();function c(_,p){var l=_.sampleRate,u=!1;return l==null||l>=100||_.data&&k.TelemetryType.Metric===k.baseTypeToTelemetryType(_.data.baseType)?!0:(p.correlationContext&&p.correlationContext.operation?u=v(p.correlationContext.operation.id)<l:u=Math.random()*100<l,u)}s.samplingTelemetryProcessor=c;function v(_){var p=-2147483648,l=2147483647,u=5381;if(!_)return 0;for(;_.length<8;)_=_+_;for(var h=0;h<_.length;h++)u=((u<<5)+u|0)+_.charCodeAt(h)|0;return u=u<=p?l:Math.abs(u),u/l*100}s.getSamplingHashCode=v}),bd=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.performanceMetricsTelemetryProcessor=void 0;var k=$s(),c=_t();function v(_,p){switch(p&&p.addDocument(_),_.data.baseType){case c.TelemetryTypeString.Exception:k.countException();break;case c.TelemetryTypeString.Request:var l=_.data.baseData;k.countRequest(l.duration,l.success);break;case c.TelemetryTypeString.Dependency:var u=_.data.baseData;k.countDependency(u.duration,u.success);break}return!0}s.performanceMetricsTelemetryProcessor=v}),Ql=O(s=>{"use strict";var k=s&&s.__assign||function(){return k=Object.assign||function(l){for(var u,h=1,g=arguments.length;h<g;h++){u=arguments[h];for(var y in u)Object.prototype.hasOwnProperty.call(u,y)&&(l[y]=u[y])}return l},k.apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0}),s.preAggregatedMetricsTelemetryProcessor=void 0;var c=_t(),v=$o(),_=_t();function p(l,u){if(v.isEnabled())switch(l.data.baseType){case _.TelemetryTypeString.Exception:var h=l.data.baseData;h.properties=k(k({},h.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var g={cloudRoleInstance:l.tags[u.keys.cloudRoleInstance],cloudRoleName:l.tags[u.keys.cloudRole]};v.countException(g);break;case _.TelemetryTypeString.Trace:var y=l.data.baseData;y.properties=k(k({},y.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var f={cloudRoleInstance:l.tags[u.keys.cloudRoleInstance],cloudRoleName:l.tags[u.keys.cloudRole],traceSeverityLevel:c.SeverityLevel[y.severity]};v.countTrace(f);break;case _.TelemetryTypeString.Request:var w=l.data.baseData;w.properties=k(k({},w.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var E={cloudRoleInstance:l.tags[u.keys.cloudRoleInstance],cloudRoleName:l.tags[u.keys.cloudRole],operationSynthetic:l.tags[u.keys.operationSyntheticSource],requestSuccess:w.success,requestResultCode:w.responseCode};v.countRequest(w.duration,E);break;case _.TelemetryTypeString.Dependency:var R=l.data.baseData;R.properties=k(k({},R.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var C={cloudRoleInstance:l.tags[u.keys.cloudRoleInstance],cloudRoleName:l.tags[u.keys.cloudRole],operationSynthetic:l.tags[u.keys.operationSyntheticSource],dependencySuccess:R.success,dependencyType:R.type,dependencyTarget:R.target,dependencyResultCode:R.resultCode};v.countDependency(R.duration,C);break}return!0}s.preAggregatedMetricsTelemetryProcessor=p}),wd=O(s=>{"use strict";var k=s&&s.__createBinding||(Object.create?function(v,_,p,l){l===void 0&&(l=p),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[p]}})}:function(v,_,p,l){l===void 0&&(l=p),v[l]=_[p]}),c=s&&s.__exportStar||function(v,_){for(var p in v)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&k(_,v,p)};Object.defineProperty(s,"__esModule",{value:!0}),c(zo(),s),c(Qo(),s),c(bd(),s),c(Ql(),s)}),Wo=O((s,k)=>{"use strict";var c=s&&s.__awaiter||function(E,R,C,D){function x(Q){return Q instanceof C?Q:new C(function(te){te(Q)})}return new(C||(C=Promise))(function(Q,te){function K(Te){try{_e(D.next(Te))}catch(Re){te(Re)}}function ue(Te){try{_e(D.throw(Te))}catch(Re){te(Re)}}function _e(Te){Te.done?Q(Te.value):x(Te.value).then(K,ue)}_e((D=D.apply(E,R||[])).next())})},v=s&&s.__generator||function(E,R){var C={label:0,sent:function(){if(Q[0]&1)throw Q[1];return Q[1]},trys:[],ops:[]},D,x,Q,te;return te={next:K(0),throw:K(1),return:K(2)},typeof Symbol=="function"&&(te[Symbol.iterator]=function(){return this}),te;function K(_e){return function(Te){return ue([_e,Te])}}function ue(_e){if(D)throw new TypeError("Generator is already executing.");for(;C;)try{if(D=1,x&&(Q=_e[0]&2?x.return:_e[0]?x.throw||((Q=x.return)&&Q.call(x),0):x.next)&&!(Q=Q.call(x,_e[1])).done)return Q;switch(x=0,Q&&(_e=[_e[0]&2,Q.value]),_e[0]){case 0:case 1:Q=_e;break;case 4:return C.label++,{value:_e[1],done:!1};case 5:C.label++,x=_e[1],_e=[0];continue;case 7:_e=C.ops.pop(),C.trys.pop();continue;default:if(Q=C.trys,!(Q=Q.length>0&&Q[Q.length-1])&&(_e[0]===6||_e[0]===2)){C=0;continue}if(_e[0]===3&&(!Q||_e[1]>Q[0]&&_e[1]<Q[3])){C.label=_e[1];break}if(_e[0]===6&&C.label<Q[1]){C.label=Q[1],Q=_e;break}if(Q&&C.label<Q[2]){C.label=Q[2],C.ops.push(_e);break}Q[2]&&C.ops.pop(),C.trys.pop();continue}_e=R.call(E,C)}catch(Te){_e=[6,Te],x=0}finally{D=Q=0}if(_e[0]&5)throw _e[1];return{value:_e[0]?_e[1]:void 0,done:!0}}},_=q(5747),p=q(2087),l=q(5622),u=q(8761),h=q(3129),g=ce(),y=ps(),f=zr(),w=function(){function E(R,C,D){if(this._redirectedHost=null,this._config=R,this._onSuccess=C,this._onError=D,this._enableDiskRetryMode=!1,this._resendInterval=E.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=E.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._fileCleanupTimer=null,this._tempDir=l.join(p.tmpdir(),E.TEMPDIR_PREFIX+this._config.instrumentationKey),!E.OS_PROVIDES_FILE_PROTECTION)if(E.USE_ICACLS){try{E.OS_PROVIDES_FILE_PROTECTION=_.existsSync(E.ICACLS_PATH)}catch(x){}E.OS_PROVIDES_FILE_PROTECTION||g.warn(E.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else E.OS_PROVIDES_FILE_PROTECTION=!0}return E.prototype.setDiskRetryMode=function(R,C,D){var x=this;this._enableDiskRetryMode=E.OS_PROVIDES_FILE_PROTECTION&&R,typeof C=="number"&&C>=0&&(this._resendInterval=Math.floor(C)),typeof D=="number"&&D>=0&&(this._maxBytesOnDisk=Math.floor(D)),R&&!E.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,g.warn(E.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout(function(){x._fileCleanupTask()},E.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref()):this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer)},E.prototype.send=function(R,C){return c(this,void 0,void 0,function(){var D,x,Q,te,K=this;return v(this,function(ue){return R&&(D=this._redirectedHost||this._config.endpointUrl,x={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},Q="",R.forEach(function(_e){var Te=K._stringify(_e);typeof Te=="string"&&(Q+=Te+`
`)}),Q.length>0&&(Q=Q.substring(0,Q.length-1)),te=Buffer.from?Buffer.from(Q):new Buffer(Q),u.gzip(te,function(_e,Te){var Re=Te;_e?(g.warn(_e),Re=te,x.headers["Content-Length"]=te.length.toString()):(x.headers["Content-Encoding"]="gzip",x.headers["Content-Length"]=Te.length.toString()),g.info(E.TAG,x),x[y.disableCollectionRequestOption]=!0;var xe=function(He){He.setEncoding("utf-8");var ze="";He.on("data",function(ut){ze+=ut}),He.on("end",function(){if(K._numConsecutiveFailures=0,K._enableDiskRetryMode){if(He.statusCode===200)K._resendTimer||(K._resendTimer=setTimeout(function(){K._resendTimer=null,K._sendFirstFileOnDisk()},K._resendInterval),K._resendTimer.unref());else if(K._isRetriable(He.statusCode))try{var ut=JSON.parse(ze),at=[];ut.errors.forEach(function(tt){K._isRetriable(tt.statusCode)&&at.push(R[tt.index])}),at.length>0&&K._storeToDisk(at)}catch(tt){K._storeToDisk(R)}}if(He.statusCode===307||He.statusCode===308)if(K._numConsecutiveRedirects++,K._numConsecutiveRedirects<10){var Ct=He.headers.location?He.headers.location.toString():null;Ct&&(K._redirectedHost=Ct,K.send(R,C))}else typeof C=="function"&&C("Error sending telemetry because of circular redirects.");else K._numConsecutiveRedirects=0,typeof C=="function"&&C(ze),g.info(E.TAG,ze),typeof K._onSuccess=="function"&&K._onSuccess(ze)})},qe=f.makeRequest(K._config,D,x,xe);qe.on("error",function(He){if(K._numConsecutiveFailures++,!K._enableDiskRetryMode||K._numConsecutiveFailures>0&&K._numConsecutiveFailures%E.MAX_CONNECTION_FAILURES_BEFORE_WARN==0){var ze="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";K._enableDiskRetryMode&&(ze="Ingestion endpoint could not be reached "+K._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),g.warn(E.TAG,ze,f.dumpObj(He))}else{var ze="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";g.info(E.TAG,ze,f.dumpObj(He))}K._onErrorHelper(He),typeof C=="function"&&(He&&C(f.dumpObj(He)),C("Error sending telemetry")),K._enableDiskRetryMode&&K._storeToDisk(R)}),qe.write(Re),qe.end()})),[2]})})},E.prototype.saveOnCrash=function(R){this._enableDiskRetryMode&&this._storeToDiskSync(this._stringify(R))},E.prototype._isRetriable=function(R){return R===206||R===408||R===429||R===439||R===500||R===503},E.prototype._runICACLS=function(R,C){var D=h.spawn(E.ICACLS_PATH,R,{windowsHide:!0});D.on("error",function(x){return C(x)}),D.on("close",function(x,Q){return C(x===0?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+x+")"))})},E.prototype._runICACLSSync=function(R){if(h.spawnSync){var C=h.spawnSync(E.ICACLS_PATH,R,{windowsHide:!0});if(C.error)throw C.error;if(C.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+C.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},E.prototype._getACLIdentity=function(R){if(E.ACL_IDENTITY)return R(null,E.ACL_IDENTITY);var C=h.spawn(E.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),D="";C.stdout.on("data",function(x){return D+=x}),C.on("error",function(x){return R(x,null)}),C.on("close",function(x,Q){return E.ACL_IDENTITY=D&&D.trim(),R(x===0?null:new Error("Getting ACL identity did not succeed (PS returned code "+x+")"),E.ACL_IDENTITY)})},E.prototype._getACLIdentitySync=function(){if(E.ACL_IDENTITY)return E.ACL_IDENTITY;if(h.spawnSync){var R=h.spawnSync(E.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(R.error)throw R.error;if(R.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+R.status+")");return E.ACL_IDENTITY=R.stdout&&R.stdout.toString().trim(),E.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},E.prototype._getACLArguments=function(R,C){return[R,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",C+":(OI)(CI)F","/inheritance:r"]},E.prototype._applyACLRules=function(R,C){var D=this;if(!E.USE_ICACLS)return C(null);if(E.ACLED_DIRECTORIES[R]===void 0)E.ACLED_DIRECTORIES[R]=!1,this._getACLIdentity(function(x,Q){if(x)return E.ACLED_DIRECTORIES[R]=!1,C(x);D._runICACLS(D._getACLArguments(R,Q),function(te){return E.ACLED_DIRECTORIES[R]=!te,C(te)})});else return C(E.ACLED_DIRECTORIES[R]?null:new Error("Setting ACL restrictions did not succeed (cached result)"))},E.prototype._applyACLRulesSync=function(R){if(E.USE_ICACLS){if(E.ACLED_DIRECTORIES[R]===void 0){this._runICACLSSync(this._getACLArguments(R,this._getACLIdentitySync())),E.ACLED_DIRECTORIES[R]=!0;return}else if(!E.ACLED_DIRECTORIES[R])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},E.prototype._confirmDirExists=function(R,C){var D=this;_.lstat(R,function(x,Q){x&&x.code==="ENOENT"?_.mkdir(R,function(te){te&&te.code!=="EEXIST"?C(te):D._applyACLRules(R,C)}):!x&&Q.isDirectory()?D._applyACLRules(R,C):C(x||new Error("Path existed but was not a directory"))})},E.prototype._getShallowDirectorySize=function(R,C){_.readdir(R,function(D,x){if(D)return C(D,-1);var Q=null,te=0,K=0;if(x.length===0){C(null,0);return}for(var ue=0;ue<x.length;ue++)_.stat(l.join(R,x[ue]),function(_e,Te){K++,_e?Q=_e:Te.isFile()&&(te+=Te.size),K===x.length&&(Q?C(Q,-1):C(Q,te))})})},E.prototype._getShallowDirectorySizeSync=function(R){for(var C=_.readdirSync(R),D=0,x=0;x<C.length;x++)D+=_.statSync(l.join(R,C[x])).size;return D},E.prototype._storeToDisk=function(R){var C=this;g.info(E.TAG,"Checking existence of data storage directory: "+this._tempDir),this._confirmDirExists(this._tempDir,function(D){if(D){g.warn(E.TAG,"Error while checking/creating directory: "+(D&&D.message)),C._onErrorHelper(D);return}C._getShallowDirectorySize(C._tempDir,function(x,Q){if(x||Q<0){g.warn(E.TAG,"Error while checking directory size: "+(x&&x.message)),C._onErrorHelper(x);return}else if(Q>C._maxBytesOnDisk){g.warn(E.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+Q);return}var te=new Date().getTime()+".ai.json",K=l.join(C._tempDir,te);g.info(E.TAG,"saving data to disk at: "+K),_.writeFile(K,C._stringify(R),{mode:384},function(ue){return C._onErrorHelper(ue)})})})},E.prototype._storeToDiskSync=function(R){try{g.info(E.TAG,"Checking existence of data storage directory: "+this._tempDir),_.existsSync(this._tempDir)||_.mkdirSync(this._tempDir),this._applyACLRulesSync(this._tempDir);var C=this._getShallowDirectorySizeSync(this._tempDir);if(C>this._maxBytesOnDisk){g.info(E.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+C);return}var D=new Date().getTime()+".ai.json",x=l.join(this._tempDir,D);g.info(E.TAG,"saving data before crash to disk at: "+x),_.writeFileSync(x,R,{mode:384})}catch(Q){g.warn(E.TAG,"Error while saving data to disk: "+(Q&&Q.message)),this._onErrorHelper(Q)}},E.prototype._sendFirstFileOnDisk=function(){var R=this;_.exists(this._tempDir,function(C){C&&_.readdir(R._tempDir,function(D,x){if(D)R._onErrorHelper(D);else if(x=x.filter(function(K){return l.basename(K).indexOf(".ai.json")>-1}),x.length>0){var Q=x[0],te=l.join(R._tempDir,Q);_.readFile(te,function(K,ue){K?R._onErrorHelper(K):_.unlink(te,function(_e){if(_e)R._onErrorHelper(_e);else try{var Te=JSON.parse(ue.toString());R.send(Te)}catch(Re){g.warn("Failed to read persisted file",Re)}})})}})})},E.prototype._onErrorHelper=function(R){typeof this._onError=="function"&&this._onError(R)},E.prototype._stringify=function(R){try{return JSON.stringify(R)}catch(C){g.warn("Failed to serialize payload",C,R)}},E.prototype._fileCleanupTask=function(){var R=this;_.exists(this._tempDir,function(C){C&&_.readdir(R._tempDir,function(D,x){D?R._onErrorHelper(D):(x=x.filter(function(Q){return l.basename(Q).indexOf(".ai.json")>-1}),x.length>0&&x.forEach(function(Q){var te=new Date(parseInt(Q.split(".ai.json")[0])),K=new Date(+new Date-E.FILE_RETEMPTION_PERIOD)>te;if(K){var ue=l.join(R._tempDir,Q);_.unlink(ue,function(_e){_e&&R._onErrorHelper(_e)})}}))})})},E.TAG="Sender",E.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",E.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",E.ACLED_DIRECTORIES={},E.ACL_IDENTITY=null,E.WAIT_BETWEEN_RESEND=60*1e3,E.MAX_BYTES_ON_DISK=50*1024*1024,E.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,E.CLEANUP_TIMEOUT=60*60*1e3,E.FILE_RETEMPTION_PERIOD=7*24*60*60*1e3,E.TEMPDIR_PREFIX="appInsights-node",E.OS_PROVIDES_FILE_PROTECTION=!1,E.USE_ICACLS=p.type()==="Windows_NT",E}();k.exports=w}),Wl=O((s,k)=>{"use strict";var c=_t(),v=zr(),_=ji(),p=function(){function u(){}return u.createEnvelope=function(h,g,y,f,w){var E=null;switch(g){case c.TelemetryType.Trace:E=u.createTraceData(h);break;case c.TelemetryType.Dependency:E=u.createDependencyData(h);break;case c.TelemetryType.Event:E=u.createEventData(h);break;case c.TelemetryType.Exception:E=u.createExceptionData(h);break;case c.TelemetryType.Request:E=u.createRequestData(h);break;case c.TelemetryType.Metric:E=u.createMetricData(h);break;case c.TelemetryType.Availability:E=u.createAvailabilityData(h);break;case c.TelemetryType.PageView:E=u.createPageViewData(h);break}if(y&&c.domainSupportsProperties(E.baseData)){if(E&&E.baseData)if(!E.baseData.properties)E.baseData.properties=y;else for(var R in y)E.baseData.properties[R]||(E.baseData.properties[R]=y[R]);E.baseData.properties=v.validateStringMap(E.baseData.properties)}var C=w&&w.instrumentationKey||"",D=new c.Envelope;return D.data=E,D.iKey=C,D.name="Microsoft.ApplicationInsights."+C.replace(/-/g,"")+"."+E.baseType.substr(0,E.baseType.length-4),D.tags=this.getTags(f,h.tagOverrides),D.time=new Date().toISOString(),D.ver=1,D.sampleRate=w?w.samplingPercentage:100,g===c.TelemetryType.Metric&&(D.sampleRate=100),D},u.createTraceData=function(h){var g=new c.MessageData;g.message=h.message,g.properties=h.properties,isNaN(h.severity)?g.severityLevel=c.SeverityLevel.Information:g.severityLevel=h.severity;var y=new c.Data;return y.baseType=c.telemetryTypeToBaseType(c.TelemetryType.Trace),y.baseData=g,y},u.createDependencyData=function(h){var g=new c.RemoteDependencyData;typeof h.name=="string"&&(g.name=h.name.length>1024?h.name.slice(0,1021)+"...":h.name),g.data=h.data,g.target=h.target,g.duration=v.msToTimeSpan(h.duration),g.success=h.success,g.type=h.dependencyTypeName,g.properties=h.properties,g.resultCode=h.resultCode?h.resultCode+"":"",h.id?g.id=h.id:g.id=v.w3cTraceId();var y=new c.Data;return y.baseType=c.telemetryTypeToBaseType(c.TelemetryType.Dependency),y.baseData=g,y},u.createEventData=function(h){var g=new c.EventData;g.name=h.name,g.properties=h.properties,g.measurements=h.measurements;var y=new c.Data;return y.baseType=c.telemetryTypeToBaseType(c.TelemetryType.Event),y.baseData=g,y},u.createExceptionData=function(h){var g=new c.ExceptionData;g.properties=h.properties,isNaN(h.severity)?g.severityLevel=c.SeverityLevel.Error:g.severityLevel=h.severity,g.measurements=h.measurements,g.exceptions=[];var y=h.exception.stack,f=new c.ExceptionDetails;f.message=h.exception.message,f.typeName=h.exception.name,f.parsedStack=this.parseStack(y),f.hasFullStack=v.isArray(f.parsedStack)&&f.parsedStack.length>0,g.exceptions.push(f);var w=new c.Data;return w.baseType=c.telemetryTypeToBaseType(c.TelemetryType.Exception),w.baseData=g,w},u.createRequestData=function(h){var g=new c.RequestData;h.id?g.id=h.id:g.id=v.w3cTraceId(),g.name=h.name,g.url=h.url,g.source=h.source,g.duration=v.msToTimeSpan(h.duration),g.responseCode=h.resultCode?h.resultCode+"":"",g.success=h.success,g.properties=h.properties;var y=new c.Data;return y.baseType=c.telemetryTypeToBaseType(c.TelemetryType.Request),y.baseData=g,y},u.createMetricData=function(h){var g=new c.MetricData;g.metrics=[];var y=new c.DataPoint;y.count=isNaN(h.count)?1:h.count,y.kind=c.DataPointType.Aggregation,y.max=isNaN(h.max)?h.value:h.max,y.min=isNaN(h.min)?h.value:h.min,y.name=h.name,y.stdDev=isNaN(h.stdDev)?0:h.stdDev,y.value=h.value,g.metrics.push(y),g.properties=h.properties;var f=new c.Data;return f.baseType=c.telemetryTypeToBaseType(c.TelemetryType.Metric),f.baseData=g,f},u.createAvailabilityData=function(h){var g=new c.AvailabilityData;h.id?g.id=h.id:g.id=v.w3cTraceId(),g.name=h.name,g.duration=v.msToTimeSpan(h.duration),g.success=h.success,g.runLocation=h.runLocation,g.message=h.message,g.measurements=h.measurements,g.properties=h.properties;var y=new c.Data;return y.baseType=c.telemetryTypeToBaseType(c.TelemetryType.Availability),y.baseData=g,y},u.createPageViewData=function(h){var g=new c.PageViewData;g.name=h.name,g.duration=v.msToTimeSpan(h.duration),g.url=h.url,g.measurements=h.measurements,g.properties=h.properties;var y=new c.Data;return y.baseType=c.telemetryTypeToBaseType(c.TelemetryType.PageView),y.baseData=g,y},u.getTags=function(h,g){var y=_.CorrelationContextManager.getCurrentContext(),f={};if(h&&h.tags)for(var w in h.tags)f[w]=h.tags[w];if(g)for(var w in g)f[w]=g[w];return y&&(f[h.keys.operationId]=f[h.keys.operationId]||y.operation.id,f[h.keys.operationName]=f[h.keys.operationName]||y.operation.name,f[h.keys.operationParentId]=f[h.keys.operationParentId]||y.operation.parentId),f},u.parseStack=function(h){var g=void 0;if(typeof h=="string"){var y=h.split(`
`);g=[];for(var f=0,w=0,E=0;E<=y.length;E++){var R=y[E];if(l.regex.test(R)){var C=new l(y[E],f++);w+=C.sizeInBytes,g.push(C)}}var D=32*1024;if(w>D)for(var x=0,Q=g.length-1,te=0,K=x,ue=Q;x<Q;){var _e=g[x].sizeInBytes,Te=g[Q].sizeInBytes;if(te+=_e+Te,te>D){var Re=ue-K+1;g.splice(K,Re);break}K=x,ue=Q,x++,Q--}}return g},u}(),l=function(){function u(h,g){this.sizeInBytes=0,this.level=g,this.method="<no_method>",this.assembly=v.trim(h);var y=h.match(u.regex);y&&y.length>=5&&(this.method=v.trim(y[2])||this.method,this.fileName=v.trim(y[4])||"<no_filename>",this.line=parseInt(y[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=u.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return u.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,u.baseSize=58,u}();k.exports=p}),Kl=O((s,k)=>{"use strict";var c=q(8835),v=jo(),_=Hs(),p=_t(),l=Aa(),u=wd(),h=ji(),g=Wo(),y=zr(),f=ce(),w=Wl(),E=function(){function R(C){this._telemetryProcessors=[],this._enableAzureProperties=!1;var D=new v(C);this.config=D,this.context=new _,this.commonProperties={};var x=new g(this.config);this.channel=new l(function(){return D.disableAppInsights},function(){return D.maxBatchSize},function(){return D.maxBatchIntervalMs},x)}return R.prototype.trackAvailability=function(C){this.track(C,p.TelemetryType.Availability)},R.prototype.trackPageView=function(C){this.track(C,p.TelemetryType.PageView)},R.prototype.trackTrace=function(C){this.track(C,p.TelemetryType.Trace)},R.prototype.trackMetric=function(C){this.track(C,p.TelemetryType.Metric)},R.prototype.trackException=function(C){C&&C.exception&&!y.isError(C.exception)&&(C.exception=new Error(C.exception.toString())),this.track(C,p.TelemetryType.Exception)},R.prototype.trackEvent=function(C){this.track(C,p.TelemetryType.Event)},R.prototype.trackRequest=function(C){this.track(C,p.TelemetryType.Request)},R.prototype.trackDependency=function(C){C&&!C.target&&C.data&&(C.target=c.parse(C.data).host),this.track(C,p.TelemetryType.Dependency)},R.prototype.flush=function(C){this.channel.triggerSend(C?!!C.isAppCrashing:!1,C?C.callback:void 0)},R.prototype.track=function(C,D){if(C&&p.telemetryTypeToBaseType(D)){var x=w.createEnvelope(C,D,this.commonProperties,this.context,this.config);C.time&&(x.time=C.time.toISOString()),this._enableAzureProperties&&u.azureRoleEnvironmentTelemetryProcessor(x,this.context);var Q=this.runTelemetryProcessors(x,C.contextObjects);Q=Q&&u.samplingTelemetryProcessor(x,{correlationContext:h.CorrelationContextManager.getCurrentContext()}),u.preAggregatedMetricsTelemetryProcessor(x,this.context),Q&&(u.performanceMetricsTelemetryProcessor(x,this.quickPulseClient),this.channel.send(x))}else f.warn("track() requires telemetry object and telemetryType to be specified.")},R.prototype.setAutoPopulateAzureProperties=function(C){this._enableAzureProperties=C},R.prototype.addTelemetryProcessor=function(C){this._telemetryProcessors.push(C)},R.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},R.prototype.runTelemetryProcessors=function(C,D){var x=!0,Q=this._telemetryProcessors.length;if(Q===0)return x;D=D||{},D.correlationContext=h.CorrelationContextManager.getCurrentContext();for(var te=0;te<Q;++te)try{var K=this._telemetryProcessors[te];if(K&&K.apply(null,[C,D])===!1){x=!1;break}}catch(ue){x=!0,f.warn("One of telemetry processors failed, telemetry item will be sent.",ue,C)}return x&&(C&&C.tags&&(C.tags=y.validateStringMap(C.tags)),C&&C.data&&C.data.baseData&&C.data.baseData.properties&&(C.data.baseData.properties=y.validateStringMap(C.data.baseData.properties))),x},R}();k.exports=E}),Yl=O((s,k)=>{"use strict";var c=s&&s.__extends||function(){var h=function(g,y){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,w){f.__proto__=w}||function(f,w){for(var E in w)Object.prototype.hasOwnProperty.call(w,E)&&(f[E]=w[E])},h(g,y)};return function(g,y){h(g,y);function f(){this.constructor=g}g.prototype=y===null?Object.create(y):(f.prototype=y.prototype,new f)}}(),v=Kl(),_=Ho(),p=ps(),l=ce(),u=function(h){c(g,h);function g(){return h!==null&&h.apply(this,arguments)||this}return g.prototype.trackNodeHttpRequestSync=function(y){y&&y.request&&y.response&&y.duration?_.trackRequestSync(this,y):l.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},g.prototype.trackNodeHttpRequest=function(y){(y.duration||y.error)&&l.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),y&&y.request&&y.response?_.trackRequest(this,y):l.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},g.prototype.trackNodeHttpDependency=function(y){y&&y.request?p.trackRequest(this,y):l.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},g}(v);k.exports=u}),Xl=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Ko=O(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.dispose=s.Configuration=s.wrapWithCorrelationContext=s.startOperation=s.getCorrelationContext=s.start=s.setup=s.liveMetricsClient=s.defaultClient=s.DistributedTracingModes=void 0;var k=ji(),c=hs(),v=ql(),_=$s(),p=$o(),l=Vl(),u=ps(),h=Ho(),g=$i(),y=ce(),f=jl(),w=zl();s.TelemetryClient=Yl(),s.Contracts=_t(),s.azureFunctionsTypes=Xl();var E;(function(et){et[et.AI=0]="AI",et[et.AI_AND_W3C=1]="AI_AND_W3C"})(E=s.DistributedTracingModes||(s.DistributedTracingModes={}));var R=!0,C=!1,D=!0,x=!0,Q=!0,te=!1,K=!0,ue=!0,_e=!0,Te=!0,Re,xe=!1,qe=!0,He,ze=void 0,ut=void 0,at,Ct,tt,Fe,Be,Ve,Xe,rt,lt=!1,Je;function kt(et){return s.defaultClient?y.info("The default client is already setup"):(s.defaultClient=new s.TelemetryClient(et),at=new c(s.defaultClient),Ct=new v(s.defaultClient),tt=new _(s.defaultClient),Fe=new p(s.defaultClient),Be=new l(s.defaultClient),Xe=new h(s.defaultClient),rt=new u(s.defaultClient),Ve||(Ve=new w.AutoCollectNativePerformance(s.defaultClient))),s.defaultClient&&s.defaultClient.channel&&s.defaultClient.channel.setUseDiskRetryCaching(_e,ze,ut),Zt}s.setup=kt;function qt(){return s.defaultClient?(lt=!0,at.enable(R,C),Ct.enable(D),tt.enable(x),Fe.enable(Q),Be.enable(te,s.defaultClient.config),Ve.enable(qe,He),Xe.useAutoCorrelation(Te,Re),Xe.enable(K),rt.enable(ue),s.liveMetricsClient&&xe&&s.liveMetricsClient.enable(xe)):y.warn("Start cannot be called before setup"),Zt}s.start=qt;function Nt(){return Te?k.CorrelationContextManager.getCurrentContext():null}s.getCorrelationContext=Nt;function Tt(et,Ze){return k.CorrelationContextManager.startOperation(et,Ze)}s.startOperation=Tt;function gt(et,Ze){return k.CorrelationContextManager.wrapCallback(et,Ze)}s.wrapWithCorrelationContext=gt;var Zt=function(){function et(){}return et.setDistributedTracingMode=function(Ze){return g.w3cEnabled=Ze===E.AI_AND_W3C,et},et.setAutoCollectConsole=function(Ze,ot){return ot===void 0&&(ot=!1),R=Ze,C=ot,lt&&at.enable(Ze,ot),et},et.setAutoCollectExceptions=function(Ze){return D=Ze,lt&&Ct.enable(Ze),et},et.setAutoCollectPerformance=function(Ze,ot){ot===void 0&&(ot=!0),x=Ze;var Et=w.AutoCollectNativePerformance.parseEnabled(ot);return qe=Et.isEnabled,He=Et.disabledMetrics,lt&&(tt.enable(Ze),Ve.enable(Et.isEnabled,Et.disabledMetrics)),et},et.setAutoCollectPreAggregatedMetrics=function(Ze){return Q=Ze,lt&&Fe.enable(Ze),et},et.setAutoCollectHeartbeat=function(Ze){return te=Ze,lt&&Be.enable(Ze,s.defaultClient.config),et},et.setAutoCollectRequests=function(Ze){return K=Ze,lt&&Xe.enable(Ze),et},et.setAutoCollectDependencies=function(Ze){return ue=Ze,lt&&rt.enable(Ze),et},et.setAutoDependencyCorrelation=function(Ze,ot){return Te=Ze,Re=ot,lt&&Xe.useAutoCorrelation(Ze,ot),et},et.setUseDiskRetryCaching=function(Ze,ot,Et){return _e=Ze,ze=ot,ut=Et,s.defaultClient&&s.defaultClient.channel&&s.defaultClient.channel.setUseDiskRetryCaching(Ze,ot,Et),et},et.setInternalLogging=function(Ze,ot){return Ze===void 0&&(Ze=!1),ot===void 0&&(ot=!0),y.enableDebug=Ze,y.disableWarnings=!ot,et},et.setSendLiveMetrics=function(Ze){return Ze===void 0&&(Ze=!1),s.defaultClient?(!s.liveMetricsClient&&Ze?(s.liveMetricsClient=new f(s.defaultClient.config,null),Je=new _(s.liveMetricsClient,1e3,!0),s.liveMetricsClient.addCollector(Je),s.defaultClient.quickPulseClient=s.liveMetricsClient):s.liveMetricsClient&&s.liveMetricsClient.enable(Ze),xe=Ze,et):(y.warn("Live metrics client cannot be setup without the default client"),et)},et.start=qt,et}();s.Configuration=Zt;function ar(){g.w3cEnabled=!0,s.defaultClient=null,lt=!1,at&&at.dispose(),Ct&&Ct.dispose(),tt&&tt.dispose(),Fe&&Fe.dispose(),Be&&Be.dispose(),Ve&&Ve.dispose(),Xe&&Xe.dispose(),rt&&rt.dispose(),s.liveMetricsClient&&(s.liveMetricsClient.enable(!1),xe=!1,s.liveMetricsClient=void 0)}s.dispose=ar});V(ne,{default:()=>Wn});var Ia=j(q(2087)),zi=j(q(7549)),Lt=j(q(7549)),en=j(q(7549)),Le;(function(s){s.ON="on",s.OFF="off"})(Le||(Le={}));function ms(){let s="telemetry",k="enableTelemetry";return en.env.isTelemetryEnabled!==void 0?en.env.isTelemetryEnabled?Le.ON:Le.OFF:en.workspace.getConfiguration(s).get(k)?Le.ON:Le.OFF}var _d=class{constructor(s,k,c,v,_){this.extensionId=s,this.extensionVersion=k,this.telemetryAppender=c,this.osShim=v,this.firstParty=!1,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this.firstParty=!!_,this.updateUserOptStatus(),Lt.env.onDidChangeTelemetryEnabled!==void 0?(this.disposables.push(Lt.env.onDidChangeTelemetryEnabled(()=>this.updateUserOptStatus())),this.disposables.push(Lt.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))):this.disposables.push(Lt.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))}updateUserOptStatus(){let s=ms();this.userOptIn=s===Le.ON,this.errorOptIn=s===Le.ON,(this.userOptIn||this.errorOptIn)&&this.telemetryAppender.instantiateAppender()}cleanRemoteName(s){if(!s)return"none";let k="other";return["ssh-remote","dev-container","attached-container","wsl","codespaces"].forEach(c=>{s.indexOf(`${c}+`)===0&&(k=c)}),k}get extension(){return this._extension===void 0&&(this._extension=Lt.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(s,k){if(s===null||typeof s!="object"||typeof k!="function")return s;let c={};for(let v in s)c[v]=k(v,s[v]);return c}shouldSendErrorTelemetry(){return this.errorOptIn===!1?!1:this.firstParty?this.cleanRemoteName(Lt.env.remoteName)!=="other"?!0:!(this.extension===void 0||this.extension.extensionKind===Lt.ExtensionKind.Workspace||Lt.env.uiKind===Lt.UIKind.Web):!0}getCommonProperties(){let s=Object.create(null);if(s["common.os"]=this.osShim.platform,s["common.nodeArch"]=this.osShim.architecture,s["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),s["common.extname"]=this.extensionId,s["common.extversion"]=this.extensionVersion,Lt&&Lt.env){switch(s["common.vscodemachineid"]=Lt.env.machineId,s["common.vscodesessionid"]=Lt.env.sessionId,s["common.vscodeversion"]=Lt.version,s["common.isnewappinstall"]=Lt.env.isNewAppInstall?Lt.env.isNewAppInstall.toString():"false",s["common.product"]=Lt.env.appHost,Lt.env.uiKind){case Lt.UIKind.Web:s["common.uikind"]="web";break;case Lt.UIKind.Desktop:s["common.uikind"]="desktop";break;default:s["common.uikind"]="unknown"}s["common.remotename"]=this.cleanRemoteName(Lt.env.remoteName)}return s}anonymizeFilePaths(s,k){let c;if(s==null)return"";let v=[];Lt.env.appRoot!==""&&v.push(new RegExp(Lt.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&v.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let _=s;if(k){let p=[];for(let g of v)for(;(c=g.exec(s))&&c;)p.push([c.index,g.lastIndex]);let l=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,u=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,h=0;for(_="";(c=u.exec(s))&&c;)c[0]&&!l.test(c[0])&&p.every(([g,y])=>c.index<g||c.index>=y)&&(_+=s.substring(h,c.index)+"<REDACTED: user-file-path>",h=u.lastIndex);h<s.length&&(_+=s.substr(h))}for(let p of v)_=_.replace(p,"");return _}removePropertiesWithPossibleUserInfo(s){if(typeof s!="object")return;let k=Object.create(null);for(let c of Object.keys(s)){let v=s[c];if(!v)continue;let _=/@[a-zA-Z0-9-.]+/;/(key|token|sig|signature|password|passwd|pwd)[="':\s]/.test(v.toLowerCase())?k[c]="<REDACTED: secret>":_.test(v)?k[c]="<REDACTED: email>":k[c]=v}return k}sendTelemetryEvent(s,k,c){if(this.userOptIn&&s!==""){k=G(G({},k),this.getCommonProperties());let v=this.cloneAndChange(k,(_,p)=>this.anonymizeFilePaths(p,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${s}`,{properties:this.removePropertiesWithPossibleUserInfo(v),measurements:c})}}sendRawTelemetryEvent(s,k,c){this.userOptIn&&s!==""&&(k=G(G({},k),this.getCommonProperties()),this.telemetryAppender.logEvent(`${this.extensionId}/${s}`,{properties:k,measurements:c}))}sendTelemetryErrorEvent(s,k,c,v){if(this.errorOptIn&&s!==""){k=G(G({},k),this.getCommonProperties());let _=this.cloneAndChange(k,(p,l)=>this.shouldSendErrorTelemetry()?this.anonymizeFilePaths(l,this.firstParty):v===void 0||v.indexOf(p)!==-1?"REDACTED":this.anonymizeFilePaths(l,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${s}`,{properties:this.removePropertiesWithPossibleUserInfo(_),measurements:c})}}sendTelemetryException(s,k,c){if(this.shouldSendErrorTelemetry()&&this.errorOptIn&&s){k=G(G({},k),this.getCommonProperties());let v=this.cloneAndChange(k,(_,p)=>this.anonymizeFilePaths(p,this.firstParty));s.stack&&(s.stack=this.anonymizeFilePaths(s.stack,this.firstParty)),this.telemetryAppender.logException(s,{properties:this.removePropertiesWithPossibleUserInfo(v),measurements:c})}}dispose(){return this.telemetryAppender.flush(),Promise.all(this.disposables.map(s=>s.dispose()))}},Ed=class{constructor(s,k){this._isInstantiated=!1,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=k,this._key=s,ms()!==Le.OFF&&this.instantiateAppender()}logEvent(s,k){if(!this._telemetryClient){!this._isInstantiated&&ms()===Le.ON&&this._eventQueue.push({eventName:s,data:k});return}this._telemetryClient.logEvent(s,k)}logException(s,k){if(!this._telemetryClient){!this._isInstantiated&&ms()!==Le.OFF&&this._exceptionQueue.push({exception:s,data:k});return}this._telemetryClient.logException(s,k)}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:s,data:k})=>this.logEvent(s,k)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:s,data:k})=>this.logException(s,k)),this._exceptionQueue=[]}instantiateAppender(){this._isInstantiated||this._clientFactory(this._key).then(s=>{this._telemetryClient=s,this._isInstantiated=!0,this._flushQueues()}).catch(s=>{console.error(s)})}},Sd=async s=>{let k;try{let c=await Promise.resolve().then(()=>j(Ko()));c.defaultClient?(k=new c.TelemetryClient(s),k.channel.setUseDiskRetryCaching(!0)):(c.setup(s).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setUseDiskRetryCaching(!0).start(),k=c.defaultClient),zi&&zi.env&&(k.context.tags[k.context.keys.userId]=zi.env.machineId,k.context.tags[k.context.keys.sessionId]=zi.env.sessionId,k.context.tags[k.context.keys.cloudRole]=zi.env.appName,k.context.tags[k.context.keys.cloudRoleInstance]=zi.env.appName),s&&s.indexOf("AIF-")===0&&(k.config.endpointUrl="https://vortex.data.microsoft.com/collect/v1")}catch(c){return Promise.reject(c)}return{logEvent:(c,v)=>{k==null||k.trackEvent({name:c,properties:v==null?void 0:v.properties,measurements:v==null?void 0:v.measurements})},logException:(c,v)=>{k==null||k.trackException({exception:c,properties:v==null?void 0:v.properties,measurements:v==null?void 0:v.measurements})},flush:async()=>{k==null||k.flush()}}},Wn=class extends _d{constructor(s,k,c,v){let _=new Ed(c,Sd);c&&c.indexOf("AIF-")===0&&(v=!0),super(s,k,_,{release:Ia.release(),platform:Ia.platform(),architecture:Ia.arch()},v)}}},3255:d=>{function ne(q){var W=new Error("Cannot find module '"+q+"'");throw W.code="MODULE_NOT_FOUND",W}ne.keys=()=>[],ne.resolve=ne,ne.id=3255,d.exports=ne},9118:d=>{function ne(q){var W=new Error("Cannot find module '"+q+"'");throw W.code="MODULE_NOT_FOUND",W}ne.keys=()=>[],ne.resolve=ne,ne.id=9118,d.exports=ne},9035:(d,ne,q)=>{"use strict";var W;W={value:!0};var J=q(5654);ne.X7=J.getExperimentationService,W=J.getExperimentationServiceAsync;var se=q(2560);ne.aU=se.TargetPopulation},5708:(d,ne)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});class q{constructor(J){this.mementoGlobalStorage=J}async getValue(J,se){return await this.mementoGlobalStorage.get(J)||se}setValue(J,se){this.mementoGlobalStorage.update(J,se)}}ne.MementoKeyValueStorage=q},2560:(d,ne,q)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});const W=q(7549);class J{constructor(L,I,P){this.extensionName=L,this.extensionVersion=I,this.targetPopulation=P}static trimVersionSuffix(L){const I=/\-[a-zA-Z0-9]+$/;return L.split(I)[0]}getFilterValue(L){switch(L){case se.ApplicationVersion:return J.trimVersionSuffix(W.version);case se.Build:return W.env.appName;case se.ClientId:return W.env.machineId;case se.ExtensionName:return this.extensionName;case se.ExtensionVersion:return J.trimVersionSuffix(this.extensionVersion);case se.Language:return W.env.language;case se.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let L=new Map,I=Object.values(se);for(let P of I)L.set(P,this.getFilterValue(P));return L}}ne.VSCodeFilterProvider=J;var se;(function(M){M.Market="X-MSEdge-Market",M.CorpNet="X-FD-Corpnet",M.ApplicationVersion="X-VSCode-AppVersion",M.Build="X-VSCode-Build",M.ClientId="X-MSEdge-ClientId",M.ExtensionName="X-VSCode-ExtensionName",M.ExtensionVersion="X-VSCode-ExtensionVersion",M.Language="X-VSCode-Language",M.TargetPopulation="X-VSCode-TargetPopulation"})(se=ne.Filters||(ne.Filters={}));var U;(function(M){M.Team="team",M.Internal="internal",M.Insiders="insider",M.Public="public"})(U=ne.TargetPopulation||(ne.TargetPopulation={}))},5654:(d,ne,q)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});const W=q(2560),J=q(4802),se=q(5708),U="https://default.exp-tas.com/vscode/ab",M="query-expfeature",L="VSCode.ABExp.Features",I="abexp.assignmentcontext",P="VSCode.ABExp.FeatureData",$=1e3*60*30;function G(O,V,B,j,ce,...ee){if(!ce)throw new Error("Memento storage was not provided.");const fe=[new W.VSCodeFilterProvider(O,V,B),...ee],De=new se.MementoKeyValueStorage(ce);return new J.ExperimentationService({filterProviders:fe,telemetry:j,storageKey:P,keyValueStorage:De,featuresTelemetryPropertyName:L,assignmentContextTelemetryPropertyName:I,telemetryEventName:M,endpoint:U,refetchInterval:$})}ne.getExperimentationService=G;async function z(O,V,B,j,ce,...ee){const Se=G(O,V,B,j,ce,...ee);return await Se.initializePromise,Se}ne.getExperimentationServiceAsync=z},2479:d=>{d.exports=ne;function ne(q,W){if(q&&W)return ne(q)(W);if(typeof q!="function")throw new TypeError("need wrapper function");return Object.keys(q).forEach(function(se){J[se]=q[se]}),J;function J(){for(var se=new Array(arguments.length),U=0;U<se.length;U++)se[U]=arguments[U];var M=q.apply(this,se),L=se[se.length-1];return typeof M=="function"&&M!==L&&Object.keys(L).forEach(function(I){M[I]=L[I]}),M}}},9602:d=>{"use strict";d.exports=function(ne){ne.prototype[Symbol.iterator]=function*(){for(let q=this.head;q;q=q.next)yield q.value}}},4411:(d,ne,q)=>{"use strict";d.exports=W,W.Node=M,W.create=W;function W(L){var I=this;if(I instanceof W||(I=new W),I.tail=null,I.head=null,I.length=0,L&&typeof L.forEach=="function")L.forEach(function(G){I.push(G)});else if(arguments.length>0)for(var P=0,$=arguments.length;P<$;P++)I.push(arguments[P]);return I}W.prototype.removeNode=function(L){if(L.list!==this)throw new Error("removing node which does not belong to this list");var I=L.next,P=L.prev;return I&&(I.prev=P),P&&(P.next=I),L===this.head&&(this.head=I),L===this.tail&&(this.tail=P),L.list.length--,L.next=null,L.prev=null,L.list=null,I},W.prototype.unshiftNode=function(L){if(L!==this.head){L.list&&L.list.removeNode(L);var I=this.head;L.list=this,L.next=I,I&&(I.prev=L),this.head=L,this.tail||(this.tail=L),this.length++}},W.prototype.pushNode=function(L){if(L!==this.tail){L.list&&L.list.removeNode(L);var I=this.tail;L.list=this,L.prev=I,I&&(I.next=L),this.tail=L,this.head||(this.head=L),this.length++}},W.prototype.push=function(){for(var L=0,I=arguments.length;L<I;L++)se(this,arguments[L]);return this.length},W.prototype.unshift=function(){for(var L=0,I=arguments.length;L<I;L++)U(this,arguments[L]);return this.length},W.prototype.pop=function(){if(!!this.tail){var L=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,L}},W.prototype.shift=function(){if(!!this.head){var L=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,L}},W.prototype.forEach=function(L,I){I=I||this;for(var P=this.head,$=0;P!==null;$++)L.call(I,P.value,$,this),P=P.next},W.prototype.forEachReverse=function(L,I){I=I||this;for(var P=this.tail,$=this.length-1;P!==null;$--)L.call(I,P.value,$,this),P=P.prev},W.prototype.get=function(L){for(var I=0,P=this.head;P!==null&&I<L;I++)P=P.next;if(I===L&&P!==null)return P.value},W.prototype.getReverse=function(L){for(var I=0,P=this.tail;P!==null&&I<L;I++)P=P.prev;if(I===L&&P!==null)return P.value},W.prototype.map=function(L,I){I=I||this;for(var P=new W,$=this.head;$!==null;)P.push(L.call(I,$.value,this)),$=$.next;return P},W.prototype.mapReverse=function(L,I){I=I||this;for(var P=new W,$=this.tail;$!==null;)P.push(L.call(I,$.value,this)),$=$.prev;return P},W.prototype.reduce=function(L,I){var P,$=this.head;if(arguments.length>1)P=I;else if(this.head)$=this.head.next,P=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var G=0;$!==null;G++)P=L(P,$.value,G),$=$.next;return P},W.prototype.reduceReverse=function(L,I){var P,$=this.tail;if(arguments.length>1)P=I;else if(this.tail)$=this.tail.prev,P=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var G=this.length-1;$!==null;G--)P=L(P,$.value,G),$=$.prev;return P},W.prototype.toArray=function(){for(var L=new Array(this.length),I=0,P=this.head;P!==null;I++)L[I]=P.value,P=P.next;return L},W.prototype.toArrayReverse=function(){for(var L=new Array(this.length),I=0,P=this.tail;P!==null;I++)L[I]=P.value,P=P.prev;return L},W.prototype.slice=function(L,I){I=I||this.length,I<0&&(I+=this.length),L=L||0,L<0&&(L+=this.length);var P=new W;if(I<L||I<0)return P;L<0&&(L=0),I>this.length&&(I=this.length);for(var $=0,G=this.head;G!==null&&$<L;$++)G=G.next;for(;G!==null&&$<I;$++,G=G.next)P.push(G.value);return P},W.prototype.sliceReverse=function(L,I){I=I||this.length,I<0&&(I+=this.length),L=L||0,L<0&&(L+=this.length);var P=new W;if(I<L||I<0)return P;L<0&&(L=0),I>this.length&&(I=this.length);for(var $=this.length,G=this.tail;G!==null&&$>I;$--)G=G.prev;for(;G!==null&&$>L;$--,G=G.prev)P.push(G.value);return P},W.prototype.splice=function(L,I,...P){L>this.length&&(L=this.length-1),L<0&&(L=this.length+L);for(var $=0,G=this.head;G!==null&&$<L;$++)G=G.next;for(var z=[],$=0;G&&$<I;$++)z.push(G.value),G=this.removeNode(G);G===null&&(G=this.tail),G!==this.head&&G!==this.tail&&(G=G.prev);for(var $=0;$<P.length;$++)G=J(this,G,P[$]);return z},W.prototype.reverse=function(){for(var L=this.head,I=this.tail,P=L;P!==null;P=P.prev){var $=P.prev;P.prev=P.next,P.next=$}return this.head=I,this.tail=L,this};function J(L,I,P){var $=I===L.head?new M(P,null,I,L):new M(P,I,I.next,L);return $.next===null&&(L.tail=$),$.prev===null&&(L.head=$),L.length++,$}function se(L,I){L.tail=new M(I,L.tail,null,L),L.head||(L.head=L.tail),L.length++}function U(L,I){L.head=new M(I,null,L.head,L),L.tail||(L.tail=L.head),L.length++}function M(L,I,P,$){if(!(this instanceof M))return new M(L,I,P,$);this.list=$,this.value=L,I?(I.next=this,this.prev=I):this.prev=null,P?(P.prev=this,this.next=P):this.next=null}try{q(9602)(W)}catch(L){}},9329:(d,ne,q)=>{d.exports=q(516).Observable},516:(d,ne)=>{"use strict";var q;q={value:!0},ne.Observable=void 0;function W(ie,re){if(!(ie instanceof re))throw new TypeError("Cannot call a class as a function")}function J(ie,re){for(var X=0;X<re.length;X++){var he=re[X];he.enumerable=he.enumerable||!1,he.configurable=!0,"value"in he&&(he.writable=!0),Object.defineProperty(ie,he.key,he)}}function se(ie,re,X){return re&&J(ie.prototype,re),X&&J(ie,X),ie}var U=function(){return typeof Symbol=="function"},M=function(ie){return U()&&Boolean(Symbol[ie])},L=function(ie){return M(ie)?Symbol[ie]:"@@"+ie};U()&&!M("observable")&&(Symbol.observable=Symbol("observable"));var I=L("iterator"),P=L("observable"),$=L("species");function G(ie,re){var X=ie[re];if(X!=null){if(typeof X!="function")throw new TypeError(X+" is not a function");return X}}function z(ie){var re=ie.constructor;return re!==void 0&&(re=re[$],re===null&&(re=void 0)),re!==void 0?re:de}function O(ie){return ie instanceof de}function V(ie){V.log?V.log(ie):setTimeout(function(){throw ie})}function B(ie){Promise.resolve().then(function(){try{ie()}catch(re){V(re)}})}function j(ie){var re=ie._cleanup;if(re!==void 0&&(ie._cleanup=void 0,!!re))try{if(typeof re=="function")re();else{var X=G(re,"unsubscribe");X&&X.call(re)}}catch(he){V(he)}}function ce(ie){ie._observer=void 0,ie._queue=void 0,ie._state="closed"}function ee(ie){var re=ie._queue;if(!!re){ie._queue=void 0,ie._state="ready";for(var X=0;X<re.length&&(Se(ie,re[X].type,re[X].value),ie._state!=="closed");++X);}}function Se(ie,re,X){ie._state="running";var he=ie._observer;try{var we=G(he,re);switch(re){case"next":we&&we.call(he,X);break;case"error":if(ce(ie),we)we.call(he,X);else throw X;break;case"complete":ce(ie),we&&we.call(he);break}}catch(Ee){V(Ee)}ie._state==="closed"?j(ie):ie._state==="running"&&(ie._state="ready")}function fe(ie,re,X){if(ie._state!=="closed"){if(ie._state==="buffering"){ie._queue.push({type:re,value:X});return}if(ie._state!=="ready"){ie._state="buffering",ie._queue=[{type:re,value:X}],B(function(){return ee(ie)});return}Se(ie,re,X)}}var De=function(){function ie(re,X){W(this,ie),this._cleanup=void 0,this._observer=re,this._queue=void 0,this._state="initializing";var he=new Z(this);try{this._cleanup=X.call(void 0,he)}catch(we){he.error(we)}this._state==="initializing"&&(this._state="ready")}return se(ie,[{key:"unsubscribe",value:function(){this._state!=="closed"&&(ce(this),j(this))}},{key:"closed",get:function(){return this._state==="closed"}}]),ie}(),Z=function(){function ie(re){W(this,ie),this._subscription=re}return se(ie,[{key:"next",value:function(X){fe(this._subscription,"next",X)}},{key:"error",value:function(X){fe(this._subscription,"error",X)}},{key:"complete",value:function(){fe(this._subscription,"complete")}},{key:"closed",get:function(){return this._subscription._state==="closed"}}]),ie}(),de=function(){function ie(re){if(W(this,ie),!(this instanceof ie))throw new TypeError("Observable cannot be called as a function");if(typeof re!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=re}return se(ie,[{key:"subscribe",value:function(X){return(typeof X!="object"||X===null)&&(X={next:X,error:arguments[1],complete:arguments[2]}),new De(X,this._subscriber)}},{key:"forEach",value:function(X){var he=this;return new Promise(function(we,Ee){if(typeof X!="function"){Ee(new TypeError(X+" is not a function"));return}function Pe(){ke.unsubscribe(),we()}var ke=he.subscribe({next:function(je){try{X(je,Pe)}catch(Ye){Ee(Ye),ke.unsubscribe()}},error:Ee,complete:we})})}},{key:"map",value:function(X){var he=this;if(typeof X!="function")throw new TypeError(X+" is not a function");var we=z(this);return new we(function(Ee){return he.subscribe({next:function(Pe){try{Pe=X(Pe)}catch(ke){return Ee.error(ke)}Ee.next(Pe)},error:function(Pe){Ee.error(Pe)},complete:function(){Ee.complete()}})})}},{key:"filter",value:function(X){var he=this;if(typeof X!="function")throw new TypeError(X+" is not a function");var we=z(this);return new we(function(Ee){return he.subscribe({next:function(Pe){try{if(!X(Pe))return}catch(ke){return Ee.error(ke)}Ee.next(Pe)},error:function(Pe){Ee.error(Pe)},complete:function(){Ee.complete()}})})}},{key:"reduce",value:function(X){var he=this;if(typeof X!="function")throw new TypeError(X+" is not a function");var we=z(this),Ee=arguments.length>1,Pe=!1,ke=arguments[1],je=ke;return new we(function(Ye){return he.subscribe({next:function(ct){var yt=!Pe;if(Pe=!0,!yt||Ee)try{je=X(je,ct)}catch(zt){return Ye.error(zt)}else je=ct},error:function(ct){Ye.error(ct)},complete:function(){if(!Pe&&!Ee)return Ye.error(new TypeError("Cannot reduce an empty sequence"));Ye.next(je),Ye.complete()}})})}},{key:"concat",value:function(){for(var X=this,he=arguments.length,we=new Array(he),Ee=0;Ee<he;Ee++)we[Ee]=arguments[Ee];var Pe=z(this);return new Pe(function(ke){var je,Ye=0;function ct(yt){je=yt.subscribe({next:function(zt){ke.next(zt)},error:function(zt){ke.error(zt)},complete:function(){Ye===we.length?(je=void 0,ke.complete()):ct(Pe.from(we[Ye++]))}})}return ct(X),function(){je&&(je.unsubscribe(),je=void 0)}})}},{key:"flatMap",value:function(X){var he=this;if(typeof X!="function")throw new TypeError(X+" is not a function");var we=z(this);return new we(function(Ee){var Pe=[],ke=he.subscribe({next:function(Ye){if(X)try{Ye=X(Ye)}catch(yt){return Ee.error(yt)}var ct=we.from(Ye).subscribe({next:function(yt){Ee.next(yt)},error:function(yt){Ee.error(yt)},complete:function(){var yt=Pe.indexOf(ct);yt>=0&&Pe.splice(yt,1),je()}});Pe.push(ct)},error:function(Ye){Ee.error(Ye)},complete:function(){je()}});function je(){ke.closed&&Pe.length===0&&Ee.complete()}return function(){Pe.forEach(function(Ye){return Ye.unsubscribe()}),ke.unsubscribe()}})}},{key:P,value:function(){return this}}],[{key:"from",value:function(X){var he=typeof this=="function"?this:ie;if(X==null)throw new TypeError(X+" is not an object");var we=G(X,P);if(we){var Ee=we.call(X);if(Object(Ee)!==Ee)throw new TypeError(Ee+" is not an object");return O(Ee)&&Ee.constructor===he?Ee:new he(function(Pe){return Ee.subscribe(Pe)})}if(M("iterator")&&(we=G(X,I),we))return new he(function(Pe){B(function(){if(!Pe.closed){var ke=!0,je=!1,Ye=void 0;try{for(var ct=we.call(X)[Symbol.iterator](),yt;!(ke=(yt=ct.next()).done);ke=!0){var zt=yt.value;if(Pe.next(zt),Pe.closed)return}}catch(Yt){je=!0,Ye=Yt}finally{try{!ke&&ct.return!=null&&ct.return()}finally{if(je)throw Ye}}Pe.complete()}})});if(Array.isArray(X))return new he(function(Pe){B(function(){if(!Pe.closed){for(var ke=0;ke<X.length;++ke)if(Pe.next(X[ke]),Pe.closed)return;Pe.complete()}})});throw new TypeError(X+" is not observable")}},{key:"of",value:function(){for(var X=arguments.length,he=new Array(X),we=0;we<X;we++)he[we]=arguments[we];var Ee=typeof this=="function"?this:ie;return new Ee(function(Pe){B(function(){if(!Pe.closed){for(var ke=0;ke<he.length;++ke)if(Pe.next(he[ke]),Pe.closed)return;Pe.complete()}})})}},{key:$,get:function(){return this}}]),ie}();ne.Observable=de,U()&&Object.defineProperty(de,Symbol("extensions"),{value:{symbol:P,hostReportError:V},configurable:!0})},6591:d=>{"use strict";d.exports=require("applicationinsights-native-metrics")},2357:d=>{"use strict";d.exports=require("assert")},7303:d=>{"use strict";d.exports=require("async_hooks")},3129:d=>{"use strict";d.exports=require("child_process")},7082:d=>{"use strict";d.exports=require("console")},7619:d=>{"use strict";d.exports=require("constants")},6417:d=>{"use strict";d.exports=require("crypto")},881:d=>{"use strict";d.exports=require("dns")},8614:d=>{"use strict";d.exports=require("events")},5747:d=>{"use strict";d.exports=require("fs")},8605:d=>{"use strict";d.exports=require("http")},7211:d=>{"use strict";d.exports=require("https")},2282:d=>{"use strict";d.exports=require("module")},1631:d=>{"use strict";d.exports=require("net")},2087:d=>{"use strict";d.exports=require("os")},5622:d=>{"use strict";d.exports=require("path")},630:d=>{"use strict";d.exports=require("perf_hooks")},2413:d=>{"use strict";d.exports=require("stream")},8213:d=>{"use strict";d.exports=require("timers")},4016:d=>{"use strict";d.exports=require("tls")},3867:d=>{"use strict";d.exports=require("tty")},8835:d=>{"use strict";d.exports=require("url")},1669:d=>{"use strict";d.exports=require("util")},7549:d=>{"use strict";d.exports=require("vscode")},8761:d=>{"use strict";d.exports=require("zlib")}},hd={};function it(d){var ne=hd[d];if(ne!==void 0)return ne.exports;var q=hd[d]={id:d,loaded:!1,exports:{}};return xp[d].call(q.exports,q,q.exports,it),q.loaded=!0,q.exports}(()=>{it.n=d=>{var ne=d&&d.__esModule?()=>d.default:()=>d;return it.d(ne,{a:ne}),ne}})(),(()=>{it.d=(d,ne)=>{for(var q in ne)it.o(ne,q)&&!it.o(d,q)&&Object.defineProperty(d,q,{enumerable:!0,get:ne[q]})}})(),(()=>{it.hmd=d=>(d=Object.create(d),d.children||(d.children=[]),Object.defineProperty(d,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+d.id)}}),d)})(),(()=>{it.o=(d,ne)=>Object.prototype.hasOwnProperty.call(d,ne)})(),(()=>{it.r=d=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})}})();var $u={};(()=>{"use strict";it.r($u),it.d($u,{activate:()=>Xv,deactivate:()=>Zv});var d=it(7549),ne=it(8361),q=it.n(ne),W=Object.defineProperty,J=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?W(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r),se;(function(t){t[t.Info=0]="Info",t[t.Debug=1]="Debug",t[t.Off=2]="Off"})(se||(se={}));const U="githubPullRequests",M="logLevel";class L{constructor(){J(this,"_outputChannel"),J(this,"_logLevel"),J(this,"_disposable"),this._outputChannel=d.window.createOutputChannel("GitHub Pull Request"),this._disposable=d.workspace.onDidChangeConfiguration(()=>{this.getLogLevel()}),this.getLogLevel()}appendLine(e,r){switch(this._logLevel){case 2:return;case 1:const i=`${new Date().getTime()/1e3}s`,a=r?`${r}> ${e}`:`${e}`;this._outputChannel.appendLine(`[Debug ${i}] ${a}`);return;case 0:default:this._outputChannel.appendLine("[Info] "+(r?`${r}> ${e}`:`${e}`));return}}debug(e,r){this._logLevel===1&&this.appendLine(e,r)}dispose(){this._disposable&&this._disposable.dispose()}getLogLevel(){switch(d.workspace.getConfiguration(U).get(M)){case"debug":this._logLevel=1;break;case"off":this._logLevel=2;break;case"info":default:this._logLevel=0;break}}}const P=new L;var $=it(5622),G=it(7484),z=it.n(G),O=it(4110),V=it.n(O),B=it(660),j=it.n(B),ce=Object.defineProperty,ee=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?ce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);z().extend(V(),{thresholds:[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:6,d:"day"},{l:"w",r:7},{l:"ww",r:3,d:"week"},{l:"M",r:4},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}]}),z().extend(j()),z().updateLocale("en",{relativeTime:{future:"in %s",past:"%s ago",s:"seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"}});function Se(t,e){const r=Object.create(null);return t.filter(n=>{const i=e(n);return r[i]?!1:(r[i]=!0,!0)})}function fe(t){return t.forEach(e=>e.dispose()),[]}function De(t){return{dispose:t}}function Z(t){return De(()=>fe(t))}function de(...t){return(e,r=null,n)=>{const i=Z(t.map(a=>a(o=>e.call(r,o))));return n&&n.push(i),i}}function ie(t,e){return(r,n=null,i)=>t(a=>e(a)&&r.call(n,a),null,i)}function re(t){return(e,r=null,n)=>{const i=t(a=>(i.dispose(),e.call(r,a)),null,n);return i}}function X(t){return/^[a-zA-Z]:\\/.test(t)}function he(t,e){return t===e?!0:(t.charAt(t.length-1)!==sep&&(t+=sep),X(t)&&(t=t.toLowerCase(),e=e.toLowerCase()),e.startsWith(t))}function we(t,e){return t.reduce((r,n)=>{const i=e(n);return r[i]=[...r[i]||[],n],r},Object.create(null))}function Ee(t){return!!t.errors}function Pe(t){let e=!0;if(!!t.errors&&Array.isArray(t.errors)){for(const r of t.errors)if(!r.field||!r.value||!r.code){e=!1;break}}else e=!1;return e}function ke(t){if(!(t instanceof Error))return typeof t=="string"?t:t.gitErrorCode?`${t.message}. Please check git output for more details`:t.stderr?`${t.stderr}. Please check git output for more details`:"Error";let e=t.message,r;if(t.message==="Validation Failed"&&Pe(t))r=t.errors.map(n=>`Value "${n.value}" cannot be set for field ${n.field} (code: ${n.code})`).join(", ");else if(Ee(t)&&t.errors)return t.errors.map(n=>typeof n=="string"?n:n.message).join(", ");return r&&(e=`${e}: ${r}`),e}const je=(t,e)=>e(t);async function Ye(t,e=je){let r;return new Promise((n,i)=>r=t(a=>{try{Promise.resolve(e(a,n,i)).catch(i)}catch(o){i(o)}})).then(n=>(r.dispose(),n),n=>{throw r.dispose(),n})}function ct(t){const e=dayjs(t),r=Date.now();return e.diff(r,"month"),e.diff(r,"month")<1?e.fromNow():e.diff(r,"year")<1?`on ${e.format("MMM D")}`:`on ${e.format("MMM D, YYYY")}`}var yt;(function(t){t[t.Period=46]="Period",t[t.Slash=47]="Slash",t[t.A=65]="A",t[t.Z=90]="Z",t[t.Backslash=92]="Backslash",t[t.a=97]="a",t[t.z=122]="z"})(yt||(yt={}));function zt(t,e){return t<e?-1:t>e?1:0}function Yt(t,e,r=0,n=t.length,i=0,a=e.length){for(;r<n&&i<a;r++,i++){const S=t.charCodeAt(r),T=e.charCodeAt(i);if(S<T)return-1;if(S>T)return 1}const o=n-r,m=a-i;return o<m?-1:o>m?1:0}function rr(t,e){return Xt(t,e,0,t.length,0,e.length)}function Xt(t,e,r=0,n=t.length,i=0,a=e.length){for(;r<n&&i<a;r++,i++){let S=t.charCodeAt(r),T=e.charCodeAt(i);if(S===T)continue;const A=S-T;if(!(A===32&&qr(T))&&!(A===-32&&qr(S)))return Ir(S)&&Ir(T)?A:Yt(t.toLowerCase(),e.toLowerCase(),r,n,i,a)}const o=n-r,m=a-i;return o<m?-1:o>m?1:0}function Ir(t){return t>=97&&t<=122}function qr(t){return t>=65&&t<=90}class Sn{constructor(){ee(this,"_value",""),ee(this,"_pos",0)}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const r=e.charCodeAt(0),n=this._value.charCodeAt(this._pos);return r-n}value(){return this._value[this._pos]}}class Ts{constructor(e=!0){this._caseSensitive=e,ee(this,"_value"),ee(this,"_from"),ee(this,"_to")}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?Yt(e,this._value,0,e.length,this._from,this._to):Xt(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class ui{constructor(e=!0,r=!0){this._splitOnBackslash=e,this._caseSensitive=r,ee(this,"_value"),ee(this,"_from"),ee(this,"_to")}reset(e){return this._value=e.replace(/\\$|\/$/,""),this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){const r=this._value.charCodeAt(this._to);if(r===47||this._splitOnBackslash&&r===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?Yt(e,this._value,0,e.length,this._from,this._to):Xt(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}var rs;(function(t){t[t.Scheme=1]="Scheme",t[t.Authority=2]="Authority",t[t.Path=3]="Path",t[t.Query=4]="Query",t[t.Fragment=5]="Fragment"})(rs||(rs={}));class li{constructor(e){this._ignorePathCasing=e,ee(this,"_pathIterator"),ee(this,"_value"),ee(this,"_states",[]),ee(this,"_stateIdx",0)}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new ui(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return rr(e,this._value.scheme);if(this._states[this._stateIdx]===2)return rr(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return zt(e,this._value.query);if(this._states[this._stateIdx]===5)return zt(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class qn{constructor(){ee(this,"segment"),ee(this,"value"),ee(this,"key"),ee(this,"left"),ee(this,"mid"),ee(this,"right")}isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}}class $t{constructor(e){ee(this,"_iter"),ee(this,"_root"),this._iter=e}static forUris(e=()=>!1){return new $t(new li(e))}static forPaths(){return new $t(new ui)}static forStrings(){return new $t(new Sn)}static forConfigKeys(){return new $t(new Ts)}clear(){this._root=void 0}set(e,r){const n=this._iter.reset(e);let i;for(this._root||(this._root=new qn,this._root.segment=n.value()),i=this._root;;){const o=n.cmp(i.segment);if(o>0)i.left||(i.left=new qn,i.left.segment=n.value()),i=i.left;else if(o<0)i.right||(i.right=new qn,i.right.segment=n.value()),i=i.right;else if(n.hasNext())n.next(),i.mid||(i.mid=new qn,i.mid.segment=n.value()),i=i.mid;else break}const a=i.value;return i.value=r,i.key=e,a}get(e){var r;return(r=this._getNode(e))==null?void 0:r.value}_getNode(e){const r=this._iter.reset(e);let n=this._root;for(;n;){const i=r.cmp(n.segment);if(i>0)n=n.left;else if(i<0)n=n.right;else if(r.hasNext())r.next(),n=n.mid;else break}return n}has(e){const r=this._getNode(e);return!((r==null?void 0:r.value)===void 0&&(r==null?void 0:r.mid)===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,r){const n=this._iter.reset(e),i=[];let a=this._root;for(;a;){const o=n.cmp(a.segment);if(o>0)i.push([1,a]),a=a.left;else if(o<0)i.push([-1,a]),a=a.right;else if(n.hasNext())n.next(),i.push([0,a]),a=a.mid;else{for(r?(a.left=void 0,a.mid=void 0,a.right=void 0):a.value=void 0;i.length>0&&a.isEmpty();){let[m,S]=i.pop();switch(m){case 1:S.left=void 0;break;case 0:S.mid=void 0;break;case-1:S.right=void 0;break}a=S}break}}}findSubstr(e){const r=this._iter.reset(e);let n=this._root,i;for(;n;){const a=r.cmp(n.segment);if(a>0)n=n.left;else if(a<0)n=n.right;else if(r.hasNext())r.next(),i=n.value||i,n=n.mid;else break}return n&&n.value||i}findSuperstr(e){const r=this._iter.reset(e);let n=this._root;for(;n;){const i=r.cmp(n.segment);if(i>0)n=n.left;else if(i<0)n=n.right;else if(r.hasNext())r.next(),n=n.mid;else return n.mid?this._entries(n.mid):void 0}}forEach(e){for(const[r,n]of this)e(n,r)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(e){e&&(yield*this._entries(e.left),e.value&&(yield[e.key,e.value]),yield*this._entries(e.mid),yield*this._entries(e.right))}}var ci=Object.defineProperty,Jt=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?ci(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r),bt;(function(t){t[t.Head=0]="Head",t[t.RemoteHead=1]="RemoteHead",t[t.Tag=2]="Tag"})(bt||(bt={}));var gr;(function(t){t.BadConfigFile="BadConfigFile",t.AuthenticationFailed="AuthenticationFailed",t.NoUserNameConfigured="NoUserNameConfigured",t.NoUserEmailConfigured="NoUserEmailConfigured",t.NoRemoteRepositorySpecified="NoRemoteRepositorySpecified",t.NotAGitRepository="NotAGitRepository",t.NotAtRepositoryRoot="NotAtRepositoryRoot",t.Conflict="Conflict",t.StashConflict="StashConflict",t.UnmergedChanges="UnmergedChanges",t.PushRejected="PushRejected",t.RemoteConnectionError="RemoteConnectionError",t.DirtyWorkTree="DirtyWorkTree",t.CantOpenResource="CantOpenResource",t.GitNotFound="GitNotFound",t.CantCreatePipe="CantCreatePipe",t.CantAccessRemote="CantAccessRemote",t.RepositoryNotFound="RepositoryNotFound",t.RepositoryIsLocked="RepositoryIsLocked",t.BranchNotFullyMerged="BranchNotFullyMerged",t.NoRemoteReference="NoRemoteReference",t.InvalidBranchName="InvalidBranchName",t.BranchAlreadyExists="BranchAlreadyExists",t.NoLocalChanges="NoLocalChanges",t.NoStashFound="NoStashFound",t.LocalChangesOverwritten="LocalChangesOverwritten",t.NoUpstreamBranch="NoUpstreamBranch",t.IsInSubmodule="IsInSubmodule",t.WrongCase="WrongCase",t.CantLockRef="CantLockRef",t.CantRebaseMultipleBranches="CantRebaseMultipleBranches",t.PatchDoesNotApply="PatchDoesNotApply"})(gr||(gr={}));const Un=class{constructor(){Jt(this,"_providers",new Map),Jt(this,"_onDidOpenRepository",new d.EventEmitter),Jt(this,"onDidOpenRepository",this._onDidOpenRepository.event),Jt(this,"_onDidCloseRepository",new d.EventEmitter),Jt(this,"onDidCloseRepository",this._onDidCloseRepository.event),Jt(this,"_onDidChangeState",new d.EventEmitter),Jt(this,"onDidChangeState",this._onDidChangeState.event),Jt(this,"_onDidPublish",new d.EventEmitter),Jt(this,"onDidPublish",this._onDidPublish.event),Jt(this,"_disposables"),this._disposables=[]}get repositories(){const t=[];return this._providers.forEach(({repositories:e})=>{e&&t.push(...e)}),t}get state(){if(this._providers.size!==0){for(const[,{state:t}]of this._providers)if(t!=="initialized")return"uninitialized";return"initialized"}}_updateReposContext(){const t=Array.from(this._providers.values()).reduce((e,r)=>e+r.repositories.length,0);d.commands.executeCommand("setContext","gitHubOpenRepositoryCount",t)}registerGitProvider(t){P.appendLine("Registering git provider");const e=this._nextHandle();return this._providers.set(e,t),this._disposables.push(t.onDidCloseRepository(r=>this._onDidCloseRepository.fire(r))),this._disposables.push(t.onDidOpenRepository(r=>{P.appendLine(`Repository ${r.rootUri} has been opened`),this._updateReposContext(),this._onDidOpenRepository.fire(r)})),t.onDidChangeState&&this._disposables.push(t.onDidChangeState(r=>this._onDidChangeState.fire(r))),t.onDidPublish&&this._disposables.push(t.onDidPublish(r=>this._onDidPublish.fire(r))),this._updateReposContext(),t.repositories.forEach(r=>{this._onDidOpenRepository.fire(r)}),{dispose:()=>{const r=t==null?void 0:t.repositories;r&&r.length>0&&r.forEach(n=>this._onDidCloseRepository.fire(n)),this._providers.delete(e)}}}getGitProvider(t){const e=$t.forUris();return this._providers.forEach(r=>{const n=r.repositories;if(n&&n.length>0)for(const i of n)e.set(i.rootUri,r)}),e.findSubstr(t)}_nextHandle(){return Un._handlePool++}dispose(){this._disposables.forEach(t=>t.dispose())}};let di=Un;Jt(di,"_handlePool",0);const hi=new Map;function ns(t,e){hi.set(t,e)}function is(t){hi.delete(t)}function ir(t){for(const e of hi.values())if(e.hasCommentThread(t))return e;P.appendLine(`Unable to find handler for comment thread ${t.gitHubThreadId}`)}var Gu=Object.defineProperty,uo=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Gu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);let $n;class Rs extends d.Disposable{constructor(e){super(()=>this.disposables.forEach(r=>r.dispose()));this._storageUri=e,uo(this,"SUBPATH","temp"),uo(this,"disposables",[])}get path(){return d.Uri.joinPath(this._storageUri,this.SUBPATH)}addDisposable(e){if(this.disposables.length>30){const r=this.disposables.shift();r==null||r.dispose()}this.disposables.push(e)}async writeState(e,r,n){let i=this.path;const a=d.workspace.workspaceFolders&&d.workspace.workspaceFolders.length>0?d.workspace.workspaceFolders[0].name:void 0;a&&(i=d.Uri.joinPath(i,a)),e&&(i=d.Uri.joinPath(i,e)),await d.workspace.fs.createDirectory(i);const o=d.Uri.joinPath(i,r);await d.workspace.fs.writeFile(o,n);const m={dispose:()=>d.workspace.fs.delete(o,{recursive:!0})};return this.addDisposable(m),o}static async init(e){if(e.globalStorageUri&&!$n){$n=new Rs(e.globalStorageUri);try{await d.workspace.fs.delete($n.path,{recursive:!0})}catch(r){P.appendLine(`TemporaryState> Error in initialization: ${r.message}`)}try{await d.workspace.fs.createDirectory($n.path)}catch(r){P.appendLine(`TemporaryState> Error in initialization: ${r.message}`)}return e.subscriptions.push($n),$n}}static async write(e,r,n){if(!!$n)return $n.writeState(e,r,n)}}function Fi(t){return JSON.parse(t)}function Dr(t){try{return JSON.parse(t.query)}catch(e){}}function Hu(t){try{return JSON.parse(t.query)}catch(e){}}const Vu=["image/png","image/gif","image/jpeg","image/webp","image/tiff","image/bmp"],lo=d.Uri.parse("data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==");async function ca(t,e){try{const{commit:r,baseCommit:n,headCommit:i,isBase:a,path:o}=JSON.parse(t.query),m=t.scheme==="review"?r:a?n:i,{object:S}=await e.getObjectDetails(m,t.fsPath),{mimetype:T}=await e.detectObjectType(S);if(T==="text/plain")return;if(Vu.indexOf(T)>-1){const A=await e.buffer(m,t.fsPath);return Rs.write($.dirname(o),$.basename(o),A)}}catch(r){return}}function cn(t,e,r,n,i,a,o){const m={path:e||t.path,ref:r,commit:n,base:a.base,isOutdated:i,rootPath:o.path};let S=t.path;return a.replaceFileExtension&&(S=`${S}.git`),t.with({scheme:"review",path:S,query:JSON.stringify(m)})}function co(t,e,r,n){const i={prNumber:e,fileName:r,status:n};return t.with({scheme:"filechange",query:JSON.stringify(i)})}function Ft(t){try{return t.query?JSON.parse(t.query):void 0}catch(e){}}function Gn(t,e,r,n,i,a,o){const m={baseCommit:r,headCommit:n,isBase:a,fileName:i,prNumber:e.number,status:o,remoteName:e.githubRepository.remote.remoteName},S=t.path;return t.with({scheme:"pr",path:S,query:JSON.stringify(m)})}var Cs;(function(t){t.file="file"})(Cs||(Cs={}));function Hn(t,e){return t.scheme===Cs.file?$.resolve(t.fsPath,e):$.posix.resolve(t.path,e)}class Bu extends d.EventEmitter{handleUri(e){this.fire(e)}}const ju=new Bu,Vn="GitHub.vscode-pull-request-github",Ps="git",da="ghpr",ha="initialize",ho="statechange",Li="github:focusedReview",po=require("buffer");var zu=it(4063),pa=it.n(zu),Gt;(function(t){t.LEFT="LEFT",t.RIGHT="RIGHT"})(Gt||(Gt={}));var Ur;(function(t){t.DISMISSED="DISMISSED",t.VIEWED="VIEWED",t.UNVIEWED="UNVIEWED"})(Ur||(Ur={}));var nt;(function(t){t[t.ADD=0]="ADD",t[t.COPY=1]="COPY",t[t.DELETE=2]="DELETE",t[t.MODIFY=3]="MODIFY",t[t.RENAME=4]="RENAME",t[t.TYPE=5]="TYPE",t[t.UNKNOWN=6]="UNKNOWN",t[t.UNMERGED=7]="UNMERGED"})(nt||(nt={}));class mo{constructor(e,r,n,i,a,o,m,S){this.baseCommit=e,this.status=r,this.fileName=n,this.previousFileName=i,this.patch=a,this.diffHunks=o,this.isPartial=m,this.blobUrl=S}}class qi{constructor(e,r,n,i,a){this.baseCommit=e,this.blobUrl=r,this.status=n,this.fileName=i,this.previousFileName=a}}var Qu=Object.defineProperty,Wu=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Qu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r),$r;(function(t){t[t.Context=0]="Context",t[t.Add=1]="Add",t[t.Delete=2]="Delete",t[t.Control=3]="Control"})($r||($r={}));class ma{constructor(e,r,n,i,a,o=!0){this.type=e,this.oldLineNumber=r,this.newLineNumber=n,this.positionInHunk=i,this._raw=a,this.endwithLineBreak=o}get raw(){return this._raw}get text(){return this._raw.substr(1)}}function Ku(t){switch(t[0]){case" ":return 0;case"+":return 1;case"-":return 2;default:return 3}}class Yu{constructor(e,r,n,i,a){this.oldLineNumber=e,this.oldLength=r,this.newLineNumber=n,this.newLength=i,this.positionInHunk=a,Wu(this,"diffLines",[])}}const fo=/^@@ \-(\d+)(,(\d+))?( \+(\d+)(,(\d+)?)?)? @@/;function Xu(t){let e=0,r=0;for(;(r=t.indexOf("\r",r))!==-1;)r++,e++;return e}function*Ju(t){let e=0;for(;e!==-1&&e<t.length;){const r=e;e=t.indexOf(`
`,e);let i=(e!==-1?e:t.length)-r;e!==-1&&(e>0&&t[e-1]==="\r"&&i--,e++),yield t.substr(r,i)}}function*Ui(t){const e=Ju(t);let r=e.next(),n,i=-1,a=-1,o=-1;for(;!r.done;){const m=r.value;if(fo.test(m)){n&&(yield n,n=void 0),i===-1&&(i=0);const S=fo.exec(m),T=a=Number(S[1]),A=Number(S[3])||1,H=o=Number(S[5]),Y=Number(S[7])||1;n=new Yu(T,A,H,Y,i),n.diffLines.push(new ma(3,-1,-1,i,m))}else if(n){const S=Ku(m);if(S===3)n.diffLines&&n.diffLines.length&&(n.diffLines[n.diffLines.length-1].endwithLineBreak=!1);else{n.diffLines.push(new ma(S,S!==1?a:-1,S!==2?o:-1,i,m));const T=1+Xu(m);switch(S){case 0:a+=T,o+=T;break;case 2:a+=T;break;case 1:o+=T;break}}}i!==-1&&++i,r=e.next()}n&&(yield n)}function fa(t){const e=Ui(t);let r=e.next();const n=[],i=[];for(;!r.done;){const a=r.value;n.push(a);for(let o=0;o<a.diffLines.length;o++){const m=a.diffLines[o];if(!(m.type===2||m.type===3))if(m.type===1)i.push(m.text);else{const S=m.text;i.push(S)}}r=e.next()}return n}function Zu(t,e){const r=t.split(/\r?\n/),n=Ui(e);let i=n.next();const a=[],o=[];let m=0;for(;!i.done;){const S=i.value;a.push(S);const T=S.oldLineNumber;for(let A=m+1;A<T;A++)o.push(r[A-1]);m=T+S.oldLength-1;for(let A=0;A<S.diffLines.length;A++){const H=S.diffLines[A];if(!(H.type===2||H.type===3))if(H.type===1)o.push(H.text);else{const Y=H.text;o.push(Y)}}i=n.next()}if(m<r.length)for(let S=m+1;S<=r.length;S++)o.push(r[S-1]);return o.join(`
`)}function ga(t){switch(t){case"removed":return nt.DELETE;case"added":return nt.ADD;case"renamed":return nt.RENAME;case"modified":return nt.MODIFY;default:return nt.UNKNOWN}}async function Ns(t,e,r){const n=[];for(let i=0;i<t.length;i++){const a=t[i],o=ga(a.status);if(!a.patch){n.push(new qi(r,a.blob_url,o,a.filename,a.previous_filename));continue}let m=!1;switch(o){case nt.DELETE:case nt.MODIFY:try{await e.getObjectDetails(r,a.filename),m=!0}catch(A){}break;case nt.RENAME:try{await e.getObjectDetails(r,a.previous_filename),m=!0}catch(A){}break}const S=fa(a.patch),T=!m&&o!==nt.ADD;n.push(new mo(r,o,a.filename,a.previous_filename,a.patch,S,T,a.blob_url))}return n}var go=it(5747),el=it(2087),tl=it(6200),rl=Object.defineProperty,vo=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?rl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Jr=/^(?:([^@:]+)@)?([^:/]+):?(.+)$/,nl=/^([a-z-]+):\/\//,va=t=>{const e=nl.exec(t);if(e){const[o,m]=e;if(m==="ssh")t=t.slice(o.length);else return}const r=Jr.exec(t);if(!r)return;const[,n,i,a]=r;return{User:n,Host:i,path:a}},il=(t,e=wa.current)=>{const r=va(t);return r&&e(r)};function As(t){return{...t,Hostname:t.Host}}function ya(...t){const e=t.filter(r=>!!r);return r=>e.reduce((n,i)=>({...n,...i(n)}),r)}function ba(t){const e=(0,tl.parse)(t);return r=>e.compute(r.Host)}const yo=class{static fromConfig(t){return ya(As,ba(t))}};let wa=yo;vo(wa,"default",As),vo(wa,"current",yo.default);var sl=Object.defineProperty,bo=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?sl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const wo=class{static fromConfig(t){return ya(As,ba(t))}};let Is=wo;bo(Is,"default",ya(As,al())),bo(Is,"current",wo.default);const _o=(t,e=Is.current)=>{const r=va(t);return r&&e(r)};function al(t=(0,$.join)((0,el.homedir)(),".ssh","config")){try{const e=(0,go.readFileSync)(t).toString();return ba(e)}catch(e){P.appendLine(`${t}: ${e.message}`)}}var ol=Object.defineProperty,pi=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?ol(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r),_a;(function(t){t[t.Local=0]="Local",t[t.HTTP=1]="HTTP",t[t.SSH=2]="SSH",t[t.GIT=3]="GIT",t[t.OTHER=4]="OTHER"})(_a||(_a={}));class Bn{constructor(e){if(pi(this,"type",4),pi(this,"host",""),pi(this,"owner",""),pi(this,"repositoryName",""),pi(this,"url"),!this.parseSshProtocol(e))try{this.url=d.Uri.parse(e),this.type=this.getType(this.url.scheme),this.host=this.getHostName(this.url.authority),this.host&&(this.repositoryName=this.getRepositoryName(this.url.path)||"",this.owner=this.getOwnerName(this.url.path)||"")}catch(r){P.appendLine(`Failed to parse '${e}'`),d.window.showWarningMessage(`Unable to parse remote '${e}'. Please check that it is correctly formatted.`)}}get nameWithOwner(){return this.owner?`${this.owner}/${this.repositoryName}`:this.repositoryName}getType(e){switch(e){case"file":return 0;case"http":case"https":return 1;case"git":return 3;case"ssh":return 2;default:return 4}}parseSshProtocol(e){const r=_o(e);if(!r)return!1;const{Hostname:n,HostName:i,path:a}=r;return this.host=i||n,this.owner=this.getOwnerName(a)||"",this.repositoryName=this.getRepositoryName(a)||"",this.type=2,!0}getHostName(e){const r=/^(?:.*:?@)?([^:]*)(?::.*)?$/.exec(e);return r&&r.length>=2?r[1].toLocaleLowerCase()==="www.github.com"?"github.com":r[1]:""}getRepositoryName(e){let r=e.replace(/\\/g,"/");r.endsWith("/")&&(r=r.substr(0,r.length-1));const n=r.lastIndexOf("/"),i=r.substr(n+1);if(!(i===""||i==="/"))return i.replace(/\/$/,"").replace(/\.git$/,"")}getOwnerName(e){let r=e.replace(/\\/g,"/");r.endsWith("/")&&(r=r.substr(0,r.length-1));const n=r.split("/");if(n.length>1)return n[n.length-2]}normalizeUri(){if(this.type===4&&!this.url)return;if(this.type===0)return this.url;let e="https";this.url&&(this.url.scheme==="http"||this.url.scheme==="https")&&(e=this.url.scheme);try{return d.Uri.parse(`${e}://${this.host.toLocaleLowerCase()}/${this.nameWithOwner.toLocaleLowerCase()}`)}catch(r){return}}toString(){if(this.type===2)return`git@${this.host}:${this.owner}/${this.repositoryName}`;if(this.type===3)return`git://git@${this.host}:${this.owner}/${this.repositoryName}`;const e=this.normalizeUri();if(e)return e.toString()}update(e){return e.type&&(this.type=e.type),e.host&&(this.host=e.host),e.owner&&(this.owner=e.owner),e.repositoryName&&(this.repositoryName=e.repositoryName),this}equals(e){const r=this.normalizeUri();if(!r)return!1;const n=e.normalizeUri();return n?r.toString().toLocaleLowerCase()===n.toString().toLocaleLowerCase():!1}}var ul=Object.defineProperty,ll=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?ul(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Eo{constructor(e,r,n,i){this.ref=e,this.label=r,this.sha=n,ll(this,"repositoryCloneUrl"),this.repositoryCloneUrl=new Bn(i)}}var sr;(function(t){t[t.Committed=0]="Committed",t[t.Mentioned=1]="Mentioned",t[t.Subscribed=2]="Subscribed",t[t.Commented=3]="Commented",t[t.Reviewed=4]="Reviewed",t[t.Labeled=5]="Labeled",t[t.Milestoned=6]="Milestoned",t[t.Assigned=7]="Assigned",t[t.HeadRefDeleted=8]="HeadRefDeleted",t[t.Merged=9]="Merged",t[t.Other=10]="Other"})(sr||(sr={}));function Ds(t){return t.event===4}function cl(t){return t.event===0}function dl(t){return t.event===3}function pd(t){return t.event===9}function md(t){return t.event===7}function fd(t){return t.event===8}function hl(t){return t.__typename==="CheckRun"}var dr;(function(t){t[t.Query=0]="Query",t[t.All=1]="All",t[t.LocalPullRequest=2]="LocalPullRequest"})(dr||(dr={}));var kn;(function(t){t.Approve="APPROVE",t.RequestChanges="REQUEST_CHANGES",t.Comment="COMMENT"})(kn||(kn={}));var Qt;(function(t){t[t.Open=0]="Open",t[t.Merged=1]="Merged",t[t.Closed=2]="Closed"})(Qt||(Qt={}));var Tn;(function(t){t[t.Mergeable=0]="Mergeable",t[t.NotMergeable=1]="NotMergeable",t[t.Unknown=2]="Unknown"})(Tn||(Tn={}));var Ea=it(6417),pl=it.n(Ea),ml=Object.defineProperty,fl=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?ml(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const So=class{static initialize(t){So.icons={reactions:{THUMBS_UP:t.asAbsolutePath($.join("resources","icons","reactions","thumbs_up.png")),THUMBS_DOWN:t.asAbsolutePath($.join("resources","icons","reactions","thumbs_down.png")),CONFUSED:t.asAbsolutePath($.join("resources","icons","reactions","confused.png")),EYES:t.asAbsolutePath($.join("resources","icons","reactions","eyes.png")),HEART:t.asAbsolutePath($.join("resources","icons","reactions","heart.png")),HOORAY:t.asAbsolutePath($.join("resources","icons","reactions","hooray.png")),LAUGH:t.asAbsolutePath($.join("resources","icons","reactions","laugh.png")),ROCKET:t.asAbsolutePath($.join("resources","icons","reactions","rocket.png"))}}}};let dn=So;fl(dn,"icons");function Os(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof process=="object"&&"version"in process?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:"<environment undetectable>"}var gl=it(5186);/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function ko(t){return Object.prototype.toString.call(t)==="[object Object]"}function To(t){var e,r;return ko(t)===!1?!1:(e=t.constructor,e===void 0?!0:(r=e.prototype,!(ko(r)===!1||r.hasOwnProperty("isPrototypeOf")===!1)))}function vl(t){return t?Object.keys(t).reduce((e,r)=>(e[r.toLowerCase()]=t[r],e),{}):{}}function Ro(t,e){const r=Object.assign({},t);return Object.keys(e).forEach(n=>{To(e[n])?n in t?r[n]=Ro(t[n],e[n]):Object.assign(r,{[n]:e[n]}):Object.assign(r,{[n]:e[n]})}),r}function xs(t){for(const e in t)t[e]===void 0&&delete t[e];return t}function mi(t,e,r){if(typeof e=="string"){let[i,a]=e.split(" ");r=Object.assign(a?{method:i,url:a}:{url:i},r)}else r=Object.assign({},e);r.headers=vl(r.headers),xs(r),xs(r.headers);const n=Ro(t||{},r);return t&&t.mediaType.previews.length&&(n.mediaType.previews=t.mediaType.previews.filter(i=>!n.mediaType.previews.includes(i)).concat(n.mediaType.previews)),n.mediaType.previews=n.mediaType.previews.map(i=>i.replace(/-preview/,"")),n}function zr(t,e){const r=/\?/.test(t)?"&":"?",n=Object.keys(e);return n.length===0?t:t+r+n.map(i=>i==="q"?"q="+e.q.split("+").map(encodeURIComponent).join("+"):`${i}=${encodeURIComponent(e[i])}`).join("&")}const $i=/\{[^}]+\}/g;function Ms(t){return t.replace(/^\W+|\W+$/g,"").split(/,/)}function Co(t){const e=t.match($i);return e?e.map(Ms).reduce((r,n)=>r.concat(n),[]):[]}function Rn(t,e){return Object.keys(t).filter(r=>!e.includes(r)).reduce((r,n)=>(r[n]=t[n],r),{})}function Po(t){return t.split(/(%[0-9A-Fa-f]{2})/g).map(function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]")),e}).join("")}function fi(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function ss(t,e,r){return e=t==="+"||t==="#"?Po(e):fi(e),r?fi(r)+"="+e:e}function Gi(t){return t!=null}function Fs(t){return t===";"||t==="&"||t==="?"}function yl(t,e,r,n){var i=t[r],a=[];if(Gi(i)&&i!=="")if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")i=i.toString(),n&&n!=="*"&&(i=i.substring(0,parseInt(n,10))),a.push(ss(e,i,Fs(e)?r:""));else if(n==="*")Array.isArray(i)?i.filter(Gi).forEach(function(o){a.push(ss(e,o,Fs(e)?r:""))}):Object.keys(i).forEach(function(o){Gi(i[o])&&a.push(ss(e,i[o],o))});else{const o=[];Array.isArray(i)?i.filter(Gi).forEach(function(m){o.push(ss(e,m))}):Object.keys(i).forEach(function(m){Gi(i[m])&&(o.push(fi(m)),o.push(ss(e,i[m].toString())))}),Fs(e)?a.push(fi(r)+"="+o.join(",")):o.length!==0&&a.push(o.join(","))}else e===";"?Gi(i)&&a.push(fi(r)):i===""&&(e==="&"||e==="?")?a.push(fi(r)+"="):i===""&&a.push("");return a}function bl(t){return{expand:No.bind(null,t)}}function No(t,e){var r=["+","#",".","/",";","?","&"];return t.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(n,i,a){if(i){let m="";const S=[];if(r.indexOf(i.charAt(0))!==-1&&(m=i.charAt(0),i=i.substr(1)),i.split(/,/g).forEach(function(T){var A=/([^:\*]*)(?::(\d+)|(\*))?/.exec(T);S.push(yl(e,m,A[1],A[2]||A[3]))}),m&&m!=="+"){var o=",";return m==="?"?o="&":m!=="#"&&(o=m),(S.length!==0?m:"")+S.join(o)}else return S.join(",")}else return Po(a)})}function Ao(t){let e=t.method.toUpperCase(),r=(t.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),n=Object.assign({},t.headers),i,a=Rn(t,["method","baseUrl","url","headers","request","mediaType"]);const o=Co(r);r=bl(r).expand(a),/^http/.test(r)||(r=t.baseUrl+r);const m=Object.keys(t).filter(A=>o.includes(A)).concat("baseUrl"),S=Rn(a,m);if(!/application\/octet-stream/i.test(n.accept)&&(t.mediaType.format&&(n.accept=n.accept.split(/,/).map(A=>A.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${t.mediaType.format}`)).join(",")),t.mediaType.previews.length)){const A=n.accept.match(/[\w-]+(?=-preview)/g)||[];n.accept=A.concat(t.mediaType.previews).map(H=>{const Y=t.mediaType.format?`.${t.mediaType.format}`:"+json";return`application/vnd.github.${H}-preview${Y}`}).join(",")}return["GET","HEAD"].includes(e)?r=zr(r,S):"data"in S?i=S.data:Object.keys(S).length?i=S:n["content-length"]=0,!n["content-type"]&&typeof i!="undefined"&&(n["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(e)&&typeof i=="undefined"&&(i=""),Object.assign({method:e,url:r,headers:n},typeof i!="undefined"?{body:i}:null,t.request?{request:t.request}:null)}function wl(t,e,r){return Ao(mi(t,e,r))}function Io(t,e){const r=mi(t,e),n=wl.bind(null,r);return Object.assign(n,{DEFAULTS:r,defaults:Io.bind(null,r),merge:mi.bind(null,r),parse:Ao})}const _l=`octokit-endpoint.js/6.0.11 ${Os()}`,El=Io(null,{method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":_l},mediaType:{format:"",previews:[]}});var Pt=it(2413),gi=it(8605),vi=it(8835),Ls=it(7211),Gr=it(8761);const Sl=Pt.Readable,Cn=Symbol("buffer"),Sa=Symbol("type");class Hi{constructor(){this[Sa]="";const e=arguments[0],r=arguments[1],n=[];let i=0;if(e){const o=e,m=Number(o.length);for(let S=0;S<m;S++){const T=o[S];let A;T instanceof Buffer?A=T:ArrayBuffer.isView(T)?A=Buffer.from(T.buffer,T.byteOffset,T.byteLength):T instanceof ArrayBuffer?A=Buffer.from(T):T instanceof Hi?A=T[Cn]:A=Buffer.from(typeof T=="string"?T:String(T)),i+=A.length,n.push(A)}}this[Cn]=Buffer.concat(n);let a=r&&r.type!==void 0&&String(r.type).toLowerCase();a&&!/[^\u0020-\u007E]/.test(a)&&(this[Sa]=a)}get size(){return this[Cn].length}get type(){return this[Sa]}text(){return Promise.resolve(this[Cn].toString())}arrayBuffer(){const e=this[Cn],r=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return Promise.resolve(r)}stream(){const e=new Sl;return e._read=function(){},e.push(this[Cn]),e.push(null),e}toString(){return"[object Blob]"}slice(){const e=this.size,r=arguments[0],n=arguments[1];let i,a;r===void 0?i=0:r<0?i=Math.max(e+r,0):i=Math.min(r,e),n===void 0?a=e:n<0?a=Math.max(e+n,0):a=Math.min(n,e);const o=Math.max(a-i,0),S=this[Cn].slice(i,i+o),T=new Hi([],{type:arguments[2]});return T[Cn]=S,T}}Object.defineProperties(Hi.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(Hi.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0});function Rr(t,e,r){Error.call(this,t),this.message=t,this.type=e,r&&(this.code=this.errno=r.code),Error.captureStackTrace(this,this.constructor)}Rr.prototype=Object.create(Error.prototype),Rr.prototype.constructor=Rr,Rr.prototype.name="FetchError";let ka;try{ka=require("encoding").convert}catch(t){}const Pn=Symbol("Body internals"),Do=Pt.PassThrough;function hr(t){var e=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.size;let i=n===void 0?0:n;var a=r.timeout;let o=a===void 0?0:a;t==null?t=null:Oo(t)?t=Buffer.from(t.toString()):as(t)||Buffer.isBuffer(t)||(Object.prototype.toString.call(t)==="[object ArrayBuffer]"?t=Buffer.from(t):ArrayBuffer.isView(t)?t=Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof Pt||(t=Buffer.from(String(t)))),this[Pn]={body:t,disturbed:!1,error:null},this.size=i,this.timeout=o,t instanceof Pt&&t.on("error",function(m){const S=m.name==="AbortError"?m:new Rr(`Invalid response body while trying to fetch ${e.url}: ${m.message}`,"system",m);e[Pn].error=S})}hr.prototype={get body(){return this[Pn].body},get bodyUsed(){return this[Pn].disturbed},arrayBuffer(){return Vi.call(this).then(function(t){return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)})},blob(){let t=this.headers&&this.headers.get("content-type")||"";return Vi.call(this).then(function(e){return Object.assign(new Hi([],{type:t.toLowerCase()}),{[Cn]:e})})},json(){var t=this;return Vi.call(this).then(function(e){try{return JSON.parse(e.toString())}catch(r){return hr.Promise.reject(new Rr(`invalid json response body at ${t.url} reason: ${r.message}`,"invalid-json"))}})},text(){return Vi.call(this).then(function(t){return t.toString()})},buffer(){return Vi.call(this)},textConverted(){var t=this;return Vi.call(this).then(function(e){return kl(e,t.headers)})}},Object.defineProperties(hr.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),hr.mixIn=function(t){for(const e of Object.getOwnPropertyNames(hr.prototype))if(!(e in t)){const r=Object.getOwnPropertyDescriptor(hr.prototype,e);Object.defineProperty(t,e,r)}};function Vi(){var t=this;if(this[Pn].disturbed)return hr.Promise.reject(new TypeError(`body used already for: ${this.url}`));if(this[Pn].disturbed=!0,this[Pn].error)return hr.Promise.reject(this[Pn].error);let e=this.body;if(e===null)return hr.Promise.resolve(Buffer.alloc(0));if(as(e)&&(e=e.stream()),Buffer.isBuffer(e))return hr.Promise.resolve(e);if(!(e instanceof Pt))return hr.Promise.resolve(Buffer.alloc(0));let r=[],n=0,i=!1;return new hr.Promise(function(a,o){let m;t.timeout&&(m=setTimeout(function(){i=!0,o(new Rr(`Response timeout while trying to fetch ${t.url} (over ${t.timeout}ms)`,"body-timeout"))},t.timeout)),e.on("error",function(S){S.name==="AbortError"?(i=!0,o(S)):o(new Rr(`Invalid response body while trying to fetch ${t.url}: ${S.message}`,"system",S))}),e.on("data",function(S){if(!(i||S===null)){if(t.size&&n+S.length>t.size){i=!0,o(new Rr(`content size at ${t.url} over limit: ${t.size}`,"max-size"));return}n+=S.length,r.push(S)}}),e.on("end",function(){if(!i){clearTimeout(m);try{a(Buffer.concat(r,n))}catch(S){o(new Rr(`Could not create Buffer from response body for ${t.url}: ${S.message}`,"system",S))}}})})}function kl(t,e){if(typeof ka!="function")throw new Error("The package `encoding` must be installed to use the textConverted() function");const r=e.get("content-type");let n="utf-8",i,a;return r&&(i=/charset=([^;]*)/i.exec(r)),a=t.slice(0,1024).toString(),!i&&a&&(i=/<meta.+?charset=(['"])(.+?)\1/i.exec(a)),!i&&a&&(i=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(a),i||(i=/<meta[\s]+?content=(['"])(.+?)\1[\s]+?http-equiv=(['"])content-type\3/i.exec(a),i&&i.pop()),i&&(i=/charset=(.*)/i.exec(i.pop()))),!i&&a&&(i=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(a)),i&&(n=i.pop(),(n==="gb2312"||n==="gbk")&&(n="gb18030")),ka(t,"UTF-8",n).toString()}function Oo(t){return typeof t!="object"||typeof t.append!="function"||typeof t.delete!="function"||typeof t.get!="function"||typeof t.getAll!="function"||typeof t.has!="function"||typeof t.set!="function"?!1:t.constructor.name==="URLSearchParams"||Object.prototype.toString.call(t)==="[object URLSearchParams]"||typeof t.sort=="function"}function as(t){return typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&typeof t.constructor.name=="string"&&/^(Blob|File)$/.test(t.constructor.name)&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}function xo(t){let e,r,n=t.body;if(t.bodyUsed)throw new Error("cannot clone body after it is used");return n instanceof Pt&&typeof n.getBoundary!="function"&&(e=new Do,r=new Do,n.pipe(e),n.pipe(r),t[Pn].body=e,n=r),n}function Mo(t){return t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":Oo(t)?"application/x-www-form-urlencoded;charset=UTF-8":as(t)?t.type||null:Buffer.isBuffer(t)||Object.prototype.toString.call(t)==="[object ArrayBuffer]"||ArrayBuffer.isView(t)?null:typeof t.getBoundary=="function"?`multipart/form-data;boundary=${t.getBoundary()}`:t instanceof Pt?null:"text/plain;charset=UTF-8"}function Fo(t){const e=t.body;return e===null?0:as(e)?e.size:Buffer.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"&&(e._lengthRetrievers&&e._lengthRetrievers.length==0||e.hasKnownLength&&e.hasKnownLength())?e.getLengthSync():null}function Tl(t,e){const r=e.body;r===null?t.end():as(r)?r.stream().pipe(t):Buffer.isBuffer(r)?(t.write(r),t.end()):r.pipe(t)}hr.Promise=global.Promise;const Lo=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,Ta=/[^\t\x20-\x7e\x80-\xff]/;function os(t){if(t=`${t}`,Lo.test(t)||t==="")throw new TypeError(`${t} is not a legal HTTP header name`)}function qo(t){if(t=`${t}`,Ta.test(t))throw new TypeError(`${t} is not a legal HTTP header value`)}function Bi(t,e){e=e.toLowerCase();for(const r in t)if(r.toLowerCase()===e)return r}const _t=Symbol("map");class Qr{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;if(this[_t]=Object.create(null),e instanceof Qr){const r=e.raw(),n=Object.keys(r);for(const i of n)for(const a of r[i])this.append(i,a);return}if(e!=null)if(typeof e=="object"){const r=e[Symbol.iterator];if(r!=null){if(typeof r!="function")throw new TypeError("Header pairs must be iterable");const n=[];for(const i of e){if(typeof i!="object"||typeof i[Symbol.iterator]!="function")throw new TypeError("Each header pair must be iterable");n.push(Array.from(i))}for(const i of n){if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");this.append(i[0],i[1])}}else for(const n of Object.keys(e)){const i=e[n];this.append(n,i)}}else throw new TypeError("Provided initializer must be an object")}get(e){e=`${e}`,os(e);const r=Bi(this[_t],e);return r===void 0?null:this[_t][r].join(", ")}forEach(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,n=qs(this),i=0;for(;i<n.length;){var a=n[i];const o=a[0],m=a[1];e.call(r,m,o,this),n=qs(this),i++}}set(e,r){e=`${e}`,r=`${r}`,os(e),qo(r);const n=Bi(this[_t],e);this[_t][n!==void 0?n:e]=[r]}append(e,r){e=`${e}`,r=`${r}`,os(e),qo(r);const n=Bi(this[_t],e);n!==void 0?this[_t][n].push(r):this[_t][e]=[r]}has(e){return e=`${e}`,os(e),Bi(this[_t],e)!==void 0}delete(e){e=`${e}`,os(e);const r=Bi(this[_t],e);r!==void 0&&delete this[_t][r]}raw(){return this[_t]}keys(){return us(this,"key")}values(){return us(this,"value")}[Symbol.iterator](){return us(this,"key+value")}}Qr.prototype.entries=Qr.prototype[Symbol.iterator],Object.defineProperty(Qr.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(Qr.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});function qs(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"key+value";return Object.keys(t[_t]).sort().map(e==="key"?function(n){return n.toLowerCase()}:e==="value"?function(n){return t[_t][n].join(", ")}:function(n){return[n.toLowerCase(),t[_t][n].join(", ")]})}const Ra=Symbol("internal");function us(t,e){const r=Object.create(ls);return r[Ra]={target:t,kind:e,index:0},r}const ls=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==ls)throw new TypeError("Value of `this` is not a HeadersIterator");var t=this[Ra];const e=t.target,r=t.kind,n=t.index,i=qs(e,r),a=i.length;return n>=a?{value:void 0,done:!0}:(this[Ra].index=n+1,{value:i[n],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));Object.defineProperty(ls,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});function Rl(t){const e=Object.assign({__proto__:null},t[_t]),r=Bi(t[_t],"Host");return r!==void 0&&(e[r]=e[r][0]),e}function Cl(t){const e=new Qr;for(const r of Object.keys(t))if(!Lo.test(r))if(Array.isArray(t[r]))for(const n of t[r])Ta.test(n)||(e[_t][r]===void 0?e[_t][r]=[n]:e[_t][r].push(n));else Ta.test(t[r])||(e[_t][r]=[t[r]]);return e}const jn=Symbol("Response internals"),Pl=gi.STATUS_CODES;class Zr{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};hr.call(this,e,r);const n=r.status||200,i=new Qr(r.headers);if(e!=null&&!i.has("Content-Type")){const a=Mo(e);a&&i.append("Content-Type",a)}this[jn]={url:r.url,status:n,statusText:r.statusText||Pl[n],headers:i,counter:r.counter}}get url(){return this[jn].url||""}get status(){return this[jn].status}get ok(){return this[jn].status>=200&&this[jn].status<300}get redirected(){return this[jn].counter>0}get statusText(){return this[jn].statusText}get headers(){return this[jn].headers}clone(){return new Zr(xo(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}}hr.mixIn(Zr.prototype),Object.defineProperties(Zr.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(Zr.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});const Nn=Symbol("Request internals"),Us=vi.parse,Nl=vi.format,Al="destroy"in Pt.Readable.prototype;function cs(t){return typeof t=="object"&&typeof t[Nn]=="object"}function Il(t){const e=t&&typeof t=="object"&&Object.getPrototypeOf(t);return!!(e&&e.constructor.name==="AbortSignal")}class yi{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n;cs(e)?n=Us(e.url):(e&&e.href?n=Us(e.href):n=Us(`${e}`),e={});let i=r.method||e.method||"GET";if(i=i.toUpperCase(),(r.body!=null||cs(e)&&e.body!==null)&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let a=r.body!=null?r.body:cs(e)&&e.body!==null?xo(e):null;hr.call(this,a,{timeout:r.timeout||e.timeout||0,size:r.size||e.size||0});const o=new Qr(r.headers||e.headers||{});if(a!=null&&!o.has("Content-Type")){const S=Mo(a);S&&o.append("Content-Type",S)}let m=cs(e)?e.signal:null;if("signal"in r&&(m=r.signal),m!=null&&!Il(m))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[Nn]={method:i,redirect:r.redirect||e.redirect||"follow",headers:o,parsedURL:n,signal:m},this.follow=r.follow!==void 0?r.follow:e.follow!==void 0?e.follow:20,this.compress=r.compress!==void 0?r.compress:e.compress!==void 0?e.compress:!0,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent}get method(){return this[Nn].method}get url(){return Nl(this[Nn].parsedURL)}get headers(){return this[Nn].headers}get redirect(){return this[Nn].redirect}get signal(){return this[Nn].signal}clone(){return new yi(this)}}hr.mixIn(yi.prototype),Object.defineProperty(yi.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(yi.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});function Dl(t){const e=t[Nn].parsedURL,r=new Qr(t[Nn].headers);if(r.has("Accept")||r.set("Accept","*/*"),!e.protocol||!e.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(e.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(t.signal&&t.body instanceof Pt.Readable&&!Al)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let n=null;if(t.body==null&&/^(POST|PUT)$/i.test(t.method)&&(n="0"),t.body!=null){const a=Fo(t);typeof a=="number"&&(n=String(a))}n&&r.set("Content-Length",n),r.has("User-Agent")||r.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),t.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip,deflate");let i=t.agent;return typeof i=="function"&&(i=i(e)),!r.has("Connection")&&!i&&r.set("Connection","close"),Object.assign({},e,{method:t.method,headers:Rl(r),agent:i})}function ds(t){Error.call(this,t),this.type="aborted",this.message=t,Error.captureStackTrace(this,this.constructor)}ds.prototype=Object.create(Error.prototype),ds.prototype.constructor=ds,ds.prototype.name="AbortError";const Uo=Pt.PassThrough,Ol=vi.resolve;function zn(t,e){if(!zn.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return hr.Promise=zn.Promise,new zn.Promise(function(r,n){const i=new yi(t,e),a=Dl(i),o=(a.protocol==="https:"?Ls:gi).request,m=i.signal;let S=null;const T=function(){let be=new ds("The user aborted a request.");n(be),i.body&&i.body instanceof Pt.Readable&&i.body.destroy(be),!(!S||!S.body)&&S.body.emit("error",be)};if(m&&m.aborted){T();return}const A=function(){T(),pe()},H=o(a);let Y;m&&m.addEventListener("abort",A);function pe(){H.abort(),m&&m.removeEventListener("abort",A),clearTimeout(Y)}i.timeout&&H.once("socket",function(me){Y=setTimeout(function(){n(new Rr(`network timeout at: ${i.url}`,"request-timeout")),pe()},i.timeout)}),H.on("error",function(me){n(new Rr(`request to ${i.url} failed, reason: ${me.message}`,"system",me)),pe()}),H.on("response",function(me){clearTimeout(Y);const be=Cl(me.headers);if(zn.isRedirect(me.statusCode)){const Ue=be.get("Location"),We=Ue===null?null:Ol(i.url,Ue);switch(i.redirect){case"error":n(new Rr(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),pe();return;case"manual":if(We!==null)try{be.set("Location",We)}catch(Dt){n(Dt)}break;case"follow":if(We===null)break;if(i.counter>=i.follow){n(new Rr(`maximum redirect reached at: ${i.url}`,"max-redirect")),pe();return}const It={headers:new Qr(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:i.body,signal:i.signal,timeout:i.timeout,size:i.size};if(me.statusCode!==303&&i.body&&Fo(i)===null){n(new Rr("Cannot follow redirect with body being a readable stream","unsupported-redirect")),pe();return}(me.statusCode===303||(me.statusCode===301||me.statusCode===302)&&i.method==="POST")&&(It.method="GET",It.body=void 0,It.headers.delete("content-length")),r(zn(new yi(We,It))),pe();return}}me.once("end",function(){m&&m.removeEventListener("abort",A)});let Ne=me.pipe(new Uo);const Ae={url:i.url,status:me.statusCode,statusText:me.statusMessage,headers:be,size:i.size,timeout:i.timeout,counter:i.counter},Ge=be.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||Ge===null||me.statusCode===204||me.statusCode===304){S=new Zr(Ne,Ae),r(S);return}const $e={flush:Gr.Z_SYNC_FLUSH,finishFlush:Gr.Z_SYNC_FLUSH};if(Ge=="gzip"||Ge=="x-gzip"){Ne=Ne.pipe(Gr.createGunzip($e)),S=new Zr(Ne,Ae),r(S);return}if(Ge=="deflate"||Ge=="x-deflate"){me.pipe(new Uo).once("data",function(We){(We[0]&15)==8?Ne=Ne.pipe(Gr.createInflate()):Ne=Ne.pipe(Gr.createInflateRaw()),S=new Zr(Ne,Ae),r(S)});return}if(Ge=="br"&&typeof Gr.createBrotliDecompress=="function"){Ne=Ne.pipe(Gr.createBrotliDecompress()),S=new Zr(Ne,Ae),r(S);return}S=new Zr(Ne,Ae),r(S)}),Tl(H,i)})}zn.isRedirect=function(t){return t===301||t===302||t===303||t===307||t===308},zn.Promise=global.Promise;const xl=zn;class ji extends Error{constructor(e){super(e);Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="Deprecation"}}var Ml=it(778),Fl=it.n(Ml);const Ll=Fl()(t=>console.warn(t));class hs extends Error{constructor(e,r,n){super(e);Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="HttpError",this.status=r,Object.defineProperty(this,"code",{get(){return Ll(new ji("[@octokit/request-error] `error.code` is deprecated, use `error.status`.")),r}}),this.headers=n.headers||{};const i=Object.assign({},n.request);n.request.headers.authorization&&(i.headers=Object.assign({},n.request.headers,{authorization:n.request.headers.authorization.replace(/ .*$/," [REDACTED]")})),i.url=i.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=i}}const ql="5.4.14";function Qn(t){return t.arrayBuffer()}function $s(t){(To(t.body)||Array.isArray(t.body))&&(t.body=JSON.stringify(t.body));let e={},r,n;return(t.request&&t.request.fetch||xl)(t.url,Object.assign({method:t.method,body:t.body,headers:t.headers,redirect:t.redirect},t.request)).then(a=>{n=a.url,r=a.status;for(const m of a.headers)e[m[0]]=m[1];if(r===204||r===205)return;if(t.method==="HEAD"){if(r<400)return;throw new hs(a.statusText,r,{headers:e,request:t})}if(r===304)throw new hs("Not modified",r,{headers:e,request:t});if(r>=400)return a.text().then(m=>{const S=new hs(m,r,{headers:e,request:t});try{let T=JSON.parse(S.message);Object.assign(S,T);let A=T.errors;S.message=S.message+": "+A.map(JSON.stringify).join(", ")}catch(T){}throw S});const o=a.headers.get("content-type");return/application\/json/.test(o)?a.json():!o||/^text\/|charset=utf-8$/.test(o)?a.text():Qn(a)}).then(a=>({status:r,url:n,headers:e,data:a})).catch(a=>{throw a instanceof hs?a:new hs(a.message,500,{headers:e,request:t})})}function Ca(t,e){const r=t.defaults(e);return Object.assign(function(i,a){const o=r.merge(i,a);if(!o.request||!o.request.hook)return $s(r.parse(o));const m=(S,T)=>$s(r.parse(r.merge(S,T)));return Object.assign(m,{endpoint:r,defaults:Ca.bind(null,r)}),o.request.hook(m,o)},{endpoint:r,defaults:Ca.bind(null,r)})}const Gs=Ca(El,{headers:{"user-agent":`octokit-request.js/${ql} ${Os()}`}}),$o="4.6.1";class Hs extends Error{constructor(e,r){const n=r.data.errors[0].message;super(n);Object.assign(this,r.data),Object.assign(this,{headers:r.headers}),this.name="GraphqlError",this.request=e,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}const Ul=["method","baseUrl","url","headers","request","query","mediaType"],$l=["query","method","url"],Go=/\/api\/v3\/?$/;function Gl(t,e,r){if(r){if(typeof e=="string"&&"query"in r)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(const o in r)if(!!$l.includes(o))return Promise.reject(new Error(`[@octokit/graphql] "${o}" cannot be used as variable name`))}const n=typeof e=="string"?Object.assign({query:e},r):e,i=Object.keys(n).reduce((o,m)=>Ul.includes(m)?(o[m]=n[m],o):(o.variables||(o.variables={}),o.variables[m]=n[m],o),{}),a=n.baseUrl||t.endpoint.DEFAULTS.baseUrl;return Go.test(a)&&(i.url=a.replace(Go,"/api/graphql")),t(i).then(o=>{if(o.data.errors){const m={};for(const S of Object.keys(o.headers))m[S]=o.headers[S];throw new Hs(i,{headers:m,data:o.data})}return o.data.data})}function Pa(t,e){const r=t.defaults(e);return Object.assign((i,a)=>Gl(r,i,a),{defaults:Pa.bind(null,r),endpoint:Gs.endpoint})}const yd=Pa(Gs,{headers:{"user-agent":`octokit-graphql.js/${$o} ${Os()}`},method:"POST",url:"/graphql"});function Hl(t){return Pa(t,{method:"POST",url:"/graphql"})}async function ps(t){const e=t.split(/\./).length===3?"app":/^v\d+\./.test(t)?"installation":"oauth";return{type:"token",token:t,tokenType:e}}function Vl(t){return t.split(/\./).length===3?`bearer ${t}`:`token ${t}`}async function Ho(t,e,r,n){const i=e.endpoint.merge(r,n);return i.headers.authorization=Vl(t),e(i)}const Bl=function(e){if(!e)throw new Error("[@octokit/auth-token] No token passed to createTokenAuth");if(typeof e!="string")throw new Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return e=e.replace(/^(token|bearer) +/i,""),Object.assign(ps.bind(null,e),{hook:Ho.bind(null,e)})},Vo="3.3.1";class Na{constructor(e={}){const r=new gl.Collection,n={baseUrl:Gs.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},e.request,{hook:r.bind(null,"request")}),mediaType:{previews:[],format:""}};if(n.headers["user-agent"]=[e.userAgent,`octokit-core.js/${Vo} ${Os()}`].filter(Boolean).join(" "),e.baseUrl&&(n.baseUrl=e.baseUrl),e.previews&&(n.mediaType.previews=e.previews),e.timeZone&&(n.headers["time-zone"]=e.timeZone),this.request=Gs.defaults(n),this.graphql=Hl(this.request).defaults(n),this.log=Object.assign({debug:()=>{},info:()=>{},warn:console.warn.bind(console),error:console.error.bind(console)},e.log),this.hook=r,e.authStrategy){const{authStrategy:a,...o}=e,m=a(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:o},e.auth));r.wrap("request",m.hook),this.auth=m}else if(!e.auth)this.auth=async()=>({type:"unauthenticated"});else{const a=Bl(e.auth);r.wrap("request",a.hook),this.auth=a}this.constructor.plugins.forEach(a=>{Object.assign(this,a(this,e))})}static defaults(e){return class extends this{constructor(...n){const i=n[0]||{};if(typeof e=="function"){super(e(i));return}super(Object.assign({},e,i,i.userAgent&&e.userAgent?{userAgent:`${i.userAgent} ${e.userAgent}`}:null))}}}static plugin(...e){var r;const n=this.plugins;return r=class extends this{},r.plugins=n.concat(e.filter(a=>!n.includes(a))),r}}Na.VERSION=Vo,Na.plugins=[];const jl="1.0.3";function Bo(t){t.hook.wrap("request",(e,r)=>{t.log.debug("request",r);const n=Date.now(),i=t.request.endpoint.parse(r),a=i.url.replace(r.baseUrl,"");return e(r).then(o=>(t.log.info(`${i.method} ${a} - ${o.status} in ${Date.now()-n}ms`),o)).catch(o=>{throw t.log.info(`${i.method} ${a} - ${o.status} in ${Date.now()-n}ms`),o})})}Bo.VERSION=jl;const jo="2.13.2";function zl(t){if(!("total_count"in t.data&&!("url"in t.data)))return t;const r=t.data.incomplete_results,n=t.data.repository_selection,i=t.data.total_count;delete t.data.incomplete_results,delete t.data.repository_selection,delete t.data.total_count;const a=Object.keys(t.data)[0],o=t.data[a];return t.data=o,typeof r!="undefined"&&(t.data.incomplete_results=r),typeof n!="undefined"&&(t.data.repository_selection=n),t.data.total_count=i,t}function Aa(t,e,r){const n=typeof e=="function"?e.endpoint(r):t.request.endpoint(e,r),i=typeof e=="function"?e:t.request,a=n.method,o=n.headers;let m=n.url;return{[Symbol.asyncIterator]:()=>({async next(){if(!m)return{done:!0};const S=await i({method:a,url:m,headers:o}),T=zl(S);return m=((T.headers.link||"").match(/<([^>]+)>;\s*rel="next"/)||[])[1],{value:T}}})}}function zo(t,e,r,n){return typeof r=="function"&&(n=r,r=void 0),Qo(t,[],Aa(t,e,r)[Symbol.asyncIterator](),n)}function Qo(t,e,r,n){return r.next().then(i=>{if(i.done)return e;let a=!1;function o(){a=!0}return e=e.concat(n?n(i.value,o):i.value.data),a?e:Qo(t,e,r,n)})}const bd=Object.assign(zo,{iterator:Aa}),Ql=null;function wd(t){return typeof t=="string"?Ql.includes(t):!1}function Wo(t){return{paginate:Object.assign(zo.bind(null,t),{iterator:Aa.bind(null,t)})}}Wo.VERSION=jo;const Wl={actions:{addSelectedRepoToOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],cancelWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/cancel"],createOrUpdateOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/actions/secrets/{secret_name}"],createRegistrationTokenForOrg:["POST /orgs/{org}/actions/runners/registration-token"],createRegistrationTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/registration-token"],createRemoveTokenForOrg:["POST /orgs/{org}/actions/runners/remove-token"],createRemoveTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/remove-token"],createWorkflowDispatch:["POST /repos/{owner}/{repo}/actions/workflows/{workflow_id}/dispatches"],deleteArtifact:["DELETE /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],deleteOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/actions/secrets/{secret_name}"],deleteSelfHostedRunnerFromOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}"],deleteSelfHostedRunnerFromRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}"],deleteWorkflowRun:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}"],deleteWorkflowRunLogs:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],disableSelectedRepositoryGithubActionsOrganization:["DELETE /orgs/{org}/actions/permissions/repositories/{repository_id}"],disableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/disable"],downloadArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}/{archive_format}"],downloadJobLogsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}/logs"],downloadWorkflowRunLogs:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],enableSelectedRepositoryGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories/{repository_id}"],enableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/enable"],getAllowedActionsOrganization:["GET /orgs/{org}/actions/permissions/selected-actions"],getAllowedActionsRepository:["GET /repos/{owner}/{repo}/actions/permissions/selected-actions"],getArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],getGithubActionsPermissionsOrganization:["GET /orgs/{org}/actions/permissions"],getGithubActionsPermissionsRepository:["GET /repos/{owner}/{repo}/actions/permissions"],getJobForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}"],getOrgPublicKey:["GET /orgs/{org}/actions/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}"],getRepoPermissions:["GET /repos/{owner}/{repo}/actions/permissions",{},{renamed:["actions","getGithubActionsPermissionsRepository"]}],getRepoPublicKey:["GET /repos/{owner}/{repo}/actions/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/actions/secrets/{secret_name}"],getSelfHostedRunnerForOrg:["GET /orgs/{org}/actions/runners/{runner_id}"],getSelfHostedRunnerForRepo:["GET /repos/{owner}/{repo}/actions/runners/{runner_id}"],getWorkflow:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}"],getWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}"],getWorkflowRunUsage:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/timing"],getWorkflowUsage:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/timing"],listArtifactsForRepo:["GET /repos/{owner}/{repo}/actions/artifacts"],listJobsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/jobs"],listOrgSecrets:["GET /orgs/{org}/actions/secrets"],listRepoSecrets:["GET /repos/{owner}/{repo}/actions/secrets"],listRepoWorkflows:["GET /repos/{owner}/{repo}/actions/workflows"],listRunnerApplicationsForOrg:["GET /orgs/{org}/actions/runners/downloads"],listRunnerApplicationsForRepo:["GET /repos/{owner}/{repo}/actions/runners/downloads"],listSelectedReposForOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}/repositories"],listSelectedRepositoriesEnabledGithubActionsOrganization:["GET /orgs/{org}/actions/permissions/repositories"],listSelfHostedRunnersForOrg:["GET /orgs/{org}/actions/runners"],listSelfHostedRunnersForRepo:["GET /repos/{owner}/{repo}/actions/runners"],listWorkflowRunArtifacts:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/artifacts"],listWorkflowRuns:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/runs"],listWorkflowRunsForRepo:["GET /repos/{owner}/{repo}/actions/runs"],reRunWorkflow:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],setAllowedActionsOrganization:["PUT /orgs/{org}/actions/permissions/selected-actions"],setAllowedActionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions/selected-actions"],setGithubActionsPermissionsOrganization:["PUT /orgs/{org}/actions/permissions"],setGithubActionsPermissionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories"],setSelectedRepositoriesEnabledGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories"]},activity:{checkRepoIsStarredByAuthenticatedUser:["GET /user/starred/{owner}/{repo}"],deleteRepoSubscription:["DELETE /repos/{owner}/{repo}/subscription"],deleteThreadSubscription:["DELETE /notifications/threads/{thread_id}/subscription"],getFeeds:["GET /feeds"],getRepoSubscription:["GET /repos/{owner}/{repo}/subscription"],getThread:["GET /notifications/threads/{thread_id}"],getThreadSubscriptionForAuthenticatedUser:["GET /notifications/threads/{thread_id}/subscription"],listEventsForAuthenticatedUser:["GET /users/{username}/events"],listNotificationsForAuthenticatedUser:["GET /notifications"],listOrgEventsForAuthenticatedUser:["GET /users/{username}/events/orgs/{org}"],listPublicEvents:["GET /events"],listPublicEventsForRepoNetwork:["GET /networks/{owner}/{repo}/events"],listPublicEventsForUser:["GET /users/{username}/events/public"],listPublicOrgEvents:["GET /orgs/{org}/events"],listReceivedEventsForUser:["GET /users/{username}/received_events"],listReceivedPublicEventsForUser:["GET /users/{username}/received_events/public"],listRepoEvents:["GET /repos/{owner}/{repo}/events"],listRepoNotificationsForAuthenticatedUser:["GET /repos/{owner}/{repo}/notifications"],listReposStarredByAuthenticatedUser:["GET /user/starred"],listReposStarredByUser:["GET /users/{username}/starred"],listReposWatchedByUser:["GET /users/{username}/subscriptions"],listStargazersForRepo:["GET /repos/{owner}/{repo}/stargazers"],listWatchedReposForAuthenticatedUser:["GET /user/subscriptions"],listWatchersForRepo:["GET /repos/{owner}/{repo}/subscribers"],markNotificationsAsRead:["PUT /notifications"],markRepoNotificationsAsRead:["PUT /repos/{owner}/{repo}/notifications"],markThreadAsRead:["PATCH /notifications/threads/{thread_id}"],setRepoSubscription:["PUT /repos/{owner}/{repo}/subscription"],setThreadSubscription:["PUT /notifications/threads/{thread_id}/subscription"],starRepoForAuthenticatedUser:["PUT /user/starred/{owner}/{repo}"],unstarRepoForAuthenticatedUser:["DELETE /user/starred/{owner}/{repo}"]},apps:{addRepoToInstallation:["PUT /user/installations/{installation_id}/repositories/{repository_id}"],checkToken:["POST /applications/{client_id}/token"],createContentAttachment:["POST /content_references/{content_reference_id}/attachments",{mediaType:{previews:["corsair"]}}],createFromManifest:["POST /app-manifests/{code}/conversions"],createInstallationAccessToken:["POST /app/installations/{installation_id}/access_tokens"],deleteAuthorization:["DELETE /applications/{client_id}/grant"],deleteInstallation:["DELETE /app/installations/{installation_id}"],deleteToken:["DELETE /applications/{client_id}/token"],getAuthenticated:["GET /app"],getBySlug:["GET /apps/{app_slug}"],getInstallation:["GET /app/installations/{installation_id}"],getOrgInstallation:["GET /orgs/{org}/installation"],getRepoInstallation:["GET /repos/{owner}/{repo}/installation"],getSubscriptionPlanForAccount:["GET /marketplace_listing/accounts/{account_id}"],getSubscriptionPlanForAccountStubbed:["GET /marketplace_listing/stubbed/accounts/{account_id}"],getUserInstallation:["GET /users/{username}/installation"],getWebhookConfigForApp:["GET /app/hook/config"],listAccountsForPlan:["GET /marketplace_listing/plans/{plan_id}/accounts"],listAccountsForPlanStubbed:["GET /marketplace_listing/stubbed/plans/{plan_id}/accounts"],listInstallationReposForAuthenticatedUser:["GET /user/installations/{installation_id}/repositories"],listInstallations:["GET /app/installations"],listInstallationsForAuthenticatedUser:["GET /user/installations"],listPlans:["GET /marketplace_listing/plans"],listPlansStubbed:["GET /marketplace_listing/stubbed/plans"],listReposAccessibleToInstallation:["GET /installation/repositories"],listSubscriptionsForAuthenticatedUser:["GET /user/marketplace_purchases"],listSubscriptionsForAuthenticatedUserStubbed:["GET /user/marketplace_purchases/stubbed"],removeRepoFromInstallation:["DELETE /user/installations/{installation_id}/repositories/{repository_id}"],resetToken:["PATCH /applications/{client_id}/token"],revokeInstallationAccessToken:["DELETE /installation/token"],scopeToken:["POST /applications/{client_id}/token/scoped"],suspendInstallation:["PUT /app/installations/{installation_id}/suspended"],unsuspendInstallation:["DELETE /app/installations/{installation_id}/suspended"],updateWebhookConfigForApp:["PATCH /app/hook/config"]},billing:{getGithubActionsBillingOrg:["GET /orgs/{org}/settings/billing/actions"],getGithubActionsBillingUser:["GET /users/{username}/settings/billing/actions"],getGithubPackagesBillingOrg:["GET /orgs/{org}/settings/billing/packages"],getGithubPackagesBillingUser:["GET /users/{username}/settings/billing/packages"],getSharedStorageBillingOrg:["GET /orgs/{org}/settings/billing/shared-storage"],getSharedStorageBillingUser:["GET /users/{username}/settings/billing/shared-storage"]},checks:{create:["POST /repos/{owner}/{repo}/check-runs"],createSuite:["POST /repos/{owner}/{repo}/check-suites"],get:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}"],getSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}"],listAnnotations:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}/annotations"],listForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-runs"],listForSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}/check-runs"],listSuitesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-suites"],rerequestSuite:["POST /repos/{owner}/{repo}/check-suites/{check_suite_id}/rerequest"],setSuitesPreferences:["PATCH /repos/{owner}/{repo}/check-suites/preferences"],update:["PATCH /repos/{owner}/{repo}/check-runs/{check_run_id}"]},codeScanning:{deleteAnalysis:["DELETE /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}{?confirm_delete}"],getAlert:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}",{},{renamedParameters:{alert_id:"alert_number"}}],getAnalysis:["GET /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}"],getSarif:["GET /repos/{owner}/{repo}/code-scanning/sarifs/{sarif_id}"],listAlertsForRepo:["GET /repos/{owner}/{repo}/code-scanning/alerts"],listAlertsInstances:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances"],listRecentAnalyses:["GET /repos/{owner}/{repo}/code-scanning/analyses"],updateAlert:["PATCH /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}"],uploadSarif:["POST /repos/{owner}/{repo}/code-scanning/sarifs"]},codesOfConduct:{getAllCodesOfConduct:["GET /codes_of_conduct",{mediaType:{previews:["scarlet-witch"]}}],getConductCode:["GET /codes_of_conduct/{key}",{mediaType:{previews:["scarlet-witch"]}}],getForRepo:["GET /repos/{owner}/{repo}/community/code_of_conduct",{mediaType:{previews:["scarlet-witch"]}}]},emojis:{get:["GET /emojis"]},enterpriseAdmin:{disableSelectedOrganizationGithubActionsEnterprise:["DELETE /enterprises/{enterprise}/actions/permissions/organizations/{org_id}"],enableSelectedOrganizationGithubActionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions/organizations/{org_id}"],getAllowedActionsEnterprise:["GET /enterprises/{enterprise}/actions/permissions/selected-actions"],getGithubActionsPermissionsEnterprise:["GET /enterprises/{enterprise}/actions/permissions"],listSelectedOrganizationsEnabledGithubActionsEnterprise:["GET /enterprises/{enterprise}/actions/permissions/organizations"],setAllowedActionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions/selected-actions"],setGithubActionsPermissionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions"],setSelectedOrganizationsEnabledGithubActionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions/organizations"]},gists:{checkIsStarred:["GET /gists/{gist_id}/star"],create:["POST /gists"],createComment:["POST /gists/{gist_id}/comments"],delete:["DELETE /gists/{gist_id}"],deleteComment:["DELETE /gists/{gist_id}/comments/{comment_id}"],fork:["POST /gists/{gist_id}/forks"],get:["GET /gists/{gist_id}"],getComment:["GET /gists/{gist_id}/comments/{comment_id}"],getRevision:["GET /gists/{gist_id}/{sha}"],list:["GET /gists"],listComments:["GET /gists/{gist_id}/comments"],listCommits:["GET /gists/{gist_id}/commits"],listForUser:["GET /users/{username}/gists"],listForks:["GET /gists/{gist_id}/forks"],listPublic:["GET /gists/public"],listStarred:["GET /gists/starred"],star:["PUT /gists/{gist_id}/star"],unstar:["DELETE /gists/{gist_id}/star"],update:["PATCH /gists/{gist_id}"],updateComment:["PATCH /gists/{gist_id}/comments/{comment_id}"]},git:{createBlob:["POST /repos/{owner}/{repo}/git/blobs"],createCommit:["POST /repos/{owner}/{repo}/git/commits"],createRef:["POST /repos/{owner}/{repo}/git/refs"],createTag:["POST /repos/{owner}/{repo}/git/tags"],createTree:["POST /repos/{owner}/{repo}/git/trees"],deleteRef:["DELETE /repos/{owner}/{repo}/git/refs/{ref}"],getBlob:["GET /repos/{owner}/{repo}/git/blobs/{file_sha}"],getCommit:["GET /repos/{owner}/{repo}/git/commits/{commit_sha}"],getRef:["GET /repos/{owner}/{repo}/git/ref/{ref}"],getTag:["GET /repos/{owner}/{repo}/git/tags/{tag_sha}"],getTree:["GET /repos/{owner}/{repo}/git/trees/{tree_sha}"],listMatchingRefs:["GET /repos/{owner}/{repo}/git/matching-refs/{ref}"],updateRef:["PATCH /repos/{owner}/{repo}/git/refs/{ref}"]},gitignore:{getAllTemplates:["GET /gitignore/templates"],getTemplate:["GET /gitignore/templates/{name}"]},interactions:{getRestrictionsForAuthenticatedUser:["GET /user/interaction-limits"],getRestrictionsForOrg:["GET /orgs/{org}/interaction-limits"],getRestrictionsForRepo:["GET /repos/{owner}/{repo}/interaction-limits"],getRestrictionsForYourPublicRepos:["GET /user/interaction-limits",{},{renamed:["interactions","getRestrictionsForAuthenticatedUser"]}],removeRestrictionsForAuthenticatedUser:["DELETE /user/interaction-limits"],removeRestrictionsForOrg:["DELETE /orgs/{org}/interaction-limits"],removeRestrictionsForRepo:["DELETE /repos/{owner}/{repo}/interaction-limits"],removeRestrictionsForYourPublicRepos:["DELETE /user/interaction-limits",{},{renamed:["interactions","removeRestrictionsForAuthenticatedUser"]}],setRestrictionsForAuthenticatedUser:["PUT /user/interaction-limits"],setRestrictionsForOrg:["PUT /orgs/{org}/interaction-limits"],setRestrictionsForRepo:["PUT /repos/{owner}/{repo}/interaction-limits"],setRestrictionsForYourPublicRepos:["PUT /user/interaction-limits",{},{renamed:["interactions","setRestrictionsForAuthenticatedUser"]}]},issues:{addAssignees:["POST /repos/{owner}/{repo}/issues/{issue_number}/assignees"],addLabels:["POST /repos/{owner}/{repo}/issues/{issue_number}/labels"],checkUserCanBeAssigned:["GET /repos/{owner}/{repo}/assignees/{assignee}"],create:["POST /repos/{owner}/{repo}/issues"],createComment:["POST /repos/{owner}/{repo}/issues/{issue_number}/comments"],createLabel:["POST /repos/{owner}/{repo}/labels"],createMilestone:["POST /repos/{owner}/{repo}/milestones"],deleteComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}"],deleteLabel:["DELETE /repos/{owner}/{repo}/labels/{name}"],deleteMilestone:["DELETE /repos/{owner}/{repo}/milestones/{milestone_number}"],get:["GET /repos/{owner}/{repo}/issues/{issue_number}"],getComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}"],getEvent:["GET /repos/{owner}/{repo}/issues/events/{event_id}"],getLabel:["GET /repos/{owner}/{repo}/labels/{name}"],getMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}"],list:["GET /issues"],listAssignees:["GET /repos/{owner}/{repo}/assignees"],listComments:["GET /repos/{owner}/{repo}/issues/{issue_number}/comments"],listCommentsForRepo:["GET /repos/{owner}/{repo}/issues/comments"],listEvents:["GET /repos/{owner}/{repo}/issues/{issue_number}/events"],listEventsForRepo:["GET /repos/{owner}/{repo}/issues/events"],listEventsForTimeline:["GET /repos/{owner}/{repo}/issues/{issue_number}/timeline",{mediaType:{previews:["mockingbird"]}}],listForAuthenticatedUser:["GET /user/issues"],listForOrg:["GET /orgs/{org}/issues"],listForRepo:["GET /repos/{owner}/{repo}/issues"],listLabelsForMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}/labels"],listLabelsForRepo:["GET /repos/{owner}/{repo}/labels"],listLabelsOnIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/labels"],listMilestones:["GET /repos/{owner}/{repo}/milestones"],lock:["PUT /repos/{owner}/{repo}/issues/{issue_number}/lock"],removeAllLabels:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels"],removeAssignees:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/assignees"],removeLabel:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels/{name}"],setLabels:["PUT /repos/{owner}/{repo}/issues/{issue_number}/labels"],unlock:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/lock"],update:["PATCH /repos/{owner}/{repo}/issues/{issue_number}"],updateComment:["PATCH /repos/{owner}/{repo}/issues/comments/{comment_id}"],updateLabel:["PATCH /repos/{owner}/{repo}/labels/{name}"],updateMilestone:["PATCH /repos/{owner}/{repo}/milestones/{milestone_number}"]},licenses:{get:["GET /licenses/{license}"],getAllCommonlyUsed:["GET /licenses"],getForRepo:["GET /repos/{owner}/{repo}/license"]},markdown:{render:["POST /markdown"],renderRaw:["POST /markdown/raw",{headers:{"content-type":"text/plain; charset=utf-8"}}]},meta:{get:["GET /meta"],getOctocat:["GET /octocat"],getZen:["GET /zen"],root:["GET /"]},migrations:{cancelImport:["DELETE /repos/{owner}/{repo}/import"],deleteArchiveForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],deleteArchiveForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],downloadArchiveForOrg:["GET /orgs/{org}/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],getArchiveForAuthenticatedUser:["GET /user/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],getCommitAuthors:["GET /repos/{owner}/{repo}/import/authors"],getImportStatus:["GET /repos/{owner}/{repo}/import"],getLargeFiles:["GET /repos/{owner}/{repo}/import/large_files"],getStatusForAuthenticatedUser:["GET /user/migrations/{migration_id}",{mediaType:{previews:["wyandotte"]}}],getStatusForOrg:["GET /orgs/{org}/migrations/{migration_id}",{mediaType:{previews:["wyandotte"]}}],listForAuthenticatedUser:["GET /user/migrations",{mediaType:{previews:["wyandotte"]}}],listForOrg:["GET /orgs/{org}/migrations",{mediaType:{previews:["wyandotte"]}}],listReposForOrg:["GET /orgs/{org}/migrations/{migration_id}/repositories",{mediaType:{previews:["wyandotte"]}}],listReposForUser:["GET /user/migrations/{migration_id}/repositories",{mediaType:{previews:["wyandotte"]}}],mapCommitAuthor:["PATCH /repos/{owner}/{repo}/import/authors/{author_id}"],setLfsPreference:["PATCH /repos/{owner}/{repo}/import/lfs"],startForAuthenticatedUser:["POST /user/migrations"],startForOrg:["POST /orgs/{org}/migrations"],startImport:["PUT /repos/{owner}/{repo}/import"],unlockRepoForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/repos/{repo_name}/lock",{mediaType:{previews:["wyandotte"]}}],unlockRepoForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/repos/{repo_name}/lock",{mediaType:{previews:["wyandotte"]}}],updateImport:["PATCH /repos/{owner}/{repo}/import"]},orgs:{blockUser:["PUT /orgs/{org}/blocks/{username}"],cancelInvitation:["DELETE /orgs/{org}/invitations/{invitation_id}"],checkBlockedUser:["GET /orgs/{org}/blocks/{username}"],checkMembershipForUser:["GET /orgs/{org}/members/{username}"],checkPublicMembershipForUser:["GET /orgs/{org}/public_members/{username}"],convertMemberToOutsideCollaborator:["PUT /orgs/{org}/outside_collaborators/{username}"],createInvitation:["POST /orgs/{org}/invitations"],createWebhook:["POST /orgs/{org}/hooks"],deleteWebhook:["DELETE /orgs/{org}/hooks/{hook_id}"],get:["GET /orgs/{org}"],getMembershipForAuthenticatedUser:["GET /user/memberships/orgs/{org}"],getMembershipForUser:["GET /orgs/{org}/memberships/{username}"],getWebhook:["GET /orgs/{org}/hooks/{hook_id}"],getWebhookConfigForOrg:["GET /orgs/{org}/hooks/{hook_id}/config"],list:["GET /organizations"],listAppInstallations:["GET /orgs/{org}/installations"],listBlockedUsers:["GET /orgs/{org}/blocks"],listFailedInvitations:["GET /orgs/{org}/failed_invitations"],listForAuthenticatedUser:["GET /user/orgs"],listForUser:["GET /users/{username}/orgs"],listInvitationTeams:["GET /orgs/{org}/invitations/{invitation_id}/teams"],listMembers:["GET /orgs/{org}/members"],listMembershipsForAuthenticatedUser:["GET /user/memberships/orgs"],listOutsideCollaborators:["GET /orgs/{org}/outside_collaborators"],listPendingInvitations:["GET /orgs/{org}/invitations"],listPublicMembers:["GET /orgs/{org}/public_members"],listWebhooks:["GET /orgs/{org}/hooks"],pingWebhook:["POST /orgs/{org}/hooks/{hook_id}/pings"],removeMember:["DELETE /orgs/{org}/members/{username}"],removeMembershipForUser:["DELETE /orgs/{org}/memberships/{username}"],removeOutsideCollaborator:["DELETE /orgs/{org}/outside_collaborators/{username}"],removePublicMembershipForAuthenticatedUser:["DELETE /orgs/{org}/public_members/{username}"],setMembershipForUser:["PUT /orgs/{org}/memberships/{username}"],setPublicMembershipForAuthenticatedUser:["PUT /orgs/{org}/public_members/{username}"],unblockUser:["DELETE /orgs/{org}/blocks/{username}"],update:["PATCH /orgs/{org}"],updateMembershipForAuthenticatedUser:["PATCH /user/memberships/orgs/{org}"],updateWebhook:["PATCH /orgs/{org}/hooks/{hook_id}"],updateWebhookConfigForOrg:["PATCH /orgs/{org}/hooks/{hook_id}/config"]},packages:{deletePackageForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}"],deletePackageForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}"],deletePackageVersionForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],deletePackageVersionForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getAllPackageVersionsForAPackageOwnedByAnOrg:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForAPackageOwnedByTheAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForPackageOwnedByUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions"],getPackageForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}"],getPackageForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}"],getPackageForUser:["GET /users/{username}/packages/{package_type}/{package_name}"],getPackageVersionForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}"],restorePackageForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/restore"],restorePackageForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/restore"],restorePackageVersionForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"],restorePackageVersionForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"]},projects:{addCollaborator:["PUT /projects/{project_id}/collaborators/{username}",{mediaType:{previews:["inertia"]}}],createCard:["POST /projects/columns/{column_id}/cards",{mediaType:{previews:["inertia"]}}],createColumn:["POST /projects/{project_id}/columns",{mediaType:{previews:["inertia"]}}],createForAuthenticatedUser:["POST /user/projects",{mediaType:{previews:["inertia"]}}],createForOrg:["POST /orgs/{org}/projects",{mediaType:{previews:["inertia"]}}],createForRepo:["POST /repos/{owner}/{repo}/projects",{mediaType:{previews:["inertia"]}}],delete:["DELETE /projects/{project_id}",{mediaType:{previews:["inertia"]}}],deleteCard:["DELETE /projects/columns/cards/{card_id}",{mediaType:{previews:["inertia"]}}],deleteColumn:["DELETE /projects/columns/{column_id}",{mediaType:{previews:["inertia"]}}],get:["GET /projects/{project_id}",{mediaType:{previews:["inertia"]}}],getCard:["GET /projects/columns/cards/{card_id}",{mediaType:{previews:["inertia"]}}],getColumn:["GET /projects/columns/{column_id}",{mediaType:{previews:["inertia"]}}],getPermissionForUser:["GET /projects/{project_id}/collaborators/{username}/permission",{mediaType:{previews:["inertia"]}}],listCards:["GET /projects/columns/{column_id}/cards",{mediaType:{previews:["inertia"]}}],listCollaborators:["GET /projects/{project_id}/collaborators",{mediaType:{previews:["inertia"]}}],listColumns:["GET /projects/{project_id}/columns",{mediaType:{previews:["inertia"]}}],listForOrg:["GET /orgs/{org}/projects",{mediaType:{previews:["inertia"]}}],listForRepo:["GET /repos/{owner}/{repo}/projects",{mediaType:{previews:["inertia"]}}],listForUser:["GET /users/{username}/projects",{mediaType:{previews:["inertia"]}}],moveCard:["POST /projects/columns/cards/{card_id}/moves",{mediaType:{previews:["inertia"]}}],moveColumn:["POST /projects/columns/{column_id}/moves",{mediaType:{previews:["inertia"]}}],removeCollaborator:["DELETE /projects/{project_id}/collaborators/{username}",{mediaType:{previews:["inertia"]}}],update:["PATCH /projects/{project_id}",{mediaType:{previews:["inertia"]}}],updateCard:["PATCH /projects/columns/cards/{card_id}",{mediaType:{previews:["inertia"]}}],updateColumn:["PATCH /projects/columns/{column_id}",{mediaType:{previews:["inertia"]}}]},pulls:{checkIfMerged:["GET /repos/{owner}/{repo}/pulls/{pull_number}/merge"],create:["POST /repos/{owner}/{repo}/pulls"],createReplyForReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments/{comment_id}/replies"],createReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],createReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments"],deletePendingReview:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],deleteReviewComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}"],dismissReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/dismissals"],get:["GET /repos/{owner}/{repo}/pulls/{pull_number}"],getReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],getReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}"],list:["GET /repos/{owner}/{repo}/pulls"],listCommentsForReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/comments"],listCommits:["GET /repos/{owner}/{repo}/pulls/{pull_number}/commits"],listFiles:["GET /repos/{owner}/{repo}/pulls/{pull_number}/files"],listRequestedReviewers:["GET /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],listReviewComments:["GET /repos/{owner}/{repo}/pulls/{pull_number}/comments"],listReviewCommentsForRepo:["GET /repos/{owner}/{repo}/pulls/comments"],listReviews:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],merge:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/merge"],removeRequestedReviewers:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],requestReviewers:["POST /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],submitReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/events"],update:["PATCH /repos/{owner}/{repo}/pulls/{pull_number}"],updateBranch:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/update-branch",{mediaType:{previews:["lydian"]}}],updateReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],updateReviewComment:["PATCH /repos/{owner}/{repo}/pulls/comments/{comment_id}"]},rateLimit:{get:["GET /rate_limit"]},reactions:{createForCommitComment:["POST /repos/{owner}/{repo}/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForIssue:["POST /repos/{owner}/{repo}/issues/{issue_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForIssueComment:["POST /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForPullRequestReviewComment:["POST /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForTeamDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForTeamDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],deleteForCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForIssue:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForIssueComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForPullRequestComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForTeamDiscussion:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForTeamDiscussionComment:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteLegacy:["DELETE /reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}},{deprecated:"octokit.reactions.deleteLegacy() is deprecated, see https://docs.github.com/v3/reactions/#delete-a-reaction-legacy"}],listForCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForIssueComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForPullRequestReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForTeamDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForTeamDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}]},repos:{acceptInvitation:["PATCH /user/repository_invitations/{invitation_id}"],addAppAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],addCollaborator:["PUT /repos/{owner}/{repo}/collaborators/{username}"],addStatusCheckContexts:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],addTeamAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],addUserAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],checkCollaborator:["GET /repos/{owner}/{repo}/collaborators/{username}"],checkVulnerabilityAlerts:["GET /repos/{owner}/{repo}/vulnerability-alerts",{mediaType:{previews:["dorian"]}}],compareCommits:["GET /repos/{owner}/{repo}/compare/{base}...{head}"],createCommitComment:["POST /repos/{owner}/{repo}/commits/{commit_sha}/comments"],createCommitSignatureProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures",{mediaType:{previews:["zzzax"]}}],createCommitStatus:["POST /repos/{owner}/{repo}/statuses/{sha}"],createDeployKey:["POST /repos/{owner}/{repo}/keys"],createDeployment:["POST /repos/{owner}/{repo}/deployments"],createDeploymentStatus:["POST /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],createDispatchEvent:["POST /repos/{owner}/{repo}/dispatches"],createForAuthenticatedUser:["POST /user/repos"],createFork:["POST /repos/{owner}/{repo}/forks"],createInOrg:["POST /orgs/{org}/repos"],createOrUpdateFileContents:["PUT /repos/{owner}/{repo}/contents/{path}"],createPagesSite:["POST /repos/{owner}/{repo}/pages",{mediaType:{previews:["switcheroo"]}}],createRelease:["POST /repos/{owner}/{repo}/releases"],createUsingTemplate:["POST /repos/{template_owner}/{template_repo}/generate",{mediaType:{previews:["baptiste"]}}],createWebhook:["POST /repos/{owner}/{repo}/hooks"],declineInvitation:["DELETE /user/repository_invitations/{invitation_id}"],delete:["DELETE /repos/{owner}/{repo}"],deleteAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],deleteAdminBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],deleteBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection"],deleteCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}"],deleteCommitSignatureProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures",{mediaType:{previews:["zzzax"]}}],deleteDeployKey:["DELETE /repos/{owner}/{repo}/keys/{key_id}"],deleteDeployment:["DELETE /repos/{owner}/{repo}/deployments/{deployment_id}"],deleteFile:["DELETE /repos/{owner}/{repo}/contents/{path}"],deleteInvitation:["DELETE /repos/{owner}/{repo}/invitations/{invitation_id}"],deletePagesSite:["DELETE /repos/{owner}/{repo}/pages",{mediaType:{previews:["switcheroo"]}}],deletePullRequestReviewProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],deleteRelease:["DELETE /repos/{owner}/{repo}/releases/{release_id}"],deleteReleaseAsset:["DELETE /repos/{owner}/{repo}/releases/assets/{asset_id}"],deleteWebhook:["DELETE /repos/{owner}/{repo}/hooks/{hook_id}"],disableAutomatedSecurityFixes:["DELETE /repos/{owner}/{repo}/automated-security-fixes",{mediaType:{previews:["london"]}}],disableVulnerabilityAlerts:["DELETE /repos/{owner}/{repo}/vulnerability-alerts",{mediaType:{previews:["dorian"]}}],downloadArchive:["GET /repos/{owner}/{repo}/zipball/{ref}",{},{renamed:["repos","downloadZipballArchive"]}],downloadTarballArchive:["GET /repos/{owner}/{repo}/tarball/{ref}"],downloadZipballArchive:["GET /repos/{owner}/{repo}/zipball/{ref}"],enableAutomatedSecurityFixes:["PUT /repos/{owner}/{repo}/automated-security-fixes",{mediaType:{previews:["london"]}}],enableVulnerabilityAlerts:["PUT /repos/{owner}/{repo}/vulnerability-alerts",{mediaType:{previews:["dorian"]}}],get:["GET /repos/{owner}/{repo}"],getAccessRestrictions:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],getAdminBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],getAllStatusCheckContexts:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts"],getAllTopics:["GET /repos/{owner}/{repo}/topics",{mediaType:{previews:["mercy"]}}],getAppsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps"],getBranch:["GET /repos/{owner}/{repo}/branches/{branch}"],getBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection"],getClones:["GET /repos/{owner}/{repo}/traffic/clones"],getCodeFrequencyStats:["GET /repos/{owner}/{repo}/stats/code_frequency"],getCollaboratorPermissionLevel:["GET /repos/{owner}/{repo}/collaborators/{username}/permission"],getCombinedStatusForRef:["GET /repos/{owner}/{repo}/commits/{ref}/status"],getCommit:["GET /repos/{owner}/{repo}/commits/{ref}"],getCommitActivityStats:["GET /repos/{owner}/{repo}/stats/commit_activity"],getCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}"],getCommitSignatureProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures",{mediaType:{previews:["zzzax"]}}],getCommunityProfileMetrics:["GET /repos/{owner}/{repo}/community/profile"],getContent:["GET /repos/{owner}/{repo}/contents/{path}"],getContributorsStats:["GET /repos/{owner}/{repo}/stats/contributors"],getDeployKey:["GET /repos/{owner}/{repo}/keys/{key_id}"],getDeployment:["GET /repos/{owner}/{repo}/deployments/{deployment_id}"],getDeploymentStatus:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses/{status_id}"],getLatestPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/latest"],getLatestRelease:["GET /repos/{owner}/{repo}/releases/latest"],getPages:["GET /repos/{owner}/{repo}/pages"],getPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/{build_id}"],getParticipationStats:["GET /repos/{owner}/{repo}/stats/participation"],getPullRequestReviewProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],getPunchCardStats:["GET /repos/{owner}/{repo}/stats/punch_card"],getReadme:["GET /repos/{owner}/{repo}/readme"],getRelease:["GET /repos/{owner}/{repo}/releases/{release_id}"],getReleaseAsset:["GET /repos/{owner}/{repo}/releases/assets/{asset_id}"],getReleaseByTag:["GET /repos/{owner}/{repo}/releases/tags/{tag}"],getStatusChecksProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],getTeamsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams"],getTopPaths:["GET /repos/{owner}/{repo}/traffic/popular/paths"],getTopReferrers:["GET /repos/{owner}/{repo}/traffic/popular/referrers"],getUsersWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users"],getViews:["GET /repos/{owner}/{repo}/traffic/views"],getWebhook:["GET /repos/{owner}/{repo}/hooks/{hook_id}"],getWebhookConfigForRepo:["GET /repos/{owner}/{repo}/hooks/{hook_id}/config"],listBranches:["GET /repos/{owner}/{repo}/branches"],listBranchesForHeadCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/branches-where-head",{mediaType:{previews:["groot"]}}],listCollaborators:["GET /repos/{owner}/{repo}/collaborators"],listCommentsForCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/comments"],listCommitCommentsForRepo:["GET /repos/{owner}/{repo}/comments"],listCommitStatusesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/statuses"],listCommits:["GET /repos/{owner}/{repo}/commits"],listContributors:["GET /repos/{owner}/{repo}/contributors"],listDeployKeys:["GET /repos/{owner}/{repo}/keys"],listDeploymentStatuses:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],listDeployments:["GET /repos/{owner}/{repo}/deployments"],listForAuthenticatedUser:["GET /user/repos"],listForOrg:["GET /orgs/{org}/repos"],listForUser:["GET /users/{username}/repos"],listForks:["GET /repos/{owner}/{repo}/forks"],listInvitations:["GET /repos/{owner}/{repo}/invitations"],listInvitationsForAuthenticatedUser:["GET /user/repository_invitations"],listLanguages:["GET /repos/{owner}/{repo}/languages"],listPagesBuilds:["GET /repos/{owner}/{repo}/pages/builds"],listPublic:["GET /repositories"],listPullRequestsAssociatedWithCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/pulls",{mediaType:{previews:["groot"]}}],listReleaseAssets:["GET /repos/{owner}/{repo}/releases/{release_id}/assets"],listReleases:["GET /repos/{owner}/{repo}/releases"],listTags:["GET /repos/{owner}/{repo}/tags"],listTeams:["GET /repos/{owner}/{repo}/teams"],listWebhooks:["GET /repos/{owner}/{repo}/hooks"],merge:["POST /repos/{owner}/{repo}/merges"],pingWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/pings"],removeAppAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],removeCollaborator:["DELETE /repos/{owner}/{repo}/collaborators/{username}"],removeStatusCheckContexts:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],removeStatusCheckProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],removeTeamAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],removeUserAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],renameBranch:["POST /repos/{owner}/{repo}/branches/{branch}/rename"],replaceAllTopics:["PUT /repos/{owner}/{repo}/topics",{mediaType:{previews:["mercy"]}}],requestPagesBuild:["POST /repos/{owner}/{repo}/pages/builds"],setAdminBranchProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],setAppAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],setStatusCheckContexts:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],setTeamAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],setUserAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],testPushWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/tests"],transfer:["POST /repos/{owner}/{repo}/transfer"],update:["PATCH /repos/{owner}/{repo}"],updateBranchProtection:["PUT /repos/{owner}/{repo}/branches/{branch}/protection"],updateCommitComment:["PATCH /repos/{owner}/{repo}/comments/{comment_id}"],updateInformationAboutPagesSite:["PUT /repos/{owner}/{repo}/pages"],updateInvitation:["PATCH /repos/{owner}/{repo}/invitations/{invitation_id}"],updatePullRequestReviewProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],updateRelease:["PATCH /repos/{owner}/{repo}/releases/{release_id}"],updateReleaseAsset:["PATCH /repos/{owner}/{repo}/releases/assets/{asset_id}"],updateStatusCheckPotection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks",{},{renamed:["repos","updateStatusCheckProtection"]}],updateStatusCheckProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],updateWebhook:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}"],updateWebhookConfigForRepo:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}/config"],uploadReleaseAsset:["POST /repos/{owner}/{repo}/releases/{release_id}/assets{?name,label}",{baseUrl:"https://uploads.github.com"}]},search:{code:["GET /search/code"],commits:["GET /search/commits",{mediaType:{previews:["cloak"]}}],issuesAndPullRequests:["GET /search/issues"],labels:["GET /search/labels"],repos:["GET /search/repositories"],topics:["GET /search/topics",{mediaType:{previews:["mercy"]}}],users:["GET /search/users"]},secretScanning:{getAlert:["GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"],listAlertsForRepo:["GET /repos/{owner}/{repo}/secret-scanning/alerts"],updateAlert:["PATCH /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"]},teams:{addOrUpdateMembershipForUserInOrg:["PUT /orgs/{org}/teams/{team_slug}/memberships/{username}"],addOrUpdateProjectPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/projects/{project_id}",{mediaType:{previews:["inertia"]}}],addOrUpdateRepoPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],checkPermissionsForProjectInOrg:["GET /orgs/{org}/teams/{team_slug}/projects/{project_id}",{mediaType:{previews:["inertia"]}}],checkPermissionsForRepoInOrg:["GET /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],create:["POST /orgs/{org}/teams"],createDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],createDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions"],deleteDiscussionCommentInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],deleteDiscussionInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],deleteInOrg:["DELETE /orgs/{org}/teams/{team_slug}"],getByName:["GET /orgs/{org}/teams/{team_slug}"],getDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],getDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],getMembershipForUserInOrg:["GET /orgs/{org}/teams/{team_slug}/memberships/{username}"],list:["GET /orgs/{org}/teams"],listChildInOrg:["GET /orgs/{org}/teams/{team_slug}/teams"],listDiscussionCommentsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],listDiscussionsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions"],listForAuthenticatedUser:["GET /user/teams"],listMembersInOrg:["GET /orgs/{org}/teams/{team_slug}/members"],listPendingInvitationsInOrg:["GET /orgs/{org}/teams/{team_slug}/invitations"],listProjectsInOrg:["GET /orgs/{org}/teams/{team_slug}/projects",{mediaType:{previews:["inertia"]}}],listReposInOrg:["GET /orgs/{org}/teams/{team_slug}/repos"],removeMembershipForUserInOrg:["DELETE /orgs/{org}/teams/{team_slug}/memberships/{username}"],removeProjectInOrg:["DELETE /orgs/{org}/teams/{team_slug}/projects/{project_id}"],removeRepoInOrg:["DELETE /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],updateDiscussionCommentInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],updateDiscussionInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],updateInOrg:["PATCH /orgs/{org}/teams/{team_slug}"]},users:{addEmailForAuthenticated:["POST /user/emails"],block:["PUT /user/blocks/{username}"],checkBlocked:["GET /user/blocks/{username}"],checkFollowingForUser:["GET /users/{username}/following/{target_user}"],checkPersonIsFollowedByAuthenticated:["GET /user/following/{username}"],createGpgKeyForAuthenticated:["POST /user/gpg_keys"],createPublicSshKeyForAuthenticated:["POST /user/keys"],deleteEmailForAuthenticated:["DELETE /user/emails"],deleteGpgKeyForAuthenticated:["DELETE /user/gpg_keys/{gpg_key_id}"],deletePublicSshKeyForAuthenticated:["DELETE /user/keys/{key_id}"],follow:["PUT /user/following/{username}"],getAuthenticated:["GET /user"],getByUsername:["GET /users/{username}"],getContextForUser:["GET /users/{username}/hovercard"],getGpgKeyForAuthenticated:["GET /user/gpg_keys/{gpg_key_id}"],getPublicSshKeyForAuthenticated:["GET /user/keys/{key_id}"],list:["GET /users"],listBlockedByAuthenticated:["GET /user/blocks"],listEmailsForAuthenticated:["GET /user/emails"],listFollowedByAuthenticated:["GET /user/following"],listFollowersForAuthenticatedUser:["GET /user/followers"],listFollowersForUser:["GET /users/{username}/followers"],listFollowingForUser:["GET /users/{username}/following"],listGpgKeysForAuthenticated:["GET /user/gpg_keys"],listGpgKeysForUser:["GET /users/{username}/gpg_keys"],listPublicEmailsForAuthenticated:["GET /user/public_emails"],listPublicKeysForUser:["GET /users/{username}/keys"],listPublicSshKeysForAuthenticated:["GET /user/keys"],setPrimaryEmailVisibilityForAuthenticated:["PATCH /user/email/visibility"],unblock:["DELETE /user/blocks/{username}"],unfollow:["DELETE /user/following/{username}"],updateAuthenticated:["PATCH /user"]}},Kl="4.12.0";function Yl(t,e){const r={};for(const[n,i]of Object.entries(e))for(const[a,o]of Object.entries(i)){const[m,S,T]=o,[A,H]=m.split(/ /),Y=Object.assign({method:A,url:H},S);r[n]||(r[n]={});const pe=r[n];if(T){pe[a]=Xl(t,n,a,Y,T);continue}pe[a]=t.request.defaults(Y)}return r}function Xl(t,e,r,n,i){const a=t.request.defaults(n);function o(...m){let S=a.endpoint.merge(...m);if(i.mapToData)return S=Object.assign({},S,{data:S[i.mapToData],[i.mapToData]:void 0}),a(S);if(i.renamed){const[T,A]=i.renamed;t.log.warn(`octokit.${e}.${r}() has been renamed to octokit.${T}.${A}()`)}if(i.deprecated&&t.log.warn(i.deprecated),i.renamedParameters){const T=a.endpoint.merge(...m);for(const[A,H]of Object.entries(i.renamedParameters))A in T&&(t.log.warn(`"${A}" parameter is deprecated for "octokit.${e}.${r}()". Use "${H}" instead`),H in T||(T[H]=T[A]),delete T[A]);return a(T)}return a(...m)}return Object.assign(o,a)}function Ko(t){return Yl(t,Wl)}Ko.VERSION=Kl;const Ia="18.2.0",zi=Na.plugin(Bo,Ko,Wo).defaults({userAgent:`octokit-rest.js/${Ia}`});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Lt=function(t,e){return Lt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Lt(t,e)};function en(t,e){Lt(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Le=function(){return Le=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Le.apply(this,arguments)};function ms(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function _d(t,e,r,n){var i=arguments.length,a=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,r,n);else for(var m=t.length-1;m>=0;m--)(o=t[m])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a}function Ed(t,e){return function(r,n){e(r,n,t)}}function Sd(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Wn(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function m(A){try{T(n.next(A))}catch(H){o(H)}}function S(A){try{T(n.throw(A))}catch(H){o(H)}}function T(A){A.done?a(A.value):i(A.value).then(m,S)}T((n=n.apply(t,e||[])).next())})}function s(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function m(T){return function(A){return S([T,A])}}function S(T){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=T[0]&2?i.return:T[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,T[1])).done)return a;switch(i=0,a&&(T=[T[0]&2,a.value]),T[0]){case 0:case 1:a=T;break;case 4:return r.label++,{value:T[1],done:!1};case 5:r.label++,i=T[1],T=[0];continue;case 7:T=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(T[0]===6||T[0]===2)){r=0;continue}if(T[0]===3&&(!a||T[1]>a[0]&&T[1]<a[3])){r.label=T[1];break}if(T[0]===6&&r.label<a[1]){r.label=a[1],a=T;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(T);break}a[2]&&r.ops.pop(),r.trys.pop();continue}T=e.call(t,r)}catch(A){T=[6,A],i=0}finally{n=a=0}if(T[0]&5)throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}}function k(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function c(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function v(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(m){o={error:m}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a}function p(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(_(arguments[e]));return t}function l(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var a=arguments[e],o=0,m=a.length;o<m;o++,i++)n[i]=a[o];return n}function u(t){return this instanceof u?(this.v=t,this):new u(t)}function h(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,a=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(Y){n[Y]&&(i[Y]=function(pe){return new Promise(function(me,be){a.push([Y,pe,me,be])>1||m(Y,pe)})})}function m(Y,pe){try{S(n[Y](pe))}catch(me){H(a[0][3],me)}}function S(Y){Y.value instanceof u?Promise.resolve(Y.value.v).then(T,A):H(a[0][2],Y)}function T(Y){m("next",Y)}function A(Y){m("throw",Y)}function H(Y,pe){Y(pe),a.shift(),a.length&&m(a[0][0],a[0][1])}}function g(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,a){e[i]=t[i]?function(o){return(r=!r)?{value:u(t[i](o)),done:i==="return"}:a?a(o):o}:a}}function y(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof v=="function"?v(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(a){r[a]=t[a]&&function(o){return new Promise(function(m,S){o=t[a](o),i(m,S,o.done,o.value)})}}function i(a,o,m,S){Promise.resolve(S).then(function(T){a({value:T,done:m})},o)}}function f(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function w(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function E(t){return t&&t.__esModule?t:{default:t}}function R(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function C(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var D=it(285),x="Invariant Violation",Q=Object.setPrototypeOf,te=Q===void 0?function(t,e){return t.__proto__=e,t}:Q,K=function(t){en(e,t);function e(r){r===void 0&&(r=x);var n=t.call(this,typeof r=="number"?x+": "+r+" (see https://github.com/apollographql/invariant-packages)":r)||this;return n.framesToPop=1,n.name=x,te(n,e.prototype),n}return e}(Error);function ue(t,e){if(!t)throw new K(e)}function _e(t){return function(){return console[t].apply(console,arguments)}}(function(t){t.warn=_e("warn"),t.error=_e("error")})(ue||(ue={}));var Te={env:{}};if(typeof process=="object")Te=process;else try{Function("stub","process = stub")(Te)}catch(t){}var Re=null;const xe=null;var qe=it(5035),He=it.n(qe),ze=Object.prototype,ut=ze.toString,at=ze.hasOwnProperty,Ct=new Map;function tt(t,e){try{return Fe(t,e)}finally{Ct.clear()}}function Fe(t,e){if(t===e)return!0;var r=ut.call(t),n=ut.call(e);if(r!==n)return!1;switch(r){case"[object Array]":if(t.length!==e.length)return!1;case"[object Object]":{if(Be(t,e))return!0;var i=Object.keys(t),a=Object.keys(e),o=i.length;if(o!==a.length)return!1;for(var m=0;m<o;++m)if(!at.call(e,i[m]))return!1;for(var m=0;m<o;++m){var S=i[m];if(!Fe(t[S],e[S]))return!1}return!0}case"[object Error]":return t.name===e.name&&t.message===e.message;case"[object Number]":if(t!==t)return e!==e;case"[object Boolean]":case"[object Date]":return+t==+e;case"[object RegExp]":case"[object String]":return t==""+e;case"[object Map]":case"[object Set]":{if(t.size!==e.size)return!1;if(Be(t,e))return!0;for(var T=t.entries(),A=r==="[object Map]";;){var H=T.next();if(H.done)break;var Y=H.value,pe=Y[0],me=Y[1];if(!e.has(pe)||A&&!Fe(me,e.get(pe)))return!1}return!0}}return!1}function Be(t,e){var r=Ct.get(t);if(r){if(r.has(e))return!0}else Ct.set(t,r=new Set);return r.add(e),!1}const Ve=null;function Xe(t){return["StringValue","BooleanValue","EnumValue"].indexOf(t.kind)>-1}function rt(t){return["IntValue","FloatValue"].indexOf(t.kind)>-1}function lt(t){return t.kind==="StringValue"}function Je(t){return t.kind==="BooleanValue"}function kt(t){return t.kind==="IntValue"}function qt(t){return t.kind==="FloatValue"}function Nt(t){return t.kind==="Variable"}function Tt(t){return t.kind==="ObjectValue"}function gt(t){return t.kind==="ListValue"}function Zt(t){return t.kind==="EnumValue"}function ar(t){return t.kind==="NullValue"}function et(t,e,r,n){if(kt(r)||qt(r))t[e.value]=Number(r.value);else if(Je(r)||lt(r))t[e.value]=r.value;else if(Tt(r)){var i={};r.fields.map(function(o){return et(i,o.name,o.value,n)}),t[e.value]=i}else if(Nt(r)){var a=(n||{})[r.name.value];t[e.value]=a}else if(gt(r))t[e.value]=r.values.map(function(o){var m={};return et(m,e,o,n),m[e.value]});else if(Zt(r))t[e.value]=r.value;else if(ar(r))t[e.value]=null;else throw new K(17)}function Ze(t,e){var r=null;t.directives&&(r={},t.directives.forEach(function(i){r[i.name.value]={},i.arguments&&i.arguments.forEach(function(a){var o=a.name,m=a.value;return et(r[i.name.value],o,m,e)})}));var n=null;return t.arguments&&t.arguments.length&&(n={},t.arguments.forEach(function(i){var a=i.name,o=i.value;return et(n,a,o,e)})),Et(t.name.value,n,r)}var ot=["connection","include","skip","client","rest","export"];function Et(t,e,r){if(r&&r.connection&&r.connection.key)if(r.connection.filter&&r.connection.filter.length>0){var n=r.connection.filter?r.connection.filter:[];n.sort();var i=e,a={};return n.forEach(function(S){a[S]=i[S]}),r.connection.key+"("+JSON.stringify(a)+")"}else return r.connection.key;var o=t;if(e){var m=He()(e);o+="("+m+")"}return r&&Object.keys(r).forEach(function(S){ot.indexOf(S)===-1&&(r[S]&&Object.keys(r[S]).length?o+="@"+S+"("+JSON.stringify(r[S])+")":o+="@"+S)}),o}function An(t,e){if(t.arguments&&t.arguments.length){var r={};return t.arguments.forEach(function(n){var i=n.name,a=n.value;return et(r,i,a,e)}),r}return null}function tn(t){return t.alias?t.alias.value:t.name.value}function Ie(t){return t.kind==="Field"}function hn(t){return t.kind==="InlineFragment"}function pn(t){return t&&t.type==="id"&&typeof t.generated=="boolean"}function wr(t,e){return e===void 0&&(e=!1),Le({type:"id",generated:e},typeof t=="string"?{id:t,typename:void 0}:t)}function Ht(t){return t!=null&&typeof t=="object"&&t.type==="json"}function mn(t){throw new InvariantError(18)}function _r(t,e){switch(e===void 0&&(e=mn),t.kind){case"Variable":return e(t);case"NullValue":return null;case"IntValue":return parseInt(t.value,10);case"FloatValue":return parseFloat(t.value);case"ListValue":return t.values.map(function(o){return _r(o,e)});case"ObjectValue":{for(var r={},n=0,i=t.fields;n<i.length;n++){var a=i[n];r[a.name.value]=_r(a.value,e)}return r}default:return t.value}}function Kn(t,e){if(t.directives&&t.directives.length){var r={};return t.directives.forEach(function(n){r[n.name.value]=An(n,e)}),r}return null}function fn(t,e){return e===void 0&&(e={}),Xn(t.directives).every(function(r){var n=r.directive,i=r.ifArgument,a=!1;return i.value.kind==="Variable"?(a=e[i.value.name.value],ue(a!==void 0,13)):a=i.value.value,n.name.value==="skip"?!a:a})}function Rt(t){var e=[];return(0,D.visit)(t,{Directive:function(r){e.push(r.name.value)}}),e}function gn(t,e){return Rt(e).some(function(r){return t.indexOf(r)>-1})}function vn(t){return t&&gn(["client"],t)&&gn(["export"],t)}function Yn(t){var e=t.name.value;return e==="skip"||e==="include"}function Xn(t){return t?t.filter(Yn).map(function(e){var r=e.arguments,n=e.name.value;ue(r&&r.length===1,14);var i=r[0];ue(i.name&&i.name.value==="if",15);var a=i.value;return ue(a&&(a.kind==="Variable"||a.kind==="BooleanValue"),16),{directive:e,ifArgument:i}}):[]}function er(t,e){var r=e,n=[];t.definitions.forEach(function(a){if(a.kind==="OperationDefinition")throw new K(11);a.kind==="FragmentDefinition"&&n.push(a)}),typeof r=="undefined"&&(ue(n.length===1,12),r=n[0].name.value);var i=Le(Le({},t),{definitions:l([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:r}}]}}],t.definitions)});return i}function or(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return e.forEach(function(n){typeof n=="undefined"||n===null||Object.keys(n).forEach(function(i){t[i]=n[i]})}),t}function Hr(t){Er(t);var e=t.definitions.filter(function(r){return r.kind==="OperationDefinition"&&r.operation==="mutation"})[0];return invariant(e,1),e}function Er(t){ue(t&&t.kind==="Document",2);var e=t.definitions.filter(function(r){return r.kind!=="FragmentDefinition"}).map(function(r){if(r.kind!=="OperationDefinition")throw new K(3);return r});return ue(e.length<=1,4),t}function pr(t){return Er(t),t.definitions.filter(function(e){return e.kind==="OperationDefinition"})[0]}function mr(t){var e=pr(t);return invariant(e,5),e}function tr(t){return t.definitions.filter(function(e){return e.kind==="OperationDefinition"&&e.name}).map(function(e){return e.name.value})[0]||null}function dt(t){return t.definitions.filter(function(e){return e.kind==="FragmentDefinition"})}function nr(t){var e=pr(t);return ue(e&&e.operation==="query",6),e}function Qe(t){ue(t.kind==="Document",7),ue(t.definitions.length<=1,8);var e=t.definitions[0];return ue(e.kind==="FragmentDefinition",9),e}function yn(t){Er(t);for(var e,r=0,n=t.definitions;r<n.length;r++){var i=n[r];if(i.kind==="OperationDefinition"){var a=i.operation;if(a==="query"||a==="mutation"||a==="subscription")return i}i.kind==="FragmentDefinition"&&!e&&(e=i)}if(e)return e;throw new K(10)}function Or(t){t===void 0&&(t=[]);var e={};return t.forEach(function(r){e[r.name.value]=r}),e}function st(t){if(t&&t.variableDefinitions&&t.variableDefinitions.length){var e=t.variableDefinitions.filter(function(r){var n=r.defaultValue;return n}).map(function(r){var n=r.variable,i=r.defaultValue,a={};return et(a,n.name,i),a});return or.apply(void 0,l([{}],e))}return{}}function Wr(t){var e=new Set;if(t.variableDefinitions)for(var r=0,n=t.variableDefinitions;r<n.length;r++){var i=n[r];e.add(i.variable.name.value)}return e}function Jn(t,e,r){var n=0;return t.forEach(function(i,a){e.call(this,i,a,t)&&(t[n++]=i)},r),t.length=n,t}var bi={kind:"Field",name:{kind:"Name",value:"__typename"}};function Zn(t,e){return t.selectionSet.selections.every(function(r){return r.kind==="FragmentSpread"&&Zn(e[r.name.value],e)})}function bn(t){return Zn(pr(t)||Qe(t),Or(dt(t)))?null:t}function In(t){return function(r){return t.some(function(n){return n.name&&n.name===r.name.value||n.test&&n.test(r)})}}function Sr(t,e){var r=Object.create(null),n=[],i=Object.create(null),a=[],o=bn((0,D.visit)(e,{Variable:{enter:function(m,S,T){T.kind!=="VariableDefinition"&&(r[m.name.value]=!0)}},Field:{enter:function(m){if(t&&m.directives){var S=t.some(function(T){return T.remove});if(S&&m.directives&&m.directives.some(In(t)))return m.arguments&&m.arguments.forEach(function(T){T.value.kind==="Variable"&&n.push({name:T.value.name.value})}),m.selectionSet&&xr(m.selectionSet).forEach(function(T){a.push({name:T.name.value})}),null}}},FragmentSpread:{enter:function(m){i[m.name.value]=!0}},Directive:{enter:function(m){if(In(t)(m))return null}}}));return o&&Jn(n,function(m){return!r[m.name]}).length&&(o=Si(n,o)),o&&Jn(a,function(m){return!i[m.name]}).length&&(o=ki(a,o)),o}function wi(t){return(0,D.visit)(Er(t),{SelectionSet:{enter:function(e,r,n){if(!(n&&n.kind==="OperationDefinition")){var i=e.selections;if(!!i){var a=i.some(function(m){return Ie(m)&&(m.name.value==="__typename"||m.name.value.lastIndexOf("__",0)===0)});if(!a){var o=n;if(!(Ie(o)&&o.directives&&o.directives.some(function(m){return m.name.value==="export"})))return Le(Le({},e),{selections:l(i,[bi])})}}}}}})}var _i={test:function(t){var e=t.name.value==="connection";return e&&(!t.arguments||!t.arguments.some(function(r){return r.name.value==="key"})),e}};function kr(t){return Sr([_i],Er(t))}function ei(t,e,r){return r===void 0&&(r=!0),e&&e.selections&&e.selections.some(function(n){return ti(t,n,r)})}function ti(t,e,r){return r===void 0&&(r=!0),Ie(e)?e.directives?e.directives.some(In(t))||r&&ei(t,e.selectionSet,r):!1:!0}function rn(t,e){Er(e);var r;return bn(visit(e,{SelectionSet:{enter:function(n,i,a,o){var m=o.join("-");if(!r||m===r||!m.startsWith(r))if(n.selections){var S=n.selections.filter(function(T){return ti(t,T)});return ei(t,n,!1)&&(r=m),__assign(__assign({},n),{selections:S})}else return null}}}))}function Ei(t){return function(r){return t.some(function(n){return r.value&&r.value.kind==="Variable"&&r.value.name&&(n.name===r.value.name.value||n.test&&n.test(r))})}}function Si(t,e){var r=Ei(t);return bn((0,D.visit)(e,{OperationDefinition:{enter:function(n){return Le(Le({},n),{variableDefinitions:n.variableDefinitions.filter(function(i){return!t.some(function(a){return a.name===i.variable.name.value})})})}},Field:{enter:function(n){var i=t.some(function(o){return o.remove});if(i){var a=0;if(n.arguments.forEach(function(o){r(o)&&(a+=1)}),a===1)return null}}},Argument:{enter:function(n){if(r(n))return null}}}))}function ki(t,e){function r(n){if(t.some(function(i){return i.name===n.name.value}))return null}return bn((0,D.visit)(e,{FragmentSpread:{enter:r},FragmentDefinition:{enter:r}}))}function xr(t){var e=[];return t.selections.forEach(function(r){(Ie(r)||hn(r))&&r.selectionSet?xr(r.selectionSet).forEach(function(n){return e.push(n)}):r.kind==="FragmentSpread"&&e.push(r)}),e}function Ti(t){var e=yn(t),r=e.operation;if(r==="query")return t;var n=(0,D.visit)(t,{OperationDefinition:{enter:function(i){return Le(Le({},i),{operation:"query"})}}});return n}function Kr(t){Er(t);var e=Sr([{test:function(r){return r.name.value==="client"},remove:!0}],t);return e&&(e=(0,D.visit)(e,{FragmentDefinition:{enter:function(r){if(r.selectionSet){var n=r.selectionSet.selections.every(function(i){return Ie(i)&&i.name.value==="__typename"});if(n)return null}}}})),e}var Dn=typeof WeakMap=="function"&&!(typeof navigator=="object"&&navigator.product==="ReactNative"),b=Object.prototype.toString;function N(t){return F(t,new Map)}function F(t,e){switch(b.call(t)){case"[object Array]":{if(e.has(t))return e.get(t);var r=t.slice(0);return e.set(t,r),r.forEach(function(i,a){r[a]=F(i,e)}),r}case"[object Object]":{if(e.has(t))return e.get(t);var n=Object.create(Object.getPrototypeOf(t));return e.set(t,n),Object.keys(t).forEach(function(i){n[i]=F(t[i],e)}),n}default:return t}}function oe(){return typeof process!="undefined"?"production":"development"}function le(t){return oe()===t}function ge(){return le("production")===!0}function ye(){return le("development")===!0}function Me(){return le("test")===!0}function Oe(t){try{return t()}catch(e){console.error&&console.error(e)}}function pt(t){return t.errors&&t.errors.length}function vt(t){return Object.freeze(t),Object.getOwnPropertyNames(t).forEach(function(e){t[e]!==null&&(typeof t[e]=="object"||typeof t[e]=="function")&&!Object.isFrozen(t[e])&&vt(t[e])}),t}function mt(t){if(ye()||Me()){var e=typeof Symbol=="function"&&typeof Symbol("")=="string";if(!e)return vt(t)}return t}var ht=Object.prototype.hasOwnProperty;function At(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Da(t)}function Da(t){var e=t[0]||{},r=t.length;if(r>1){var n=[];e=xa(e,n);for(var i=1;i<r;++i)e=Yo(e,t[i],n)}return e}function Oa(t){return t!==null&&typeof t=="object"}function Yo(t,e,r){return Oa(e)&&Oa(t)?(Object.isExtensible&&!Object.isExtensible(t)&&(t=xa(t,r)),Object.keys(e).forEach(function(n){var i=e[n];if(ht.call(t,n)){var a=t[n];i!==a&&(t[n]=Yo(xa(a,r),i,r))}else t[n]=i}),t):e}function xa(t,e){return t!==null&&typeof t=="object"&&e.indexOf(t)<0&&(Array.isArray(t)?t=t.slice(0):t=Le({__proto__:Object.getPrototypeOf(t)},t),e.push(t)),t}var Xo=Object.create({});function kd(t,e){e===void 0&&(e="warn"),!ge()&&!Xo[t]&&(Me()||(Xo[t]=!0),e==="error"?console.error(t):console.warn(t))}function Td(t){return JSON.parse(JSON.stringify(t))}var Jl=it(9329),Zl=it.n(Jl),ec=Zl();const Cr=ec;function tc(t){for(var e=["query","operationName","variables","extensions","context"],r=0,n=Object.keys(t);r<n.length;r++){var i=n[r];if(e.indexOf(i)<0)throw new K(2)}return t}var Ma=function(t){en(e,t);function e(r,n){var i=t.call(this,r)||this;return i.link=n,i}return e}(Error);function Qi(t){return t.request.length<=1}function Rd(t){var e=!1;return new Promise(function(r,n){t.subscribe({next:function(i){e||(e=!0,r(i))},error:n})})}var Cd=null;function rc(t){return new Observable(function(e){t.then(function(r){e.next(r),e.complete()}).catch(e.error.bind(e))})}function Jo(t){return new Cr(function(e){e.error(t)})}function nc(t){var e={variables:t.variables||{},extensions:t.extensions||{},operationName:t.operationName,query:t.query};return e.operationName||(e.operationName=typeof e.query!="string"?tr(e.query):""),e}function ic(t,e){var r=Le({},t),n=function(a){typeof a=="function"?r=Le({},r,a(r)):r=Le({},r,a)},i=function(){return Le({},r)};return Object.defineProperty(e,"setContext",{enumerable:!1,value:n}),Object.defineProperty(e,"getContext",{enumerable:!1,value:i}),Object.defineProperty(e,"toKey",{enumerable:!1,value:function(){return Zo(e)}}),e}function Zo(t){var e=t.query,r=t.variables,n=t.operationName;return JSON.stringify([n,e,r])}function eu(t,e){return e?e(t):Cr.of()}function fs(t){return typeof t=="function"?new nn(t):t}function tu(){return new nn(function(){return Cr.of()})}function Fa(t){return t.length===0?tu():t.map(fs).reduce(function(e,r){return e.concat(r)})}function ru(t,e,r){var n=fs(e),i=fs(r||new nn(eu));return Qi(n)&&Qi(i)?new nn(function(a){return t(a)?n.request(a)||Cr.of():i.request(a)||Cr.of()}):new nn(function(a,o){return t(a)?n.request(a,o)||Cr.of():i.request(a,o)||Cr.of()})}var sc=function(t,e){var r=fs(t);if(Qi(r))return r;var n=fs(e);return Qi(n)?new nn(function(i){return r.request(i,function(a){return n.request(a)||Cr.of()})||Cr.of()}):new nn(function(i,a){return r.request(i,function(o){return n.request(o,a)||Cr.of()})||Cr.of()})},nn=function(){function t(e){e&&(this.request=e)}return t.prototype.split=function(e,r,n){return this.concat(ru(e,r,n||new t(eu)))},t.prototype.concat=function(e){return sc(this,e)},t.prototype.request=function(e,r){throw new K(1)},t.empty=tu,t.from=Fa,t.split=ru,t.execute=Ri,t}();function Ri(t,e){return t.request(ic(e.context,nc(tc(e))))||Cr.of()}var La=it(7121),Vt;(function(t){t[t.loading=1]="loading",t[t.setVariables=2]="setVariables",t[t.fetchMore=3]="fetchMore",t[t.refetch=4]="refetch",t[t.poll=6]="poll",t[t.ready=7]="ready",t[t.error=8]="error"})(Vt||(Vt={}));function Vs(t){return t<7}var gs=function(t){en(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype[La.Z]=function(){return this},e.prototype["@@observable"]=function(){return this},e}(Cr);function Ci(t){return Array.isArray(t)&&t.length>0}function qa(t){return t.hasOwnProperty("graphQLErrors")}var nu=function(t){var e="";return Ci(t.graphQLErrors)&&t.graphQLErrors.forEach(function(r){var n=r?r.message:"Error message not found.";e+="GraphQL error: "+n+`
`}),t.networkError&&(e+="Network error: "+t.networkError.message+`
`),e=e.replace(/\n$/,""),e},Mr=function(t){en(e,t);function e(r){var n=r.graphQLErrors,i=r.networkError,a=r.errorMessage,o=r.extraInfo,m=t.call(this,a)||this;return m.graphQLErrors=n||[],m.networkError=i||null,a?m.message=a:m.message=nu(m),m.extraInfo=o,m.__proto__=e.prototype,m}return e}(Error),sn;(function(t){t[t.normal=1]="normal",t[t.refetch=2]="refetch",t[t.poll=3]="poll"})(sn||(sn={}));var ac=function(t,e){return e===void 0&&(e="none"),t&&(t.networkError||e==="none"&&Ci(t.graphQLErrors))},iu=function(t){en(e,t);function e(r){var n=r.queryManager,i=r.options,a=r.shouldSubscribe,o=a===void 0?!0:a,m=t.call(this,function(T){return m.onSubscribe(T)})||this;m.observers=new Set,m.subscriptions=new Set,m.isTornDown=!1,m.options=i,m.variables=i.variables||{},m.queryId=n.generateQueryId(),m.shouldSubscribe=o;var S=pr(i.query);return m.queryName=S&&S.name&&S.name.value,m.queryManager=n,m}return e.prototype.result=function(){var r=this;return new Promise(function(n,i){var a={next:function(m){n(m),r.observers.delete(a),r.observers.size||r.queryManager.removeQuery(r.queryId),setTimeout(function(){o.unsubscribe()},0)},error:i},o=r.subscribe(a)})},e.prototype.currentResult=function(){var r=this.getCurrentResult();return r.data===void 0&&(r.data={}),r},e.prototype.getCurrentResult=function(){if(this.isTornDown){var r=this.lastResult;return{data:!this.lastError&&r&&r.data||void 0,error:this.lastError,loading:!1,networkStatus:Vt.error}}var n=this.queryManager.getCurrentQueryResult(this),i=n.data,a=n.partial,o=this.queryManager.queryStore.get(this.queryId),m,S=this.options.fetchPolicy,T=S==="network-only"||S==="no-cache";if(o){var A=o.networkStatus;if(ac(o,this.options.errorPolicy))return{data:void 0,loading:!1,networkStatus:A,error:new Mr({graphQLErrors:o.graphQLErrors,networkError:o.networkError})};o.variables&&(this.options.variables=Le(Le({},this.options.variables),o.variables),this.variables=this.options.variables),m={data:i,loading:Vs(A),networkStatus:A},o.graphQLErrors&&this.options.errorPolicy==="all"&&(m.errors=o.graphQLErrors)}else{var H=T||a&&S!=="cache-only";m={data:i,loading:H,networkStatus:H?Vt.loading:Vt.ready}}return a||this.updateLastResult(Le(Le({},m),{stale:!1})),Le(Le({},m),{partial:a})},e.prototype.isDifferentFromLastResult=function(r){var n=this.lastResultSnapshot;return!(n&&r&&n.networkStatus===r.networkStatus&&n.stale===r.stale&&tt(n.data,r.data))},e.prototype.getLastResult=function(){return this.lastResult},e.prototype.getLastError=function(){return this.lastError},e.prototype.resetLastResults=function(){delete this.lastResult,delete this.lastResultSnapshot,delete this.lastError,this.isTornDown=!1},e.prototype.resetQueryStoreErrors=function(){var r=this.queryManager.queryStore.get(this.queryId);r&&(r.networkError=null,r.graphQLErrors=[])},e.prototype.refetch=function(r){var n=this.options.fetchPolicy;return n==="cache-only"?Promise.reject(new K(1)):(n!=="no-cache"&&n!=="cache-and-network"&&(n="network-only"),tt(this.variables,r)||(this.variables=Le(Le({},this.variables),r)),tt(this.options.variables,this.variables)||(this.options.variables=Le(Le({},this.options.variables),this.variables)),this.queryManager.fetchQuery(this.queryId,Le(Le({},this.options),{fetchPolicy:n}),sn.refetch))},e.prototype.fetchMore=function(r){var n=this;ue(r.updateQuery,2);var i=Le(Le({},r.query?r:Le(Le(Le({},this.options),r),{variables:Le(Le({},this.variables),r.variables)})),{fetchPolicy:"network-only"}),a=this.queryManager.generateQueryId();return this.queryManager.fetchQuery(a,i,sn.normal,this.queryId).then(function(o){return n.updateQuery(function(m){return r.updateQuery(m,{fetchMoreResult:o.data,variables:i.variables})}),n.queryManager.stopQuery(a),o},function(o){throw n.queryManager.stopQuery(a),o})},e.prototype.subscribeToMore=function(r){var n=this,i=this.queryManager.startGraphQLSubscription({query:r.document,variables:r.variables}).subscribe({next:function(a){var o=r.updateQuery;o&&n.updateQuery(function(m,S){var T=S.variables;return o(m,{subscriptionData:a,variables:T})})},error:function(a){if(r.onError){r.onError(a);return}}});return this.subscriptions.add(i),function(){n.subscriptions.delete(i)&&i.unsubscribe()}},e.prototype.setOptions=function(r){var n=this.options.fetchPolicy;this.options=Le(Le({},this.options),r),r.pollInterval?this.startPolling(r.pollInterval):r.pollInterval===0&&this.stopPolling();var i=r.fetchPolicy;return this.setVariables(this.options.variables,n!==i&&(n==="cache-only"||n==="standby"||i==="network-only"),r.fetchResults)},e.prototype.setVariables=function(r,n,i){return n===void 0&&(n=!1),i===void 0&&(i=!0),this.isTornDown=!1,r=r||this.variables,!n&&tt(r,this.variables)?this.observers.size&&i?this.result():Promise.resolve():(this.variables=this.options.variables=r,this.observers.size?this.queryManager.fetchQuery(this.queryId,this.options):Promise.resolve())},e.prototype.updateQuery=function(r){var n=this.queryManager,i=n.getQueryWithPreviousResult(this.queryId),a=i.previousResult,o=i.variables,m=i.document,S=Oe(function(){return r(a,{variables:o})});S&&(n.dataStore.markUpdateQueryResult(m,o,S),n.broadcastQueries())},e.prototype.stopPolling=function(){this.queryManager.stopPollingQuery(this.queryId),this.options.pollInterval=void 0},e.prototype.startPolling=function(r){su(this),this.options.pollInterval=r,this.queryManager.startPollingQuery(this.options,this.queryId)},e.prototype.updateLastResult=function(r){var n=this.lastResult;return this.lastResult=r,this.lastResultSnapshot=this.queryManager.assumeImmutableResults?r:N(r),n},e.prototype.onSubscribe=function(r){var n=this;try{var i=r._subscription._observer;i&&!i.error&&(i.error=oc)}catch(o){}var a=!this.observers.size;return this.observers.add(r),r.next&&this.lastResult&&r.next(this.lastResult),r.error&&this.lastError&&r.error(this.lastError),a&&this.setUpQuery(),function(){n.observers.delete(r)&&!n.observers.size&&n.tearDownQuery()}},e.prototype.setUpQuery=function(){var r=this,n=this,i=n.queryManager,a=n.queryId;this.shouldSubscribe&&i.addObservableQuery(a,this),this.options.pollInterval&&(su(this),i.startPollingQuery(this.options,a));var o=function(m){r.updateLastResult(Le(Le({},r.lastResult),{errors:m.graphQLErrors,networkStatus:Vt.error,loading:!1})),Bs(r.observers,"error",r.lastError=m)};i.observeQuery(a,this.options,{next:function(m){if(r.lastError||r.isDifferentFromLastResult(m)){var S=r.updateLastResult(m),T=r.options,A=T.query,H=T.variables,Y=T.fetchPolicy;i.transform(A).hasClientExports?i.getLocalState().addExportedVariables(A,H).then(function(pe){var me=r.variables;r.variables=r.options.variables=pe,!m.loading&&S&&Y!=="cache-only"&&i.transform(A).serverQuery&&!tt(me,pe)?r.refetch():Bs(r.observers,"next",m)}):Bs(r.observers,"next",m)}},error:o}).catch(o)},e.prototype.tearDownQuery=function(){var r=this.queryManager;this.isTornDown=!0,r.stopPollingQuery(this.queryId),this.subscriptions.forEach(function(n){return n.unsubscribe()}),this.subscriptions.clear(),r.removeObservableQuery(this.queryId),r.stopQuery(this.queryId),this.observers.clear()},e}(gs);function oc(t){}function Bs(t,e,r){var n=[];t.forEach(function(i){return i[e]&&n.push(i)}),n.forEach(function(i){return i[e](r)})}function su(t){var e=t.options.fetchPolicy;ue(e!=="cache-first"&&e!=="cache-only",3)}var uc=function(){function t(){this.store={}}return t.prototype.getStore=function(){return this.store},t.prototype.get=function(e){return this.store[e]},t.prototype.initMutation=function(e,r,n){this.store[e]={mutation:r,variables:n||{},loading:!0,error:null}},t.prototype.markMutationError=function(e,r){var n=this.store[e];n&&(n.loading=!1,n.error=r)},t.prototype.markMutationResult=function(e){var r=this.store[e];r&&(r.loading=!1,r.error=null)},t.prototype.reset=function(){this.store={}},t}(),au=function(){function t(){this.store={}}return t.prototype.getStore=function(){return this.store},t.prototype.get=function(e){return this.store[e]},t.prototype.initQuery=function(e){var r=this.store[e.queryId];ue(!r||r.document===e.document||tt(r.document,e.document),19);var n=!1,i=null;e.storePreviousVariables&&r&&r.networkStatus!==Vt.loading&&(tt(r.variables,e.variables)||(n=!0,i=r.variables));var a;n?a=Vt.setVariables:e.isPoll?a=Vt.poll:e.isRefetch?a=Vt.refetch:a=Vt.loading;var o=[];r&&r.graphQLErrors&&(o=r.graphQLErrors),this.store[e.queryId]={document:e.document,variables:e.variables,previousVariables:i,networkError:null,graphQLErrors:o,networkStatus:a,metadata:e.metadata},typeof e.fetchMoreForQueryId=="string"&&this.store[e.fetchMoreForQueryId]&&(this.store[e.fetchMoreForQueryId].networkStatus=Vt.fetchMore)},t.prototype.markQueryResult=function(e,r,n){!this.store||!this.store[e]||(this.store[e].networkError=null,this.store[e].graphQLErrors=Ci(r.errors)?r.errors:[],this.store[e].previousVariables=null,this.store[e].networkStatus=Vt.ready,typeof n=="string"&&this.store[n]&&(this.store[n].networkStatus=Vt.ready))},t.prototype.markQueryError=function(e,r,n){!this.store||!this.store[e]||(this.store[e].networkError=r,this.store[e].networkStatus=Vt.error,typeof n=="string"&&this.markQueryResultClient(n,!0))},t.prototype.markQueryResultClient=function(e,r){var n=this.store&&this.store[e];n&&(n.networkError=null,n.previousVariables=null,r&&(n.networkStatus=Vt.ready))},t.prototype.stopQuery=function(e){delete this.store[e]},t.prototype.reset=function(e){var r=this;Object.keys(this.store).forEach(function(n){e.indexOf(n)<0?r.stopQuery(n):r.store[n].networkStatus=Vt.loading})},t}();function lc(t){return t.charAt(0).toUpperCase()+t.slice(1)}var ae=function(){function t(e){var r=e.cache,n=e.client,i=e.resolvers,a=e.fragmentMatcher;this.cache=r,n&&(this.client=n),i&&this.addResolvers(i),a&&this.setFragmentMatcher(a)}return t.prototype.addResolvers=function(e){var r=this;this.resolvers=this.resolvers||{},Array.isArray(e)?e.forEach(function(n){r.resolvers=At(r.resolvers,n)}):this.resolvers=At(this.resolvers,e)},t.prototype.setResolvers=function(e){this.resolvers={},this.addResolvers(e)},t.prototype.getResolvers=function(){return this.resolvers||{}},t.prototype.runResolvers=function(e){var r=e.document,n=e.remoteResult,i=e.context,a=e.variables,o=e.onlyRunForcedResolvers,m=o===void 0?!1:o;return Wn(this,void 0,void 0,function(){return s(this,function(S){return r?[2,this.resolveDocument(r,n.data,i,a,this.fragmentMatcher,m).then(function(T){return Le(Le({},n),{data:T.result})})]:[2,n]})})},t.prototype.setFragmentMatcher=function(e){this.fragmentMatcher=e},t.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},t.prototype.clientQuery=function(e){return gn(["client"],e)&&this.resolvers?e:null},t.prototype.serverQuery=function(e){return this.resolvers?Kr(e):e},t.prototype.prepareContext=function(e){e===void 0&&(e={});var r=this.cache,n=Le(Le({},e),{cache:r,getCacheKey:function(i){if(r.config)return r.config.dataIdFromObject(i);ue(!1,6)}});return n},t.prototype.addExportedVariables=function(e,r,n){return r===void 0&&(r={}),n===void 0&&(n={}),Wn(this,void 0,void 0,function(){return s(this,function(i){return e?[2,this.resolveDocument(e,this.buildRootValueFromCache(e,r)||{},this.prepareContext(n),r).then(function(a){return Le(Le({},r),a.exportedVariables)})]:[2,Le({},r)]})})},t.prototype.shouldForceResolvers=function(e){var r=!1;return(0,D.visit)(e,{Directive:{enter:function(n){if(n.name.value==="client"&&n.arguments&&(r=n.arguments.some(function(i){return i.name.value==="always"&&i.value.kind==="BooleanValue"&&i.value.value===!0}),r))return D.BREAK}}}),r},t.prototype.buildRootValueFromCache=function(e,r){return this.cache.diff({query:Ti(e),variables:r,returnPartialData:!0,optimistic:!1}).result},t.prototype.resolveDocument=function(e,r,n,i,a,o){return n===void 0&&(n={}),i===void 0&&(i={}),a===void 0&&(a=function(){return!0}),o===void 0&&(o=!1),Wn(this,void 0,void 0,function(){var m,S,T,A,H,Y,pe,me,be;return s(this,function(Ne){return m=yn(e),S=dt(e),T=Or(S),A=m.operation,H=A?lc(A):"Query",Y=this,pe=Y.cache,me=Y.client,be={fragmentMap:T,context:Le(Le({},n),{cache:pe,client:me}),variables:i,fragmentMatcher:a,defaultOperationType:H,exportedVariables:{},onlyRunForcedResolvers:o},[2,this.resolveSelectionSet(m.selectionSet,r,be).then(function(Ae){return{result:Ae,exportedVariables:be.exportedVariables}})]})})},t.prototype.resolveSelectionSet=function(e,r,n){return Wn(this,void 0,void 0,function(){var i,a,o,m,S,T=this;return s(this,function(A){return i=n.fragmentMap,a=n.context,o=n.variables,m=[r],S=function(H){return Wn(T,void 0,void 0,function(){var Y,pe;return s(this,function(me){return fn(H,o)?Ie(H)?[2,this.resolveField(H,r,n).then(function(be){var Ne;typeof be!="undefined"&&m.push((Ne={},Ne[tn(H)]=be,Ne))})]:(hn(H)?Y=H:(Y=i[H.name.value],ue(Y,7)),Y&&Y.typeCondition&&(pe=Y.typeCondition.name.value,n.fragmentMatcher(r,pe,a))?[2,this.resolveSelectionSet(Y.selectionSet,r,n).then(function(be){m.push(be)})]:[2]):[2]})})},[2,Promise.all(e.selections.map(S)).then(function(){return Da(m)})]})})},t.prototype.resolveField=function(e,r,n){return Wn(this,void 0,void 0,function(){var i,a,o,m,S,T,A,H,Y,pe=this;return s(this,function(me){return i=n.variables,a=e.name.value,o=tn(e),m=a!==o,S=r[o]||r[a],T=Promise.resolve(S),(!n.onlyRunForcedResolvers||this.shouldForceResolvers(e))&&(A=r.__typename||n.defaultOperationType,H=this.resolvers&&this.resolvers[A],H&&(Y=H[m?a:o],Y&&(T=Promise.resolve(Y(r,An(e,i),n.context,{field:e,fragmentMap:n.fragmentMap}))))),[2,T.then(function(be){if(be===void 0&&(be=S),e.directives&&e.directives.forEach(function(Ne){Ne.name.value==="export"&&Ne.arguments&&Ne.arguments.forEach(function(Ae){Ae.name.value==="as"&&Ae.value.kind==="StringValue"&&(n.exportedVariables[Ae.value.value]=be)})}),!e.selectionSet||be==null)return be;if(Array.isArray(be))return pe.resolveSubSelectedArray(e,be,n);if(e.selectionSet)return pe.resolveSelectionSet(e.selectionSet,be,n)})]})})},t.prototype.resolveSubSelectedArray=function(e,r,n){var i=this;return Promise.all(r.map(function(a){if(a===null)return null;if(Array.isArray(a))return i.resolveSubSelectedArray(e,a,n);if(e.selectionSet)return i.resolveSelectionSet(e.selectionSet,a,n)}))},t}();function ve(t){var e=new Set,r=null;return new gs(function(n){return e.add(n),r=r||t.subscribe({next:function(i){e.forEach(function(a){return a.next&&a.next(i)})},error:function(i){e.forEach(function(a){return a.error&&a.error(i)})},complete:function(){e.forEach(function(i){return i.complete&&i.complete()})}}),function(){e.delete(n)&&!e.size&&r&&(r.unsubscribe(),r=null)}})}function Ce(t,e){return new gs(function(r){var n=r.next,i=r.error,a=r.complete,o=0,m=!1,S={next:function(A){++o,new Promise(function(H){H(e(A))}).then(function(H){--o,n&&n.call(r,H),m&&S.complete()},function(H){--o,i&&i.call(r,H)})},error:function(A){i&&i.call(r,A)},complete:function(){m=!0,o||a&&a.call(r)}},T=t.subscribe(S);return function(){return T.unsubscribe()}})}var Ke=Object.prototype.hasOwnProperty,St=function(){function t(e){var r=e.link,n=e.queryDeduplication,i=n===void 0?!1:n,a=e.store,o=e.onBroadcast,m=o===void 0?function(){}:o,S=e.ssrMode,T=S===void 0?!1:S,A=e.clientAwareness,H=A===void 0?{}:A,Y=e.localState,pe=e.assumeImmutableResults;this.mutationStore=new uc,this.queryStore=new au,this.clientAwareness={},this.idCounter=1,this.queries=new Map,this.fetchQueryRejectFns=new Map,this.transformCache=new(Dn?WeakMap:Map),this.inFlightLinkObservables=new Map,this.pollingInfoByQueryId=new Map,this.link=r,this.queryDeduplication=i,this.dataStore=a,this.onBroadcast=m,this.clientAwareness=H,this.localState=Y||new ae({cache:a.getCache()}),this.ssrMode=T,this.assumeImmutableResults=!!pe}return t.prototype.stop=function(){var e=this;this.queries.forEach(function(r,n){e.stopQueryNoBroadcast(n)}),this.fetchQueryRejectFns.forEach(function(r){r(new K(8))})},t.prototype.mutate=function(e){var r=e.mutation,n=e.variables,i=e.optimisticResponse,a=e.updateQueries,o=e.refetchQueries,m=o===void 0?[]:o,S=e.awaitRefetchQueries,T=S===void 0?!1:S,A=e.update,H=e.errorPolicy,Y=H===void 0?"none":H,pe=e.fetchPolicy,me=e.context,be=me===void 0?{}:me;return Wn(this,void 0,void 0,function(){var Ne,Ae,Ge,$e=this;return s(this,function(Ue){switch(Ue.label){case 0:return ue(r,9),ue(!pe||pe==="no-cache",10),Ne=this.generateQueryId(),r=this.transform(r).document,this.setQuery(Ne,function(){return{document:r}}),n=this.getVariables(r,n),this.transform(r).hasClientExports?[4,this.localState.addExportedVariables(r,n,be)]:[3,2];case 1:n=Ue.sent(),Ue.label=2;case 2:return Ae=function(){var We={};return a&&$e.queries.forEach(function(It,Dt){var Kt=It.observableQuery;if(Kt){var xt=Kt.queryName;xt&&Ke.call(a,xt)&&(We[Dt]={updater:a[xt],query:$e.queryStore.get(Dt)})}}),We},this.mutationStore.initMutation(Ne,r,n),this.dataStore.markMutationInit({mutationId:Ne,document:r,variables:n,updateQueries:Ae(),update:A,optimisticResponse:i}),this.broadcastQueries(),Ge=this,[2,new Promise(function(We,It){var Dt,Kt;Ge.getObservableFromLink(r,Le(Le({},be),{optimisticResponse:i}),n,!1).subscribe({next:function(xt){if(pt(xt)&&Y==="none"){Kt=new Mr({graphQLErrors:xt.errors});return}Ge.mutationStore.markMutationResult(Ne),pe!=="no-cache"&&Ge.dataStore.markMutationResult({mutationId:Ne,result:xt,document:r,variables:n,updateQueries:Ae(),update:A}),Dt=xt},error:function(xt){Ge.mutationStore.markMutationError(Ne,xt),Ge.dataStore.markMutationComplete({mutationId:Ne,optimisticResponse:i}),Ge.broadcastQueries(),Ge.setQuery(Ne,function(){return{document:null}}),It(new Mr({networkError:xt}))},complete:function(){if(Kt&&Ge.mutationStore.markMutationError(Ne,Kt),Ge.dataStore.markMutationComplete({mutationId:Ne,optimisticResponse:i}),Ge.broadcastQueries(),Kt){It(Kt);return}typeof m=="function"&&(m=m(Dt));var xt=[];Ci(m)&&m.forEach(function(ts){if(typeof ts=="string")Ge.queries.forEach(function(Ln){var Lr=Ln.observableQuery;Lr&&Lr.queryName===ts&&xt.push(Lr.refetch())});else{var ao={query:ts.query,variables:ts.variables,fetchPolicy:"network-only"};ts.context&&(ao.context=ts.context),xt.push(Ge.query(ao))}}),Promise.all(T?xt:[]).then(function(){Ge.setQuery(Ne,function(){return{document:null}}),Y==="ignore"&&Dt&&pt(Dt)&&delete Dt.errors,We(Dt)})}})})]}})})},t.prototype.fetchQuery=function(e,r,n,i){return Wn(this,void 0,void 0,function(){var a,o,m,S,T,A,H,Y,pe,me,be,Ne,Ae,Ge,$e,Ue,We,It,Dt=this;return s(this,function(Kt){switch(Kt.label){case 0:return a=r.metadata,o=a===void 0?null:a,m=r.fetchPolicy,S=m===void 0?"cache-first":m,T=r.context,A=T===void 0?{}:T,H=this.transform(r.query).document,Y=this.getVariables(H,r.variables),this.transform(H).hasClientExports?[4,this.localState.addExportedVariables(H,Y,A)]:[3,2];case 1:Y=Kt.sent(),Kt.label=2;case 2:if(r=Le(Le({},r),{variables:Y}),me=S==="network-only"||S==="no-cache",be=me,me||(Ne=this.dataStore.getCache().diff({query:H,variables:Y,returnPartialData:!0,optimistic:!1}),Ae=Ne.complete,Ge=Ne.result,be=!Ae||S==="cache-and-network",pe=Ge),$e=be&&S!=="cache-only"&&S!=="standby",gn(["live"],H)&&($e=!0),Ue=this.idCounter++,We=S!=="no-cache"?this.updateQueryWatch(e,H,r):void 0,this.setQuery(e,function(){return{document:H,lastRequestId:Ue,invalidated:!0,cancel:We}}),this.invalidate(i),this.queryStore.initQuery({queryId:e,document:H,storePreviousVariables:$e,variables:Y,isPoll:n===sn.poll,isRefetch:n===sn.refetch,metadata:o,fetchMoreForQueryId:i}),this.broadcastQueries(),$e){if(It=this.fetchRequest({requestId:Ue,queryId:e,document:H,options:r,fetchMoreForQueryId:i}).catch(function(xt){throw qa(xt)?xt:(Ue>=Dt.getQuery(e).lastRequestId&&(Dt.queryStore.markQueryError(e,xt,i),Dt.invalidate(e),Dt.invalidate(i),Dt.broadcastQueries()),new Mr({networkError:xt}))}),S!=="cache-and-network")return[2,It];It.catch(function(){})}return this.queryStore.markQueryResultClient(e,!$e),this.invalidate(e),this.invalidate(i),this.transform(H).hasForcedResolvers?[2,this.localState.runResolvers({document:H,remoteResult:{data:pe},context:A,variables:Y,onlyRunForcedResolvers:!0}).then(function(xt){return Dt.markQueryResult(e,xt,r,i),Dt.broadcastQueries(),xt})]:(this.broadcastQueries(),[2,{data:pe}])}})})},t.prototype.markQueryResult=function(e,r,n,i){var a=n.fetchPolicy,o=n.variables,m=n.errorPolicy;a==="no-cache"?this.setQuery(e,function(){return{newData:{result:r.data,complete:!0}}}):this.dataStore.markQueryResult(r,this.getQuery(e).document,o,i,m==="ignore"||m==="all")},t.prototype.queryListenerForObserver=function(e,r,n){var i=this;function a(o,m){if(n[o])try{n[o](m)}catch(S){}}return function(o,m){if(i.invalidate(e,!1),!!o){var S=i.getQuery(e),T=S.observableQuery,A=S.document,H=T?T.options.fetchPolicy:r.fetchPolicy;if(H!=="standby"){var Y=Vs(o.networkStatus),pe=T&&T.getLastResult(),me=!!(pe&&pe.networkStatus!==o.networkStatus),be=r.returnPartialData||!m&&o.previousVariables||me&&r.notifyOnNetworkStatusChange||H==="cache-only"||H==="cache-and-network";if(!(Y&&!be)){var Ne=Ci(o.graphQLErrors),Ae=T&&T.options.errorPolicy||r.errorPolicy||"none";if(Ae==="none"&&Ne||o.networkError)return a("error",new Mr({graphQLErrors:o.graphQLErrors,networkError:o.networkError}));try{var Ge=void 0,$e=void 0;if(m)H!=="no-cache"&&H!=="network-only"&&i.setQuery(e,function(){return{newData:null}}),Ge=m.result,$e=!m.complete;else{var Ue=T&&T.getLastError(),We=Ae!=="none"&&(Ue&&Ue.graphQLErrors)!==o.graphQLErrors;if(pe&&pe.data&&!We)Ge=pe.data,$e=!1;else{var It=i.dataStore.getCache().diff({query:A,variables:o.previousVariables||o.variables,returnPartialData:!0,optimistic:!0});Ge=It.result,$e=!It.complete}}var Dt=$e&&!(r.returnPartialData||H==="cache-only"),Kt={data:Dt?pe&&pe.data:Ge,loading:Y,networkStatus:o.networkStatus,stale:Dt};Ae==="all"&&Ne&&(Kt.errors=o.graphQLErrors),a("next",Kt)}catch(xt){a("error",new Mr({networkError:xt}))}}}}}},t.prototype.transform=function(e){var r=this.transformCache;if(!r.has(e)){var n=this.dataStore.getCache(),i=n.transformDocument(e),a=kr(n.transformForLink(i)),o=this.localState.clientQuery(i),m=this.localState.serverQuery(a),S={document:i,hasClientExports:vn(i),hasForcedResolvers:this.localState.shouldForceResolvers(i),clientQuery:o,serverQuery:m,defaultVars:st(pr(i))},T=function(A){A&&!r.has(A)&&r.set(A,S)};T(e),T(i),T(o),T(m)}return r.get(e)},t.prototype.getVariables=function(e,r){return Le(Le({},this.transform(e).defaultVars),r)},t.prototype.watchQuery=function(e,r){r===void 0&&(r=!0),ue(e.fetchPolicy!=="standby",11),e.variables=this.getVariables(e.query,e.variables),typeof e.notifyOnNetworkStatusChange=="undefined"&&(e.notifyOnNetworkStatusChange=!1);var n=Le({},e);return new iu({queryManager:this,options:n,shouldSubscribe:r})},t.prototype.query=function(e){var r=this;return ue(e.query,12),ue(e.query.kind==="Document",13),ue(!e.returnPartialData,14),ue(!e.pollInterval,15),new Promise(function(n,i){var a=r.watchQuery(e,!1);r.fetchQueryRejectFns.set("query:"+a.queryId,i),a.result().then(n,i).then(function(){return r.fetchQueryRejectFns.delete("query:"+a.queryId)})})},t.prototype.generateQueryId=function(){return String(this.idCounter++)},t.prototype.stopQueryInStore=function(e){this.stopQueryInStoreNoBroadcast(e),this.broadcastQueries()},t.prototype.stopQueryInStoreNoBroadcast=function(e){this.stopPollingQuery(e),this.queryStore.stopQuery(e),this.invalidate(e)},t.prototype.addQueryListener=function(e,r){this.setQuery(e,function(n){var i=n.listeners;return i.add(r),{invalidated:!1}})},t.prototype.updateQueryWatch=function(e,r,n){var i=this,a=this.getQuery(e).cancel;a&&a();var o=function(){var m=null,S=i.getQuery(e).observableQuery;if(S){var T=S.getLastResult();T&&(m=T.data)}return m};return this.dataStore.getCache().watch({query:r,variables:n.variables,optimistic:!0,previousResult:o,callback:function(m){i.setQuery(e,function(){return{invalidated:!0,newData:m}})}})},t.prototype.addObservableQuery=function(e,r){this.setQuery(e,function(){return{observableQuery:r}})},t.prototype.removeObservableQuery=function(e){var r=this.getQuery(e).cancel;this.setQuery(e,function(){return{observableQuery:null}}),r&&r()},t.prototype.clearStore=function(){this.fetchQueryRejectFns.forEach(function(r){r(new K(16))});var e=[];return this.queries.forEach(function(r,n){var i=r.observableQuery;i&&e.push(n)}),this.queryStore.reset(e),this.mutationStore.reset(),this.dataStore.reset()},t.prototype.resetStore=function(){var e=this;return this.clearStore().then(function(){return e.reFetchObservableQueries()})},t.prototype.reFetchObservableQueries=function(e){var r=this;e===void 0&&(e=!1);var n=[];return this.queries.forEach(function(i,a){var o=i.observableQuery;if(o){var m=o.options.fetchPolicy;o.resetLastResults(),m!=="cache-only"&&(e||m!=="standby")&&n.push(o.refetch()),r.setQuery(a,function(){return{newData:null}}),r.invalidate(a)}}),this.broadcastQueries(),Promise.all(n)},t.prototype.observeQuery=function(e,r,n){return this.addQueryListener(e,this.queryListenerForObserver(e,r,n)),this.fetchQuery(e,r)},t.prototype.startQuery=function(e,r,n){return this.addQueryListener(e,n),this.fetchQuery(e,r).catch(function(){}),e},t.prototype.startGraphQLSubscription=function(e){var r=this,n=e.query,i=e.fetchPolicy,a=e.variables;n=this.transform(n).document,a=this.getVariables(n,a);var o=function(S){return r.getObservableFromLink(n,{},S,!1).map(function(T){if((!i||i!=="no-cache")&&(r.dataStore.markSubscriptionResult(T,n,S),r.broadcastQueries()),pt(T))throw new Mr({graphQLErrors:T.errors});return T})};if(this.transform(n).hasClientExports){var m=this.localState.addExportedVariables(n,a).then(o);return new gs(function(S){var T=null;return m.then(function(A){return T=A.subscribe(S)},S.error),function(){return T&&T.unsubscribe()}})}return o(a)},t.prototype.stopQuery=function(e){this.stopQueryNoBroadcast(e),this.broadcastQueries()},t.prototype.stopQueryNoBroadcast=function(e){this.stopQueryInStoreNoBroadcast(e),this.removeQuery(e)},t.prototype.removeQuery=function(e){this.fetchQueryRejectFns.delete("query:"+e),this.fetchQueryRejectFns.delete("fetchRequest:"+e),this.getQuery(e).subscriptions.forEach(function(r){return r.unsubscribe()}),this.queries.delete(e)},t.prototype.getCurrentQueryResult=function(e,r){r===void 0&&(r=!0);var n=e.options,i=n.variables,a=n.query,o=n.fetchPolicy,m=n.returnPartialData,S=e.getLastResult(),T=this.getQuery(e.queryId).newData;if(T&&T.complete)return{data:T.result,partial:!1};if(o==="no-cache"||o==="network-only")return{data:void 0,partial:!1};var A=this.dataStore.getCache().diff({query:a,variables:i,previousResult:S?S.data:void 0,returnPartialData:!0,optimistic:r}),H=A.result,Y=A.complete;return{data:Y||m?H:void 0,partial:!Y}},t.prototype.getQueryWithPreviousResult=function(e){var r;if(typeof e=="string"){var n=this.getQuery(e).observableQuery;ue(n,17),r=n}else r=e;var i=r.options,a=i.variables,o=i.query;return{previousResult:this.getCurrentQueryResult(r,!1).data,variables:a,document:o}},t.prototype.broadcastQueries=function(){var e=this;this.onBroadcast(),this.queries.forEach(function(r,n){r.invalidated&&r.listeners.forEach(function(i){i&&i(e.queryStore.get(n),r.newData)})})},t.prototype.getLocalState=function(){return this.localState},t.prototype.getObservableFromLink=function(e,r,n,i){var a=this;i===void 0&&(i=this.queryDeduplication);var o,m=this.transform(e).serverQuery;if(m){var S=this,T=S.inFlightLinkObservables,A=S.link,H={query:m,variables:n,operationName:tr(m)||void 0,context:this.prepareContext(Le(Le({},r),{forceFetch:!i}))};if(r=H.context,i){var Y=T.get(m)||new Map;T.set(m,Y);var pe=JSON.stringify(n);if(o=Y.get(pe),!o){Y.set(pe,o=ve(Ri(A,H)));var me=function(){Y.delete(pe),Y.size||T.delete(m),be.unsubscribe()},be=o.subscribe({next:me,error:me,complete:me})}}else o=ve(Ri(A,H))}else o=gs.of({data:{}}),r=this.prepareContext(r);var Ne=this.transform(e).clientQuery;return Ne&&(o=Ce(o,function(Ae){return a.localState.runResolvers({document:Ne,remoteResult:Ae,context:r,variables:n})})),o},t.prototype.fetchRequest=function(e){var r=this,n=e.requestId,i=e.queryId,a=e.document,o=e.options,m=e.fetchMoreForQueryId,S=o.variables,T=o.errorPolicy,A=T===void 0?"none":T,H=o.fetchPolicy,Y,pe;return new Promise(function(me,be){var Ne=r.getObservableFromLink(a,o.context,S),Ae="fetchRequest:"+i;r.fetchQueryRejectFns.set(Ae,be);var Ge=function(){r.fetchQueryRejectFns.delete(Ae),r.setQuery(i,function(Ue){var We=Ue.subscriptions;We.delete($e)})},$e=Ne.map(function(Ue){if(n>=r.getQuery(i).lastRequestId&&(r.markQueryResult(i,Ue,o,m),r.queryStore.markQueryResult(i,Ue,m),r.invalidate(i),r.invalidate(m),r.broadcastQueries()),A==="none"&&Ci(Ue.errors))return be(new Mr({graphQLErrors:Ue.errors}));if(A==="all"&&(pe=Ue.errors),m||H==="no-cache")Y=Ue.data;else{var We=r.dataStore.getCache().diff({variables:S,query:a,optimistic:!1,returnPartialData:!0}),It=We.result,Dt=We.complete;(Dt||o.returnPartialData)&&(Y=It)}}).subscribe({error:function(Ue){Ge(),be(Ue)},complete:function(){Ge(),me({data:Y,errors:pe,loading:!1,networkStatus:Vt.ready,stale:!1})}});r.setQuery(i,function(Ue){var We=Ue.subscriptions;We.add($e)})})},t.prototype.getQuery=function(e){return this.queries.get(e)||{listeners:new Set,invalidated:!1,document:null,newData:null,lastRequestId:1,observableQuery:null,subscriptions:new Set}},t.prototype.setQuery=function(e,r){var n=this.getQuery(e),i=Le(Le({},n),r(n));this.queries.set(e,i)},t.prototype.invalidate=function(e,r){r===void 0&&(r=!0),e&&this.setQuery(e,function(){return{invalidated:r}})},t.prototype.prepareContext=function(e){e===void 0&&(e={});var r=this.localState.prepareContext(e);return Le(Le({},r),{clientAwareness:this.clientAwareness})},t.prototype.checkInFlight=function(e){var r=this.queryStore.get(e);return r&&r.networkStatus!==Vt.ready&&r.networkStatus!==Vt.error},t.prototype.startPollingQuery=function(e,r,n){var i=this,a=e.pollInterval;if(ue(a,18),!this.ssrMode){var o=this.pollingInfoByQueryId.get(r);o||this.pollingInfoByQueryId.set(r,o={}),o.interval=a,o.options=Le(Le({},e),{fetchPolicy:"network-only"});var m=function(){var T=i.pollingInfoByQueryId.get(r);T&&(i.checkInFlight(r)?S():i.fetchQuery(r,T.options,sn.poll).then(S,S))},S=function(){var T=i.pollingInfoByQueryId.get(r);T&&(clearTimeout(T.timeout),T.timeout=setTimeout(m,T.interval))};n&&this.addQueryListener(r,n),S()}return r},t.prototype.stopPollingQuery=function(e){this.pollingInfoByQueryId.delete(e)},t}(),Mt=function(){function t(e){this.cache=e}return t.prototype.getCache=function(){return this.cache},t.prototype.markQueryResult=function(e,r,n,i,a){a===void 0&&(a=!1);var o=!pt(e);a&&pt(e)&&e.data&&(o=!0),!i&&o&&this.cache.write({result:e.data,dataId:"ROOT_QUERY",query:r,variables:n})},t.prototype.markSubscriptionResult=function(e,r,n){pt(e)||this.cache.write({result:e.data,dataId:"ROOT_SUBSCRIPTION",query:r,variables:n})},t.prototype.markMutationInit=function(e){var r=this;if(e.optimisticResponse){var n;typeof e.optimisticResponse=="function"?n=e.optimisticResponse(e.variables):n=e.optimisticResponse,this.cache.recordOptimisticTransaction(function(i){var a=r.cache;r.cache=i;try{r.markMutationResult({mutationId:e.mutationId,result:{data:n},document:e.document,variables:e.variables,updateQueries:e.updateQueries,update:e.update})}finally{r.cache=a}},e.mutationId)}},t.prototype.markMutationResult=function(e){var r=this;if(!pt(e.result)){var n=[{result:e.result.data,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}],i=e.updateQueries;i&&Object.keys(i).forEach(function(a){var o=i[a],m=o.query,S=o.updater,T=r.cache.diff({query:m.document,variables:m.variables,returnPartialData:!0,optimistic:!1}),A=T.result,H=T.complete;if(H){var Y=Oe(function(){return S(A,{mutationResult:e.result,queryName:tr(m.document)||void 0,queryVariables:m.variables})});Y&&n.push({result:Y,dataId:"ROOT_QUERY",query:m.document,variables:m.variables})}}),this.cache.performTransaction(function(a){n.forEach(function(m){return a.write(m)});var o=e.update;o&&Oe(function(){return o(a,e.result)})})}},t.prototype.markMutationComplete=function(e){var r=e.mutationId,n=e.optimisticResponse;n&&this.cache.removeOptimistic(r)},t.prototype.markUpdateQueryResult=function(e,r,n){this.cache.write({result:n,dataId:"ROOT_QUERY",variables:r,query:e})},t.prototype.reset=function(){return this.cache.reset()},t}(),Bt="2.6.10",wt=!1,jt=function(){function t(e){var r=this;this.defaultOptions={},this.resetStoreCallbacks=[],this.clearStoreCallbacks=[];var n=e.cache,i=e.ssrMode,a=i===void 0?!1:i,o=e.ssrForceFetchDelay,m=o===void 0?0:o,S=e.connectToDevTools,T=e.queryDeduplication,A=T===void 0?!0:T,H=e.defaultOptions,Y=e.assumeImmutableResults,pe=Y===void 0?!1:Y,me=e.resolvers,be=e.typeDefs,Ne=e.fragmentMatcher,Ae=e.name,Ge=e.version,$e=e.link;if(!$e&&me&&($e=nn.empty()),!$e||!n)throw new K(4);this.link=$e,this.cache=n,this.store=new Mt(n),this.disableNetworkFetches=a||m>0,this.queryDeduplication=A,this.defaultOptions=H||{},this.typeDefs=be,m&&setTimeout(function(){return r.disableNetworkFetches=!1},m),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this);var Ue=!1;(typeof S=="undefined"?Ue:S&&typeof window!="undefined")&&(window.__APOLLO_CLIENT__=this),this.version=Bt,this.localState=new ae({cache:n,client:this,resolvers:me,fragmentMatcher:Ne}),this.queryManager=new St({link:this.link,store:this.store,queryDeduplication:A,ssrMode:a,clientAwareness:{name:Ae,version:Ge},localState:this.localState,assumeImmutableResults:pe,onBroadcast:function(){r.devToolsHookCb&&r.devToolsHookCb({action:{},state:{queries:r.queryManager.queryStore.getStore(),mutations:r.queryManager.mutationStore.getStore()},dataWithOptimisticResults:r.cache.extract(!0)})}})}return t.prototype.stop=function(){this.queryManager.stop()},t.prototype.watchQuery=function(e){return this.defaultOptions.watchQuery&&(e=Le(Le({},this.defaultOptions.watchQuery),e)),this.disableNetworkFetches&&(e.fetchPolicy==="network-only"||e.fetchPolicy==="cache-and-network")&&(e=Le(Le({},e),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(e)},t.prototype.query=function(e){return this.defaultOptions.query&&(e=Le(Le({},this.defaultOptions.query),e)),ue(e.fetchPolicy!=="cache-and-network",5),this.disableNetworkFetches&&e.fetchPolicy==="network-only"&&(e=Le(Le({},e),{fetchPolicy:"cache-first"})),this.queryManager.query(e)},t.prototype.mutate=function(e){return this.defaultOptions.mutate&&(e=Le(Le({},this.defaultOptions.mutate),e)),this.queryManager.mutate(e)},t.prototype.subscribe=function(e){return this.queryManager.startGraphQLSubscription(e)},t.prototype.readQuery=function(e,r){return r===void 0&&(r=!1),this.cache.readQuery(e,r)},t.prototype.readFragment=function(e,r){return r===void 0&&(r=!1),this.cache.readFragment(e,r)},t.prototype.writeQuery=function(e){var r=this.cache.writeQuery(e);return this.queryManager.broadcastQueries(),r},t.prototype.writeFragment=function(e){var r=this.cache.writeFragment(e);return this.queryManager.broadcastQueries(),r},t.prototype.writeData=function(e){var r=this.cache.writeData(e);return this.queryManager.broadcastQueries(),r},t.prototype.__actionHookForDevTools=function(e){this.devToolsHookCb=e},t.prototype.__requestRaw=function(e){return Ri(this.link,e)},t.prototype.initQueryManager=function(){return this.queryManager},t.prototype.resetStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore()}).then(function(){return Promise.all(e.resetStoreCallbacks.map(function(r){return r()}))}).then(function(){return e.reFetchObservableQueries()})},t.prototype.clearStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore()}).then(function(){return Promise.all(e.clearStoreCallbacks.map(function(r){return r()}))})},t.prototype.onResetStore=function(e){var r=this;return this.resetStoreCallbacks.push(e),function(){r.resetStoreCallbacks=r.resetStoreCallbacks.filter(function(n){return n!==e})}},t.prototype.onClearStore=function(e){var r=this;return this.clearStoreCallbacks.push(e),function(){r.clearStoreCallbacks=r.clearStoreCallbacks.filter(function(n){return n!==e})}},t.prototype.reFetchObservableQueries=function(e){return this.queryManager.reFetchObservableQueries(e)},t.prototype.extract=function(e){return this.cache.extract(e)},t.prototype.restore=function(e){return this.cache.restore(e)},t.prototype.addResolvers=function(e){this.localState.addResolvers(e)},t.prototype.setResolvers=function(e){this.localState.setResolvers(e)},t.prototype.getResolvers=function(){return this.localState.getResolvers()},t.prototype.setLocalStateFragmentMatcher=function(e){this.localState.setFragmentMatcher(e)},t}();const an=null;function Vr(t){var e={kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GeneratedClientQuery"},selectionSet:Wi(t)},r={kind:"Document",definitions:[e]};return r}function vs(t,e){var r={kind:"FragmentDefinition",typeCondition:{kind:"NamedType",name:{kind:"Name",value:e||"__FakeType"}},name:{kind:"Name",value:"GeneratedClientQuery"},selectionSet:Wi(t)},n={kind:"Document",definitions:[r]};return n}function Wi(t){if(typeof t=="number"||typeof t=="boolean"||typeof t=="string"||typeof t=="undefined"||t===null)return null;if(Array.isArray(t))return Wi(t[0]);var e=[];Object.keys(t).forEach(function(n){var i=Wi(t[n]),a={kind:"Field",name:{kind:"Name",value:n},selectionSet:i||void 0};e.push(a)});var r={kind:"SelectionSet",selections:e};return r}var Ua={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:null,variableDefinitions:null,directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"__typename"},arguments:[],directives:[],selectionSet:null}]}}]},ou=function(){function t(){}return t.prototype.transformDocument=function(e){return e},t.prototype.transformForLink=function(e){return e},t.prototype.readQuery=function(e,r){return r===void 0&&(r=!1),this.read({query:e.query,variables:e.variables,optimistic:r})},t.prototype.readFragment=function(e,r){return r===void 0&&(r=!1),this.read({query:er(e.fragment,e.fragmentName),variables:e.variables,rootId:e.id,optimistic:r})},t.prototype.writeQuery=function(e){this.write({dataId:"ROOT_QUERY",result:e.data,query:e.query,variables:e.variables})},t.prototype.writeFragment=function(e){this.write({dataId:e.id,result:e.data,variables:e.variables,query:er(e.fragment,e.fragmentName)})},t.prototype.writeData=function(e){var r=e.id,n=e.data;if(typeof r!="undefined"){var i=null;try{i=this.read({rootId:r,optimistic:!1,query:Ua})}catch(m){}var a=i&&i.__typename||"__ClientData",o=Object.assign({__typename:a},n);this.writeFragment({id:r,fragment:vs(o,a),data:o})}else this.writeQuery({query:Vr(n),data:n})},t}(),Pd;(function(t){})(Pd||(Pd={}));var Pr=null,Nd={},Mp=1,Fp=function(){return function(){function t(){this.id=["slot",Mp++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return t.prototype.hasValue=function(){for(var e=Pr;e;e=e.parent)if(this.id in e.slots){var r=e.slots[this.id];if(r===Nd)break;return e!==Pr&&(Pr.slots[this.id]=r),!0}return Pr&&(Pr.slots[this.id]=Nd),!1},t.prototype.getValue=function(){if(this.hasValue())return Pr.slots[this.id]},t.prototype.withValue=function(e,r,n,i){var a,o=(a={__proto__:null},a[this.id]=e,a),m=Pr;Pr={parent:m,slots:o};try{return r.apply(i,n)}finally{Pr=m}},t.bind=function(e){var r=Pr;return function(){var n=Pr;try{return Pr=r,e.apply(this,arguments)}finally{Pr=n}}},t.noContext=function(e,r,n){if(Pr){var i=Pr;try{return Pr=null,e.apply(n,r)}finally{Pr=i}}else return e.apply(n,r)},t}()},cc="@wry/context:Slot",dc=Array,hc=dc[cc]||function(){var t=Fp();try{Object.defineProperty(dc,cc,{value:dc[cc]=t,enumerable:!1,writable:!1,configurable:!1})}finally{return t}}(),pc=hc.bind,Lp=hc.noContext;function ey(t,e){return setTimeout(pc(t),e)}function ty(t){return function(){var e=t.apply(this,arguments),r=pc(e.next),n=pc(e.throw);return new Promise(function(i,a){function o(T,A){try{var H=T.call(e,A)}catch(pe){return a(pe)}var Y=H.done?i:m;qp(H.value)?H.value.then(Y,H.done?a:S):Y(H.value)}var m=function(T){return o(r,T)},S=function(T){return o(n,T)};m()})}}function qp(t){return t&&typeof t.then=="function"}var Ad=null;function ry(t){if(Ad.indexOf(t)<0){var e=function(r,n){var i=r[n];r[n]=function(){return Lp(i,arguments,this)}};e(t,"yield"),e(t.prototype,"run"),e(t.prototype,"throwInto"),Ad.push(t)}return t}function Up(){}var $p=function(){function t(e,r){e===void 0&&(e=Infinity),r===void 0&&(r=Up),this.max=e,this.dispose=r,this.map=new Map,this.newest=null,this.oldest=null}return t.prototype.has=function(e){return this.map.has(e)},t.prototype.get=function(e){var r=this.getEntry(e);return r&&r.value},t.prototype.getEntry=function(e){var r=this.map.get(e);if(r&&r!==this.newest){var n=r.older,i=r.newer;i&&(i.older=n),n&&(n.newer=i),r.older=this.newest,r.older.newer=r,r.newer=null,this.newest=r,r===this.oldest&&(this.oldest=i)}return r},t.prototype.set=function(e,r){var n=this.getEntry(e);return n?n.value=r:(n={key:e,value:r,newer:null,older:this.newest},this.newest&&(this.newest.newer=n),this.newest=n,this.oldest=this.oldest||n,this.map.set(e,n),n.value)},t.prototype.clean=function(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)},t.prototype.delete=function(e){var r=this.map.get(e);return r?(r===this.newest&&(this.newest=r.older),r===this.oldest&&(this.oldest=r.newer),r.newer&&(r.newer.older=r.older),r.older&&(r.older.newer=r.newer),this.map.delete(e),this.dispose(r.value,e),!0):!1},t}(),uu=new hc,Gp=[],mc=[],Hp=100;function js(t,e){if(!t)throw new Error(e||"assertion failure")}function Vp(t,e){var r=t.length;return r>0&&r===e.length&&t[r-1]===e[r-1]}function Id(t){switch(t.length){case 0:throw new Error("unknown value");case 1:return t[0];case 2:throw t[1]}}function Bp(t){return t.slice(0)}var jp=function(){function t(e,r){this.fn=e,this.args=r,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],++t.count}return t.prototype.recompute=function(){if(js(!this.recomputing,"already recomputing"),!(!zp(this)&&fc(this)))return zs(this)?Qp(this):Id(this.value)},t.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value.length=0,Dd(this),gc(this))},t.prototype.dispose=function(){var e=this;Ld(this).forEach(fc),gc(this),this.parents.forEach(function(r){r.setDirty(),qd(r,e)})},t.count=0,t}();function zp(t){var e=uu.getValue();if(e)return t.parents.add(e),e.childValues.has(t)||e.childValues.set(t,[]),zs(t)?xd(e,t):Md(e,t),e}function Qp(t){var e=Ld(t);return uu.withValue(t,Wp,[t]),Yp(t)&&Kp(t),e.forEach(fc),Id(t.value)}function Wp(t){t.recomputing=!0,t.value.length=0;try{t.value[0]=t.fn.apply(null,t.args)}catch(e){t.value[1]=e}t.recomputing=!1}function zs(t){return t.dirty||!!(t.dirtyChildren&&t.dirtyChildren.size)}function Kp(t){t.dirty=!1,!zs(t)&&Od(t)}function Dd(t){t.parents.forEach(function(e){return xd(e,t)})}function Od(t){t.parents.forEach(function(e){return Md(e,t)})}function xd(t,e){if(js(t.childValues.has(e)),js(zs(e)),!t.dirtyChildren)t.dirtyChildren=mc.pop()||new Set;else if(t.dirtyChildren.has(e))return;t.dirtyChildren.add(e),Dd(t)}function Md(t,e){js(t.childValues.has(e)),js(!zs(e));var r=t.childValues.get(e);r.length===0?t.childValues.set(e,Bp(e.value)):Vp(r,e.value)||t.setDirty(),Fd(t,e),!zs(t)&&Od(t)}function Fd(t,e){var r=t.dirtyChildren;r&&(r.delete(e),r.size===0&&(mc.length<Hp&&mc.push(r),t.dirtyChildren=null))}function fc(t){return t.parents.size===0&&typeof t.reportOrphan=="function"&&t.reportOrphan()===!0}function Ld(t){var e=Gp;return t.childValues.size>0&&(e=[],t.childValues.forEach(function(r,n){qd(t,n),e.push(n)})),js(t.dirtyChildren===null),e}function qd(t,e){e.parents.delete(t),t.childValues.delete(e),Fd(t,e)}function Yp(t){if(typeof t.subscribe=="function")try{gc(t),t.unsubscribe=t.subscribe.apply(null,t.args)}catch(e){return t.setDirty(),!1}return!0}function gc(t){var e=t.unsubscribe;typeof e=="function"&&(t.unsubscribe=void 0,e())}var vc=function(){function t(e){this.weakness=e}return t.prototype.lookup=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this.lookupArray(e)},t.prototype.lookupArray=function(e){var r=this;return e.forEach(function(n){return r=r.getChildTrie(n)}),r.data||(r.data=Object.create(null))},t.prototype.getChildTrie=function(e){var r=this.weakness&&Xp(e)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),n=r.get(e);return n||r.set(e,n=new t(this.weakness)),n},t}();function Xp(t){switch(typeof t){case"object":if(t===null)break;case"function":return!0}return!1}var Jp=new vc(typeof WeakMap=="function");function Zp(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Jp.lookupArray(t)}var yc=new Set;function $a(t,e){e===void 0&&(e=Object.create(null));var r=new $p(e.max||Math.pow(2,16),function(o){return o.dispose()}),n=!!e.disposable,i=e.makeCacheKey||Zp;function a(){if(!(n&&!uu.hasValue())){var o=i.apply(null,arguments);if(o===void 0)return t.apply(null,arguments);var m=Array.prototype.slice.call(arguments),S=r.get(o);S?S.args=m:(S=new jp(t,m),r.set(o,S),S.subscribe=e.subscribe,n&&(S.reportOrphan=function(){return r.delete(o)}));var T=S.recompute();return r.set(o,S),yc.add(r),uu.hasValue()||(yc.forEach(function(A){return A.clean()}),yc.clear()),n?void 0:T}}return a.dirty=function(){var o=i.apply(null,arguments),m=o!==void 0&&r.get(o);m&&m.setDirty()},a}var Ud=!1;function $d(){var t=!Ud;return Me()||(Ud=!0),t}var em=function(){function t(){}return t.prototype.ensureReady=function(){return Promise.resolve()},t.prototype.canBypassInit=function(){return!0},t.prototype.match=function(e,r,n){var i=n.store.get(e.id),a=e.id==="ROOT_QUERY";if(!i)return a;var o=i.__typename,m=o===void 0?a&&"Query":o;return m&&m===r?!0:($d(),"heuristic")},t}(),ny=function(){function t(e){e&&e.introspectionQueryResultData?(this.possibleTypesMap=this.parseIntrospectionResult(e.introspectionQueryResultData),this.isReady=!0):this.isReady=!1,this.match=this.match.bind(this)}return t.prototype.match=function(e,r,n){ue(this.isReady,1);var i=n.store.get(e.id),a=e.id==="ROOT_QUERY";if(!i)return a;var o=i.__typename,m=o===void 0?a&&"Query":o;if(ue(m,2),m===r)return!0;var S=this.possibleTypesMap[r];return!!(m&&S&&S.indexOf(m)>-1)},t.prototype.parseIntrospectionResult=function(e){var r={};return e.__schema.types.forEach(function(n){(n.kind==="UNION"||n.kind==="INTERFACE")&&(r[n.name]=n.possibleTypes.map(function(i){return i.name}))}),r},t}(),Gd=Object.prototype.hasOwnProperty,Qs=function(){function t(e){var r=this;e===void 0&&(e=Object.create(null)),this.data=e,this.depend=$a(function(n){return r.data[n]},{disposable:!0,makeCacheKey:function(n){return n}})}return t.prototype.toObject=function(){return this.data},t.prototype.get=function(e){return this.depend(e),this.data[e]},t.prototype.set=function(e,r){var n=this.data[e];r!==n&&(this.data[e]=r,this.depend.dirty(e))},t.prototype.delete=function(e){Gd.call(this.data,e)&&(delete this.data[e],this.depend.dirty(e))},t.prototype.clear=function(){this.replace(null)},t.prototype.replace=function(e){var r=this;e?(Object.keys(e).forEach(function(n){r.set(n,e[n])}),Object.keys(this.data).forEach(function(n){Gd.call(e,n)||r.delete(n)})):Object.keys(this.data).forEach(function(n){r.delete(n)})},t}();function Hd(t){return new Qs(t)}var tm=function(){function t(e){var r=this,n=e===void 0?{}:e,i=n.cacheKeyRoot,a=i===void 0?new vc(Dn):i,o=n.freezeResults,m=o===void 0?!1:o,S=this,T=S.executeStoreQuery,A=S.executeSelectionSet,H=S.executeSubSelectedArray;this.freezeResults=m,this.executeStoreQuery=$a(function(Y){return T.call(r,Y)},{makeCacheKey:function(Y){var pe=Y.query,me=Y.rootValue,be=Y.contextValue,Ne=Y.variableValues,Ae=Y.fragmentMatcher;if(be.store instanceof Qs)return a.lookup(be.store,pe,Ae,JSON.stringify(Ne),me.id)}}),this.executeSelectionSet=$a(function(Y){return A.call(r,Y)},{makeCacheKey:function(Y){var pe=Y.selectionSet,me=Y.rootValue,be=Y.execContext;if(be.contextValue.store instanceof Qs)return a.lookup(be.contextValue.store,pe,be.fragmentMatcher,JSON.stringify(be.variableValues),me.id)}}),this.executeSubSelectedArray=$a(function(Y){return H.call(r,Y)},{makeCacheKey:function(Y){var pe=Y.field,me=Y.array,be=Y.execContext;if(be.contextValue.store instanceof Qs)return a.lookup(be.contextValue.store,pe,me,JSON.stringify(be.variableValues))}})}return t.prototype.readQueryFromStore=function(e){return this.diffQueryAgainstStore(Le(Le({},e),{returnPartialData:!1})).result},t.prototype.diffQueryAgainstStore=function(e){var r=e.store,n=e.query,i=e.variables,a=e.previousResult,o=e.returnPartialData,m=o===void 0?!0:o,S=e.rootId,T=S===void 0?"ROOT_QUERY":S,A=e.fragmentMatcherFunction,H=e.config,Y=nr(n);i=or({},st(Y),i);var pe={store:r,dataIdFromObject:H&&H.dataIdFromObject,cacheRedirects:H&&H.cacheRedirects||{}},me=this.executeStoreQuery({query:n,rootValue:{type:"id",id:T,generated:!0,typename:"Query"},contextValue:pe,variableValues:i,fragmentMatcher:A}),be=me.missing&&me.missing.length>0;return be&&!m&&me.missing.forEach(function(Ne){if(!Ne.tolerable)throw new K(8)}),a&&tt(a,me.result)&&(me.result=a),{result:me.result,complete:!be}},t.prototype.executeStoreQuery=function(e){var r=e.query,n=e.rootValue,i=e.contextValue,a=e.variableValues,o=e.fragmentMatcher,m=o===void 0?rm:o,S=yn(r),T=dt(r),A=Or(T),H={query:r,fragmentMap:A,contextValue:i,variableValues:a,fragmentMatcher:m};return this.executeSelectionSet({selectionSet:S.selectionSet,rootValue:n,execContext:H})},t.prototype.executeSelectionSet=function(e){var r=this,n=e.selectionSet,i=e.rootValue,a=e.execContext,o=a.fragmentMap,m=a.contextValue,S=a.variableValues,T={result:null},A=[],H=m.store.get(i.id),Y=H&&H.__typename||i.id==="ROOT_QUERY"&&"Query"||void 0;function pe(me){var be;return me.missing&&(T.missing=T.missing||[],(be=T.missing).push.apply(be,me.missing)),me.result}return n.selections.forEach(function(me){var be;if(!!fn(me,S))if(Ie(me)){var Ne=pe(r.executeField(H,Y,me,a));typeof Ne!="undefined"&&A.push((be={},be[tn(me)]=Ne,be))}else{var Ae=void 0;if(hn(me))Ae=me;else if(Ae=o[me.name.value],!Ae)throw new K(9);var Ge=Ae.typeCondition&&Ae.typeCondition.name.value,$e=!Ge||a.fragmentMatcher(i,Ge,m);if($e){var Ue=r.executeSelectionSet({selectionSet:Ae.selectionSet,rootValue:i,execContext:a});$e==="heuristic"&&Ue.missing&&(Ue=Le(Le({},Ue),{missing:Ue.missing.map(function(We){return Le(Le({},We),{tolerable:!0})})})),A.push(pe(Ue))}}}),T.result=Da(A),this.freezeResults,T},t.prototype.executeField=function(e,r,n,i){var a=i.variableValues,o=i.contextValue,m=n.name.value,S=An(n,a),T={resultKey:tn(n),directives:Kn(n,a)},A=nm(e,r,m,S,o,T);return Array.isArray(A.result)?this.combineExecResults(A,this.executeSubSelectedArray({field:n,array:A.result,execContext:i})):n.selectionSet?A.result==null?A:this.combineExecResults(A,this.executeSelectionSet({selectionSet:n.selectionSet,rootValue:A.result,execContext:i})):(Vd(n,A.result),this.freezeResults,A)},t.prototype.combineExecResults=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n;return e.forEach(function(i){i.missing&&(n=n||[],n.push.apply(n,i.missing))}),{result:e.pop().result,missing:n}},t.prototype.executeSubSelectedArray=function(e){var r=this,n=e.field,i=e.array,a=e.execContext,o;function m(S){return S.missing&&(o=o||[],o.push.apply(o,S.missing)),S.result}return i=i.map(function(S){return S===null?null:Array.isArray(S)?m(r.executeSubSelectedArray({field:n,array:S,execContext:a})):n.selectionSet?m(r.executeSelectionSet({selectionSet:n.selectionSet,rootValue:S,execContext:a})):(Vd(n,S),S)}),this.freezeResults,{result:i,missing:o}},t}();function Vd(t,e){if(!t.selectionSet&&pn(e))throw new K(10)}function rm(){return!0}function iy(t){invariant(isIdValue(t),11)}function nm(t,e,r,n,i,a){var o=a.resultKey,m=a.directives,S=r;(n||m)&&(S=Et(S,n,m));var T=void 0;if(t&&(T=t[S],typeof T=="undefined"&&i.cacheRedirects&&typeof e=="string")){var A=i.cacheRedirects[e];if(A){var H=A[r];H&&(T=H(t,n,{getCacheKey:function(Y){var pe=i.dataIdFromObject(Y);return pe&&wr({id:pe,typename:Y.__typename})}}))}}return typeof T=="undefined"?{result:T,missing:[{object:t,fieldName:S,tolerable:!1}]}:(Ht(T)&&(T=T.json),{result:T})}var lu=function(){function t(e){e===void 0&&(e=Object.create(null)),this.data=e}return t.prototype.toObject=function(){return this.data},t.prototype.get=function(e){return this.data[e]},t.prototype.set=function(e,r){this.data[e]=r},t.prototype.delete=function(e){this.data[e]=void 0},t.prototype.clear=function(){this.data=Object.create(null)},t.prototype.replace=function(e){this.data=e||Object.create(null)},t}();function sy(t){return new lu(t)}var im=function(t){en(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="WriteError",r}return e}(Error);function sm(t,e){var r=new im(`Error writing result to store for query:
 `+JSON.stringify(e));return r.message+=`
`+t.message,r.stack=t.stack,r}var am=function(){function t(){}return t.prototype.writeQueryToStore=function(e){var r=e.query,n=e.result,i=e.store,a=i===void 0?Hd():i,o=e.variables,m=e.dataIdFromObject,S=e.fragmentMatcherFunction;return this.writeResultToStore({dataId:"ROOT_QUERY",result:n,document:r,store:a,variables:o,dataIdFromObject:m,fragmentMatcherFunction:S})},t.prototype.writeResultToStore=function(e){var r=e.dataId,n=e.result,i=e.document,a=e.store,o=a===void 0?Hd():a,m=e.variables,S=e.dataIdFromObject,T=e.fragmentMatcherFunction,A=pr(i);try{return this.writeSelectionSetToStore({result:n,dataId:r,selectionSet:A.selectionSet,context:{store:o,processedData:{},variables:or({},st(A),m),dataIdFromObject:S,fragmentMap:Or(dt(i)),fragmentMatcherFunction:T}})}catch(H){throw sm(H,i)}},t.prototype.writeSelectionSetToStore=function(e){var r=this,n=e.result,i=e.dataId,a=e.selectionSet,o=e.context,m=o.variables,S=o.store,T=o.fragmentMap;return a.selections.forEach(function(A){var H;if(!!fn(A,m))if(Ie(A)){var Y=tn(A),pe=n[Y];if(typeof pe!="undefined")r.writeFieldToStore({dataId:i,value:pe,field:A,context:o});else{var me=!1,be=!1;A.directives&&A.directives.length&&(me=A.directives.some(function(It){return It.name&&It.name.value==="defer"}),be=A.directives.some(function(It){return It.name&&It.name.value==="client"})),!me&&!be&&o.fragmentMatcherFunction}}else{var Ne=void 0;hn(A)?Ne=A:(Ne=(T||{})[A.name.value],ue(Ne,3));var Ae=!0;if(o.fragmentMatcherFunction&&Ne.typeCondition){var Ge=i||"self",$e=wr({id:Ge,typename:void 0}),Ue={store:new lu((H={},H[Ge]=n,H)),cacheRedirects:{}},We=o.fragmentMatcherFunction($e,Ne.typeCondition.name.value,Ue);!ge()&&We==="heuristic",Ae=!!We}Ae&&r.writeSelectionSetToStore({result:n,selectionSet:Ne.selectionSet,dataId:i,context:o})}}),S},t.prototype.writeFieldToStore=function(e){var r,n=e.field,i=e.value,a=e.dataId,o=e.context,m=o.variables,S=o.dataIdFromObject,T=o.store,A,H,Y=Ze(n,m);if(!n.selectionSet||i===null)A=i!=null&&typeof i=="object"?{type:"json",json:i}:i;else if(Array.isArray(i)){var pe=a+"."+Y;A=this.processArrayValue(i,pe,n.selectionSet,o)}else{var me=a+"."+Y,be=!0;if(bc(me)||(me="$"+me),S){var Ne=S(i);ue(!Ne||!bc(Ne),4),(Ne||typeof Ne=="number"&&Ne===0)&&(me=Ne,be=!1)}jd(me,n,o.processedData)||this.writeSelectionSetToStore({dataId:me,result:i,selectionSet:n.selectionSet,context:o});var Ae=i.__typename;A=wr({id:me,typename:Ae},be),H=T.get(a);var Ge=H&&H[Y];if(Ge!==A&&pn(Ge)){var $e=Ge.typename!==void 0,Ue=Ae!==void 0,We=$e&&Ue&&Ge.typename!==Ae;ue(!be||Ge.generated||We,5),ue(!$e||Ue,6),Ge.generated&&(We?be||T.delete(Ge.id):Bd(Ge.id,A.id,T))}}H=T.get(a),(!H||!tt(A,H[Y]))&&T.set(a,Le(Le({},H),(r={},r[Y]=A,r)))},t.prototype.processArrayValue=function(e,r,n,i){var a=this;return e.map(function(o,m){if(o===null)return null;var S=r+"."+m;if(Array.isArray(o))return a.processArrayValue(o,S,n,i);var T=!0;if(i.dataIdFromObject){var A=i.dataIdFromObject(o);A&&(S=A,T=!1)}return jd(S,n,i.processedData)||a.writeSelectionSetToStore({dataId:S,result:o,selectionSet:n,context:i}),wr({id:S,typename:o.__typename},T)})},t}();function bc(t){return t[0]==="$"}function Bd(t,e,r){if(t===e)return!1;var n=r.get(t),i=r.get(e),a=!1;Object.keys(n).forEach(function(m){var S=n[m],T=i[m];pn(S)&&bc(S.id)&&pn(T)&&!tt(S,T)&&Bd(S.id,T.id,r)&&(a=!0)}),r.delete(t);var o=Le(Le({},n),i);return tt(o,i)?a:(r.set(e,o),!0)}function jd(t,e,r){if(!r)return!1;if(r[t]){if(r[t].indexOf(e)>=0)return!0;r[t].push(e)}else r[t]=[e];return!1}var om={fragmentMatcher:new em,dataIdFromObject:um,addTypename:!0,resultCaching:!0,freezeResults:!1};function um(t){if(t.__typename){if(t.id!==void 0)return t.__typename+":"+t.id;if(t._id!==void 0)return t.__typename+":"+t._id}return null}var lm=Object.prototype.hasOwnProperty,zd=function(t){en(e,t);function e(r,n,i){var a=t.call(this,Object.create(null))||this;return a.optimisticId=r,a.parent=n,a.transaction=i,a}return e.prototype.toObject=function(){return Le(Le({},this.parent.toObject()),this.data)},e.prototype.get=function(r){return lm.call(this.data,r)?this.data[r]:this.parent.get(r)},e}(lu),cm=function(t){en(e,t);function e(r){r===void 0&&(r={});var n=t.call(this)||this;n.watches=new Set,n.typenameDocumentCache=new Map,n.cacheKeyRoot=new vc(Dn),n.silenceBroadcast=!1,n.config=Le(Le({},om),r),n.config.customResolvers&&(n.config.cacheRedirects=n.config.customResolvers),n.config.cacheResolvers&&(n.config.cacheRedirects=n.config.cacheResolvers),n.addTypename=!!n.config.addTypename,n.data=n.config.resultCaching?new Qs:new lu,n.optimisticData=n.data,n.storeWriter=new am,n.storeReader=new tm({cacheKeyRoot:n.cacheKeyRoot,freezeResults:r.freezeResults});var i=n,a=i.maybeBroadcastWatch;return n.maybeBroadcastWatch=$a(function(o){return a.call(n,o)},{makeCacheKey:function(o){if(!o.optimistic&&!o.previousResult&&i.data instanceof Qs)return i.cacheKeyRoot.lookup(o.query,JSON.stringify(o.variables))}}),n}return e.prototype.restore=function(r){return r&&this.data.replace(r),this},e.prototype.extract=function(r){return r===void 0&&(r=!1),(r?this.optimisticData:this.data).toObject()},e.prototype.read=function(r){if(typeof r.rootId=="string"&&typeof this.data.get(r.rootId)=="undefined")return null;var n=this.config.fragmentMatcher,i=n&&n.match;return this.storeReader.readQueryFromStore({store:r.optimistic?this.optimisticData:this.data,query:this.transformDocument(r.query),variables:r.variables,rootId:r.rootId,fragmentMatcherFunction:i,previousResult:r.previousResult,config:this.config})||null},e.prototype.write=function(r){var n=this.config.fragmentMatcher,i=n&&n.match;this.storeWriter.writeResultToStore({dataId:r.dataId,result:r.result,variables:r.variables,document:this.transformDocument(r.query),store:this.data,dataIdFromObject:this.config.dataIdFromObject,fragmentMatcherFunction:i}),this.broadcastWatches()},e.prototype.diff=function(r){var n=this.config.fragmentMatcher,i=n&&n.match;return this.storeReader.diffQueryAgainstStore({store:r.optimistic?this.optimisticData:this.data,query:this.transformDocument(r.query),variables:r.variables,returnPartialData:r.returnPartialData,previousResult:r.previousResult,fragmentMatcherFunction:i,config:this.config})},e.prototype.watch=function(r){var n=this;return this.watches.add(r),function(){n.watches.delete(r)}},e.prototype.evict=function(r){throw new K(7)},e.prototype.reset=function(){return this.data.clear(),this.broadcastWatches(),Promise.resolve()},e.prototype.removeOptimistic=function(r){for(var n=[],i=0,a=this.optimisticData;a instanceof zd;)a.optimisticId===r?++i:n.push(a),a=a.parent;if(i>0){for(this.optimisticData=a;n.length>0;){var o=n.pop();this.performTransaction(o.transaction,o.optimisticId)}this.broadcastWatches()}},e.prototype.performTransaction=function(r,n){var i=this,a=i.data,o=i.silenceBroadcast;this.silenceBroadcast=!0,typeof n=="string"&&(this.data=this.optimisticData=new zd(n,this.optimisticData,r));try{r(this)}finally{this.silenceBroadcast=o,this.data=a}this.broadcastWatches()},e.prototype.recordOptimisticTransaction=function(r,n){return this.performTransaction(r,n)},e.prototype.transformDocument=function(r){if(this.addTypename){var n=this.typenameDocumentCache.get(r);return n||(n=wi(r),this.typenameDocumentCache.set(r,n),this.typenameDocumentCache.set(n,n)),n}return r},e.prototype.broadcastWatches=function(){var r=this;this.silenceBroadcast||this.watches.forEach(function(n){return r.maybeBroadcastWatch(n)})},e.prototype.maybeBroadcastWatch=function(r){r.callback(this.diff({query:r.query,variables:r.variables,previousResult:r.previousResult&&r.previousResult(),optimistic:r.optimistic}))},e}(ou);function dm(t){return new nn(function(e,r){var n=ms(e,[]);return new Cr(function(i){var a;return Promise.resolve(n).then(function(o){return t(o,e.getContext())}).then(e.setContext).then(function(){a=r(e).subscribe({next:i.next.bind(i),error:i.error.bind(i),complete:i.complete.bind(i)})}).catch(i.error.bind(i)),function(){a&&a.unsubscribe()}})})}var hm=it(3033),pm={includeQuery:!0,includeExtensions:!1},mm={accept:"*/*","content-type":"application/json"},fm={method:"POST"},gm={http:pm,headers:mm,options:fm},Qd=function(t,e,r){var n=new Error(r);throw n.name="ServerError",n.response=t,n.statusCode=t.status,n.result=e,n},vm=function(t){return function(e){return e.text().then(function(r){try{return JSON.parse(r)}catch(i){var n=i;return n.name="ServerParseError",n.response=e,n.statusCode=e.status,n.bodyText=r,Promise.reject(n)}}).then(function(r){return e.status>=300&&Qd(e,r,"Response not successful: Received status code "+e.status),!Array.isArray(r)&&!r.hasOwnProperty("data")&&!r.hasOwnProperty("errors")&&Qd(e,r,"Server response was missing for query '"+(Array.isArray(t)?t.map(function(n){return n.operationName}):t.operationName)+"'."),r})}},ym=function(t){if(!t&&typeof fetch=="undefined"){var e="unfetch";throw typeof window=="undefined"&&(e="node-fetch"),new K(1)}},bm=function(){if(typeof AbortController=="undefined")return{controller:!1,signal:!1};var t=new AbortController,e=t.signal;return{controller:t,signal:e}},wm=function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=Le({},e.options,{headers:e.headers,credentials:e.credentials}),a=e.http;r.forEach(function(H){i=Le({},i,H.options,{headers:Le({},i.headers,H.headers)}),H.credentials&&(i.credentials=H.credentials),a=Le({},a,H.http)});var o=t.operationName,m=t.extensions,S=t.variables,T=t.query,A={operationName:o,variables:S};return a.includeExtensions&&(A.extensions=m),a.includeQuery&&(A.query=(0,hm.S)(T)),{options:i,body:A}},wc=function(t,e){var r;try{r=JSON.stringify(t)}catch(i){var n=new K(2);throw n.parseError=i,n}return r},_m=function(t,e){var r=t.getContext(),n=r.uri;return n||(typeof e=="function"?e(t):e||"/graphql")},Wd=function(t){t===void 0&&(t={});var e=t.uri,r=e===void 0?"/graphql":e,n=t.fetch,i=t.includeExtensions,a=t.useGETForQueries,o=ms(t,["uri","fetch","includeExtensions","useGETForQueries"]);ym(n),n||(n=fetch);var m={http:{includeExtensions:i},options:o.fetchOptions,credentials:o.credentials,headers:o.headers};return new nn(function(S){var T=_m(S,r),A=S.getContext(),H={};if(A.clientAwareness){var Y=A.clientAwareness,pe=Y.name,me=Y.version;pe&&(H["apollographql-client-name"]=pe),me&&(H["apollographql-client-version"]=me)}var be=Le({},H,A.headers),Ne={http:A.http,options:A.fetchOptions,credentials:A.credentials,headers:be},Ae=wm(S,gm,m,Ne),Ge=Ae.options,$e=Ae.body,Ue;if(!Ge.signal){var We=bm(),It=We.controller,Dt=We.signal;Ue=It,Ue&&(Ge.signal=Dt)}var Kt=function(Ln){return Ln.kind==="OperationDefinition"&&Ln.operation==="mutation"};if(a&&!S.query.definitions.some(Kt)&&(Ge.method="GET"),Ge.method==="GET"){var xt=Em(T,$e),ts=xt.newURI,ao=xt.parseError;if(ao)return Jo(ao);T=ts}else try{Ge.body=wc($e,"Payload")}catch(Ln){return Jo(Ln)}return new Cr(function(Ln){return n(T,Ge).then(function(Lr){return S.setContext({response:Lr}),Lr}).then(vm(S)).then(function(Lr){return Ln.next(Lr),Ln.complete(),Lr}).catch(function(Lr){Lr.name!=="AbortError"&&(Lr.result&&Lr.result.errors&&Lr.result.data&&Ln.next(Lr.result),Ln.error(Lr))}),function(){Ue&&Ue.abort()}})})};function Em(t,e){var r=[],n=function(H,Y){r.push(H+"="+encodeURIComponent(Y))};if("query"in e&&n("query",e.query),e.operationName&&n("operationName",e.operationName),e.variables){var i=void 0;try{i=wc(e.variables,"Variables map")}catch(H){return{parseError:H}}n("variables",i)}if(e.extensions){var a=void 0;try{a=wc(e.extensions,"Extensions map")}catch(H){return{parseError:H}}n("extensions",a)}var o="",m=t,S=t.indexOf("#");S!==-1&&(o=t.substr(S),m=t.substr(0,S));var T=m.indexOf("?")===-1?"?":"&",A=m+T+r.join("&")+o;return{newURI:A}}var ay=function(t){en(e,t);function e(r){return t.call(this,Wd(r).request)||this}return e}(nn),Sm=it(5175),cu=it(1669),km=it(6030);class du extends Error{constructor(e,r){super(e);Error.captureStackTrace(this,this.constructor),this.type=r}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}}class Pi extends du{constructor(e,r,n){super(e,r);n&&(this.code=this.errno=n.code,this.erroredSysCall=n.syscall)}}const hu=Symbol.toStringTag,Kd=t=>typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&typeof t.sort=="function"&&t[hu]==="URLSearchParams",Ki=t=>typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&/^(Blob|File)$/.test(t[hu]);function _c(t){return typeof t=="object"&&typeof t.append=="function"&&typeof t.set=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.delete=="function"&&typeof t.keys=="function"&&typeof t.values=="function"&&typeof t.entries=="function"&&typeof t.constructor=="function"&&t[hu]==="FormData"}const Tm=t=>typeof t=="object"&&t[hu]==="AbortSignal",Ws=`\r
`,Ec="-".repeat(2),Rm=Buffer.byteLength(Ws),Yd=t=>`${Ec}${t}${Ec}${Ws.repeat(2)}`;function Xd(t,e,r){let n="";return n+=`${Ec}${t}${Ws}`,n+=`Content-Disposition: form-data; name="${e}"`,Ki(r)&&(n+=`; filename="${r.name}"${Ws}`,n+=`Content-Type: ${r.type||"application/octet-stream"}`),`${n}${Ws.repeat(2)}`}const Cm=()=>(0,Ea.randomBytes)(8).toString("hex");async function*Pm(t,e){for(const[r,n]of t)yield Xd(e,r,n),Ki(n)?yield*n.stream():yield n,yield Ws;yield Yd(e)}function Nm(t,e){let r=0;for(const[n,i]of t)r+=Buffer.byteLength(Xd(e,n,i)),Ki(i)?r+=i.size:r+=Buffer.byteLength(String(i)),r+=Rm;return r+=Buffer.byteLength(Yd(e)),r}const on=Symbol("Body internals");class Sc{constructor(e,{size:r=0}={}){let n=null;e===null?e=null:Kd(e)?e=Buffer.from(e.toString()):Ki(e)||Buffer.isBuffer(e)||(cu.types.isAnyArrayBuffer(e)?e=Buffer.from(e):ArrayBuffer.isView(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof Pt||(_c(e)?(n=`NodeFetchFormDataBoundary${Cm()}`,e=Pt.Readable.from(Pm(e,n))):e=Buffer.from(String(e)))),this[on]={body:e,boundary:n,disturbed:!1,error:null},this.size=r,e instanceof Pt&&e.on("error",i=>{const a=i instanceof du?i:new Pi(`Invalid response body while trying to fetch ${this.url}: ${i.message}`,"system",i);this[on].error=a})}get body(){return this[on].body}get bodyUsed(){return this[on].disturbed}async arrayBuffer(){const{buffer:e,byteOffset:r,byteLength:n}=await pu(this);return e.slice(r,r+n)}async blob(){const e=this.headers&&this.headers.get("content-type")||this[on].body&&this[on].body.type||"",r=await this.buffer();return new km([r],{type:e})}async json(){const e=await pu(this);return JSON.parse(e.toString())}async text(){return(await pu(this)).toString()}buffer(){return pu(this)}}Object.defineProperties(Sc.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});async function pu(t){if(t[on].disturbed)throw new TypeError(`body used already for: ${t.url}`);if(t[on].disturbed=!0,t[on].error)throw t[on].error;let{body:e}=t;if(e===null)return Buffer.alloc(0);if(Ki(e)&&(e=e.stream()),Buffer.isBuffer(e))return e;if(!(e instanceof Pt))return Buffer.alloc(0);const r=[];let n=0;try{for await(const i of e){if(t.size>0&&n+i.length>t.size){const a=new Pi(`content size at ${t.url} over limit: ${t.size}`,"max-size");throw e.destroy(a),a}n+=i.length,r.push(i)}}catch(i){throw i instanceof du?i:new Pi(`Invalid response body while trying to fetch ${t.url}: ${i.message}`,"system",i)}if(e.readableEnded===!0||e._readableState.ended===!0)try{return r.every(i=>typeof i=="string")?Buffer.from(r.join("")):Buffer.concat(r,n)}catch(i){throw new Pi(`Could not create Buffer from response body for ${t.url}: ${i.message}`,"system",i)}else throw new Pi(`Premature close of server response while trying to fetch ${t.url}`)}const Jd=(t,e)=>{let r,n,{body:i}=t;if(t.bodyUsed)throw new Error("cannot clone body after it is used");return i instanceof Pt&&typeof i.getBoundary!="function"&&(r=new Pt.PassThrough({highWaterMark:e}),n=new Pt.PassThrough({highWaterMark:e}),i.pipe(r),i.pipe(n),t[on].body=r,i=n),i},Zd=(t,e)=>t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":Kd(t)?"application/x-www-form-urlencoded;charset=UTF-8":Ki(t)?t.type||null:Buffer.isBuffer(t)||cu.types.isAnyArrayBuffer(t)||ArrayBuffer.isView(t)?null:t&&typeof t.getBoundary=="function"?`multipart/form-data;boundary=${t.getBoundary()}`:_c(t)?`multipart/form-data; boundary=${e[on].boundary}`:t instanceof Pt?null:"text/plain;charset=UTF-8",Am=t=>{const{body:e}=t;return e===null?0:Ki(e)?e.size:Buffer.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"?e.hasKnownLength&&e.hasKnownLength()?e.getLengthSync():null:_c(e)?Nm(t[on].boundary):null},Im=(t,{body:e})=>{e===null?t.end():Ki(e)?e.stream().pipe(t):Buffer.isBuffer(e)?(t.write(e),t.end()):e.pipe(t)},mu=typeof gi.validateHeaderName=="function"?gi.validateHeaderName:t=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(t)){const e=new TypeError(`Header name must be a valid HTTP token [${t}]`);throw Object.defineProperty(e,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),e}},kc=typeof gi.validateHeaderValue=="function"?gi.validateHeaderValue:(t,e)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(e)){const r=new TypeError(`Invalid character in header content ["${t}"]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_CHAR"}),r}};class Yi extends URLSearchParams{constructor(e){let r=[];if(e instanceof Yi){const n=e.raw();for(const[i,a]of Object.entries(n))r.push(...a.map(o=>[i,o]))}else if(e!=null)if(typeof e=="object"&&!cu.types.isBoxedPrimitive(e)){const n=e[Symbol.iterator];if(n==null)r.push(...Object.entries(e));else{if(typeof n!="function")throw new TypeError("Header pairs must be iterable");r=[...e].map(i=>{if(typeof i!="object"||cu.types.isBoxedPrimitive(i))throw new TypeError("Each header pair must be an iterable object");return[...i]}).map(i=>{if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...i]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return r=r.length>0?r.map(([n,i])=>(mu(n),kc(n,String(i)),[String(n).toLowerCase(),String(i)])):void 0,super(r),new Proxy(this,{get(n,i,a){switch(i){case"append":case"set":return(o,m)=>(mu(o),kc(o,String(m)),URLSearchParams.prototype[i].call(a,String(o).toLowerCase(),String(m)));case"delete":case"has":case"getAll":return o=>(mu(o),URLSearchParams.prototype[i].call(a,String(o).toLowerCase()));case"keys":return()=>(n.sort(),new Set(URLSearchParams.prototype.keys.call(n)).keys());default:return Reflect.get(n,i,a)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){const r=this.getAll(e);if(r.length===0)return null;let n=r.join(", ");return/^content-encoding$/i.test(e)&&(n=n.toLowerCase()),n}forEach(e){for(const r of this.keys())e(this.get(r),r)}*values(){for(const e of this.keys())yield this.get(e)}*entries(){for(const e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((e,r)=>(e[r]=this.getAll(r),e),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((e,r)=>{const n=this.getAll(r);return r==="host"?e[r]=n[0]:e[r]=n.length>1?n:n[0],e},{})}}Object.defineProperties(Yi.prototype,["get","entries","forEach","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}));function Dm(t=[]){return new Yi(t.reduce((e,r,n,i)=>(n%2==0&&e.push(i.slice(n,n+2)),e),[]).filter(([e,r])=>{try{return mu(e),kc(e,String(r)),!0}catch{return!1}}))}const Om=new Set([301,302,303,307,308]),eh=t=>Om.has(t),Ni=Symbol("Response internals");class ri extends Sc{constructor(e=null,r={}){super(e,r);const n=r.status||200,i=new Yi(r.headers);if(e!==null&&!i.has("Content-Type")){const a=Zd(e);a&&i.append("Content-Type",a)}this[Ni]={url:r.url,status:n,statusText:r.statusText||"",headers:i,counter:r.counter,highWaterMark:r.highWaterMark}}get url(){return this[Ni].url||""}get status(){return this[Ni].status}get ok(){return this[Ni].status>=200&&this[Ni].status<300}get redirected(){return this[Ni].counter>0}get statusText(){return this[Ni].statusText}get headers(){return this[Ni].headers}get highWaterMark(){return this[Ni].highWaterMark}clone(){return new ri(Jd(this,this.highWaterMark),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size})}static redirect(e,r=302){if(!eh(r))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new ri(null,{headers:{location:new URL(e).toString()},status:r})}get[Symbol.toStringTag](){return"Response"}}Object.defineProperties(ri.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});const xm=t=>{if(t.search)return t.search;const e=t.href.length-1,r=t.hash||(t.href[e]==="#"?"#":"");return t.href[e-r.length]==="?"?"?":""},Ai=Symbol("Request internals"),fu=t=>typeof t=="object"&&typeof t[Ai]=="object";class Ga extends Sc{constructor(e,r={}){let n;fu(e)?n=new URL(e.url):(n=new URL(e),e={});let i=r.method||e.method||"GET";if(i=i.toUpperCase(),(r.body!=null||fu(e))&&e.body!==null&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");const a=r.body?r.body:fu(e)&&e.body!==null?Jd(e):null;super(a,{size:r.size||e.size||0});const o=new Yi(r.headers||e.headers||{});if(a!==null&&!o.has("Content-Type")){const S=Zd(a,this);S&&o.append("Content-Type",S)}let m=fu(e)?e.signal:null;if("signal"in r&&(m=r.signal),m!==null&&!Tm(m))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[Ai]={method:i,redirect:r.redirect||e.redirect||"follow",headers:o,parsedURL:n,signal:m},this.follow=r.follow===void 0?e.follow===void 0?20:e.follow:r.follow,this.compress=r.compress===void 0?e.compress===void 0?!0:e.compress:r.compress,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent,this.highWaterMark=r.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=r.insecureHTTPParser||e.insecureHTTPParser||!1}get method(){return this[Ai].method}get url(){return(0,vi.format)(this[Ai].parsedURL)}get headers(){return this[Ai].headers}get redirect(){return this[Ai].redirect}get signal(){return this[Ai].signal}clone(){return new Ga(this)}get[Symbol.toStringTag](){return"Request"}}Object.defineProperties(Ga.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});const Mm=t=>{const{parsedURL:e}=t[Ai],r=new Yi(t[Ai].headers);r.has("Accept")||r.set("Accept","*/*");let n=null;if(t.body===null&&/^(post|put)$/i.test(t.method)&&(n="0"),t.body!==null){const m=Am(t);typeof m=="number"&&!Number.isNaN(m)&&(n=String(m))}n&&r.set("Content-Length",n),r.has("User-Agent")||r.set("User-Agent","node-fetch"),t.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip,deflate,br");let{agent:i}=t;typeof i=="function"&&(i=i(e)),!r.has("Connection")&&!i&&r.set("Connection","close");const a=xm(e);return{path:e.pathname+a,pathname:e.pathname,hostname:e.hostname,protocol:e.protocol,port:e.port,hash:e.hash,search:e.search,query:e.query,href:e.href,method:t.method,headers:r[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:t.insecureHTTPParser,agent:i}};class Fm extends du{constructor(e,r="aborted"){super(e,r)}}const Lm=new Set(["data:","http:","https:"]);async function gu(t,e){return new Promise((r,n)=>{const i=new Ga(t,e),a=Mm(i);if(!Lm.has(a.protocol))throw new TypeError(`node-fetch cannot load ${t}. URL scheme "${a.protocol.replace(/:$/,"")}" is not supported.`);if(a.protocol==="data:"){const pe=Sm(i.url),me=new ri(pe,{headers:{"Content-Type":pe.typeFull}});r(me);return}const o=(a.protocol==="https:"?Ls:gi).request,{signal:m}=i;let S=null;const T=()=>{const pe=new Fm("The operation was aborted.");n(pe),i.body&&i.body instanceof Pt.Readable&&i.body.destroy(pe),!(!S||!S.body)&&S.body.emit("error",pe)};if(m&&m.aborted){T();return}const A=()=>{T(),Y()},H=o(a);m&&m.addEventListener("abort",A);const Y=()=>{H.abort(),m&&m.removeEventListener("abort",A)};H.on("error",pe=>{n(new Pi(`request to ${i.url} failed, reason: ${pe.message}`,"system",pe)),Y()}),H.on("response",pe=>{H.setTimeout(0);const me=Dm(pe.rawHeaders);if(eh(pe.statusCode)){const $e=me.get("Location"),Ue=$e===null?null:new URL($e,i.url);switch(i.redirect){case"error":n(new Pi(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),Y();return;case"manual":if(Ue!==null)try{me.set("Location",Ue)}catch(We){n(We)}break;case"follow":{if(Ue===null)break;if(i.counter>=i.follow){n(new Pi(`maximum redirect reached at: ${i.url}`,"max-redirect")),Y();return}const We={headers:new Yi(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:i.body,signal:i.signal,size:i.size};if(pe.statusCode!==303&&i.body&&e.body instanceof Pt.Readable){n(new Pi("Cannot follow redirect with body being a readable stream","unsupported-redirect")),Y();return}(pe.statusCode===303||(pe.statusCode===301||pe.statusCode===302)&&i.method==="POST")&&(We.method="GET",We.body=void 0,We.headers.delete("content-length")),r(gu(new Ga(Ue,We))),Y();return}default:}}pe.once("end",()=>{m&&m.removeEventListener("abort",A)});let be=(0,Pt.pipeline)(pe,new Pt.PassThrough,$e=>{n($e)});process.version<"v12.10"&&pe.on("aborted",A);const Ne={url:i.url,status:pe.statusCode,statusText:pe.statusMessage,headers:me,size:i.size,counter:i.counter,highWaterMark:i.highWaterMark},Ae=me.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||Ae===null||pe.statusCode===204||pe.statusCode===304){S=new ri(be,Ne),r(S);return}const Ge={flush:Gr.Z_SYNC_FLUSH,finishFlush:Gr.Z_SYNC_FLUSH};if(Ae==="gzip"||Ae==="x-gzip"){be=(0,Pt.pipeline)(be,Gr.createGunzip(Ge),$e=>{n($e)}),S=new ri(be,Ne),r(S);return}if(Ae==="deflate"||Ae==="x-deflate"){(0,Pt.pipeline)(pe,new Pt.PassThrough,Ue=>{n(Ue)}).once("data",Ue=>{(Ue[0]&15)==8?be=(0,Pt.pipeline)(be,Gr.createInflate(),We=>{n(We)}):be=(0,Pt.pipeline)(be,Gr.createInflateRaw(),We=>{n(We)}),S=new ri(be,Ne),r(S)});return}if(Ae==="br"){be=(0,Pt.pipeline)(be,Gr.createBrotliDecompress(),$e=>{n($e)}),S=new ri(be,Ne),r(S);return}S=new ri(be,Ne),r(S)}),Im(H,i)})}let Ha;const qm={};function Um(t){Ha=t.globalState}const th=(t,e)=>{if(!Ha)throw new Error("Persistent store not initialized.");return Ha.get(t+":"+e,qm)},rh=(t,e,r)=>{if(!Ha)throw new Error("Persistent store not initialized.");return Ha.update(t+":"+e,r)};var $m=it(6149);const nh=Gm();function Gm(t=process.env.HTTPS_PROXY){if(!t)return Ls.globalAgent;try{const{hostname:e,port:r,username:n,password:i}=new vi.URL(t),a=n&&i&&`${n}:${i}`;return(0,$m.httpsOverHttp)({proxy:{host:e,port:r,proxyAuth:a}})}catch(e){return d.window.showErrorMessage(`HTTPS_PROXY environment variable ignored: ${e.message}`),Ls.globalAgent}}var Hm=Object.defineProperty,ys=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Hm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const ih="Try again?",Vm="Cancel",sh="Sign in",Bm="Don't show again",ah="prompt for sign in",oh="login",uh=["read:user","user:email","repo"];var Ot;(function(t){t.github="github",t["github-enterprise"]="github-enterprise"})(Ot||(Ot={}));class jm{constructor(e){this._telemetry=e,ys(this,"_githubAPI"),ys(this,"_sessionId"),ys(this,"_githubEnterpriseAPI"),ys(this,"_enterpriseSessionId"),ys(this,"_disposables"),ys(this,"_onDidInitialize",new d.EventEmitter),ys(this,"onDidInitialize",this._onDidInitialize.event),this._disposables=[],this._disposables.push(d.authentication.onDidChangeSessions(()=>{this.isAuthenticated(Ot.github)||this.initialize(Ot.github),!this.isAuthenticated(Ot["github-enterprise"])&&Iu()&&this.initialize(Ot["github-enterprise"])}))}async initialize(e,r){if(e===Ot["github-enterprise"]&&!Iu()){P.debug("GitHub Enterprise provider selected without URI.","Authentication");return}r={...r,createIfNone:!1};let n;try{n=await d.authentication.getSession(e,uh,r)}catch(i){if(!(r.forceNewSession&&i.message==="User did not consent to login."))throw i}if(n){e===Ot.github?this._sessionId=n.id:this._enterpriseSessionId=n.id;const i=await this.createHub(n.accessToken,e);e===Ot.github?this._githubAPI=i:this._githubEnterpriseAPI=i,await this.setCurrentUser(i),this._onDidInitialize.fire()}else P.debug(`No GitHub${Tc(e)} token found.`,"Authentication")}async doCreate(e){await this.initialize(Ot.github,e),Iu()&&await this.initialize(Ot["github-enterprise"],e)}async create(e={}){return this.doCreate(e)}async recreate(){return this.doCreate({forceNewSession:!0})}async reset(){return this._githubAPI=void 0,this._githubEnterpriseAPI=void 0,this.create()}isAnyAuthenticated(){return this.isAuthenticated(Ot.github)||this.isAuthenticated(Ot["github-enterprise"])}isAuthenticated(e){return e===Ot.github?!!this._githubAPI:!!this._githubEnterpriseAPI}getHub(e){return e===Ot.github?this._githubAPI:this._githubEnterpriseAPI}async getHubOrLogin(e){var r,n;return e===Ot.github?(r=this._githubAPI)!=null?r:await this.login(e):(n=this._githubEnterpriseAPI)!=null?n:await this.login(e)}async showSignInNotification(e){if(th(ah,oh)===!1)return;if(await d.window.showInformationMessage(`In order to use the Pull Requests functionality, you must sign in to GitHub${Tc(e)}`,sh,Bm)===sh)return await this.login(e);rh(ah,oh,!1),this._telemetry.sendTelemetryEvent("auth.cancel")}async login(e){this._telemetry.sendTelemetryEvent("auth.start");const r=`Error signing in to GitHub${Tc(e)}`;let n=!0,i;for(;n;){try{const a=await this.getSessionOrLogin(e);i=await this.createHub(a,e)}catch(a){P.appendLine(`${r}: ${a}`),a instanceof Error&&a.stack&&P.appendLine(a.stack)}i?n=!1:n=await d.window.showErrorMessage(r,ih,Vm)===ih}return i?(this._githubAPI=i,await this.setCurrentUser(i),this._telemetry.sendTelemetryEvent("auth.success")):this._telemetry.sendTelemetryEvent("auth.fail"),i}async showSamlMessageAndAuth(){if(await d.window.showWarningMessage("GitHub Pull Requests and Issues requires that you provide SAML access to your organization when you sign in.",{modal:!0},"OK")==="OK")return this.recreate()}isCurrentUser(e){var r,n,i,a;return((n=(r=this._githubAPI)==null?void 0:r.currentUser)==null?void 0:n.login)===e||((a=(i=this._githubEnterpriseAPI)==null?void 0:i.currentUser)==null?void 0:a.login)==e}getCurrentUser(e){const r=this.getHub(e);return(r==null?void 0:r.octokit)&&(r==null?void 0:r.currentUser)}async setCurrentUser(e){const r=await e.octokit.users.getAuthenticated({});e.currentUser=r.data}async getSessionOrLogin(e){const r=await d.authentication.getSession(e,uh,{createIfNone:!0});return e===Ot.github?this._sessionId=r.id:this._enterpriseSessionId=r.id,r.accessToken}async createHub(e,r){let n="https://api.github.com",i;r===Ot["github-enterprise"]&&(i=jc()),i&&(n=`${i.scheme}://${i.authority}/api/v3`);let a;d.env.uiKind===d.UIKind.Web&&(a=(T,A)=>{if(A.headers!==void 0){const{"user-agent":H,...Y}=A.headers;H&&(A.headers=Y)}return gu(T,A)});const o=new zi({request:{agent:nh,fetch:a},userAgent:"GitHub VSCode Pull Requests",previews:["shadow-cat-preview"],auth:`${e||""}`,baseUrl:n});i&&(n=`${i.scheme}://${i.authority}/api`);const m=new jt({link:zm(n,e||""),cache:new cm,defaultOptions:{query:{fetchPolicy:"no-cache"}}}),S={octokit:o,graphql:m};return await this.setCurrentUser(S),S}dispose(){this._disposables.forEach(e=>e.dispose())}}const zm=(t,e)=>dm((r,{headers:n})=>({headers:{...n,authorization:e?`Bearer ${e}`:"",Accept:"application/vnd.github.shadow-cat-preview+json, application/vnd.github.antiope-preview+json"}})).concat(Wd({uri:`${t}/graphql`,fetch:gu}));function Tc(t){return t===Ot.github?"":" Enterprise"}let lh=!1;const ch=class{static async getApiHost(t){const e=process.env.GITHUB_TEST_SERVER;if(e){if(lh)return d.Uri.parse(e);if(await d.window.showInformationMessage(`The 'GITHUB_TEST_SERVER' environment variable is set to '${e}'. Use this as the GitHub API endpoint?`,{modal:!0},"Yes")==="Yes")return lh=!0,d.Uri.parse(e)}const r=t instanceof d.Uri?t:d.Uri.parse(t.host);return r.authority==="github.com"?d.Uri.parse("https://api.github.com"):d.Uri.parse(`${r.scheme}://${r.authority}`)}static getApiPath(t,e){return(t instanceof d.Uri?t:d.Uri.parse(t.host)).authority==="github.com"?e:`/api/v3${e}`}};var Qm=Object.defineProperty,Wm=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Qm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Rc{constructor(){Wm(this,"_servers",new Map().set("github.com",!0).set("ssh.github.com",!0))}async isGitHub(e){if(e===null||e.path.endsWith(".wiki")||e.authority.match(/gist[.]github[.]com/))return!1;if(this._servers.has(e.authority))return!!this._servers.get(e.authority);const[r,n]=await Rc.getOptions(e,"HEAD","/rate_limit");let i=!1;try{const o=(await gu(r.toString(),n)).headers.get("x-github-request-id");return i=o!=null,i}catch(a){return P.appendLine(`No response from host ${e}: ${a.message}`,"GitHubServer"),i}finally{P.debug(`Host ${e} is associated with GitHub: ${i}`,"GitHubServer"),this._servers.set(e.authority,i)}}static async getOptions(e,r="GET",n,i){const a={"user-agent":"GitHub VSCode Pull Requests"};i&&(a.authorization=`token ${i}`);const o=d.Uri.joinPath(await ch.getApiHost(e),ch.getApiPath(e,n));return[o,{hostname:o.authority,port:443,method:r,headers:a,agent:nh}]}}class Cc{constructor(e,r,n){this.remoteName=e,this.url=r,this.gitProtocol=n}get host(){return this.gitProtocol.host}get owner(){return this.gitProtocol.owner}get repositoryName(){return this.gitProtocol.repositoryName}get normalizedHost(){const e=this.gitProtocol.normalizeUri();return`${e.scheme}://${e.authority}`}get authProviderId(){var e;return this.host===((e=jc())==null?void 0:e.authority)?Ot["github-enterprise"]:Ot.github}equals(e){return!(this.remoteName!==e.remoteName||this.host!==e.host||this.owner!==e.owner||this.repositoryName!==e.repositoryName)}}function dh(t,e,r){if(!e)return null;const n=new Bn(e);return r&&n.update({type:r.type}),n.host?new Cc(t,e,n):null}function Ks(t){const e=[];for(const r of t.state.remotes){const n=[];r.fetchUrl&&n.push(r.fetchUrl),r.pushUrl&&r.pushUrl!==r.fetchUrl&&n.push(r.pushUrl),n.forEach(i=>{const a=dh(r.name,i);a&&e.push(a)})}return e}const Pc="github.pullRequest.pullNotification.show",Va="github.pullRequest.repos";function Km(t){t.globalState.setKeysForSync([Pc])}var Ym=it(9593),Xm=it.n(Ym),vu=it(7228);const hh=/http(s)?\:\/\/github\.com\/([^\/]+)\/([^\/]+)\/blob\/([0-9a-fA-F]{40})\/([^#]+)#L(\d+)(-L(\d+))?/;function ph(t){return t.match(hh)}function Jm(t){return!!ph(t.body)}async function mh(t,e,r=!0){const n=t[2],i=t[3],a=t[5],o=Number(t[6])-1,m=t[8]?Number(t[8])-1:o;let S;for(const A of e.folderManagers){const H=A.getGitHubRemotes();for(const Y of H)if(n.toLowerCase()===Y.owner.toLowerCase()&&i.toLowerCase()===Y.repositoryName.toLowerCase()){S=A;break}if(S)break}if(!S)return;const T=d.Uri.joinPath(S.repository.rootUri,a);try{await d.workspace.fs.stat(T)}catch(A){return}return{file:T,start:o,end:m}}async function Zm(t,e){const r=ph(t.body);if(!r){d.window.showInformationMessage("Issue has no link.");return}const n=await mh(r,e,!1);if(!n)return d.env.openExternal(d.Uri.parse(r[0]));const i=await d.workspace.openTextDocument(n==null?void 0:n.file),a=i.lineAt(n.end<i.lineCount?n.end:i.lineCount-1),o=new d.Range(n.start,0,n.end,a.text.length);return d.window.showTextDocument(n.file,{selection:o})}var ef=Object.defineProperty,fh=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?ef(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const oy=/(([^\s]+)\/([^\s]+))?(#|GH-)([1-9][0-9]*)($|\b)/,Ba=/(https?:\/\/github\.com\/(([^\s]+)\/([^\s]+))\/([^\s]+\/)?(issues|pull)\/([0-9]+)(#issuecomment\-([0-9]+))?)|(([^\s]+)\/([^\s]+))?(#|GH-)([1-9][0-9]*)($|\b)/,Nc=/\@([^\s]+)/,tf=150,vr="githubIssues",Ys="queries",rf="default",gh="issueBranchTitle",vh="useBranchForIssues",nf="workingIssueFormatScm";function Ac(t){if(!t)return;const e={owner:void 0,name:void 0,issueNumber:0};return t.length===7?(e.owner=t[2],e.name=t[3],e.issueNumber=parseInt(t[5]),e):t.length===16?(e.owner=t[3]||t[11],e.name=t[4]||t[12],e.issueNumber=parseInt(t[7]||t[14]),e.commentNumber=t[9]!==void 0?parseInt(t[9]):void 0,e):void 0}async function sf(t,e,r,n){var i;const a=(i=t.resolvedIssues.get(e.repository.rootUri.path))==null?void 0:i.get(r);if(a)return a;{let o,m,S;const T=e.getGitHubRemotes();for(const A of T){if(n)o=n.owner?n.owner:A.owner,m=n.name?n.name:A.repositoryName,S=n.issueNumber;else{const H=Ac(r.match(Ba));H&&(!H.name||!H.owner)&&(o=A.owner,m=A.repositoryName)}if(o&&m&&S!==void 0){let H=await e.resolveIssue(o,m,S,!!n.commentNumber);if(H||(H=await e.resolvePullRequest(o,m,S)),H){let Y;return t.resolvedIssues.has(e.repository.rootUri.path)?Y=t.resolvedIssues.get(e.repository.rootUri.path):t.resolvedIssues.set(e.repository.rootUri.path,Y=new(Xm())(50)),Y.set(r,H),H}}}}}function af(t,e){let r;return t.commitContributions.forEach(n=>{e.toLowerCase()===n.repoNameWithOwner.toLowerCase()&&(r=n.createdAt.toLocaleString("default",{day:"numeric",month:"short",year:"numeric"}))}),r}class of extends d.CompletionItem{constructor(){super(...arguments);fh(this,"login"),fh(this,"uri")}}function Ic(t,e){const r=new d.MarkdownString(void 0,!0);r.appendMarkdown(`![Avatar](${e.avatarUrl}|height=50,width=50) **${e.name}** [${e.login}](${e.url})`),e.bio&&r.appendText(`  \r
`+e.bio.replace(/\r\n/g," "));const n=af(e,t.owner+"/"+t.repo);return(e.location||n)&&r.appendMarkdown(`  \r
\r
---`),e.location&&r.appendMarkdown(`  \r
$(location) ${e.location}`),n&&r.appendMarkdown(`  \r
$(git-commit) Committed to this repository on ${n}`),e.company&&r.appendMarkdown(`  \r
$(jersey) Member of ${e.company}`),r}function uf(t){const e=/^([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:void 0}function lf(t,e){const r=uf(t);let n="ffffff";return r&&(.299*r.r+.587*r.g+.114*r.b)/255>.5&&(n="000000"),`<span style="color:#${n};background-color:#${t};">&nbsp;&nbsp;${e}&nbsp;&nbsp;</span>`}async function yh(t,e,r){let n=t.search(e),i=0;for(;n>=0&&n<t.length;){let a;if(n===0||t.charAt(n-1)!=="&"){const m=t.substring(n).match(e);if(m){const S=await r(m);S&&(a=t.slice(0,n)+S,t=a+t.slice(n+m[0].length))}}i=a?a.length:n+1;const o=t.substring(i).search(e);n=o>0?i+o:o}return t}function bh(t,e){return yh(t,Ba,async r=>{const n=Ac(r);if(n){const i=Sh(n);return(!n.owner||!n.name)&&(n.owner=e.remote.owner,n.name=e.remote.repositoryName),`[${i}](https://github.com/${n.owner}/${n.name}/issues/${n.issueNumber})`}})}async function cf(t,e){return yh(t,hh,async r=>{const n=await mh(r,e);if(n){const i=await d.workspace.openTextDocument(n==null?void 0:n.file),a=i.lineAt(n.end<i.lineCount?n.end:i.lineCount-1),o=[n.file,{selection:{start:{line:n.start,character:0},end:{line:n.end,character:a.text.length}}}],m=d.Uri.parse(`command:vscode.open?${encodeURIComponent(JSON.stringify(o))}`);return`[${r[0]}](${m} "Open ${n.file.fsPath}")`}})}const yu=200;async function Dc(t,e,r,n){const i=new d.MarkdownString(void 0,!0);i.isTrusted=!0;const a=new Date(t.createdAt),o=`${t.remote.owner}/${t.remote.repositoryName}`;i.appendMarkdown(`[${o}](https://github.com/${o}) on ${a.toLocaleString("default",{day:"numeric",month:"short",year:"numeric"})}  
`);const m=vu.parse(t.title,{renderer:new Fc}).trim();i.appendMarkdown(`${hf(t)} **${m}** [#${t.number}](${t.html_url})  
`);let S=vu.parse(t.body,{renderer:new Fc});if(i.appendMarkdown(`  
`),S=S.length>yu?S.substr(0,yu)+"...":S,S=await bh(S,t),S=await cf(S,r),i.appendMarkdown(S+`  
`),i.appendMarkdown(`&nbsp;  
`),t.item.labels.length>0&&t.item.labels.forEach(T=>{i.appendMarkdown(`[${lf(T.color,T.name)}](https://github.com/${o}/labels/${encodeURIComponent(T.name)}) `)}),t.item.comments&&n){for(const T of t.item.comments)if(T.databaseId===n){i.appendMarkdown(`  \r
\r
---\r
`),i.appendMarkdown(`&nbsp;  
`),i.appendMarkdown(`![Avatar](${T.author.avatarUrl}|height=15,width=15) &nbsp;&nbsp;**${T.author.login}** commented`),i.appendMarkdown(`&nbsp;  
`);let A=vu.parse(T.body.length>yu?T.body.substr(0,yu)+"...":T.body,{renderer:new Fc});A=await bh(A,t),i.appendMarkdown(A)}}return i}function df(t){switch(t.state){case Qt.Open:return t instanceof Di?"$(git-pull-request)":"$(issues)";case Qt.Closed:return t instanceof Di?"$(git-pull-request)":"$(issue-closed)";case Qt.Merged:return"$(git-merge)"}}function hf(t){if(t instanceof Di)return df(t);switch(t.state){case Qt.Open:return'<span style="color:#22863a;">$(issues)</span>';case Qt.Closed:return'<span style="color:#cb2431;">$(issue-closed)</span>'}}const wh="HEAD",pf=1,mf=2,ff=3,_h=4,bu=new Map([["upstream",pf],["ups",mf],["origin",ff]]);async function gf(t,e){var r,n,i;const a=((r=t.state.HEAD)==null?void 0:r.upstream)&&!bu.has(t.state.HEAD.upstream.remote)?t.state.HEAD.upstream.remote:void 0;let o;const m=t.state.remotes.map(H=>({name:H.name,remote:H})).filter(H=>(H.name===a&&(o=H.remote),bu.has(H.name))).sort((H,Y)=>{var pe,me;const be=(pe=bu.get(H.name))!=null?pe:_h,Ne=(me=bu.get(Y.name))!=null?me:_h;return be-Ne});a&&m.push({name:a,remote:o});const S=[wh];((n=t.state.HEAD)==null?void 0:n.name)&&t.state.HEAD.name!==wh&&S.unshift((i=t.state.HEAD)==null?void 0:i.name);let T,A;for(let H=0;H<S.length&&!T;H++)for(let Y=0;Y<m.length&&!T;Y++){const pe=(await t.getBranches({contains:e.hash,remote:!0,pattern:`remotes/${m[Y].name}/${S[H]}`,count:1})).filter(me=>me.remote&&me.name);pe&&pe.length>0&&(T=pe[0],A=m[Y].remote)}return A}async function Oc(t,e,r){var n,i;let a,o;if(r)a=r,((n=d.window.activeTextEditor)==null?void 0:n.document.uri.fsPath)===a.fsPath&&(o=d.window.activeTextEditor.selection);else if(!e&&d.window.activeTextEditor)a=d.window.activeTextEditor.document.uri,o=d.window.activeTextEditor.selection;else if(e)a=e.document.uri,o=e.range;else return{permalink:void 0,error:"No active text editor position to create permalink from.",originalFile:void 0};const m=Vc(t,a);if(!m)return{permalink:void 0,error:"The current file isn't part of repository.",originalFile:a};let S,T;try{const me=await m.log({maxEntries:1,path:a.fsPath});if(me.length===0)return{permalink:void 0,error:"No branch on a remote contains the most recent commit for the file.",originalFile:a};S=me[0],T=me[0].hash}catch(me){T=(i=m.state.HEAD)==null?void 0:i.commit}const A=new Promise(me=>{var be;if((be=m.state.HEAD)==null?void 0:be.upstream)for(const Ne of m.state.remotes)m.state.HEAD.upstream.remote===Ne.name&&me(Ne);me(void 0)});let H=S?await Promise.race([gf(m,S),new Promise(me=>{setTimeout(()=>{me(A)},1500)})]):await A;if((!H||!H.fetchUrl)&&(H=await A,!H||!H.fetchUrl))return{permalink:void 0,error:"The selection may not exist on any remote.",originalFile:a};const Y=a.path.substring(m.rootUri.path.length),pe=()=>{if(!o)return"";let me=`#L${o.start.line+1}`;return o.start.line!==o.end.line&&(me+=`-L${o.end.line+1}`),me};return{permalink:`https://github.com/${new Bn(H.fetchUrl).nameWithOwner}/blob/${T}${Y}${pe()}`,error:void 0,originalFile:a}}function Eh(t){const e=/[~^:;'".,~#?%*[\]@\\{}()]|\/\//g;return t.replace(e,"").trim().replace(/\s+/g,"-")}const vf=/\$\{(.*?)\}/g;async function wu(t,e,r,n){return t.replace(vf,(i,a)=>{switch(a){case"user":return n||i;case"issueNumber":return e?`${e.number}`:i;case"issueNumberLabel":return e?`${Xs(e,r)}`:i;case"issueTitle":return e?e.title:i;case"repository":return r?r.repo:i;case"owner":return r?r.owner:i;case"sanitizedIssueTitle":return e?Eh(e.title):i;case"sanitizedLowercaseIssueTitle":return e?Eh(e.title).toLowerCase():i;default:return i}})}function Xs(t,e){const r={issueNumber:t.number,owner:void 0,name:void 0};return e&&(e.owner.toLowerCase()!==t.remote.owner.toLowerCase()||e.repo.toLowerCase()!==t.remote.repositoryName.toLowerCase())&&(r.owner=t.remote.owner,r.name=t.remote.repositoryName),Sh(r)}function Sh(t){return!t.owner||!t.name?`#${t.issueNumber}`:`${t.owner}/${t.name}#${t.issueNumber}`}async function kh(t,e,r){var n;const i=await((n=e.currentIssue(t.repository.rootUri))==null?void 0:n.getCommitMessage());if(i)return t.repository.commit(i,{all:r})}const Th="Commit Staged",Rh="Commit All";async function yf(t,e,r){var n,i;if(t.repository.state.workingTreeChanges.length>0||t.repository.state.indexChanges.length>0){const a=[];switch(t.repository.state.indexChanges&&a.push(Th),t.repository.state.workingTreeChanges&&a.push(Rh),await d.window.showInformationMessage("There are uncommitted changes. Do you want to commit them with the default commit message?",{modal:!0},...a)){case Th:{await kh(t,r,!1);break}case Rh:{await kh(t,r,!0);break}default:return!1}}if((n=t.repository.state.HEAD)==null?void 0:n.upstream)return await t.repository.push(),await e.createPullRequest(void 0),!0;{let a;return t.repository.state.remotes.length===1?a=t.repository.state.remotes[0].name:t.repository.state.remotes.length>1&&(a=await d.window.showQuickPick(t.repository.state.remotes.map(o=>o.name),{placeHolder:"Remote to push to"})),a?(await t.repository.push(a,(i=t.repository.state.HEAD)==null?void 0:i.name,!0),await e.createPullRequest(void 0),!0):(d.window.showWarningMessage("The current repository has no remotes to push to. Please set up a remote and try again."),!1)}}async function xc(t,e){return!(t.languageId!=="markdown"&&t.languageId!=="plaintext"&&(await d.languages.getTokenInformationAtPosition(t,e)).type!==d.StandardTokenType.Comment)}async function Ch(t,e){return t.lineAt(e.line).range.end.character>1e4?!1:xc(t,e)}function Mc(t){const e=new vi.URLSearchParams(t.query).get("rootUri");return e?d.Uri.parse(e):void 0}class Fc extends vu.Renderer{code(e){return e}blockquote(e){return e}html(e){return""}heading(e,r,n,i){return e+" "}hr(){return""}list(e,r,n){return e}listitem(e){return" "+e}checkbox(e){return""}paragraph(e){return e.replace(/\</g,"\\<").replace(/\>/g,"\\>")+" "}table(e,r){return e+" "+r}tablerow(e){return e}tablecell(e,r){return e}strong(e){return e}em(e){return e}codespan(e){return`\\\`${e}\\\``}br(){return" "}del(e){return e}image(e,r,n){return""}text(e){return e}link(e,r,n){return n+" "}}var bf=Object.defineProperty,Ph=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?bf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class _u extends Error{constructor(e){super(e);this.message=e,Ph(this,"name"),Ph(this,"stack")}}function wf(t){var e;return!!((e=t.message)==null?void 0:e.startsWith("Resource protected by organization SAML enforcement."))}const Eu=new Uint8Array(256);let Su=Eu.length;function _f(){return Su>Eu.length-16&&(pl().randomFillSync(Eu),Su=0),Eu.slice(Su,Su+=16)}const Ef=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Sf(t){return typeof t=="string"&&Ef.test(t)}const kf=Sf,Nr=[];for(let t=0;t<256;++t)Nr.push((t+256).toString(16).substr(1));function Tf(t,e=0){const r=(Nr[t[e+0]]+Nr[t[e+1]]+Nr[t[e+2]]+Nr[t[e+3]]+"-"+Nr[t[e+4]]+Nr[t[e+5]]+"-"+Nr[t[e+6]]+Nr[t[e+7]]+"-"+Nr[t[e+8]]+Nr[t[e+9]]+"-"+Nr[t[e+10]]+Nr[t[e+11]]+Nr[t[e+12]]+Nr[t[e+13]]+Nr[t[e+14]]+Nr[t[e+15]]).toLowerCase();if(!kf(r))throw TypeError("Stringified UUID is invalid");return r}const Rf=Tf;function Cf(t,e,r){t=t||{};const n=t.random||(t.rng||_f)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return Rf(n)}const Nh=Cf;var Pf=Object.defineProperty,fr=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Pf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const ku=class{constructor(t,e,r,n,i){fr(this,"commentId"),fr(this,"id"),fr(this,"parent"),fr(this,"body"),fr(this,"originalBody"),fr(this,"mode"),fr(this,"author"),fr(this,"label"),fr(this,"commentReactions"),fr(this,"contextValue"),this.parent=t,this.body=new d.MarkdownString(e),this.mode=d.CommentMode.Preview,this.author={name:n.login,iconPath:n.avatarUrl?d.Uri.parse(`${n.avatarUrl}&s=64`):void 0},this.label=r?"Pending":void 0,this.contextValue="canEdit,canDelete",this.originalBody=i?i._rawComment.body:void 0,this.commentReactions=i?i.reactions:void 0,this.id=ku.idPool++}static is(t){return t.commentId===void 0}startEdit(){this.parent.comments=this.parent.comments.map(t=>(t instanceof ku&&t.id===this.id&&(t.mode=d.CommentMode.Editing),t))}cancelEdit(){this.parent.comments=this.parent.comments.map(t=>(t instanceof ku&&t.id===this.id&&(t.mode=d.CommentMode.Preview,t.body=t.originalBody||t.body),t))}};let un=ku;fr(un,"idPool",0);class yr{constructor(e,r){fr(this,"commentId"),fr(this,"parent"),fr(this,"body"),fr(this,"mode"),fr(this,"author"),fr(this,"label"),fr(this,"reactions"),fr(this,"_rawComment"),fr(this,"contextValue"),this._rawComment=e,this.commentId=e.id.toString(),this.body=new d.MarkdownString(e.body),this.author={name:e.user.login,iconPath:e.user&&e.user.avatarUrl?d.Uri.parse(e.user.avatarUrl):void 0},Wf(this,e.reactions),this.label=e.isDraft?"Pending":void 0;const n=[];e.canEdit&&n.push("canEdit"),e.canDelete&&n.push("canDelete"),this.contextValue=n.join(","),this.parent=r}static is(e){return e.commentId!==void 0}startEdit(){this.parent.comments=this.parent.comments.map(e=>(e instanceof yr&&e.commentId===this.commentId&&(e.mode=d.CommentMode.Editing),e))}cancelEdit(){this.parent.comments=this.parent.comments.map(e=>(e instanceof yr&&e.commentId===this.commentId&&(e.mode=d.CommentMode.Preview,e.body=e._rawComment.body),e))}}var Nf=Object.defineProperty,bs=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Nf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);function Lc(){let t="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<32;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}class Ah{constructor(){bs(this,"_webview"),bs(this,"_disposables",[]),bs(this,"_waitForReady"),bs(this,"_onIsReady",new d.EventEmitter),bs(this,"MESSAGE_UNHANDLED","message not handled"),this._waitForReady=new Promise(e=>{const r=this._onIsReady.event(()=>{r.dispose(),e()})})}initialize(){var e;const r=(e=this._webview)==null?void 0:e.onDidReceiveMessage(async n=>{await this._onDidReceiveMessage(n)},null,this._disposables);r&&this._disposables.push(r)}async _onDidReceiveMessage(e){switch(e.command){case"ready":this._onIsReady.fire();return;default:return this.MESSAGE_UNHANDLED}}async _postMessage(e){var r;await this._waitForReady,(r=this._webview)==null||r.postMessage({res:e})}async _replyMessage(e,r){var n;const i={seq:e.req,res:r};(n=this._webview)==null||n.postMessage(i)}async _throwError(e,r){var n;const i={seq:e.req,err:r};(n=this._webview)==null||n.postMessage(i)}dispose(){this._disposables.forEach(e=>e.dispose())}}class Ih extends Ah{constructor(e){super();this._extensionUri=e,bs(this,"viewType"),bs(this,"_view")}resolveWebviewView(e,r,n){this._view=e,this._webview=e.webview,super.initialize(),e.webview.options={enableScripts:!0,localResourceRoots:[this._extensionUri]},this._disposables.push(this._view.onDidDispose(()=>{this._webview=void 0,this._view=void 0}))}show(){this._view?this._view.show():d.commands.executeCommand(`${this.viewType}.focus`)}}var Af=Object.defineProperty,Ii=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Af(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const ni=class extends Ah{constructor(t,e,r,n,i=ni._viewType){super();this._extensionUri=t,Ii(this,"_panel"),Ii(this,"_disposables",[]),Ii(this,"_descriptionNode"),Ii(this,"_item"),Ii(this,"_folderRepositoryManager"),Ii(this,"_scrollPosition",{x:0,y:0}),this._folderRepositoryManager=n,this._panel=d.window.createWebviewPanel(i,r,e,{enableScripts:!0,retainContextWhenHidden:!0,localResourceRoots:[d.Uri.joinPath(t,"dist")]}),this._webview=this._panel.webview,super.initialize(),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._folderRepositoryManager.onDidChangeActiveIssue(a=>{if(this._folderRepositoryManager&&this._item){const o=this._item.equals(this._folderRepositoryManager.activeIssue);this._postMessage({command:"pr.update-checkout-status",isCurrentlyCheckedOut:o})}},null,this._disposables)}static async createOrShow(t,e,r,n=!1){const i=n?d.ViewColumn.Beside:d.window.activeTextEditor?d.window.activeTextEditor.viewColumn:d.ViewColumn.One;if(ni.currentPanel)ni.currentPanel._panel.reveal(i,!0);else{const a=`Issue #${r.number.toString()}`;ni.currentPanel=new ni(t,i||d.ViewColumn.Active,a,e)}await ni.currentPanel.update(e,r)}static refresh(){this.currentPanel&&this.currentPanel.refreshPanel()}async refreshPanel(){this._panel&&this._panel.visible&&this.update(this._folderRepositoryManager,this._item)}async updateIssue(t){return Promise.all([this._folderRepositoryManager.resolveIssue(t.remote.owner,t.remote.repositoryName,t.number),t.getIssueTimelineEvents(),this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(t)]).then(e=>{const[r,n,i]=e;if(!r)throw new Error(`Fail to resolve issue #${t.number} in ${t.remote.owner}/${t.remote.repositoryName}`);this._item=r,this._panel.title=`Pull Request #${t.number.toString()}`,P.debug("pr.initialize",ni.ID),this._postMessage({command:"pr.initialize",pullrequest:{number:this._item.number,title:this._item.title,url:this._item.html_url,createdAt:this._item.createdAt,body:this._item.body,bodyHTML:this._item.bodyHTML,labels:this._item.item.labels,author:{login:this._item.author.login,name:this._item.author.name,avatarUrl:this._item.userAvatar,url:this._item.author.url},state:this._item.state,events:n,repositoryDefaultBranch:i,canEdit:!0,status:{statuses:[]},isIssue:!0}})}).catch(e=>{d.window.showErrorMessage(ke(e))})}async update(t,e){return this._folderRepositoryManager=t,this._postMessage({command:"set-scroll",scrollPosition:this._scrollPosition}),this._panel.webview.html=this.getHtmlForWebview(e.number.toString()),this.updateIssue(e)}async _onDidReceiveMessage(t){if(await super._onDidReceiveMessage(t)===this.MESSAGE_UNHANDLED)switch(t.command){case"alert":d.window.showErrorMessage(t.args);return;case"pr.close":return this.close(t);case"pr.comment":return this.createComment(t);case"scroll":this._scrollPosition=t.args;return;case"pr.edit-comment":return this.editComment(t);case"pr.delete-comment":return this.deleteComment(t);case"pr.edit-description":return this.editDescription(t);case"pr.edit-title":return this.editTitle(t);case"pr.refresh":this.refreshPanel();return;case"pr.add-labels":return this.addLabels(t);case"pr.remove-label":return this.removeLabel(t);case"pr.debug":return this.webviewDebug(t);default:return this.MESSAGE_UNHANDLED}}async addLabels(t){try{let e=[];async function r(i,a){return e=(await i.getLabels(a)).filter(m=>!a.item.labels.some(S=>S.name===m.name)),e.map(m=>({label:m.name}))}const n=await d.window.showQuickPick(r(this._folderRepositoryManager,this._item),{canPickMany:!0});if(n&&n.length){await this._item.addLabels(n.map(a=>a.label));const i=n.map(a=>e.find(o=>o.name===a.label));this._item.item.labels=this._item.item.labels.concat(...i),this._replyMessage(t,{added:i})}}catch(e){d.window.showErrorMessage(ke(e))}}async removeLabel(t){try{await this._item.removeLabel(t.args);const e=this._item.item.labels.findIndex(r=>r.name===t.args);this._item.item.labels.splice(e,1),this._replyMessage(t,{})}catch(e){d.window.showErrorMessage(ke(e))}}webviewDebug(t){P.debug(t.args,ni.ID)}editDescription(t){this._item.edit({body:t.args.text}).then(e=>{this._replyMessage(t,{body:e.body,bodyHTML:e.bodyHTML})}).catch(e=>{this._throwError(t,e),d.window.showErrorMessage(`Editing description failed: ${ke(e)}`)})}editTitle(t){this._item.edit({title:t.args.text}).then(e=>{this._replyMessage(t,{text:e.title})}).catch(e=>{this._throwError(t,e),d.window.showErrorMessage(`Editing title failed: ${ke(e)}`)})}editCommentPromise(t,e){return this._item.editIssueComment(t,e)}editComment(t){this.editCommentPromise(t.args.comment,t.args.text).then(e=>{this._replyMessage(t,{body:e.body,bodyHTML:e.bodyHTML})}).catch(e=>{this._throwError(t,e),d.window.showErrorMessage(ke(e))})}deleteCommentPromise(t){return this._item.deleteIssueComment(t.id.toString())}deleteComment(t){d.window.showWarningMessage("Are you sure you want to delete this comment?",{modal:!0},"Delete").then(e=>{e==="Delete"&&this.deleteCommentPromise(t.args).then(r=>{this._replyMessage(t,{})}).catch(r=>{this._throwError(t,r),d.window.showErrorMessage(ke(r))})})}close(t){d.commands.executeCommand("pr.close",this._item,t.args).then(e=>{e?this._replyMessage(t,{value:e}):this._throwError(t,"Close cancelled")})}createComment(t){this._item.createIssueComment(t.args).then(e=>{this._replyMessage(t,{value:e})})}set _currentPanel(t){ni.currentPanel=t}dispose(){for(this._currentPanel=void 0,this._panel.dispose(),this._webview=void 0;this._disposables.length;){const t=this._disposables.pop();t&&t.dispose()}}getHtmlForWebview(t){const e=Lc(),r=d.Uri.joinPath(this._extensionUri,"dist","webview-pr-description.js");return`<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src vscode-resource: https:; script-src 'nonce-${e}'; style-src vscode-resource: 'unsafe-inline' http: https: data:;">

		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Pull Request #${t}</title>
	</head>
	<body class="${process.platform}">
		<div id=app></div>
		<script nonce="${e}" src="${this._webview.asWebviewUri(r).toString()}"></script>
	</body>
</html>`}getCurrentTitle(){return this._panel.title}};let Tu=ni;Ii(Tu,"ID","PullRequestOverviewPanel"),Ii(Tu,"currentPanel"),Ii(Tu,"_viewType","IssueOverview");var If=Object.defineProperty,Js=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?If(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);function Df(t){return!!t.id&&!!t.milestone}const ii=class extends Tu{constructor(t,e,r,n){super(t,e,r,n,ii._viewType);Js(this,"_repositoryDefaultBranch"),Js(this,"_existingReviewers",[]),Js(this,"_changeActivePullRequestListener"),this.registerFolderRepositoryListener(),cp(i=>{i&&this._item.update(i),this._postMessage({command:"update-state",state:this._item.state})},null,this._disposables),this._disposables.push(n.onDidMergePullRequest(i=>{this._postMessage({command:"update-state",state:Qt.Merged})}))}static async createOrShow(t,e,r,n=!1){const i=n?d.ViewColumn.Beside:d.window.activeTextEditor?d.window.activeTextEditor.viewColumn:d.ViewColumn.One;if(ii.currentPanel)ii.currentPanel._panel.reveal(i,!0);else{const a=`Pull Request #${r.number.toString()}`;ii.currentPanel=new ii(t,i||d.ViewColumn.Active,a,e)}await ii.currentPanel.update(e,r)}set _currentPanel(t){ii.currentPanel=t}static refresh(){this.currentPanel&&this.currentPanel.refreshPanel()}static scrollToReview(){this.currentPanel&&this.currentPanel._postMessage({command:"pr.scrollToPendingReview"})}registerFolderRepositoryListener(){this._changeActivePullRequestListener=this._folderRepositoryManager.onDidChangeActivePullRequest(t=>{if(this._folderRepositoryManager&&this._item){const e=this._item.equals(this._folderRepositoryManager.activePullRequest);this._postMessage({command:"pr.update-checkout-status",isCurrentlyCheckedOut:e})}})}getCurrentUserReviewState(t,e){const r=t.find(n=>n.reviewer.login===e.login);return r==null?void 0:r.state}async updatePullRequest(t){return Promise.all([this._folderRepositoryManager.resolvePullRequest(t.remote.owner,t.remote.repositoryName,t.number),t.getTimelineEvents(),this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(t),t.getStatusChecks(),t.getReviewRequests(),this._folderRepositoryManager.getPullRequestRepositoryAccessAndMergeMethods(t),this._folderRepositoryManager.getBranchNameForPullRequest(t)]).then(e=>{var r,n;const[i,a,o,m,S,T,A]=e;if(!i)throw new Error(`Fail to resolve Pull Request #${t.number} in ${t.remote.owner}/${t.remote.repositoryName}`);this._item=i,this._repositoryDefaultBranch=o,this._panel.title=`Pull Request #${t.number.toString()}`;const H=t.equals(this._folderRepositoryManager.activePullRequest),Y=T.hasWritePermission,pe=T.mergeMethodsAvailability,me=Y||this._item.canEdit(),be=d.workspace.getConfiguration("githubPullRequests").get("defaultMergeMethod"),Ne=Dh(pe,be);this._existingReviewers=Zh(S,a,i.author);const Ae=this._folderRepositoryManager.getCurrentUser(this._item),$e=i.base&&i.head&&!i.base.repositoryCloneUrl.equals(i.head.repositoryCloneUrl)&&Bc(),Ue=this.getCurrentUserReviewState(this._existingReviewers,Ae);P.debug("pr.initialize",ii.ID),this._postMessage({command:"pr.initialize",pullrequest:{number:i.number,title:i.title,url:i.html_url,createdAt:i.createdAt,body:i.body,bodyHTML:i.bodyHTML,labels:i.item.labels,author:{login:i.author.login,name:i.author.name,avatarUrl:i.userAvatar,url:i.author.url},state:i.state,events:a,isCurrentlyCheckedOut:H,isRemoteBaseDeleted:i.isRemoteBaseDeleted,base:i.base.label,isRemoteHeadDeleted:i.isRemoteHeadDeleted,isLocalHeadDeleted:!A,head:(n=(r=i.head)==null?void 0:r.label)!=null?n:"",repositoryDefaultBranch:o,canEdit:me,hasWritePermission:Y,status:m||{statuses:[]},mergeable:i.item.mergeable,reviewers:this._existingReviewers,isDraft:i.isDraft,mergeMethodsAvailability:pe,defaultMergeMethod:Ne,isIssue:!1,milestone:i.milestone,assignees:i.assignees,continueOnGitHub:$e,isAuthor:Ae.login===i.author.login,currentUserReviewState:Ue}})}).catch(e=>{d.window.showErrorMessage(ke(e))})}async update(t,e){return this._folderRepositoryManager!==t&&(this._folderRepositoryManager=t,this._changeActivePullRequestListener&&(this._changeActivePullRequestListener.dispose(),this._changeActivePullRequestListener=void 0,this.registerFolderRepositoryListener())),this._postMessage({command:"set-scroll",scrollPosition:this._scrollPosition}),this._panel.webview.html=this.getHtmlForWebview(e.number.toString()),this.updatePullRequest(e)}async _onDidReceiveMessage(t){if(await super._onDidReceiveMessage(t)===this.MESSAGE_UNHANDLED)switch(t.command){case"pr.checkout":return this.checkoutPullRequest(t);case"pr.merge":return this.mergePullRequest(t);case"pr.deleteBranch":return this.deleteBranch(t);case"pr.readyForReview":return this.setReadyForReview(t);case"pr.approve":return this.approvePullRequest(t);case"pr.request-changes":return this.requestChanges(t);case"pr.submit":return this.submitReview(t);case"pr.checkout-default-branch":return this.checkoutDefaultBranch(t);case"pr.apply-patch":return this.applyPatch(t);case"pr.open-diff":return this.openDiff(t);case"pr.checkMergeability":return this._replyMessage(t,await this._item.getMergeability());case"pr.add-reviewers":return this.addReviewers(t);case"pr.remove-milestone":return this.removeMilestone(t);case"pr.add-milestone":return this.addMilestone(t);case"pr.add-assignees":return this.addAssignees(t);case"pr.remove-reviewer":return this.removeReviewer(t);case"pr.remove-assignee":return this.removeAssignee(t);case"pr.copy-prlink":return this.copyPrLink();case"pr.openOnGitHub":return Ja(this._item,this._item._telemetry)}}async getReviewersQuickPickItems(t){var e;if(!t)return[];const n=(e=(await this._folderRepositoryManager.getAssignableUsers())[this._item.remote.remoteName])!=null?e:[],i=new Set([this._item.author.login,...this._existingReviewers.map(o=>o.reviewer.login)]),a=[];for(const o of t){const{login:m,name:S,isAuthor:T,isCommenter:A}=o;if(i.has(m))continue;const H=T&&A?"Recently edited and reviewed changes to these files":T?"Recently edited these files":A?"Recently reviewed changes to these files":"Suggested reviewer";a.push({label:m,description:S,detail:H,reviewer:o}),i.add(m)}for(const o of n)i.has(o.login)||a.push({label:o.login,description:o.name,reviewer:o});return a.length===0&&a.push({label:"No reviewers available for this repository"}),a}getAssigneesQuickPickItems(t,e){var r,n;if(!e)return[];t=t!=null?t:[];const i=new Set([...(n=(r=this._item.assignees)==null?void 0:r.map(o=>o.login))!=null?n:[]]),a=[];for(const o of e){const{login:m,name:S,isAuthor:T,isCommenter:A}=o;if(i.has(m))continue;const H=T&&A?"Recently edited and reviewed changes to these files":T?"Recently edited these files":A?"Recently reviewed changes to these files":"Suggested reviewer";a.push({label:m,description:S,detail:H,assignee:o}),i.add(m)}for(const o of t)i.has(o.login)||a.push({label:o.login,description:o.name,assignee:o});return a.length===0&&a.push({label:"No assignees available for this repository"}),a}async addReviewers(t){var e;try{const r=(e=await d.window.showQuickPick(this.getReviewersQuickPickItems(this._item.suggestedReviewers),{canPickMany:!0,matchOnDescription:!0}))==null?void 0:e.filter(n=>n.reviewer);if(r){await this._item.requestReview(r.map(i=>i.label));const n=r.map(i=>({reviewer:i.reviewer,state:"REQUESTED"}));this._existingReviewers=this._existingReviewers.concat(n),this._replyMessage(t,{added:n})}}catch(r){d.window.showErrorMessage(ke(r))}}async addMilestone(t){try{async function e(n){const i=await n.getMilestones();return i.items.length?i.items.map(a=>({label:a.milestone.title,id:a.milestone.id,milestone:a.milestone})):[{label:"No milestones created for this repository."}]}const r=await d.window.showQuickPick(e(this._folderRepositoryManager),{canPickMany:!1});r&&Df(r)&&(await this._item.updateMilestone(r.id),this._replyMessage(t,{added:r.milestone}))}catch(e){d.window.showErrorMessage(ke(e))}}async removeMilestone(t){try{await this._item.updateMilestone("null"),this._replyMessage(t,{})}catch(e){d.window.showErrorMessage(ke(e))}}async addAssignees(t){var e,r;try{const i=(await this._folderRepositoryManager.getAssignableUsers())[this._item.remote.remoteName],a=(e=await d.window.showQuickPick(this.getAssigneesQuickPickItems(i,[]),{canPickMany:!0,matchOnDescription:!0}))==null?void 0:e.filter(o=>o.assignee);if(a){const o=a.map(m=>m.assignee);this._item.assignees=(r=this._item.assignees)==null?void 0:r.concat(o),await this._item.updateAssignees(o.map(m=>m.login)),this._replyMessage(t,{added:o})}}catch(n){d.window.showErrorMessage(ke(n))}}async removeReviewer(t){try{await this._item.deleteReviewRequest(t.args);const e=this._existingReviewers.findIndex(r=>r.reviewer.login===t.args);this._existingReviewers.splice(e,1),this._replyMessage(t,{})}catch(e){d.window.showErrorMessage(ke(e))}}async removeAssignee(t){var e,r,n;try{await this._item.deleteAssignees(t.args);const i=(r=(e=this._item.assignees)==null?void 0:e.findIndex(a=>a.login===t.args))!=null?r:-1;(n=this._item.assignees)==null||n.splice(i,1),this._replyMessage(t,{})}catch(i){d.window.showErrorMessage(ke(i))}}async applyPatch(t){try{const e=t.args.comment,n=/```diff\n([\s\S]*)\n```/g.exec(e.body),i=$.join(this._folderRepositoryManager.repository.rootUri.path,".git",`${e.id}.diff`),a=new TextEncoder,o=d.Uri.parse(i);await d.workspace.fs.writeFile(o,a.encode(n[1])),await this._folderRepositoryManager.repository.apply(i,!0),await d.workspace.fs.delete(o)}catch(e){P.appendLine(`Applying patch failed: ${e}`),d.window.showErrorMessage(`Applying patch failed: ${ke(e)}`)}}async openDiff(t){try{const e=t.args.comment;return Di.openDiffFromComment(this._folderRepositoryManager,this._item,e)}catch(e){P.appendLine(`Open diff view failed: ${ke(e)}`,ii.ID)}}checkoutPullRequest(t){d.commands.executeCommand("pr.pick",this._item).then(()=>{const e=this._item.equals(this._folderRepositoryManager.activePullRequest);this._replyMessage(t,{isCurrentlyCheckedOut:e})},()=>{const e=this._item.equals(this._folderRepositoryManager.activePullRequest);this._replyMessage(t,{isCurrentlyCheckedOut:e})})}mergePullRequest(t){const{title:e,description:r,method:n}=t.args;this._folderRepositoryManager.mergePullRequest(this._item,e,r,n).then(i=>{d.commands.executeCommand("pr.refreshList"),i.merged||d.window.showErrorMessage(`Merging PR failed: ${i.message}`),this._replyMessage(t,{state:i.merged?Qt.Merged:Qt.Open})}).catch(i=>{d.window.showErrorMessage(`Unable to merge pull request. ${ke(i)}`),this._throwError(t,{})})}async deleteBranch(t){const e=await this._folderRepositoryManager.getBranchNameForPullRequest(this._item),r=[];if(this._item.isResolved()){const a=this._item.head.ref;!(this._repositoryDefaultBranch===this._item.head.ref)&&!this._item.isRemoteHeadDeleted&&r.push({label:`Delete remote branch ${this._item.remote.remoteName}/${a}`,description:`${this._item.remote.normalizedHost}/${this._item.remote.owner}/${this._item.remote.repositoryName}`,type:"upstream",picked:!0})}if(e){const a=d.workspace.getConfiguration("githubPullRequests").get("defaultDeletionMethod.selectLocalBranch");r.push({label:`Delete local branch ${e.branch}`,type:"local",picked:!!a});const o=d.workspace.getConfiguration("githubPullRequests").get("defaultDeletionMethod.selectRemote");e.remote&&e.createdForPullRequest&&!e.remoteInUse&&r.push({label:`Delete remote ${e.remote}, which is no longer used by any other branch`,type:"remote",picked:!!o})}if(d.env.remoteName==="codespaces"&&r.push({label:"Suspend Codespace",type:"suspend"}),!r.length){d.window.showWarningMessage(`There is no longer an upstream or local branch for Pull Request #${this._item.number}`),this._replyMessage(t,{cancelled:!0});return}const n=await d.window.showQuickPick(r,{canPickMany:!0,ignoreFocusOut:!0}),i=[];if(n){const a=this._item.equals(this._folderRepositoryManager.activePullRequest),o=n.map(async m=>{switch(m.type){case"upstream":return await this._folderRepositoryManager.deleteBranch(this._item),i.push(m.type),this._folderRepositoryManager.repository.fetch({prune:!0});case"local":if(a){if(this._folderRepositoryManager.repository.state.workingTreeChanges.length)if(await d.window.showWarningMessage("Your local changes will be lost, do you want to continue?",{modal:!0},"Yes")==="Yes")await d.commands.executeCommand("git.cleanAll");else return;await this._folderRepositoryManager.repository.checkout(this._repositoryDefaultBranch)}return await this._folderRepositoryManager.repository.deleteBranch(e.branch,!0),i.push(m.type);case"remote":return i.push(m.type),this._folderRepositoryManager.repository.removeRemote(e.remote);case"suspend":return i.push(m.type),d.commands.executeCommand("github.codespaces.disconnectSuspend")}});await Promise.all(o),this.refreshPanel(),d.commands.executeCommand("pr.refreshList"),this._postMessage({command:"pr.deleteBranch",branchTypes:i})}else this._replyMessage(t,{cancelled:!0})}setReadyForReview(t){this._item.setReadyForReview().then(e=>{d.commands.executeCommand("pr.refreshList"),this._replyMessage(t,{isDraft:e})}).catch(e=>{d.window.showErrorMessage(`Unable to set PR ready for review. ${ke(e)}`),this._throwError(t,{})})}async checkoutDefaultBranch(t){try{await this._folderRepositoryManager.checkoutDefaultBranch(t.args)}finally{this._replyMessage(t,{})}}updateReviewers(t){if(t){const e=this._existingReviewers.find(r=>t.user.login===r.reviewer.login);e?e.state=t.state:this._existingReviewers.push({reviewer:t.user,state:t.state})}}approvePullRequest(t){this._item.approve(t.args).then(e=>{this.updateReviewers(e),this._replyMessage(t,{review:e,reviewers:this._existingReviewers}),d.commands.executeCommand("pr.refreshList")},e=>{d.window.showErrorMessage(`Approving pull request failed. ${ke(e)}`),this._throwError(t,`${ke(e)}`)})}requestChanges(t){this._item.requestChanges(t.args).then(e=>{this.updateReviewers(e),this._replyMessage(t,{review:e,reviewers:this._existingReviewers})},e=>{d.window.showErrorMessage(`Requesting changes failed. ${ke(e)}`),this._throwError(t,`${ke(e)}`)})}submitReview(t){this._item.submitReview(kn.Comment,t.args).then(e=>{this.updateReviewers(e),this._replyMessage(t,{review:e,reviewers:this._existingReviewers})},e=>{d.window.showErrorMessage(`Submitting review failed. ${ke(e)}`),this._throwError(t,`${ke(e)}`)})}async copyPrLink(){await d.env.clipboard.writeText(this._item.html_url),d.window.showInformationMessage(`Copied link to PR ${this._item.title}!`)}editCommentPromise(t,e){return this._item.editReviewComment(t,e)}deleteCommentPromise(t){return this._item.deleteReviewComment(t.id.toString())}dispose(){super.dispose(),this._changeActivePullRequestListener&&this._changeActivePullRequestListener.dispose()}};let wn=ii;Js(wn,"ID","PullRequestOverviewPanel"),Js(wn,"currentPanel"),Js(wn,"_viewType","PullRequestOverview");function Dh(t,e){return e&&t.hasOwnProperty(e)&&t[e]?e:["merge","squash","rebase"].find(n=>t[n])}var Of=Object.defineProperty,ja=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Of(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class xf{constructor(e,r,n,i){this.pullRequestModel=e,this._folderReposManager=r,this._commentController=n,this._sessionState=i,ja(this,"_pendingCommentThreadAdds",[]),ja(this,"_commentHandlerId"),ja(this,"_commentThreadCache",{}),ja(this,"_openPREditors",[]),ja(this,"_disposables",[]),this._commentHandlerId=Nh(),ns(this._commentHandlerId,this),this.initializeThreadsInOpenEditors(),this.registerListeners()}registerListeners(){this._disposables.push(this.pullRequestModel.onDidChangeReviewThreads(e=>this.onDidChangeReviewThreads(e))),this._disposables.push(d.window.onDidChangeVisibleTextEditors(async e=>{this.onDidChangeOpenEditors(e)})),this._disposables.push(this.pullRequestModel.onDidChangePendingReviewState(e=>{for(const r in this._commentThreadCache)this._commentThreadCache[r].forEach(n=>{Bh(n,e)})})),this._disposables.push(d.window.onDidChangeActiveTextEditor(e=>{this.refreshContextKey(e)})),this._disposables.push(this._sessionState.onDidChangeCommentsExpandState(e=>{for(const r of this.pullRequestModel.reviewThreadsCache){const n=this.getCommentThreadCacheKey(r.path,r.diffSide===Gt.LEFT),i=this._commentThreadCache[n];if(!i){P.appendLine(`PullRequestCommentController> Thread with ID ${n} is no longer in cache`);continue}const a=i.findIndex(o=>o.gitHubThreadId===r.id);if(a>-1){const o=i[a];Cu(o,r,e)}}}))}refreshContextKey(e){if(!e)return;const r=e.document.uri;if(r.scheme!=="pr")return;const n=Dr(r);!n||n.prNumber!==this.pullRequestModel.number||this.setContextKey(this.pullRequestModel.hasPendingReview)}getPREditors(e){return e.filter(r=>{if(r.document.uri.scheme!=="pr")return!1;const n=Dr(r.document.uri);return!(!n||n.prNumber!==this.pullRequestModel.number)})}getCommentThreadCacheKey(e,r){return`${e}-${r?"original":"modified"}`}addThreadsForEditors(e){const r=this.pullRequestModel.reviewThreadsCache,n=we(r,i=>i.path);e.forEach(i=>{const{fileName:a,isBase:o}=Dr(i.document.uri);n[a]&&(this._commentThreadCache[this.getCommentThreadCacheKey(a,o)]=n[a].filter(m=>m.diffSide===Gt.LEFT&&o||m.diffSide===Gt.RIGHT&&!o).map(m=>{const S=new d.Range(new d.Position(m.line-1,0),new d.Position(m.line-1,0));return Qa(i.document.uri,S,m,this._commentController)}))})}initializeThreadsInOpenEditors(){const e=this.getPREditors(d.window.visibleTextEditors);this._openPREditors=e,this.addThreadsForEditors(e)}onDidChangeOpenEditors(e){const r=this.getPREditors(e),n=this._openPREditors.filter(a=>!r.includes(a)),i=r.filter(a=>!this._openPREditors.includes(a));this._openPREditors=r,n.forEach(a=>{const{fileName:o,isBase:m}=Dr(a.document.uri),S=this.getCommentThreadCacheKey(o,m);(this._commentThreadCache[S]||[]).forEach(A=>A.dispose()),delete this._commentThreadCache[S]}),i.length&&this.addThreadsForEditors(i)}onDidChangeReviewThreads(e){e.added.forEach(r=>{const n=r.path,i=this._pendingCommentThreadAdds.findIndex(m=>{const S=this.gitRelativeRootPath(m.uri.path)===r.path,T=m.range.start.line+1===r.line;return S&&T});let a;if(i>-1)a=this._pendingCommentThreadAdds[i],a.gitHubThreadId=r.id,a.comments=r.comments.map(m=>new yr(m,a)),this._pendingCommentThreadAdds.splice(i,1);else{const S=this.getPREditors(d.window.visibleTextEditors).find(T=>{const A=Dr(T.document.uri),H=r.diffSide===Gt.RIGHT&&!(A==null?void 0:A.isBase)||r.diffSide===Gt.LEFT&&(A==null?void 0:A.isBase);return(A==null?void 0:A.fileName)===n&&H});if(S){const T=new d.Range(new d.Position(r.line-1,0),new d.Position(r.line-1,0));a=Qa(S.document.uri,T,r,this._commentController)}}if(!a)return;const o=this.getCommentThreadCacheKey(r.path,r.diffSide===Gt.LEFT);this._commentThreadCache[o]?this._commentThreadCache[o].push(a):this._commentThreadCache[o]=[a]}),e.changed.forEach(r=>{const n=this.getCommentThreadCacheKey(r.path,r.diffSide===Gt.LEFT),i=this._commentThreadCache[n].findIndex(a=>a.gitHubThreadId===r.id);if(i>-1){const a=this._commentThreadCache[n][i];Cu(a,r)}}),e.removed.forEach(async r=>{const n=this.getCommentThreadCacheKey(r.path,r.diffSide===Gt.LEFT),i=this._commentThreadCache[n].findIndex(a=>a.gitHubThreadId===r.id);if(i>-1){const a=this._commentThreadCache[n][i];this._commentThreadCache[n].splice(i,1),a.dispose()}})}hasCommentThread(e){if(e.uri.scheme!=="pr")return!1;const r=Dr(e.uri);return!(!r||r.prNumber!==this.pullRequestModel.number)}getCommentSide(e){const r=Dr(e.uri);return(r==null?void 0:r.isBase)?Gt.LEFT:Gt.RIGHT}async createOrReplyComment(e,r,n,i){var a;const o=e.comments.length,m=n?!1:i!==void 0?i:this.pullRequestModel.hasPendingReview,S=this.optimisticallyAddComment(e,r,m);try{if(o)await this.reply(e,r,n);else{const T=this.gitRelativeRootPath(e.uri.path),A=this.getCommentSide(e);this._pendingCommentThreadAdds.push(e),await this.pullRequestModel.createReviewThread(r,T,e.range.start.line+1,A,n)}n&&await this.pullRequestModel.submitReview()}catch(T){((a=T.graphQLErrors)==null?void 0:a.length)&&T.graphQLErrors[0].type==="NOT_FOUND"?d.window.showWarningMessage("The comment that you're replying to was deleted. Refresh to update.","Refresh").then(A=>{A==="Refresh"&&this.pullRequestModel.invalidate()}):d.window.showErrorMessage(`Creating comment failed: ${T}`),e.comments=e.comments.map(A=>(A instanceof un&&A.id===S&&(A.mode=d.CommentMode.Editing),A))}}reply(e,r,n){const i=e.comments[0];if(i instanceof yr)return this.pullRequestModel.createCommentReply(r,i._rawComment.graphNodeId,n);throw new Error("Cannot respond to temporary comment")}optimisticallyEditComment(e,r){const n=this._folderReposManager.getCurrentUser(this.pullRequestModel),i=new un(e,r.body instanceof d.MarkdownString?r.body.value:r.body,!!r.label,n,r);return e.comments=e.comments.map(a=>a instanceof yr&&a.commentId===r.commentId?i:a),i.id}async editComment(e,r){if(r instanceof yr){const n=this.optimisticallyEditComment(e,r);try{await this.pullRequestModel.editReviewComment(r._rawComment,r.body instanceof d.MarkdownString?r.body.value:r.body)}catch(i){d.window.showErrorMessage(`Editing comment failed ${i}`),e.comments=e.comments.map(a=>a instanceof un&&a.id===n?new yr(r._rawComment,e):a)}}else this.createOrReplyComment(e,r.body instanceof d.MarkdownString?r.body.value:r.body,!1)}async deleteComment(e,r){r instanceof yr?await this.pullRequestModel.deleteReviewComment(r.commentId):e.comments=e.comments.filter(n=>!(n instanceof un&&n.id===r.id)),await this.pullRequestModel.validateDraftMode()}gitRelativeRootPath(e){return $.relative(this._folderReposManager.repository.rootUri.path,e).replace(/\\/g,"/")}async startReview(e,r){const n=e.comments.length,i=this.optimisticallyAddComment(e,r,!0);try{if(n)await this.reply(e,r,!1);else{const a=this.gitRelativeRootPath(e.uri.path),o=this.getCommentSide(e);this._pendingCommentThreadAdds.push(e),await this.pullRequestModel.createReviewThread(r,a,e.range.start.line+1,o)}this.setContextKey(!0)}catch(a){d.window.showErrorMessage(`Starting a review failed: ${a}`),e.comments=e.comments.map(o=>(o instanceof un&&o.id===i&&(o.mode=d.CommentMode.Editing),o))}}async openReview(){await wn.createOrShow(this._folderReposManager.context.extensionUri,this._folderReposManager,this.pullRequestModel),wn.scrollToReview(),this._folderReposManager.telemetry.sendTelemetryEvent("pr.openDescription")}optimisticallyAddComment(e,r,n){const i=this._folderReposManager.getCurrentUser(this.pullRequestModel),a=new un(e,r,n,i);return this.updateCommentThreadComments(e,[...e.comments,a]),a.id}updateCommentThreadComments(e,r){e.comments=r,ra(e)}async createCommentOnResolve(e,r){const n=await this.pullRequestModel.getPendingReviewId();await this.createOrReplyComment(e,r,!n)}async resolveReviewThread(e,r){try{r&&await this.createCommentOnResolve(e,r),await this.pullRequestModel.resolveReviewThread(e.gitHubThreadId)}catch(n){d.window.showErrorMessage(`Resolving conversation failed: ${n}`)}}async unresolveReviewThread(e,r){try{r&&await this.createCommentOnResolve(e,r),await this.pullRequestModel.unresolveReviewThread(e.gitHubThreadId)}catch(n){d.window.showErrorMessage(`Unresolving conversation failed: ${n}`)}}async toggleReaction(e,r){e.parent.uri.scheme==="pr"&&(e.reactions&&!e.reactions.find(n=>n.label===r.label&&!!n.authorHasReacted)?await this.pullRequestModel.addCommentReaction(e._rawComment.graphNodeId,r):await this.pullRequestModel.deleteCommentReaction(e._rawComment.graphNodeId,r))}setContextKey(e){d.commands.executeCommand("setContext","prInDraft",e)}dispose(){Object.keys(this._commentThreadCache).forEach(e=>{this._commentThreadCache[e].forEach(r=>r.dispose())}),is(this._commentHandlerId),this._disposables.forEach(e=>e.dispose())}}var Mf=Object.defineProperty,Oh=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Mf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Ff{constructor(e,r){this.commentsController=e,this._sessionState=r,Oh(this,"_prCommentHandlers",{}),Oh(this,"_prCommentingRangeProviders",{}),this.commentsController.commentingRangeProvider=this,this.commentsController.reactionHandler=this.toggleReaction.bind(this)}async provideCommentingRanges(e,r){const n=e.uri,i=Dr(n);return!i||!this._prCommentingRangeProviders[i.prNumber]?void 0:this._prCommentingRangeProviders[i.prNumber].provideCommentingRanges.bind(this._prCommentingRangeProviders[i.prNumber])(e,r)}async toggleReaction(e,r){const n=e.parent.uri,i=Dr(n);return!i||!this._prCommentHandlers[i.prNumber]||!this._prCommentHandlers[i.prNumber].handler.toggleReaction?void 0:this._prCommentHandlers[i.prNumber].handler.toggleReaction.bind(this._prCommentHandlers[i.prNumber].handler)(e,r)}registerCommentController(e,r,n){if(this._prCommentHandlers[e])return this._prCommentHandlers[e].refCount+=1,this._prCommentHandlers[e];const i=new xf(r,n,this.commentsController,this._sessionState);return this._prCommentHandlers[e]={handler:i,refCount:1,dispose:()=>{!this._prCommentHandlers[e]||(this._prCommentHandlers[e].refCount-=1,this._prCommentHandlers[e].refCount===0&&(this._prCommentHandlers[e].handler.dispose(),delete this._prCommentHandlers[e]))}},this._prCommentHandlers[e]}registerCommentingRangeProvider(e,r){return this._prCommentingRangeProviders[e]=r,{dispose:()=>{delete this._prCommentingRangeProviders[e]}}}dispose(){Object.keys(this._prCommentHandlers).forEach(e=>{this._prCommentHandlers[e].handler.dispose()}),this._prCommentingRangeProviders={},this._prCommentHandlers={}}}var Lf=it(9967),qf=it.n(Lf),Uf=Object.defineProperty,On=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Uf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const xh=20,Zs="GraphQL";var Yr;(function(t){t.Unknown="unknown",t.Admin="ADMIN",t.Maintain="MAINTAIN",t.Read="READ",t.Triage="TRIAGE",t.Write="WRITE"})(Yr||(Yr={}));const ft=class{constructor(t,e,r,n){this.remote=t,this._credentialStore=e,this._telemetry=r,this._sessionState=n,On(this,"_initialized",!1),On(this,"_hub"),On(this,"_metadata"),On(this,"_toDispose",[]),On(this,"commentsController"),On(this,"commentsHandler"),On(this,"_pullRequestModels",new Map),On(this,"isGitHubDotCom"),On(this,"query",async i=>{var a;const o=this.hub&&this.hub.graphql;if(!o)return P.debug(`Not available for query: ${i}`,Zs),{data:null,loading:!1,networkStatus:Vt.error,stale:!1};P.debug(`Request: ${JSON.stringify(i,null,2)}`,Zs);let m;try{m=await o.query(i)}catch(S){if(i.query!==this.schema.GetChecks&&((a=S.message)==null?void 0:a.startsWith("GraphQL error: Resource protected by organization SAML enforcement.")))await this._credentialStore.recreate(),m=await o.query(i);else throw S}return P.debug(`Response: ${JSON.stringify(m,null,2)}`,Zs),m}),On(this,"mutate",async i=>{const a=this.hub&&this.hub.graphql;if(!a)return P.debug(`Not available for query: ${i}`,Zs),{data:null,loading:!1,networkStatus:Vt.error,stale:!1};P.debug(`Request: ${JSON.stringify(i,null,2)}`,Zs);const o=await a.mutate(i);return P.debug(`Response: ${JSON.stringify(o,null,2)}`,Zs),o}),this.isGitHubDotCom=t.host.toLowerCase()==="github.com"}get hub(){if(!this._hub)throw this._initialized?new _u("Not authenticated."):new Error("Call ensure() before accessing this property.");return this._hub}equals(t){return this.remote.equals(t.remote)}async ensureCommentsController(){try{if(this.commentsController)return;await this.ensure(),this.commentsController=d.comments.createCommentController(`github-browse-${this.remote.normalizedHost}`,`GitHub Pull Request for ${this.remote.normalizedHost}`),this.commentsHandler=new Ff(this.commentsController,this._sessionState),this._toDispose.push(this.commentsHandler),this._toDispose.push(this.commentsController)}catch(t){console.log(t)}}dispose(){this._toDispose.forEach(t=>t.dispose())}get octokit(){return this.hub&&this.hub.octokit}get schema(){return qf()}async getMetadata(){var t;if(P.debug("Fetch metadata - enter",ft.ID),this._metadata)return P.debug(`Fetch metadata ${(t=this._metadata.owner)==null?void 0:t.login}/${this._metadata.name} - done`,ft.ID),this._metadata;const{octokit:e,remote:r}=await this.ensure(),n=await e.repos.get({owner:r.owner,repo:r.repositoryName});return P.debug(`Fetch metadata ${r.owner}/${r.repositoryName} - done`,ft.ID),this._metadata={...n.data,currentUser:e.currentUser},this._metadata}async resolveRemote(){try{const{clone_url:t}=await this.getMetadata();this.remote=dh(this.remote.remoteName,t,this.remote.gitProtocol)}catch(t){if(P.appendLine(`Unable to resolve remote: ${t}`),wf(t))return!1}return!0}async ensure(){return this._initialized=!0,this._credentialStore.isAuthenticated(this.remote.authProviderId)?this._hub=this._credentialStore.getHub(this.remote.authProviderId):this._hub=await this._credentialStore.showSignInNotification(this.remote.authProviderId),this}async getDefaultBranch(){try{P.debug("Fetch default branch - enter",ft.ID);const{octokit:t,remote:e}=await this.ensure(),{data:r}=await t.repos.get({owner:e.owner,repo:e.repositoryName});return P.debug("Fetch default branch - done",ft.ID),r.default_branch}catch(t){P.appendLine(`GitHubRepository> Fetching default branch failed: ${t}`)}return"master"}async getRepoAccessAndMergeMethods(){var t,e,r,n,i;try{P.debug("Fetch repo permissions and available merge methods - enter",ft.ID);const{octokit:a,remote:o}=await this.ensure(),{data:m}=await a.repos.get({owner:o.owner,repo:o.repositoryName});return P.debug("Fetch repo permissions and available merge methods - done",ft.ID),{hasWritePermission:(e=(t=m.permissions)==null?void 0:t.push)!=null?e:!1,mergeMethodsAvailability:{merge:(r=m.allow_merge_commit)!=null?r:!1,squash:(n=m.allow_squash_merge)!=null?n:!1,rebase:(i=m.allow_rebase_merge)!=null?i:!1}}}catch(a){P.appendLine(`GitHubRepository> Fetching repo permissions and available merge methods failed: ${a}`)}return{hasWritePermission:!0,mergeMethodsAvailability:{merge:!0,squash:!0,rebase:!0}}}async getAllPullRequests(t){try{P.debug("Fetch all pull requests - enter",ft.ID);const{octokit:e,remote:r}=await this.ensure(),n=await e.pulls.list({owner:r.owner,repo:r.repositoryName,per_page:xh,page:t||1}),i=!!n.headers.link&&n.headers.link.indexOf('rel="next"')>-1;if(!n.data)return P.appendLine(`Warning: no result data for ${r.owner}/${r.repositoryName} Status: ${n.status}`),{items:[],hasMorePages:!1};const a=n.data.map(o=>o.head.repo?this.createOrUpdatePullRequestModel(ws(o,this)):(P.appendLine("GitHubRepository> The remote branch for this PR was already deleted."),null)).filter(o=>o!==null);return P.debug("Fetch all pull requests - done",ft.ID),{items:a,hasMorePages:i}}catch(e){if(P.appendLine(`Fetching all pull requests failed: ${e}`,ft.ID),e.code===404)d.window.showWarningMessage(`Fetching pull requests for remote '${this.remote.remoteName}' failed, please check if the url ${this.remote.url} is valid.`);else throw e}}async getPullRequestForBranch(t){try{P.debug("Fetch pull requests for branch - enter",ft.ID);const{octokit:e,remote:r}=await this.ensure(),i=(await e.pulls.list({owner:r.owner,repo:r.repositoryName,head:`${r.owner}:${t}`})).data.map(a=>this.createOrUpdatePullRequestModel(ws(a,this))).filter(a=>a!==null);return P.debug("Fetch pull requests for branch - done",ft.ID),i}catch(e){if(P.appendLine(`Fetching pull requests for branch failed: ${e}`,ft.ID),e.code===404)d.window.showWarningMessage(`Fetching pull requests for remote '${this.remote.remoteName}' failed, please check if the url ${this.remote.url} is valid.`);else throw e}}getRepoForIssue(t,e){if(e.repositoryName&&e.repositoryUrl&&(t.remote.owner!==e.repositoryOwner||t.remote.repositoryName!==e.repositoryName)){const r=new Cc(e.repositoryName,e.repositoryUrl,new Bn(e.repositoryUrl));t=new ft(r,this._credentialStore,this._telemetry,this._sessionState)}return t}async getIssuesForUserByMilestone(t){var e;try{P.debug("Fetch all issues - enter",ft.ID);const{query:r,remote:n,schema:i}=await this.ensure(),{data:a}=await r({query:i.GetMilestones,variables:{owner:n.owner,name:n.repositoryName,assignee:(e=this._credentialStore.getCurrentUser(n.authProviderId))==null?void 0:e.login}});P.debug("Fetch all issues - done",ft.ID);const o=[];let m=this;return a&&a.repository.milestones&&a.repository.milestones.nodes&&a.repository.milestones.nodes.forEach(S=>{const T=$c(S);if(T){const A=[];S.issues.edges.forEach(H=>{const Y=Hc(H.node,this);m=this.getRepoForIssue(m,Y),A.push(new Ar(m,m.remote,Y))}),o.push({milestone:T,issues:A})}}),{items:o,hasMorePages:a.repository.milestones.pageInfo.hasNextPage}}catch(r){P.appendLine(`GithubRepository> Unable to fetch issues: ${r}`);return}}async getIssuesWithoutMilestone(t){var e;try{P.debug("Fetch issues without milestone- enter",ft.ID);const{query:r,remote:n,schema:i}=await this.ensure(),{data:a}=await r({query:i.IssuesWithoutMilestone,variables:{owner:n.owner,name:n.repositoryName,assignee:(e=this._credentialStore.getCurrentUser(n.authProviderId))==null?void 0:e.login}});P.debug("Fetch issues without milestone - done",ft.ID);const o=[];let m=this;return a&&a.repository.issues.edges&&a.repository.issues.edges.forEach(S=>{if(S.node.id){const T=Hc(S.node,this);m=this.getRepoForIssue(m,T),o.push(new Ar(m,m.remote,T))}}),{items:o,hasMorePages:a.repository.issues.pageInfo.hasNextPage}}catch(r){P.appendLine(`GithubRepository> Unable to fetch issues without milestone: ${r}`);return}}async getIssues(t,e){try{P.debug("Fetch issues with query - enter",ft.ID);const{query:r,schema:n}=await this.ensure(),{data:i}=await r({query:n.Issues,variables:{query:`${e} type:issue`}});P.debug("Fetch issues with query - done",ft.ID);const a=[];let o=this;return i&&i.search.edges&&i.search.edges.forEach(m=>{if(m.node.id){const S=Hc(m.node,this);o=this.getRepoForIssue(o,S),a.push(new Ar(o,o.remote,S))}}),{items:a,hasMorePages:i.search.pageInfo.hasNextPage}}catch(r){P.appendLine(`GithubRepository> Unable to fetch issues with query: ${r}`);return}}async getMaxIssue(){try{P.debug("Fetch max issue - enter",ft.ID);const{query:t,remote:e,schema:r}=await this.ensure(),{data:n}=await t({query:r.MaxIssue,variables:{owner:e.owner,name:e.repositoryName}});return P.debug("Fetch max issue - done",ft.ID),n&&n.repository.issues.edges.length===1?n.repository.issues.edges[0].node.number:void 0}catch(t){P.appendLine(`GithubRepository> Unable to fetch issues with query: ${t}`);return}}async getViewerPermission(){try{P.debug("Fetch viewer permission - enter",ft.ID);const{query:t,remote:e,schema:r}=await this.ensure(),{data:n}=await t({query:r.GetViewerPermission,variables:{owner:e.owner,name:e.repositoryName}});return P.debug("Fetch viewer permission - done",ft.ID),ng(n)}catch(t){return P.appendLine(`GithubRepository> Unable to fetch viewer permission: ${t}`),Yr.Unknown}}async fork(){try{P.debug("Fork repository",ft.ID);const{octokit:t,remote:e}=await this.ensure();return(await t.repos.createFork({owner:e.owner,repo:e.repositoryName})).data.clone_url}catch(t){P.appendLine(`GitHubRepository> Forking repository failed: ${t}`);return}}async getRepositoryForkDetails(){try{P.debug("Fetch repository fork details - enter",ft.ID);const{query:t,remote:e,schema:r}=await this.ensure(),{data:n}=await t({query:r.GetRepositoryForkDetails,variables:{owner:e.owner,name:e.repositoryName}});return P.debug("Fetch repository fork details - done",ft.ID),n.repository}catch(t){P.appendLine(`GithubRepository> Unable to fetch repository fork details: ${t}`);return}}async getAuthenticatedUser(){const{octokit:t}=await this.ensure();return(await t.users.getAuthenticated({})).data.login}async getPullRequestsForCategory(t,e){try{P.debug(`Fetch pull request category ${t} - enter`,ft.ID);const{octokit:r,remote:n}=await this.ensure(),i=await r.users.getAuthenticated({}),a=await r.repos.get({owner:this.remote.owner,repo:this.remote.repositoryName}),{data:o,headers:m}=await r.search.issuesAndPullRequests({q:ig(a.data.full_name,i.data.login,t),per_page:xh,page:e||1}),S=[];o.items.forEach(Y=>{S.push(new Promise(async(pe,me)=>{const be=await r.pulls.get({owner:n.owner,repo:n.repositoryName,pull_number:Y.number});pe(be)}))});const T=!!m.link&&m.link.indexOf('rel="next"')>-1,H=(await Promise.all(S)).map(Y=>Y.data.head.repo?this.createOrUpdatePullRequestModel(ws(Y.data,this)):(P.appendLine("GitHubRepository> The remote branch for this PR was already deleted."),null)).filter(Y=>Y!==null);return P.debug(`Fetch pull request category ${t} - done`,ft.ID),{items:H,hasMorePages:T}}catch(r){if(P.appendLine(`GitHubRepository> Fetching all pull requests failed: ${r}`),r.code===404)d.window.showWarningMessage(`Fetching pull requests for remote ${this.remote.remoteName}, please check if the url ${this.remote.url} is valid.`);else throw r}}createOrUpdatePullRequestModel(t){let e=this._pullRequestModels.get(t.number);return e?e.update(t):(e=new Di(this._telemetry,this,this.remote,t),e.onDidInvalidate(()=>this.getPullRequest(t.number)),this._pullRequestModels.set(t.number,e)),e}async createPullRequest(t){const{octokit:e}=await this.ensure(),{data:r}=await e.pulls.create(t);return this.createOrUpdatePullRequestModel(ws(r,this))}async getPullRequest(t){try{P.debug(`Fetch pull request ${t} - enter`,ft.ID);const{query:e,remote:r,schema:n}=await this.ensure(),{data:i}=await e({query:n.PullRequest,variables:{owner:r.owner,name:r.repositoryName,number:t}});return P.debug(`Fetch pull request ${t} - done`,ft.ID),this.createOrUpdatePullRequestModel(Kh(i,this))}catch(e){P.appendLine(`GithubRepository> Unable to fetch PR: ${e}`);return}}async getIssue(t,e=!1){try{P.debug(`Fetch issue ${t} - enter`,ft.ID);const{query:r,remote:n,schema:i}=await this.ensure(),{data:a}=await r({query:e?i.IssueWithComments:i.Issue,variables:{owner:n.owner,name:n.repositoryName,number:t}});return P.debug(`Fetch issue ${t} - done`,ft.ID),new Ar(this,n,Kh(a,this))}catch(r){P.appendLine(`GithubRepository> Unable to fetch PR: ${r}`);return}}async listBranches(t,e){const{octokit:r}=await this.ensure();P.debug(`List branches for ${t}/${e} - enter`,ft.ID);try{let n=[];const i=new Date().getTime();for await(const a of r.paginate.iterator("GET /repos/:owner/:repo/branches",{owner:t,repo:e,per_page:100}))if(n.push(...a.data.map(o=>o.name)),new Date().getTime()-i>5e3)break;return P.debug(`List branches for ${t}/${e} - done`,ft.ID),n}catch(n){throw P.debug(`List branches for ${t}/${e} failed`,ft.ID),n}}async deleteBranch(t){const{octokit:e}=await this.ensure();if(!!t.validatePullRequestModel("Unable to delete branch"))try{await e.git.deleteRef({owner:t.head.repositoryCloneUrl.owner,repo:t.head.repositoryCloneUrl.repositoryName,ref:`heads/${t.head.ref}`})}catch(r){P.appendLine(`GithubRepository> Unable to delete branch: ${r}`);return}}async getMentionableUsers(){P.debug("Fetch mentionable users - enter",ft.ID);const{query:t,remote:e,schema:r}=await this.ensure();let n=null,i=!1;const a=[];do try{const o=await t({query:r.GetMentionableUsers,variables:{owner:e.owner,name:e.repositoryName,first:100,after:n}});a.push(...o.data.repository.mentionableUsers.nodes.map(m=>({login:m.login,avatarUrl:m.avatarUrl,name:m.name,url:m.url,email:m.email}))),i=o.data.repository.mentionableUsers.pageInfo.hasNextPage,n=o.data.repository.mentionableUsers.pageInfo.endCursor}catch(o){return P.debug(`Unable to fetch mentionable users: ${o}`,ft.ID),a}while(i);return a}async getAssignableUsers(){P.debug("Fetch assignable users - enter",ft.ID);const{query:t,remote:e,schema:r}=await this.ensure();let n=null,i=!1;const a=[];do try{const o=await t({query:r.GetAssignableUsers,variables:{owner:e.owner,name:e.repositoryName,first:100,after:n}});a.push(...o.data.repository.assignableUsers.nodes.map(m=>({login:m.login,avatarUrl:m.avatarUrl,name:m.name,url:m.url,email:m.email}))),i=o.data.repository.assignableUsers.pageInfo.hasNextPage,n=o.data.repository.assignableUsers.pageInfo.endCursor}catch(o){return P.debug(`Unable to fetch assignable users: ${o}`,ft.ID),o.graphQLErrors&&o.graphQLErrors.length>0&&o.graphQLErrors[0].type==="INSUFFICIENT_SCOPES"&&d.window.showWarningMessage(`GitHub user features will not work. ${o.graphQLErrors[0].message}`),a}while(i);return a}async compareCommits(t,e){const{remote:r,octokit:n}=await this.ensure(),{data:i}=await n.repos.compareCommits({repo:r.repositoryName,owner:r.owner,base:t,head:e});return i}isCurrentUser(t){return this._credentialStore.isCurrentUser(t)}};let qc=ft;On(qc,"ID","GitHubRepository");var $f=Object.defineProperty,Gf=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?$f(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Mh="github-pr-remote",Fh="github-pr-owner-number",Lh=/branch\.(.+)\.github-pr-owner-number/,Hf=/branch\.(.+)\.remote/,Wt=class{static async checkoutFromFork(t,e,r){const n=await Wt.calculateUniqueBranchNameForPR(t,e);r||(P.appendLine(`Branch ${n} is from a fork. Create a remote first.`,Wt.ID),r=await Wt.createRemote(t,e.remote,e.head.repositoryCloneUrl));const i=`${e.head.ref}:${n}`;P.debug(`Fetch ${r}/${e.head.ref}:${n} - start`,Wt.ID),await t.fetch(r,i,1),P.debug(`Fetch ${r}/${e.head.ref}:${n} - done`,Wt.ID),await t.checkout(n),await t.setBranchUpstream(n,`refs/remotes/${r}/${e.head.ref}`),await this.unshallow(t),Wt.associateBranchWithPullRequest(t,e,n)}static async fetchAndCheckout(t,e,r){var n;if(!r.validatePullRequestModel("Checkout pull request failed"))return;const i=Wt.getHeadRemoteForPullRequest(e,r),a=r.head.repositoryCloneUrl.owner!==r.base.repositoryCloneUrl.owner;if(!i||a)return Wt.checkoutFromFork(t,r,i&&i.remoteName);const o=r.head.ref,m=i.remoteName;let S;try{if(S=await t.getBranch(o),((n=t.state.HEAD)==null?void 0:n.name)===S.name){P.appendLine(`Tried to checkout ${o}, but branch is already checked out.`,Wt.ID);return}if(P.debug(`Checkout ${o}`,Wt.ID),await t.checkout(o),!S.upstream){const T=`refs/remotes/${m}/${o}`;await t.setBranchUpstream(o,T)}S.behind!==void 0&&S.behind>0&&S.ahead===0&&(P.debug("Pull from upstream",Wt.ID),await t.pull())}catch(T){P.appendLine(`Branch ${m}/${o} doesn't exist on local disk yet.`,Wt.ID);const A=`refs/remotes/${m}/${o}`;P.appendLine(`Fetch tracked branch ${A}`,Wt.ID),await t.fetch(m,o,1);const H=await t.getBranch(A);await t.createBranch(o,!0,H.commit),await t.setBranchUpstream(o,A),await this.unshallow(t)}await Wt.associateBranchWithPullRequest(t,r,o)}static async unshallow(t){try{await t.pull(!0)}catch(e){P.appendLine(`Unshallowing failed: ${e}. Falling back to git pull`),await t.pull()}}static async checkoutExistingPullRequestBranch(t,e){const r=Wt.buildPullRequestMetadata(e),n=await t.getConfigs(),i=o=>n.filter(({key:m})=>o===m).map(({value:m})=>m)[0],a=n.map(o=>{const m=Lh.exec(o.key);return{branch:m&&m.length?m[1]:null,value:o.value}}).filter(o=>o.branch&&o.value===r);if(a&&a.length){const o=a[0].branch;await t.checkout(o);const m=i(`branch.${o}.remote`),S=i(`branch.${o}.merge`);await t.fetch(m,S);const T=await t.getBranch(a[0].branch);return T.behind!==void 0&&T.behind>0&&T.ahead===0&&(P.debug("Pull from upstream",Wt.ID),await t.pull()),!0}else return!1}static async getBranchNRemoteForPullRequest(t,e){const r=Wt.buildPullRequestMetadata(e),n=await t.getConfigs(),i=n.map(a=>{const o=Lh.exec(a.key);return{branch:o&&o.length?o[1]:null,value:a.value}}).find(a=>!!a.branch&&a.value===r);if(i){const a=i.branch;try{const o=`branch.${a}.remote`,m=n.filter(H=>H.key===o).map(H=>H.value);let S;m.length&&(S=m[0]);let T=!1;if(S){const H=`remote.${S}.github-pr-remote`;n.filter(pe=>pe.key===H&&pe.value).length&&(T=!0)}let A;return T&&(A=n.some(H=>!!(Hf.exec(H.key)&&H.key!==`branch.${a}.remote`&&H.value===S))),{branch:a,remote:S,createdForPullRequest:T,remoteInUse:A}}catch(o){return{branch:a}}}return null}static buildPullRequestMetadata(t){return`${t.base.repositoryCloneUrl.owner}#${t.base.repositoryCloneUrl.repositoryName}#${t.number}`}static parsePullRequestMetadata(t){if(t){const e=/(.*)#(.*)#(.*)/g.exec(t);if(e&&e.length===4){const[,r,n,i]=e;return{owner:r,repositoryName:n,prNumber:Number(i)}}}}static getMetadataKeyForBranch(t){return`branch.${t}.${Fh}`}static async getMatchingPullRequestMetadataForBranch(t,e){try{const r=this.getMetadataKeyForBranch(e),n=await t.getConfig(r);return Wt.parsePullRequestMetadata(n)}catch(r){return}}static async createRemote(t,e,r){P.appendLine(`create remote for ${r}.`,Wt.ID);const n=Ks(t);for(const a of n)if(new Bn(a.url).equals(r))return a.remoteName;const i=Wt.getUniqueRemoteName(t,r.owner);return r.update({type:e.gitProtocol.type}),await t.addRemote(i,r.toString()),await t.setConfig(`remote.${i}.${Mh}`,"true"),i}static async isRemoteCreatedForPullRequest(t,e){try{P.debug(`Check if remote '${e}' is created for pull request - start`,Wt.ID);const r=await t.getConfig(`remote.${e}.${Mh}`);return P.debug(`Check if remote '${e}' is created for pull request - end`,Wt.ID),r==="true"}catch(r){return!1}}static async calculateUniqueBranchNameForPR(t,e){const r=`pr/${e.author.login}/${e.number}`;let n=r,i=1;for(;;)try{await t.getBranch(n),n=`${r}-${i++}`}catch(a){break}return n}static getUniqueRemoteName(t,e){let r=e,n=1;const i=Ks(t);for(;i.find(a=>a.remoteName===r);)r=`${e}${n++}`;return r}static getHeadRemoteForPullRequest(t,e){return t.find(r=>r.gitProtocol&&r.gitProtocol.equals(e.head.repositoryCloneUrl))}static async associateBranchWithPullRequest(t,e,r){P.appendLine(`associate ${r} with Pull Request #${e.number}`,Wt.ID);const n=`branch.${r}.${Fh}`;await t.setConfig(n,Wt.buildPullRequestMetadata(e))}};let xn=Wt;Gf(xn,"ID","PullRequestGitHelper");var Vf=Object.defineProperty,Ut=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Vf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Bf extends Error{constructor(e){super();this.repository=e}get message(){return`${this.repository.rootUri.toString()} has no GitHub remotes`}}class qh extends Error{constructor(e){super();this.repository=e}get message(){return`${this.repository.rootUri.toString()} has a detached HEAD (create a branch first)`}}class jf extends Error{constructor(e,r,n){super();this.branchName=e,this.upstreamRef=r,this.problem=n}get message(){const{upstreamRef:{remote:e,name:r},branchName:n,problem:i}=this;return`The upstream ref ${e}/${r} for branch ${n} ${i}.`}}const Br="githubPullRequests",za="remotes",Uh="ReposManagerStateContext";var _n;(function(t){t.Initializing="Initializing",t.NeedsAuthentication="NeedsAuthentication",t.RepositoriesLoaded="RepositoriesLoaded"})(_n||(_n={}));const $h="No Milestone";var Gh;(function(t){t[t.PullRequest=0]="PullRequest",t[t.Milestones=1]="Milestones",t[t.IssuesWithoutMilestone=2]="IssuesWithoutMilestone",t[t.IssueSearch=3]="IssueSearch"})(Gh||(Gh={}));const En=class{constructor(t,e,r,n,i,a){this.context=t,this._repository=e,this.telemetry=r,this._git=n,this._credentialStore=i,this._sessionState=a,Ut(this,"_subs"),Ut(this,"_activePullRequest"),Ut(this,"_activeIssue"),Ut(this,"_githubRepositories"),Ut(this,"_allGitHubRemotes",[]),Ut(this,"_mentionableUsers"),Ut(this,"_fetchMentionableUsersPromise"),Ut(this,"_assignableUsers"),Ut(this,"_fetchAssignableUsersPromise"),Ut(this,"_gitBlameCache",{}),Ut(this,"_githubManager"),Ut(this,"_repositoryPageInformation",new Map),Ut(this,"_onDidMergePullRequest",new d.EventEmitter),Ut(this,"onDidMergePullRequest",this._onDidMergePullRequest.event),Ut(this,"_onDidChangeActivePullRequest",new d.EventEmitter),Ut(this,"onDidChangeActivePullRequest",this._onDidChangeActivePullRequest.event),Ut(this,"_onDidChangeActiveIssue",new d.EventEmitter),Ut(this,"onDidChangeActiveIssue",this._onDidChangeActiveIssue.event),Ut(this,"_onDidLoadRepositories",new d.EventEmitter),Ut(this,"onDidLoadRepositories",this._onDidLoadRepositories.event),Ut(this,"_onDidChangeRepositories",new d.EventEmitter),Ut(this,"onDidChangeRepositories",this._onDidChangeRepositories.event),Ut(this,"_onDidChangeAssignableUsers",new d.EventEmitter),Ut(this,"onDidChangeAssignableUsers",this._onDidChangeAssignableUsers.event),Ut(this,"_updatingRepositories"),Ut(this,"totalFetchedPages",new Map),this._subs=[],this._githubRepositories=[],this._githubManager=new Rc,this._subs.push(d.workspace.onDidChangeConfiguration(async o=>{o.affectsConfiguration(`${Br}.${za}`)&&await this.updateRepositories()})),this._subs.push(i.onDidInitialize(()=>this.updateRepositories())),this.setUpCompletionItemProvider(),this.cleanStoredRepoState()}cleanStoredRepoState(){const t=new Date().valueOf()-30*864e5,e=this.context.globalState.get(Va);if(e==null?void 0:e.repos){let r=!1;Object.keys(e.repos).forEach(n=>{var i;((i=e.repos[n].stateModifiedTime)!=null?i:0)<t&&(r=!0,delete e.repos[n])}),r&&this.context.globalState.update(Va,e)}}get gitHubRepositories(){return this._githubRepositories}computeAllGitHubRemotes(){const e=Ks(this.repository).filter(r=>r.host);return Promise.all(e.map(r=>this._githubManager.isGitHub(r.gitProtocol.normalizeUri()))).then(r=>e.filter((n,i,a)=>r[i])).catch(r=>(P.appendLine(`Resolving GitHub remotes failed: ${r}`),d.window.showErrorMessage(`Resolving GitHub remotes failed: ${ke(r)}`),[]))}async getActiveGitHubRemotes(t){const e=d.workspace.getConfiguration(Br).get(za);if(!e)return P.appendLine("Unable to read remotes setting"),Promise.resolve([]);const r=e.filter(n=>!t.some(i=>i.remoteName===n));return r.length===e.length?P.appendLine(`No remotes found. The following remotes are missing: ${r.join(", ")}`):P.debug(`Not all remotes found. The following remotes are missing: ${r.join(", ")}`,En.ID),P.debug(`Displaying configured remotes: ${e.join(", ")}`,En.ID),e.map(n=>t.find(i=>i.remoteName===n)).filter(n=>!!n)}setUpCompletionItemProvider(){let t,e=[],r=[];d.languages.registerCompletionItemProvider({scheme:"comment"},{provideCompletionItems:async(n,i,a)=>{try{const o=JSON.parse(n.uri.query);if(rr(o.extensionId,Vn)!==0)return;const m=n.getWordRangeAtPosition(i,/@([a-z\d](?:[a-z\d]|-(?=[a-z\d])){0,38})?/i);if(!m||m.isEmpty)return;let S=[];const T={};let A={},H,Y;const pe=d.window.visibleTextEditors;if(pe.length){const $e=pe.find(Ue=>Ue.document.uri.scheme==="pr");if($e){const Ue=Dr($e.document.uri);H=Ue.prNumber,Y=Ue.remoteName}else this._activePullRequest&&(H=this._activePullRequest.number,Y=this._activePullRequest.remote.remoteName);if(t&&H&&H===t.number)return r}const me=new Promise(async $e=>{if(H&&Y){if(P.debug("get Timeline Events and parse users",En.ID),t&&t.number===H)return e;const Ue=this._githubRepositories.find(We=>We.remote.remoteName===Y);Ue&&(t=await Ue.getPullRequest(H),e=await t.getTimelineEvents()),S=rg(e),$e()}$e()}),be=new Promise(async $e=>{if(pe.length)try{P.debug("git blame and parse users",En.ID);const Ue=$.resolve(pe[0].document.uri.fsPath);let We;this._gitBlameCache[Ue]?We=this._gitBlameCache[Ue]:(We=await this.repository.blame(Ue),this._gitBlameCache[Ue]=We);const It=We.split(`
`);for(const Dt of It){const Kt=/^\w{11} \S*\s*\((.*)\s*\d{4}\-/.exec(Dt);if(Kt&&Kt.length===2){const xt=Kt[1].trim();T[xt]=!0}}}catch(Ue){P.debug(Ue,En.ID)}$e()}),Ne=new Promise(async $e=>{P.debug("get mentionable users",En.ID),A=await this.getMentionableUsers(),$e()});await Promise.all([me,be,Ne]),r=[];const Ae={};P.debug("prepare user suggestions",En.ID),S.forEach($e=>{Ae[$e.login]||(Ae[$e.login]=$e)});const Ge={};for(const $e in A)for(const Ue of A[$e])if(!Ae[Ue.login]&&!Ge[Ue.login]){Ge[Ue.login]=!0;let We=2;(T[Ue.login]||Ue.name&&T[Ue.name])&&(We=1),Ae[Ue.login]&&(We=0),r.push({label:Ue.login,insertText:Ue.login,filterText:`${Ue.login}`+(Ue.name&&Ue.name!==Ue.login?`_${Ue.name.toLowerCase().replace(" ","_")}`:""),sortText:`${We}_${Ue.login}`,detail:Ue.name,kind:d.CompletionItemKind.User,login:Ue.login,uri:this.repository.rootUri})}for(const $e in Ae)Ge[$e]||r.push({label:Ae[$e].login,insertText:`${Ae[$e].login}`,filterText:`${Ae[$e].login}`+(Ae[$e].name&&Ae[$e].name!==Ae[$e].login?`_${Ae[$e].name.toLowerCase().replace(" ","_")}`:""),sortText:`0_${Ae[$e].login}`,detail:Ae[$e].name,kind:d.CompletionItemKind.User,login:Ae[$e].login,uri:this.repository.rootUri});return P.debug("done",En.ID),r}catch(o){return[]}},resolveCompletionItem:async(n,i)=>{try{const a=await this.getPullRequestDefaults(),o=await this.resolveUser(a.owner,a.repo,typeof n.label=="string"?n.label:n.label.label);o&&(n.documentation=Ic(a,o))}catch(a){}return n}},"@")}get activeIssue(){return this._activeIssue}set activeIssue(t){this._activeIssue=t,this._onDidChangeActiveIssue.fire()}get activePullRequest(){return this._activePullRequest}set activePullRequest(t){this._activePullRequest&&(this._activePullRequest.isActive=!1),t&&(t.isActive=!0),this._activePullRequest=t,this._onDidChangeActivePullRequest.fire()}get repository(){return this._repository}set repository(t){this._repository=t}get credentialStore(){return this._credentialStore}async loginAndUpdate(){if(!this._credentialStore.isAnyAuthenticated()){const t=new Promise(e=>{const r=this.onDidChangeRepositories(()=>{r.dispose(),e()})});await this._credentialStore.login(Ot.github),await t}}async getActiveRemotes(){this._allGitHubRemotes=await this.computeAllGitHubRemotes();const t=await this.getActiveGitHubRemotes(this._allGitHubRemotes);return t.length?(await d.commands.executeCommand("setContext","github:hasGitHubRemotes",!0),P.appendLine("Found GitHub remote")):(await d.commands.executeCommand("setContext","github:hasGitHubRemotes",!1),P.appendLine("No GitHub remotes found")),t}async updateRepositories(t=!1){return this._updatingRepositories&&await this._updatingRepositories,this._updatingRepositories=this.doUpdateRepositories(t),this._updatingRepositories}async doUpdateRepositories(t){if(this._git.state==="uninitialized"){P.appendLine("Cannot updates repositories as git is uninitialized");return}const e=await this.getActiveRemotes(),r=this._credentialStore.isAuthenticated(Ot.github)||this._credentialStore.isAuthenticated(Ot["github-enterprise"]);d.commands.executeCommand("setContext","github:authenticated",r);const n=[],i=[];return e.filter(o=>this._credentialStore.isAuthenticated(o.authProviderId)).forEach(o=>{const m=this.createGitHubRepository(o,this._credentialStore);i.push(m.resolveRemote()),n.push(m)}),Promise.all(i).then(async o=>{if(o.some(T=>!T))return this._credentialStore.showSamlMessageAndAuth();const m=this._githubRepositories;this._githubRepositories=n,m.filter(T=>this._githubRepositories.indexOf(T)<0).forEach(T=>T.dispose());const S=m.length!==this._githubRepositories.length||!m.every(T=>this._githubRepositories.some(A=>A.remote.equals(T.remote)));if(this._githubRepositories.length&&S&&await this.checkIfMissingUpstream()){this.updateRepositories(t);return}this.activePullRequest&&this.getMentionableUsers(S,!0),this.getAssignableUsers(S),this._onDidLoadRepositories.fire(r||!e.length?_n.RepositoriesLoaded:_n.NeedsAuthentication),t||this._onDidChangeRepositories.fire()})}async checkIfMissingUpstream(){var t;try{const r=await(await this.getOrigin()).getMetadata();if(r.fork&&r.parent){const n=new Bn(r.parent.git_url);if(!this._githubRepositories.some(a=>a.remote.owner===n.owner&&a.remote.repositoryName===n.repositoryName)){const o=!this.repository.state.remotes.some(m=>m.name==="upstream")?"upstream":(t=r.parent.owner)==null?void 0:t.login;if(o)return this.gitHubRepositories[0].remote.gitProtocol.type===_a.SSH?await this.repository.addRemote(o,r.parent.git_url):await this.repository.addRemote(o,r.parent.clone_url),!0}}}catch(e){P.appendLine(`Missing upstream check failed: ${e}`)}return!1}getAllAssignableUsers(){if(this._assignableUsers){const t=[];return Object.keys(this._assignableUsers).forEach(e=>{t.push(...this._assignableUsers[e])}),t}}getMentionableUsersFromGlobalState(){P.appendLine("Trying to use globalState for mentionable users.");const t=this.context.globalState.get(Va);if(t){const e={};if(this._githubRepositories.every(n=>{var i;const a=`${n.remote.owner}/${n.remote.repositoryName}`;return t.repos[a]?(e[n.remote.repositoryName]=(i=t.repos[a].mentionableUsers)!=null?i:[],!0):!1}))return P.appendLine(`Using globalState mentionable users for ${Object.keys(e).length}.`),e}P.appendLine("No globalState for mentionable users.")}createFetchMentionableUsersPromise(){const t={};return new Promise(e=>{const r=this._githubRepositories.map(async n=>{const i=await n.getMentionableUsers();t[n.remote.remoteName]=i});Promise.all(r).then(()=>{this._mentionableUsers=t,this._fetchMentionableUsersPromise=void 0;const n=this.context.globalState.get(Va,{repos:{}});this._githubRepositories.forEach(i=>{const a=`${i.remote.owner}/${i.remote.repositoryName}`;n.repos[a]||(n.repos[a]={}),n.repos[a].mentionableUsers=t[i.remote.remoteName],n.repos[a].stateModifiedTime=new Date().valueOf()}),this.context.globalState.update(Va,n),e(t)})})}async getMentionableUsers(t,e){if(t&&delete this._mentionableUsers,this._mentionableUsers)return this._mentionableUsers;let r=this.getMentionableUsersFromGlobalState();return e&&!this._fetchMentionableUsersPromise&&r?r:this._fetchMentionableUsersPromise?this._fetchMentionableUsersPromise:(this._fetchMentionableUsersPromise=this.createFetchMentionableUsersPromise(),r!=null?r:this._fetchMentionableUsersPromise)}async getAssignableUsers(t){if(t&&delete this._assignableUsers,this._assignableUsers)return this._assignableUsers;if(!this._fetchAssignableUsersPromise){const e={},r=[];return this._fetchAssignableUsersPromise=new Promise(n=>{const i=this._githubRepositories.map(async a=>{const o=await a.getAssignableUsers();e[a.remote.remoteName]=o.sort(Xh),r.push(...o)});Promise.all(i).then(()=>{this._assignableUsers=e,this._fetchAssignableUsersPromise=void 0,n(e),this._onDidChangeAssignableUsers.fire(r)})})}return this._fetchAssignableUsersPromise}getGitHubRemotes(){const t=this._githubRepositories;return!t||!t.length?[]:t.map(e=>e.remote)}async getAllGitHubRemotes(){return await this.computeAllGitHubRemotes()}async getLocalPullRequests(){const t=this._githubRepositories;if(!t||!t.length)return[];const r=this.repository.state.refs.filter(n=>n.type===bt.Head&&n.name!==void 0).map(n=>n.name).map(async n=>{const i=await xn.getMatchingPullRequestMetadataForBranch(this.repository,n);if(i){const{owner:a,prNumber:o}=i,m=t.find(S=>S.remote.owner.toLocaleLowerCase()===a.toLocaleLowerCase());if(m){const S=await m.getPullRequest(o);if(S)return S.localBranchName=n,S}}return Promise.resolve(null)});return Promise.all(r).then(n=>n.filter(i=>i!==null))}async getLabels(t,e){const r=t?t.githubRepository:this._githubRepositories.find(S=>S.remote.owner===(e==null?void 0:e.owner)&&S.remote.repositoryName===(e==null?void 0:e.repo));if(!r)throw new Error("No matching repository found for getting labels.");const{remote:n,octokit:i}=await r.ensure();let a=!1,o=1,m=[];do{const S=await i.issues.listLabelsForRepo({owner:n.owner,repo:n.repositoryName,per_page:100,page:o});m=m.concat(S.data.map(T=>({name:T.name,color:T.color}))),m=m.sort((T,A)=>T.name.localeCompare(A.name)),a=!!S.headers.link&&S.headers.link.indexOf('rel="next"')>-1,o+=1}while(a);return m}async listBranches(t,e){if(this._githubRepositories.length)return this._githubRepositories[0].listBranches(t,e);throw new Error("No GitHub repositories found")}async deleteLocalPullRequest(t,e){if(!t.localBranchName)return;await this.repository.deleteBranch(t.localBranchName,e);let r;try{r=await this.repository.getConfig(`branch.${t.localBranchName}.remote`)}catch(i){}if(!r)return;await xn.isRemoteCreatedForPullRequest(this.repository,r)&&((await this.repository.getConfigs()).some(({key:o,value:m})=>/^branch.*\.remote$/.test(o)&&m===r)||await this.repository.removeRemote(r)),this.telemetry.sendTelemetryEvent("branch.delete")}async fetchPagedData(t={fetchNextPage:!1},e,r=0,n=dr.All,i){if(!this._githubRepositories||!this._githubRepositories.length)return{items:[],hasMorePages:!1,hasUnsearchedRepositories:!1};const a=()=>this.totalFetchedPages.get(e)||0,o=H=>this.totalFetchedPages.set(e,H);for(const H of this._githubRepositories){const Y=H.remote.url.toString()+e;this._repositoryPageInformation.get(Y)||this._repositoryPageInformation.set(Y,{pullRequestPage:0,hasMorePages:null})}let m=0;const S={hasMorePages:!1,items:[]},T=H=>{m++,H&&(S.items=S.items.concat(H.items),S.hasMorePages=H.hasMorePages)},A=this._githubRepositories.filter(H=>{const Y=this._repositoryPageInformation.get(H.remote.url.toString()+e);return Y&&(t.fetchNextPage===!1||Y.hasMorePages!==!1)});for(let H=0;H<A.length;H++){const Y=A[H],pe=Y.remote.url.toString()+e,me=this._repositoryPageInformation.get(pe),be=async Ne=>{switch(r){case 0:return n===dr.All?Y.getAllPullRequests(Ne):Y.getPullRequestsForCategory(i||"",Ne);case 1:return Y.getIssuesForUserByMilestone(me.pullRequestPage);case 2:return Y.getIssuesWithoutMilestone(me.pullRequestPage);case 3:return Y.getIssues(me.pullRequestPage,i)}};if(t.fetchNextPage?(me.pullRequestPage++,T(await be(me.pullRequestPage)),o(a()+1)):(me.pullRequestPage===0&&(me.pullRequestPage=1),(await Promise.all(Array.from({length:me.pullRequestPage}).map((Ae,Ge)=>be(Ge+1)))).forEach(Ae=>T(Ae))),me.hasMorePages=S.hasMorePages,S.items.length&&(t.fetchNextPage===!0||t.fetchNextPage===!1&&m>=a()))return a()===0&&o(m),{items:S.items,hasMorePages:me.hasMorePages,hasUnsearchedRepositories:H<A.length-1}}return{items:[],hasMorePages:!1,hasUnsearchedRepositories:!1}}async getPullRequests(t,e={fetchNextPage:!1},r){const n=t.toString()+(r||"");return this.fetchPagedData(e,n,0,t,r)}async getMilestones(t={fetchNextPage:!1},e=!1,r){const n=await this.fetchPagedData(t,"issuesKey",1,dr.All,r);if(e){const i=await this.fetchPagedData(t,"issuesKey",2,dr.All,r);n.items.push({milestone:{createdAt:new Date(0).toDateString(),id:"",title:$h},issues:i.items})}return n}async getIssues(t={fetchNextPage:!1},e){return this.fetchPagedData(t,"issuesKey",3,dr.All,e)}async getMaxIssue(){const t=await Promise.all(this._githubRepositories.map(r=>r.getMaxIssue()));let e=0;for(const r of t)r!==void 0&&(e=Math.max(e,r));return e}async getPullRequestTemplates(){const t=await d.workspace.findFiles(new d.RelativePattern(this._repository.rootUri,"{pull_request_template,PULL_REQUEST_TEMPLATE}.md")),e=await d.workspace.findFiles(new d.RelativePattern(this._repository.rootUri,"{docs,.github}/{pull_request_template,PULL_REQUEST_TEMPLATE}.md")),r=await d.workspace.findFiles(new d.RelativePattern(this._repository.rootUri,"PULL_REQUEST_TEMPLATE/*.md")),n=await d.workspace.findFiles(new d.RelativePattern(this._repository.rootUri,"{docs,.github}/PULL_REQUEST_TEMPLATE/*.md"));return[...t,...e,...r,...n]}async getPullRequestDefaults(t){var e;if(!t&&!this.repository.state.HEAD)throw new qh(this.repository);const r=await this.getOrigin(t),n=await r.getMetadata(),i=(e=d.workspace.getConfiguration(Br).inspect(za))==null?void 0:e.defaultValue,a=d.workspace.getConfiguration(Br).get(za),o=!a||(i==null?void 0:i.every((S,T)=>a[T]===S)),m=n.fork&&n.parent&&o?n.parent:await(this.findRepo(ta("upstream"))||r).getMetadata();return{owner:m.owner.login,repo:m.name,base:m.default_branch}}async getMetadata(t){const e=this.findRepo(ta(t));return e&&e.getMetadata()}async getHeadCommitMessage(){const{repository:t}=this;if(t.state.HEAD&&t.state.HEAD.commit){const{message:e}=await t.getCommit(t.state.HEAD.commit);return e}return""}async getTipCommitMessage(t){const{repository:e}=this,{commit:r}=await e.getBranch(t);if(r){const{message:n}=await e.getCommit(r);return n}return""}async getOrigin(t){if(!this._githubRepositories.length)throw new Bf(this.repository);const e=t?t.upstream:this.upstreamRef;if(e){const i=this.findRepo(ta(e.remote));if(!i){const a=(await this.getAllGitHubRemotes()).find(o=>o.remoteName===e.remote);if(a)return new qc(a,this._credentialStore,this.telemetry,this._sessionState);throw P.appendLine(`The remote '${e.remote}' is not a GitHub repository.`),new jf(this.repository.state.HEAD.name,e,"is not a GitHub repo")}return i}const[r,...n]=this._githubRepositories;return n.length&&(this.findRepo(ta("origin"))||this.findRepo(zf))||r}findRepo(t){return this._githubRepositories.filter(t)[0]}get upstreamRef(){const{HEAD:t}=this.repository.state;return t&&t.upstream}async createPullRequest(t){var e,r;const n=this._githubRepositories.find(i=>i.remote.owner===t.owner&&i.remote.repositoryName===t.repo);if(!n)throw new Error(`No matching repository ${t.repo} found for ${t.owner}`);try{const i=await n.createPullRequest(t),a=t.head.indexOf(":"),o=t.head.slice(a+1);return await xn.associateBranchWithPullRequest(this._repository,i,o),this.telemetry.sendTelemetryEvent("pr.create.success",{isDraft:(t.draft||"").toString()}),i}catch(i){if(i.message.indexOf("No commits between ")>-1){if((e=this._repository.state.HEAD)==null?void 0:e.ahead)return await d.window.showInformationMessage(`There are no commits between '${t.base}' and '${t.head}'.

Do you want to push your local commits and create the pull request?`,{modal:!0},"Push commits")==="Push commits"?(await this._repository.push(),this.createPullRequest(t)):void 0;if(this._repository.state.workingTreeChanges.length||this._repository.state.indexChanges.length)return await d.window.showInformationMessage(`There are no commits between '${t.base}' and '${t.head}'.

Do you want to commit your changes and create the pull request?`,{modal:!0},"Commit changes")==="Commit changes"?(await d.commands.executeCommand("git.commit"),await this._repository.push(),this.createPullRequest(t)):void 0}if(!((r=this._repository.state.HEAD)==null?void 0:r.upstream))return await d.window.showInformationMessage(`There is no upstream branch for '${t.base}'.

Do you want to publish it and create the pull request?`,{modal:!0},"Publish branch")==="Publish branch"?(await this._repository.push(n.remote.remoteName,t.base,!0),this.createPullRequest(t)):void 0;throw P.appendLine(`GitHubRepository> Creating pull requests failed: ${i}`),this.telemetry.sendTelemetryErrorEvent("pr.create.failure",{isDraft:(t.draft||"").toString()}),new Error(ke(i))}}async createIssue(t){try{const e=this._githubRepositories.find(a=>a.remote.owner===t.owner&&a.remote.repositoryName===t.repo);if(!e)throw new Error(`No matching repository ${t.repo} found for ${t.owner}`);await e.ensure();const{data:r}=await e.octokit.issues.create(t),n=Kf(r,e),i=new Ar(e,e.remote,n);return this.telemetry.sendTelemetryEvent("issue.create.success"),i}catch(e){P.appendLine(`GitHubRepository> Creating issue failed: ${e}`),this.telemetry.sendTelemetryErrorEvent("issue.create.failure"),d.window.showWarningMessage(`Creating issue failed: ${ke(e)}`)}}async assignIssue(t,e){try{const r=this._githubRepositories.find(i=>i.remote.owner===t.remote.owner&&i.remote.repositoryName===t.remote.repositoryName);if(!r)throw new Error(`No matching repository ${t.remote.repositoryName} found for ${t.remote.owner}`);await r.ensure();const n={assignees:[e],owner:t.remote.owner,repo:t.remote.repositoryName,issue_number:t.number};await r.octokit.issues.addAssignees(n),this.telemetry.sendTelemetryEvent("issue.assign.success")}catch(r){P.appendLine(`GitHubRepository> Assigning issue failed: ${r}`),this.telemetry.sendTelemetryErrorEvent("issue.assign.failure"),d.window.showWarningMessage(`Assigning issue failed: ${ke(r)}`)}}getCurrentUser(t){return Xi(this._credentialStore.getCurrentUser(t.githubRepository.remote.authProviderId),t.githubRepository)}async mergePullRequest(t,e,r,n){const{octokit:i,remote:a}=await t.githubRepository.ensure(),o=this.activePullRequest&&this.activePullRequest.head&&this.activePullRequest.head.sha,m=this.repository.state.HEAD&&this.repository.state.HEAD.commit,S=t.head&&t.head.sha,T=this.repository.state.workingTreeChanges.length>0;if(o===S){if(m!==S){const{ahead:A}=this.repository.state.HEAD;if(A&&await d.window.showWarningMessage(`You have ${A} unpushed ${A>1?"commits":"commit"} on this PR branch.

Would you like to proceed anyway?`,{modal:!0},"Yes")===void 0)return{merged:!1,message:"unpushed changes"}}if(T&&await d.window.showWarningMessage(`You have uncommitted changes on this PR branch.

 Would you like to proceed anyway?`,{modal:!0},"Yes")===void 0)return{merged:!1,message:"uncommitted changes"}}return await i.pulls.merge({commit_message:r,commit_title:e,merge_method:n||d.workspace.getConfiguration("githubPullRequests").get("defaultMergeMethod"),owner:a.owner,repo:a.repositoryName,pull_number:t.number}).then(A=>(this.telemetry.sendTelemetryEvent("pr.merge.success"),this._onDidMergePullRequest.fire(),A.data)).catch(A=>{throw this.telemetry.sendTelemetryErrorEvent("pr.merge.failure"),A})}async deleteBranch(t){await t.githubRepository.deleteBranch(t)}async getBranchDeletionItems(){const t=await this.repository.getConfigs(),e=new Map;t.forEach(i=>{const a=i.key,o=/^branch\.(.*)\.(.*)$/.exec(a);if(o&&o.length===3){const m=o[1];e.has(m)||e.set(m,{});const S=e.get(m);if(o[2]==="remote"&&(S.remote=i.value),o[2]==="github-pr-owner-number"){const T=xn.parsePullRequestMetadata(i.value);S.metadata=T}e.set(m,S)}});const r=[];e.forEach((i,a)=>{if(i.metadata){const o=this.activePullRequest&&this.activePullRequest.base.repositoryCloneUrl;(o?o.owner===i.metadata.owner&&o.repositoryName===i.metadata.repositoryName&&this.activePullRequest&&this.activePullRequest.number===i.metadata.prNumber:!1)||r.push({label:`${a}`,description:`${i.metadata.repositoryName}/${i.metadata.owner} #${i.metadata.prNumber}`,picked:!1,metadata:i.metadata})}});const n=await Promise.all(r.map(async i=>{const a=i.metadata,o=this._githubRepositories.find(A=>A.remote.owner.toLowerCase()===a.owner.toLowerCase()&&A.remote.repositoryName.toLowerCase()===a.repositoryName.toLowerCase());if(!o)return i;const{remote:m,query:S,schema:T}=await o.ensure();try{const{data:A}=await S({query:T.PullRequestState,variables:{owner:m.owner,name:m.repositoryName,number:a.prNumber}});i.legacy=A.repository.pullRequest.state!=="OPEN"}catch{}return i}));return n.forEach(i=>{i.legacy?i.picked=!0:i.description=`${i.description} is still Open`}),n}async getRemoteDeletionItems(){const t=await this.repository.getConfigs(),e=new Map;t.forEach(n=>{const i=n.key;let a=/^branch\.(.*)\.(.*)$/.exec(i);if(a&&a.length===3){const o=a[1];if(a[2]==="remote"){const m=n.value;e.has(m)||e.set(m,{branches:new Set}),e.get(m).branches.add(o)}}if(a=/^remote\.(.*)\.(.*)$/.exec(i),a&&a.length===3){const o=a[1];e.has(o)||e.set(o,{branches:new Set});const m=e.get(o);a[2]==="github-pr-remote"&&(m.createdForPullRequest=n.value==="true"),a[2]==="url"&&(m.url=n.value)}});const r=[];return e.forEach((n,i)=>{if(n.branches.size===0){let a=n.createdForPullRequest?"":"Not created by GitHub Pull Request extension";n.url&&(a=a?a+" "+n.url:n.url),r.push({label:i,description:a,picked:n.createdForPullRequest,remote:i})}}),r}async deleteLocalBranchesNRemotes(){return new Promise(async t=>{const e=d.window.createQuickPick();e.canSelectMany=!0,e.ignoreFocusOut=!0,e.placeholder="Choose local branches you want to delete permanently",e.show(),e.busy=!0;const r=await this.getBranchDeletionItems();e.items=r,e.selectedItems=r.filter(i=>i.picked),e.busy=!1;let n=!0;e.onDidAccept(async()=>{if(n){const i=e.selectedItems;if(i.length){e.busy=!0;try{await Promise.all(i.map(async o=>{await this.repository.deleteBranch(o.label,!0)})),e.busy=!1}catch(o){e.hide(),d.window.showErrorMessage(`Deleting branches failed: ${o}`)}}n=!1,e.busy=!0;const a=await this.getRemoteDeletionItems();a?(e.placeholder="Choose remotes you want to delete permanently",e.busy=!1,e.items=a,e.selectedItems=a.filter(o=>o.picked)):e.hide()}else{const i=e.selectedItems;i.length&&(e.busy=!0,await Promise.all(i.map(async a=>{await this.repository.removeRemote(a.label)})),e.busy=!1),e.hide()}}),e.onDidHide(()=>{t()})})}async getPullRequestRepositoryDefaultBranch(t){return await t.githubRepository.getDefaultBranch()}async getPullRequestRepositoryAccessAndMergeMethods(t){return await t.githubRepository.getRepoAccessAndMergeMethods()}async fulfillPullRequestMissingInfo(t){try{if(!t.isResolved())return;P.debug("Fulfill pull request missing info - start",En.ID);const e=t.githubRepository,{octokit:r,remote:n}=await e.ensure();if(!t.base){const{data:i}=await r.pulls.get({owner:n.owner,repo:n.repositoryName,pull_number:t.number});t.update(ws(i,e))}if(!t.mergeBase){const{data:i}=await r.repos.compareCommits({repo:n.repositoryName,owner:n.owner,base:`${t.base.repositoryCloneUrl.owner}:${t.base.ref}`,head:`${t.head.repositoryCloneUrl.owner}:${t.head.ref}`});t.mergeBase=i.merge_base_commit.sha}}catch(e){d.window.showErrorMessage(`Fetching Pull Request merge base failed: ${ke(e)}`)}P.debug("Fulfill pull request missing info - done",En.ID)}async resolveItem(t,e){let r=this._githubRepositories.find(n=>n.remote.owner.toLowerCase()===t.toLowerCase()&&n.remote.repositoryName.toLowerCase()===e.toLowerCase());return r||(r=this.createGitHubRepositoryFromOwnerName(t,e)),r}async resolvePullRequest(t,e,r){const n=await this.resolveItem(t,e);if(n)return n.getPullRequest(r)}async resolveIssue(t,e,r,n=!1){const i=await this.resolveItem(t,e);if(i)return i.getIssue(r,n)}async resolveUser(t,e,r){P.debug(`Fetch user ${r}`,En.ID);const n=this.createGitHubRepositoryFromOwnerName(t,e),{query:i,schema:a}=await n.ensure();try{const{data:o}=await i({query:a.GetUser,variables:{login:r}});return eg(o,n)}catch(o){o.message.startsWith("GraphQL error: Could not resolve to a User with the login of")||P.appendLine(o.message)}}async getMatchingPullRequestMetadataForBranch(){return!this.repository||!this.repository.state.HEAD||!this.repository.state.HEAD.name?null:await xn.getMatchingPullRequestMetadataForBranch(this.repository,this.repository.state.HEAD.name)}async getMatchingPullRequestMetadataFromGitHub(){if(!this.repository||!this.repository.state.HEAD||!this.repository.state.HEAD.name||!this.repository.state.HEAD.upstream)return null;for(const t of this.gitHubRepositories)if(t.remote.remoteName===this.repository.state.HEAD.upstream.remote){const e=await t.getPullRequestForBranch(this.repository.state.HEAD.upstream.name);if(e&&e.length>0)return{owner:t.remote.owner,repositoryName:t.remote.repositoryName,prNumber:e[0].number,model:e[0]};break}return null}async checkoutExistingPullRequestBranch(t){return await xn.checkoutExistingPullRequestBranch(this.repository,t)}async getBranchNameForPullRequest(t){return await xn.getBranchNRemoteForPullRequest(this.repository,t)}async fetchAndCheckout(t){await xn.fetchAndCheckout(this.repository,this._allGitHubRemotes,t)}async checkout(t){return this.repository.checkout(t)}async fetchById(t,e){const r=await t.getPullRequest(e);if(r)return r;d.window.showErrorMessage(`Pull request number ${e} does not exist in ${t.remote.owner}/${t.remote.repositoryName}`,{modal:!0})}async checkoutDefaultBranch(t){var e;try{const r=await this.repository.getBranch(t);if(((e=this.repository.state.HEAD)==null?void 0:e.name)===r.name){d.window.showInformationMessage("The default branch is already checked out.");return}r.upstream&&t===r.upstream.name?await this.repository.checkout(t):await d.commands.executeCommand("git.checkout")}catch(r){if(r.gitErrorCode&&r.gitErrorCode===gr.DirtyWorkTree){d.window.showErrorMessage("Your local changes would be overwritten by checkout, please commit your changes or stash them before you switch branches");return}d.window.showErrorMessage(`Exiting failed: ${r}`)}}findExistingGitHubRepository(t){return this._githubRepositories.find(e=>e.remote.owner===t.owner&&e.remote.repositoryName===t.repositoryName&&(!t.remoteName||e.remote.remoteName===t.remoteName))}createAndAddGitHubRepository(t,e){const r=new qc(t,e,this.telemetry,this._sessionState);return this._githubRepositories.push(r),r}createGitHubRepository(t,e){var r;return(r=this.findExistingGitHubRepository(t))!=null?r:this.createAndAddGitHubRepository(t,e)}createGitHubRepositoryFromOwnerName(t,e){const r=this.findExistingGitHubRepository({owner:t,repositoryName:e});if(r)return r;const n=`https://github.com/${t}/${e}`;return this.createAndAddGitHubRepository(new Cc(e,n,new Bn(n)),this._credentialStore)}async findUpstreamForItem(t){let e,r;for(const i of this.gitHubRepositories){if(!e&&i.remote.owner===t.remote.owner&&i.remote.repositoryName===t.remote.repositoryName){e=i;continue}const a=await i.getRepositoryForkDetails();if(a&&a.isFork&&a.parent.owner.login===t.remote.owner&&a.parent.name===t.remote.repositoryName){const o=await i.getViewerPermission();if(o===Yr.Admin||o===Yr.Maintain||o===Yr.Write){r=i.remote;break}}}let n=!1;if(e&&!r){const i=await t.githubRepository.getViewerPermission();(i===Yr.Read||i===Yr.Triage||i===Yr.Unknown)&&(n=!0)}return{needsFork:n,upstream:e,remote:r}}async forkWithProgress(t,e,r,n){t.report({message:`Forking ${r}...`});const i=await e.fork();if(t.report({increment:50}),!i){d.window.showErrorMessage(`Unable to create a fork of ${r}. Check that your GitHub credentials are correct.`);return}const a=n.state.remotes.length>1?"origin":n.state.remotes[0].name;return t.report({message:"Adding remotes. This may take a few moments."}),await n.renameRemote(a,"upstream"),await n.addRemote(a,i),await new Promise(o=>{if(this.gitHubRepositories.length===0){const m=this.onDidChangeRepositories(()=>{this.gitHubRepositories.length>0&&(m.dispose(),o())})}else o()}),t.report({increment:50}),a}async doFork(t,e,r){return d.window.withProgress({location:d.ProgressLocation.Notification,title:"Creating Fork"},async n=>{try{return this.forkWithProgress(n,t,e,r)}catch(i){d.window.showErrorMessage(`Creating fork failed: ${i}`)}})}async tryOfferToFork(t){const e=`${t.remote.owner}/${t.remote.repositoryName}`,r="Fork",n="Don't Fork";switch(await d.window.showInformationMessage(`You don't have permission to push to ${e}. Do you want to fork ${e}? This will modify your git remotes to set \`origin\` to the fork, and \`upstream\` to ${e}.`,{modal:!0},r,n)){case r:return this.doFork(t,e,this.repository);case n:return!1;default:return}}dispose(){this._subs.forEach(t=>t.dispose())}};let ea=En;Ut(ea,"ID","FolderRepositoryManager");function uy(t){switch(t){case"committed":return EventType.Committed;case"mentioned":return EventType.Mentioned;case"subscribed":return EventType.Subscribed;case"commented":return EventType.Commented;case"reviewed":return EventType.Reviewed;default:return EventType.Other}}const zf=t=>{const{currentUser:e=null}=t.octokit;return e&&t.remote.owner===e.login},ta=t=>({remote:{remoteName:e}})=>e===t,Hh=t=>{const e=t.indexOf(`
`);return{title:e===-1?t:t.substr(0,e),body:e===-1?"":t.slice(e+1).trim()}};function Qa(t,e,r,n){const i=n.createCommentThread(t,e,[]);return i.gitHubThreadId=r.id,i.comments=r.comments.map(a=>new yr(a,i)),i.isResolved=r.isResolved,r.viewerCanResolve&&!r.isResolved?i.contextValue="canResolve":r.viewerCanUnresolve&&r.isResolved&&(i.contextValue="canUnresolve"),ra(i),i.collapsibleState=Vh(r.isResolved),i}const Ru="commentExpandState",ly="collapseAll",Uc="expandUnresolved";function Vh(t,e){var r;return t?d.CommentThreadCollapsibleState.Collapsed:(e===void 0&&(e=((r=d.workspace.getConfiguration(Br))==null?void 0:r.get(Ru))===Uc),e?d.CommentThreadCollapsibleState.Expanded:d.CommentThreadCollapsibleState.Collapsed)}function Cu(t,e,r){e.viewerCanResolve&&!e.isResolved?t.contextValue="canResolve":e.viewerCanUnresolve&&e.isResolved&&(t.contextValue="canUnresolve"),t.isResolved!==e.isResolved&&(t.isResolved=e.isResolved),t.collapsibleState=Vh(e.isResolved,r),t.comments=e.comments.map(n=>new yr(n,t)),ra(t)}function ra(t){if(t.isResolved){t.label="This thread has been marked as resolved";return}if(t.comments.length){const e=Se(t.comments,r=>r.author.name).map(r=>`@${r.author.name}`).join(", ");t.label=`Participants: ${e}`}else t.label="Start discussion"}function Qf(t){return Au().map(e=>{if(!t)return{label:e.label,authorHasReacted:!1,count:0,iconPath:e.icon||""};const r=t.find(n=>n.label===e.label);return r?{label:r.label,authorHasReacted:r.viewerHasReacted,count:r.count,iconPath:e.icon||""}:{label:e.label,authorHasReacted:!1,count:0,iconPath:e.icon||""}})}function Wf(t,e){t.reactions=Qf(e)}function Bh(t,e){e||(t.comments=t.comments.map(r=>(r instanceof yr&&(r._rawComment.isDraft=!1),r.label=void 0,r)))}function Xi(t,e){var r;return{login:t.login,url:t.html_url,avatarUrl:zc(t.avatar_url,(r=t.gravatar_id)!=null?r:void 0,e.remote.authProviderId)}}function jh(t){return{label:t.label,ref:t.ref,sha:t.sha,repo:{cloneUrl:t.repo.clone_url}}}function ws(t,e){const{number:r,body:n,title:i,html_url:a,user:o,state:m,assignees:S,created_at:T,updated_at:A,head:H,base:Y,labels:pe,node_id:me,id:be,draft:Ne}=t;return{id:be,graphNodeId:me,number:r,body:n!=null?n:"",title:i,url:a,user:Xi(o,e),state:m,merged:t.merged||!1,assignees:S?S.map(Ge=>Xi(Ge,e)):void 0,createdAt:T,updatedAt:A,head:jh(H),base:jh(Y),mergeable:t.mergeable?Tn.Mergeable:Tn.NotMergeable,labels:pe.map(Ge=>({name:"",color:"",...Ge})),isDraft:Ne,suggestedReviewers:[]}}function Kf(t,e){const{number:r,body:n,title:i,html_url:a,user:o,state:m,assignees:S,created_at:T,updated_at:A,labels:H,node_id:Y,id:pe}=t;return{id:pe,graphNodeId:Y,number:r,body:n!=null?n:"",title:i,url:a,user:Xi(o,e),state:m,assignees:S?S.map(be=>Xi(be,e)):void 0,createdAt:T,updatedAt:A,labels:H.map(be=>{var Ne,Ae;return typeof be=="string"?{name:be,color:""}:{name:(Ne=be.name)!=null?Ne:"",color:(Ae=be.color)!=null?Ae:""}}),suggestedReviewers:[]}}function Yf(t,e){return{event:sr.Reviewed,comments:[],submittedAt:t.submitted_at,body:t.body,bodyHTML:t.body,htmlUrl:t.html_url,user:Xi(t.user,e),authorAssociation:t.user.type,state:t.state,id:t.id}}function zh(t){const e=[],r=Ui(t.diffHunk);let n=r.next();for(;!n.done;){const i=n.value;e.push(i),n=r.next()}return e}function cy(t,e){var r;const n={url:t.url,id:t.id,pullRequestReviewId:(r=t.pull_request_review_id)!=null?r:void 0,diffHunk:t.diff_hunk,path:t.path,position:t.position,commitId:t.commit_id,originalPosition:t.original_position,originalCommitId:t.original_commit_id,user:Xi(t.user,e),body:t.body,createdAt:t.created_at,htmlUrl:t.html_url,inReplyToId:t.in_reply_to_id,graphNodeId:t.node_id},i=zh(n);return n.diffHunks=i,n}function Xf(t){switch(t){case"PullRequestCommit":return sr.Committed;case"LabeledEvent":return sr.Labeled;case"MilestonedEvent":return sr.Milestoned;case"AssignedEvent":return sr.Assigned;case"HeadRefDeletedEvent":return sr.HeadRefDeleted;case"IssueComment":return sr.Commented;case"PullRequestReview":return sr.Reviewed;case"MergedEvent":return sr.Merged;default:return sr.Other}}function Pu(t){return{id:t.id,isResolved:t.isResolved,viewerCanResolve:t.viewerCanResolve,viewerCanUnresolve:t.viewerCanUnresolve,path:t.path,line:t.line,originalLine:t.originalLine,diffSide:t.diffSide,isOutdated:t.isOutdated,comments:t.comments.nodes.map(e=>na(e,t.isResolved))}}function na(t,e){const r={id:t.databaseId,url:t.url,body:t.body,bodyHTML:t.bodyHTML,path:t.path,canEdit:t.viewerCanDelete,canDelete:t.viewerCanDelete,pullRequestReviewId:t.pullRequestReview&&t.pullRequestReview.databaseId,diffHunk:t.diffHunk,position:t.position,commitId:t.commit.oid,originalPosition:t.originalPosition,originalCommitId:t.originalCommit&&t.originalCommit.oid,user:t.author,createdAt:t.createdAt,htmlUrl:t.url,graphNodeId:t.id,isDraft:t.state==="PENDING",inReplyToId:t.replyTo&&t.replyTo.databaseId,reactions:Wh(t.reactionGroups),isResolved:e},n=zh(r);return r.diffHunks=n,r}function Qh(t){return{id:t.databaseId,url:t.url,body:t.body,bodyHTML:t.bodyHTML,canEdit:t.viewerCanDelete,canDelete:t.viewerCanDelete,user:t.author,createdAt:t.createdAt,htmlUrl:t.url,graphNodeId:t.id,diffHunk:""}}function Wh(t){const e=Au().reduce((n,i)=>(n[i.title]=i,n),{});return t.filter(n=>n.users.totalCount>0).map(n=>({label:e[n.content].label,count:n.users.totalCount,icon:e[n.content].icon,viewerHasReacted:n.viewerHasReacted}))}function Nu(t,e,r){if(!!r)return{label:`${r.owner.login}:${t}`,ref:t,sha:e,repo:{cloneUrl:r.url}}}function Mn(t,e){return t?{login:t.login,url:t.url,avatarUrl:zc(t.avatarUrl,void 0,e.remote.authProviderId),email:t.email}:{login:"",url:""}}function $c(t){if(!!t)return{title:t.title,dueOn:t.dueOn,createdAt:t.createdAt,id:t.id}}function Gc(t){switch(t){case"UNKNOWN":return Tn.Unknown;case"MERGEABLE":return Tn.Mergeable;case"CONFLICTING":return Tn.NotMergeable}}function Kh(t,e){var r,n,i,a,o,m;const S=t.repository.pullRequest;return{id:S.databaseId,graphNodeId:S.id,url:S.url,number:S.number,state:S.state,body:S.body,bodyHTML:S.bodyHTML,title:S.title,createdAt:S.createdAt,updatedAt:S.updatedAt,isRemoteHeadDeleted:!S.headRef,head:Nu((n=(r=S.headRef)==null?void 0:r.name)!=null?n:S.headRefName,S.headRefOid,S.headRepository),isRemoteBaseDeleted:!S.baseRef,base:Nu((a=(i=S.baseRef)==null?void 0:i.name)!=null?a:S.baseRefName,S.baseRefOid,S.baseRepository),user:Mn(S.author,e),merged:S.merged,mergeable:Gc(S.mergeable),labels:S.labels.nodes,isDraft:S.isDraft,suggestedReviewers:Yh(S.suggestedReviewers),comments:Jf((o=S.comments)==null?void 0:o.nodes,e),milestone:$c(S.milestone),assignees:(m=S.assignees)==null?void 0:m.nodes.map(T=>Mn(T,e))}}function Jf(t,e){if(!t)return;const r=[];for(const n of t)r.push({author:Mn(n.author,e),body:n.body,databaseId:n.databaseId});return r}function Hc(t,e){var r,n,i,a;return{id:t.databaseId,graphNodeId:t.id,url:t.url,number:t.number,state:t.state,body:t.body,bodyHTML:t.bodyHTML,title:t.title,createdAt:t.createdAt,updatedAt:t.updatedAt,assignees:(r=t.assignees)==null?void 0:r.nodes.map(o=>Mn(o,e)),user:Mn(t.author,e),labels:t.labels.nodes,repositoryName:(n=t.repository)==null?void 0:n.name,repositoryOwner:(i=t.repository)==null?void 0:i.owner.login,repositoryUrl:(a=t.repository)==null?void 0:a.url}}function dy(t,e){var r,n,i,a;const o=t;return{id:o.databaseId,graphNodeId:o.id,url:o.url,number:o.number,state:o.state,body:o.body,bodyHTML:o.bodyHTML,title:o.title,createdAt:o.createdAt,updatedAt:o.updatedAt,isRemoteHeadDeleted:!o.headRef,head:Nu((n=(r=o.headRef)==null?void 0:r.name)!=null?n:o.headRefName,o.headRefOid,o.headRepository),isRemoteBaseDeleted:!o.baseRef,base:Nu((a=(i=o.baseRef)==null?void 0:i.name)!=null?a:o.baseRefName,o.baseRefOid,o.baseRepository),user:Mn(o.author,e),merged:o.merged,mergeable:Gc(o.mergeable),labels:o.labels.nodes,isDraft:o.isDraft,suggestedReviewers:Yh(o.suggestedReviewers),milestone:$c(o.milestone)}}function Yh(t){return t?t.map(r=>({login:r.reviewer.login,avatarUrl:r.reviewer.avatarUrl,name:r.reviewer.name,url:r.reviewer.url,isAuthor:r.isAuthor,isCommenter:r.isCommenter})).sort(Xh):[]}function Xh(t,e){return t.login.localeCompare(e.login,"en",{sensitivity:"accent"})}function Zf(t,e){return{event:sr.Reviewed,comments:t.comments.nodes.map(r=>na(r,!1)).filter(r=>!r.inReplyToId),submittedAt:t.submittedAt,body:t.body,bodyHTML:t.bodyHTML,htmlUrl:t.url,user:Mn(t.author,e),authorAssociation:t.authorAssociation,state:t.state,id:t.databaseId}}function Jh(t,e){const r=[];return t.forEach(n=>{const i=Xf(n.__typename);switch(i){case sr.Commented:const a=n;r.push({htmlUrl:a.url,body:a.body,bodyHTML:a.bodyHTML,user:Mn(a.author,e),event:i,canEdit:a.viewerCanUpdate,canDelete:a.viewerCanDelete,id:a.databaseId,graphNodeId:a.id,createdAt:a.createdAt});return;case sr.Reviewed:const o=n;r.push({event:i,comments:[],submittedAt:o.submittedAt,body:o.body,bodyHTML:o.bodyHTML,htmlUrl:o.url,user:Mn(o.author,e),authorAssociation:o.authorAssociation,state:o.state,id:o.databaseId});return;case sr.Committed:const m=n;r.push({id:m.databaseId,event:i,sha:m.commit.oid,author:m.commit.author.user?Mn(m.commit.author.user,e):{login:m.commit.committer.name},htmlUrl:m.url,message:m.commit.message,authoredDate:new Date(m.commit.authoredDate)});return;case sr.Merged:const S=n;r.push({id:S.databaseId,event:i,user:Mn(S.actor,e),createdAt:S.createdAt,mergeRef:S.mergeRef.name,sha:S.commit.oid,commitUrl:S.commit.commitUrl,url:S.url,graphNodeId:S.id});return;case sr.Assigned:const T=n;r.push({id:T.databaseId,event:i,user:T.user,actor:T.actor});return;case sr.HeadRefDeleted:const A=n;r.push({id:A.id,event:i,actor:A.actor,createdAt:A.createdAt,headRef:A.headRefName});return;default:break}}),r}function eg(t,e){return{login:t.user.login,name:t.user.name,avatarUrl:t.user.avatarUrl?zc(t.user.avatarUrl,void 0,e.remote.authProviderId):void 0,url:t.user.url,bio:t.user.bio,company:t.user.company,location:t.user.location,commitContributions:tg(t.user.contributionsCollection)}}function tg(t){const e=[];return t.commitContributionsByRepository.forEach(r=>{r.contributions.nodes.forEach(n=>{e.push({createdAt:new Date(n.occurredAt),repoNameWithOwner:r.repository.nameWithOwner})})}),e}function Au(){return[{title:"THUMBS_UP",label:"\u{1F44D}",icon:dn.icons.reactions.THUMBS_UP},{title:"THUMBS_DOWN",label:"\u{1F44E}",icon:dn.icons.reactions.THUMBS_DOWN},{title:"LAUGH",label:"\u{1F604}",icon:dn.icons.reactions.LAUGH},{title:"HOORAY",label:"\u{1F389}",icon:dn.icons.reactions.HOORAY},{title:"CONFUSED",label:"\u{1F615}",icon:dn.icons.reactions.CONFUSED},{title:"HEART",label:"\u2764\uFE0F",icon:dn.icons.reactions.HEART},{title:"ROCKET",label:"\u{1F680}",icon:dn.icons.reactions.ROCKET},{title:"EYES",label:"\u{1F440}",icon:dn.icons.reactions.EYES}]}function rg(t){const e=[];return t.forEach(r=>{var n,i;cl(r)&&e.push({login:r.author.login,name:r.author.name||""}),Ds(r)&&e.push({login:r.user.login,name:(n=r.user.name)!=null?n:r.user.login}),dl(r)&&e.push({login:r.user.login,name:(i=r.user.name)!=null?i:r.user.login})}),e}function ng(t){return t&&t.repository.viewerPermission&&Object.values(Yr).includes(t.repository.viewerPermission)?t.repository.viewerPermission:Yr.Unknown}function Vc(t,e){for(const r of t.repositories)if(e.path.toLowerCase()===r.rootUri.path.toLowerCase()||e.path.toLowerCase().startsWith(r.rootUri.path.toLowerCase())&&e.path.substring(r.rootUri.path.length).startsWith("/"))return r}function Zh(t,e,r){const n=e.filter(Ds).filter(o=>o.state!=="PENDING");let i=[];const a=new Map;a.set(r.login,!0);for(let o=n.length-1;o>=0;o--){const m=n[o].user;a.get(m.login)||(a.set(m.login,!0),i.push({reviewer:m,state:n[o].state}))}return t.forEach(o=>{if(!a.get(o.login))i.push({reviewer:o,state:"REQUESTED"});else{const m=i.find(S=>S.reviewer.login===o.login);m.state="REQUESTED"}}),i=i.sort((o,m)=>o.state==="REQUESTED"&&m.state!=="REQUESTED"?1:m.state==="REQUESTED"&&o.state!=="REQUESTED"||o.reviewer.login.toLowerCase()<m.reviewer.login.toLowerCase()?-1:1),i}function ig(t,e,r){return`is:pull-request ${r.replace(/\$\{user\}/g,e)} type:pr repo:${t}`}function Bc(){return d.env.remoteName==="codespaces"&&d.env.uiKind===d.UIKind.Web}function jc(){const t=d.workspace.getConfiguration("github-enterprise").get("uri","");if(t)return d.Uri.parse(t,!0)}function Iu(){return!!jc()}function sg(t,e=200){return t?`https://www.gravatar.com/avatar/${t}?s=${e}&d=retro`:void 0}function zc(t,e,r){var n;return r===Ot.github?t:e?sg(Ea.createHash("md5").update((n=e==null?void 0:e.trim())==null?void 0:n.toLowerCase()).digest("hex")):void 0}var ag=Object.defineProperty,Tr=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?ag(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Du=class{constructor(t,e,r,n=!1){Tr(this,"id"),Tr(this,"graphNodeId"),Tr(this,"number"),Tr(this,"title"),Tr(this,"html_url"),Tr(this,"state",Qt.Open),Tr(this,"author"),Tr(this,"assignees"),Tr(this,"createdAt"),Tr(this,"updatedAt"),Tr(this,"milestone"),Tr(this,"githubRepository"),Tr(this,"remote"),Tr(this,"item"),Tr(this,"bodyHTML"),Tr(this,"_onDidInvalidate",new d.EventEmitter),Tr(this,"onDidInvalidate",this._onDidInvalidate.event),this.githubRepository=t,this.remote=e,this.item=r,n||this.update(r)}invalidate(){this._onDidInvalidate.fire()}get isOpen(){return this.state===Qt.Open}get isClosed(){return this.state===Qt.Closed}get userAvatar(){if(this.item)return this.item.user.avatarUrl}get userAvatarUri(){if(this.item){const t=this.userAvatar;if(t){const e=d.Uri.parse(`${t}&s=${64}`),r=e.toString;return e.toString=function(n){return r.call(e,!0)},e}}}get body(){return this.item?this.item.body:""}updateState(t){t.toLowerCase()==="open"?this.state=Qt.Open:this.state=Qt.Closed}update(t){this.id=t.id,this.graphNodeId=t.graphNodeId,this.number=t.number,this.title=t.title,this.bodyHTML=t.bodyHTML,this.html_url=t.url,this.author=t.user,this.milestone=t.milestone,this.createdAt=t.createdAt,this.updatedAt=t.updatedAt,this.updateState(t.state),t.assignees&&(this.assignees=t.assignees),this.item=t}equals(t){return!(!t||this.number!==t.number||this.html_url!==t.html_url)}async edit(t){try{const{mutate:e,schema:r}=await this.githubRepository.ensure(),{data:n}=await e({mutation:r.UpdatePullRequest,variables:{input:{pullRequestId:this.graphNodeId,body:t.body,title:t.title}}});return(n==null?void 0:n.updatePullRequest.pullRequest)&&(this.item.body=n.updatePullRequest.pullRequest.body,this.bodyHTML=n.updatePullRequest.pullRequest.bodyHTML,this.title=n.updatePullRequest.pullRequest.title,this.invalidate()),n.updatePullRequest.pullRequest}catch(e){throw new Error(ke(e))}}canEdit(){const t=this.author&&this.author.login;return this.githubRepository.isCurrentUser(t)}async getIssueComments(){P.debug(`Fetch issue comments of PR #${this.number} - enter`,Du.ID);const{octokit:t,remote:e}=await this.githubRepository.ensure(),r=await t.issues.listComments({owner:e.owner,repo:e.repositoryName,issue_number:this.number,per_page:100});return P.debug(`Fetch issue comments of PR #${this.number} - done`,Du.ID),r.data}async createIssueComment(t){const{mutate:e,schema:r}=await this.githubRepository.ensure(),{data:n}=await e({mutation:r.AddIssueComment,variables:{input:{subjectId:this.graphNodeId,body:t}}});return Qh(n.addComment.commentEdge.node)}async editIssueComment(t,e){try{const{mutate:r,schema:n}=await this.githubRepository.ensure(),{data:i}=await r({mutation:n.EditIssueComment,variables:{input:{id:t.graphNodeId,body:e}}});return Qh(i.updateIssueComment.issueComment)}catch(r){throw new Error(ke(r))}}async deleteIssueComment(t){try{const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.issues.deleteComment({owner:r.owner,repo:r.repositoryName,comment_id:Number(t)})}catch(e){throw new Error(ke(e))}}async addLabels(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.issues.addLabels({owner:r.owner,repo:r.repositoryName,issue_number:this.number,labels:t})}async removeLabel(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.issues.removeLabel({owner:r.owner,repo:r.repositoryName,issue_number:this.number,name:t})}async getIssueTimelineEvents(){P.debug(`Fetch timeline events of issue #${this.number} - enter`,Du.ID);const t=this.githubRepository,{query:e,remote:r,schema:n}=await t.ensure();try{const{data:i}=await e({query:n.IssueTimelineEvents,variables:{owner:r.owner,name:r.repositoryName,number:this.number}}),a=i.repository.pullRequest.timelineItems.nodes;return Jh(a,t)}catch(i){return console.log(i),[]}}};let Ar=Du;Tr(Ar,"ID","IssueModel");var og=Object.defineProperty,ur=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?og(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Fn=class extends Ar{constructor(t,e,r,n,i){super(e,r,n,!0);ur(this,"isDraft"),ur(this,"localBranchName"),ur(this,"mergeBase"),ur(this,"suggestedReviewers"),ur(this,"_hasPendingReview",!1),ur(this,"_onDidChangePendingReviewState",new d.EventEmitter),ur(this,"onDidChangePendingReviewState",this._onDidChangePendingReviewState.event),ur(this,"_reviewThreadsCache",[]),ur(this,"_reviewThreadsCacheInitialized",!1),ur(this,"_onDidChangeReviewThreads",new d.EventEmitter),ur(this,"onDidChangeReviewThreads",this._onDidChangeReviewThreads.event),ur(this,"fileChangeViewedState",{}),ur(this,"_onDidChangeFileViewedState",new d.EventEmitter),ur(this,"onDidChangeFileViewedState",this._onDidChangeFileViewedState.event),ur(this,"isActive"),ur(this,"_telemetry"),ur(this,"isRemoteHeadDeleted"),ur(this,"head"),ur(this,"isRemoteBaseDeleted"),ur(this,"base"),this._telemetry=t,this.isActive=!!i,this.update(n)}async initializeReviewThreadCache(){await this.getReviewThreads(),this._reviewThreadsCacheInitialized=!0}get reviewThreadsCache(){if(this._reviewThreadsCacheInitialized)return this._reviewThreadsCache;throw new Error("Cache has not been initialized yet")}get isMerged(){return this.state===Qt.Merged}get hasPendingReview(){return this._hasPendingReview}set hasPendingReview(t){this._hasPendingReview!==t&&(this._hasPendingReview=t,this._onDidChangePendingReviewState.fire(this._hasPendingReview))}updateState(t){t.toLowerCase()==="open"?this.state=Qt.Open:this.state=this.item.merged?Qt.Merged:Qt.Closed}update(t){super.update(t),this.isDraft=t.isDraft,this.suggestedReviewers=t.suggestedReviewers,t.isRemoteHeadDeleted!=null&&(this.isRemoteHeadDeleted=t.isRemoteHeadDeleted),t.head&&(this.head=new Eo(t.head.ref,t.head.label,t.head.sha,t.head.repo.cloneUrl)),t.isRemoteBaseDeleted!=null&&(this.isRemoteBaseDeleted=t.isRemoteBaseDeleted),t.base&&(this.base=new Eo(t.base.ref,t.base.label,t.base.sha,t.base.repo.cloneUrl))}isResolved(){return!!this.head}validatePullRequestModel(t){if(this.head)return!0;const e=`There is no upstream branch for Pull Request #${this.number}. View it on GitHub for more details`;return t?t+=`: ${e}`:t=e,d.window.showWarningMessage(t,"Open on GitHub").then(r=>{r&&r==="Open on GitHub"&&d.commands.executeCommand("vscode.open",d.Uri.parse(this.html_url))}),!1}async approve(t){return(await this.getPendingReviewId()?this.submitReview(kn.Approve,t):this.createReview(kn.Approve,t)).then(r=>(this._telemetry.sendTelemetryEvent("pr.approve"),r))}async requestChanges(t){return(await this.getPendingReviewId()?this.submitReview(kn.RequestChanges,t):this.createReview(kn.RequestChanges,t)).then(r=>(this._telemetry.sendTelemetryEvent("pr.requestChanges"),r))}async close(){const{octokit:t,remote:e}=await this.githubRepository.ensure(),r=await t.pulls.update({owner:e.owner,repo:e.repositoryName,pull_number:this.number,state:"closed"});return this._telemetry.sendTelemetryEvent("pr.close"),ws(r.data,this.githubRepository)}async createReview(t,e){const{octokit:r,remote:n}=await this.githubRepository.ensure(),{data:i}=await r.pulls.createReview({owner:n.owner,repo:n.repositoryName,pull_number:this.number,event:t,body:e});return Yf(i,this.githubRepository)}async submitReview(t,e){const r=await this.getPendingReviewId(),{mutate:n,schema:i}=await this.githubRepository.ensure();if(r){const{data:a}=await n({mutation:i.SubmitReview,variables:{id:r,event:t||kn.Comment,body:e}});this.hasPendingReview=!1,await this.updateDraftModeContext();const o=Zf(a.submitPullRequestReview.pullRequestReview,this.githubRepository),m=this._reviewThreadsCache.find(S=>S.comments.length?S.comments[0].pullRequestReviewId===o.id:void 0);return m&&(m.comments=o.comments,this._onDidChangeReviewThreads.fire({added:[],changed:[m],removed:[]})),o}else throw new Error(`Submitting review failed, no pending review for current pull request: ${this.number}.`)}async updateMilestone(t){const{mutate:e,schema:r}=await this.githubRepository.ensure(),n=t==="null"?null:t;try{await e({mutation:r.UpdatePullRequest,variables:{input:{pullRequestId:this.item.graphNodeId,milestoneId:n}}})}catch(i){P.appendLine(i)}}async updateAssignees(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.issues.addAssignees({owner:r.owner,repo:r.repositoryName,issue_number:this.number,assignees:t})}async getPendingReviewId(){const{query:t,schema:e}=await this.githubRepository.ensure(),r=await this.githubRepository.getAuthenticatedUser();try{const{data:n}=await t({query:e.GetPendingReviewId,variables:{pullRequestId:this.item.graphNodeId,author:r}});return n.node.reviews.nodes.length>0?n.node.reviews.nodes[0].id:void 0}catch(n){return}}async deleteReview(){const t=await this.getPendingReviewId(),{mutate:e,schema:r}=await this.githubRepository.ensure(),{data:n}=await e({mutation:r.DeleteReview,variables:{input:{pullRequestReviewId:t}}}),{comments:i,databaseId:a}=n.deletePullRequestReview.pullRequestReview;return this.hasPendingReview=!1,await this.updateDraftModeContext(),this.getReviewThreads(),{deletedReviewId:a,deletedReviewComments:i.nodes.map(o=>na(o,!1))}}async startReview(t){var e;const{mutate:r,schema:n}=await this.githubRepository.ensure(),{data:i}=await r({mutation:n.StartReview,variables:{input:{body:"",pullRequestId:this.item.graphNodeId,commitOID:t||((e=this.head)==null?void 0:e.sha)}}});if(!i)throw new Error("Failed to start review");return i.addPullRequestReview.pullRequestReview.id}async createReviewThread(t,e,r,n,i){if(!this.validatePullRequestModel("Creating comment failed"))return;const a=await this.getPendingReviewId(),{mutate:o,schema:m}=await this.githubRepository.ensure(),{data:S}=await o({mutation:m.AddReviewThread,variables:{input:{path:e,body:t,pullRequestId:this.graphNodeId,pullRequestReviewId:a,line:r,side:n}}});if(!S)throw new Error("Creating review thread failed.");i||(this.hasPendingReview=!0,await this.updateDraftModeContext());const T=S.addPullRequestReviewThread.thread,A=Pu(T);return this._reviewThreadsCache.push(A),this._onDidChangeReviewThreads.fire({added:[A],changed:[],removed:[]}),A}async createCommentReply(t,e,r,n){var i;if(!this.validatePullRequestModel("Creating comment failed"))return;let a=await this.getPendingReviewId();a||(a=await this.startReview(n));const{mutate:o,schema:m}=await this.githubRepository.ensure(),{data:S}=await o({mutation:m.AddComment,variables:{input:{pullRequestReviewId:a,body:t,inReplyTo:e,commitOID:n||((i=this.head)==null?void 0:i.sha)}}});if(!S)throw new Error("Creating comment reply failed.");const{comment:T}=S.addPullRequestReviewComment,A=na(T,!1);r&&(A.isDraft=!1);const H=this._reviewThreadsCache.find(Y=>Y.comments.some(pe=>pe.graphNodeId===e));return H&&(H.comments.push(A),this._onDidChangeReviewThreads.fire({added:[],changed:[H],removed:[]})),A}async validateDraftMode(){const t=!!await this.getPendingReviewId();return t!==this.hasPendingReview&&(this.hasPendingReview=t),await this.updateDraftModeContext(),t}async updateDraftModeContext(){this.isActive&&await d.commands.executeCommand("setContext","reviewInDraftMode",this.hasPendingReview)}async editReviewComment(t,e){const{mutate:r,schema:n}=await this.githubRepository.ensure();let i=this._reviewThreadsCache.find(m=>m.comments.some(S=>S.graphNodeId===t.graphNodeId));if(!i)return this.editIssueComment(t,e);const{data:a}=await r({mutation:n.EditComment,variables:{input:{pullRequestReviewCommentId:t.graphNodeId,body:e}}});if(!a)throw new Error("Editing review comment failed.");const o=na(a.updatePullRequestReviewComment.pullRequestReviewComment,!!t.isResolved);if(i){const m=i.comments.findIndex(S=>S.graphNodeId===t.graphNodeId);i.comments.splice(m,1,o),this._onDidChangeReviewThreads.fire({added:[],changed:[i],removed:[]})}return o}async deleteReviewComment(t){try{const{octokit:e,remote:r}=await this.githubRepository.ensure(),n=Number(t),i=this._reviewThreadsCache.findIndex(a=>a.comments.some(o=>o.id===n));if(i===-1)this.deleteIssueComment(t);else if(await e.pulls.deleteReviewComment({owner:r.owner,repo:r.repositoryName,comment_id:n}),i>-1){const a=this._reviewThreadsCache[i],o=a.comments.findIndex(m=>m.id===n);a.comments.splice(o,1),a.comments.length===0?(this._reviewThreadsCache.splice(i,1),this._onDidChangeReviewThreads.fire({added:[],changed:[],removed:[a]})):this._onDidChangeReviewThreads.fire({added:[],changed:[a],removed:[]})}}catch(e){throw new Error(ke(e))}}async getReviewRequests(){const t=this.githubRepository,{remote:e,octokit:r}=await t.ensure();return(await r.pulls.listRequestedReviewers({owner:e.owner,repo:e.repositoryName,pull_number:this.number})).data.users.map(i=>Xi(i,t))}async requestReview(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.pulls.requestReviewers({owner:r.owner,repo:r.repositoryName,pull_number:this.number,reviewers:t})}async deleteReviewRequest(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.pulls.removeRequestedReviewers({owner:r.owner,repo:r.repositoryName,pull_number:this.number,reviewers:[t]})}async deleteAssignees(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.issues.removeAssignees({owner:r.owner,repo:r.repositoryName,issue_number:this.number,assignees:[t]})}diffThreads(t){const e=[],r=[],n=[];t.forEach(i=>{const a=this._reviewThreadsCache.find(o=>o.id===i.id);a?pa()(i,a)||r.push(i):e.push(i)}),this._reviewThreadsCache.forEach(i=>{t.find(a=>a.id===i.id)||n.push(i)}),this._onDidChangeReviewThreads.fire({added:e,changed:r,removed:n})}async getReviewThreads(){const{remote:t,query:e,schema:r}=await this.githubRepository.ensure();try{const{data:n}=await e({query:r.PullRequestComments,variables:{owner:t.owner,name:t.repositoryName,number:this.number}}),i=n.repository.pullRequest.reviewThreads.nodes.map(a=>Pu(a));return this.diffThreads(i),this._reviewThreadsCache=i,i}catch(n){return P.appendLine(`Failed to get pull request review comments: ${n}`),[]}}async getReviewComments(){const{remote:t,query:e,schema:r}=await this.githubRepository.ensure();try{const{data:n}=await e({query:r.PullRequestComments,variables:{owner:t.owner,name:t.repositoryName,number:this.number}});return n.repository.pullRequest.reviewThreads.nodes.map(a=>a.comments.nodes.map(o=>na(o,a.isResolved),t)).reduce((a,o)=>a.concat(o),[]).sort((a,o)=>a.createdAt>o.createdAt?1:-1)}catch(n){return P.appendLine(`Failed to get pull request review comments: ${n}`),[]}}async getCommits(){try{P.debug(`Fetch commits of PR #${this.number} - enter`,Fn.ID);const{remote:t,octokit:e}=await this.githubRepository.ensure(),r=await e.pulls.listCommits({pull_number:this.number,owner:t.owner,repo:t.repositoryName});return P.debug(`Fetch commits of PR #${this.number} - done`,Fn.ID),r.data}catch(t){return d.window.showErrorMessage(`Fetching commits failed: ${ke(t)}`),[]}}async getCommitChangedFiles(t){var e,r;try{P.debug(`Fetch file changes of commit ${t.sha} in PR #${this.number} - enter`,Fn.ID);const{octokit:n,remote:i}=await this.githubRepository.ensure(),a=await n.repos.getCommit({owner:i.owner,repo:i.repositoryName,ref:t.sha});return P.debug(`Fetch file changes of commit ${t.sha} in PR #${this.number} - done`,Fn.ID),(r=(e=a.data.files)==null?void 0:e.filter(o=>!!o.patch))!=null?r:[]}catch(n){return d.window.showErrorMessage(`Fetching commit file changes failed: ${ke(n)}`),[]}}async getFile(t,e){var r;const{octokit:n,remote:i}=await this.githubRepository.ensure(),a=await n.repos.getContent({owner:i.owner,repo:i.repositoryName,path:t,ref:e});if(Array.isArray(a.data))throw new Error(`Unexpected array response when getting file ${t}`);const o=(r=a.data.content)!=null?r:"";return po.Buffer.from(o,a.data.encoding).toString()}async getTimelineEvents(){P.debug(`Fetch timeline events of PR #${this.number} - enter`,Fn.ID);const{query:t,remote:e,schema:r}=await this.githubRepository.ensure();try{const{data:n}=await t({query:r.TimelineEvents,variables:{owner:e.owner,name:e.repositoryName,number:this.number}}),i=n.repository.pullRequest.timelineItems.nodes,a=Jh(i,this.githubRepository);return await this.addReviewTimelineEventComments(a),a}catch(n){return console.log(n),[]}}async addReviewTimelineEventComments(t){const e=t.filter(Ds),n=(await this.getReviewThreads()).reduce((T,A)=>T.concat(A.comments),[]),i=e.reduce((T,A)=>(T[A.id]=A,A.comments=[],T),{}),a=n.reduce((T,A)=>(T[A.id]=A,T),{}),o=[];let m=n.length;for(;m-- >0;){const T=n[m];if(!T.inReplyToId){o.unshift(T);continue}const A=a[T.inReplyToId];A.childComments=A.childComments||[],A.childComments=[T,...T.childComments||[],...A.childComments]}o.forEach(T=>{const A=i[T.pullRequestReviewId];A&&(A.comments=A.comments.concat(T).concat(T.childComments||[]))});const S=e.filter(T=>T.state.toLowerCase()==="pending")[0];S&&(S.comments=n.filter(T=>T.isDraft))}async getStatusChecks(){var t;const{query:e,remote:r,schema:n}=await this.githubRepository.ensure();let i;try{i=await e({query:n.GetChecks,variables:{owner:r.owner,name:r.repositoryName,number:this.number}})}catch(o){if((t=o.message)==null?void 0:t.startsWith("GraphQL error: Resource protected by organization SAML enforcement."))return{state:"pending",statuses:[]}}const a=i.data.repository.pullRequest.commits.nodes[0].commit.statusCheckRollup;return a?{state:a.state.toLowerCase(),statuses:a.contexts.nodes.map(o=>{var m,S,T,A;return hl(o)?{id:o.id,url:(m=o.checkSuite.app)==null?void 0:m.url,avatar_url:(S=o.checkSuite.app)==null?void 0:S.logoUrl,state:((T=o.conclusion)==null?void 0:T.toLowerCase())||"pending",description:o.title,context:o.name,target_url:o.detailsUrl}:{id:o.id,url:o.targetUrl,avatar_url:o.avatarUrl,state:(A=o.state)==null?void 0:A.toLowerCase(),description:o.description,context:o.context,target_url:o.targetUrl}})}:{state:"pending",statuses:[]}}static async openDiffFromComment(t,e,r){const n=await e.getFileChangesInfo(),i=e.mergeBase||e.base.sha,o=(await Ns(n,t.repository,i)).find(A=>A.fileName===r.path||A.previousFileName===r.path);if(!o)throw new Error("Can't find matching file");let m,S;if(e.equals(t.activePullRequest)){const A=d.Uri.file($.resolve(t.repository.rootUri.fsPath,o.fileName));m=o.status===nt.DELETE?cn(A,void 0,void 0,"",!1,{base:!1},t.repository.rootUri):A,S=cn(A,o.status===nt.RENAME?o.previousFileName:o.fileName,void 0,o.status===nt.ADD?"":i,!1,{base:!0},t.repository.rootUri)}else{const A=e.head.sha,H=o.status===nt.RENAME?o.previousFileName:o.fileName;m=Gn(d.Uri.file(Hn(t.repository.rootUri,o.fileName)),e,o.baseCommit,A,o.fileName,!1,o.status),S=Gn(d.Uri.file(Hn(t.repository.rootUri,H)),e,o.baseCommit,A,o.fileName,!0,o.status)}const T=r.path.split("/");d.commands.executeCommand("vscode.diff",S,m,`${T[T.length-1]} (Pull Request)`,{})}async getFileChangesInfo(){P.debug(`Fetch file changes, base, head and merge base of PR #${this.number} - enter`,Fn.ID);const t=this.githubRepository,{octokit:e,remote:r}=await t.ensure();if(!this.base){const o=await e.pulls.get({owner:r.owner,repo:r.repositoryName,pull_number:this.number});this.update(ws(o.data,t))}if(this.item.merged){const o=await e.pulls.listFiles({repo:r.repositoryName,owner:r.owner,pull_number:this.number});return this.mergeBase=this.base.sha,o.data}const{data:n}=await e.repos.compareCommits({repo:r.repositoryName,owner:r.owner,base:`${this.base.repositoryCloneUrl.owner}:${this.base.ref}`,head:`${this.head.repositoryCloneUrl.owner}:${this.head.ref}`});this.mergeBase=n.merge_base_commit.sha;const i=300;let a=[];return n.files.length>=i?(P.debug(`More than ${i} files changed, fetching all file changes of PR #${this.number}`,Fn.ID),a=await e.paginate("GET /repos/:owner/:repo/pulls/:pull_number/files",{owner:this.base.repositoryCloneUrl.owner,pull_number:this.number,repo:r.repositoryName,per_page:100})):a=n.files,P.debug(`Fetch file changes and merge base of PR #${this.number} - done, total files ${a.length} `,Fn.ID),a}async getMergeability(){try{P.debug(`Fetch pull request mergeability ${this.number} - enter`,Fn.ID);const{query:t,remote:e,schema:r}=await this.githubRepository.ensure(),{data:n}=await t({query:r.PullRequestMergeability,variables:{owner:e.owner,name:e.repositoryName,number:this.number}});return P.debug(`Fetch pull request mergeability ${this.number} - done`,Fn.ID),Gc(n.repository.pullRequest.mergeable)}catch(t){return P.appendLine(`PullRequestModel> Unable to fetch PR Mergeability: ${t}`),Tn.Unknown}}async setReadyForReview(){try{const{mutate:t,schema:e}=await this.githubRepository.ensure(),{data:r}=await t({mutation:e.ReadyForReview,variables:{input:{pullRequestId:this.graphNodeId}}});return this._telemetry.sendTelemetryEvent("pr.readyForReview.success"),r.markPullRequestReadyForReview.pullRequest.isDraft}catch(t){throw this._telemetry.sendTelemetryErrorEvent("pr.readyForReview.failure"),t}}updateCommentReactions(t,e){const r=this._reviewThreadsCache.find(n=>n.comments.some(i=>i.graphNodeId===t));if(r){const n=r.comments.find(i=>i.graphNodeId===t);n&&(n.reactions=Wh(e),this._onDidChangeReviewThreads.fire({added:[],changed:[r],removed:[]}))}}async addCommentReaction(t,e){const r=Au().reduce((m,S)=>(m[S.label]=S.title,m),{}),{mutate:n,schema:i}=await this.githubRepository.ensure(),{data:a}=await n({mutation:i.AddReaction,variables:{input:{subjectId:t,content:r[e.label]}}});if(!a)throw new Error("Add comment reaction failed.");const o=a.addReaction.subject.reactionGroups;return this.updateCommentReactions(t,o),a}async deleteCommentReaction(t,e){const r=Au().reduce((m,S)=>(m[S.label]=S.title,m),{}),{mutate:n,schema:i}=await this.githubRepository.ensure(),{data:a}=await n({mutation:i.DeleteReaction,variables:{input:{subjectId:t,content:r[e.label]}}});if(!a)throw new Error("Delete comment reaction failed.");const o=a.removeReaction.subject.reactionGroups;return this.updateCommentReactions(t,o),a}async resolveReviewThread(t){const{mutate:e,schema:r}=await this.githubRepository.ensure(),{data:n}=await e({mutation:r.ResolveReviewThread,variables:{input:{threadId:t}}});if(!n)throw new Error("Resolve review thread failed.");const i=this._reviewThreadsCache.findIndex(a=>a.id===t);if(i>-1){const a=Pu(n.resolveReviewThread.thread);this._reviewThreadsCache.splice(i,1,a),this._onDidChangeReviewThreads.fire({added:[],changed:[a],removed:[]})}}async unresolveReviewThread(t){const{mutate:e,schema:r}=await this.githubRepository.ensure(),{data:n}=await e({mutation:r.UnresolveReviewThread,variables:{input:{threadId:t}}});if(!n)throw new Error("Unresolve review thread failed.");const i=this._reviewThreadsCache.findIndex(a=>a.id===t);if(i>-1){const a=Pu(n.unresolveReviewThread.thread);this._reviewThreadsCache.splice(i,1,a),this._onDidChangeReviewThreads.fire({added:[],changed:[a],removed:[]})}}async getPullRequestFileViewState(){const{query:t,schema:e,remote:r}=await this.githubRepository.ensure(),n=[];let i=null,a=!1;do{const{data:o}=await t({query:e.PullRequestFiles,variables:{owner:r.owner,name:r.repositoryName,number:this.number,after:i}});o.repository.pullRequest.files.nodes.forEach(m=>{this.fileChangeViewedState[m.path]!==m.viewerViewedState&&n.push({fileName:m.path,viewed:m.viewerViewedState}),this.fileChangeViewedState[m.path]=m.viewerViewedState}),a=o.repository.pullRequest.files.pageInfo.hasNextPage,i=o.repository.pullRequest.files.pageInfo.endCursor}while(a);return n.length&&this._onDidChangeFileViewedState.fire({changed:n}),this.fileChangeViewedState}async markFileAsViewed(t){const{mutate:e,schema:r}=await this.githubRepository.ensure();await e({mutation:r.MarkFileAsViewed,variables:{input:{path:t,pullRequestId:this.graphNodeId}}}),this.fileChangeViewedState[t]=Ur.VIEWED,this._onDidChangeFileViewedState.fire({changed:[{fileName:t,viewed:Ur.VIEWED}]})}async unmarkFileAsViewed(t){const{mutate:e,schema:r}=await this.githubRepository.ensure();await e({mutation:r.UnmarkFileAsViewed,variables:{input:{path:t,pullRequestId:this.graphNodeId}}}),this.fileChangeViewedState[t]=Ur.UNVIEWED,this._onDidChangeFileViewedState.fire({changed:[{fileName:t,viewed:Ur.UNVIEWED}]})}};let Di=Fn;ur(Di,"ID","PullRequestModel");var ug=Object.defineProperty,Qc=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?ug(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class lg extends Ih{constructor(e,r,n){super(e);this._folderRepositoryManager=r,this._item=n,Qc(this,"viewType","github:activePullRequest"),Qc(this,"_existingReviewers",[]),Qc(this,"_prChangeListener"),this.registerFolderRepositoryListener(),cp(i=>{i&&this._item.update(i),this._postMessage({command:"update-state",state:this._item.state})},null,this._disposables),this._disposables.push(this._folderRepositoryManager.onDidMergePullRequest(i=>{this._postMessage({command:"update-state",state:Qt.Merged})}))}registerFolderRepositoryListener(){this._disposables.push(this._folderRepositoryManager.onDidChangeActivePullRequest(e=>{if(this._folderRepositoryManager&&this._item){const r=this._item.equals(this._folderRepositoryManager.activePullRequest);this._postMessage({command:"pr.update-checkout-status",isCurrentlyCheckedOut:r})}}))}resolveWebviewView(e,r,n){super.resolveWebviewView(e,r,n),e.webview.html=this._getHtmlForWebview(),this.updatePullRequest(this._item)}async _onDidReceiveMessage(e){if(await super._onDidReceiveMessage(e)===this.MESSAGE_UNHANDLED)switch(e.command){case"alert":d.window.showErrorMessage(e.args);return;case"pr.close":return this.close(e);case"pr.comment":return this.createComment(e);case"pr.merge":return this.mergePullRequest(e);case"pr.deleteBranch":return this.deleteBranch(e);case"pr.readyForReview":return this.setReadyForReview(e);case"pr.approve":return this.approvePullRequest(e);case"pr.request-changes":return this.requestChanges(e);case"pr.submit":return this.submitReview(e);case"pr.openOnGitHub":return Ja(this._item,this._item._telemetry);case"pr.checkout-default-branch":return this.checkoutDefaultBranch(e)}}async checkoutDefaultBranch(e){try{const r=await this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(this._item);await this._folderRepositoryManager.checkoutDefaultBranch(r)}finally{this._replyMessage(e,{})}}async refresh(){await this.updatePullRequest(this._item)}async updatePullRequest(e){var r;return(!this._prChangeListener||e.number!==this._item.number)&&((r=this._prChangeListener)==null||r.dispose(),this._prChangeListener=e.onDidInvalidate(()=>this.updatePullRequest(e))),Promise.all([this._folderRepositoryManager.resolvePullRequest(e.remote.owner,e.remote.repositoryName,e.number),this._folderRepositoryManager.getPullRequestRepositoryAccessAndMergeMethods(e),e.getTimelineEvents(),e.getReviewRequests(),this._folderRepositoryManager.getBranchNameForPullRequest(e)]).then(n=>{var i,a;const[o,m,S,T,A]=n;if(!o)throw new Error(`Fail to resolve Pull Request #${e.number} in ${e.remote.owner}/${e.remote.repositoryName}`);if(this._item=o,!this._view)return;this._view.title=`${o.title} #${e.number.toString()}`;const H=e.equals(this._folderRepositoryManager.activePullRequest),Y=m.hasWritePermission,pe=m.mergeMethodsAvailability,me=Y||this._item.canEdit(),be=d.workspace.getConfiguration("githubPullRequests").get("defaultMergeMethod"),Ne=Dh(pe,be),Ae=this._folderRepositoryManager.getCurrentUser(this._item);this._existingReviewers=Zh(T!=null?T:[],S!=null?S:[],o.author);const $e=o.base&&o.head&&!o.base.repositoryCloneUrl.equals(o.head.repositoryCloneUrl)&&Bc();this._postMessage({command:"pr.initialize",pullrequest:{number:o.number,title:o.title,url:o.html_url,createdAt:o.createdAt,body:o.body,bodyHTML:o.bodyHTML,labels:o.item.labels,author:{login:o.author.login,name:o.author.name,avatarUrl:o.userAvatar,url:o.author.url},state:o.state,isCurrentlyCheckedOut:H,isRemoteBaseDeleted:o.isRemoteBaseDeleted,base:o.base.label,isRemoteHeadDeleted:o.isRemoteHeadDeleted,isLocalHeadDeleted:!A,head:(a=(i=o.head)==null?void 0:i.label)!=null?a:"",canEdit:me,hasWritePermission:Y,mergeable:o.item.mergeable,isDraft:o.isDraft,status:{statuses:[]},events:[],mergeMethodsAvailability:pe,defaultMergeMethod:Ne,isIssue:!1,isAuthor:Ae.login===o.author.login,reviewers:this._existingReviewers,continueOnGitHub:$e}})}).catch(n=>{d.window.showErrorMessage(ke(n))})}close(e){d.commands.executeCommand("pr.close",this._item,e.args).then(r=>{r&&this._replyMessage(e,{value:r})})}createComment(e){this._item.createIssueComment(e.args).then(r=>{this._replyMessage(e,{value:r})})}updateReviewers(e){if(e){const r=this._existingReviewers.find(n=>e.user.login===n.reviewer.login);r?r.state=e.state:this._existingReviewers.push({reviewer:e.user,state:e.state})}}approvePullRequest(e){this._item.approve(e.args).then(r=>{this.updateReviewers(r),this._replyMessage(e,{review:r,reviewers:this._existingReviewers}),d.commands.executeCommand("pr.refreshList")},r=>{d.window.showErrorMessage(`Approving pull request failed. ${ke(r)}`),this._throwError(e,`${ke(r)}`)})}requestChanges(e){this._item.requestChanges(e.args).then(r=>{this.updateReviewers(r),this._replyMessage(e,{review:r,reviewers:this._existingReviewers})},r=>{d.window.showErrorMessage(`Requesting changes failed. ${ke(r)}`),this._throwError(e,`${ke(r)}`)})}submitReview(e){this._item.submitReview(kn.Comment,e.args).then(r=>{this.updateReviewers(r),this._replyMessage(e,{review:r,reviewers:this._existingReviewers})},r=>{d.window.showErrorMessage(`Submitting review failed. ${ke(r)}`),this._throwError(e,`${ke(r)}`)})}async deleteBranch(e){const r=await this._folderRepositoryManager.getBranchNameForPullRequest(this._item),n=[];if(this._item.isResolved()){const o=this._item.head.ref;await this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(this._item)===this._item.head.ref||n.push({label:`Delete remote branch ${this._item.remote.remoteName}/${o}`,description:`${this._item.remote.normalizedHost}/${this._item.remote.owner}/${this._item.remote.repositoryName}`,type:"upstream",picked:!0})}if(r){const o=d.workspace.getConfiguration("githubPullRequests").get("defaultDeletionMethod.selectLocalBranch");n.push({label:`Delete local branch ${r.branch}`,type:"local",picked:!!o});const m=d.workspace.getConfiguration("githubPullRequests").get("defaultDeletionMethod.selectRemote");r.remote&&r.createdForPullRequest&&!r.remoteInUse&&n.push({label:`Delete remote ${r.remote}, which is no longer used by any other branch`,type:"remote",picked:!!m})}if(d.env.remoteName==="codespaces"&&n.push({label:"Suspend Codespace",type:"suspend"}),!n.length){d.window.showWarningMessage(`There is no longer an upstream or local branch for Pull Request #${this._item.number}`),this._replyMessage(e,{cancelled:!0});return}const i=await d.window.showQuickPick(n,{canPickMany:!0,ignoreFocusOut:!0}),a=[];if(i){const o=this._item.equals(this._folderRepositoryManager.activePullRequest),m=i.map(async S=>{switch(S.type){case"upstream":return await this._folderRepositoryManager.deleteBranch(this._item),a.push(S.type),this._folderRepositoryManager.repository.fetch({prune:!0});case"local":if(o){if(this._folderRepositoryManager.repository.state.workingTreeChanges.length)if(await d.window.showWarningMessage("Your local changes will be lost, do you want to continue?",{modal:!0},"Yes")==="Yes")await d.commands.executeCommand("git.cleanAll");else return;const T=await this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(this._item);await this._folderRepositoryManager.repository.checkout(T)}return await this._folderRepositoryManager.repository.deleteBranch(r.branch,!0),a.push(S.type);case"remote":return await this._folderRepositoryManager.repository.removeRemote(r.remote),a.push(S.type);case"suspend":return await d.commands.executeCommand("github.codespaces.disconnectSuspend"),a.push(S.type)}});await Promise.all(m),d.commands.executeCommand("pr.refreshList"),this._postMessage({command:"pr.deleteBranch",branchTypes:a})}else this._replyMessage(e,{cancelled:!0})}setReadyForReview(e){this._item.setReadyForReview().then(r=>{d.commands.executeCommand("pr.refreshList"),this._replyMessage(e,{isDraft:r})}).catch(r=>{d.window.showErrorMessage(`Unable to set PR ready for review. ${ke(r)}`),this._throwError(e,{})})}async mergePullRequest(e){const{title:r,description:n,method:i}=e.args;if(await d.window.showInformationMessage("Merge this pull request?",{modal:!0},"Yes")!=="Yes"){this._replyMessage(e,{state:Qt.Open});return}this._folderRepositoryManager.mergePullRequest(this._item,r,n,i).then(o=>{d.commands.executeCommand("pr.refreshList"),o.merged||d.window.showErrorMessage(`Merging PR failed: ${o.message}`),this._replyMessage(e,{state:o.merged?Qt.Merged:Qt.Open})}).catch(o=>{d.window.showErrorMessage(`Unable to merge pull request. ${ke(o)}`),this._throwError(e,{})})}_getHtmlForWebview(){const e=Lc(),r=d.Uri.joinPath(this._extensionUri,"dist","webview-open-pr-view.js");return`<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src vscode-resource: https:; script-src 'nonce-${e}'; style-src vscode-resource: 'unsafe-inline' http: https: data:;">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<title>Active Pull Request</title>
	</head>
	<body>
		<div id="app"></div>
		<script nonce="${e}" src="${this._webview.asWebviewUri(r).toString()}"></script>
	</body>
</html>`}}class cg{constructor(e,r){this.reviewManager=e,this.folderRepositoryManager=r}provideTerminalLinks(e,r){var n;const i=e.line.indexOf("https://github.com");if(i===-1)return[];const a=e.line.substring(i),o=new RegExp(/https:\/\/github\.com\/(.*)\/(.*)\/pull\/new\/(.*)/),m=a.match(o);if(m&&m.length===4){const S=m[1],T=m[2],A=m[3];if(this.folderRepositoryManager.gitHubRepositories.findIndex(Y=>Y.remote.owner===S&&Y.remote.repositoryName===T)>-1&&((n=this.reviewManager.repository.state.HEAD)==null?void 0:n.name)===A)return[{startIndex:i,length:e.line.length-i,tooltip:"Create a Pull Request",url:a}]}return[]}handleTerminalLink(e){const r=d.workspace.getConfiguration("githubPullRequests").get("terminalLinksHandler");if(r==="github"){d.env.openExternal(d.Uri.parse(e.url));return}if(r==="vscode"){this.reviewManager.createPullRequest();return}d.window.showInformationMessage("Do you want to create a pull request using the GitHub Pull Requests and Issues extension?","Yes","No, continue to github.com").then(n=>{n==="Yes"?this.reviewManager.createPullRequest():d.env.openExternal(d.Uri.parse(e.url))})}}var dg=Object.defineProperty,Xr=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?dg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class hg extends Ih{constructor(e,r,n,i){super(e);this._folderRepositoryManager=r,this._pullRequestDefaults=n,Xr(this,"viewType","github:createPullRequest"),Xr(this,"_onDone",new d.EventEmitter),Xr(this,"onDone",this._onDone.event),Xr(this,"_onDidChangeBaseRemote",new d.EventEmitter),Xr(this,"onDidChangeBaseRemote",this._onDidChangeBaseRemote.event),Xr(this,"_onDidChangeBaseBranch",new d.EventEmitter),Xr(this,"onDidChangeBaseBranch",this._onDidChangeBaseBranch.event),Xr(this,"_onDidChangeCompareRemote",new d.EventEmitter),Xr(this,"onDidChangeCompareRemote",this._onDidChangeCompareRemote.event),Xr(this,"_onDidChangeCompareBranch",new d.EventEmitter),Xr(this,"onDidChangeCompareBranch",this._onDidChangeCompareBranch.event),Xr(this,"_firstLoad",!0),Xr(this,"_compareBranch"),Xr(this,"_compareRemote"),this._compareBranch=i}resolveWebviewView(e,r,n){super.resolveWebviewView(e,r,n),e.webview.html=this._getHtmlForWebview(),this._firstLoad?(this._firstLoad=!1,this.initializeParams(!0)):this.initializeParams()}get compareBranch(){return this._compareBranch}set compareBranch(e){var r,n;e&&((e==null?void 0:e.name)!==this._compareBranch.name||((r=e==null?void 0:e.upstream)==null?void 0:r.remote)!==((n=this._compareBranch.upstream)==null?void 0:n.remote))&&(this._compareBranch=e,this.initializeParams(),this._onDidChangeCompareBranch.fire(this._compareBranch.name))}get compareRemote(){return this._compareRemote}set compareRemote(e){var r,n;e&&(e.owner!==((r=this._compareRemote)==null?void 0:r.owner)||e.repositoryName!==((n=this._compareRemote)==null?void 0:n.repositoryName))&&(this._compareRemote=e,this.initializeParams(),this._onDidChangeCompareRemote.fire(this._compareRemote))}show(e){e&&(this.compareBranch=e),super.show()}async getTotalCommits(){var e,r,n;const i=await this._folderRepositoryManager.getOrigin(this.compareBranch);if((e=this.compareBranch)==null?void 0:e.upstream){const a=this._folderRepositoryManager.findRepo(ta(this.compareBranch.upstream.remote));if(a){const o=`${a.remote.owner}:${(r=this.compareBranch.name)!=null?r:""}`,m=`${this._pullRequestDefaults.owner}:${this._pullRequestDefaults.base}`,{total_commits:S}=await i.compareCommits(m,o);return S}}else if((n=this.compareBranch)==null?void 0:n.commit){const a=await this._folderRepositoryManager.repository.getBranch(this._pullRequestDefaults.base);if(a.commit)return(await this._folderRepositoryManager.repository.diffBetween(a.commit,this.compareBranch.commit)).length}return 0}async getTitle(){var e,r,n,i;const a=await this._folderRepositoryManager.getOrigin(this.compareBranch);let o=this._pullRequestDefaults.base===((e=this.compareBranch)==null?void 0:e.name);try{await this.getTotalCommits()>1&&(o=await a.getDefaultBranch()!==((r=this.compareBranch)==null?void 0:r.name))}catch(m){}if(o){const m=(n=this.compareBranch)==null?void 0:n.name;return m?`${m.charAt(0).toUpperCase()}${m.slice(1)}`:""}else return((i=this.compareBranch)==null?void 0:i.name)?Hh(await this._folderRepositoryManager.getTipCommitMessage(this.compareBranch.name)).title:""}async getPullRequestTemplate(){const e=await this._folderRepositoryManager.getPullRequestTemplates();if(e[0])try{return(await d.workspace.fs.readFile(e[0])).toString()}catch(r){P.appendLine(`Reading pull request template failed: ${r}`);return}}async getDescription(){var e,r;let n;try{await this.getTotalCommits()===1&&((e=this.compareBranch)==null?void 0:e.name)&&(n=Hh(await this._folderRepositoryManager.getTipCommitMessage(this.compareBranch.name)).body)}catch(a){}const i=await this.getPullRequestTemplate();return i&&n?`${n}

${i}`:i||(n&&this._pullRequestDefaults.base!==((r=this.compareBranch)==null?void 0:r.name)?n:"")}async initializeParams(e=!1){var r,n;if(!this.compareBranch)throw new qh(this._folderRepositoryManager.repository);const i={owner:this._pullRequestDefaults.owner,repositoryName:this._pullRequestDefaults.repo},a=await this._folderRepositoryManager.getOrigin(this.compareBranch),o={owner:a.remote.owner,repositoryName:a.remote.repositoryName},[m,S,T,A]=await Promise.all([this._folderRepositoryManager.getGitHubRemotes(),this._folderRepositoryManager.listBranches(this._pullRequestDefaults.owner,this._pullRequestDefaults.repo),this.getTitle(),this.getDescription()]),H=m.map(pe=>({owner:pe.owner,repositoryName:pe.repositoryName}));let Y=S;o.owner!==i.owner&&(Y=await this._folderRepositoryManager.listBranches(o.owner,o.repositoryName)),this.compareBranch.name&&!Y.includes(this.compareBranch.name)&&(Y.push(this.compareBranch.name),Y.sort()),this._postMessage({command:e?"reset":"pr.initialize",params:{availableRemotes:H,defaultBaseRemote:i,defaultBaseBranch:this._pullRequestDefaults.base,defaultCompareRemote:o,defaultCompareBranch:(r=this.compareBranch.name)!=null?r:"",branchesForRemote:S,branchesForCompare:Y,defaultTitle:T,defaultDescription:A,compareBranch:(n=this.compareBranch.name)!=null?n:"",isDraft:!1}})}async changeRemote(e,r){var n;const{owner:i,repositoryName:a}=e.args,o=this._folderRepositoryManager.findRepo(T=>i===T.remote.owner&&a===T.remote.repositoryName);if(!o)throw new Error("No matching GitHub repository found.");const m=await o.getDefaultBranch(),S=await this._folderRepositoryManager.listBranches(i,a);if(!r&&((n=this.compareBranch)==null?void 0:n.name)&&!S.includes(this.compareBranch.name)&&(S.push(this.compareBranch.name),S.sort()),r)this._onDidChangeBaseRemote.fire({owner:i,repositoryName:a}),this._onDidChangeBaseBranch.fire(m);else{const T=this.compareRemote;this.compareRemote={owner:i,repositoryName:a},T&&(this.compareRemote.repositoryName!==T.repositoryName||this.compareRemote.owner!==T.owner)&&(this.compareBranch=await this._folderRepositoryManager.repository.getBranch(m))}return this._replyMessage(e,{branches:S,defaultBranch:r?m:this.compareBranch})}async create(e){var r,n;try{let i,a;if(!((r=this.compareBranch)==null?void 0:r.name)){this._throwError(e,"Please create a branch.");return}if(this.compareBranch.type===bt.RemoteHead){const T=this.compareBranch.name.indexOf("/");i=this.compareBranch.name.substring(T+1),a=this.compareBranch.name.substring(0,T)}else i=this.compareBranch.name,a=(n=this.compareBranch.upstream)==null?void 0:n.remote;if(!a)if(await d.window.showInformationMessage(`There is no upstream branch for '${i}'.

Do you want to publish it and then create the pull request?`,{modal:!0},"Publish branch")==="Publish branch"){let A;this._folderRepositoryManager.repository.state.remotes.length===1?A=this._folderRepositoryManager.repository.state.remotes[0].name:this._folderRepositoryManager.repository.state.remotes.length>1&&(A=await d.window.showQuickPick(this._folderRepositoryManager.repository.state.remotes.map(H=>H.name),{placeHolder:"Remote to push to"})),A?await this._folderRepositoryManager.repository.push(A,i,!0):this._throwError(e,"The current repository has no remotes to push to. Please set up a remote and try again."),this._folderRepositoryManager.repository.state.HEAD&&(a=A)}else{this._throwError(e,"No upstream for the compare branch.");return}const o=this._folderRepositoryManager.findRepo(ta(a));if(!o)throw new Error(`Unable to find GitHub repository matching '${a}'. You can add '${a}' to the setting "githubPullRequests.remotes" to ensure '${a}' is found.`);const m=`${o.remote.owner}:${i}`,S=await this._folderRepositoryManager.createPullRequest({...e.args,head:m});S?(await this._replyMessage(e,{}),await xn.associateBranchWithPullRequest(this._folderRepositoryManager.repository,S,i),this._onDone.fire(S)):this._throwError(e,"There must be a difference in commits to create a pull request.")}catch(i){this._throwError(e,i.message)}}async _onDidReceiveMessage(e){var r;if(await super._onDidReceiveMessage(e)===this.MESSAGE_UNHANDLED)switch(e.command){case"pr.cancelCreate":return d.commands.executeCommand("setContext","github:createPullRequest",!1),this._onDone.fire(void 0),this._replyMessage(e,void 0);case"pr.create":return this.create(e);case"pr.changeBaseRemote":return this.changeRemote(e,!0);case"pr.changeBaseBranch":return this._onDidChangeBaseBranch.fire(e.args),this._replyMessage(e,void 0);case"pr.changeCompareRemote":return this.changeRemote(e,!1);case"pr.changeCompareBranch":return this.compareBranch=await this._folderRepositoryManager.repository.getBranch((r=e.args.name)!=null?r:e.args),this._replyMessage(e,void 0);default:d.window.showErrorMessage("Unsupported webview message")}}_getHtmlForWebview(){const e=Lc(),r=d.Uri.joinPath(this._extensionUri,"dist","webview-create-pr-view.js");return`<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src vscode-resource: https:; script-src 'nonce-${e}'; style-src vscode-resource: 'unsafe-inline' http: https: data:;">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<title>Create Pull Request</title>
	</head>
	<body>
		<div id="app"></div>
		<script nonce="${e}" src="${this._webview.asWebviewUri(r).toString()}"></script>
	</body>
</html>`}}var pg=Object.defineProperty,Wc=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?pg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class mg{constructor(){Wc(this,"fileViewedState",new Map),Wc(this,"_onDidChangeFileDecorations",new d.EventEmitter),Wc(this,"onDidChangeFileDecorations",this._onDidChangeFileDecorations.event)}updateFileViewedState(e,r,n,i){this.fileViewedState.set(`${r}:${n}`,i),this._onDidChangeFileDecorations.fire(e)}provideFileDecoration(e,r){if(e.scheme!=="filechange"&&e.scheme!==Oi)return;const n=Ft(e);if(n){const i=`${n.prNumber}:${n.fileName}`;if(this.fileViewedState.get(i)===Ur.VIEWED)return{propagate:!1,badge:"\u2713",tooltip:"Viewed"}}}}const Kc=new mg;var fg=Object.defineProperty,Yc=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?fg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class gg{constructor(){Yc(this,"fileHasComments",new Map),Yc(this,"_onDidChangeFileDecorations",new d.EventEmitter),Yc(this,"onDidChangeFileDecorations",this._onDidChangeFileDecorations.event)}updateFileComments(e,r,n,i){const a=`${r}:${n}`;this.fileHasComments.get(a)!==i&&(this.fileHasComments.set(`${r}:${n}`,i),this._onDidChangeFileDecorations.fire(e))}provideFileDecoration(e,r){const n=Ft(e);if(n){const i=`${n.prNumber}:${n.fileName}`;if(this.fileHasComments.get(i))return{propagate:!1,tooltip:"Commented",badge:"\u{1F4AC}"}}}}const ep=new gg;var vg=Object.defineProperty,Ou=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?vg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class jr{constructor(){Ou(this,"childrenDisposables"),Ou(this,"parent"),Ou(this,"label"),Ou(this,"accessibilityInformation")}getParent(){if(this.parent instanceof jr)return this.parent}async reveal(e,r){try{await this.parent.reveal(e||this,r)}catch(n){P.appendLine(n,"TreeNode")}}refresh(e){return this.parent.refresh(e)}async getChildren(){return[]}dispose(){this.childrenDisposables&&(this.childrenDisposables.forEach(e=>e.dispose()),this.childrenDisposables=[])}}var yg=Object.defineProperty,lr=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?yg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);function tp(t){const e=d.window.activeTextEditor,r={preserveFocus:!0,viewColumn:d.ViewColumn.Active};return e&&e.document.uri.path===t.path&&(r.selection=e.selection),{command:"vscode.open",arguments:[t,r],title:"Open File"}}async function Xc(t,e,r,n,i){let a=await ca(e,t.repository)||e,o=await ca(r,t.repository)||r;(a.scheme==="data"||o.scheme==="data")&&(i===nt.ADD&&(a=lo),i===nt.DELETE&&(o=lo));const m=r.path.split("/");return{command:"vscode.diff",arguments:[a,o,`${m[m.length-1]} (Pull Request)`,n],title:"Open Changed File in PR"}}class Wa extends jr{constructor(e,r,n,i,a,o,m,S){super();this.parent=e,this.pullRequest=r,this.status=n,this.fileName=i,this.previousFileName=a,this.blobUrl=o,this.filePath=m,this.parentFilePath=S,lr(this,"description"),lr(this,"iconPath"),lr(this,"command"),lr(this,"resourceUri"),lr(this,"contextValue"),lr(this,"childrenDisposables",[]),lr(this,"_viewed");var T;const A=(T=this.pullRequest.fileChangeViewedState[i])!=null?T:Ur.UNVIEWED;this.contextValue=`filechange:${nt[n]}:${A===Ur.VIEWED?"viewed":"unviewed"}`,this.label=$.basename(i),this.description=d.workspace.asRelativePath($.dirname(i),!1),this.description==="."&&(this.description=""),this.iconPath=d.ThemeIcon.File,this.resourceUri=co(d.Uri.parse(this.blobUrl),r.number,i,n),this.updateViewed(A),this.command={command:"pr.openFileOnGitHub",title:"Open File on GitHub",arguments:[this]},this.childrenDisposables.push(this.pullRequest.onDidChangeFileViewedState(H=>{const Y=H.changed.find(pe=>pe.fileName===this.fileName);Y&&(this.updateViewed(Y.viewed),this.refresh(this))})),this.accessibilityInformation={label:`View diffs and comments for file ${this.label}`,role:"link"}}updateViewed(e){this._viewed!==e&&(this._viewed=e,this.contextValue=`filechange:${nt[this.status]}:${e===Ur.VIEWED?"viewed":"unviewed"}`,Kc.updateFileViewedState(this.resourceUri,this.pullRequest.number,this.fileName,e))}getTreeItem(){return this}}class rp extends jr{constructor(e,r,n,i,a,o,m,S,T,A){super();this.parent=e,this.pullRequest=r,this.status=n,this.fileName=i,this.blobUrl=a,this.filePath=o,this.parentFilePath=m,this.diffHunks=S,this.comments=T,this.sha=A,lr(this,"description"),lr(this,"iconPath"),lr(this,"resourceUri"),lr(this,"parentSha"),lr(this,"contextValue"),lr(this,"command"),lr(this,"opts"),lr(this,"childrenDisposables",[]),lr(this,"_viewed");var H;const Y=(H=this.pullRequest.fileChangeViewedState[i])!=null?H:Ur.UNVIEWED;this.contextValue=`filechange:${nt[n]}:${Y===Ur.VIEWED?"viewed":"unviewed"}`,this.label=$.basename(i),this.description=d.workspace.asRelativePath($.dirname(i),!1),this.description==="."&&(this.description=""),this.iconPath=d.ThemeIcon.File,this.opts={preserveFocus:!0},this.updateShowOptions(),this.resourceUri=co(d.Uri.file(this.fileName),this.pullRequest.number,this.fileName,this.status),this.updateViewed(Y),this.childrenDisposables.push(this.pullRequest.onDidChangeReviewThreads(pe=>{[...pe.added,...pe.removed].some(me=>me.path===this.fileName)&&this.updateShowOptions()})),this.childrenDisposables.push(this.pullRequest.onDidChangeFileViewedState(pe=>{const me=pe.changed.find(be=>be.fileName===this.fileName);me&&(this.updateViewed(me.viewed),this.refresh(this))})),this.accessibilityInformation={label:`View diffs and comments for file ${this.label}`,role:"link"}}updateViewed(e){this._viewed!==e&&(this._viewed=e,this.contextValue=`filechange:${nt[this.status]}:${e===Ur.VIEWED?"viewed":"unviewed"}`,Kc.updateFileViewedState(this.resourceUri,this.pullRequest.number,this.fileName,e))}updateShowOptions(){const e=this.pullRequest.reviewThreadsCache,n=(we(e,i=>i.path)[this.fileName]||[]).filter(i=>!i.isOutdated);ep.updateFileComments(this.resourceUri,this.pullRequest.number,this.fileName,n.length>0),n.length?(n.sort((i,a)=>i.line-a.line),this.opts.selection=new d.Range(n[0].line,0,n[0].line,0)):delete this.opts.selection}getTreeItem(){return this}openFileCommand(){return tp(this.filePath)}async openDiff(e){var r;const n=await Xc(e,this.parentFilePath,this.filePath,this.opts,this.status);d.commands.executeCommand(n.command,...(r=n.arguments)!=null?r:[])}}class xu extends rp{constructor(e,r,n,i,a,o,m,S,T,A,H,Y,pe,me){super(r,n,i,a,m,S,T,Y,pe,me);this.folderRepositoryManager=e,this.parent=r,this.pullRequest=n,this.status=i,this.fileName=a,this.previousFileName=o,this.blobUrl=m,this.filePath=S,this.parentFilePath=T,this.isPartial=A,this.patch=H,this.diffHunks=Y,this.comments=pe,this.sha=me}getTreeItem(){return this}async resolve(){this.command=await Xc(this.folderRepositoryManager,this.parentFilePath,this.filePath,void 0,this.status)}}class ia extends rp{constructor(e,r,n,i,a,o,m,S,T,A=[],H,Y){super(e,n,i,a,o,m,S,T,A,H);this.parent=e,this.pullRequestManager=r,this.pullRequest=n,this.status=i,this.fileName=a,this.blobUrl=o,this.filePath=m,this.parentFilePath=S,this.diffHunks=T,this.comments=A,this.sha=H,this.isCurrent=Y,lr(this,"_useViewChangesCommand",!1)}useViewChangesCommand(){this._useViewChangesCommand=!0}async alternateCommand(){if(this.status===nt.DELETE||this.status===nt.ADD){const pe=this.parentFilePath.with({query:JSON.stringify({path:null,commit:null})});return{command:"vscode.diff",arguments:this.status===nt.DELETE?[this.parentFilePath,pe,`${this.fileName}`,{preserveFocus:!0}]:[pe,this.parentFilePath,`${this.fileName}`,{preserveFocus:!0}],title:"Open Diff"}}const{path:e,ref:r,commit:n,rootPath:i}=Fi(this.filePath.query),a=`${n}^`,o={path:e,ref:r,commit:a,base:!0,isOutdated:!0,rootPath:i},m=this.filePath.with({query:JSON.stringify(o)});let S=this.filePath;this.isCurrent&&(S=this.pullRequestManager.repository.rootUri.with({path:$.posix.join(o.rootPath,o.path)}));const T={preserveFocus:!0},A=this.pullRequest.reviewThreadsCache,Y=(we(A,pe=>pe.path)[this.fileName]||[]).filter(pe=>pe.isOutdated).sort((pe,me)=>pe.line-me.line);return Y.length&&(T.selection=new d.Range(Y[0].originalLine,0,Y[0].originalLine,0)),{command:"vscode.diff",arguments:[m,S,`${this.fileName} from ${(n||"").substr(0,8)}`,T],title:"View Changes"}}async resolve(){this._useViewChangesCommand?this.command=await this.alternateCommand():d.workspace.getConfiguration().get("git.openDiffOnClick",!0)?this.command=await Xc(this.pullRequestManager,this.parentFilePath,this.filePath,this.opts,this.status):this.command=this.openFileCommand()}}class bg extends jr{constructor(e,r,n,i,a,o){super();this.parent=e,this.fileName=r,this.previousFileName=n,this.status=i,this.baseBranch=a,this.headBranch=o,lr(this,"description"),lr(this,"iconPath"),lr(this,"resourceUri"),lr(this,"command"),this.label=r,this.iconPath=d.ThemeIcon.File,this.resourceUri=d.Uri.file(r).with({scheme:Oi,query:JSON.stringify({status:i,fileName:r})});let m=d.Uri.file(r).with({scheme:Oi,query:JSON.stringify({fileName:r,branch:a})}),S=d.Uri.file(r).with({scheme:Oi,query:JSON.stringify({fileName:r,branch:o})});switch(i){case nt.ADD:m=d.Uri.file(r).with({scheme:Oi,query:JSON.stringify({fileName:r,branch:a,isEmpty:!0})});break;case nt.RENAME:m=d.Uri.file(n).with({scheme:Oi,query:JSON.stringify({fileName:n,branch:a,isEmpty:!0})});break;case nt.DELETE:S=d.Uri.file(r).with({scheme:Oi,query:JSON.stringify({fileName:r,branch:o,isEmpty:!0})});break}this.command={title:"Open Diff",command:"vscode.diff",arguments:[m,S,`${r} (Pull Request Preview)`]}}getTreeItem(){return this}}function Jc(t){return t.filter(e=>e instanceof ia)}var wg=Object.defineProperty,sa=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?wg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Oi="githubpr";class _g{constructor(e,r,n,i,a,o,m){this.repository=e,this.baseOwner=r,this.baseBranchName=n,this._compareOwner=i,this.compareBranchName=a,this.compareHasUpstream=o,this.folderRepoManager=m,sa(this,"_view"),sa(this,"_onDidChangeTreeData",new d.EventEmitter),sa(this,"onDidChangeTreeData",this._onDidChangeTreeData.event),sa(this,"_contentProvider"),sa(this,"_disposables",[]),sa(this,"_gitHubRepository"),this._view=d.window.createTreeView("github:compareChanges",{treeDataProvider:this}),this._gitHubRepository=this.folderRepoManager.gitHubRepositories.find(S=>S.remote.owner===this._compareOwner),this._disposables.push(this._view)}get view(){return this._view}updateBaseBranch(e){this.baseBranchName=e,this._onDidChangeTreeData.fire()}updateBaseOwner(e){this.baseOwner=e,this._onDidChangeTreeData.fire()}async reveal(e,r){return this._view.reveal(e,r)}refresh(){this._onDidChangeTreeData.fire()}async updateHasUpstream(e){var r;if(((r=this.repository.state.HEAD)==null?void 0:r.name)===e){const n=await this.repository.getBranch(e);this.compareHasUpstream=!!n.upstream}else this.compareHasUpstream=!0}async updateCompareBranch(e){await this.updateHasUpstream(e),this.compareBranchName=e,this._onDidChangeTreeData.fire()}get compareOwner(){return this._compareOwner}set compareOwner(e){this._gitHubRepository=this.folderRepoManager.gitHubRepositories.find(r=>r.remote.owner===e),this._contentProvider&&this._gitHubRepository&&(this._contentProvider.gitHubRepository=this._gitHubRepository),this._compareOwner=e,this._onDidChangeTreeData.fire()}getTreeItem(e){return e.getTreeItem()}async getChildren(){if(this.compareHasUpstream)d.commands.executeCommand("setContext","github:noUpstream",!1);else return d.commands.executeCommand("setContext","github:noUpstream",!0),this._view.message=void 0,[];if(!this._gitHubRepository)return[];this._contentProvider||(this._contentProvider=new Eg(this._gitHubRepository),this._disposables.push(d.workspace.registerTextDocumentContentProvider(Oi,this._contentProvider)));const{octokit:e,remote:r}=await this._gitHubRepository.ensure();try{const{data:n}=await e.repos.compareCommits({repo:r.repositoryName,owner:r.owner,base:`${this.baseOwner}:${this.baseBranchName}`,head:`${this.compareOwner}:${this.compareBranchName}`});return n.files.length?this._view.message=void 0:this._view.message=`There are no commits between the base '${this.baseBranchName}' branch and the comparing '${this.compareBranchName}' branch`,n.files.map(i=>new bg(this,i.filename,i.previous_filename,ga(i.status),n.merge_base_commit.sha,this.compareBranchName))}catch(n){return P.appendLine(`Comparing changes failed: ${n}`),[]}}dispose(){this._disposables.forEach(e=>e.dispose()),this._contentProvider=void 0}}class Eg{constructor(e){this.gitHubRepository=e}async provideTextDocumentContent(e,r){var n;const i=Hu(e);if(!i||i.isEmpty)return"";const{octokit:a,remote:o}=await this.gitHubRepository.ensure(),m=await a.repos.getContent({owner:o.owner,repo:o.repositoryName,path:i.fileName,ref:i.branch}),S=(n=m.data.content)!=null?n:"";return po.Buffer.from(S,m.data.encoding).toString()}}var Sg=Object.defineProperty,Ka=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Sg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class kg{constructor(e){this.repository=e,Ka(this,"_disposables",[]),Ka(this,"_createPRViewProvider"),Ka(this,"_treeView"),Ka(this,"_onDidCreate",new d.EventEmitter),Ka(this,"onDidCreate",this._onDidCreate.event)}registerListeners(e){this._disposables.push(this._createPRViewProvider.onDone(async r=>{var n,i;d.commands.executeCommand("setContext","github:createPullRequest",!1),(n=this._createPRViewProvider)==null||n.dispose(),this._createPRViewProvider=void 0,(i=this._treeView)==null||i.dispose(),this._treeView=void 0,this._disposables.forEach(a=>a.dispose()),r&&this._onDidCreate.fire(r)})),this._disposables.push(this._createPRViewProvider.onDidChangeCompareBranch(r=>{var n;(n=this._treeView)==null||n.updateCompareBranch(r)})),this._disposables.push(this._createPRViewProvider.onDidChangeCompareRemote(r=>{this._treeView&&(this._treeView.compareOwner=r.owner)})),this._disposables.push(this._createPRViewProvider.onDidChangeBaseBranch(r=>{var n;(n=this._treeView)==null||n.updateBaseBranch(r)})),this._disposables.push(this._createPRViewProvider.onDidChangeBaseRemote(r=>{var n;(n=this._treeView)==null||n.updateBaseOwner(r.owner)})),e&&this._disposables.push(this.repository.state.onDidChange(r=>{this._createPRViewProvider&&this.repository.state.HEAD&&(this._createPRViewProvider.compareBranch=this.repository.state.HEAD)}))}get isCreatingPullRequest(){return!!this._createPRViewProvider}async ensureDefaultsAreLocal(e,r){if(e.gitHubRepositories.some(n=>n.remote.owner===r.owner&&n.remote.repositoryName===r.repo))return r;{const n=await e.getOrigin(),i=await e.getMetadata(n.remote.remoteName);return{owner:i.owner.login,repo:i.name,base:i.default_branch}}}async create(e,r,n){var i;await r.loginAndUpdate(),d.commands.executeCommand("setContext","github:createPullRequest",!0);const a=(i=n?await r.repository.getBranch(n):void 0)!=null?i:r.repository.state.HEAD;if(!this._createPRViewProvider){const o=await this.ensureDefaultsAreLocal(r,await r.getPullRequestDefaults(a));this._createPRViewProvider=new hg(e,r,o,a);const m=await r.getOrigin(a);this._treeView=new _g(this.repository,o.owner,o.base,m.remote.owner,a.name,!!a.upstream,r),this.registerListeners(!n),this._disposables.push(d.window.registerWebviewViewProvider(this._createPRViewProvider.viewType,this._createPRViewProvider))}this._createPRViewProvider.show(a)}}var Tg=Object.defineProperty,np=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Tg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class ip{constructor(e,r,n,i,a=`${e}:${r}`){this.owner=e,this.name=r,this.description=n,this.remote=i,this.label=a,np(this,"detail"),np(this,"picked")}static fromRemote(e){return new this(e.owner,e.repositoryName,e.url,e)}}function Ya(t){return t===void 0||t===0?0:t-1}function hy(t,e){for(let r=0;r<t.length;r++){const n=t[r];for(let i=0;i<n.diffLines.length;i++)if(n.diffLines[i].positionInHunk===e)return n.diffLines[i]}}function Zc(t,e){const r=Ui(t);let n=r.next(),i=0;for(;!n.done;){const a=n.value;if(!(a.oldLineNumber>e))if(a.oldLineNumber+a.oldLength-1<e)i+=a.newLength-a.oldLength;else return i+=a.newLength-a.oldLength,e+i;n=r.next()}return e+i}function ed(t,e){const r=Ui(t);let n=r.next(),i=0;for(;!n.done;){const a=n.value;if(!(a.newLineNumber>e))if(a.newLineNumber+a.newLength-1<e)i+=a.oldLength-a.newLength;else return i+=a.oldLength-a.newLength,e+i;n=r.next()}return e+i}function sp(t,e){const r=[];for(let n=0;n<t.length;n++){const i=t[n];let a,o;if(e){let m;for(let S=0;S<i.diffLines.length;S++){const T=i.diffLines[S];T.type===$r.Delete?(a!==void 0||(a=Ya(T.oldLineNumber)),m=Ya(T.oldLineNumber)):a!==void 0&&m!==void 0&&(r.push(new d.Range(a,0,m,0)),a=void 0,m=void 0)}a!==void 0&&m!==void 0&&(r.push(new d.Range(a,0,m,0)),a=void 0,m=void 0)}else i.newLineNumber&&(a=Ya(i.newLineNumber),o=Ya(i.newLength),r.push(new d.Range(a,0,a+o,0)))}return r}var Rg=Object.defineProperty,si=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Rg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Cg{constructor(e,r,n,i,a){this._reviewManager=e,this._reposManager=r,this._repository=n,this._localFileChanges=i,this._sessionState=a,si(this,"_localToDispose",[]),si(this,"_onDidChangeComments",new d.EventEmitter),si(this,"onDidChangeComments",this._onDidChangeComments.event),si(this,"_commentHandlerId"),si(this,"_commentController"),si(this,"_workspaceFileChangeCommentThreads",{}),si(this,"_reviewSchemeFileChangeCommentThreads",{}),si(this,"_obsoleteFileChangeCommentThreads",{}),si(this,"_visibleNormalTextEditors",[]),si(this,"_pendingCommentThreadAdds",[]),this._commentController=d.comments.createCommentController(`github-review-${r.activePullRequest.number}`,r.activePullRequest.title),this._commentController.commentingRangeProvider=this,this._commentController.reactionHandler=this.toggleReaction.bind(this),this._localToDispose.push(this._commentController),this._commentHandlerId=Nh(),ns(this._commentHandlerId,this)}get commentController(){return this._commentController}async initialize(){this._visibleNormalTextEditors=d.window.visibleTextEditors.filter(e=>e.document.uri.scheme!=="comment"),await this._reposManager.activePullRequest.validateDraftMode(),await this.initializeCommentThreads(),await this.registerListeners()}createOutdatedCommentThread(e,r){const n=r.comments[0].originalCommitId,i=d.Uri.file($.join(`commit~${n.substr(0,8)}`,e)),a=cn(i,e,void 0,n,!0,{base:r.diffSide===Gt.LEFT},this._repository.rootUri),o=new d.Range(new d.Position(r.originalLine-1,0),new d.Position(r.originalLine-1,0));return Qa(a,o,r,this._commentController)}async createWorkspaceCommentThread(e,r,n){let i=n.line;const a=await this._repository.diffWithHEAD(r);a&&(i=Zc(a,n.line));const o=new d.Range(new d.Position(i-1,0),new d.Position(i-1,0));return Qa(e,o,n,this._commentController)}createReviewCommentThread(e,r,n){var i;if(!((i=this._reposManager.activePullRequest)==null?void 0:i.mergeBase))throw new Error("Cannot create review comment thread without an active pull request base.");const a=cn(e,r,void 0,this._reposManager.activePullRequest.mergeBase,!1,{base:!0},this._repository.rootUri),o=new d.Range(new d.Position(n.line-1,0),new d.Position(n.line-1,0));return Qa(a,o,n,this._commentController)}async initializeCommentThreads(){if(!this._reposManager.activePullRequest||!this._reposManager.activePullRequest.isResolved())return;const e=this._reposManager.activePullRequest.reviewThreadsCache,r=we(e,n=>n.path);Object.keys(r).forEach(n=>{const i=r[n],a=i[0];if(a){const o=$.join(this._repository.rootUri.path,a.path).replace(/\\/g,"/"),m=this._repository.rootUri.with({path:o});let S=[],T=[],A=[];const H=i.map(async Y=>{Y.isOutdated?A.push(this.createOutdatedCommentThread(n,Y)):Y.diffSide===Gt.RIGHT?S.push(await this.createWorkspaceCommentThread(m,n,Y)):T.push(this.createReviewCommentThread(m,n,Y))});Promise.all(H),this._workspaceFileChangeCommentThreads[n]=S,this._reviewSchemeFileChangeCommentThreads[n]=T,this._obsoleteFileChangeCommentThreads[n]=A}})}async registerListeners(){this._localToDispose.push(this._reposManager.activePullRequest.onDidChangePendingReviewState(e=>{[this._workspaceFileChangeCommentThreads,this._obsoleteFileChangeCommentThreads,this._reviewSchemeFileChangeCommentThreads].forEach(r=>{for(const n in r)r[n].forEach(i=>{Bh(i,e),ra(i)})})})),this._localToDispose.push(this._reposManager.activePullRequest.onDidChangeReviewThreads(e=>{e.added.forEach(async r=>{const{path:n}=r,i=this._pendingCommentThreadAdds.findIndex(async m=>{const S=this.gitRelativeRootPath(m.uri.path);if(S!==r.path)return!1;const T=await this.getContentDiff(m.uri,S);return ed(T,m.range.start.line)+1===r.line});let a;if(i>-1)a=this._pendingCommentThreadAdds[i],a.gitHubThreadId=r.id,a.comments=r.comments.map(m=>new yr(m,a)),this._pendingCommentThreadAdds.splice(i,1);else{const m=$.join(this._repository.rootUri.path,n).replace(/\\/g,"/"),S=this._repository.rootUri.with({path:m});r.isOutdated?a=this.createOutdatedCommentThread(n,r):r.diffSide===Gt.RIGHT?a=await this.createWorkspaceCommentThread(S,n,r):a=this.createReviewCommentThread(S,n,r)}const o=r.isOutdated?this._obsoleteFileChangeCommentThreads:r.diffSide===Gt.RIGHT?this._workspaceFileChangeCommentThreads:this._reviewSchemeFileChangeCommentThreads;o[n]?o[n].push(a):o[n]=[a]}),e.changed.forEach(r=>{const n=r.isOutdated?this._obsoleteFileChangeCommentThreads:r.diffSide===Gt.RIGHT?this._workspaceFileChangeCommentThreads:this._reviewSchemeFileChangeCommentThreads,i=n[r.path].findIndex(a=>a.gitHubThreadId===r.id);if(i>-1){const a=n[r.path][i];Cu(a,r)}}),e.removed.forEach(r=>{const n=r.isOutdated?this._obsoleteFileChangeCommentThreads:r.diffSide===Gt.RIGHT?this._workspaceFileChangeCommentThreads:this._reviewSchemeFileChangeCommentThreads,i=n[r.path].findIndex(a=>a.gitHubThreadId===r.id);if(i>-1){const a=n[r.path][i];n[r.path].splice(i,1),a.dispose()}})})),this._localToDispose.push(this._sessionState.onDidChangeCommentsExpandState(e=>{this.updateCommentExpandState(e)}))}updateCommentExpandState(e){if(!this._reposManager.activePullRequest)return;function r(o,m){if(m.size!==0)for(const S of m.keys()){const T=m.get(S),A=o[S];for(const H of A){const Y=T.get(H.gitHubThreadId);Cu(H,Y,e)}}}const n=new Map,i=new Map,a=new Map;for(const o of this._reposManager.activePullRequest.reviewThreadsCache){let m;o.isOutdated?m=n:o.diffSide===Gt.RIGHT?m=a:m=i,m.has(o.path)||m.set(o.path,new Map),m.get(o.path).set(o.id,o)}r(this._obsoleteFileChangeCommentThreads,n),r(this._reviewSchemeFileChangeCommentThreads,i),r(this._workspaceFileChangeCommentThreads,a)}visibleEditorsEqual(e,r){if(e=e.filter(n=>n.document.uri.scheme!=="comment"),r=r.filter(n=>n.document.uri.scheme!=="comment"),e=Se(e,n=>n.document.uri.toString()),r=Se(r,n=>n.document.uri.toString()),e.length!==r.length)return!1;for(let n=0;n<e.length;n++)if(!r.find(a=>a.document.uri.toString()===e[n].document.uri.toString()))return!1;return!0}hasCommentThread(e){if(e.uri.scheme==="review")return!0;const r=d.workspace.getWorkspaceFolder(e.uri);return r?!!(e.uri.scheme===r.uri.scheme&&e.uri.fsPath.startsWith(this._repository.rootUri.fsPath)):!1}async provideCommentingRanges(e,r){let n=e.uri.query&&e.uri.query!==""?Fi(e.uri.query):void 0;if(n){const a=this.findMatchedFileChangeForReviewDiffView(this._localFileChanges,e.uri);if(a)return sp(a.diffHunks,n.base)}const i=d.workspace.getWorkspaceFolder(e.uri);if(!!i&&e.uri.scheme===i.uri.scheme){if(!this._reposManager.activePullRequest.isResolved())return;const a=this.gitRelativeRootPath(e.uri.path),o=Jc(this._localFileChanges).find(S=>S.fileName===a),m=[];if(o){const S=o.diffHunks;if(o.status===nt.RENAME&&S.length===0)return[];const T=await this.getContentDiff(e.uri,o.fileName);for(let A=0;A<S.length;A++){const H=S[A],Y=Zc(T,H.newLineNumber),pe=Zc(T,H.newLineNumber+H.newLength-1);Y>0&&pe>0&&m.push(new d.Range(Y-1,0,pe-1,0))}}return m}}async getContentDiff(e,r){var n;const i=d.window.visibleTextEditors.find(a=>a.document.uri.toString()===e.toString());if(!((n=this._reposManager.activePullRequest)==null?void 0:n.head))throw new Error("Cannot get content diff without an active pull request head.");if(i&&i.document.isDirty){const a=i.document.getText(),m=(await this._repository.getObjectDetails(this._reposManager.activePullRequest.head.sha,r)).object,S=await this._repository.hashObject(a);return await this._repository.diffBlobs(m,S)}else return await this._repository.diffWith(this._reposManager.activePullRequest.head.sha,r)}findMatchedFileChangeForReviewDiffView(e,r){const n=Fi(r.query),i=e.filter(a=>{if(a instanceof Wa||a.fileName!==n.path)return!1;if(a.filePath.scheme!=="review"&&a.sha===n.commit)return!0;const o=a.filePath.query?JSON.parse(a.filePath.query):void 0;if(o&&o.commit===n.commit)return!0;const m=a.parentFilePath.query?JSON.parse(a.parentFilePath.query):void 0;return!!(m&&m.commit===n.commit)});if(i&&i.length)return i[0]}gitRelativeRootPath(e){return $.relative(this._repository.rootUri.path,e).replace(/\\/g,"/")}getCommentSide(e){return e.uri.scheme==="review"&&Fi(e.uri.query).base?Gt.LEFT:Gt.RIGHT}async startReview(e,r){const n=e.comments.length,i=this.optimisticallyAddComment(e,r,!0);try{if(n){const a=e.comments[0];if(a instanceof yr)await this._reposManager.activePullRequest.createCommentReply(r,a._rawComment.graphNodeId,!1);else throw new Error("Cannot reply to temporary comment")}else{const a=this.gitRelativeRootPath(e.uri.path),o=this.getCommentSide(e);this._pendingCommentThreadAdds.push(e);let m;if(o===Gt.RIGHT){const S=await this.getContentDiff(e.uri,a);m=ed(S,e.range.start.line)}else m=e.range.start.line;await this._reposManager.activePullRequest.createReviewThread(r,a,m+1,o)}}catch(a){d.window.showErrorMessage(`Starting review failed: ${a}`),e.comments=e.comments.map(o=>(o instanceof un&&o.id===i&&(o.mode=d.CommentMode.Editing),o))}}async openReview(){await this._reviewManager.openDescription(),wn.scrollToReview()}optimisticallyAddComment(e,r,n){const i=this._reposManager.getCurrentUser(this._reposManager.activePullRequest),a=new un(e,r,n,i);return this.updateCommentThreadComments(e,[...e.comments,a]),a.id}updateCommentThreadComments(e,r){e.comments=r,ra(e)}optimisticallyEditComment(e,r){const n=this._reposManager.getCurrentUser(this._reposManager.activePullRequest),i=new un(e,r.body instanceof d.MarkdownString?r.body.value:r.body,!!r.label,n,r);return e.comments=e.comments.map(a=>a instanceof yr&&a.commentId===r.commentId?i:a),i.id}async createOrReplyComment(e,r,n,i){var a;if(!this._reposManager.activePullRequest)throw new Error("Cannot create comment without an active pull request.");const o=e.comments.length,m=n?!1:i!==void 0?i:this._reposManager.activePullRequest.hasPendingReview,S=this.optimisticallyAddComment(e,r,m);try{if(o){const T=e.comments[0];if(T instanceof yr)await this._reposManager.activePullRequest.createCommentReply(r,T._rawComment.graphNodeId,n);else throw new Error("Cannot reply to temporary comment")}else{const T=this.gitRelativeRootPath(e.uri.path);this._pendingCommentThreadAdds.push(e);const A=this.getCommentSide(e);let H;if(A===Gt.RIGHT){const Y=await this.getContentDiff(e.uri,T);H=ed(Y,e.range.start.line)}else H=e.range.start.line;await this._reposManager.activePullRequest.createReviewThread(r,T,H+1,A,n)}n&&await this._reposManager.activePullRequest.submitReview()}catch(T){((a=T.graphQLErrors)==null?void 0:a.length)&&T.graphQLErrors[0].type==="NOT_FOUND"?d.window.showWarningMessage("The comment that you're replying to was deleted. Refresh to update.","Refresh").then(A=>{A==="Refresh"&&this._reviewManager.updateComments()}):d.window.showErrorMessage(`Creating comment failed: ${T}`),e.comments=e.comments.map(A=>(A instanceof un&&A.id===S&&(A.mode=d.CommentMode.Editing),A))}}async createCommentOnResolve(e,r){if(!this._reposManager.activePullRequest)throw new Error("Cannot create comment on resolve without an active pull request.");const n=await this._reposManager.activePullRequest.getPendingReviewId();await this.createOrReplyComment(e,r,!n)}async resolveReviewThread(e,r){try{r&&await this.createCommentOnResolve(e,r),await this._reposManager.activePullRequest.resolveReviewThread(e.gitHubThreadId)}catch(n){d.window.showErrorMessage(`Resolving conversation failed: ${n}`)}}async unresolveReviewThread(e,r){try{r&&await this.createCommentOnResolve(e,r),await this._reposManager.activePullRequest.unresolveReviewThread(e.gitHubThreadId)}catch(n){d.window.showErrorMessage(`Unresolving conversation failed: ${n}`)}}async editComment(e,r){if(r instanceof yr){const n=this.optimisticallyEditComment(e,r);try{if(!this._reposManager.activePullRequest)throw new Error("Unable to find active pull request");await this._reposManager.activePullRequest.editReviewComment(r._rawComment,r.body instanceof d.MarkdownString?r.body.value:r.body)}catch(i){d.window.showErrorMessage(ke(i)),e.comments=e.comments.map(a=>a instanceof un&&a.id===n?new yr(r._rawComment,e):a)}}else this.createOrReplyComment(e,r.body instanceof d.MarkdownString?r.body.value:r.body,!1)}async deleteComment(e,r){try{if(!this._reposManager.activePullRequest)throw new Error("Unable to find active pull request");r instanceof yr?await this._reposManager.activePullRequest.deleteReviewComment(r.commentId):e.comments=e.comments.filter(i=>!(i instanceof un&&i.id===r.id)),e.comments.length===0?e.dispose():ra(e);const n=await this._reposManager.activePullRequest.validateDraftMode();n!==this._reposManager.activePullRequest.hasPendingReview&&(this._reposManager.activePullRequest.hasPendingReview=n),this.update(this._localFileChanges)}catch(n){throw new Error(ke(n))}}async update(e){await this._reposManager.activePullRequest.validateDraftMode(),this._localFileChanges=e}async toggleReaction(e,r){try{if(!this._reposManager.activePullRequest)throw new Error("Unable to find active pull request");e.reactions&&!e.reactions.find(n=>n.label===r.label&&!!n.authorHasReacted)?await this._reposManager.activePullRequest.addCommentReaction(e._rawComment.graphNodeId,r):await this._reposManager.activePullRequest.deleteCommentReaction(e._rawComment.graphNodeId,r)}catch(n){throw new Error(ke(n))}}dispose(){this._commentController&&this._commentController.dispose(),is(this._commentHandlerId),this._localToDispose.forEach(e=>e.dispose())}}var Pg=Object.defineProperty,cr=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Pg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const ap=class{constructor(t,e,r,n,i,a,o){this._context=t,this._repository=e,this._folderRepoManager=r,this._telemetry=n,this.changesInPrDataProvider=i,this._showPullRequest=a,this._sessionState=o,cr(this,"_localToDispose",[]),cr(this,"_disposables"),cr(this,"_comments",[]),cr(this,"_localFileChanges",[]),cr(this,"_obsoleteFileChanges",[]),cr(this,"_lastCommitSha"),cr(this,"_updateMessageShown",!1),cr(this,"_validateStatusInProgress"),cr(this,"_reviewCommentController"),cr(this,"_statusBarItem"),cr(this,"_prNumber"),cr(this,"_previousRepositoryState"),cr(this,"_webviewViewProvider"),cr(this,"_createPullRequestHelper"),cr(this,"_switchingToReviewMode"),cr(this,"justSwitchedToReviewMode",!1),cr(this,"_isFirstLoad",!0),this._switchingToReviewMode=!1,this._disposables=[],this._previousRepositoryState={HEAD:e.state.HEAD,remotes:Ks(this._repository)},this.registerListeners(),this.updateState(!0),this.pollForStatusChange()}get switchingToReviewMode(){return this._switchingToReviewMode}set switchingToReviewMode(t){this._switchingToReviewMode=t,t||this.updateState()}registerListeners(){this._disposables.push(this._repository.state.onDidChange(t=>{const e=this._previousRepositoryState.HEAD,r=this._repository.state.HEAD;if(!e&&!r)return;let n;!e||!r?n=!1:n=e.upstream?r.upstream&&e.upstream.name===r.upstream.name&&e.upstream.remote===r.upstream.remote:!r.upstream;const i=n&&e.ahead===r.ahead&&e.behind===r.behind&&e.commit===r.commit&&e.name===r.name&&e.remote===r.remote&&e.type===r.type,a=Ks(this._repository),o=this._previousRepositoryState.remotes.length===a.length&&this._previousRepositoryState.remotes.every(m=>a.some(S=>m.equals(S)));(!i||!o)&&(this._previousRepositoryState={HEAD:this._repository.state.HEAD,remotes:a},this.updateState(!0))})),this._disposables.push(d.workspace.onDidChangeConfiguration(t=>{this.updateFocusedViewMode()})),this._disposables.push(this._folderRepoManager.onDidChangeActivePullRequest(t=>{this.updateFocusedViewMode()})),this._disposables.push(d.window.registerTerminalLinkProvider(new cg(this,this._folderRepoManager)))}get statusBarItem(){return this._statusBarItem||(this._statusBarItem=d.window.createStatusBarItem("github.pullrequest.status",d.StatusBarAlignment.Left),this._statusBarItem.name="GitHub Active Pull Request"),this._statusBarItem}get repository(){return this._repository}get localFileChanges(){return this._localFileChanges}pollForStatusChange(){setTimeout(async()=>{this._validateStatusInProgress||await this.updateComments(),this.pollForStatusChange()},1e3*60*5)}async checkBranchUpToDate(t){var e,r;const n=this._repository.state.HEAD;if(n){const i=n.upstream?n.upstream.remote:null;if(i&&(await this._repository.fetch(i,(e=this._repository.state.HEAD)==null?void 0:e.name),!this._context.globalState.get(Pc,!1)&&!this._updateMessageShown&&(this._lastCommitSha&&t.head.sha!==this._lastCommitSha||n.behind!==void 0&&n.behind>0))){this._updateMessageShown=!0;const o="Pull",m="Never show again";await d.window.showInformationMessage(`There are updates available for pull request ${t.number}: ${t.title}.`,{},o,m)===o?(((r=this._repository.state.HEAD)==null?void 0:r.name)===n.name&&await this._repository.pull(),this._updateMessageShown=!1):m&&await this._context.globalState.update(Pc,!0)}}}async updateState(t=!1,e=!0){if(!this.switchingToReviewMode)return this._validateStatusInProgress?(P.appendLine("Review> Queuing additional validate state"),this._validateStatusInProgress=this._validateStatusInProgress.then(async r=>await this.validateStatueAndSetContext(t,e)),this._validateStatusInProgress):(P.appendLine("Review> Validate state in progress"),this._validateStatusInProgress=this.validateStatueAndSetContext(t,e),this._validateStatusInProgress)}async validateStatueAndSetContext(t,e){await this.validateState(t,e),await d.commands.executeCommand("setContext","github:stateValidated",!0)}async validateState(t,e){if(P.appendLine("Review> Validating state..."),await this._folderRepoManager.updateRepositories(!1),!this._repository.state.HEAD){this.clear(!0);return}const r=this._repository.state.HEAD;let n=await this._folderRepoManager.getMatchingPullRequestMetadataForBranch();if(!n){P.appendLine(`Review> no matching pull request metadata found for current branch ${r.name}`);const A=await this._folderRepoManager.getMatchingPullRequestMetadataFromGitHub();A&&(xn.associateBranchWithPullRequest(this._repository,A.model,r.name),n=A)}if(!n){P.appendLine(`Review> no matching pull request metadata found on GitHub for current branch ${r.name}`),this.clear(!0);return}const i=r.commit!==this._lastCommitSha&&r.ahead===0&&r.behind===0;if(this._prNumber===n.prNumber&&!i){d.commands.executeCommand("pr.refreshList");return}if(!(r.upstream?r.upstream.remote:null)){P.appendLine(`Review> current branch ${this._repository.state.HEAD.name} hasn't setup remote yet`),this.clear(!0);return}P.appendLine(`Review> current branch ${this._repository.state.HEAD.name} is associated with pull request #${n.prNumber}`),this.clear(!1),this._prNumber=n.prNumber,this._lastCommitSha=void 0;const{owner:o,repositoryName:m}=n;P.appendLine("Review> Resolving pull request");const S=await this._folderRepoManager.resolvePullRequest(o,m,n.prNumber);if(!S||!S.isResolved()){this._prNumber=void 0,P.appendLine("Review> This PR is no longer valid");return}if(S.isClosed){this.clear(!0),P.appendLine("Review> This PR is closed");return}this._folderRepoManager.activePullRequest=S,this._lastCommitSha=S.head.sha,this._isFirstLoad&&(this._isFirstLoad=!1,this.checkBranchUpToDate(S)),P.appendLine("Review> Fetching pull request data"),await this.getPullRequestData(S),await this.changesInPrDataProvider.addPrToView(this._folderRepoManager,S,this._localFileChanges,this._comments,this.justSwitchedToReviewMode),this.justSwitchedToReviewMode=!1,P.appendLine("Review> register comments provider"),await this.registerCommentController();const T=this._context.workspaceState.get(Li);if(this._webviewViewProvider?this._webviewViewProvider.updatePullRequest(S):(this._webviewViewProvider=new lg(this._context.extensionUri,this._folderRepoManager,S),this._context.subscriptions.push(d.window.registerWebviewViewProvider(this._webviewViewProvider.viewType,this._webviewViewProvider)),this._context.subscriptions.push(d.commands.registerCommand("pr.refreshActivePullRequest",A=>{var H;(H=this._webviewViewProvider)==null||H.refresh()}))),this.statusBarItem.text=`$(git-pull-request) Pull Request #${this._prNumber}`,this.statusBarItem.command={command:"pr.openDescription",title:"View Pull Request Description",arguments:[S]},P.appendLine("Review> display pull request status bar indicator and refresh pull request tree view."),this.statusBarItem.show(),d.commands.executeCommand("pr.refreshList"),P.appendLine(`Review> using focus mode = ${T}.`),P.appendLine(`Review> state validation silent = ${t}.`),P.appendLine(`Review> PR show should show = ${this._showPullRequest.shouldShow}.`),(!t||this._showPullRequest.shouldShow)&&T)this._doFocusShow(e);else if(!this._showPullRequest.shouldShow&&T){const A=this._showPullRequest.onChangedShowValue(H=>{P.appendLine(`Review> PR show value changed = ${H}.`),H&&this._doFocusShow(e),A.dispose()});this._localToDispose.push(A)}this._validateStatusInProgress=void 0}_doFocusShow(t){var e;if((e=this._webviewViewProvider)==null||e.show(),t&&this.localFileChanges.length>0){let r;for(const n of this.localFileChanges)if(n.status===nt.MODIFY){r=n;break}r=r!=null?r:this.localFileChanges[0],r.openDiff(this._folderRepoManager)}}async updateComments(){const t=this._repository.state.HEAD;if(!t)return;const e=await this._folderRepoManager.getMatchingPullRequestMetadataForBranch();if(!e||!(t.upstream?t.upstream.remote:null)||this._prNumber===void 0||!this._folderRepoManager.activePullRequest)return;const n=await this._folderRepoManager.resolvePullRequest(e.owner,e.repositoryName,this._prNumber);if(!n||!n.isResolved()){P.appendLine("Review> This PR is no longer valid");return}return await this.checkBranchUpToDate(n),await this.getPullRequestData(n),await this._reviewCommentController.update(this._localFileChanges),Promise.resolve(void 0)}async getLocalChangeNodes(t,e,r){const n=[],i=t.mergeBase||t.base.sha,a=t.head.sha;for(let o=0;o<e.length;o++){const m=e[o];let S=[];if(m instanceof mo)S=m.diffHunks;else if(m.status!==nt.RENAME)try{const me=await this._repository.diffBetween(t.base.sha,t.head.sha,m.fileName);S=fa(me)}catch(me){P.appendLine(`Failed to parse patch for outdated comments: ${me}`)}const T=$.join(this._repository.rootUri.path,m.fileName).replace(/\\/g,"/"),A=this._repository.rootUri.with({path:T}),H=m.status===nt.DELETE?cn(A,void 0,void 0,"",!1,{base:!1},this._repository.rootUri):A,Y=cn(A,m.status===nt.RENAME?m.previousFileName:m.fileName,void 0,m.status===nt.ADD?"":i,!1,{base:!0},this._repository.rootUri),pe=new ia(this.changesInPrDataProvider,this._folderRepoManager,t,m.status,m.fileName,m.blobUrl,H,Y,S,r.filter(me=>me.path===m.fileName),a);n.push(pe)}return n}async getPullRequestData(t){try{this._comments=await t.getReviewComments(),await t.initializeReviewThreadCache(),await t.getPullRequestFileViewState();const e=this._comments.filter(m=>m.position),r=this._comments.filter(m=>!m.position),n=await t.getFileChangesInfo(),i=t.mergeBase||t.base.sha,a=await Ns(n,this._repository,i);this._localFileChanges=await this.getLocalChangeNodes(t,a,e);const o=we(r,m=>m.originalCommitId);this._obsoleteFileChanges=[];for(const m in o){const S=o[m],T=we(S,A=>A.path);for(const A in T){let H=[];try{const be=await this._repository.diffBetween(t.base.sha,m,A);H=fa(be)}catch(be){P.appendLine(`Failed to parse patch for outdated comments: ${be}`)}const Y=T[A],pe=d.Uri.file($.join(`commit~${m.substr(0,8)}`,A)),me=new ia(this.changesInPrDataProvider,this._folderRepoManager,t,nt.MODIFY,A,void 0,cn(pe,A,void 0,Y[0].originalCommitId,!0,{base:!1},this._repository.rootUri),cn(pe,A,void 0,Y[0].originalCommitId,!0,{base:!0},this._repository.rootUri),H,Y,m);this._obsoleteFileChanges.push(me)}}return Promise.resolve(void 0)}catch(e){P.appendLine(`Review> ${e}`)}}async registerCommentController(){this._reviewCommentController=new Cg(this,this._folderRepoManager,this._repository,this._localFileChanges,this._sessionState),await this._reviewCommentController.initialize(),this._localToDispose.push(this._reviewCommentController),this._localToDispose.push(this._reviewCommentController.onDidChangeComments(t=>{this._comments=t}))}async switch(t){P.appendLine(`Review> switch to Pull Request #${t.number} - start`),this.statusBarItem.text="$(sync~spin) Switching to Review Mode",this.statusBarItem.command=void 0,this.statusBarItem.show(),this.switchingToReviewMode=!0;try{await this._folderRepoManager.checkoutExistingPullRequestBranch(t)||await this._folderRepoManager.fetchAndCheckout(t)}catch(e){P.appendLine(`Review> checkout failed #${JSON.stringify(e)}`),this.switchingToReviewMode=!1,e.message==="User aborted"||(e.gitErrorCode&&(e.gitErrorCode===gr.LocalChangesOverwritten||e.gitErrorCode===gr.DirtyWorkTree)?d.window.showErrorMessage("Your local changes would be overwritten by checkout, please commit your changes or stash them before you switch branches"):e.stderr.startsWith("fatal: couldn't find remote ref")?d.window.showErrorMessage("The remote branch for this pull request has been deleted. The pull request cannot be checked out."):d.window.showErrorMessage(ke(e))),this._folderRepoManager.activePullRequest?this.setStatusForPr(this._folderRepoManager.activePullRequest):(this.statusBarItem.hide(),this.switchingToReviewMode=!1);return}try{this.statusBarItem.text=`$(sync~spin) Fetching additional data: pr/${t.number}`,this.statusBarItem.command=void 0,this.statusBarItem.show(),await this._folderRepoManager.fulfillPullRequestMissingInfo(t),this._telemetry.sendTelemetryEvent("pr.checkout"),P.appendLine(`Review> switch to Pull Request #${t.number} - done`,ap.ID)}finally{this.setStatusForPr(t),await this._repository.status()}}setStatusForPr(t){this.switchingToReviewMode=!1,this.justSwitchedToReviewMode=!0,this.statusBarItem.text=`Pull Request #${t.number}`,this.statusBarItem.command=void 0,this.statusBarItem.show()}async publishBranch(t){const e=await this._folderRepoManager.getAllGitHubRemotes();let r=(await this.getRemote(e,`Pick a remote to publish the branch '${t.name}' to:`)).remote;if(!r||t.name===void 0)return;const n=this._folderRepoManager.createGitHubRepository(r,this._folderRepoManager.credentialStore),i=await n.getViewerPermission();if(i===Yr.Read||i===Yr.Triage||i===Yr.Unknown){const o=await this._folderRepoManager.tryOfferToFork(n);if(!o)return;r=this._folderRepoManager.getGitHubRemotes().find(m=>m.remoteName===o)}if(!r)return;const a=r;return new Promise(async o=>{const m=d.window.createInputBox();m.value=t.name,m.ignoreFocusOut=!0,m.prompt=e.length===1?`The branch '${t.name}' is not published yet, pick a name for the upstream branch`:"Pick a name for the upstream branch";const S=async function(T){try{m.busy=!0,await this._reposManager.getBranch(a,T)?m.validationMessage=`Branch ${T} already exists in ${a.owner}/${a.repositoryName}`:m.validationMessage=void 0}catch(A){m.validationMessage=void 0}m.busy=!1};await S(t.name),m.onDidChangeValue(S.bind(this)),m.onDidAccept(async()=>{m.validationMessage=void 0,m.hide();try{await this._repository.push(a.remoteName,`${t.name}:${m.value}`,!0)}catch(A){throw A.gitErrorCode===gr.PushRejected&&(d.window.showWarningMessage("Can't push refs to remote, try running 'git pull' first to integrate with your change",{modal:!0}),o(void 0)),A.gitErrorCode===gr.RemoteConnectionError&&(d.window.showWarningMessage(`Could not read from remote repository '${a.remoteName}'. Please make sure you have the correct access rights and the repository exists.`,{modal:!0}),o(void 0)),A}const T=await this._repository.getBranch(t.name);(!T||!T.upstream)&&o(void 0),o(T)}),m.show()})}async getRemote(t,e,r){if(!t.length){d.window.showWarningMessage("No GitHub remotes found. Add a remote and try again.");return}if(t.length===1&&!r)return ip.fromRemote(t[0]);if(t.length===1&&r&&r.owner===t[0].owner&&r.name===t[0].repositoryName)return r;let n=!1;const i=t.map(o=>{const m=ip.fromRemote(o);if(r){const{owner:S,name:T}=r;m.picked=m.owner===S&&m.name===T,m.picked&&(n=!0)}return m});!n&&r&&i.unshift(r);const a=await d.window.showQuickPick(i,{ignoreFocusOut:!0,placeHolder:e});if(!!a)return a}async createPullRequest(t){this._createPullRequestHelper||(this._createPullRequestHelper=new kg(this.repository),this._createPullRequestHelper.onDidCreate(async e=>{await this.updateState(!1,!1);const r=this.changesInPrDataProvider.getDescriptionNode(this._folderRepoManager);await nd(this._context,this._telemetry,e,r,this._folderRepoManager)})),this._createPullRequestHelper.create(this._context.extensionUri,this._folderRepoManager,t)}async openDescription(){const t=this._folderRepoManager.activePullRequest;if(!t)return;const e=this.changesInPrDataProvider.getDescriptionNode(this._folderRepoManager);await nd(this._context,this._telemetry,t,e,this._folderRepoManager)}get isCreatingPullRequest(){var t,e;return(e=(t=this._createPullRequestHelper)==null?void 0:t.isCreatingPullRequest)!=null?e:!1}async updateFocusedViewMode(){d.workspace.getConfiguration(Br).get("focusedMode")?(d.commands.executeCommand("setContext",Li,!0),await this._context.workspaceState.update(Li,!0)):(d.commands.executeCommand("setContext",Li,!1),this._context.workspaceState.update(Li,!1))}clear(t){this._updateMessageShown=!1,this._localToDispose.forEach(e=>e.dispose()),t&&(this._prNumber=void 0,this._folderRepoManager.activePullRequest=void 0,this._statusBarItem&&this._statusBarItem.hide(),this.changesInPrDataProvider&&this.changesInPrDataProvider.removePrFromView(this._folderRepoManager),this._comments=[],d.commands.executeCommand("pr.refreshList"))}async provideTextDocumentContent(t){const{path:e,commit:r}=Fi(t.query);let n=Jc(this._localFileChanges).filter(i=>i.fileName===e).filter(i=>i.sha===r||(i.parentSha?i.parentSha:`${i.sha}^`)===r);if(n.length){const i=n[0],a=r===i.sha?$r.Delete:$r.Add;return i.diffHunks.map(m=>m.diffLines.filter(S=>S.type!==a).map(S=>S.text)).reduce((m,S)=>m.concat(...S),[]).join(`
`)}if(n=Jc(this._obsoleteFileChanges).filter(i=>i.fileName===e).filter(i=>i.sha===r||(i.parentSha?i.parentSha:`${i.sha}^`)===r),n.length){const i=n[0],a=r===i.sha?$r.Delete:$r.Add,o=[],m=we(i.comments,S=>String(S.originalPosition));for(const S in m){if(!m[S][0].diffHunks)continue;const T=m[S][0].diffHunks.map(A=>A.diffLines.filter(H=>H.type!==a).map(H=>H.text)).reduce((A,H)=>A.concat(...H),[]);o.push(...T)}return o.join(`
`)}}dispose(){this.clear(!0),this._disposables.forEach(t=>{t.dispose()})}static getReviewManagerForRepository(t,e){return t.find(r=>r._folderRepoManager.gitHubRepositories.some(n=>n.equals(e)))}static getReviewManagerForFolderManager(t,e){return t.find(r=>r._folderRepoManager===e)}};let Ji=ap;cr(Ji,"ID","Review");class Ng{constructor(){cr(this,"_shouldShow",!1),cr(this,"_onChangedShowValue",new d.EventEmitter),cr(this,"onChangedShowValue",this._onChangedShowValue.event)}get shouldShow(){return this._shouldShow}set shouldShow(e){const r=this._shouldShow;this._shouldShow=e,r!==this._shouldShow&&this._onChangedShowValue.fire(this._shouldShow)}}var Ag=Object.defineProperty,td=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Ag(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class _s extends jr{constructor(e,r,n,i){super();this.parent=e,this.label=r,this.iconPath=n,this.pullRequestModel=i,td(this,"command"),td(this,"contextValue"),td(this,"tooltip"),this.command={title:"View Pull Request Description",command:"pr.openDescription",arguments:[this]},this.contextValue="description",this.tooltip=`Description of pull request #${i.number}`,this.accessibilityInformation={label:`Pull request page of pull request number ${i.number}`,role:"button"}}getTreeItem(){return this}}var Ig=Object.defineProperty,op=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Ig(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Dg{constructor(){op(this,"_onDidChange",new d.EventEmitter),op(this,"_prFileChangeContentProviders",{})}get onDidChange(){return this._onDidChange.event}fireDidChange(e){this._onDidChange.fire(e)}async provideTextDocumentContent(e,r){const n=Dr(e);if(n&&n.prNumber){const i=this._prFileChangeContentProviders[n.prNumber];if(i)return await i(e)}return""}registerTextDocumentContentProvider(e,r){return this._prFileChangeContentProviders[e]=r,{dispose:()=>{delete this._prFileChangeContentProviders[e]}}}}const Og=new Dg;function up(){return Og}var xg=Object.defineProperty,rd=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?xg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Es extends jr{constructor(e,r){super();this.parent=e,this.label=r,rd(this,"collapsibleState"),rd(this,"children",[]),rd(this,"pathToChild",new Map),this.collapsibleState=d.TreeItemCollapsibleState.Expanded}async getChildren(){return this.children}finalize(){this.trimTree(),this.sort()}trimTree(){if(this.children.length===0||(this.children.forEach(r=>{r instanceof Es&&r.trimTree()}),this.children.length!==1))return;const e=this.children[0];e instanceof Es&&(this.label=this.label+"/"+e.label,this.label.startsWith("/")&&(this.label=this.label.substr(1)),this.children=e.children)}sort(){if(this.children.length<=1)return;const e=[],r=[];this.children.forEach(n=>{n instanceof Es?(n.sort(),e.push(n)):r.push(n)}),e.sort((n,i)=>n.label<i.label?-1:1),r.sort((n,i)=>n.label<i.label?-1:1),this.children=[...e,...r]}addFile(e){const r=e.fileName.split("/");e.description="",this.addPathRecc(r,e)}addPathRecc(e,r){if(e.length<=0)return;if(e.length===1){this.children.push(r);return}const n=e[0],i=e.slice(1);let a=this.pathToChild.get(n);a||(a=new Es(this,n),this.pathToChild.set(n,a),this.children.push(a)),a.addPathRecc(i,r)}getTreeItem(){return this}}var Mg=Object.defineProperty,aa=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Mg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const lp=class extends jr{constructor(t,e,r,n){super();this.parent=t,this._folderReposManager=e,this.pullRequestModel=r,this._isLocal=n,aa(this,"_fileChanges"),aa(this,"_commentController"),aa(this,"_disposables",[]),aa(this,"_inMemPRContentProvider"),aa(this,"_command")}get command(){return this._command}set command(t){this._command=t}async getChildren(){P.debug(`Fetch children of PRNode #${this.pullRequestModel.number}`,lp.ID),this.pullRequestModel.onDidInvalidate(()=>this.refresh(this));try{this.childrenDisposables&&this.childrenDisposables.length&&(this.childrenDisposables.forEach(n=>n.dispose()),this.childrenDisposables=[]);const t=new _s(this,"Description",new d.ThemeIcon("git-pull-request"),this.pullRequestModel);if(!this.pullRequestModel.isResolved())return[t];await this.pullRequestModel.initializeReviewThreadCache(),await this.pullRequestModel.getPullRequestFileViewState(),this._fileChanges=await this.resolveFileChanges(),this._inMemPRContentProvider||(this._inMemPRContentProvider=up().registerTextDocumentContentProvider(this.pullRequestModel.number,this.provideDocumentContent.bind(this))),this._commentController||await this.resolvePRCommentController(),await this.pullRequestModel.validateDraftMode();const e=[t];if(d.workspace.getConfiguration("githubPullRequests").get("fileListLayout")==="tree"){const n=new Es(this,"");this._fileChanges.forEach(i=>n.addFile(i)),n.finalize(),n.label===""?e.push(...n.children):e.push(n)}else e.push(...this._fileChanges);return this.childrenDisposables=e,e}catch(t){return P.appendLine(t),[]}}async resolvePRCommentController(){await this.pullRequestModel.githubRepository.ensureCommentsController(),this._commentController=this.pullRequestModel.githubRepository.commentsController,this._disposables.push(this.pullRequestModel.githubRepository.commentsHandler.registerCommentingRangeProvider(this.pullRequestModel.number,this)),this._disposables.push(this.pullRequestModel.githubRepository.commentsHandler.registerCommentController(this.pullRequestModel.number,this.pullRequestModel,this._folderReposManager)),this.registerListeners()}registerListeners(){this._disposables.push(this.pullRequestModel.onDidChangePendingReviewState(async t=>{t||(await this.getFileChanges()).forEach(e=>{e instanceof xu&&e.comments.forEach(r=>r.isDraft=t)})}))}async getFileChanges(){return this._fileChanges||(this._fileChanges=await this.resolveFileChanges()),this._fileChanges}async resolveFileChanges(){if(!this.pullRequestModel.isResolved())return[];const t=await this.pullRequestModel.getReviewComments(),e=await this.pullRequestModel.getFileChangesInfo(),r=this.pullRequestModel.mergeBase;return r?(await Ns(e,this._folderReposManager.repository,r)).map(i=>{const a=this.pullRequestModel.head.sha,o=i.status===nt.RENAME?i.previousFileName:i.fileName;return i instanceof qi?new Wa(this,this.pullRequestModel,i.status,i.fileName,i.previousFileName,i.blobUrl,Gn(d.Uri.file(Hn(this._folderReposManager.repository.rootUri,i.fileName)),this.pullRequestModel,i.baseCommit,a,i.fileName,!1,i.status),Gn(d.Uri.file(Hn(this._folderReposManager.repository.rootUri,o)),this.pullRequestModel,i.baseCommit,a,i.fileName,!0,i.status)):(console.log(d.Uri.file(Hn(this._folderReposManager.repository.rootUri,i.fileName))),new xu(this._folderReposManager,this,this.pullRequestModel,i.status,i.fileName,i.previousFileName,i.blobUrl,Gn(d.Uri.file(Hn(this._folderReposManager.repository.rootUri,i.fileName)),this.pullRequestModel,i.baseCommit,a,i.fileName,!1,i.status),Gn(d.Uri.file(Hn(this._folderReposManager.repository.rootUri,o)),this.pullRequestModel,i.baseCommit,a,i.fileName,!0,i.status),i.isPartial,i.patch,i.diffHunks,t.filter(S=>S.path===i.fileName&&S.position!==null)))}):[]}getTreeItem(){const t=this.pullRequestModel.equals(this._folderReposManager.activePullRequest),{title:e,number:r,author:n,isDraft:i,html_url:a}=this.pullRequestModel,{login:o}=n,m=t?"\u2713 ":"",S=t?"Current Branch * ":"",T=r.toString(),A=`${m}#${T}: ${i?"[DRAFT] ":""}${e}`,H=`${S}${e} by @${o}`,Y=`by @${o}`;return{label:A,id:`${this.parent instanceof jr?this.parent.label:""}${a}`,tooltip:H,description:Y,collapsibleState:1,contextValue:"pullrequest"+(this._isLocal?":local":"")+(t?":active":":nonactive"),iconPath:this.pullRequestModel.userAvatarUri?this.pullRequestModel.userAvatarUri:new d.ThemeIcon("github"),accessibilityInformation:{label:`${i?"Draft ":""}Pull request number ${T}: ${e} by ${o}`}}}async provideCommentingRanges(t,e){if(t.uri.scheme==="pr"){const r=Dr(t.uri);if(!r||r.prNumber!==this.pullRequestModel.number)return;const n=(await this.getFileChanges()).find(i=>i.fileName===r.fileName);return!n||n instanceof Wa?void 0:sp(n.diffHunks,r.isBase)}}async provideDocumentContent(t){const e=Dr(t);if(!e)return"";const r=(await this.getFileChanges()).find(n=>n.fileName===e.fileName);if(!r)return P.appendLine(`PR> can not find content for document ${t.toString()}`),"";if(e.isBase&&r.status===nt.ADD||!e.isBase&&r.status===nt.DELETE)return"";if(r instanceof Wa||r.isPartial)try{return e.isBase?this.pullRequestModel.getFile(r.previousFileName||r.fileName,e.baseCommit):this.pullRequestModel.getFile(r.fileName,e.headCommit)}catch(n){return P.appendLine(`PR> Fetching file content failed: ${n}`),d.window.showWarningMessage("Opening this file locally failed. Would you like to view it on GitHub?","Open on GitHub").then(i=>{i==="Open on GitHub"&&d.commands.executeCommand("vscode.open",d.Uri.parse(r.blobUrl))}),""}if(r instanceof xu)if(r.status===nt.ADD||r.status===nt.DELETE)if(e.isBase){const i=[];for(let a=0;a<r.diffHunks.length;a++)for(let o=0;o<r.diffHunks[a].diffLines.length;o++){const m=r.diffHunks[a].diffLines[o];m.type===$r.Add||(m.type===$r.Delete?i.push(m.text):m.type===$r.Control||i.push(m.text))}return i.join(`
`)}else{const i=[];for(let a=0;a<r.diffHunks.length;a++)for(let o=0;o<r.diffHunks[a].diffLines.length;o++){const m=r.diffHunks[a].diffLines[o];m.type===$r.Add?i.push(m.text):m.type===$r.Delete||m.type===$r.Control||i.push(m.text)}return i.join(`
`)}else{const i=r.status===nt.RENAME?r.previousFileName:r.fileName,a=d.Uri.joinPath(this._folderReposManager.repository.rootUri,i),o=await this._folderReposManager.repository.show(e.baseCommit,a.fsPath);return e.isBase?o:Zu(o,r.patch)}return""}dispose(){super.dispose(),this._inMemPRContentProvider&&this._inMemPRContentProvider.dispose(),this._commentController=void 0,this._disposables.forEach(t=>t.dispose()),this._disposables=[]}};let oa=lp;aa(oa,"ID","PRNode");const Mu=new d.EventEmitter,cp=Mu.event;function Xa(t,e){if(e)return e instanceof oa?e.pullRequestModel:e;if(!t.activePullRequest)throw d.window.showErrorMessage("Unable to find current pull request."),new Error("Unable to find current pull request.");return t.activePullRequest}async function nd(t,e,r,n,i){const a=Xa(i,r);n==null||n.reveal(n,{select:!0,focus:!0}),await wn.createOrShow(t.extensionUri,i,a),e.sendTelemetryEvent("pr.openDescription")}async function ua(t,e,r){var n;if(t.length===1)return t[0];const i=t.map(a=>({label:e(a),itemValue:a}));return(n=await d.window.showQuickPick(i,r))==null?void 0:n.itemValue}async function Ja(t,e){t instanceof oa||t instanceof _s?d.commands.executeCommand("vscode.open",d.Uri.parse(t.pullRequestModel.html_url)):d.commands.executeCommand("vscode.open",d.Uri.parse(t.html_url)),e.sendTelemetryEvent("pr.openInGitHub")}function Fg(t,e,r,n,i,a,o){t.subscriptions.push(d.commands.registerCommand("pr.openPullRequestOnGitHub",async T=>{if(T)Ja(T,i);else{const A=r.folderManagers.map(H=>H.activePullRequest).filter(H=>!!H);if(A.length>=1){const H=await ua(A,Y=>Y.html_url);H&&Ja(H,i)}}})),t.subscriptions.push(d.commands.registerCommand("review.suggestDiff",async T=>{try{const A=await ua(r.folderManagers,$e=>$.basename($e.repository.rootUri.fsPath));if(!A||!A.activePullRequest)return;const{indexChanges:H,workingTreeChanges:Y}=A.repository.state;if(!H.length)if(Y.length)if(await d.window.showWarningMessage(`There are no staged changes to suggest.

Would you like to automatically stage all your of changes and suggest them?`,{modal:!0},"Yes")==="Yes")await d.commands.executeCommand("git.stageAll");else return;else{d.window.showInformationMessage("There are no changes to suggest.");return}const pe=await A.repository.diff(!0);let me=`Suggested edit:
`;T&&T.inputBox&&T.inputBox.value&&(me=`${T.inputBox.value}
`,T.inputBox.value="");const be=`${me}\`\`\`diff
${pe}
\`\`\``;await A.activePullRequest.createIssueComment(be),await d.commands.executeCommand("git.unstageAll");const Ne=$.join(A.repository.rootUri.fsPath,".git",`${A.activePullRequest.number}.diff`),Ae=new TextEncoder,Ge=d.Uri.file(Ne);await d.workspace.fs.writeFile(Ge,Ae.encode(pe)),await A.repository.apply(Ne,!0),await d.workspace.fs.delete(Ge)}catch(A){const H=`${A}${A.stderr?`
${A.stderr}`:""}`;P.appendLine(`Applying patch failed: ${H}`),d.window.showErrorMessage(`Applying patch failed: ${ke(A)}`)}})),t.subscriptions.push(d.commands.registerCommand("pr.openFileOnGitHub",async T=>{if(!(T instanceof Wa&&!await d.window.showInformationMessage(`${T.fileName} can't be opened locally. Do you want to open it on GitHub?`,"Open"))&&T.blobUrl)return d.commands.executeCommand("vscode.open",d.Uri.parse(T.blobUrl))})),t.subscriptions.push(d.commands.registerCommand("pr.copyCommitHash",T=>{d.env.clipboard.writeText(T.sha)})),t.subscriptions.push(d.commands.registerCommand("pr.openOriginalFile",async T=>{const A=r.getManagerForIssueModel(T.pullRequest);if(A){const H=await ca(T.parentFilePath,A.repository);d.commands.executeCommand("vscode.open",H||T.parentFilePath)}})),t.subscriptions.push(d.commands.registerCommand("pr.openModifiedFile",T=>{d.commands.executeCommand("vscode.open",T.filePath)})),t.subscriptions.push(d.commands.registerCommand("pr.openDiffView",T=>{const A=r.getManagerForIssueModel(T.pullRequest);!A||T.openDiff(A)})),t.subscriptions.push(d.commands.registerCommand("pr.deleteLocalBranch",async T=>{const A=r.getManagerForIssueModel(T.pullRequestModel);if(!A)return;const H=Xa(A,T),Y="delete branch (even if not merged)";let pe=null;try{await A.deleteLocalPullRequest(H)}catch(me){if(me.gitErrorCode===gr.BranchNotFullyMerged){if(await d.window.showErrorMessage(`The branch '${H.localBranchName}' is not fully merged, are you sure you want to delete it? `,Y)!==Y)return;try{await A.deleteLocalPullRequest(H,!0)}catch(Ne){pe=Ne}}else pe=me}pe?(i.sendTelemetryErrorEvent("pr.deleteLocalPullRequest.failure"),await d.window.showErrorMessage(`Deleting local pull request branch failed: ${pe}`)):(i.sendTelemetryEvent("pr.deleteLocalPullRequest.success"),d.commands.executeCommand("pr.refreshList"))}));function m(T){if(T){const A=d.Uri.file(T).toString();for(const H of n)if(H.repository.rootUri.toString()===A)return H}return ua(n,A=>$.basename(A.repository.rootUri.fsPath),{placeHolder:"Choose a repository to create a pull request in",ignoreFocusOut:!0})}function S(T){return!!(T==null?void 0:T.rootUri)}t.subscriptions.push(d.commands.registerCommand("pr.create",async T=>{var A,H;S(T)?(A=await m(T.rootUri.fsPath))==null||A.createPullRequest():(H=await m(T==null?void 0:T.repoPath))==null||H.createPullRequest(T==null?void 0:T.compareBranch)})),t.subscriptions.push(d.commands.registerCommand("pr.pick",async T=>{let A;T instanceof oa||T instanceof _s?A=T.pullRequestModel:A=T;const H=T instanceof Di;return i.sendTelemetryEvent("pr.checkout",{fromDescription:H.toString()}),d.window.withProgress({location:d.ProgressLocation.SourceControl,title:`Switching to Pull Request #${A.number}`},async()=>{var Y;await((Y=Ji.getReviewManagerForRepository(n,A.githubRepository))==null?void 0:Y.switch(A))})})),t.subscriptions.push(d.commands.registerCommand("pr.exit",async T=>{let A;T instanceof oa||T instanceof _s?A=T.pullRequestModel:A=T;const H=T instanceof Di;return i.sendTelemetryEvent("pr.exit",{fromDescription:H.toString()}),d.window.withProgress({location:d.ProgressLocation.SourceControl,title:"Exiting Pull Request"},async()=>{const Y=await A.githubRepository.getDefaultBranch(),pe=r.getManagerForIssueModel(A);pe&&pe.checkoutDefaultBranch(Y)})})),t.subscriptions.push(d.commands.registerCommand("pr.merge",async T=>{const A=r.getManagerForIssueModel(T==null?void 0:T.pullRequestModel);if(!A)return;const H=Xa(A,T);return H.base&&H.head&&!H.base.repositoryCloneUrl.equals(H.head.repositoryCloneUrl)&&Bc()?Ja(H,i):d.window.showWarningMessage("Are you sure you want to merge this pull request on GitHub?",{modal:!0},"Yes").then(async me=>{let be;if(me==="Yes")try{return be=await A.mergePullRequest(H),be}catch(Ne){return d.window.showErrorMessage(`Unable to merge pull request. ${ke(Ne)}`),be}})})),t.subscriptions.push(d.commands.registerCommand("pr.readyForReview",async T=>{const A=r.getManagerForIssueModel(T==null?void 0:T.pullRequestModel);if(!A)return;const H=Xa(A,T);return d.window.showWarningMessage("Are you sure you want to mark this pull request as ready to review on GitHub?",{modal:!0},"Yes").then(async Y=>{let pe;if(Y==="Yes")try{return pe=await H.setReadyForReview(),d.commands.executeCommand("pr.refreshList"),pe}catch(me){return d.window.showErrorMessage(`Unable to mark pull request as ready to review. ${ke(me)}`),pe}})})),t.subscriptions.push(d.commands.registerCommand("pr.close",async(T,A)=>{let H;if(T)H=T instanceof Di?T:T.pullRequestModel;else{const pe=r.folderManagers.map(me=>me.activePullRequest).filter(me=>!!me);H=await ua(pe,me=>`${me.number}: ${me.title}`,{placeHolder:"Pull request to close"})}if(!H)return;const Y=H;return d.window.showWarningMessage("Are you sure you want to close this pull request on GitHub? This will close the pull request without merging.",{modal:!0},"Yes","No").then(async pe=>{if(pe==="Yes")try{let me;A&&(me=await Y.createIssueComment(A));const be=await Y.close();return d.commands.executeCommand("pr.refreshList"),Mu.fire(be),me}catch(me){d.window.showErrorMessage(`Unable to close pull request. ${ke(me)}`),Mu.fire()}Mu.fire()})})),t.subscriptions.push(d.commands.registerCommand("pr.openDescription",async T=>{let A;if(T)A=T instanceof _s?T.pullRequestModel:T;else{const pe=r.folderManagers.map(me=>me.activePullRequest).filter(me=>!!me);pe.length>=1&&(A=await ua(pe,me=>me.title))}if(!A){P.appendLine("No pull request found.");return}const H=r.getManagerForIssueModel(A);if(!H)return;let Y;if(T instanceof _s)Y=T;else{const pe=Ji.getReviewManagerForFolderManager(n,H);if(!pe)return;Y=pe.changesInPrDataProvider.getDescriptionNode(H)}await nd(t,i,A,Y,H)})),t.subscriptions.push(d.commands.registerCommand("pr.refreshDescription",async()=>{wn.currentPanel&&wn.refresh()})),t.subscriptions.push(d.commands.registerCommand("pr.openDescriptionToTheSide",async T=>{const A=r.getManagerForIssueModel(T.pullRequestModel);if(!A)return;const H=T.pullRequestModel,Y=Xa(A,H);T.reveal(T,{select:!0,focus:!0}),wn.createOrShow(t.extensionUri,A,Y,!0),i.sendTelemetryEvent("pr.openDescriptionToTheSide")})),t.subscriptions.push(d.commands.registerCommand("pr.signin",async()=>{await r.authenticate()})),t.subscriptions.push(d.commands.registerCommand("pr.deleteLocalBranchesNRemotes",async()=>{for(const T of r.folderManagers)await T.deleteLocalBranchesNRemotes()})),t.subscriptions.push(d.commands.registerCommand("pr.signinAndRefreshList",async()=>{await r.authenticate()&&d.commands.executeCommand("pr.refreshList")})),t.subscriptions.push(d.commands.registerCommand("pr.configureRemotes",async()=>d.commands.executeCommand("workbench.action.openSettings",`@ext:${Vn} remotes`))),t.subscriptions.push(d.commands.registerCommand("pr.startReview",async T=>{i.sendTelemetryEvent("pr.startReview");const A=ir(T.thread);A&&A.startReview(T.thread,T.text)})),t.subscriptions.push(d.commands.registerCommand("pr.openReview",async T=>{i.sendTelemetryEvent("pr.openReview");const A=ir(T.thread);A&&await A.openReview(T.thread)})),t.subscriptions.push(d.commands.registerCommand("pr.resolveReviewThread",async T=>{i.sendTelemetryEvent("pr.resolveReviewThread");const A=ir(T.thread);A&&await A.resolveReviewThread(T.thread.value,T.text)})),t.subscriptions.push(d.commands.registerCommand("pr.unresolveReviewThread",async T=>{i.sendTelemetryEvent("pr.unresolveReviewThread");const A=ir(T.thread);A&&await A.unresolveReviewThread(T.thread.value,T.text)})),t.subscriptions.push(d.commands.registerCommand("pr.createComment",async T=>{i.sendTelemetryEvent("pr.createComment");const A=ir(T.thread);A&&A.createOrReplyComment(T.thread,T.text,!1)})),t.subscriptions.push(d.commands.registerCommand("pr.createSingleComment",async T=>{i.sendTelemetryEvent("pr.createSingleComment");const A=ir(T.thread);A&&A.createOrReplyComment(T.thread,T.text,!0)})),t.subscriptions.push(d.commands.registerCommand("pr.editComment",async T=>{i.sendTelemetryEvent("pr.editComment"),T.startEdit()})),t.subscriptions.push(d.commands.registerCommand("pr.editQuery",T=>(i.sendTelemetryEvent("pr.editQuery"),T.editQuery()))),t.subscriptions.push(d.commands.registerCommand("pr.cancelEditComment",async T=>{i.sendTelemetryEvent("pr.cancelEditComment"),T.cancelEdit()})),t.subscriptions.push(d.commands.registerCommand("pr.saveComment",async T=>{i.sendTelemetryEvent("pr.saveComment");const A=ir(T.parent);A&&await A.editComment(T.parent,T)})),t.subscriptions.push(d.commands.registerCommand("pr.deleteComment",async T=>{if(i.sendTelemetryEvent("pr.deleteComment"),await d.window.showWarningMessage("Delete comment?",{modal:!0},"Delete")==="Delete"){const H=ir(T.parent);H&&await H.deleteComment(T.parent,T)}})),t.subscriptions.push(d.commands.registerCommand("review.openFile",T=>{var A;const H=T instanceof ia?T.openFileCommand():tp(T);d.commands.executeCommand(H.command,...(A=H.arguments)!=null?A:[])})),t.subscriptions.push(d.commands.registerCommand("pr.refreshChanges",T=>{n.forEach(A=>{A.updateComments(),wn.refresh(),A.changesInPrDataProvider.refresh()})})),t.subscriptions.push(d.commands.registerCommand("pr.setFileListLayoutAsTree",T=>{d.workspace.getConfiguration("githubPullRequests").update("fileListLayout","tree",!0)})),t.subscriptions.push(d.commands.registerCommand("pr.setFileListLayoutAsFlat",T=>{d.workspace.getConfiguration("githubPullRequests").update("fileListLayout","flat",!0)})),t.subscriptions.push(d.commands.registerCommand("pr.refreshPullRequest",T=>{var A;const H=r.getManagerForIssueModel(T.pullRequestModel);H&&T.pullRequestModel.equals(H==null?void 0:H.activePullRequest)&&((A=Ji.getReviewManagerForFolderManager(n,H))==null||A.updateComments()),wn.refresh(),o.refresh(T)})),t.subscriptions.push(d.commands.registerCommand("pr.markFileAsViewed",async T=>{try{await T.pullRequest.markFileAsViewed(T.fileName)}catch(A){d.window.showErrorMessage(`Marked file as viewed failed: ${A}`)}})),t.subscriptions.push(d.commands.registerCommand("pr.unmarkFileAsViewed",async T=>{try{await T.pullRequest.unmarkFileAsViewed(T.fileName)}catch(A){d.window.showErrorMessage(`Marked file as not viewed failed: ${A}`)}})),t.subscriptions.push(d.commands.registerCommand("pr.expandAllComments",()=>{e.commentsExpandState=!0})),t.subscriptions.push(d.commands.registerCommand("pr.collapseAllComments",()=>{e.commentsExpandState=!1})),t.subscriptions.push(d.commands.registerCommand("pr.checkoutByNumber",async()=>{var T;const A=[];r.folderManagers.forEach(be=>{A.push(...be.gitHubRepositories.map(Ne=>({manager:be,repo:Ne})))});const H=await ua(A,be=>`${be.repo.remote.owner}/${be.repo.remote.repositoryName}`,{placeHolder:"Which GitHub repository do you want to checkout the pull request from?"});if(!H)return;const Y=/^#?(\d*)$/,pe=await d.window.showInputBox({ignoreFocusOut:!0,prompt:"Enter the a pull request number",validateInput:be=>{const Ne=be.match(Y);if(!Ne||Ne.length!==2||Number.isNaN(Number(Ne[1])))return"Value must be a number"}});if(pe===void 0||pe==="#")return;const me=await H.manager.fetchById(H.repo,Number(pe.match(Y)[1]));if(me)return(T=Ji.getReviewManagerForFolderManager(n,H.manager))==null?void 0:T.switch(me)}))}var Lg=Object.defineProperty,id=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Lg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class qg{constructor(e){id(this,"_commentsExpandState"),id(this,"_onDidChangeCommentsExpandState",new d.EventEmitter),id(this,"onDidChangeCommentsExpandState",this._onDidChangeCommentsExpandState.event);var r;const n=(r=d.workspace.getConfiguration(Br))==null?void 0:r.get(Ru);this._commentsExpandState=n===Uc,e.subscriptions.push(d.workspace.onDidChangeConfiguration(i=>{var a;if(i.affectsConfiguration(`${Br}.${Ru}`)){const o=(a=d.workspace.getConfiguration(Br))==null?void 0:a.get(Ru);this.commentsExpandState=o===Uc}}))}get commentsExpandState(){return this._commentsExpandState}set commentsExpandState(e){this._commentsExpandState=e,this._onDidChangeCommentsExpandState.fire(this._commentsExpandState)}}var la=it(9035),Ug=Object.defineProperty,dp=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Ug(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class $g{constructor(e){this.baseReporter=e,dp(this,"sharedProperties",{})}sendTelemetryEvent(e,r,n){var i;(i=this.baseReporter)==null||i.sendTelemetryEvent(e,{...this.sharedProperties,...r},n)}sendTelemetryErrorEvent(e,r,n){var i;(i=this.baseReporter)==null||i.sendTelemetryErrorEvent(e,{...this.sharedProperties,...r})}setSharedProperty(e,r){this.sharedProperties[e]=r}postEvent(e,r){const n={};for(const[i,a]of r)n[i]=a;this.sendTelemetryEvent(e,n)}async dispose(){var e;return(e=this.baseReporter)==null?void 0:e.dispose()}}function Gg(){switch(d.env.uriScheme){case"vscode":return la.aU.Public;case"vscode-insiders":return la.aU.Insiders;case"vscode-exploration":return la.aU.Internal;case"code-oss":return la.aU.Team;default:return la.aU.Public}}class Hg{constructor(){dp(this,"initializePromise",Promise.resolve())}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,r){}getTreatmentVariableAsync(e,r){return Promise.resolve(void 0)}}async function Vg(t,e){const r=t.extension.id,n=t.extension.packageJSON.name,i=t.extension.packageJSON.version,a=Gg();return n==="vscode-pull-request-github"?(0,la.X7)(r,i,a,e,t.globalState):new Hg}var Bg=Object.defineProperty,Za=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Bg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class py extends Error{constructor(e){super();this.repository=e}get message(){return`${this.repository.rootUri.toString()} has no GitHub remotes`}}class my extends Error{constructor(e){super();this.repository=e}get message(){return`${this.repository.rootUri.toString()} has a detached HEAD (create a branch first)`}}class fy extends Error{constructor(e,r,n){super();this.branchName=e,this.upstreamRef=r,this.problem=n}get message(){const{upstreamRef:{remote:e,name:r},branchName:n,problem:i}=this;return`The upstream ref ${e}/${r} for branch ${n} ${i}.`}}const gy="No Milestone";class hp{constructor(e,r,n,i){this._folderManagers=e,this._credentialStore=r,this._telemetry=n,this._sessionState=i,Za(this,"_subs"),Za(this,"_onDidChangeState",new d.EventEmitter),Za(this,"onDidChangeState",this._onDidChangeState.event),Za(this,"_state",_n.Initializing),this._subs=[],d.commands.executeCommand("setContext",Uh,this._state),this._subs.push(...e.map(a=>a.onDidLoadRepositories(o=>this.state=o)))}get folderManagers(){return this._folderManagers}insertFolderManager(e){const r=d.workspace.workspaceFolders;if(r){const n=r.findIndex(i=>i.uri.toString()===e.repository.rootUri.toString());if(n>-1){const i=this._folderManagers.slice(n,this._folderManagers.length);this._folderManagers=this._folderManagers.slice(0,n),this._folderManagers.push(e),this._folderManagers.push(...i);return}}this._folderManagers.push(e)}removeRepo(e){const r=this._folderManagers.findIndex(n=>n.repository.rootUri.toString()===e.rootUri.toString());if(r>-1){const n=this._folderManagers[r];this._folderManagers.splice(r),n.dispose()}}getManagerForIssueModel(e){if(e===void 0)return;const r=e.remote.url.substring(0,e.remote.url.length-$.extname(e.remote.url).length);for(const n of this._folderManagers)if(n.gitHubRepositories.map(i=>i.remote.url.substring(0,i.remote.url.length-$.extname(i.remote.url).length)).includes(r))return n}getManagerForFile(e){if(e.scheme==="untitled")return this._folderManagers[0];for(const r of this._folderManagers){const n=r.repository.rootUri.path,i=e.path.substring(n.length>1?n.length+1:n.length);if(rr(d.Uri.joinPath(r.repository.rootUri,i).path,e.path)===0)return r}}get state(){return this._state}set state(e){const r=e!==this._state;this._state=e,r&&(d.commands.executeCommand("setContext",Uh,e),this._onDidChangeState.fire())}get credentialStore(){return this._credentialStore}async clearCredentialCache(){await this._credentialStore.reset(),this.state=_n.Initializing}async authenticate(){const e=await this._credentialStore.login(Ot.github);let r;return Iu()&&(r=await this._credentialStore.login(Ot["github-enterprise"])),!!e||!!r}dispose(){this._subs.forEach(e=>e.dispose())}}Za(hp,"ID","RepositoriesManager");function vy(t){switch(t){case"committed":return EventType.Committed;case"mentioned":return EventType.Mentioned;case"subscribed":return EventType.Subscribed;case"commented":return EventType.Commented;case"reviewed":return EventType.Reviewed;default:return EventType.Other}}var jg=Object.defineProperty,ai=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?jg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class sd{constructor(e){ai(this,"_onDidOpenRepository",new d.EventEmitter),ai(this,"onDidOpenRepository",this._onDidOpenRepository.event),ai(this,"_onDidCloseRepository",new d.EventEmitter),ai(this,"onDidCloseRepository",this._onDidCloseRepository.event),ai(this,"_onDidChangeState",new d.EventEmitter),ai(this,"onDidChangeState",this._onDidChangeState.event),ai(this,"_onDidPublish",new d.EventEmitter),ai(this,"onDidPublish",this._onDidPublish.event),ai(this,"_gitAPI"),ai(this,"_disposables");const r=e.exports;try{this._gitAPI=r.getAPI(1)}catch(n){throw d.window.showErrorMessage("Activating the Pull Requests and Issues extension failed. Please make sure you have git installed."),n}this._disposables=[],this._disposables.push(this._gitAPI.onDidCloseRepository(n=>this._onDidCloseRepository.fire(n))),this._disposables.push(this._gitAPI.onDidOpenRepository(n=>this._onDidOpenRepository.fire(n))),this._disposables.push(this._gitAPI.onDidChangeState(n=>this._onDidChangeState.fire(n))),this._disposables.push(this._gitAPI.onDidPublish(n=>this._onDidPublish.fire(n)))}get repositories(){return this._gitAPI.repositories}get state(){return this._gitAPI.state}static async createProvider(){const e=d.extensions.getExtension("vscode.git");if(e)return await e.activate(),new sd(e)}dispose(){this._disposables.forEach(e=>e.dispose())}}var zg=Object.defineProperty,br=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?zg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Qg{constructor(e){this._liveShareAPI=e,br(this,"_onDidOpenRepository",new d.EventEmitter),br(this,"onDidOpenRepository",this._onDidOpenRepository.event),br(this,"_onDidCloseRepository",new d.EventEmitter),br(this,"onDidCloseRepository",this._onDidCloseRepository.event),br(this,"_openRepositories",[]),br(this,"_sharedServiceProxy"),br(this,"_disposables"),this._disposables=[]}get repositories(){return this._openRepositories}async initialize(){this._sharedServiceProxy=await this._liveShareAPI.getSharedService(da)||void 0,!!this._sharedServiceProxy&&(this._sharedServiceProxy.isServiceAvailable&&await this._refreshWorkspaces(!0),this._disposables.push(this._sharedServiceProxy.onDidChangeIsServiceAvailable(async e=>{await this._refreshWorkspaces(e)})),this._disposables.push(d.workspace.onDidChangeWorkspaceFolders(this._onDidChangeWorkspaceFolders.bind(this))))}async _onDidChangeWorkspaceFolders(e){e.added.forEach(async r=>{r.uri.scheme==="vsls"&&this._sharedServiceProxy&&this._sharedServiceProxy.isServiceAvailable&&await this.openVSLSRepository(r)}),e.removed.forEach(async r=>{r.uri.scheme==="vsls"&&this._sharedServiceProxy&&this._sharedServiceProxy.isServiceAvailable&&await this.closeVSLSRepository(r)})}async _refreshWorkspaces(e){d.workspace.workspaceFolders&&d.workspace.workspaceFolders.forEach(async r=>{r.uri.scheme==="vsls"&&(e?await this.openVSLSRepository(r):await this.closeVSLSRepository(r))})}async openVSLSRepository(e){if(this.getRepository(e))return;const n=new Yg(e,this._sharedServiceProxy),i=new Wg,a=new Proxy(n,i);await a.initialize(),this.openRepository(a)}async closeVSLSRepository(e){const r=this.getRepository(e);!r||this.closeRepository(r)}openRepository(e){this._openRepositories.push(e),this._onDidOpenRepository.fire(e)}closeRepository(e){this._openRepositories=this._openRepositories.filter(r=>r!==e),this._onDidCloseRepository.fire(e)}getRepository(e){return this._openRepositories.filter(r=>r.workspaceFolder===e)[0]}dispose(){this._sharedServiceProxy=void 0,this._disposables.forEach(e=>e.dispose()),this._disposables=[]}}class Wg{constructor(){}get(e,r){return r in e?e[r]:function(...n){return e.proxy.request(Ps,[r,e.workspaceFolder.uri.toString(),...n])}}}class Kg{constructor(e){br(this,"HEAD"),br(this,"refs"),br(this,"remotes"),br(this,"submodules",[]),br(this,"rebaseCommit"),br(this,"mergeChanges",[]),br(this,"indexChanges",[]),br(this,"workingTreeChanges",[]),br(this,"_onDidChange",new d.EventEmitter),br(this,"onDidChange",this._onDidChange.event),this.HEAD=e.HEAD,this.remotes=e.remotes,this.refs=e.refs}update(e){this.HEAD=e.HEAD,this.remotes=e.remotes,this.refs=e.refs,this._onDidChange.fire()}}class Yg{constructor(e,r){this.workspaceFolder=e,this.proxy=r,br(this,"rootUri"),br(this,"state")}async initialize(){const e=await this.proxy.request(Ps,[ha,this.workspaceFolder.uri.toString()]);this.state=new Kg(e),this.rootUri=d.Uri.parse(e.rootUri),this.proxy.onNotify(ho,this._notifyHandler.bind(this))}_notifyHandler(e){var r;(r=this.state)==null||r.update(e)}}var Xg=Object.defineProperty,pp=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Xg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Jg{constructor(e,r){this._liveShareAPI=e,this._api=r,pp(this,"_sharedService"),pp(this,"_disposables"),this._disposables=[]}async initialize(){this._sharedService=await this._liveShareAPI.shareService(da)||void 0,this._sharedService&&this._sharedService.onRequest(Ps,this._gitHandler.bind(this))}async _gitHandler(e){const r=e[0],n=e[1],i=d.Uri.parse(n),a=this._liveShareAPI.convertSharedUriToLocal(i),o=this._api.getGitProvider(a);if(!o)return;const m=o.repositories.filter(S=>S.rootUri.toString()===a.toString())[0];if(m){const S=e.slice(2);if(r===ha)return this._disposables.push(m.state.onDidChange(T=>{this._sharedService.notify(ho,{HEAD:m.state.HEAD,remotes:m.state.remotes,refs:m.state.refs})})),{HEAD:m.state.HEAD,remotes:m.state.remotes,refs:m.state.refs,rootUri:i.toString()};if(r==="show"){const T=S[1],A=i.with({path:T}),H=this._liveShareAPI.convertSharedUriToLocal(A);return S[1]=H.fsPath,m[r](...S)}if(m[r])return m[r](...S)}else return null}dispose(){this._disposables.forEach(e=>e.dispose()),this._sharedService=void 0,this._disposables=[]}}var Zg=Object.defineProperty,eo=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Zg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);async function ev(){const t=d.extensions.getExtension("ms-vsliveshare.vsliveshare");if(!t)return null;const e=t.isActive?t.exports:await t.activate();if(!e)return null;const r="0.3.967";return e.getApi?e.getApi(r):e.getApiAsync(r)}class tv{constructor(e){this._api=e,eo(this,"_liveShareAPI"),eo(this,"_host"),eo(this,"_guest"),eo(this,"_localDisposables"),eo(this,"_globalDisposables"),this._localDisposables=[],this._globalDisposables=[]}async initialize(){if(this._liveShareAPI||(this._liveShareAPI=await ev()),!!this._liveShareAPI)return this._globalDisposables.push(this._liveShareAPI.onDidChangeSession(e=>this._onDidChangeSession(e.session),this)),this._liveShareAPI.session&&this._onDidChangeSession(this._liveShareAPI.session),this._liveShareAPI}async _onDidChangeSession(e){if(this._localDisposables.forEach(r=>r.dispose()),e.role===1){this._host=new Jg(this._liveShareAPI,this._api),this._localDisposables.push(this._host),await this._host.initialize();return}e.role===2&&(this._guest=new Qg(this._liveShareAPI),this._localDisposables.push(this._guest),await this._guest.initialize(),this._localDisposables.push(this._api.registerGitProvider(this._guest)))}dispose(){this._liveShareAPI=void 0,this._localDisposables.forEach(e=>e.dispose()),this._globalDisposables.forEach(e=>e.dispose())}}function rv(t){return new tv(t)}async function nv(t,e){const r=await sd.createProvider();if(r)return e.registerGitProvider(r),r}var iv=Object.defineProperty,mp=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?iv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class sv{constructor(e){this.pullRequestManager=e,mp(this,"onNotifiedEmitter",new d.EventEmitter),mp(this,"onNotified",this.onNotifiedEmitter.event),e.folderManagers.forEach(r=>{r.onDidChangeAssignableUsers(n=>{this.notifySuggestedAccounts(n)})})}async requestAsync(e,r,n){let i=null;switch(e){case"initialize":i={description:"Pullrequest",capabilities:{supportsDispose:!1,supportsInviteLink:!1,supportsPresence:!1,supportsContactPresenceRequest:!1,supportsPublishPresence:!1}};const a=new Map;for(const o of this.pullRequestManager.folderManagers){const m=o.getAllAssignableUsers();if(!!m)for(const S of m)a.has(S.login)||a.set(S.login,S)}a.size>0&&this.notifySuggestedAccounts(Array.from(a.values()));break;default:throw new Error(`type:${e} not supported`)}return i}async notifySuggestedAccounts(e){let r;try{r=await this.getCurrentUserLogin()}catch(n){}r&&e.findIndex(n=>n.login===r)!==-1&&this.notifySuggestedUsers(e.filter(n=>n.email).map(n=>({id:n.login,displayName:n.name?n.name:n.login,email:n.email})),!0)}async getCurrentUserLogin(){var e;if(this.pullRequestManager.folderManagers.length===0)return;const r=await((e=this.pullRequestManager.folderManagers[0])==null?void 0:e.getOrigin());if(r){const n=r.hub.currentUser;if(n)return n.login}}notify(e,r){this.onNotifiedEmitter.fire({type:e,body:r})}notifySuggestedUsers(e,r){this.notify("suggestedUsers",{contacts:e,exclusive:r})}}var av=Object.defineProperty,fp=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?av(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class ov{constructor(){fp(this,"_extensionsDisposable"),fp(this,"_subscriptions",[]),this._extensionsDisposable=d.extensions.onDidChange(this.onExtensionsChanged,this),this.onExtensionsChanged()}dispose(){this._extensionsDisposable.dispose(),d.Disposable.from(...this._subscriptions).dispose()}register(e){this._subscriptions.push(e.registerActionRunner("createPullRequest",{partnerId:"ghpr",name:"GitHub Pull Requests and Issues",label:"Create Pull Request",run:function(r){r.branch.isRemote||d.commands.executeCommand("pr.create",{repoPath:r.repoPath,compareBranch:r.branch.name})}}))}async onExtensionsChanged(){var e;const r=(e=d.extensions.getExtension("eamodio.gitlens"))!=null?e:d.extensions.getExtension("eamodio.gitlens-insiders");if(r)if(this._extensionsDisposable.dispose(),r.isActive)this.register(await r.exports);else{let n=0;const i=setInterval(async()=>{r.isActive?(clearInterval(i),this.register(await r.exports)):(n++,n>60&&clearInterval(i))},1e3)}}}var uv=Object.defineProperty,Ss=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?uv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class gp{constructor(e,r,n,i,a){this.issueModel=e,this.manager=r,this.stateManager=n,this.shouldPromptForBranch=a,Ss(this,"repoChangeDisposable"),Ss(this,"_branchName"),Ss(this,"user"),Ss(this,"repo"),Ss(this,"_repoDefaults"),Ss(this,"_onDidChangeCurrentIssueState",new d.EventEmitter),Ss(this,"onDidChangeCurrentIssueState",this._onDidChangeCurrentIssueState.event),this.setRepo(i!=null?i:this.issueModel.githubRepository.remote)}setRepo(e){var r;for(let n=0;n<this.stateManager.gitAPI.repositories.length;n++){const i=this.stateManager.gitAPI.repositories[n];for(let a=0;a<i.state.remotes.length;a++){const o=i.state.remotes[a];if(o.name===(e==null?void 0:e.remoteName)&&((r=o.fetchUrl)==null?void 0:r.toLowerCase().search(`${e.owner.toLowerCase()}/${e.repositoryName.toLowerCase()}`))!==-1){this.repo=i;return}}}}get branchName(){return this._branchName}get repoDefaults(){return this._repoDefaults}get issue(){return this.issueModel}async startWorking(){var e;try{if(this._repoDefaults=await this.manager.getPullRequestDefaults(),await this.createIssueBranch()){await this.setCommitMessageAndGitEvent(),this._onDidChangeCurrentIssueState.fire();const r=this.manager.getCurrentUser(this.issueModel).login;return d.workspace.getConfiguration("githubIssues").get("assignWhenWorking")&&!((e=this.issueModel.assignees)==null?void 0:e.find(n=>n.login===r))&&(this.manager.gitHubRepositories.find(n=>n.remote.owner===this.issueModel.remote.owner&&n.remote.repositoryName===this.issueModel.remote.repositoryName)&&await this.manager.assignIssue(this.issueModel,r),await this.stateManager.refresh()),!0}}catch(r){d.window.showErrorMessage("There is no remote. Can't start working on an issue.")}return!1}dispose(){var e;(e=this.repoChangeDisposable)==null||e.dispose()}async stopWorking(){this.repo&&(this.repo.inputBox.value=""),this._repoDefaults&&await this.manager.repository.checkout(this._repoDefaults.base),this._onDidChangeCurrentIssueState.fire(),this.dispose()}getBasicBranchName(e){return`${e}/issue${this.issueModel.number}`}async branchExists(e){try{return!!await this.manager.repository.getBranch(e)}catch(r){}return!1}async createOrCheckoutBranch(e){try{return await this.branchExists(e)?await this.manager.repository.checkout(e):await this.manager.repository.createBranch(e,!0),!0}catch(r){return r.message!=="User aborted"&&d.window.showErrorMessage(`Unable to checkout branch ${e}. There may be file conflicts that prevent this branch change. Git error: ${r.error}`),!1}}async getUser(){return this.user||(this.user=await this.issueModel.githubRepository.getAuthenticatedUser()),this.user}async getBranchTitle(){var e;return(e=d.workspace.getConfiguration(vr).get(gh))!=null?e:this.getBasicBranchName(await this.getUser())}validateBranchName(e){const r=/[^ \\@\~\^\?\*\[]+/,n=e.match(r);if(n&&n.length>0&&n[0]!==e)return"Branch name cannot contain a space or the following characters: \\@~^?*["}showBranchNameError(e){const r="Edit Setting";d.window.showErrorMessage(e,r).then(n=>{n===r&&d.commands.executeCommand("workbench.action.openSettings",`${vr}.${gh}`)})}async createIssueBranch(){const e=this.shouldPromptForBranch?"prompt":d.workspace.getConfiguration(vr).get(vh);if(e==="off")return!0;const r=this.stateManager.getSavedIssueState(this.issueModel.number);this._branchName=this.shouldPromptForBranch?void 0:r.branch;const n=await wu(await this.getBranchTitle(),this.issue,void 0,await this.getUser());if(e==="on"&&this._branchName!==n&&(await this.branchExists(this._branchName)||(this._branchName=n)),this._branchName||(this._branchName=await d.window.showInputBox({value:n,prompt:"Enter the label for the new branch."})),!this._branchName)return!1;const i=this.validateBranchName(this._branchName);return i?(this.showBranchNameError(i),!1):(r.branch=this._branchName,await this.stateManager.setSavedIssueState(this.issueModel,r),await this.createOrCheckoutBranch(this._branchName)?!0:(this._branchName=void 0,!1))}async getCommitMessage(){const e=d.workspace.getConfiguration(vr).get(nf);if(typeof e=="string")return wu(e,this.issueModel,this._repoDefaults)}async setCommitMessageAndGitEvent(){const e=await this.getCommitMessage();this.repo&&e&&(this.repo.inputBox.value=e)}}var lv=Object.defineProperty,to=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?lv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const oi="newIssue",cv="NewIssue.md",Fu="Assignees:",ro="Labels:";function Lu(t){const e=JSON.parse(t.query);if(e.origin)return d.Uri.parse(e.origin)}class dv{constructor(){to(this,"content"),to(this,"createTime",0),to(this,"modifiedTime",0),to(this,"_onDidChangeFile",new d.EventEmitter),to(this,"onDidChangeFile",this._onDidChangeFile.event)}watch(e,r){const n=this.onDidChangeFile(i=>{i.length===0&&i[0].type===d.FileChangeType.Deleted&&n.dispose()});return n}stat(e){var r,n;return{type:d.FileType.File,ctime:this.createTime,mtime:this.modifiedTime,size:(n=(r=this.content)==null?void 0:r.length)!=null?n:0}}readDirectory(e){return[]}createDirectory(e){}readFile(e){var r;return(r=this.content)!=null?r:new Uint8Array(0)}writeFile(e,r,n={create:!1,overwrite:!1}){const i=this.content;this.content=r,i===void 0?(this.createTime=new Date().getTime(),this._onDidChangeFile.fire([{uri:e,type:d.FileChangeType.Created}])):(this.modifiedTime=new Date().getTime(),this._onDidChangeFile.fire([{uri:e,type:d.FileChangeType.Changed}]))}delete(e,r){this.content=void 0,this.createTime=0,this.modifiedTime=0,this._onDidChangeFile.fire([{uri:e,type:d.FileChangeType.Deleted}])}rename(e,r,n){}}class hv{constructor(e){this.manager=e}async provideCompletionItems(e,r,n,i){if(!e.lineAt(r.line).text.startsWith(ro))return[];const a=Lu(e.uri);if(!a)return[];const o=this.manager.getManagerForFile(a);if(!o)return[];const m=await o.getPullRequestDefaults();return(await o.getLabels(void 0,m)).map(T=>{const A=new d.CompletionItem(T.name,d.CompletionItemKind.Color);return A.documentation=`#${T.color}`,A.commitCharacters=[" ",","],A})}}class vp extends d.CompletionItem{constructor(e){super(`${e.number}: ${e.title}`,d.CompletionItemKind.Issue);this.issue=e}}class pv{constructor(e,r,n){this.stateManager=e,this.repositoriesManager=r,this.context=n}async provideCompletionItems(e,r,n,i){var a,o,m;if(e.languageId!=="scminput"&&e.uri.scheme!=="comment"&&r.character>0&&i.triggerKind===d.CompletionTriggerKind.Invoke&&!e.getText(e.getWordRangeAtPosition(r)).match(/#[0-9]*$/))return[];if(r.character<=6&&e.languageId==="markdown"&&e.getText(new d.Range(r.with(void 0,0),r))===new Array(r.character+1).join("#")&&e.uri.scheme!=="comment"&&i.triggerKind===d.CompletionTriggerKind.TriggerCharacter)return[];if(i.triggerKind===d.CompletionTriggerKind.TriggerCharacter&&d.workspace.getConfiguration(vr).get("ignoreCompletionTrigger",[]).find(be=>be===e.languageId))return[];if(e.languageId!=="scminput"&&!await xc(e,r))return[];let S=new d.Range(r,r);r.character-1>=0&&e.getText(new d.Range(r.translate(0,-1),r))==="#"&&(S=new d.Range(r.translate(0,-1),r)),await this.stateManager.tryInitializeAndWait();const T=new Map,A=new Date;let H,Y;if(e.languageId==="scminput")Y=Mc(e.uri);else if(e.uri.scheme==="comment")for(const be of d.window.visibleTextEditors){const Ne=d.workspace.getWorkspaceFolder(d.Uri.file(be.document.uri.fsPath));if(Ne){Y=Ne.uri;break}}else Y=e.uri.scheme===oi?(a=Lu(e.uri))!=null?a:e.uri:e.languageId==="scminput"?Mc(e.uri):e.uri;if(!Y)return[];let pe;try{pe=this.repositoriesManager.getManagerForFile(Y),H=await(pe==null?void 0:pe.getPullRequestDefaults())}catch(be){}const me=this.stateManager.getIssueCollection((o=pe==null?void 0:pe.repository.rootUri)!=null?o:Y);for(const be of me){const Ne=(m=await be[1])!=null?m:[];if(Ne.length!==0)if(Ne[0]instanceof Ar){let Ae=0;for(const Ge of Ne)T.set(Xs(Ge),await this.completionItemFromIssue(H,Ge,A,S,e,Ae++))}else for(let Ae=0;Ae<Ne.length;Ae++){const Ge=Ne[Ae];for(const $e of Ge.issues)T.set(Xs($e),await this.completionItemFromIssue(H,$e,A,S,e,Ae,Ge.milestone))}}return[...T.values()]}async completionItemFromIssue(e,r,n,i,a,o,m){var S;const T=new vp(r);if(a.languageId==="markdown")T.insertText=`[${Xs(r,e)}](${r.html_url})`;else{const H=d.workspace.getConfiguration(vr).get("issueCompletionFormatScm");a.uri.path.match(/scm\/git\/scm\d\/input/)&&typeof H=="string"?T.insertText=await wu(H,r,e):T.insertText=`${Xs(r,e)}`}T.documentation=r.body,T.range=i,T.detail=m?m.title:(S=r.milestone)==null?void 0:S.title;let A=(n.getTime()-new Date(r.updatedAt).getTime()).toString();return A=new Array(20-A.length).join("0")+A,T.sortText=`${o} ${A}`,T.filterText=`${T.detail} # ${r.number} ${r.title} ${T.documentation}`,T}async resolveCompletionItem(e,r){return e instanceof vp&&(e.documentation=await Dc(e.issue,this.context,this.repositoriesManager),e.command={command:"issues.issueCompletion",title:"Issue Completion Chose,"}),e}}class mv{constructor(e,r,n,i){this.manager=e,this.stateManager=r,this.context=n,this.telemetry=i}async provideHover(e,r,n){var i;if(!await Ch(e,r))return;let a=e.getWordRangeAtPosition(r,Ba);if(a&&a.start.character>0){a=new d.Range(new d.Position(a.start.line,a.start.character-1),a.end);const m=e.getText(a).match(Ba),S=Ac(m),T=(i=this.manager.getManagerForFile(e.uri))!=null?i:this.manager.folderManagers[0];if(!T)return;if(S&&m&&S.issueNumber<=this.stateManager.maxIssueNumber(T.repository.rootUri))return this.createHover(T,m[0],S,a)}else return}async createHover(e,r,n,i){const a=await sf(this.stateManager,e,r,n);if(!!a)return this.telemetry.sendTelemetryEvent("issues.issueHover"),new d.Hover(await Dc(a,this.context,this.manager,n.commentNumber),i)}}var fv=Object.defineProperty,yp=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?fv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class ks extends d.TreeItem{constructor(e,r,n){super(r,n);this.uri=e}get labelAsString(){var e;return typeof this.label=="string"?this.label:(e=this.label)==null?void 0:e.label}}class gv{constructor(e,r,n){this.stateManager=e,this.manager=r,this.context=n,yp(this,"_onDidChangeTreeData",new d.EventEmitter),yp(this,"onDidChangeTreeData",this._onDidChangeTreeData.event),n.subscriptions.push(this.manager.onDidChangeState(()=>{this._onDidChangeTreeData.fire()})),n.subscriptions.push(this.stateManager.onDidChangeIssueData(()=>{this._onDidChangeTreeData.fire()})),n.subscriptions.push(this.stateManager.onDidChangeCurrentIssue(()=>{this._onDidChangeTreeData.fire()}))}getTreeItem(e){var r;let n;return e instanceof ks?n=e:e instanceof ea?n=new ks(e.repository.rootUri,$.basename(e.repository.rootUri.fsPath),d.TreeItemCollapsibleState.Expanded):e instanceof Ar?(n=new ks(void 0,`${e.number}: ${e.title}`,d.TreeItemCollapsibleState.None),n.iconPath=e.isOpen?new d.ThemeIcon("issues",new d.ThemeColor("issues.open")):new d.ThemeIcon("issue-closed",new d.ThemeColor("issues.closed")),((r=this.stateManager.currentIssue(e.uri))==null?void 0:r.issue.number)===e.number?(n.label=`\u2713 ${n.label}`,n.contextValue="currentissue"):this.stateManager.getSavedIssueState(e.number).branch?n.contextValue="continueissue":n.contextValue="issue",Jm(e)&&(n.contextValue="link"+n.contextValue)):n=new ks(e.uri,e.milestone.title,e.issues.length>0?d.TreeItemCollapsibleState.Expanded:d.TreeItemCollapsibleState.None),n}getChildren(e){return e===void 0&&this.manager.state!==_n.RepositoriesLoaded?this.getStateChildren():this.getIssuesChildren(e)}async resolveTreeItem(e,r){return r instanceof Ar&&(e.tooltip=await Dc(r,this.context,this.manager)),e}getStateChildren(){return this.manager.state===_n.NeedsAuthentication?[]:[new ks(void 0,"Loading...")]}getQueryItems(e){const r=this.stateManager.getIssueCollection(e.repository.rootUri);if(r.size===1)return Array.from(r.values())[0];const n=Array.from(r.keys()),i=n[0];return n.map(a=>{const o=new ks(e.repository.rootUri,a);return o.contextValue="query",o.collapsibleState=a===i?d.TreeItemCollapsibleState.Expanded:d.TreeItemCollapsibleState.Collapsed,o})}getIssuesChildren(e){var r;return e===void 0?this.manager.folderManagers.length===1?this.getQueryItems(this.manager.folderManagers[0]):this.manager.folderManagers.length>1?this.manager.folderManagers:[]:e instanceof ea?this.getQueryItems(e):e instanceof ks?e.uri?(r=this.stateManager.getIssueCollection(e.uri).get(e.labelAsString))!=null?r:[]:[]:e instanceof Ar?[]:e.issues.map(n=>{const i=Object.assign(n);return i.uri=e.uri,i})}}var vv=Object.defineProperty,yv=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?vv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class bv{constructor(e){yv(this,"expression"),e.subscriptions.push(d.workspace.onDidChangeConfiguration(()=>{this.updateTriggers()})),this.updateTriggers()}updateTriggers(){const e=d.workspace.getConfiguration(vr).get("createIssueTriggers",[]);this.expression=e.length>0?new RegExp(e.join("|")):void 0}async provideCodeActions(e,r,n,i){if(this.expression===void 0||n.only&&n.only!==d.CodeActionKind.QuickFix)return[];const a=[];let o=r.start.line;do{const m=e.lineAt(o).text,S=m.substring(0,tf);if(!S.match(Ba)){const A=S.search(this.expression);if(A>=0){const H=new d.CodeAction("Create GitHub Issue",d.CodeActionKind.QuickFix),Y=S.substring(A).search(/\s/),pe=A+(Y>0?Y:S.match(this.expression)[0].length);H.command={title:"Create GitHub Issue",command:"issue.createIssueFromSelection",arguments:[{document:e,lineNumber:o,line:m,insertIndex:pe,range:r}]},a.push(H);break}}o++}while(r.end.line>=o);return a}}var wv=Object.defineProperty,ln=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?wv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const _v=["Recovery"],Ev="currentIssue",ad="issues",bp="ignoreMilestones",od=[{label:"My Issues",query:"default"}];class yy extends null{constructor(){super(...arguments);ln(this,"uri")}}class Sv{constructor(e,r,n){this.gitAPI=e,this.manager=r,this.context=n,ln(this,"resolvedIssues",new Map),ln(this,"_singleRepoStates",new Map),ln(this,"_onRefreshCacheNeeded",new d.EventEmitter),ln(this,"onRefreshCacheNeeded",this._onRefreshCacheNeeded.event),ln(this,"_onDidChangeIssueData",new d.EventEmitter),ln(this,"onDidChangeIssueData",this._onDidChangeIssueData.event),ln(this,"_queries",[]),ln(this,"_onDidChangeCurrentIssue",new d.EventEmitter),ln(this,"onDidChangeCurrentIssue",this._onDidChangeCurrentIssue.event),ln(this,"initializePromise"),ln(this,"statusBarItem"),ln(this,"isSettingIssue",!1),r.folderManagers.forEach(i=>{this.context.subscriptions.push(i.onDidChangeRepositories(()=>this.refresh()))})}getIssueCollection(e){var r;let n=(r=this._singleRepoStates.get(e.path))==null?void 0:r.issueCollection;return n||(n=new Map,n)}getOrCreateSingleRepoState(e,r){let n=this._singleRepoStates.get(e.path);return n||(r||(r=this.manager.getManagerForFile(e)),n={issueCollection:new Map,maxIssueNumber:0,folderManager:r},this._singleRepoStates.set(e.path,n),n)}async tryInitializeAndWait(){return this.initializePromise||(this.initializePromise=new Promise(e=>{if(this.manager.state===_n.RepositoriesLoaded)this.doInitialize(),e();else{const r=this.manager.onDidChangeState(()=>{this.manager.state===_n.RepositoriesLoaded&&(this.doInitialize(),r.dispose(),e())});this.context.subscriptions.push(r)}})),this.initializePromise}registerRepositoryChangeEvent(){async function e(n,i){var a;const o=n.getOrCreateSingleRepoState(i.rootUri),m=o.lastHead,S=o.lastBranch,T=i.state.HEAD?i.state.HEAD.commit:void 0;(i.state.HEAD?i.state.HEAD.commit:void 0)!==m&&await n.setIssueData(o.folderManager);const A=(a=i.state.HEAD)==null?void 0:a.name;(m!==T||S!==A)&&(!o.currentIssue||A!==o.currentIssue.branchName)&&(A?o.folderManager&&await n.setCurrentIssueFromBranch(o,A):await n.setCurrentIssue(o,void 0)),o.lastHead=i.state.HEAD?i.state.HEAD.commit:void 0,o.lastBranch=i.state.HEAD?i.state.HEAD.name:void 0}function r(n,i){n.context.subscriptions.push(i.state.onDidChange(async()=>{e(n,i)}))}this.context.subscriptions.push(this.gitAPI.onDidOpenRepository(n=>{e(this,n),r(this,n)})),this.gitAPI.repositories.forEach(n=>{r(this,n)})}refreshCacheNeeded(){this._onRefreshCacheNeeded.fire()}async refresh(){return this.setAllIssueData()}async doInitialize(){var e;this.cleanIssueState(),this._queries=d.workspace.getConfiguration(vr).get(Ys,od),this._queries.length===0&&(this._queries=od),this.context.subscriptions.push(d.workspace.onDidChangeConfiguration(r=>{r.affectsConfiguration(`${vr}.${Ys}`)?(this._queries=d.workspace.getConfiguration(vr).get(Ys,od),this._onRefreshCacheNeeded.fire()):r.affectsConfiguration(`${vr}.${bp}`)&&this._onRefreshCacheNeeded.fire()})),this.registerRepositoryChangeEvent(),await this.setAllIssueData(),this.context.subscriptions.push(this.onRefreshCacheNeeded(async()=>{await this.refresh()}));for(const r of this.manager.folderManagers){const n=this.getOrCreateSingleRepoState(r.repository.rootUri,r);n.lastHead=r.repository.state.HEAD?r.repository.state.HEAD.commit:void 0,this._singleRepoStates.set(r.repository.rootUri.path,n);const i=(e=r.repository.state.HEAD)==null?void 0:e.name;!n.currentIssue&&i&&await this.setCurrentIssueFromBranch(n,i)}}cleanIssueState(){const e=this.context.workspaceState.get(ad),r=e?JSON.parse(e):{issues:[],branches:[]},n=new Date().valueOf()-30*864e5;for(const i in r.issues)r.issues[i].stateModifiedTime<n&&(r.branches&&r.branches[i]&&delete r.branches[i],delete r.issues[i])}async getUsers(e){var r;await this.initializePromise;const n=await((r=this.manager.getManagerForFile(e))==null?void 0:r.getAssignableUsers()),i=new Map;for(const a in n)n[a].forEach(o=>{i.set(o.login,o)});return i}getUserMap(e){if(!this.initializePromise)return Promise.resolve(new Map);const r=this.getOrCreateSingleRepoState(e);return r.userMap||(r.userMap=this.getUsers(e)),r.userMap}async getCurrentUser(e){var r;return(r=this.manager.credentialStore.getCurrentUser(e))==null?void 0:r.login}async setAllIssueData(){return Promise.all(this.manager.folderManagers.map(e=>this.setIssueData(e)))}async setIssueData(e){var r,n;const i=this.getOrCreateSingleRepoState(e.repository.rootUri,e);i.issueCollection.clear();let a,o;for(const m of this._queries){let S;if(m.query===rf)S=this.setMilestones(e);else{if(!a)try{a=await e.getPullRequestDefaults()}catch(T){}if(!o){const T=Ks(e.repository).filter(A=>A.authProviderId===Ot["github-enterprise"]);o=await this.getCurrentUser(T.length?Ot["github-enterprise"]:Ot.github)}S=this.setIssues(e,await wu(m.query,void 0,a,o))}i.issueCollection.set(m.label,S)}i.maxIssueNumber=await e.getMaxIssue(),i.lastHead=(r=e.repository.state.HEAD)==null?void 0:r.commit,i.lastBranch=(n=e.repository.state.HEAD)==null?void 0:n.name}setIssues(e,r){return new Promise(async n=>{const i=await e.getIssues({fetchNextPage:!1},r);this._onDidChangeIssueData.fire(),n(i.items.map(a=>{const o=a;return o.uri=e.repository.rootUri,o}))})}async setCurrentIssueFromBranch(e,r){if(d.workspace.getConfiguration(vr).get(vh)==="off")return;let i;try{i=await e.folderManager.getPullRequestDefaults()}catch(o){return}if(r===i.base){await this.setCurrentIssue(e,void 0);return}if(e.currentIssue&&e.currentIssue.branchName===r)return;const a=this.getSavedState();for(const o in a.branches)if(o===r){const m=await e.folderManager.resolveIssue(a.branches[o].owner,a.branches[o].repositoryName,a.branches[o].number);m&&await this.setCurrentIssue(e,new gp(m,e.folderManager,this));return}}setMilestones(e){return new Promise(async r=>{const n=new Date,i=d.workspace.getConfiguration(vr).get(bp,[]),a=await e.getMilestones({fetchNextPage:!1},i.indexOf($h)<0);let o;const m=new Map,S=[];for(let T=0;T<a.items.length;T++){const A=a.items[T];A.uri=e.repository.rootUri;const H=a.items[T].milestone;if(A.issues&&A.issues.length<=0||i.indexOf(H.title)>=0)continue;S.push(A);let Y=H.dueOn?new Date(H.dueOn):void 0;Y||(Y=new Date(this.removeDateExcludeStrings(H.title)),isNaN(Y.getTime())&&(Y=new Date(H.createdAt))),Y<n&&(o===void 0||Y>o)&&(o=Y),m.set(H.id?H.id:H.title,Y)}S.sort((T,A)=>{const H=m.get(T.milestone.id?T.milestone.id:T.milestone.title),Y=m.get(A.milestone.id?A.milestone.id:A.milestone.title);return o&&H>=o&&Y>=o?H<=Y?-1:1:H>=Y?-1:1}),this._onDidChangeIssueData.fire(),r(S)})}removeDateExcludeStrings(e){return _v.forEach(r=>e=e.replace(r,"")),e}currentIssue(e){var r;return(r=this._singleRepoStates.get(e.path))==null?void 0:r.currentIssue}currentIssues(){return Array.from(this._singleRepoStates.values()).filter(e=>e==null?void 0:e.currentIssue).map(e=>e.currentIssue)}maxIssueNumber(e){var r,n;return(n=(r=this._singleRepoStates.get(e.path))==null?void 0:r.maxIssueNumber)!=null?n:0}async setCurrentIssue(e,r){if(!(this.isSettingIssue&&r===void 0)){if(this.isSettingIssue=!0,e instanceof ea){const n=this._singleRepoStates.get(e.repository.rootUri.path);if(!n)return;e=n}try{if(e.currentIssue&&(r==null?void 0:r.issue.number)===e.currentIssue.issue.number)return;e.currentIssue&&await e.currentIssue.stopWorking(),r&&this.context.subscriptions.push(r.onDidChangeCurrentIssueState(()=>this.updateStatusBar())),this.context.workspaceState.update(Ev,r==null?void 0:r.issue.number),(!r||await r.startWorking())&&(e.currentIssue=r,this.updateStatusBar()),this._onDidChangeCurrentIssue.fire()}catch(n){}finally{this.isSettingIssue=!1}}}updateStatusBar(){const e=this.currentIssues(),r=e.length>0;if(!r){this.statusBarItem&&(this.statusBarItem.hide(),this.statusBarItem.dispose(),this.statusBarItem=void 0);return}r&&!this.statusBarItem&&(this.statusBarItem=d.window.createStatusBarItem("github.issues.status",d.StatusBarAlignment.Left,0),this.statusBarItem.name="GitHub Active Issue");const n=this.statusBarItem;n.text=`$(issues) Issue ${e.map(i=>Xs(i.issue,i.repoDefaults)).join(", ")}`,n.tooltip=e.map(i=>i.issue.title).join(", "),n.command="issue.statusBar",n.show()}getSavedState(){const e=this.context.workspaceState.get(ad);return e?JSON.parse(e):{issues:Object.create(null),branches:Object.create(null)}}getSavedIssueState(e){var r;return(r=this.getSavedState().issues[`${e}`])!=null?r:{}}async setSavedIssueState(e,r){const n=this.getSavedState();return n.issues[`${e.number}`]={...r,stateModifiedTime:new Date().valueOf()},r.branch&&(n.branches||(n.branches=Object.create(null)),n.branches[r.branch]={number:e.number,owner:e.remote.owner,repositoryName:e.remote.repositoryName}),this.context.workspaceState.update(ad,JSON.stringify(n))}}class kv{constructor(e,r,n){this.stateManager=e,this.manager=r}async provideCompletionItems(e,r,n,i){var a;if(e.languageId!=="scminput"&&e.uri.scheme!==oi&&r.character>0&&i.triggerKind===d.CompletionTriggerKind.Invoke&&e.getText(new d.Range(r.with(void 0,r.character-1),r))!=="@")return[];if(i.triggerKind===d.CompletionTriggerKind.TriggerCharacter&&d.workspace.getConfiguration(vr).get("ignoreUserCompletionTrigger",[]).find(T=>T===e.languageId))return[];if(e.languageId!=="scminput"&&!await xc(e,r))return[];let o=new d.Range(r,r);r.character-1>=0&&e.getText(new d.Range(r.translate(0,-1),r))==="@"&&(o=new d.Range(r.translate(0,-1),r));const m=e.uri.scheme===oi?(a=Lu(e.uri))!=null?a:e.uri:e.languageId==="scminput"?Mc(e.uri):e.uri;if(!m)return[];const S=[];return(await this.stateManager.getUserMap(m)).forEach(T=>{const A=new of({label:T.login,description:T.name},d.CompletionItemKind.User);A.insertText=`@${T.login}`,A.login=T.login,A.uri=m,A.range=o,A.detail=T.name,A.filterText=`@ ${T.login} ${T.name}`,e.uri.scheme===oi&&(A.commitCharacters=[" ",","]),S.push(A)}),S}async resolveCompletionItem(e,r){const n=this.manager.getManagerForFile(e.uri);if(!n)return e;const i=await n.getPullRequestDefaults(),a=await n.resolveUser(i.owner,i.repo,e.login);return a&&(e.documentation=Ic(i,a),e.command={command:"issues.userCompletion",title:"User Completion Chosen"}),e}}const Tv=["abstract","access","alias","async","augments","author","borrows","callback","class","classdesc","constant","constructs","copyright","default","deprecated","description","enum","event","example","exports","external","host","file","fires","function","generator","global","hideconstructor","ignore","implements","inheritdoc","inner","instance","interface","kind","lends","license","listens","member","memberof","mixes","mixin","module","name","namespace","override","package","param","private","property","protected","public","readonly","requires","returns","see","since","static","summary","this","throws","exception","todo","tutorial","type","typedef","variation","version","yields","yield","link"];class Rv{constructor(e,r){this.manager=e,this.telemetry=r}async provideHover(e,r,n){if(!await Ch(e,r))return;let i=e.getWordRangeAtPosition(r,Nc);if(i&&i.start.character>0){i=new d.Range(new d.Position(i.start.line,i.start.character),i.end);const o=e.getText(i).match(Nc);if(o){const m=o[1];return(e.languageId==="javascript"||e.languageId==="typescript")&&Tv.indexOf(m)>=0?void 0:this.createHover(e.uri,m,i)}}else return}async createHover(e,r,n){try{const i=this.manager.getManagerForFile(e);if(!i)return;const a=await i.getPullRequestDefaults(),o=await i.resolveUser(a.owner,a.repo,r);return o&&o.name?(this.telemetry.sendTelemetryEvent("issues.userHover"),new d.Hover(Ic(a,o),n)):void 0}catch(i){return}}}var Cv=Object.defineProperty,ud=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Cv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Pv="issueCompletions.enabled",Nv="userCompletions.enabled",wp="issues.creatingFromFile";class Av{constructor(e,r,n,i,a){this.gitAPI=e,this.manager=r,this.reviewManagers=n,this.context=i,this.telemetry=a,ud(this,"_stateManager"),ud(this,"createIssueInfo"),ud(this,"documentFilters",[{language:"php"},{language:"powershell"},{language:"jade"},{language:"python"},{language:"r"},{language:"razor"},{language:"ruby"},{language:"rust"},{language:"scss"},{language:"search-result"},{language:"shaderlab"},{language:"shellscript"},{language:"sql"},{language:"swift"},{language:"typescript"},{language:"vb"},{language:"xml"},{language:"yaml"},{language:"markdown"},{language:"bat"},{language:"clojure"},{language:"coffeescript"},{language:"jsonc"},{language:"c"},{language:"cpp"},{language:"csharp"},{language:"css"},{language:"dockerfile"},{language:"fsharp"},{language:"git-commit"},{language:"go"},{language:"groovy"},{language:"handlebars"},{language:"hlsl"},{language:"ini"},{language:"java"},{language:"javascriptreact"},{language:"javascript"},{language:"json"},{language:"less"},{language:"log"},{language:"lua"},{language:"makefile"},{language:"ignore"},{language:"properties"},{language:"objective-c"},{language:"perl"},{language:"perl6"},"*"]),this._stateManager=new Sv(e,this.manager,this.context)}async initialize(){return this.context.subscriptions.push(d.workspace.registerFileSystemProvider(oi,new dv)),this.registerCompletionProviders(),this.context.subscriptions.push(d.languages.registerCompletionItemProvider({scheme:oi},new hv(this.manager)," ",",")),this.context.subscriptions.push(d.window.createTreeView("issues:github",{showCollapseAll:!0,treeDataProvider:new gv(this._stateManager,this.manager,this.context)})),this.context.subscriptions.push(d.commands.registerCommand("issue.createIssueFromSelection",(e,r)=>(this.telemetry.sendTelemetryEvent("issue.createIssueFromSelection"),this.createTodoIssue(e,r)),this)),this.context.subscriptions.push(d.commands.registerCommand("issue.createIssueFromClipboard",()=>(this.telemetry.sendTelemetryEvent("issue.createIssueFromClipboard"),this.createTodoIssueClipboard()),this)),this.context.subscriptions.push(d.commands.registerCommand("issue.copyGithubPermalink",e=>(this.telemetry.sendTelemetryEvent("issue.copyGithubPermalink"),this.copyPermalink(e instanceof d.Uri?e:void 0)),this)),this.context.subscriptions.push(d.commands.registerCommand("issue.copyMarkdownGithubPermalink",()=>(this.telemetry.sendTelemetryEvent("issue.copyMarkdownGithubPermalink"),this.copyMarkdownPermalink()),this)),this.context.subscriptions.push(d.commands.registerCommand("issue.openGithubPermalink",()=>(this.telemetry.sendTelemetryEvent("issue.openGithubPermalink"),this.openPermalink()),this)),this.context.subscriptions.push(d.commands.registerCommand("issue.openIssue",e=>(this.telemetry.sendTelemetryEvent("issue.openIssue"),this.openIssue(e)))),this.context.subscriptions.push(d.commands.registerCommand("issue.startWorking",e=>(this.telemetry.sendTelemetryEvent("issue.startWorking"),this.startWorking(e)),this)),this.context.subscriptions.push(d.commands.registerCommand("issue.startWorkingBranchDescriptiveTitle",e=>(this.telemetry.sendTelemetryEvent("issue.startWorking"),this.startWorking(e)),this)),this.context.subscriptions.push(d.commands.registerCommand("issue.continueWorking",e=>(this.telemetry.sendTelemetryEvent("issue.continueWorking"),this.startWorking(e)),this)),this.context.subscriptions.push(d.commands.registerCommand("issue.startWorkingBranchPrompt",e=>(this.telemetry.sendTelemetryEvent("issue.startWorkingBranchPrompt"),this.startWorkingBranchPrompt(e)),this)),this.context.subscriptions.push(d.commands.registerCommand("issue.stopWorking",e=>(this.telemetry.sendTelemetryEvent("issue.stopWorking"),this.stopWorking(e)),this)),this.context.subscriptions.push(d.commands.registerCommand("issue.stopWorkingBranchDescriptiveTitle",e=>(this.telemetry.sendTelemetryEvent("issue.stopWorking"),this.stopWorking(e)),this)),this.context.subscriptions.push(d.commands.registerCommand("issue.statusBar",()=>(this.telemetry.sendTelemetryEvent("issue.statusBar"),this.statusBar()),this)),this.context.subscriptions.push(d.commands.registerCommand("issue.copyIssueNumber",e=>(this.telemetry.sendTelemetryEvent("issue.copyIssueNumber"),this.copyIssueNumber(e)))),this.context.subscriptions.push(d.commands.registerCommand("issue.copyIssueUrl",e=>(this.telemetry.sendTelemetryEvent("issue.copyIssueUrl"),this.copyIssueUrl(e)))),this.context.subscriptions.push(d.commands.registerCommand("issue.refresh",()=>(this.telemetry.sendTelemetryEvent("issue.refresh"),this.refreshView()),this)),this.context.subscriptions.push(d.commands.registerCommand("issue.suggestRefresh",()=>(this.telemetry.sendTelemetryEvent("issue.suggestRefresh"),this.suggestRefresh()),this)),this.context.subscriptions.push(d.commands.registerCommand("issue.getCurrent",()=>(this.telemetry.sendTelemetryEvent("issue.getCurrent"),this.getCurrent()),this)),this.context.subscriptions.push(d.commands.registerCommand("issue.editQuery",e=>(this.telemetry.sendTelemetryEvent("issue.editQuery"),this.editQuery(e)),this)),this.context.subscriptions.push(d.commands.registerCommand("issue.createIssue",()=>(this.telemetry.sendTelemetryEvent("issue.createIssue"),this.createIssue()),this)),this.context.subscriptions.push(d.commands.registerCommand("issue.createIssueFromFile",async()=>{this.telemetry.sendTelemetryEvent("issue.createIssueFromFile"),await d.commands.executeCommand("setContext",wp,!0),await this.createIssueFromFile(),await d.commands.executeCommand("setContext",wp,!1)},this)),this.context.subscriptions.push(d.commands.registerCommand("issue.issueCompletion",()=>{this.telemetry.sendTelemetryEvent("issue.issueCompletion")})),this.context.subscriptions.push(d.commands.registerCommand("issue.userCompletion",()=>{this.telemetry.sendTelemetryEvent("issue.userCompletion")})),this.context.subscriptions.push(d.commands.registerCommand("issue.signinAndRefreshList",async()=>this.manager.authenticate())),this.context.subscriptions.push(d.commands.registerCommand("issue.goToLinkedCode",async e=>Zm(e,this.manager))),this._stateManager.tryInitializeAndWait().then(()=>{this.context.subscriptions.push(d.languages.registerHoverProvider("*",new mv(this.manager,this._stateManager,this.context,this.telemetry))),this.context.subscriptions.push(d.languages.registerHoverProvider("*",new Rv(this.manager,this.telemetry))),this.context.subscriptions.push(d.languages.registerCodeActionsProvider("*",new bv(this.context)))})}dispose(){}registerCompletionProviders(){const e=[{provider:pv,trigger:"#",disposable:void 0,configuration:Pv},{provider:kv,trigger:"@",disposable:void 0,configuration:Nv}];for(const r of e)d.workspace.getConfiguration(vr).get(r.configuration,!0)&&this.context.subscriptions.push(r.disposable=d.languages.registerCompletionItemProvider(this.documentFilters,new r.provider(this._stateManager,this.manager,this.context),r.trigger));this.context.subscriptions.push(d.workspace.onDidChangeConfiguration(r=>{for(const n of e)if(r.affectsConfiguration(`${vr}.${n.configuration}`)){const i=d.workspace.getConfiguration(vr).get(n.configuration,!0);!i&&n.disposable?(n.disposable.dispose(),n.disposable=void 0):i&&!n.disposable&&this.context.subscriptions.push(n.disposable=d.languages.registerCompletionItemProvider(this.documentFilters,new n.provider(this._stateManager,this.manager,this.context),n.trigger));break}}))}async createIssue(){var e,r;let n=(e=d.window.activeTextEditor)==null?void 0:e.document.uri;if(n||(n=(r=await this.chooseRepo("Select the repo to create the issue in."))==null?void 0:r.repository.rootUri),n)return this.makeNewIssueFile(n)}async createIssueFromFile(){var e,r,n,i;let a;if(!d.window.activeTextEditor||d.window.activeTextEditor.document.uri.scheme!==oi)return;a=d.window.activeTextEditor.document.getText();const o=a.indexOf(`\r
\r
`),m=a.indexOf(`

`);let S;if(o<0&&m<0)return;o<0?S=m:m<0?S=o:S=Math.min(o,m);const T=a.substring(0,S);let A;if(a=a.substring(S+2).trim(),a.startsWith(Fu)){const me=a.split(/\r\n|\n/,1);me.length===1&&(A=me[0].substring(Fu.length).split(",").map(be=>(be=be.trim(),be.startsWith("@")&&(be=be.substring(1)),be)),a=a.substring(me[0].length).trim())}let H;if(a.startsWith(ro)){const me=a.split(/\r\n|\n/,1);me.length===1&&(H=me[0].substring(ro.length).split(",").map(be=>be.trim()).filter(be=>be),a=a.substring(me[0].length).trim())}const Y=a;if(!T||!Y)return;const pe=await this.doCreateIssue((e=this.createIssueInfo)==null?void 0:e.document,(r=this.createIssueInfo)==null?void 0:r.newIssue,T,Y,A,H,(n=this.createIssueInfo)==null?void 0:n.lineNumber,(i=this.createIssueInfo)==null?void 0:i.insertIndex,Lu(d.window.activeTextEditor.document.uri));this.createIssueInfo=void 0,pe&&await d.commands.executeCommand("workbench.action.closeActiveEditor")}async editQuery(e){const r=d.workspace.getConfiguration(vr),n=r.inspect(Ys);let i;if(n==null?void 0:n.workspaceValue)i="workbench.action.openWorkspaceSettingsFile";else{const o=r.get(Ys);(n==null?void 0:n.defaultValue)&&JSON.stringify(n==null?void 0:n.defaultValue)===JSON.stringify(o)&&r.update(Ys,n.defaultValue,d.ConfigurationTarget.Global),i="workbench.action.openSettingsJson"}await d.commands.executeCommand(i);const a=d.window.activeTextEditor;if(a){const m=a.document.getText().search(e.labelAsString);if(m>=0){const S=a.document.positionAt(m);a.revealRange(new d.Range(S,S)),a.selection=new d.Selection(S,S)}}}getCurrent(){const e=this._stateManager.currentIssues();if(e.length>0)return{owner:e[0].issue.remote.owner,repo:e[0].issue.remote.repositoryName,number:e[0].issue.number}}refreshView(){this._stateManager.refreshCacheNeeded()}async suggestRefresh(){return await d.commands.executeCommand("hideSuggestWidget"),await this._stateManager.refresh(),d.commands.executeCommand("editor.action.triggerSuggest")}openIssue(e){if(e instanceof Ar)return d.env.openExternal(d.Uri.parse(e.html_url))}async doStartWorking(e,r,n){let i=e,a=r.githubRepository,o=r.remote;if(!i){if(i=await this.chooseRepo("Choose which repository you want to work on this isssue in."),!i)return;a=await i.getOrigin(),o=a.remote}const m=await i.findUpstreamForItem({githubRepository:a,remote:o});m.needsFork&&await i.tryOfferToFork(a)===void 0||await this._stateManager.setCurrentIssue(i,new gp(r,i,this._stateManager,m.remote,n))}async startWorking(e){e instanceof Ar&&this.doStartWorking(this.manager.getManagerForIssueModel(e),e)}async startWorkingBranchPrompt(e){e instanceof Ar&&this.doStartWorking(this.manager.getManagerForIssueModel(e),e,!0)}async stopWorking(e){var r;let n=this.manager.getManagerForIssueModel(e);!n&&(n=await this.chooseRepo("Choose which repository you want to stop working on this issue in."),!n)||e instanceof Ar&&((r=this._stateManager.currentIssue(n.repository.rootUri))==null?void 0:r.issue.number)===e.number&&await this._stateManager.setCurrentIssue(n,void 0)}async statusBarActions(e){const r=`$(globe) Open #${e.issue.number} ${e.issue.title}`,n=`$(git-pull-request) Create pull request for #${e.issue.number} (pushes branch)`;let i;try{i=await e.manager.getPullRequestDefaults()}catch(S){}const a=`$(primitive-square) Stop working on #${e.issue.number}`,o=e.branchName&&i?[r,n,a]:[r,n,a];switch(await d.window.showQuickPick(o,{placeHolder:"Current issue options"})){case r:return this.openIssue(e.issue);case n:{const S=Ji.getReviewManagerForFolderManager(this.reviewManagers,e.manager);if(S)return yf(e.manager,S,this._stateManager);break}case a:return this._stateManager.setCurrentIssue(e.manager,void 0)}}async statusBar(){const e=this._stateManager.currentIssues();if(e.length===1)return this.statusBarActions(e[0]);{const r=e.map(i=>({label:`#${i.issue.number} from ${i.issue.githubRepository.remote.owner}/${i.issue.githubRepository.remote.repositoryName}`,currentIssue:i})),n=await d.window.showQuickPick(r);if(n)return this.statusBarActions(n.currentIssue)}}stringToUint8Array(e){return new TextEncoder().encode(e)}copyIssueNumber(e){if(e instanceof Ar)return d.env.clipboard.writeText(e.number.toString())}copyIssueUrl(e){if(e instanceof Ar)return d.env.clipboard.writeText(e.html_url)}async createTodoIssueClipboard(){return this.createTodoIssue(void 0,await d.env.clipboard.readText())}async createTodoIssueBody(e,r){if(r||(e==null?void 0:e.document.isUntitled))return r;let n="";if(e){const i=Vc(this.gitAPI,e.document.uri);(i==null?void 0:i.state.workingTreeChanges.find(o=>o.uri.toString()===e.document.uri.toString()))&&(n=`\`\`\`
${e.line}
\`\`\`

`)}return n+=(await Oc(this.gitAPI,e)).permalink,n}async createTodoIssue(e,r){let n,i,a,o,m,S;if(!e&&d.window.activeTextEditor)n=d.window.activeTextEditor.document,S=n.getText(d.window.activeTextEditor.selection);else if(e)n=e.document,a=e.insertIndex,o=e.lineNumber,i=e.line.substring(a,e.line.length).trim(),S=n.getText(e.range.isEmpty?n.lineAt(e.range.start.line).range:e.range);else return;const T=S.match(Nc);T&&T.length===2&&(await this._stateManager.getUserMap(n.uri)).has(T[1])&&(m=[T[1]]);let A;const H=await this.createTodoIssueBody(e,r),Y=d.window.createInputBox();Y.value=i!=null?i:"",Y.prompt="Set the issue title. Confirm to create the issue now or use the edit button to edit the issue title and description.",Y.title="Create Issue",Y.buttons=[{iconPath:new d.ThemeIcon("edit"),tooltip:"Edit Description"}],Y.onDidAccept(async()=>{A=Y.value,A&&(Y.busy=!0,await this.doCreateIssue(n,e,A,H,m,void 0,o,a),Y.busy=!1),Y.hide()}),Y.onDidTriggerButton(async()=>{A=Y.value,Y.busy=!0,this.createIssueInfo={document:n,newIssue:e,lineNumber:o,insertIndex:a},this.makeNewIssueFile(n.uri,A,H,m),Y.busy=!1,Y.hide()}),Y.show()}async makeNewIssueFile(e,r,n,i){const a=`?{"origin":"${e.toString()}"}`,o=d.Uri.parse(`${oi}:/${cv}${a}`);if(d.window.visibleTextEditors.filter(be=>be.document.uri.scheme===oi).length>0)return;await d.workspace.fs.delete(o);const m=`${Fu} ${i&&i.length>0?i.map(be=>"@"+be).join(", ")+" ":""}`,S=`${ro} `,T=`${r!=null?r:"Issue Title"}

${m}
${S}

${n!=null?n:""}

<!-- Edit the body of your new issue then click the \u2713 "Create Issue" button in the top right of the editor. The first line will be the issue title. Assignees and Labels follow after a blank line. Leave an empty line before beginning the body of the issue. -->`;await d.workspace.fs.writeFile(o,this.stringToUint8Array(T));const A=d.window.createTextEditorDecorationType({after:{contentText:" Comma-separated usernames, either @username or just username.",fontStyle:"italic",color:new d.ThemeColor("issues.newIssueDecoration")}}),H=d.window.createTextEditorDecorationType({after:{contentText:" Comma-separated labels.",fontStyle:"italic",color:new d.ThemeColor("issues.newIssueDecoration")}}),Y=d.window.onDidChangeActiveTextEditor(be=>{if((be==null?void 0:be.document.uri.scheme)===oi){const Ne=be.document.lineAt(2);Ne.text.startsWith(Fu)&&be.setDecorations(A,[new d.Range(new d.Position(2,0),new d.Position(2,Ne.text.length))]);const Ae=be.document.lineAt(3);Ae.text.startsWith(ro)&&be.setDecorations(H,[new d.Range(new d.Position(3,0),new d.Position(3,Ae.text.length))])}}),pe=await d.window.showTextDocument(o),me=d.workspace.onDidCloseTextDocument(be=>{be===pe.document&&(Y.dispose(),me.dispose())})}async verifyLabels(e,r){var n;if(!r.labels)return!0;const i=(await e.getLabels(void 0,r)).map(m=>m.name),a=[],o=[];if((n=r.labels)==null||n.forEach(m=>{let S=typeof m=="string"?m:m.name;!S||(i.includes(S)?o.push(S):a.push(S))}),a.length>0){const m="Yes",S="No";switch(await d.window.showInformationMessage(`The following labels don't exist in this repository: ${a.join(", ")}. 
Do you want to create these labels?`,{modal:!0},m,S)){case m:return!0;case S:return r.labels=o,!0;default:return!1}}return!0}async chooseRepo(e){const r=[];for(const i of this.manager.folderManagers)try{const a=await i.getPullRequestDefaults();r.push({label:`${a.owner}/${a.repo}`,repo:i})}catch(a){}if(r.length===0)return;if(r.length===1)return r[0].repo;const n=await d.window.showQuickPick(r,{placeHolder:e});return n==null?void 0:n.repo}async doCreateIssue(e,r,n,i,a,o,m,S,T){let A,H;if(e?H=this.manager.getManagerForFile(e.uri):T&&(H=this.manager.getManagerForFile(T)),H||(H=await this.chooseRepo("Choose where to create the issue.")),!H)return!1;try{A=await H.getPullRequestDefaults()}catch(be){return d.window.showErrorMessage("There is no remote. Can't create an issue."),!1}const Y=i||(r==null?void 0:r.document.isUntitled)?i:(await Oc(this.gitAPI,r)).permalink,pe={owner:A.owner,repo:A.repo,title:n,body:Y,assignees:a,labels:o};if(!await this.verifyLabels(H,pe))return!1;const me=await H.createIssue(pe);if(me){if(e!==void 0&&S!==void 0&&m!==void 0){const be=new d.WorkspaceEdit,Ne=d.workspace.getConfiguration(vr).get("createInsertFormat","number")==="number"?`#${me.number}`:me.html_url;be.insert(e.uri,new d.Position(m,S),` ${Ne}`),await d.workspace.applyEdit(be)}else{const be="Copy URL",Ne="Open Issue";d.window.showInformationMessage("Issue created",be,Ne).then(async Ae=>{switch(Ae){case be:await d.env.clipboard.writeText(me.html_url);break;case Ne:await d.env.openExternal(d.Uri.parse(me.html_url));break}})}return this._stateManager.refreshCacheNeeded(),!0}return!1}async getPermalinkWithError(e){const r=await Oc(this.gitAPI,void 0,e);return r.error&&d.window.showWarningMessage(`Unable to create a GitHub permalink for the selection. ${r.error}`),r}async getContextualizedPermalink(e,r){let n;try{n=await d.env.asExternalUri(e)}catch(m){return r}const i=n.scheme==="https"&&/^(vscode|github)\./.test(n.authority)?n.authority:void 0;if(!i)return r;const a=d.Uri.parse(r),o=/^(github)\./.test(n.authority)?a.path:`/github${a.path}`;return a.with({authority:i,path:o}).toString()}async copyPermalink(e){const r=await this.getPermalinkWithError(e);if(r.permalink)return d.env.clipboard.writeText(r.originalFile?await this.getContextualizedPermalink(r.originalFile,r.permalink):r.permalink)}getMarkdownLinkText(){if(!d.window.activeTextEditor)return;let e=d.window.activeTextEditor.selection;e.start.line!==e.end.line&&(e=new d.Range(e.start,new d.Position(e.start.line+1,0)));const r=d.window.activeTextEditor.document.getText(e);if(r)return r;if(e=d.window.activeTextEditor.document.getWordRangeAtPosition(e.start),e)return d.window.activeTextEditor.document.getText(e)}async copyMarkdownPermalink(){const e=await this.getPermalinkWithError(),r=this.getMarkdownLinkText();if(e.permalink&&r)return d.env.clipboard.writeText(`[${r.trim()}](${e.permalink})`)}async openPermalink(){const e=await this.getPermalinkWithError();if(e.permalink)return d.env.openExternal(d.Uri.parse(e.originalFile?await this.getContextualizedPermalink(e.originalFile,e.permalink):e.permalink))}}var Iv=Object.defineProperty,Dv=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Iv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Ov{constructor(){Dv(this,"_disposables"),this._disposables=[],this._disposables.push(d.window.registerFileDecorationProvider(this))}provideFileDecoration(e,r){if(e.scheme!=="filechange"&&e.scheme!==Oi)return;const n=Ft(e);if(n&&n.status!==void 0)return{propagate:!1,badge:this.letter(n.status),color:this.color(n.status)};const i=Dr(e);if(i&&i.status!==void 0)return{propagate:!1,badge:this.letter(i.status),color:this.color(i.status)}}color(e){let r;switch(e){case nt.MODIFY:r="gitDecoration.modifiedResourceForeground";break;case nt.ADD:r="gitDecoration.addedResourceForeground";break;case nt.DELETE:r="gitDecoration.deletedResourceForeground";break;case nt.RENAME:r="gitDecoration.renamedResourceForeground";break;case nt.UNKNOWN:r=void 0;break;case nt.UNMERGED:r="gitDecoration.conflictingResourceForeground";break}return r?new d.ThemeColor(r):void 0}letter(e){switch(e){case nt.MODIFY:return"M";case nt.ADD:return"A";case nt.DELETE:return"D";case nt.RENAME:return"R";case nt.UNKNOWN:return"U";case nt.UNMERGED:return"C"}return""}dispose(){this._disposables.forEach(e=>e.dispose())}}var xv=Object.defineProperty,qu=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?xv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Mv extends jr{constructor(e,r,n,i,a,o){super();this.parent=e,this.pullRequestManager=r,this.pullRequest=n,this.commit=i,this.comments=a,this.isCurrent=o,qu(this,"sha"),qu(this,"collapsibleState"),qu(this,"iconPath"),qu(this,"contextValue"),this.label=i.commit.message,this.sha=i.sha,this.collapsibleState=d.TreeItemCollapsibleState.Collapsed;let m;try{i.author&&i.author.avatar_url&&(m=d.Uri.parse(`${i.author.avatar_url}&s=${64}`))}catch(S){}this.iconPath=m,this.contextValue="commit"}getTreeItem(){return this}async getChildren(){var e;const n=((e=await this.pullRequest.getCommitChangedFiles(this.commit))!=null?e:[]).map(i=>{const a=this.comments.filter(T=>T.path===i.filename&&T.originalCommitId===this.commit.sha),o=i.filename,m=d.Uri.parse($.posix.join(`commit~${this.commit.sha.substr(0,8)}`,o)),S=new ia(this,this.pullRequestManager,this.pullRequest,ga(i.status),o,void 0,cn(m,o,void 0,this.commit.sha,!0,{base:!1},this.pullRequestManager.repository.rootUri),cn(m,o,void 0,this.commit.sha,!0,{base:!0},this.pullRequestManager.repository.rootUri),[],a,this.commit.sha,this.isCurrent);return S.useViewChangesCommand(),S});return Promise.resolve(n)}}var Fv=Object.defineProperty,no=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Fv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Lv extends jr{constructor(e,r,n,i){super();no(this,"label","Commits"),no(this,"collapsibleState"),no(this,"_folderRepoManager"),no(this,"_pr"),no(this,"_comments"),this.parent=e,this._pr=n,this._folderRepoManager=r,this._comments=i,this.collapsibleState=d.TreeItemCollapsibleState.Collapsed}getTreeItem(){return this}async getChildren(){try{const e=await this._pr.getCommits(),r=e.map((n,i)=>new Mv(this,this._folderRepoManager,this._pr,n,this._comments,i===e.length-1));return Promise.resolve(r)}catch(e){return Promise.resolve([])}}}var qv=Object.defineProperty,ld=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?qv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Uv extends jr{constructor(e,r){super();this.parent=e,this._fileChanges=r,ld(this,"label","Files"),ld(this,"collapsibleState"),ld(this,"directories",[]),this.collapsibleState=d.TreeItemCollapsibleState.Expanded;const n=new Es(this,"");this._fileChanges.forEach(i=>n.addFile(i)),n.finalize(),n.label===""?this.directories=n.children:this.directories=[n]}getTreeItem(){return this}async getChildren(){let e;return d.workspace.getConfiguration("githubPullRequests").get("fileListLayout")==="tree"?e=this.directories:e=this._fileChanges,Promise.resolve(e)}}var $v=Object.defineProperty,Uu=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?$v(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Gv extends _s{constructor(e,r,n,i,a){super(e,r.title,r.userAvatarUri,r);this.parent=e,this._pullRequest=r,this._pullRequestManager=n,this._comments=i,this._localFileChanges=a,Uu(this,"_filesCategoryNode"),Uu(this,"_commitsCategoryNode"),Uu(this,"collapsibleState",d.TreeItemCollapsibleState.Expanded),Uu(this,"_disposables",[]),this.getTreeItem(),this._disposables.push(d.window.onDidChangeActiveTextEditor(o=>{const m=o==null?void 0:o.document.uri.toString();this.revealActiveEditorInTree(m)})),this._disposables.push(this.parent.view.onDidChangeVisibility(o=>{var m;const S=(m=d.window.activeTextEditor)==null?void 0:m.document.uri.toString();this.revealActiveEditorInTree(S)})),this._disposables.push(r.onDidInvalidate(()=>{this.refresh()}))}revealActiveEditorInTree(e){if(this.parent.view.visible&&e){const r=this._localFileChanges.find(n=>n.filePath.toString()===e);r&&this.reveal(r,{select:!0})}}async getChildren(){return(!this._filesCategoryNode||!this._commitsCategoryNode)&&(this._filesCategoryNode=new Uv(this.parent,this._localFileChanges),this._commitsCategoryNode=new Lv(this.parent,this._pullRequestManager,this._pullRequest,this._comments)),[this._filesCategoryNode,this._commitsCategoryNode]}getTreeItem(){return this.label=this._pullRequest.title,this}dispose(){this._disposables.forEach(e=>e.dispose()),this._disposables=[]}}var Hv=Object.defineProperty,io=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Hv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class _p extends d.Disposable{constructor(e){super(()=>this.dispose());this._context=e,io(this,"_onDidChangeTreeData",new d.EventEmitter),io(this,"onDidChangeTreeData",this._onDidChangeTreeData.event),io(this,"_disposables",[]),io(this,"_pullRequestManagerMap",new Map),io(this,"_view"),this._view=d.window.createTreeView("prStatus:github",{treeDataProvider:this,showCollapseAll:!0}),this._context.subscriptions.push(this._view),this._disposables.push(d.workspace.onDidChangeConfiguration(async r=>{if(r.affectsConfiguration(`${Br}.fileListLayout`)){this._onDidChangeTreeData.fire();const n=d.workspace.getConfiguration(`${Br}`).get("fileListLayout");await d.commands.executeCommand("setContext","fileListLayout:flat",n==="flat")}else r.affectsConfiguration("git.openDiffOnClick")&&this._onDidChangeTreeData.fire()}))}get view(){return this._view}refresh(){this._onDidChangeTreeData.fire()}updateViewTitle(){let e;if(this._pullRequestManagerMap.size===1){const r=this._pullRequestManagerMap.values().next();r.done||(e=r.value.pullRequestModel.number)}this._view.title=e?`Changes in Pull Request #${e}`:"Changes in Pull Request"}async addPrToView(e,r,n,i,a){const o=new Gv(this,r,e,i,n);this._pullRequestManagerMap.set(e,o),this.updateViewTitle(),await d.commands.executeCommand("setContext","github:inReviewMode",!0),this._onDidChangeTreeData.fire(),a&&this.reveal(o)}async removePrFromView(e){this._pullRequestManagerMap.delete(e),this.updateViewTitle(),this._pullRequestManagerMap.size===0&&this.hide(),this._onDidChangeTreeData.fire()}async hide(){await d.commands.executeCommand("setContext","github:inReviewMode",!1)}getTreeItem(e){return e.getTreeItem()}getParent(e){return e.getParent()}async reveal(e,r){try{await this._view.reveal(e,r)}catch(n){P.appendLine(n,"PullRequestChangesTreeDataProvider")}}async getChildren(e){if(e)return await e.getChildren();{const r=[];if(this._pullRequestManagerMap.size>=1)for(const n of this._pullRequestManagerMap.values())r.push(n);return r}}getDescriptionNode(e){return this._pullRequestManagerMap.get(e)}async resolveTreeItem(e,r){return r instanceof ia&&await r.resolve(),r}dispose(){this._disposables.forEach(e=>e.dispose())}}const Vv="githubPullRequests";var Bv=Object.defineProperty,xi=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Bv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const cd="queries";var Zi;(function(t){t[t.Empty=0]="Empty",t[t.More=1]="More",t[t.TryOtherRemotes=2]="TryOtherRemotes",t[t.Login=3]="Login",t[t.NoRemotes=4]="NoRemotes",t[t.NoGitRepositories=5]="NoGitRepositories",t[t.NoMatchingRemotes=6]="NoMatchingRemotes",t[t.ConfigureRemotes=7]="ConfigureRemotes",t[t.Initializing=8]="Initializing"})(Zi||(Zi={}));class Mi extends jr{constructor(e,r,n){super();switch(xi(this,"collapsibleState"),xi(this,"iconPath"),xi(this,"type"),xi(this,"command"),this.parent=e,this.type=r,this.collapsibleState=d.TreeItemCollapsibleState.None,r){case 0:this.label="0 pull requests in this category";break;case 1:this.label="Load more",this.command={title:"Load more",command:"pr.loadMore",arguments:[n]};break;case 2:this.label="Continue fetching from other remotes",this.command={title:"Load more",command:"pr.loadMore",arguments:[n]};break;case 3:this.label="Sign in",this.command={title:"Sign in",command:"pr.signinAndRefreshList",arguments:[]};break;case 4:this.label="No GitHub repositories found.";break;case 5:this.label="No git repositories found.";break;case 6:this.label="No remotes match the current setting.";break;case 7:this.label="Configure remotes...",this.command={title:"Configure remotes",command:"pr.configureRemotes",arguments:[]};break;case 8:this.label="Loading...";break;default:break}}getTreeItem(){return this}}class dd extends jr{constructor(e,r,n,i,a,o){super();switch(this.parent=e,this._folderRepoManager=r,this._telemetry=n,this._type=i,this._categoryQuery=o,xi(this,"collapsibleState"),xi(this,"prs"),xi(this,"fetchNextPage",!1),xi(this,"repositoryPageInformation",new Map),xi(this,"contextValue"),this.prs=[],this.collapsibleState=this._type===dr.All?d.TreeItemCollapsibleState.Expanded:d.TreeItemCollapsibleState.Collapsed,i){case dr.All:this.label="All Open";break;case dr.Query:this.label=a;break;case dr.LocalPullRequest:this.label="Local Pull Request Branches";break;default:break}this._categoryQuery&&(this.contextValue="query")}async editQuery(){const e=d.workspace.getConfiguration(Vv),r=e.inspect(cd);let n;if(r==null?void 0:r.workspaceValue)n="workbench.action.openWorkspaceSettingsFile";else{const a=e.get(cd);(r==null?void 0:r.defaultValue)&&JSON.stringify(r==null?void 0:r.defaultValue)===JSON.stringify(a)&&e.update(cd,r.defaultValue,d.ConfigurationTarget.Global),n="workbench.action.openSettingsJson"}await d.commands.executeCommand(n);const i=d.window.activeTextEditor;if(i){const o=i.document.getText().search(this.label);if(o>=0){const m=i.document.positionAt(o);i.revealRange(new d.Range(m,m)),i.selection=new d.Selection(m,m)}}}async getChildren(){this.childrenDisposables&&this.childrenDisposables.length&&(this.childrenDisposables.forEach(i=>i.dispose()),this.childrenDisposables=[]);let e=!1,r=!1,n=!1;if(this._type===dr.LocalPullRequest)try{this.prs=await this._folderRepoManager.getLocalPullRequests(),this._telemetry.sendTelemetryEvent("pr.expand.local")}catch(i){d.window.showErrorMessage(`Fetching local pull requests failed: ${ke(i)}`),n=i instanceof _u}else if(this.fetchNextPage){try{const i=await this._folderRepoManager.getPullRequests(this._type,{fetchNextPage:!0},this._categoryQuery);this.prs=this.prs.concat(i.items),e=i.hasMorePages,r=i.hasUnsearchedRepositories}catch(i){d.window.showErrorMessage(`Fetching pull requests failed: ${ke(i)}`),n=i instanceof _u}this.fetchNextPage=!1}else try{const i=await this._folderRepoManager.getPullRequests(this._type,{fetchNextPage:!1},this._categoryQuery);switch(this.prs=i.items,e=i.hasMorePages,r=i.hasUnsearchedRepositories,this._type){case dr.All:this._telemetry.sendTelemetryEvent("pr.expand.all");break;case dr.Query:this._telemetry.sendTelemetryEvent("pr.expand.query");break}}catch(i){d.window.showErrorMessage(`Fetching pull requests failed: ${ke(i)}`),n=i instanceof _u}if(this.prs&&this.prs.length){const i=this.prs.map(a=>new oa(this,this._folderRepoManager,a,this._type===dr.LocalPullRequest));return e?i.push(new Mi(this,1,this)):r&&i.push(new Mi(this,2,this)),this.childrenDisposables=i,i}else{const i=n?3:0,a=[new Mi(this,i)];return this.childrenDisposables=a,a}}getTreeItem(){return this}}var jv=Object.defineProperty,Ep=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?jv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Sp="queries";class so extends jr{constructor(e,r,n,i){super();this.folderManager=n,this.telemetry=i,Ep(this,"collapsibleState"),Ep(this,"iconPath"),this.parent=e,this.collapsibleState=d.TreeItemCollapsibleState.Expanded,this.label=$.basename(r.fsPath)}static getQueries(e){return d.workspace.getConfiguration(Br,e.repository.rootUri).get(Sp)||[]}getTreeItem(){return this}async getChildren(){return so.getCategoryTreeNodes(this.folderManager,this.telemetry,this)}static getCategoryTreeNodes(e,r,n){const i=so.getQueries(e).map(a=>new dd(n,e,r,dr.Query,a.label,a.query));return[new dd(n,e,r,dr.LocalPullRequest),...i,new dd(n,e,r,dr.All)]}}var zv=Object.defineProperty,es=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?zv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class kp{constructor(e){this._telemetry=e,es(this,"_onDidChangeTreeData",new d.EventEmitter),es(this,"onDidChangeTreeData",this._onDidChangeTreeData.event),es(this,"_onDidChange",new d.EventEmitter),es(this,"_disposables"),es(this,"_childrenDisposables"),es(this,"_view"),es(this,"_reposManager"),es(this,"_initialized",!1),this._disposables=[],this._disposables.push(d.workspace.registerTextDocumentContentProvider("pr",up())),this._disposables.push(d.window.registerFileDecorationProvider(ep)),this._disposables.push(d.window.registerFileDecorationProvider(Kc)),this._disposables.push(d.commands.registerCommand("pr.refreshList",r=>{this._onDidChangeTreeData.fire()})),this._disposables.push(d.commands.registerCommand("pr.loadMore",r=>{r.fetchNextPage=!0,this._onDidChangeTreeData.fire(r)})),this._view=d.window.createTreeView("pr:github",{treeDataProvider:this,showCollapseAll:!0}),this._disposables.push(this._view),this._childrenDisposables=[],this._disposables.push(d.commands.registerCommand("pr.configurePRViewlet",async()=>{switch(await d.window.showQuickPick(["Configure Remotes...","Configure Queries..."])){case"Configure Queries...":return d.commands.executeCommand("workbench.action.openSettings",`@ext:${Vn} queries`);case"Configure Remotes...":return d.commands.executeCommand("workbench.action.openSettings",`@ext:${Vn} remotes`);default:return}})),this._disposables.push(d.workspace.onDidChangeConfiguration(r=>{r.affectsConfiguration(`${Br}.fileListLayout`)&&this._onDidChangeTreeData.fire()}))}get onDidChange(){return this._onDidChange.event}get view(){return this._view}async reveal(e,r){return this._view.reveal(e,r)}initialize(e){if(this._initialized)throw new Error("Tree has already been initialized!");this._initialized=!0,this._reposManager=e,this._disposables.push(this._reposManager.onDidChangeState(()=>{this._onDidChangeTreeData.fire()})),this._disposables.push(...this._reposManager.folderManagers.map(r=>r.onDidChangeRepositories(()=>{this._onDidChangeTreeData.fire()}))),this.initializeCategories(),this.refresh()}async initializeCategories(){this._disposables.push(d.workspace.onDidChangeConfiguration(async e=>{e.affectsConfiguration(`${Br}.${Sp}`)&&this.refresh()}))}refresh(e){return e?this._onDidChangeTreeData.fire(e):this._onDidChangeTreeData.fire()}getTreeItem(e){return e.getTreeItem()}async resolveTreeItem(e,r){return r instanceof xu&&await r.resolve(),r}needsRemotes(){var e;return((e=this._reposManager)==null?void 0:e.state)===_n.NeedsAuthentication?Promise.resolve([]):d.workspace.getConfiguration(Br).get(za)?Promise.resolve([new Mi(this,Zi.NoMatchingRemotes),new Mi(this,Zi.ConfigureRemotes)]):Promise.resolve([new Mi(this,Zi.NoRemotes)])}async getChildren(e){if(!this._reposManager)return d.workspace.workspaceFolders?Promise.resolve([new Mi(this,Zi.NoGitRepositories)]):[];if(this._reposManager.state===_n.Initializing)return Promise.resolve([new Mi(this,Zi.Initializing)]);if(this._reposManager.folderManagers.filter(r=>r.getGitHubRemotes().length>0).length===0)return this.needsRemotes();if(!e){this._childrenDisposables&&this._childrenDisposables.length&&this._childrenDisposables.forEach(n=>n.dispose());let r;return this._reposManager.folderManagers.length===1?r=so.getCategoryTreeNodes(this._reposManager.folderManagers[0],this._telemetry,this):r=this._reposManager.folderManagers.map(n=>new so(this,n.repository.rootUri,n,this._telemetry)),this._childrenDisposables=r,Promise.resolve(r)}return this._reposManager.folderManagers.filter(r=>r.repository.state.remotes.length>0).length===0?Promise.resolve([new Mi(this,Zi.Empty)]):e.getChildren()}async getParent(e){return e.getParent()}dispose(){this._disposables.forEach(e=>e.dispose())}}var Qv=Object.defineProperty,Tp=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Qv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Wv{constructor(e){this.gitAPI=e,Tp(this,"_onDidChange",new d.EventEmitter),Tp(this,"_fallback")}get onDidChange(){return this._onDidChange.event}async provideTextDocumentContent(e,r){if(!this._fallback)return"";const{path:n,commit:i,rootPath:a}=Fi(e.query);if(!n||!i)return"";const o=Vc(this.gitAPI,d.Uri.file(a));if(!o)return d.window.showErrorMessage(`We couldn't find an open repository for ${i} locally.`),"";const m=$.join(o.rootUri.fsPath,n).replace(/\\/g,"/");let S;try{if(S=await o.show(i,m),!S)throw new Error}catch(T){if(S=await this._fallback(e),!S)try{await o.getCommit(i)}catch(A){d.window.showErrorMessage(`We couldn't find commit ${i} locally. You may want to sync the branch with remote. Sometimes commits can disappear after a force-push`)}}return S||""}registerTextDocumentContentFallback(e){this._fallback=e}}var Kv=Object.defineProperty,Rp=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Kv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Cp{constructor(e,r,n,i,a,o,m){this._context=e,this._reposManager=r,this._reviewManagers=n,this._prsTreeDataProvider=i,this._prFileChangesProvider=a,this._telemetry=o,Rp(this,"_disposables"),this._disposables=[];const S=new Wv(m);S.registerTextDocumentContentFallback(this.provideTextDocumentContent.bind(this)),this._disposables.push(d.workspace.registerTextDocumentContentProvider("review",S)),this.registerListeners(),this._disposables.push(this._prsTreeDataProvider)}registerListeners(){this._disposables.push(d.workspace.onDidChangeConfiguration(async e=>{if(e.affectsConfiguration("githubPullRequests.showInSCM")){if(this._prFileChangesProvider){this._prFileChangesProvider.dispose(),this._prFileChangesProvider=new _p(this._context);for(const r of this._reviewManagers)r.updateState(!0)}this._prsTreeDataProvider.dispose(),this._prsTreeDataProvider=new kp(this._telemetry),this._prsTreeDataProvider.initialize(this._reposManager),this._disposables.push(this._prsTreeDataProvider)}}))}async provideTextDocumentContent(e){for(const r of this._reviewManagers)if(e.fsPath.startsWith(r.repository.rootUri.fsPath))return r.provideTextDocumentContent(e);return""}dispose(){this._disposables.forEach(e=>{e.dispose()})}}Rp(Cp,"ID","Reviews");const Yv="AIF-d9b70cd4-b9f9-4d70-929b-a071c400b217";let Fr;const Pp="prompts",Np="createPROnPublish";async function Ap(t,e,r,n,i,a,o){t.subscriptions.push(P),P.appendLine("Git repository found, initializing review manager and pr tree view."),d.authentication.onDidChangeSessions(async Ae=>{Ae.provider.id==="github"&&(await A.clearCredentialCache(),Y&&Y.forEach(Ge=>Ge.updateState(!0)))}),t.subscriptions.push(e.onDidPublish(async Ae=>{if(!Ae.branch||th(Pp,Np)===!1)return;const Ge=Y.find(Kt=>Kt.repository.rootUri.toString()===Ae.repository.rootUri.toString());if(Ge==null?void 0:Ge.isCreatingPullRequest)return;const $e=T.find(Kt=>Kt.repository.rootUri.toString()===Ae.repository.rootUri.toString());if(!$e||$e.gitHubRepositories.length===0||(await $e.getPullRequestDefaults()).base===Ae.branch)return;const We="Create Pull Request...",It="Don't Show Again",Dt=await d.window.showInformationMessage(`Would you like to create a Pull Request for branch '${Ae.branch}'?`,We,It);Dt===We?Ge==null||Ge.createPullRequest(Ae.branch):Dt===It&&rh(Pp,Np,!1)})),t.subscriptions.push(d.window.registerUriHandler(ju)),t.subscriptions.push(new Ov);const m=d.workspace.workspaceFolders;m&&(n=n.sort((Ae,Ge)=>{let $e=m.length,Ue=m.length;for(let We=0;We<m.length&&(m[We].uri.toString()===Ae.rootUri.toString()?$e=We:m[We].uri.toString()===Ge.rootUri.toString()&&(Ue=We),!($e!==m.length&&Ue!==m.length));We++);return $e-Ue}));const S=new qg(t),T=n.map(Ae=>new ea(t,Ae,Fr,e,r,S));t.subscriptions.push(...T);const A=new hp(T,r,Fr,S);t.subscriptions.push(A),a.then(Ae=>{Ae&&Ae.registerContactServiceProvider("github-pr",new sv(A))});const H=new _p(t);t.subscriptions.push(H);const Y=T.map(Ae=>new Ji(t,Ae.repository,Ae,Fr,H,o,S)),pe=new Cp(t,A,Y,i,H,Fr,e);t.subscriptions.push(pe),e.onDidChangeState(()=>{P.appendLine(`Git initialization state changed: state=${e.state}`),Y.forEach(Ae=>Ae.updateState(!0))}),e.onDidOpenRepository(Ae=>{const Ge=Ae.state.onDidChange(()=>{if(P.appendLine(`Repo state for ${Ae.rootUri} changed.`),A.getManagerForFile(Ae.rootUri)){P.appendLine(`Repo ${Ae.rootUri} has already been setup.`);return}const Ue=new ea(t,Ae,Fr,e,r,S);A.insertFolderManager(Ue);const We=new Ji(t,Ue.repository,Ue,Fr,H,o,S);Y.push(We),i.refresh(),Ge.dispose()})}),e.onDidCloseRepository(Ae=>{A.removeRepo(Ae);const Ge=Y.findIndex($e=>$e.repository.rootUri.toString()===Ae.rootUri.toString());if(Ge){const $e=Y[Ge];Y.splice(Ge),$e.dispose()}i.refresh()}),i.initialize(A),Km(t),Fg(t,S,A,Y,Fr,r,i);const me=d.workspace.getConfiguration("githubPullRequests").get("fileListLayout");await d.commands.executeCommand("setContext","fileListLayout:flat",me==="flat");const be=new Av(e,A,Y,t,Fr);t.subscriptions.push(be),await be.initialize(),t.subscriptions.push(new ov),await d.commands.executeCommand("setContext","github:initialized",!0);const Ne=await Vg(t,Fr);await Ne.initializePromise,await Ne.isCachedFlightEnabled("githubaa"),Fr.sendTelemetryEvent("startup")}async function Xv(t){if(Vn==="GitHub.vscode-pull-request-github-insiders"&&d.extensions.getExtension("github.vscode-pull-request-github")!==void 0)throw new Error("GitHub Pull Requests and Issues Nightly cannot be used while GitHub Pull Requests and Issues is also installed. Please ensure that only one version of the extension is installed.");const e=new Ng;d.commands.registerCommand("github.api.preloadPullRequest",async a=>{await d.commands.executeCommand("setContext",Li,!0),await d.commands.executeCommand("github:activePullRequest:welcome.focus"),e.shouldShow=a});const r=d.workspace.getConfiguration("git").get("openDiffOnClick",!0);await d.commands.executeCommand("setContext","openDiffOnClick",r),dn.initialize(t),P.debug("Creating API implementation.","Activation");const n=new di,i=d.extensions.getExtension(Vn).packageJSON.version;return Fr=new $g(new(q())(Vn,i,Yv)),t.subscriptions.push(Fr),Jv(t,n,e),n}async function Ip(t,e,r){const n=await nv(e,r);return n?(t.subscriptions.push(n),!0):!1}async function Jv(t,e,r){P.debug("Initializing state.","Activation"),Um(t),Rs.init(t),P.debug("Creating credential store.","Activation");const n=new jm(Fr);if(t.subscriptions.push(n),await n.create({silent:!0}),P.debug("Registering built in git provider.","Activation"),!await Ip(t,n,e)){const S=d.extensions.onDidChange(async()=>{await Ip(t,n,e)&&S.dispose()});t.subscriptions.push(S)}P.debug("Registering live share git provider.","Activation");const i=rv(e);t.subscriptions.push(i);const a=i.initialize();t.subscriptions.push(e),P.debug("Creating tree view.","Activation");const o=new kp(Fr);t.subscriptions.push(o),P.appendLine("Looking for git repository");const m=e.repositories;P.appendLine(`Found ${m.length} repositories during activation`),m.length>0?await Ap(t,e,n,m,o,a,r):(P.appendLine("Waiting for git repository"),re(e.onDidOpenRepository)(async S=>{P.appendLine(`Repository ${S.rootUri} opened`),await Ap(t,e,n,[S],o,a,r)}))}async function Zv(){Fr&&Fr.dispose()}})(),module.exports=$u})();
