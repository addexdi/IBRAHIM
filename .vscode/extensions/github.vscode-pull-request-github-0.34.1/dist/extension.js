(()=>{var Ap={9669:(u,Z,M)=>{u.exports=M(1609)},7970:(u,Z,M)=>{"use strict";var V=M(4867),W=M(6026),ne=M(4097),F=M(5327),O=M(8605),x=M(7211),N=M(938).http,C=M(938).https,L=M(8835),q=M(8761),B=M(696),I=M(5061),$=M(481),G=/https:?/;function H(se,X,ve){if(se.hostname=X.host,se.host=X.host,se.port=X.port,se.path=ve,X.auth){var he=Buffer.from(X.auth.username+":"+X.auth.password,"utf8").toString("base64");se.headers["Proxy-Authorization"]="Basic "+he}se.beforeRedirect=function(Y){Y.headers.host=Y.host,H(Y,X,Y.href)}}u.exports=function(X){return new Promise(function(he,Ne){var Y=function(ht){he(ht)},ae=function(ht){Ne(ht)},te=X.data,J=X.headers;if("User-Agent"in J||"user-agent"in J?!J["User-Agent"]&&!J["user-agent"]&&(delete J["User-Agent"],delete J["user-agent"]):J["User-Agent"]="axios/"+B.version,te&&!V.isStream(te)){if(!Buffer.isBuffer(te))if(V.isArrayBuffer(te))te=Buffer.from(new Uint8Array(te));else if(V.isString(te))te=Buffer.from(te,"utf-8");else return ae(I("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",X));J["Content-Length"]=te.length}var Q=void 0;if(X.auth){var ue=X.auth.username||"",fe=X.auth.password||"";Q=ue+":"+fe}var ye=ne(X.baseURL,X.url),Ee=L.parse(ye),be=Ee.protocol||"http:";if(!Q&&Ee.auth){var Ue=Ee.auth.split(":"),ze=Ue[0]||"",et=Ue[1]||"";Q=ze+":"+et}Q&&delete J.Authorization;var it=G.test(be),At=it?X.httpsAgent:X.httpAgent,Rt={path:F(Ee.path,X.params,X.paramsSerializer).replace(/^\?/,""),method:X.method.toUpperCase(),headers:J,agent:At,agents:{http:X.httpAgent,https:X.httpsAgent},auth:Q};X.socketPath?Rt.socketPath=X.socketPath:(Rt.hostname=Ee.hostname,Rt.port=Ee.port);var Ft=X.proxy;if(!Ft&&Ft!==!1){var Lt=be.slice(0,-1)+"_proxy",cr=process.env[Lt]||process.env[Lt.toUpperCase()];if(cr){var Tr=L.parse(cr),rn=process.env.no_proxy||process.env.NO_PROXY,Oi=!0;if(rn){var cs=rn.split(",").map(function(ht){return ht.trim()});Oi=!cs.some(function(ht){return ht?ht==="*"||ht[0]==="."&&Ee.hostname.substr(Ee.hostname.length-ht.length)===ht?!0:Ee.hostname===ht:!1})}if(Oi&&(Ft={host:Tr.hostname,port:Tr.port,protocol:Tr.protocol},Tr.auth)){var Di=Tr.auth.split(":");Ft.auth={username:Di[0],password:Di[1]}}}}Ft&&(Rt.headers.host=Ee.hostname+(Ee.port?":"+Ee.port:""),H(Rt,Ft,be+"//"+Ee.hostname+(Ee.port?":"+Ee.port:"")+Rt.path));var oi,qn=it&&(Ft?G.test(Ft.protocol):!0);X.transport?oi=X.transport:X.maxRedirects===0?oi=qn?x:O:(X.maxRedirects&&(Rt.maxRedirects=X.maxRedirects),oi=qn?C:N),X.maxBodyLength>-1&&(Rt.maxBodyLength=X.maxBodyLength);var qt=oi.request(Rt,function(ht){if(!qt.aborted){var or=ht,Un=ht.req||qt;if(ht.statusCode!==204&&Un.method!=="HEAD"&&X.decompress!==!1)switch(ht.headers["content-encoding"]){case"gzip":case"compress":case"deflate":or=or.pipe(q.createUnzip()),delete ht.headers["content-encoding"];break}var $n={status:ht.statusCode,statusText:ht.statusMessage,headers:ht.headers,config:X,request:Un};if(X.responseType==="stream")$n.data=or,W(Y,ae,$n);else{var ui=[],Mi=0;or.on("data",function(jt){ui.push(jt),Mi+=jt.length,X.maxContentLength>-1&&Mi>X.maxContentLength&&(or.destroy(),ae(I("maxContentLength size of "+X.maxContentLength+" exceeded",X,null,Un)))}),or.on("error",function(jt){qt.aborted||ae($(jt,X,null,Un))}),or.on("end",function(){var jt=Buffer.concat(ui);X.responseType!=="arraybuffer"&&(jt=jt.toString(X.responseEncoding),(!X.responseEncoding||X.responseEncoding==="utf8")&&(jt=V.stripBOM(jt))),$n.data=jt,W(Y,ae,$n)})}}});if(qt.on("error",function(ht){qt.aborted&&ht.code!=="ERR_FR_TOO_MANY_REDIRECTS"||ae($(ht,X,null,qt))}),X.timeout){var xi=parseInt(X.timeout,10);if(isNaN(xi)){ae(I("error trying to parse `config.timeout` to int",X,"ERR_PARSE_TIMEOUT",qt));return}qt.setTimeout(xi,function(){qt.abort(),ae(I("timeout of "+xi+"ms exceeded",X,X.transitional&&X.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",qt))})}X.cancelToken&&X.cancelToken.promise.then(function(ht){qt.aborted||(qt.abort(),ae(ht))}),V.isStream(te)?te.on("error",function(ht){ae($(ht,X,null,qt))}).pipe(qt):qt.end(te)})}},5448:(u,Z,M)=>{"use strict";var V=M(4867),W=M(6026),ne=M(4372),F=M(5327),O=M(4097),x=M(4109),N=M(7985),C=M(5061);u.exports=function(q){return new Promise(function(I,$){var G=q.data,H=q.headers,se=q.responseType;V.isFormData(G)&&delete H["Content-Type"];var X=new XMLHttpRequest;if(q.auth){var ve=q.auth.username||"",he=q.auth.password?unescape(encodeURIComponent(q.auth.password)):"";H.Authorization="Basic "+btoa(ve+":"+he)}var Ne=O(q.baseURL,q.url);X.open(q.method.toUpperCase(),F(Ne,q.params,q.paramsSerializer),!0),X.timeout=q.timeout;function Y(){if(!!X){var te="getAllResponseHeaders"in X?x(X.getAllResponseHeaders()):null,J=!se||se==="text"||se==="json"?X.responseText:X.response,Q={data:J,status:X.status,statusText:X.statusText,headers:te,config:q,request:X};W(I,$,Q),X=null}}if("onloadend"in X?X.onloadend=Y:X.onreadystatechange=function(){!X||X.readyState!==4||X.status===0&&!(X.responseURL&&X.responseURL.indexOf("file:")===0)||setTimeout(Y)},X.onabort=function(){!X||($(C("Request aborted",q,"ECONNABORTED",X)),X=null)},X.onerror=function(){$(C("Network Error",q,null,X)),X=null},X.ontimeout=function(){var J="timeout of "+q.timeout+"ms exceeded";q.timeoutErrorMessage&&(J=q.timeoutErrorMessage),$(C(J,q,q.transitional&&q.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",X)),X=null},V.isStandardBrowserEnv()){var ae=(q.withCredentials||N(Ne))&&q.xsrfCookieName?ne.read(q.xsrfCookieName):void 0;ae&&(H[q.xsrfHeaderName]=ae)}"setRequestHeader"in X&&V.forEach(H,function(J,Q){typeof G=="undefined"&&Q.toLowerCase()==="content-type"?delete H[Q]:X.setRequestHeader(Q,J)}),V.isUndefined(q.withCredentials)||(X.withCredentials=!!q.withCredentials),se&&se!=="json"&&(X.responseType=q.responseType),typeof q.onDownloadProgress=="function"&&X.addEventListener("progress",q.onDownloadProgress),typeof q.onUploadProgress=="function"&&X.upload&&X.upload.addEventListener("progress",q.onUploadProgress),q.cancelToken&&q.cancelToken.promise.then(function(J){!X||(X.abort(),$(J),X=null)}),G||(G=null),X.send(G)})}},1609:(u,Z,M)=>{"use strict";var V=M(4867),W=M(1849),ne=M(321),F=M(7185),O=M(5655);function x(C){var L=new ne(C),q=W(ne.prototype.request,L);return V.extend(q,ne.prototype,L),V.extend(q,L),q}var N=x(O);N.Axios=ne,N.create=function(L){return x(F(N.defaults,L))},N.Cancel=M(5263),N.CancelToken=M(4972),N.isCancel=M(6502),N.all=function(L){return Promise.all(L)},N.spread=M(8713),N.isAxiosError=M(6268),u.exports=N,u.exports.default=N},5263:u=>{"use strict";function Z(M){this.message=M}Z.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Z.prototype.__CANCEL__=!0,u.exports=Z},4972:(u,Z,M)=>{"use strict";var V=M(5263);function W(ne){if(typeof ne!="function")throw new TypeError("executor must be a function.");var F;this.promise=new Promise(function(N){F=N});var O=this;ne(function(N){O.reason||(O.reason=new V(N),F(O.reason))})}W.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},W.source=function(){var F,O=new W(function(N){F=N});return{token:O,cancel:F}},u.exports=W},6502:u=>{"use strict";u.exports=function(M){return!!(M&&M.__CANCEL__)}},321:(u,Z,M)=>{"use strict";var V=M(4867),W=M(5327),ne=M(782),F=M(3572),O=M(7185),x=M(4875),N=x.validators;function C(L){this.defaults=L,this.interceptors={request:new ne,response:new ne}}C.prototype.request=function(q){typeof q=="string"?(q=arguments[1]||{},q.url=arguments[0]):q=q||{},q=O(this.defaults,q),q.method?q.method=q.method.toLowerCase():this.defaults.method?q.method=this.defaults.method.toLowerCase():q.method="get";var B=q.transitional;B!==void 0&&x.assertOptions(B,{silentJSONParsing:N.transitional(N.boolean,"1.0.0"),forcedJSONParsing:N.transitional(N.boolean,"1.0.0"),clarifyTimeoutError:N.transitional(N.boolean,"1.0.0")},!1);var I=[],$=!0;this.interceptors.request.forEach(function(Y){typeof Y.runWhen=="function"&&Y.runWhen(q)===!1||($=$&&Y.synchronous,I.unshift(Y.fulfilled,Y.rejected))});var G=[];this.interceptors.response.forEach(function(Y){G.push(Y.fulfilled,Y.rejected)});var H;if(!$){var se=[F,void 0];for(Array.prototype.unshift.apply(se,I),se=se.concat(G),H=Promise.resolve(q);se.length;)H=H.then(se.shift(),se.shift());return H}for(var X=q;I.length;){var ve=I.shift(),he=I.shift();try{X=ve(X)}catch(Ne){he(Ne);break}}try{H=F(X)}catch(Ne){return Promise.reject(Ne)}for(;G.length;)H=H.then(G.shift(),G.shift());return H},C.prototype.getUri=function(q){return q=O(this.defaults,q),W(q.url,q.params,q.paramsSerializer).replace(/^\?/,"")},V.forEach(["delete","get","head","options"],function(q){C.prototype[q]=function(B,I){return this.request(O(I||{},{method:q,url:B,data:(I||{}).data}))}}),V.forEach(["post","put","patch"],function(q){C.prototype[q]=function(B,I,$){return this.request(O($||{},{method:q,url:B,data:I}))}}),u.exports=C},782:(u,Z,M)=>{"use strict";var V=M(4867);function W(){this.handlers=[]}W.prototype.use=function(F,O,x){return this.handlers.push({fulfilled:F,rejected:O,synchronous:x?x.synchronous:!1,runWhen:x?x.runWhen:null}),this.handlers.length-1},W.prototype.eject=function(F){this.handlers[F]&&(this.handlers[F]=null)},W.prototype.forEach=function(F){V.forEach(this.handlers,function(x){x!==null&&F(x)})},u.exports=W},4097:(u,Z,M)=>{"use strict";var V=M(1793),W=M(9002);u.exports=function(F,O){return F&&!V(O)?W(F,O):O}},5061:(u,Z,M)=>{"use strict";var V=M(481);u.exports=function(ne,F,O,x,N){var C=new Error(ne);return V(C,F,O,x,N)}},3572:(u,Z,M)=>{"use strict";var V=M(4867),W=M(8527),ne=M(6502),F=M(5655);function O(x){x.cancelToken&&x.cancelToken.throwIfRequested()}u.exports=function(N){O(N),N.headers=N.headers||{},N.data=W.call(N,N.data,N.headers,N.transformRequest),N.headers=V.merge(N.headers.common||{},N.headers[N.method]||{},N.headers),V.forEach(["delete","get","head","post","put","patch","common"],function(q){delete N.headers[q]});var C=N.adapter||F.adapter;return C(N).then(function(q){return O(N),q.data=W.call(N,q.data,q.headers,N.transformResponse),q},function(q){return ne(q)||(O(N),q&&q.response&&(q.response.data=W.call(N,q.response.data,q.response.headers,N.transformResponse))),Promise.reject(q)})}},481:u=>{"use strict";u.exports=function(M,V,W,ne,F){return M.config=V,W&&(M.code=W),M.request=ne,M.response=F,M.isAxiosError=!0,M.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},M}},7185:(u,Z,M)=>{"use strict";var V=M(4867);u.exports=function(ne,F){F=F||{};var O={},x=["url","method","data"],N=["headers","auth","proxy","params"],C=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],L=["validateStatus"];function q(G,H){return V.isPlainObject(G)&&V.isPlainObject(H)?V.merge(G,H):V.isPlainObject(H)?V.merge({},H):V.isArray(H)?H.slice():H}function B(G){V.isUndefined(F[G])?V.isUndefined(ne[G])||(O[G]=q(void 0,ne[G])):O[G]=q(ne[G],F[G])}V.forEach(x,function(H){V.isUndefined(F[H])||(O[H]=q(void 0,F[H]))}),V.forEach(N,B),V.forEach(C,function(H){V.isUndefined(F[H])?V.isUndefined(ne[H])||(O[H]=q(void 0,ne[H])):O[H]=q(void 0,F[H])}),V.forEach(L,function(H){H in F?O[H]=q(ne[H],F[H]):H in ne&&(O[H]=q(void 0,ne[H]))});var I=x.concat(N).concat(C).concat(L),$=Object.keys(ne).concat(Object.keys(F)).filter(function(H){return I.indexOf(H)===-1});return V.forEach($,B),O}},6026:(u,Z,M)=>{"use strict";var V=M(5061);u.exports=function(ne,F,O){var x=O.config.validateStatus;!O.status||!x||x(O.status)?ne(O):F(V("Request failed with status code "+O.status,O.config,null,O.request,O))}},8527:(u,Z,M)=>{"use strict";var V=M(4867),W=M(5655);u.exports=function(F,O,x){var N=this||W;return V.forEach(x,function(L){F=L.call(N,F,O)}),F}},5655:(u,Z,M)=>{"use strict";var V=M(4867),W=M(6016),ne=M(481),F={"Content-Type":"application/x-www-form-urlencoded"};function O(L,q){!V.isUndefined(L)&&V.isUndefined(L["Content-Type"])&&(L["Content-Type"]=q)}function x(){var L;return typeof XMLHttpRequest!="undefined"?L=M(5448):typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]"&&(L=M(7970)),L}function N(L,q,B){if(V.isString(L))try{return(q||JSON.parse)(L),V.trim(L)}catch(I){if(I.name!=="SyntaxError")throw I}return(B||JSON.stringify)(L)}var C={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:x(),transformRequest:[function(q,B){return W(B,"Accept"),W(B,"Content-Type"),V.isFormData(q)||V.isArrayBuffer(q)||V.isBuffer(q)||V.isStream(q)||V.isFile(q)||V.isBlob(q)?q:V.isArrayBufferView(q)?q.buffer:V.isURLSearchParams(q)?(O(B,"application/x-www-form-urlencoded;charset=utf-8"),q.toString()):V.isObject(q)||B&&B["Content-Type"]==="application/json"?(O(B,"application/json"),N(q)):q}],transformResponse:[function(q){var B=this.transitional,I=B&&B.silentJSONParsing,$=B&&B.forcedJSONParsing,G=!I&&this.responseType==="json";if(G||$&&V.isString(q)&&q.length)try{return JSON.parse(q)}catch(H){if(G)throw H.name==="SyntaxError"?ne(H,this,"E_JSON_PARSE"):H}return q}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(q){return q>=200&&q<300}};C.headers={common:{Accept:"application/json, text/plain, */*"}},V.forEach(["delete","get","head"],function(q){C.headers[q]={}}),V.forEach(["post","put","patch"],function(q){C.headers[q]=V.merge(F)}),u.exports=C},1849:u=>{"use strict";u.exports=function(M,V){return function(){for(var ne=new Array(arguments.length),F=0;F<ne.length;F++)ne[F]=arguments[F];return M.apply(V,ne)}}},5327:(u,Z,M)=>{"use strict";var V=M(4867);function W(ne){return encodeURIComponent(ne).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}u.exports=function(F,O,x){if(!O)return F;var N;if(x)N=x(O);else if(V.isURLSearchParams(O))N=O.toString();else{var C=[];V.forEach(O,function(B,I){B===null||typeof B=="undefined"||(V.isArray(B)?I=I+"[]":B=[B],V.forEach(B,function(G){V.isDate(G)?G=G.toISOString():V.isObject(G)&&(G=JSON.stringify(G)),C.push(W(I)+"="+W(G))}))}),N=C.join("&")}if(N){var L=F.indexOf("#");L!==-1&&(F=F.slice(0,L)),F+=(F.indexOf("?")===-1?"?":"&")+N}return F}},9002:u=>{"use strict";u.exports=function(M,V){return V?M.replace(/\/+$/,"")+"/"+V.replace(/^\/+/,""):M}},4372:(u,Z,M)=>{"use strict";var V=M(4867);u.exports=V.isStandardBrowserEnv()?function(){return{write:function(F,O,x,N,C,L){var q=[];q.push(F+"="+encodeURIComponent(O)),V.isNumber(x)&&q.push("expires="+new Date(x).toGMTString()),V.isString(N)&&q.push("path="+N),V.isString(C)&&q.push("domain="+C),L===!0&&q.push("secure"),document.cookie=q.join("; ")},read:function(F){var O=document.cookie.match(new RegExp("(^|;\\s*)("+F+")=([^;]*)"));return O?decodeURIComponent(O[3]):null},remove:function(F){this.write(F,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},1793:u=>{"use strict";u.exports=function(M){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(M)}},6268:u=>{"use strict";u.exports=function(M){return typeof M=="object"&&M.isAxiosError===!0}},7985:(u,Z,M)=>{"use strict";var V=M(4867);u.exports=V.isStandardBrowserEnv()?function(){var ne=/(msie|trident)/i.test(navigator.userAgent),F=document.createElement("a"),O;function x(N){var C=N;return ne&&(F.setAttribute("href",C),C=F.href),F.setAttribute("href",C),{href:F.href,protocol:F.protocol?F.protocol.replace(/:$/,""):"",host:F.host,search:F.search?F.search.replace(/^\?/,""):"",hash:F.hash?F.hash.replace(/^#/,""):"",hostname:F.hostname,port:F.port,pathname:F.pathname.charAt(0)==="/"?F.pathname:"/"+F.pathname}}return O=x(window.location.href),function(C){var L=V.isString(C)?x(C):C;return L.protocol===O.protocol&&L.host===O.host}}():function(){return function(){return!0}}()},6016:(u,Z,M)=>{"use strict";var V=M(4867);u.exports=function(ne,F){V.forEach(ne,function(x,N){N!==F&&N.toUpperCase()===F.toUpperCase()&&(ne[F]=x,delete ne[N])})}},4109:(u,Z,M)=>{"use strict";var V=M(4867),W=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];u.exports=function(F){var O={},x,N,C;return F&&V.forEach(F.split(`
`),function(q){if(C=q.indexOf(":"),x=V.trim(q.substr(0,C)).toLowerCase(),N=V.trim(q.substr(C+1)),x){if(O[x]&&W.indexOf(x)>=0)return;x==="set-cookie"?O[x]=(O[x]?O[x]:[]).concat([N]):O[x]=O[x]?O[x]+", "+N:N}}),O}},8713:u=>{"use strict";u.exports=function(M){return function(W){return M.apply(null,W)}}},4875:(u,Z,M)=>{"use strict";var V=M(696),W={};["object","boolean","number","function","string","symbol"].forEach(function(N,C){W[N]=function(q){return typeof q===N||"a"+(C<1?"n ":" ")+N}});var ne={},F=V.version.split(".");function O(N,C){for(var L=C?C.split("."):F,q=N.split("."),B=0;B<3;B++){if(L[B]>q[B])return!0;if(L[B]<q[B])return!1}return!1}W.transitional=function(C,L,q){var B=L&&O(L);function I($,G){return"[Axios v"+V.version+"] Transitional option '"+$+"'"+G+(q?". "+q:"")}return function($,G,H){if(C===!1)throw new Error(I(G," has been removed in "+L));return B&&!ne[G]&&(ne[G]=!0,console.warn(I(G," has been deprecated since v"+L+" and will be removed in the near future"))),C?C($,G,H):!0}};function x(N,C,L){if(typeof N!="object")throw new TypeError("options must be an object");for(var q=Object.keys(N),B=q.length;B-- >0;){var I=q[B],$=C[I];if($){var G=N[I],H=G===void 0||$(G,I,N);if(H!==!0)throw new TypeError("option "+I+" must be "+H);continue}if(L!==!0)throw Error("Unknown option "+I)}}u.exports={isOlderVersion:O,assertOptions:x,validators:W}},4867:(u,Z,M)=>{"use strict";var V=M(1849),W=Object.prototype.toString;function ne(Q){return W.call(Q)==="[object Array]"}function F(Q){return typeof Q=="undefined"}function O(Q){return Q!==null&&!F(Q)&&Q.constructor!==null&&!F(Q.constructor)&&typeof Q.constructor.isBuffer=="function"&&Q.constructor.isBuffer(Q)}function x(Q){return W.call(Q)==="[object ArrayBuffer]"}function N(Q){return typeof FormData!="undefined"&&Q instanceof FormData}function C(Q){var ue;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?ue=ArrayBuffer.isView(Q):ue=Q&&Q.buffer&&Q.buffer instanceof ArrayBuffer,ue}function L(Q){return typeof Q=="string"}function q(Q){return typeof Q=="number"}function B(Q){return Q!==null&&typeof Q=="object"}function I(Q){if(W.call(Q)!=="[object Object]")return!1;var ue=Object.getPrototypeOf(Q);return ue===null||ue===Object.prototype}function $(Q){return W.call(Q)==="[object Date]"}function G(Q){return W.call(Q)==="[object File]"}function H(Q){return W.call(Q)==="[object Blob]"}function se(Q){return W.call(Q)==="[object Function]"}function X(Q){return B(Q)&&se(Q.pipe)}function ve(Q){return typeof URLSearchParams!="undefined"&&Q instanceof URLSearchParams}function he(Q){return Q.trim?Q.trim():Q.replace(/^\s+|\s+$/g,"")}function Ne(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function Y(Q,ue){if(!(Q===null||typeof Q=="undefined"))if(typeof Q!="object"&&(Q=[Q]),ne(Q))for(var fe=0,ye=Q.length;fe<ye;fe++)ue.call(null,Q[fe],fe,Q);else for(var Ee in Q)Object.prototype.hasOwnProperty.call(Q,Ee)&&ue.call(null,Q[Ee],Ee,Q)}function ae(){var Q={};function ue(Ee,be){I(Q[be])&&I(Ee)?Q[be]=ae(Q[be],Ee):I(Ee)?Q[be]=ae({},Ee):ne(Ee)?Q[be]=Ee.slice():Q[be]=Ee}for(var fe=0,ye=arguments.length;fe<ye;fe++)Y(arguments[fe],ue);return Q}function te(Q,ue,fe){return Y(ue,function(Ee,be){fe&&typeof Ee=="function"?Q[be]=V(Ee,fe):Q[be]=Ee}),Q}function J(Q){return Q.charCodeAt(0)===65279&&(Q=Q.slice(1)),Q}u.exports={isArray:ne,isArrayBuffer:x,isBuffer:O,isFormData:N,isArrayBufferView:C,isString:L,isNumber:q,isObject:B,isPlainObject:I,isUndefined:F,isDate:$,isFile:G,isBlob:H,isFunction:se,isStream:X,isURLSearchParams:ve,isStandardBrowserEnv:Ne,forEach:Y,merge:ae,extend:te,trim:he,stripBOM:J}},696:u=>{"use strict";u.exports=JSON.parse('{"name":"axios","version":"0.21.4","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://axios-http.com","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.14.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')},5186:(u,Z,M)=>{var V=M(3698),W=M(2505),ne=M(5382),F=Function.bind,O=F.bind(F);function x(B,I,$){var G=O(ne,null).apply(null,$?[I,$]:[I]);B.api={remove:G},B.remove=G,["before","error","after","wrap"].forEach(function(H){var se=$?[I,H,$]:[I,H];B[H]=B.api[H]=O(W,null).apply(null,se)})}function N(){var B="h",I={registry:{}},$=V.bind(null,I,B);return x($,I,B),$}function C(){var B={registry:{}},I=V.bind(null,B);return x(I,B),I}var L=!1;function q(){return L||(console.warn('[before-after-hook]: "Hook()" repurposing warning, use "Hook.Collection()". Read more: https://git.io/upgrade-before-after-hook-to-1.4'),L=!0),C()}q.Singular=N.bind(),q.Collection=C.bind(),u.exports=q,u.exports.Hook=q,u.exports.Singular=q.Singular,u.exports.Collection=q.Collection},2505:u=>{u.exports=Z;function Z(M,V,W,ne){var F=ne;M.registry[W]||(M.registry[W]=[]),V==="before"&&(ne=function(O,x){return Promise.resolve().then(F.bind(null,x)).then(O.bind(null,x))}),V==="after"&&(ne=function(O,x){var N;return Promise.resolve().then(O.bind(null,x)).then(function(C){return N=C,F(N,x)}).then(function(){return N})}),V==="error"&&(ne=function(O,x){return Promise.resolve().then(O.bind(null,x)).catch(function(N){return F(N,x)})}),M.registry[W].push({hook:ne,orig:F})}},3698:u=>{u.exports=Z;function Z(M,V,W,ne){if(typeof W!="function")throw new Error("method for before hook must be a function");return ne||(ne={}),Array.isArray(V)?V.reverse().reduce(function(F,O){return Z.bind(null,M,O,F,ne)},W)():Promise.resolve().then(function(){return M.registry[V]?M.registry[V].reduce(function(F,O){return O.hook.bind(null,F,ne)},W)():W(ne)})}},5382:u=>{u.exports=Z;function Z(M,V,W){if(!!M.registry[V]){var ne=M.registry[V].map(function(F){return F.orig}).indexOf(W);ne!==-1&&M.registry[V].splice(ne,1)}}},5175:u=>{"use strict";function Z(M){if(!/^data:/i.test(M))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');M=M.replace(/\r?\n/g,"");const V=M.indexOf(",");if(V===-1||V<=4)throw new TypeError("malformed data: URI");const W=M.substring(5,V).split(";");let ne="",F=!1;const O=W[0]||"text/plain";let x=O;for(let q=1;q<W.length;q++)W[q]==="base64"?F=!0:(x+=`;${W[q]}`,W[q].indexOf("charset=")===0&&(ne=W[q].substring(8)));!W[0]&&!ne.length&&(x+=";charset=US-ASCII",ne="US-ASCII");const N=F?"base64":"ascii",C=unescape(M.substring(V+1)),L=Buffer.from(C,N);return L.type=O,L.typeFull=x,L.charset=ne,L}u.exports=Z},7484:function(u){(function(Z,M){u.exports=M()})(this,function(){"use strict";var Z="millisecond",M="second",V="minute",W="hour",ne="day",F="week",O="month",x="quarter",N="year",C="date",L=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,q=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,B={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},I=function(ae,te,J){var Q=String(ae);return!Q||Q.length>=te?ae:""+Array(te+1-Q.length).join(J)+ae},$={s:I,z:function(ae){var te=-ae.utcOffset(),J=Math.abs(te),Q=Math.floor(J/60),ue=J%60;return(te<=0?"+":"-")+I(Q,2,"0")+":"+I(ue,2,"0")},m:function ae(te,J){if(te.date()<J.date())return-ae(J,te);var Q=12*(J.year()-te.year())+(J.month()-te.month()),ue=te.clone().add(Q,O),fe=J-ue<0,ye=te.clone().add(Q+(fe?-1:1),O);return+(-(Q+(J-ue)/(fe?ue-ye:ye-ue))||0)},a:function(ae){return ae<0?Math.ceil(ae)||0:Math.floor(ae)},p:function(ae){return{M:O,y:N,w:F,d:ne,D:C,h:W,m:V,s:M,ms:Z,Q:x}[ae]||String(ae||"").toLowerCase().replace(/s$/,"")},u:function(ae){return ae===void 0}},G="en",H={};H[G]=B;var se=function(ae){return ae instanceof Ne},X=function(ae,te,J){var Q;if(!ae)return G;if(typeof ae=="string")H[ae]&&(Q=ae),te&&(H[ae]=te,Q=ae);else{var ue=ae.name;H[ue]=ae,Q=ue}return!J&&Q&&(G=Q),Q||!J&&G},ve=function(ae,te){if(se(ae))return ae.clone();var J=typeof te=="object"?te:{};return J.date=ae,J.args=arguments,new Ne(J)},he=$;he.l=X,he.i=se,he.w=function(ae,te){return ve(ae,{locale:te.$L,utc:te.$u,x:te.$x,$offset:te.$offset})};var Ne=function(){function ae(J){this.$L=X(J.locale,null,!0),this.parse(J)}var te=ae.prototype;return te.parse=function(J){this.$d=function(Q){var ue=Q.date,fe=Q.utc;if(ue===null)return new Date(NaN);if(he.u(ue))return new Date;if(ue instanceof Date)return new Date(ue);if(typeof ue=="string"&&!/Z$/i.test(ue)){var ye=ue.match(L);if(ye){var Ee=ye[2]-1||0,be=(ye[7]||"0").substring(0,3);return fe?new Date(Date.UTC(ye[1],Ee,ye[3]||1,ye[4]||0,ye[5]||0,ye[6]||0,be)):new Date(ye[1],Ee,ye[3]||1,ye[4]||0,ye[5]||0,ye[6]||0,be)}}return new Date(ue)}(J),this.$x=J.x||{},this.init()},te.init=function(){var J=this.$d;this.$y=J.getFullYear(),this.$M=J.getMonth(),this.$D=J.getDate(),this.$W=J.getDay(),this.$H=J.getHours(),this.$m=J.getMinutes(),this.$s=J.getSeconds(),this.$ms=J.getMilliseconds()},te.$utils=function(){return he},te.isValid=function(){return this.$d.toString()!=="Invalid Date"},te.isSame=function(J,Q){var ue=ve(J);return this.startOf(Q)<=ue&&ue<=this.endOf(Q)},te.isAfter=function(J,Q){return ve(J)<this.startOf(Q)},te.isBefore=function(J,Q){return this.endOf(Q)<ve(J)},te.$g=function(J,Q,ue){return he.u(J)?this[Q]:this.set(ue,J)},te.unix=function(){return Math.floor(this.valueOf()/1e3)},te.valueOf=function(){return this.$d.getTime()},te.startOf=function(J,Q){var ue=this,fe=!!he.u(Q)||Q,ye=he.p(J),Ee=function(Ft,Lt){var cr=he.w(ue.$u?Date.UTC(ue.$y,Lt,Ft):new Date(ue.$y,Lt,Ft),ue);return fe?cr:cr.endOf(ne)},be=function(Ft,Lt){return he.w(ue.toDate()[Ft].apply(ue.toDate("s"),(fe?[0,0,0,0]:[23,59,59,999]).slice(Lt)),ue)},Ue=this.$W,ze=this.$M,et=this.$D,it="set"+(this.$u?"UTC":"");switch(ye){case N:return fe?Ee(1,0):Ee(31,11);case O:return fe?Ee(1,ze):Ee(0,ze+1);case F:var At=this.$locale().weekStart||0,Rt=(Ue<At?Ue+7:Ue)-At;return Ee(fe?et-Rt:et+(6-Rt),ze);case ne:case C:return be(it+"Hours",0);case W:return be(it+"Minutes",1);case V:return be(it+"Seconds",2);case M:return be(it+"Milliseconds",3);default:return this.clone()}},te.endOf=function(J){return this.startOf(J,!1)},te.$set=function(J,Q){var ue,fe=he.p(J),ye="set"+(this.$u?"UTC":""),Ee=(ue={},ue[ne]=ye+"Date",ue[C]=ye+"Date",ue[O]=ye+"Month",ue[N]=ye+"FullYear",ue[W]=ye+"Hours",ue[V]=ye+"Minutes",ue[M]=ye+"Seconds",ue[Z]=ye+"Milliseconds",ue)[fe],be=fe===ne?this.$D+(Q-this.$W):Q;if(fe===O||fe===N){var Ue=this.clone().set(C,1);Ue.$d[Ee](be),Ue.init(),this.$d=Ue.set(C,Math.min(this.$D,Ue.daysInMonth())).$d}else Ee&&this.$d[Ee](be);return this.init(),this},te.set=function(J,Q){return this.clone().$set(J,Q)},te.get=function(J){return this[he.p(J)]()},te.add=function(J,Q){var ue,fe=this;J=Number(J);var ye=he.p(Q),Ee=function(ze){var et=ve(fe);return he.w(et.date(et.date()+Math.round(ze*J)),fe)};if(ye===O)return this.set(O,this.$M+J);if(ye===N)return this.set(N,this.$y+J);if(ye===ne)return Ee(1);if(ye===F)return Ee(7);var be=(ue={},ue[V]=6e4,ue[W]=36e5,ue[M]=1e3,ue)[ye]||1,Ue=this.$d.getTime()+J*be;return he.w(Ue,this)},te.subtract=function(J,Q){return this.add(-1*J,Q)},te.format=function(J){var Q=this;if(!this.isValid())return"Invalid Date";var ue=J||"YYYY-MM-DDTHH:mm:ssZ",fe=he.z(this),ye=this.$locale(),Ee=this.$H,be=this.$m,Ue=this.$M,ze=ye.weekdays,et=ye.months,it=function(Lt,cr,Tr,rn){return Lt&&(Lt[cr]||Lt(Q,ue))||Tr[cr].substr(0,rn)},At=function(Lt){return he.s(Ee%12||12,Lt,"0")},Rt=ye.meridiem||function(Lt,cr,Tr){var rn=Lt<12?"AM":"PM";return Tr?rn.toLowerCase():rn},Ft={YY:String(this.$y).slice(-2),YYYY:this.$y,M:Ue+1,MM:he.s(Ue+1,2,"0"),MMM:it(ye.monthsShort,Ue,et,3),MMMM:it(et,Ue),D:this.$D,DD:he.s(this.$D,2,"0"),d:String(this.$W),dd:it(ye.weekdaysMin,this.$W,ze,2),ddd:it(ye.weekdaysShort,this.$W,ze,3),dddd:ze[this.$W],H:String(Ee),HH:he.s(Ee,2,"0"),h:At(1),hh:At(2),a:Rt(Ee,be,!0),A:Rt(Ee,be,!1),m:String(be),mm:he.s(be,2,"0"),s:String(this.$s),ss:he.s(this.$s,2,"0"),SSS:he.s(this.$ms,3,"0"),Z:fe};return ue.replace(q,function(Lt,cr){return cr||Ft[Lt]||fe.replace(":","")})},te.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},te.diff=function(J,Q,ue){var fe,ye=he.p(Q),Ee=ve(J),be=6e4*(Ee.utcOffset()-this.utcOffset()),Ue=this-Ee,ze=he.m(this,Ee);return ze=(fe={},fe[N]=ze/12,fe[O]=ze,fe[x]=ze/3,fe[F]=(Ue-be)/6048e5,fe[ne]=(Ue-be)/864e5,fe[W]=Ue/36e5,fe[V]=Ue/6e4,fe[M]=Ue/1e3,fe)[ye]||Ue,ue?ze:he.a(ze)},te.daysInMonth=function(){return this.endOf(O).$D},te.$locale=function(){return H[this.$L]},te.locale=function(J,Q){if(!J)return this.$L;var ue=this.clone(),fe=X(J,Q,!0);return fe&&(ue.$L=fe),ue},te.clone=function(){return he.w(this.$d,this)},te.toDate=function(){return new Date(this.valueOf())},te.toJSON=function(){return this.isValid()?this.toISOString():null},te.toISOString=function(){return this.$d.toISOString()},te.toString=function(){return this.$d.toUTCString()},ae}(),Y=Ne.prototype;return ve.prototype=Y,[["$ms",Z],["$s",M],["$m",V],["$H",W],["$W",ne],["$M",O],["$y",N],["$D",C]].forEach(function(ae){Y[ae[1]]=function(te){return this.$g(te,ae[0],ae[1])}}),ve.extend=function(ae,te){return ae.$i||(ae(te,Ne,ve),ae.$i=!0),ve},ve.locale=X,ve.isDayjs=se,ve.unix=function(ae){return ve(1e3*ae)},ve.en=H[G],ve.Ls=H,ve.p={},ve})},4110:function(u){(function(Z,M){u.exports=M()})(this,function(){"use strict";return function(Z,M,V){Z=Z||{};var W=M.prototype,ne={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function F(x,N,C,L){return W.fromToBase(x,N,C,L)}V.en.relativeTime=ne,W.fromToBase=function(x,N,C,L,q){for(var B,I,$,G=C.$locale().relativeTime||ne,H=Z.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],se=H.length,X=0;X<se;X+=1){var ve=H[X];ve.d&&(B=L?V(x).diff(C,ve.d,!0):C.diff(x,ve.d,!0));var he=(Z.rounding||Math.round)(Math.abs(B));if($=B>0,he<=ve.r||!ve.r){he<=1&&X>0&&(ve=H[X-1]);var Ne=G[ve.l];q&&(he=q(""+he)),I=typeof Ne=="string"?Ne.replace("%d",he):Ne(he,N,ve.l,$);break}}if(N)return I;var Y=$?G.future:G.past;return typeof Y=="function"?Y(I):Y.replace("%s",I)},W.to=function(x,N){return F(x,N,this,!0)},W.from=function(x,N){return F(x,N,this)};var O=function(x){return x.$u?V.utc():V()};W.toNow=function(x){return this.to(O(this),x)},W.fromNow=function(x){return this.from(O(this),x)}}})},660:function(u){(function(Z,M){u.exports=M()})(this,function(){"use strict";return function(Z,M,V){V.updateLocale=function(W,ne){var F=V.Ls[W];if(F)return(ne?Object.keys(ne):[]).forEach(function(O){F[O]=ne[O]}),F}}})},9435:u=>{var Z=1e3,M=Z*60,V=M*60,W=V*24,ne=W*7,F=W*365.25;u.exports=function(L,q){q=q||{};var B=typeof L;if(B==="string"&&L.length>0)return O(L);if(B==="number"&&isFinite(L))return q.long?N(L):x(L);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(L))};function O(L){if(L=String(L),!(L.length>100)){var q=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(L);if(!!q){var B=parseFloat(q[1]),I=(q[2]||"ms").toLowerCase();switch(I){case"years":case"year":case"yrs":case"yr":case"y":return B*F;case"weeks":case"week":case"w":return B*ne;case"days":case"day":case"d":return B*W;case"hours":case"hour":case"hrs":case"hr":case"h":return B*V;case"minutes":case"minute":case"mins":case"min":case"m":return B*M;case"seconds":case"second":case"secs":case"sec":case"s":return B*Z;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return B;default:return}}}}function x(L){var q=Math.abs(L);return q>=W?Math.round(L/W)+"d":q>=V?Math.round(L/V)+"h":q>=M?Math.round(L/M)+"m":q>=Z?Math.round(L/Z)+"s":L+"ms"}function N(L){var q=Math.abs(L);return q>=W?C(L,q,W,"day"):q>=V?C(L,q,V,"hour"):q>=M?C(L,q,M,"minute"):q>=Z?C(L,q,Z,"second"):L+" ms"}function C(L,q,B,I){var $=q>=B*1.5;return Math.round(L/B)+" "+I+($?"s":"")}},1227:(u,Z,M)=>{Z.formatArgs=W,Z.save=ne,Z.load=F,Z.useColors=V,Z.storage=O(),Z.destroy=(()=>{let N=!1;return()=>{N||(N=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),Z.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function V(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function W(N){if(N[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+N[0]+(this.useColors?"%c ":" ")+"+"+u.exports.humanize(this.diff),!this.useColors)return;const C="color: "+this.color;N.splice(1,0,C,"color: inherit");let L=0,q=0;N[0].replace(/%[a-zA-Z%]/g,B=>{B!=="%%"&&(L++,B==="%c"&&(q=L))}),N.splice(q,0,C)}Z.log=console.debug||console.log||(()=>{});function ne(N){try{N?Z.storage.setItem("debug",N):Z.storage.removeItem("debug")}catch(C){}}function F(){let N;try{N=Z.storage.getItem("debug")}catch(C){}return!N&&typeof process!="undefined"&&"env"in process&&(N=process.env.DEBUG),N}function O(){try{return localStorage}catch(N){}}u.exports=M(2447)(Z);const{formatters:x}=u.exports;x.j=function(N){try{return JSON.stringify(N)}catch(C){return"[UnexpectedJSONParseError]: "+C.message}}},2447:(u,Z,M)=>{function V(W){F.debug=F,F.default=F,F.coerce=q,F.disable=N,F.enable=x,F.enabled=C,F.humanize=M(9435),F.destroy=B,Object.keys(W).forEach(I=>{F[I]=W[I]}),F.names=[],F.skips=[],F.formatters={};function ne(I){let $=0;for(let G=0;G<I.length;G++)$=($<<5)-$+I.charCodeAt(G),$|=0;return F.colors[Math.abs($)%F.colors.length]}F.selectColor=ne;function F(I){let $,G=null;function H(...se){if(!H.enabled)return;const X=H,ve=Number(new Date),he=ve-($||ve);X.diff=he,X.prev=$,X.curr=ve,$=ve,se[0]=F.coerce(se[0]),typeof se[0]!="string"&&se.unshift("%O");let Ne=0;se[0]=se[0].replace(/%([a-zA-Z%])/g,(ae,te)=>{if(ae==="%%")return"%";Ne++;const J=F.formatters[te];if(typeof J=="function"){const Q=se[Ne];ae=J.call(X,Q),se.splice(Ne,1),Ne--}return ae}),F.formatArgs.call(X,se),(X.log||F.log).apply(X,se)}return H.namespace=I,H.useColors=F.useColors(),H.color=F.selectColor(I),H.extend=O,H.destroy=F.destroy,Object.defineProperty(H,"enabled",{enumerable:!0,configurable:!1,get:()=>G===null?F.enabled(I):G,set:se=>{G=se}}),typeof F.init=="function"&&F.init(H),H}function O(I,$){const G=F(this.namespace+(typeof $=="undefined"?":":$)+I);return G.log=this.log,G}function x(I){F.save(I),F.names=[],F.skips=[];let $;const G=(typeof I=="string"?I:"").split(/[\s,]+/),H=G.length;for($=0;$<H;$++)!G[$]||(I=G[$].replace(/\*/g,".*?"),I[0]==="-"?F.skips.push(new RegExp("^"+I.substr(1)+"$")):F.names.push(new RegExp("^"+I+"$")))}function N(){const I=[...F.names.map(L),...F.skips.map(L).map($=>"-"+$)].join(",");return F.enable(""),I}function C(I){if(I[I.length-1]==="*")return!0;let $,G;for($=0,G=F.skips.length;$<G;$++)if(F.skips[$].test(I))return!1;for($=0,G=F.names.length;$<G;$++)if(F.names[$].test(I))return!0;return!1}function L(I){return I.toString().substring(2,I.toString().length-2).replace(/\.\*\?$/,"*")}function q(I){return I instanceof Error?I.stack||I.message:I}function B(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return F.enable(F.load()),F}u.exports=V},5158:(u,Z,M)=>{typeof process=="undefined"||process.type==="renderer"||process.browser===!0||process.__nwjs?u.exports=M(1227):u.exports=M(39)},39:(u,Z,M)=>{const V=M(3867),W=M(1669);Z.init=L,Z.log=x,Z.formatArgs=F,Z.save=N,Z.load=C,Z.useColors=ne,Z.destroy=W.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),Z.colors=[6,2,3,4,5,1];try{const B=M(2130);B&&(B.stderr||B).level>=2&&(Z.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(B){}Z.inspectOpts=Object.keys(process.env).filter(B=>/^debug_/i.test(B)).reduce((B,I)=>{const $=I.substring(6).toLowerCase().replace(/_([a-z])/g,(H,se)=>se.toUpperCase());let G=process.env[I];return/^(yes|on|true|enabled)$/i.test(G)?G=!0:/^(no|off|false|disabled)$/i.test(G)?G=!1:G==="null"?G=null:G=Number(G),B[$]=G,B},{});function ne(){return"colors"in Z.inspectOpts?Boolean(Z.inspectOpts.colors):V.isatty(process.stderr.fd)}function F(B){const{namespace:I,useColors:$}=this;if($){const G=this.color,H="[3"+(G<8?G:"8;5;"+G),se=`  ${H};1m${I} [0m`;B[0]=se+B[0].split(`
`).join(`
`+se),B.push(H+"m+"+u.exports.humanize(this.diff)+"[0m")}else B[0]=O()+I+" "+B[0]}function O(){return Z.inspectOpts.hideDate?"":new Date().toISOString()+" "}function x(...B){return process.stderr.write(W.format(...B)+`
`)}function N(B){B?process.env.DEBUG=B:delete process.env.DEBUG}function C(){return process.env.DEBUG}function L(B){B.inspectOpts={};const I=Object.keys(Z.inspectOpts);for(let $=0;$<I.length;$++)B.inspectOpts[I[$]]=Z.inspectOpts[I[$]]}u.exports=M(2447)(Z);const{formatters:q}=u.exports;q.o=function(B){return this.inspectOpts.colors=this.useColors,W.inspect(B,this.inspectOpts).split(`
`).map(I=>I.trim()).join(" ")},q.O=function(B){return this.inspectOpts.colors=this.useColors,W.inspect(B,this.inspectOpts)}},4063:u=>{"use strict";u.exports=function Z(M,V){if(M===V)return!0;if(M&&V&&typeof M=="object"&&typeof V=="object"){if(M.constructor!==V.constructor)return!1;var W,ne,F;if(Array.isArray(M)){if(W=M.length,W!=V.length)return!1;for(ne=W;ne--!=0;)if(!Z(M[ne],V[ne]))return!1;return!0}if(M.constructor===RegExp)return M.source===V.source&&M.flags===V.flags;if(M.valueOf!==Object.prototype.valueOf)return M.valueOf()===V.valueOf();if(M.toString!==Object.prototype.toString)return M.toString()===V.toString();if(F=Object.keys(M),W=F.length,W!==Object.keys(V).length)return!1;for(ne=W;ne--!=0;)if(!Object.prototype.hasOwnProperty.call(V,F[ne]))return!1;for(ne=W;ne--!=0;){var O=F[ne];if(!Z(M[O],V[O]))return!1}return!0}return M!==M&&V!==V}},5035:u=>{"use strict";u.exports=function(Z,M){M||(M={}),typeof M=="function"&&(M={cmp:M});var V=typeof M.cycles=="boolean"?M.cycles:!1,W=M.cmp&&function(F){return function(O){return function(x,N){var C={key:x,value:O[x]},L={key:N,value:O[N]};return F(C,L)}}}(M.cmp),ne=[];return function F(O){if(O&&O.toJSON&&typeof O.toJSON=="function"&&(O=O.toJSON()),O!==void 0){if(typeof O=="number")return isFinite(O)?""+O:"null";if(typeof O!="object")return JSON.stringify(O);var x,N;if(Array.isArray(O)){for(N="[",x=0;x<O.length;x++)x&&(N+=","),N+=F(O[x])||"null";return N+"]"}if(O===null)return"null";if(ne.indexOf(O)!==-1){if(V)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var C=ne.push(O)-1,L=Object.keys(O).sort(W&&W(O));for(N="",x=0;x<L.length;x++){var q=L[x],B=F(O[q]);!B||(N&&(N+=","),N+=JSON.stringify(q)+":"+B)}return ne.splice(C,1),"{"+N+"}"}}(Z)}},6030:(u,Z,M)=>{const{Readable:V}=M(2413),W=new WeakMap;async function*ne(O){for(const x of O)"stream"in x?yield*x.stream():yield x}class F{constructor(x=[],N={type:""}){let C=0;const L=x.map(B=>{let I;return B instanceof Buffer?I=B:ArrayBuffer.isView(B)?I=Buffer.from(B.buffer,B.byteOffset,B.byteLength):B instanceof ArrayBuffer?I=Buffer.from(B):B instanceof F?I=B:I=Buffer.from(typeof B=="string"?B:String(B)),C+=I.length||I.size||0,I}),q=N.type===void 0?"":String(N.type).toLowerCase();W.set(this,{type:/[^\u0020-\u007E]/.test(q)?"":q,size:C,parts:L})}get size(){return W.get(this).size}get type(){return W.get(this).type}async text(){return Buffer.from(await this.arrayBuffer()).toString()}async arrayBuffer(){const x=new Uint8Array(this.size);let N=0;for await(const C of this.stream())x.set(C,N),N+=C.length;return x.buffer}stream(){return V.from(ne(W.get(this).parts))}slice(x=0,N=this.size,C=""){const{size:L}=this;let q=x<0?Math.max(L+x,0):Math.min(x,L),B=N<0?Math.max(L+N,0):Math.min(N,L);const I=Math.max(B-q,0),$=W.get(this).parts.values(),G=[];let H=0;for(const X of $){const ve=ArrayBuffer.isView(X)?X.byteLength:X.size;if(q&&ve<=q)q-=ve,B-=ve;else{const he=X.slice(q,Math.min(ve,B));if(G.push(he),H+=ArrayBuffer.isView(he)?he.byteLength:he.size,q=0,H>=I)break}}const se=new F([],{type:C});return Object.assign(W.get(se),{size:I,parts:G}),se}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](x){return typeof x=="object"&&typeof x.stream=="function"&&x.stream.length===0&&typeof x.constructor=="function"&&/^(Blob|File)$/.test(x[Symbol.toStringTag])}}Object.defineProperties(F.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),u.exports=F},2261:(u,Z,M)=>{var V;u.exports=function(){if(!V){try{V=M(5158)("follow-redirects")}catch(W){}typeof V!="function"&&(V=function(){})}V.apply(null,arguments)}},938:(u,Z,M)=>{var V=M(8835),W=V.URL,ne=M(8605),F=M(7211),O=M(2413).Writable,x=M(2357),N=M(2261),C=["abort","aborted","connect","error","socket","timeout"],L=Object.create(null);C.forEach(function(Y){L[Y]=function(ae,te,J){this._redirectable.emit(Y,ae,te,J)}});var q=he("ERR_FR_REDIRECTION_FAILURE",""),B=he("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),I=he("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),$=he("ERR_STREAM_WRITE_AFTER_END","write after end");function G(Y,ae){O.call(this),this._sanitizeOptions(Y),this._options=Y,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],ae&&this.on("response",ae);var te=this;this._onNativeResponse=function(J){te._processResponse(J)},this._performRequest()}G.prototype=Object.create(O.prototype),G.prototype.abort=function(){Ne(this._currentRequest),this.emit("abort")},G.prototype.write=function(Y,ae,te){if(this._ending)throw new $;if(!(typeof Y=="string"||typeof Y=="object"&&"length"in Y))throw new TypeError("data should be a string, Buffer or Uint8Array");if(typeof ae=="function"&&(te=ae,ae=null),Y.length===0){te&&te();return}this._requestBodyLength+Y.length<=this._options.maxBodyLength?(this._requestBodyLength+=Y.length,this._requestBodyBuffers.push({data:Y,encoding:ae}),this._currentRequest.write(Y,ae,te)):(this.emit("error",new I),this.abort())},G.prototype.end=function(Y,ae,te){if(typeof Y=="function"?(te=Y,Y=ae=null):typeof ae=="function"&&(te=ae,ae=null),!Y)this._ended=this._ending=!0,this._currentRequest.end(null,null,te);else{var J=this,Q=this._currentRequest;this.write(Y,ae,function(){J._ended=!0,Q.end(null,null,te)}),this._ending=!0}},G.prototype.setHeader=function(Y,ae){this._options.headers[Y]=ae,this._currentRequest.setHeader(Y,ae)},G.prototype.removeHeader=function(Y){delete this._options.headers[Y],this._currentRequest.removeHeader(Y)},G.prototype.setTimeout=function(Y,ae){var te=this;function J(fe){fe.setTimeout(Y),fe.removeListener("timeout",fe.destroy),fe.addListener("timeout",fe.destroy)}function Q(fe){te._timeout&&clearTimeout(te._timeout),te._timeout=setTimeout(function(){te.emit("timeout"),ue()},Y),J(fe)}function ue(){te._timeout&&(clearTimeout(te._timeout),te._timeout=null),ae&&te.removeListener("timeout",ae),te.socket||te._currentRequest.removeListener("socket",Q)}return ae&&this.on("timeout",ae),this.socket?Q(this.socket):this._currentRequest.once("socket",Q),this.on("socket",J),this.once("response",ue),this.once("error",ue),this},["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(Y){G.prototype[Y]=function(ae,te){return this._currentRequest[Y](ae,te)}}),["aborted","connection","socket"].forEach(function(Y){Object.defineProperty(G.prototype,Y,{get:function(){return this._currentRequest[Y]}})}),G.prototype._sanitizeOptions=function(Y){if(Y.headers||(Y.headers={}),Y.host&&(Y.hostname||(Y.hostname=Y.host),delete Y.host),!Y.pathname&&Y.path){var ae=Y.path.indexOf("?");ae<0?Y.pathname=Y.path:(Y.pathname=Y.path.substring(0,ae),Y.search=Y.path.substring(ae))}},G.prototype._performRequest=function(){var Y=this._options.protocol,ae=this._options.nativeProtocols[Y];if(!ae){this.emit("error",new TypeError("Unsupported protocol "+Y));return}if(this._options.agents){var te=Y.substr(0,Y.length-1);this._options.agent=this._options.agents[te]}var J=this._currentRequest=ae.request(this._options,this._onNativeResponse);this._currentUrl=V.format(this._options),J._redirectable=this;for(var Q=0;Q<C.length;Q++)J.on(C[Q],L[C[Q]]);if(this._isRedirect){var ue=0,fe=this,ye=this._requestBodyBuffers;(function Ee(be){if(J===fe._currentRequest)if(be)fe.emit("error",be);else if(ue<ye.length){var Ue=ye[ue++];J.finished||J.write(Ue.data,Ue.encoding,Ee)}else fe._ended&&J.end()})()}},G.prototype._processResponse=function(Y){var ae=Y.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:Y.headers,statusCode:ae});var te=Y.headers.location;if(te&&this._options.followRedirects!==!1&&ae>=300&&ae<400){if(Ne(this._currentRequest),Y.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new B);return}((ae===301||ae===302)&&this._options.method==="POST"||ae===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],ve(/^content-/i,this._options.headers));var J=ve(/^host$/i,this._options.headers)||V.parse(this._currentUrl).hostname,Q=V.resolve(this._currentUrl,te);N("redirecting to",Q),this._isRedirect=!0;var ue=V.parse(Q);if(Object.assign(this._options,ue),ue.hostname!==J&&ve(/^authorization$/i,this._options.headers),typeof this._options.beforeRedirect=="function"){var fe={headers:Y.headers};try{this._options.beforeRedirect.call(null,this._options,fe)}catch(Ee){this.emit("error",Ee);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(Ee){var ye=new q("Redirected request failed: "+Ee.message);ye.cause=Ee,this.emit("error",ye)}}else Y.responseUrl=this._currentUrl,Y.redirects=this._redirects,this.emit("response",Y),this._requestBodyBuffers=[]};function H(Y){var ae={maxRedirects:21,maxBodyLength:10*1024*1024},te={};return Object.keys(Y).forEach(function(J){var Q=J+":",ue=te[Q]=Y[J],fe=ae[J]=Object.create(ue);function ye(be,Ue,ze){if(typeof be=="string"){var et=be;try{be=X(new W(et))}catch(it){be=V.parse(et)}}else W&&be instanceof W?be=X(be):(ze=Ue,Ue=be,be={protocol:Q});return typeof Ue=="function"&&(ze=Ue,Ue=null),Ue=Object.assign({maxRedirects:ae.maxRedirects,maxBodyLength:ae.maxBodyLength},be,Ue),Ue.nativeProtocols=te,x.equal(Ue.protocol,Q,"protocol mismatch"),N("options",Ue),new G(Ue,ze)}function Ee(be,Ue,ze){var et=fe.request(be,Ue,ze);return et.end(),et}Object.defineProperties(fe,{request:{value:ye,configurable:!0,enumerable:!0,writable:!0},get:{value:Ee,configurable:!0,enumerable:!0,writable:!0}})}),ae}function se(){}function X(Y){var ae={protocol:Y.protocol,hostname:Y.hostname.startsWith("[")?Y.hostname.slice(1,-1):Y.hostname,hash:Y.hash,search:Y.search,pathname:Y.pathname,path:Y.pathname+Y.search,href:Y.href};return Y.port!==""&&(ae.port=Number(Y.port)),ae}function ve(Y,ae){var te;for(var J in ae)Y.test(J)&&(te=ae[J],delete ae[J]);return te}function he(Y,ae){function te(J){Error.captureStackTrace(this,this.constructor),this.message=J||ae}return te.prototype=new Error,te.prototype.constructor=te,te.prototype.name="Error ["+Y+"]",te.prototype.code=Y,te}function Ne(Y){for(var ae=0;ae<C.length;ae++)Y.removeListener(C[ae],L[C[ae]]);Y.on("error",se),Y.abort()}u.exports=H({http:ne,https:F}),u.exports.wrap=H},9967:u=>{var Z={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"Merged"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MergedEvent"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"actor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mergeRef"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"commitUrl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"HeadRefDeleted"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"HeadRefDeletedEvent"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"actor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"headRefName"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Ref"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Ref"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"target"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Comment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"IssueComment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"authorAssociation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanUpdate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanReact"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanDelete"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Commit"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequestCommit"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"committer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"authoredDate"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"AssignedEvent"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AssignedEvent"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"actor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Review"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequestReview"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"authorAssociation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"submittedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Reactable"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Reactable"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reactionGroups"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerHasReacted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"users"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ReviewThread"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequestReviewThread"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isResolved"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanResolve"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanUnresolve"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"diffSide"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"line"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"originalLine"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isOutdated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"TimelineEvents"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"last"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"150"},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"timelineItems"},arguments:[{kind:"Argument",name:{kind:"Name",value:"last"},value:{kind:"Variable",name:{kind:"Name",value:"last"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Merged"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Comment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Review"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Commit"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"AssignedEvent"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"HeadRefDeleted"},directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"IssueTimelineEvents"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"last"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"150"},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"pullRequest"},name:{kind:"Name",value:"issue"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"timelineItems"},arguments:[{kind:"Argument",name:{kind:"Name",value:"last"},value:{kind:"Variable",name:{kind:"Name",value:"last"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Comment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"AssignedEvent"},directives:[]}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ReviewComment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequestReviewComment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"originalPosition"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"diffHunk"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"position"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pullRequestReview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"replyTo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"originalCommit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"reactionGroups"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerHasReacted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"users"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"viewerCanUpdate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanDelete"},arguments:[],directives:[]}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetPendingReviewId"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pullRequestId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"author"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"pullRequestId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequest"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reviews"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}},{kind:"Argument",name:{kind:"Name",value:"author"},value:{kind:"Variable",name:{kind:"Name",value:"author"}}},{kind:"Argument",name:{kind:"Name",value:"states"},value:{kind:"ListValue",values:[{kind:"EnumValue",value:"PENDING"}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequestComments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"100"},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reviewThreads"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isResolved"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanResolve"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanUnresolve"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"diffSide"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"line"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"originalLine"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isOutdated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequest"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"headRef"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Ref"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"headRefName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"headRefOid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"headRepository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"baseRef"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Ref"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"baseRefName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"baseRefOid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"baseRepository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"merged"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mergeable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isDraft"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"milestone"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"assignees"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"suggestedReviewers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isAuthor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isCommenter"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reviewer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequestFiles"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"after"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"files"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"after"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerViewedState"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Issue"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"pullRequest"},name:{kind:"Name",value:"issue"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"IssueWithComments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"pullRequest"},name:{kind:"Name",value:"issue"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"IntValue",value:"50"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"bio"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"company"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"location"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contributionsCollection"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commitContributionsByRepository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"maxRepositories"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"contributions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"occurredAt"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nameWithOwner"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequestMergeability"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mergeable"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequestState"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddPullRequestReviewCommentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addPullRequestReviewComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"comment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddReviewThread"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddPullRequestReviewThreadInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addPullRequestReviewThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"thread"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewThread"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"EditComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdatePullRequestReviewCommentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updatePullRequestReviewComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequestReviewComment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ReadyForReview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"MarkPullRequestReadyForReviewInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"markPullRequestReadyForReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isDraft"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"StartReview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddPullRequestReviewInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addPullRequestReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequestReview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SubmitReview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"event"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"PullRequestReviewEvent"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"body"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"submitPullRequestReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"event"},value:{kind:"Variable",name:{kind:"Name",value:"event"}}},{kind:"ObjectField",name:{kind:"Name",value:"pullRequestReviewId"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"ObjectField",name:{kind:"Name",value:"body"},value:{kind:"Variable",name:{kind:"Name",value:"body"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequestReview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"Review"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteReview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DeletePullRequestReviewInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deletePullRequestReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequestReview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddReaction"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddReactionInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addReaction"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reaction"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subject"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Reactable"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteReaction"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"RemoveReactionInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"removeReaction"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reaction"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subject"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Reactable"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdatePullRequest"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdatePullRequestInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updatePullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddIssueComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddCommentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commentEdge"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Comment"},directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"EditIssueComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateIssueCommentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateIssueComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issueComment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Comment"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetMentionableUsers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"after"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mentionableUsers"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"after"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetAssignableUsers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"after"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"assignableUsers"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"after"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"IssuesWithoutMilestone"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"assignee"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issues"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}},{kind:"Argument",name:{kind:"Name",value:"states"},value:{kind:"EnumValue",value:"OPEN"}},{kind:"Argument",name:{kind:"Name",value:"filterBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"assignee"},value:{kind:"Variable",name:{kind:"Name",value:"assignee"}}},{kind:"ObjectField",name:{kind:"Name",value:"milestone"},value:{kind:"NullValue"}}]}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"direction"},value:{kind:"EnumValue",value:"DESC"}},{kind:"ObjectField",name:{kind:"Name",value:"field"},value:{kind:"EnumValue",value:"UPDATED_AT"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Issue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignees"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"IntValue",value:"50"}}],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"milestone"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"MaxIssue"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issues"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"direction"},value:{kind:"EnumValue",value:"DESC"}},{kind:"ObjectField",name:{kind:"Name",value:"field"},value:{kind:"EnumValue",value:"CREATED_AT"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Issue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetMilestones"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"assignee"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"milestones"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"12"}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"direction"},value:{kind:"EnumValue",value:"DESC"}},{kind:"ObjectField",name:{kind:"Name",value:"field"},value:{kind:"EnumValue",value:"DUE_DATE"}}]}},{kind:"Argument",name:{kind:"Name",value:"states"},value:{kind:"EnumValue",value:"OPEN"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"issues"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}},{kind:"Argument",name:{kind:"Name",value:"filterBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"assignee"},value:{kind:"Variable",name:{kind:"Name",value:"assignee"}}}]}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"direction"},value:{kind:"EnumValue",value:"DESC"}},{kind:"ObjectField",name:{kind:"Name",value:"field"},value:{kind:"EnumValue",value:"UPDATED_AT"}}]}},{kind:"Argument",name:{kind:"Name",value:"states"},value:{kind:"EnumValue",value:"OPEN"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Issue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignees"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"IntValue",value:"50"}}],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"milestone"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Issues"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"search"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}},{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"ISSUE"}},{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"query"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issueCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Issue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignees"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"IntValue",value:"50"}}],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"milestone"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetViewerPermission"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewerPermission"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetRepositoryForkDetails"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isFork"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"parent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetChecks"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commits"},arguments:[{kind:"Argument",name:{kind:"Name",value:"last"},value:{kind:"IntValue",value:"1"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"statusCheckRollup"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contexts"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"StatusContext"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"targetUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"context"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CheckRun"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"conclusion"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"detailsUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resourcePath"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"checkSuite"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"app"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"logoUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ResolveReviewThread"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ResolveReviewThreadInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"resolveReviewThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"thread"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewThread"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UnresolveReviewThread"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnresolveReviewThreadInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unresolveReviewThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"thread"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewThread"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"MarkFileAsViewed"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"MarkFileAsViewedInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"markFileAsViewed"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UnmarkFileAsViewed"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnmarkFileAsViewedInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unmarkFileAsViewed"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:14578}};Z.loc.source={body:`# /*---------------------------------------------------------------------------------------------
#  *  Copyright (c) Microsoft Corporation. All rights reserved.
#  *  Licensed under the MIT License. See License.txt in the project root for license information.
#  *--------------------------------------------------------------------------------------------*/

fragment Merged on MergedEvent {
	id
	actor {
		login
		avatarUrl
		url
	}
	createdAt
	mergeRef {
		name
	}
	commit {
		oid
		commitUrl
	}
	url
}

fragment HeadRefDeleted on HeadRefDeletedEvent {
	id
	actor {
		login
		avatarUrl
		url
	}
	createdAt
	headRefName
}

fragment Ref on Ref {
	name
	repository {
		owner {
			login
		}
		url
	}
	target {
		oid
	}
}

fragment Comment on IssueComment {
	id
	databaseId
	authorAssociation
	author {
		login
		avatarUrl
		url
		... on User {
			email
		}
		... on Organization {
			email
		}
	}
	url
	body
	bodyHTML
	updatedAt
	createdAt
	viewerCanUpdate
	viewerCanReact
	viewerCanDelete
}

fragment Commit on PullRequestCommit {
	id
	commit {
		author {
			user {
				login
				avatarUrl
				url
				email
			}
		}
		committer {
			avatarUrl
			name
		}
		oid
		message
		authoredDate
	}
	url
}

fragment AssignedEvent on AssignedEvent {
	actor {
		login
		avatarUrl
		url
	}
	user {
		login
		avatarUrl
		url
	}
}

fragment Review on PullRequestReview {
	id
	databaseId
	authorAssociation
	url
	author {
		login
		avatarUrl
		url
		... on User {
			email
		}
		... on Organization {
			email
		}
	}
	state
	body
	bodyHTML
	submittedAt
	updatedAt
	createdAt
}

fragment Reactable on Reactable {
	reactionGroups {
		content
		viewerHasReacted
		users {
			totalCount
		}
	}
}

fragment ReviewThread on PullRequestReviewThread {
	id
	isResolved
	viewerCanResolve
	viewerCanUnresolve
	path
	diffSide
	line
	originalLine
	isOutdated
	comments(first: 100) {
		nodes {
			...ReviewComment
		}
	}
}

query TimelineEvents($owner: String!, $name: String!, $number: Int!, $last: Int = 150) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			timelineItems(last: $last) {
				nodes {
					__typename
					...Merged
					...Comment
					...Review
					...Commit
					...AssignedEvent
					...HeadRefDeleted
				}
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query IssueTimelineEvents($owner: String!, $name: String!, $number: Int!, $last: Int = 150) {
	repository(owner: $owner, name: $name) {
		pullRequest: issue(number: $number) {
			timelineItems(last: $last) {
				nodes {
					__typename
					...Comment
					...AssignedEvent
				}
			}
		}
	}
}

fragment ReviewComment on PullRequestReviewComment {
	id
	databaseId
	url
	author {
		login
		avatarUrl
		url
		... on User {
			email
		}
		... on Organization {
			email
		}
	}
	path
	originalPosition
	body
	bodyHTML
	diffHunk
	position
	state
	pullRequestReview {
		databaseId
	}
	commit {
		oid
	}
	replyTo {
		databaseId
	}
	createdAt
	originalCommit {
		oid
	}
	reactionGroups {
		content
		viewerHasReacted
		users {
			totalCount
		}
	}
	viewerCanUpdate
	viewerCanDelete
}

query GetPendingReviewId($pullRequestId: ID!, $author: String!) {
	node(id: $pullRequestId) {
		... on PullRequest {
			reviews(first: 1, author: $author, states: [PENDING]) {
				nodes {
					id
				}
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query PullRequestComments($owner: String!, $name: String!, $number: Int!, $first: Int = 100) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			reviewThreads(first: $first) {
				nodes {
					id
					isResolved
					viewerCanResolve
					viewerCanUnresolve
					path
					diffSide
					line
					originalLine
					isOutdated
					comments(first: 100) {
						nodes {
							...ReviewComment
						}
					}
				}
			}
		}
	}
}

query PullRequest($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			number
			url
			state
			body
			bodyHTML
			title
			author {
				login
				url
				avatarUrl
				... on User {
					email
				}
				... on Organization {
					email
				}
			}
			createdAt
			updatedAt
			headRef {
				...Ref
			}
			headRefName
			headRefOid
			headRepository {
				owner {
					login
				}
				url
			}
			baseRef {
				...Ref
			}
			baseRefName
			baseRefOid
			baseRepository {
				owner {
					login
				}
				url
			}
			labels(first: 50) {
				nodes {
					name
				}
			}
			merged
			mergeable
			id
			databaseId
			isDraft
			milestone {
				title
				dueOn
				createdAt
				id
			}
			assignees(first: 10) {
				nodes {
					login
					name
					avatarUrl
					url
					email
				}
			}
			suggestedReviewers {
				isAuthor
				isCommenter
				reviewer {
					login
					avatarUrl
					name
					url
				}
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query PullRequestFiles($owner: String!, $name: String!, $number: Int!, $after: String) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			files(first: 100, after: $after) {
				nodes {
					path
					viewerViewedState
				}
				pageInfo {
					hasNextPage
					endCursor
				}
			}
		}
	}
}

query Issue($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest: issue(number: $number) {
			number
			url
			state
			body
			bodyHTML
			title
			author {
				login
				url
				avatarUrl
				... on User {
					email
				}
				... on Organization {
					email
				}
			}
			createdAt
			updatedAt
			labels(first: 50) {
				nodes {
					name
					color
				}
			}
			id
			databaseId
		}
	}
}

query IssueWithComments($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest: issue(number: $number) {
			number
			url
			state
			body
			bodyHTML
			title
			author {
				login
				url
				avatarUrl
				... on User {
					email
				}
				... on Organization {
					email
				}
			}
			createdAt
			updatedAt
			labels(first: 50) {
				nodes {
					name
					color
				}
			}
			id
			databaseId
			comments(first: 50) {
				nodes {
					author {
						login
						url
						avatarUrl
						... on User {
							email
						}
						... on Organization {
							email
						}
					}
					body
					databaseId
				}
			}
		}
	}
}

query GetUser($login: String!) {
	user(login: $login) {
		login
		avatarUrl(size: 50)
		bio
		name
		company
		location
		contributionsCollection {
			commitContributionsByRepository(maxRepositories: 50) {
				contributions(first: 1) {
					nodes {
						occurredAt
					}
				}
				repository {
					nameWithOwner
				}
			}
		}
		url
	}
}

query PullRequestMergeability($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			mergeable
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query PullRequestState($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			title
			number
			state
		}
	}
}

mutation AddComment($input: AddPullRequestReviewCommentInput!) {
	addPullRequestReviewComment(input: $input) {
		comment {
			...ReviewComment
		}
	}
}

mutation AddReviewThread($input: AddPullRequestReviewThreadInput!) {
	addPullRequestReviewThread(input: $input) {
		thread {
			...ReviewThread
		}
	}
}

mutation EditComment($input: UpdatePullRequestReviewCommentInput!) {
	updatePullRequestReviewComment(input: $input) {
		pullRequestReviewComment {
			...ReviewComment
		}
	}
}

mutation ReadyForReview($input: MarkPullRequestReadyForReviewInput!) {
	markPullRequestReadyForReview(input: $input) {
		pullRequest {
			isDraft
		}
	}
}

mutation StartReview($input: AddPullRequestReviewInput!) {
	addPullRequestReview(input: $input) {
		pullRequestReview {
			id
		}
	}
}

mutation SubmitReview($id: ID!, $event: PullRequestReviewEvent!, $body: String) {
	submitPullRequestReview(input: { event: $event, pullRequestReviewId: $id, body: $body }) {
		pullRequestReview {
			comments(first: 100) {
				nodes {
					...ReviewComment
				}
			}
			...Review
		}
	}
}

mutation DeleteReview($input: DeletePullRequestReviewInput!) {
	deletePullRequestReview(input: $input) {
		pullRequestReview {
			databaseId
			comments(first: 100) {
				nodes {
					...ReviewComment
				}
			}
		}
	}
}

mutation AddReaction($input: AddReactionInput!) {
	addReaction(input: $input) {
		reaction {
			content
		}
		subject {
			...Reactable
		}
	}
}

mutation DeleteReaction($input: RemoveReactionInput!) {
	removeReaction(input: $input) {
		reaction {
			content
		}
		subject {
			...Reactable
		}
	}
}

mutation UpdatePullRequest($input: UpdatePullRequestInput!) {
	updatePullRequest(input: $input) {
		pullRequest {
			body
			bodyHTML
			title
		}
	}
}

mutation AddIssueComment($input: AddCommentInput!) {
	addComment(input: $input) {
		commentEdge {
			node {
				...Comment
			}
		}
	}
}

mutation EditIssueComment($input: UpdateIssueCommentInput!) {
	updateIssueComment(input: $input) {
		issueComment {
			...Comment
		}
	}
}

query GetMentionableUsers($owner: String!, $name: String!, $first: Int!, $after: String) {
	repository(owner: $owner, name: $name) {
		mentionableUsers(first: $first, after: $after) {
			nodes {
				login
				avatarUrl
				name
				url
				email
			}
			pageInfo {
				hasNextPage
				endCursor
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query GetAssignableUsers($owner: String!, $name: String!, $first: Int!, $after: String) {
	repository(owner: $owner, name: $name) {
		assignableUsers(first: $first, after: $after) {
			nodes {
				login
				avatarUrl
				name
				url
				email
			}
			pageInfo {
				hasNextPage
				endCursor
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query IssuesWithoutMilestone($owner: String!, $name: String!, $assignee: String!) {
	repository(owner: $owner, name: $name) {
		issues(
			first: 100
			states: OPEN
			filterBy: { assignee: $assignee, milestone: null }
			orderBy: { direction: DESC, field: UPDATED_AT }
		) {
			edges {
				node {
					... on Issue {
						number
						url
						state
						body
						bodyHTML
						title
						assignees(first: 10) {
							nodes {
								login
								url
								email
							}
						}
						author {
							login
							url
							avatarUrl(size: 50)
							... on User {
								email
							}
							... on Organization {
								email
							}
						}
						createdAt
						updatedAt
						labels(first: 50) {
							nodes {
								name
								color
							}
						}
						id
						databaseId
						milestone {
							title
							dueOn
						}
					}
				}
			}
			pageInfo {
				hasNextPage
				endCursor
			}
		}
	}
}

query MaxIssue($owner: String!, $name: String!) {
	repository(owner: $owner, name: $name) {
		issues(first: 1, orderBy: { direction: DESC, field: CREATED_AT }) {
			edges {
				node {
					... on Issue {
						number
					}
				}
			}
		}
	}
}

query GetMilestones($owner: String!, $name: String!, $assignee: String!) {
	repository(owner: $owner, name: $name) {
		milestones(first: 12, orderBy: { direction: DESC, field: DUE_DATE }, states: OPEN) {
			nodes {
				dueOn
				title
				createdAt
				id
				issues(
					first: 100
					filterBy: { assignee: $assignee }
					orderBy: { direction: DESC, field: UPDATED_AT }
					states: OPEN
				) {
					edges {
						node {
							... on Issue {
								number
								url
								state
								body
								bodyHTML
								title
								assignees(first: 10) {
									nodes {
										avatarUrl
										email
										login
										url
									}
								}
								author {
									login
									url
									avatarUrl(size: 50)
									... on User {
										email
									}
									... on Organization {
										email
									}
								}
								createdAt
								updatedAt
								labels(first: 50) {
									nodes {
										name
										color
									}
								}
								id
								databaseId
								milestone {
									title
									dueOn
								}
							}
						}
					}
				}
			}
			pageInfo {
				hasNextPage
				endCursor
			}
		}
	}
}

query Issues($query: String!) {
	search(first: 100, type: ISSUE, query: $query) {
		issueCount
		pageInfo {
			hasNextPage
			endCursor
		}
		edges {
			node {
				... on Issue {
					number
					url
					state
					body
					bodyHTML
					title
					assignees(first: 10) {
						nodes {
							avatarUrl
							email
							login
							url
						}
					}
					author {
						login
						url
						avatarUrl(size: 50)
						... on User {
							email
						}
						... on Organization {
							email
						}
					}
					createdAt
					updatedAt
					labels(first: 50) {
						nodes {
							name
							color
						}
					}
					id
					databaseId
					milestone {
						title
						dueOn
						id
						createdAt
					}
					repository {
						name
						owner {
							login
						}
						url
					}
				}
			}
		}
	}
}

query GetViewerPermission($owner: String!, $name: String!) {
	repository(owner: $owner, name: $name) {
		viewerPermission
	}
}

query GetRepositoryForkDetails($owner: String!, $name: String!) {
	repository(owner: $owner, name: $name) {
		isFork
		parent {
			name
			owner {
				login
			}
		}
	}
}

query GetChecks($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			commits(last: 1) {
				nodes {
					commit {
						statusCheckRollup {
							state
							contexts(first: 100) {
								nodes {
									... on StatusContext {
										id
										state
										targetUrl
										description
										context
										avatarUrl
									}
									... on CheckRun {
										id
										conclusion
										title
										detailsUrl
										name
										resourcePath
										checkSuite {
											app {
												logoUrl
												url
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}

mutation ResolveReviewThread($input: ResolveReviewThreadInput!) {
	resolveReviewThread(input: $input) {
		thread {
			...ReviewThread
		}
	}
}

mutation UnresolveReviewThread($input: UnresolveReviewThreadInput!) {
	unresolveReviewThread(input: $input) {
		thread {
			...ReviewThread
		}
	}
}

mutation MarkFileAsViewed($input: MarkFileAsViewedInput!) {
	markFileAsViewed(input: $input) {
		pullRequest {
			id
		}
	}
}

mutation UnmarkFileAsViewed($input: UnmarkFileAsViewedInput!) {
	unmarkFileAsViewed(input: $input) {
		pullRequest {
			id
		}
	}
}`,name:"GraphQL request",locationOffset:{line:1,column:1}};var M={};function V(x){return x.filter(function(N){if(N.kind!=="FragmentDefinition")return!0;var C=N.name.value;return M[C]?!1:(M[C]=!0,!0)})}function W(x,N){if(x.kind==="FragmentSpread")N.add(x.name.value);else if(x.kind==="VariableDefinition"){var C=x.type;C.kind==="NamedType"&&N.add(C.name.value)}x.selectionSet&&x.selectionSet.selections.forEach(function(L){W(L,N)}),x.variableDefinitions&&x.variableDefinitions.forEach(function(L){W(L,N)}),x.definitions&&x.definitions.forEach(function(L){W(L,N)})}var ne={};(function(){Z.definitions.forEach(function(N){if(N.name){var C=new Set;W(N,C),ne[N.name.value]=C}})})();function F(x,N){for(var C=0;C<x.definitions.length;C++){var L=x.definitions[C];if(L.name&&L.name.value==N)return L}}function O(x,N){var C={kind:x.kind,definitions:[F(x,N)]};x.hasOwnProperty("loc")&&(C.loc=x.loc);var L=ne[N]||new Set,q=new Set,B=new Set;for(L.forEach(function($){B.add($)});B.size>0;){var I=B;B=new Set,I.forEach(function($){if(!q.has($)){q.add($);var G=ne[$]||new Set;G.forEach(function(H){B.add(H)})}})}return q.forEach(function($){var G=F(x,$);G&&C.definitions.push(G)}),C}u.exports=Z,u.exports.TimelineEvents=O(Z,"TimelineEvents"),u.exports.IssueTimelineEvents=O(Z,"IssueTimelineEvents"),u.exports.GetPendingReviewId=O(Z,"GetPendingReviewId"),u.exports.PullRequestComments=O(Z,"PullRequestComments"),u.exports.PullRequest=O(Z,"PullRequest"),u.exports.PullRequestFiles=O(Z,"PullRequestFiles"),u.exports.Issue=O(Z,"Issue"),u.exports.IssueWithComments=O(Z,"IssueWithComments"),u.exports.GetUser=O(Z,"GetUser"),u.exports.PullRequestMergeability=O(Z,"PullRequestMergeability"),u.exports.PullRequestState=O(Z,"PullRequestState"),u.exports.AddComment=O(Z,"AddComment"),u.exports.AddReviewThread=O(Z,"AddReviewThread"),u.exports.EditComment=O(Z,"EditComment"),u.exports.ReadyForReview=O(Z,"ReadyForReview"),u.exports.StartReview=O(Z,"StartReview"),u.exports.SubmitReview=O(Z,"SubmitReview"),u.exports.DeleteReview=O(Z,"DeleteReview"),u.exports.AddReaction=O(Z,"AddReaction"),u.exports.DeleteReaction=O(Z,"DeleteReaction"),u.exports.UpdatePullRequest=O(Z,"UpdatePullRequest"),u.exports.AddIssueComment=O(Z,"AddIssueComment"),u.exports.EditIssueComment=O(Z,"EditIssueComment"),u.exports.GetMentionableUsers=O(Z,"GetMentionableUsers"),u.exports.GetAssignableUsers=O(Z,"GetAssignableUsers"),u.exports.IssuesWithoutMilestone=O(Z,"IssuesWithoutMilestone"),u.exports.MaxIssue=O(Z,"MaxIssue"),u.exports.GetMilestones=O(Z,"GetMilestones"),u.exports.Issues=O(Z,"Issues"),u.exports.GetViewerPermission=O(Z,"GetViewerPermission"),u.exports.GetRepositoryForkDetails=O(Z,"GetRepositoryForkDetails"),u.exports.GetChecks=O(Z,"GetChecks"),u.exports.ResolveReviewThread=O(Z,"ResolveReviewThread"),u.exports.UnresolveReviewThread=O(Z,"UnresolveReviewThread"),u.exports.MarkFileAsViewed=O(Z,"MarkFileAsViewed"),u.exports.UnmarkFileAsViewed=O(Z,"UnmarkFileAsViewed")},972:(u,Z,M)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=F;var V=ne(M(7706)),W=ne(M(8554));function ne(O){return O&&O.__esModule?O:{default:O}}function F(O){var x=O.prototype.toJSON;typeof x=="function"||(0,V.default)(0),O.prototype.inspect=x,W.default&&(O.prototype[W.default]=x)}},8002:(u,Z,M)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=x;var V=W(M(8554));function W($){return $&&$.__esModule?$:{default:$}}function ne($){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ne=function(H){return typeof H}:ne=function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},ne($)}var F=10,O=2;function x($){return N($,[])}function N($,G){switch(ne($)){case"string":return JSON.stringify($);case"function":return $.name?"[function ".concat($.name,"]"):"[function]";case"object":return $===null?"null":C($,G);default:return String($)}}function C($,G){if(G.indexOf($)!==-1)return"[Circular]";var H=[].concat(G,[$]),se=B($);if(se!==void 0){var X=se.call($);if(X!==$)return typeof X=="string"?X:N(X,H)}else if(Array.isArray($))return q($,H);return L($,H)}function L($,G){var H=Object.keys($);if(H.length===0)return"{}";if(G.length>O)return"["+I($)+"]";var se=H.map(function(X){var ve=N($[X],G);return X+": "+ve});return"{ "+se.join(", ")+" }"}function q($,G){if($.length===0)return"[]";if(G.length>O)return"[Array]";for(var H=Math.min(F,$.length),se=$.length-H,X=[],ve=0;ve<H;++ve)X.push(N($[ve],G));return se===1?X.push("... 1 more item"):se>1&&X.push("... ".concat(se," more items")),"["+X.join(", ")+"]"}function B($){var G=$[String(V.default)];if(typeof G=="function")return G;if(typeof $.inspect=="function")return $.inspect}function I($){var G=Object.prototype.toString.call($).replace(/^\[object /,"").replace(/]$/,"");if(G==="Object"&&typeof $.constructor=="function"){var H=$.constructor.name;if(typeof H=="string"&&H!=="")return H}return G}},7706:(u,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=M;function M(V,W){var ne=Boolean(V);if(!ne)throw new Error(W!=null?W:"Unexpected invariant triggered.")}},8554:(u,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=void 0;var M=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):void 0,V=M;Z.default=V},1807:(u,Z,M)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.isNode=O,Z.Token=Z.Location=void 0;var V=W(M(972));function W(x){return x&&x.__esModule?x:{default:x}}var ne=function(){function x(C,L,q){this.start=C.start,this.end=L.end,this.startToken=C,this.endToken=L,this.source=q}var N=x.prototype;return N.toJSON=function(){return{start:this.start,end:this.end}},x}();Z.Location=ne,(0,V.default)(ne);var F=function(){function x(C,L,q,B,I,$,G){this.kind=C,this.start=L,this.end=q,this.line=B,this.column=I,this.value=G,this.prev=$,this.next=null}var N=x.prototype;return N.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},x}();Z.Token=F,(0,V.default)(F);function O(x){return x!=null&&typeof x.kind=="string"}},849:(u,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.dedentBlockStringValue=M,Z.getBlockStringIndentation=W,Z.printBlockString=ne;function M(F){var O=F.split(/\r\n|[\n\r]/g),x=W(F);if(x!==0)for(var N=1;N<O.length;N++)O[N]=O[N].slice(x);for(var C=0;C<O.length&&V(O[C]);)++C;for(var L=O.length;L>C&&V(O[L-1]);)--L;return O.slice(C,L).join(`
`)}function V(F){for(var O=0;O<F.length;++O)if(F[O]!==" "&&F[O]!=="	")return!1;return!0}function W(F){for(var O,x=!0,N=!0,C=0,L=null,q=0;q<F.length;++q)switch(F.charCodeAt(q)){case 13:F.charCodeAt(q+1)===10&&++q;case 10:x=!1,N=!0,C=0;break;case 9:case 32:++C;break;default:N&&!x&&(L===null||C<L)&&(L=C),N=!1}return(O=L)!==null&&O!==void 0?O:0}function ne(F){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,N=F.indexOf(`
`)===-1,C=F[0]===" "||F[0]==="	",L=F[F.length-1]==='"',q=F[F.length-1]==="\\",B=!N||L||q||x,I="";return B&&!(N&&C)&&(I+=`
`+O),I+=O?F.replace(/\n/g,`
`+O):F,B&&(I+=`
`),'"""'+I.replace(/"""/g,'\\"""')+'"""'}},3033:(u,Z,M)=>{"use strict";var V;V={value:!0},Z.S=F;var W=M(285),ne=M(849);function F(G){return(0,W.visit)(G,{leave:x})}var O=80,x={Name:function(H){return H.value},Variable:function(H){return"$"+H.name},Document:function(H){return C(H.definitions,`

`)+`
`},OperationDefinition:function(H){var se=H.operation,X=H.name,ve=q("(",C(H.variableDefinitions,", "),")"),he=C(H.directives," "),Ne=H.selectionSet;return!X&&!he&&!ve&&se==="query"?Ne:C([se,C([X,ve]),he,Ne]," ")},VariableDefinition:function(H){var se=H.variable,X=H.type,ve=H.defaultValue,he=H.directives;return se+": "+X+q(" = ",ve)+q(" ",C(he," "))},SelectionSet:function(H){var se=H.selections;return L(se)},Field:function(H){var se=H.alias,X=H.name,ve=H.arguments,he=H.directives,Ne=H.selectionSet,Y=q("",se,": ")+X,ae=Y+q("(",C(ve,", "),")");return ae.length>O&&(ae=Y+q(`(
`,B(C(ve,`
`)),`
)`)),C([ae,C(he," "),Ne]," ")},Argument:function(H){var se=H.name,X=H.value;return se+": "+X},FragmentSpread:function(H){var se=H.name,X=H.directives;return"..."+se+q(" ",C(X," "))},InlineFragment:function(H){var se=H.typeCondition,X=H.directives,ve=H.selectionSet;return C(["...",q("on ",se),C(X," "),ve]," ")},FragmentDefinition:function(H){var se=H.name,X=H.typeCondition,ve=H.variableDefinitions,he=H.directives,Ne=H.selectionSet;return"fragment ".concat(se).concat(q("(",C(ve,", "),")")," ")+"on ".concat(X," ").concat(q("",C(he," ")," "))+Ne},IntValue:function(H){var se=H.value;return se},FloatValue:function(H){var se=H.value;return se},StringValue:function(H,se){var X=H.value,ve=H.block;return ve?(0,ne.printBlockString)(X,se==="description"?"":"  "):JSON.stringify(X)},BooleanValue:function(H){var se=H.value;return se?"true":"false"},NullValue:function(){return"null"},EnumValue:function(H){var se=H.value;return se},ListValue:function(H){var se=H.values;return"["+C(se,", ")+"]"},ObjectValue:function(H){var se=H.fields;return"{"+C(se,", ")+"}"},ObjectField:function(H){var se=H.name,X=H.value;return se+": "+X},Directive:function(H){var se=H.name,X=H.arguments;return"@"+se+q("(",C(X,", "),")")},NamedType:function(H){var se=H.name;return se},ListType:function(H){var se=H.type;return"["+se+"]"},NonNullType:function(H){var se=H.type;return se+"!"},SchemaDefinition:N(function(G){var H=G.directives,se=G.operationTypes;return C(["schema",C(H," "),L(se)]," ")}),OperationTypeDefinition:function(H){var se=H.operation,X=H.type;return se+": "+X},ScalarTypeDefinition:N(function(G){var H=G.name,se=G.directives;return C(["scalar",H,C(se," ")]," ")}),ObjectTypeDefinition:N(function(G){var H=G.name,se=G.interfaces,X=G.directives,ve=G.fields;return C(["type",H,q("implements ",C(se," & ")),C(X," "),L(ve)]," ")}),FieldDefinition:N(function(G){var H=G.name,se=G.arguments,X=G.type,ve=G.directives;return H+($(se)?q(`(
`,B(C(se,`
`)),`
)`):q("(",C(se,", "),")"))+": "+X+q(" ",C(ve," "))}),InputValueDefinition:N(function(G){var H=G.name,se=G.type,X=G.defaultValue,ve=G.directives;return C([H+": "+se,q("= ",X),C(ve," ")]," ")}),InterfaceTypeDefinition:N(function(G){var H=G.name,se=G.interfaces,X=G.directives,ve=G.fields;return C(["interface",H,q("implements ",C(se," & ")),C(X," "),L(ve)]," ")}),UnionTypeDefinition:N(function(G){var H=G.name,se=G.directives,X=G.types;return C(["union",H,C(se," "),X&&X.length!==0?"= "+C(X," | "):""]," ")}),EnumTypeDefinition:N(function(G){var H=G.name,se=G.directives,X=G.values;return C(["enum",H,C(se," "),L(X)]," ")}),EnumValueDefinition:N(function(G){var H=G.name,se=G.directives;return C([H,C(se," ")]," ")}),InputObjectTypeDefinition:N(function(G){var H=G.name,se=G.directives,X=G.fields;return C(["input",H,C(se," "),L(X)]," ")}),DirectiveDefinition:N(function(G){var H=G.name,se=G.arguments,X=G.repeatable,ve=G.locations;return"directive @"+H+($(se)?q(`(
`,B(C(se,`
`)),`
)`):q("(",C(se,", "),")"))+(X?" repeatable":"")+" on "+C(ve," | ")}),SchemaExtension:function(H){var se=H.directives,X=H.operationTypes;return C(["extend schema",C(se," "),L(X)]," ")},ScalarTypeExtension:function(H){var se=H.name,X=H.directives;return C(["extend scalar",se,C(X," ")]," ")},ObjectTypeExtension:function(H){var se=H.name,X=H.interfaces,ve=H.directives,he=H.fields;return C(["extend type",se,q("implements ",C(X," & ")),C(ve," "),L(he)]," ")},InterfaceTypeExtension:function(H){var se=H.name,X=H.interfaces,ve=H.directives,he=H.fields;return C(["extend interface",se,q("implements ",C(X," & ")),C(ve," "),L(he)]," ")},UnionTypeExtension:function(H){var se=H.name,X=H.directives,ve=H.types;return C(["extend union",se,C(X," "),ve&&ve.length!==0?"= "+C(ve," | "):""]," ")},EnumTypeExtension:function(H){var se=H.name,X=H.directives,ve=H.values;return C(["extend enum",se,C(X," "),L(ve)]," ")},InputObjectTypeExtension:function(H){var se=H.name,X=H.directives,ve=H.fields;return C(["extend input",se,C(X," "),L(ve)]," ")}};function N(G){return function(H){return C([H.description,G(H)],`
`)}}function C(G){var H,se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(H=G==null?void 0:G.filter(function(X){return X}).join(se))!==null&&H!==void 0?H:""}function L(G){return q(`{
`,B(C(G,`
`)),`
}`)}function q(G,H){var se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return H!=null&&H!==""?G+H+se:""}function B(G){return q("  ",G.replace(/\n/g,`
  `))}function I(G){return G.indexOf(`
`)!==-1}function $(G){return G!=null&&G.some(I)}},285:(u,Z,M)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.visit=x,Z.visitInParallel=N,Z.getVisitFn=C,Z.BREAK=Z.QueryDocumentKeys=void 0;var V=ne(M(8002)),W=M(1807);function ne(L){return L&&L.__esModule?L:{default:L}}var F={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]};Z.QueryDocumentKeys=F;var O=Object.freeze({});Z.BREAK=O;function x(L,q){var B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:F,I=void 0,$=Array.isArray(L),G=[L],H=-1,se=[],X=void 0,ve=void 0,he=void 0,Ne=[],Y=[],ae=L;do{H++;var te=H===G.length,J=te&&se.length!==0;if(te){if(ve=Y.length===0?void 0:Ne[Ne.length-1],X=he,he=Y.pop(),J){if($)X=X.slice();else{for(var Q={},ue=0,fe=Object.keys(X);ue<fe.length;ue++){var ye=fe[ue];Q[ye]=X[ye]}X=Q}for(var Ee=0,be=0;be<se.length;be++){var Ue=se[be][0],ze=se[be][1];$&&(Ue-=Ee),$&&ze===null?(X.splice(Ue,1),Ee++):X[Ue]=ze}}H=I.index,G=I.keys,se=I.edits,$=I.inArray,I=I.prev}else{if(ve=he?$?H:G[H]:void 0,X=he?he[ve]:ae,X==null)continue;he&&Ne.push(ve)}var et=void 0;if(!Array.isArray(X)){if(!(0,W.isNode)(X))throw new Error("Invalid AST Node: ".concat((0,V.default)(X),"."));var it=C(q,X.kind,te);if(it){if(et=it.call(q,X,ve,he,Ne,Y),et===O)break;if(et===!1){if(!te){Ne.pop();continue}}else if(et!==void 0&&(se.push([ve,et]),!te))if((0,W.isNode)(et))X=et;else{Ne.pop();continue}}}if(et===void 0&&J&&se.push([ve,X]),te)Ne.pop();else{var At;I={inArray:$,index:H,keys:G,edits:se,prev:I},$=Array.isArray(X),G=$?X:(At=B[X.kind])!==null&&At!==void 0?At:[],H=-1,se=[],he&&Y.push(he),he=X}}while(I!==void 0);return se.length!==0&&(ae=se[se.length-1][1]),ae}function N(L){var q=new Array(L.length);return{enter:function(I){for(var $=0;$<L.length;$++)if(q[$]==null){var G=C(L[$],I.kind,!1);if(G){var H=G.apply(L[$],arguments);if(H===!1)q[$]=I;else if(H===O)q[$]=O;else if(H!==void 0)return H}}},leave:function(I){for(var $=0;$<L.length;$++)if(q[$]==null){var G=C(L[$],I.kind,!0);if(G){var H=G.apply(L[$],arguments);if(H===O)q[$]=O;else if(H!==void 0&&H!==!1)return H}}else q[$]===I&&(q[$]=null)}}}function C(L,q,B){var I=L[q];if(I){if(!B&&typeof I=="function")return I;var $=B?I.leave:I.enter;if(typeof $=="function")return $}else{var G=B?L.leave:L.enter;if(G){if(typeof G=="function")return G;var H=G[q];if(typeof H=="function")return H}}}},6560:u=>{"use strict";u.exports=(Z,M=process.argv)=>{const V=Z.startsWith("-")?"":Z.length===1?"-":"--",W=M.indexOf(V+Z),ne=M.indexOf("--");return W!==-1&&(ne===-1||W<ne)}},9593:(u,Z,M)=>{"use strict";const V=M(4411),W=Symbol("max"),ne=Symbol("length"),F=Symbol("lengthCalculator"),O=Symbol("allowStale"),x=Symbol("maxAge"),N=Symbol("dispose"),C=Symbol("noDisposeOnSet"),L=Symbol("lruList"),q=Symbol("cache"),B=Symbol("updateAgeOnGet"),I=()=>1;class ${constructor(Y){if(typeof Y=="number"&&(Y={max:Y}),Y||(Y={}),Y.max&&(typeof Y.max!="number"||Y.max<0))throw new TypeError("max must be a non-negative number");const ae=this[W]=Y.max||Infinity,te=Y.length||I;if(this[F]=typeof te!="function"?I:te,this[O]=Y.stale||!1,Y.maxAge&&typeof Y.maxAge!="number")throw new TypeError("maxAge must be a number");this[x]=Y.maxAge||0,this[N]=Y.dispose,this[C]=Y.noDisposeOnSet||!1,this[B]=Y.updateAgeOnGet||!1,this.reset()}set max(Y){if(typeof Y!="number"||Y<0)throw new TypeError("max must be a non-negative number");this[W]=Y||Infinity,se(this)}get max(){return this[W]}set allowStale(Y){this[O]=!!Y}get allowStale(){return this[O]}set maxAge(Y){if(typeof Y!="number")throw new TypeError("maxAge must be a non-negative number");this[x]=Y,se(this)}get maxAge(){return this[x]}set lengthCalculator(Y){typeof Y!="function"&&(Y=I),Y!==this[F]&&(this[F]=Y,this[ne]=0,this[L].forEach(ae=>{ae.length=this[F](ae.value,ae.key),this[ne]+=ae.length})),se(this)}get lengthCalculator(){return this[F]}get length(){return this[ne]}get itemCount(){return this[L].length}rforEach(Y,ae){ae=ae||this;for(let te=this[L].tail;te!==null;){const J=te.prev;he(this,Y,te,ae),te=J}}forEach(Y,ae){ae=ae||this;for(let te=this[L].head;te!==null;){const J=te.next;he(this,Y,te,ae),te=J}}keys(){return this[L].toArray().map(Y=>Y.key)}values(){return this[L].toArray().map(Y=>Y.value)}reset(){this[N]&&this[L]&&this[L].length&&this[L].forEach(Y=>this[N](Y.key,Y.value)),this[q]=new Map,this[L]=new V,this[ne]=0}dump(){return this[L].map(Y=>H(this,Y)?!1:{k:Y.key,v:Y.value,e:Y.now+(Y.maxAge||0)}).toArray().filter(Y=>Y)}dumpLru(){return this[L]}set(Y,ae,te){if(te=te||this[x],te&&typeof te!="number")throw new TypeError("maxAge must be a number");const J=te?Date.now():0,Q=this[F](ae,Y);if(this[q].has(Y)){if(Q>this[W])return X(this,this[q].get(Y)),!1;const ye=this[q].get(Y).value;return this[N]&&(this[C]||this[N](Y,ye.value)),ye.now=J,ye.maxAge=te,ye.value=ae,this[ne]+=Q-ye.length,ye.length=Q,this.get(Y),se(this),!0}const ue=new ve(Y,ae,Q,J,te);return ue.length>this[W]?(this[N]&&this[N](Y,ae),!1):(this[ne]+=ue.length,this[L].unshift(ue),this[q].set(Y,this[L].head),se(this),!0)}has(Y){if(!this[q].has(Y))return!1;const ae=this[q].get(Y).value;return!H(this,ae)}get(Y){return G(this,Y,!0)}peek(Y){return G(this,Y,!1)}pop(){const Y=this[L].tail;return Y?(X(this,Y),Y.value):null}del(Y){X(this,this[q].get(Y))}load(Y){this.reset();const ae=Date.now();for(let te=Y.length-1;te>=0;te--){const J=Y[te],Q=J.e||0;if(Q===0)this.set(J.k,J.v);else{const ue=Q-ae;ue>0&&this.set(J.k,J.v,ue)}}}prune(){this[q].forEach((Y,ae)=>G(this,ae,!1))}}const G=(Ne,Y,ae)=>{const te=Ne[q].get(Y);if(te){const J=te.value;if(H(Ne,J)){if(X(Ne,te),!Ne[O])return}else ae&&(Ne[B]&&(te.value.now=Date.now()),Ne[L].unshiftNode(te));return J.value}},H=(Ne,Y)=>{if(!Y||!Y.maxAge&&!Ne[x])return!1;const ae=Date.now()-Y.now;return Y.maxAge?ae>Y.maxAge:Ne[x]&&ae>Ne[x]},se=Ne=>{if(Ne[ne]>Ne[W])for(let Y=Ne[L].tail;Ne[ne]>Ne[W]&&Y!==null;){const ae=Y.prev;X(Ne,Y),Y=ae}},X=(Ne,Y)=>{if(Y){const ae=Y.value;Ne[N]&&Ne[N](ae.key,ae.value),Ne[ne]-=ae.length,Ne[q].delete(ae.key),Ne[L].removeNode(Y)}};class ve{constructor(Y,ae,te,J,Q){this.key=Y,this.value=ae,this.length=te,this.now=J,this.maxAge=Q||0}}const he=(Ne,Y,ae,te)=>{let J=ae.value;H(Ne,J)&&(X(Ne,ae),Ne[O]||(J=void 0)),J&&Y.call(te,J.value,J.key,Ne)};u.exports=$},7468:(u,Z,M)=>{const V=M(9930),{defaults:W}=M(8644),{inline:ne}=M(9709),{findClosingBracket:F,escape:O}=M(621);u.exports=class lo{constructor(N,C){if(this.options=C||W,this.links=N,this.rules=ne.normal,this.options.renderer=this.options.renderer||new V,this.renderer=this.options.renderer,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=ne.pedantic:this.options.gfm&&(this.options.breaks?this.rules=ne.breaks:this.rules=ne.gfm)}static get rules(){return ne}static output(N,C,L){return new lo(C,L).output(N)}output(N){let C="",L,q,B,I,$,G;for(;N;){if($=this.rules.escape.exec(N)){N=N.substring($[0].length),C+=O($[1]);continue}if($=this.rules.tag.exec(N)){!this.inLink&&/^<a /i.test($[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test($[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test($[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test($[0])&&(this.inRawBlock=!1),N=N.substring($[0].length),C+=this.renderer.html(this.options.sanitize?this.options.sanitizer?this.options.sanitizer($[0]):O($[0]):$[0]);continue}if($=this.rules.link.exec(N)){const H=F($[2],"()");if(H>-1){const X=($[0].indexOf("!")===0?5:4)+$[1].length+H;$[2]=$[2].substring(0,H),$[0]=$[0].substring(0,X).trim(),$[3]=""}N=N.substring($[0].length),this.inLink=!0,B=$[2],this.options.pedantic?(L=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(B),L?(B=L[1],I=L[3]):I=""):I=$[3]?$[3].slice(1,-1):"",B=B.trim().replace(/^<([\s\S]*)>$/,"$1"),C+=this.outputLink($,{href:lo.escapes(B),title:lo.escapes(I)}),this.inLink=!1;continue}if(($=this.rules.reflink.exec(N))||($=this.rules.nolink.exec(N))){if(N=N.substring($[0].length),L=($[2]||$[1]).replace(/\s+/g," "),L=this.links[L.toLowerCase()],!L||!L.href){C+=$[0].charAt(0),N=$[0].substring(1)+N;continue}this.inLink=!0,C+=this.outputLink($,L),this.inLink=!1;continue}if($=this.rules.strong.exec(N)){N=N.substring($[0].length),C+=this.renderer.strong(this.output($[4]||$[3]||$[2]||$[1]));continue}if($=this.rules.em.exec(N)){N=N.substring($[0].length),C+=this.renderer.em(this.output($[6]||$[5]||$[4]||$[3]||$[2]||$[1]));continue}if($=this.rules.code.exec(N)){N=N.substring($[0].length),C+=this.renderer.codespan(O($[2].trim(),!0));continue}if($=this.rules.br.exec(N)){N=N.substring($[0].length),C+=this.renderer.br();continue}if($=this.rules.del.exec(N)){N=N.substring($[0].length),C+=this.renderer.del(this.output($[1]));continue}if($=this.rules.autolink.exec(N)){N=N.substring($[0].length),$[2]==="@"?(q=O(this.mangle($[1])),B="mailto:"+q):(q=O($[1]),B=q),C+=this.renderer.link(B,null,q);continue}if(!this.inLink&&($=this.rules.url.exec(N))){if($[2]==="@")q=O($[0]),B="mailto:"+q;else{do G=$[0],$[0]=this.rules._backpedal.exec($[0])[0];while(G!==$[0]);q=O($[0]),$[1]==="www."?B="http://"+q:B=q}N=N.substring($[0].length),C+=this.renderer.link(B,null,q);continue}if($=this.rules.text.exec(N)){N=N.substring($[0].length),this.inRawBlock?C+=this.renderer.text(this.options.sanitize?this.options.sanitizer?this.options.sanitizer($[0]):O($[0]):$[0]):C+=this.renderer.text(O(this.smartypants($[0])));continue}if(N)throw new Error("Infinite loop on byte: "+N.charCodeAt(0))}return C}static escapes(N){return N&&N.replace(lo.rules._escapes,"$1")}outputLink(N,C){const L=C.href,q=C.title?O(C.title):null;return N[0].charAt(0)!=="!"?this.renderer.link(L,q,this.output(N[1])):this.renderer.image(L,q,O(N[1]))}smartypants(N){return this.options.smartypants?N.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026"):N}mangle(N){if(!this.options.mangle)return N;const C=N.length;let L="",q=0,B;for(;q<C;q++)B=N.charCodeAt(q),Math.random()>.5&&(B="x"+B.toString(16)),L+="&#"+B+";";return L}}},1092:(u,Z,M)=>{const{defaults:V}=M(8644),{block:W}=M(9709),{rtrim:ne,splitCells:F,escape:O}=M(621);u.exports=class Pp{constructor(N){this.tokens=[],this.tokens.links=Object.create(null),this.options=N||V,this.rules=W.normal,this.options.pedantic?this.rules=W.pedantic:this.options.gfm&&(this.rules=W.gfm)}static get rules(){return W}static lex(N,C){return new Pp(C).lex(N)}lex(N){return N=N.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.token(N,!0)}token(N,C){N=N.replace(/^ +$/gm,"");let L,q,B,I,$,G,H,se,X,ve,he,Ne,Y,ae,te,J;for(;N;){if((B=this.rules.newline.exec(N))&&(N=N.substring(B[0].length),B[0].length>1&&this.tokens.push({type:"space"})),B=this.rules.code.exec(N)){const Q=this.tokens[this.tokens.length-1];N=N.substring(B[0].length),Q&&Q.type==="paragraph"?Q.text+=`
`+B[0].trimRight():(B=B[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",codeBlockStyle:"indented",text:this.options.pedantic?B:ne(B,`
`)}));continue}if(B=this.rules.fences.exec(N)){N=N.substring(B[0].length),this.tokens.push({type:"code",lang:B[2]?B[2].trim():B[2],text:B[3]||""});continue}if(B=this.rules.heading.exec(N)){N=N.substring(B[0].length),this.tokens.push({type:"heading",depth:B[1].length,text:B[2]});continue}if((B=this.rules.nptable.exec(N))&&(G={type:"table",header:F(B[1].replace(/^ *| *\| *$/g,"")),align:B[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:B[3]?B[3].replace(/\n$/,"").split(`
`):[]},G.header.length===G.align.length)){for(N=N.substring(B[0].length),he=0;he<G.align.length;he++)/^ *-+: *$/.test(G.align[he])?G.align[he]="right":/^ *:-+: *$/.test(G.align[he])?G.align[he]="center":/^ *:-+ *$/.test(G.align[he])?G.align[he]="left":G.align[he]=null;for(he=0;he<G.cells.length;he++)G.cells[he]=F(G.cells[he],G.header.length);this.tokens.push(G);continue}if(B=this.rules.hr.exec(N)){N=N.substring(B[0].length),this.tokens.push({type:"hr"});continue}if(B=this.rules.blockquote.exec(N)){N=N.substring(B[0].length),this.tokens.push({type:"blockquote_start"}),B=B[0].replace(/^ *> ?/gm,""),this.token(B,C),this.tokens.push({type:"blockquote_end"});continue}if(B=this.rules.list.exec(N)){for(N=N.substring(B[0].length),I=B[2],ae=I.length>1,H={type:"list_start",ordered:ae,start:ae?+I:"",loose:!1},this.tokens.push(H),B=B[0].match(this.rules.item),se=[],L=!1,Y=B.length,he=0;he<Y;he++)G=B[he],ve=G.length,G=G.replace(/^ *([*+-]|\d+\.) */,""),~G.indexOf(`
 `)&&(ve-=G.length,G=this.options.pedantic?G.replace(/^ {1,4}/gm,""):G.replace(new RegExp("^ {1,"+ve+"}","gm"),"")),he!==Y-1&&($=W.bullet.exec(B[he+1])[0],(I.length>1?$.length===1:$.length>1||this.options.smartLists&&$!==I)&&(N=B.slice(he+1).join(`
`)+N,he=Y-1)),q=L||/\n\n(?!\s*$)/.test(G),he!==Y-1&&(L=G.charAt(G.length-1)===`
`,q||(q=L)),q&&(H.loose=!0),te=/^\[[ xX]\] /.test(G),J=void 0,te&&(J=G[1]!==" ",G=G.replace(/^\[[ xX]\] +/,"")),X={type:"list_item_start",task:te,checked:J,loose:q},se.push(X),this.tokens.push(X),this.token(G,!1),this.tokens.push({type:"list_item_end"});if(H.loose)for(Y=se.length,he=0;he<Y;he++)se[he].loose=!0;this.tokens.push({type:"list_end"});continue}if(B=this.rules.html.exec(N)){N=N.substring(B[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&(B[1]==="pre"||B[1]==="script"||B[1]==="style"),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(B[0]):O(B[0]):B[0]});continue}if(C&&(B=this.rules.def.exec(N))){N=N.substring(B[0].length),B[3]&&(B[3]=B[3].substring(1,B[3].length-1)),Ne=B[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[Ne]||(this.tokens.links[Ne]={href:B[2],title:B[3]});continue}if((B=this.rules.table.exec(N))&&(G={type:"table",header:F(B[1].replace(/^ *| *\| *$/g,"")),align:B[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:B[3]?B[3].replace(/\n$/,"").split(`
`):[]},G.header.length===G.align.length)){for(N=N.substring(B[0].length),he=0;he<G.align.length;he++)/^ *-+: *$/.test(G.align[he])?G.align[he]="right":/^ *:-+: *$/.test(G.align[he])?G.align[he]="center":/^ *:-+ *$/.test(G.align[he])?G.align[he]="left":G.align[he]=null;for(he=0;he<G.cells.length;he++)G.cells[he]=F(G.cells[he].replace(/^ *\| *| *\| *$/g,""),G.header.length);this.tokens.push(G);continue}if(B=this.rules.lheading.exec(N)){N=N.substring(B[0].length),this.tokens.push({type:"heading",depth:B[2].charAt(0)==="="?1:2,text:B[1]});continue}if(C&&(B=this.rules.paragraph.exec(N))){N=N.substring(B[0].length),this.tokens.push({type:"paragraph",text:B[1].charAt(B[1].length-1)===`
`?B[1].slice(0,-1):B[1]});continue}if(B=this.rules.text.exec(N)){N=N.substring(B[0].length),this.tokens.push({type:"text",text:B[0]});continue}if(N)throw new Error("Infinite loop on byte: "+N.charCodeAt(0))}return this.tokens}}},9170:(u,Z,M)=>{const V=M(9930),W=M(1846),ne=M(7468),F=M(1477),{defaults:O}=M(8644),{merge:x,unescape:N}=M(621);u.exports=class Np{constructor(L){this.tokens=[],this.token=null,this.options=L||O,this.options.renderer=this.options.renderer||new V,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new W}static parse(L,q){return new Np(q).parse(L)}parse(L){this.inline=new ne(L.links,this.options),this.inlineText=new ne(L.links,x({},this.options,{renderer:new F})),this.tokens=L.reverse();let q="";for(;this.next();)q+=this.tok();return q}next(){return this.token=this.tokens.pop(),this.token}peek(){return this.tokens[this.tokens.length-1]||0}parseText(){let L=this.token.text;for(;this.peek().type==="text";)L+=`
`+this.next().text;return this.inline.output(L)}tok(){let L="";switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,N(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":{let q="",B,I,$,G;for($="",B=0;B<this.token.header.length;B++)$+=this.renderer.tablecell(this.inline.output(this.token.header[B]),{header:!0,align:this.token.align[B]});for(q+=this.renderer.tablerow($),B=0;B<this.token.cells.length;B++){for(I=this.token.cells[B],$="",G=0;G<I.length;G++)$+=this.renderer.tablecell(this.inline.output(I[G]),{header:!1,align:this.token.align[G]});L+=this.renderer.tablerow($)}return this.renderer.table(q,L)}case"blockquote_start":{for(L="";this.next().type!=="blockquote_end";)L+=this.tok();return this.renderer.blockquote(L)}case"list_start":{L="";const q=this.token.ordered,B=this.token.start;for(;this.next().type!=="list_end";)L+=this.tok();return this.renderer.list(L,q,B)}case"list_item_start":{L="";const q=this.token.loose,B=this.token.checked,I=this.token.task;if(this.token.task)if(q)if(this.peek().type==="text"){const $=this.peek();$.text=this.renderer.checkbox(B)+" "+$.text}else this.tokens.push({type:"text",text:this.renderer.checkbox(B)});else L+=this.renderer.checkbox(B);for(;this.next().type!=="list_item_end";)L+=!q&&this.token.type==="text"?this.parseText():this.tok();return this.renderer.listitem(L,I,B)}case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:{const q='Token with "'+this.token.type+'" type was not found.';if(this.options.silent)console.log(q);else throw new Error(q)}}}}},9930:(u,Z,M)=>{const{defaults:V}=M(8644),{cleanUrl:W,escape:ne}=M(621);u.exports=class{constructor(O){this.options=O||V}code(O,x,N){const C=(x||"").match(/\S*/)[0];if(this.options.highlight){const L=this.options.highlight(O,C);L!=null&&L!==O&&(N=!0,O=L)}return C?'<pre><code class="'+this.options.langPrefix+ne(C,!0)+'">'+(N?O:ne(O,!0))+`</code></pre>
`:"<pre><code>"+(N?O:ne(O,!0))+"</code></pre>"}blockquote(O){return`<blockquote>
`+O+`</blockquote>
`}html(O){return O}heading(O,x,N,C){return this.options.headerIds?"<h"+x+' id="'+this.options.headerPrefix+C.slug(N)+'">'+O+"</h"+x+`>
`:"<h"+x+">"+O+"</h"+x+`>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(O,x,N){const C=x?"ol":"ul",L=x&&N!==1?' start="'+N+'"':"";return"<"+C+L+`>
`+O+"</"+C+`>
`}listitem(O){return"<li>"+O+`</li>
`}checkbox(O){return"<input "+(O?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(O){return"<p>"+O+`</p>
`}table(O,x){return x&&(x="<tbody>"+x+"</tbody>"),`<table>
<thead>
`+O+`</thead>
`+x+`</table>
`}tablerow(O){return`<tr>
`+O+`</tr>
`}tablecell(O,x){const N=x.header?"th":"td";return(x.align?"<"+N+' align="'+x.align+'">':"<"+N+">")+O+"</"+N+`>
`}strong(O){return"<strong>"+O+"</strong>"}em(O){return"<em>"+O+"</em>"}codespan(O){return"<code>"+O+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(O){return"<del>"+O+"</del>"}link(O,x,N){if(O=W(this.options.sanitize,this.options.baseUrl,O),O===null)return N;let C='<a href="'+ne(O)+'"';return x&&(C+=' title="'+x+'"'),C+=">"+N+"</a>",C}image(O,x,N){if(O=W(this.options.sanitize,this.options.baseUrl,O),O===null)return N;let C='<img src="'+O+'" alt="'+N+'"';return x&&(C+=' title="'+x+'"'),C+=this.options.xhtml?"/>":">",C}text(O){return O}}},1846:u=>{u.exports=class{constructor(){this.seen={}}slug(M){let V=M.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(V)){const W=V;do this.seen[W]++,V=W+"-"+this.seen[W];while(this.seen.hasOwnProperty(V))}return this.seen[V]=0,V}}},1477:u=>{u.exports=class{strong(M){return M}em(M){return M}codespan(M){return M}del(M){return M}html(M){return M}text(M){return M}link(M,V,W){return""+W}image(M,V,W){return""+W}br(){return""}}},8644:u=>{function Z(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1}}function M(V){u.exports.defaults=V}u.exports={defaults:Z(),getDefaults:Z,changeDefaults:M}},621:u=>{const Z=/[&<>"']/,M=/[&<>"']/g,V=/[<>"']|&(?!#?\w+;)/,W=/[<>"']|&(?!#?\w+;)/g,ne={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},F=J=>ne[J];function O(J,Q){if(Q){if(Z.test(J))return J.replace(M,F)}else if(V.test(J))return J.replace(W,F);return J}const x=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function N(J){return J.replace(x,(Q,ue)=>(ue=ue.toLowerCase(),ue==="colon"?":":ue.charAt(0)==="#"?ue.charAt(1)==="x"?String.fromCharCode(parseInt(ue.substring(2),16)):String.fromCharCode(+ue.substring(1)):""))}const C=/(^|[^\[])\^/g;function L(J,Q){J=J.source||J,Q=Q||"";const ue={replace:(fe,ye)=>(ye=ye.source||ye,ye=ye.replace(C,"$1"),J=J.replace(fe,ye),ue),getRegex:()=>new RegExp(J,Q)};return ue}const q=/[^\w:]/g,B=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function I(J,Q,ue){if(J){let fe;try{fe=decodeURIComponent(N(ue)).replace(q,"").toLowerCase()}catch(ye){return null}if(fe.indexOf("javascript:")===0||fe.indexOf("vbscript:")===0||fe.indexOf("data:")===0)return null}Q&&!B.test(ue)&&(ue=X(Q,ue));try{ue=encodeURI(ue).replace(/%25/g,"%")}catch(fe){return null}return ue}const $={},G=/^[^:]+:\/*[^/]*$/,H=/^([^:]+:)[\s\S]*$/,se=/^([^:]+:\/*[^/]*)[\s\S]*$/;function X(J,Q){$[" "+J]||(G.test(J)?$[" "+J]=J+"/":$[" "+J]=Y(J,"/",!0)),J=$[" "+J];const ue=J.indexOf(":")===-1;return Q.substring(0,2)==="//"?ue?Q:J.replace(H,"$1")+Q:Q.charAt(0)==="/"?ue?Q:J.replace(se,"$1")+Q:J+Q}const ve={exec:function(){}};function he(J){let Q=1,ue,fe;for(;Q<arguments.length;Q++){ue=arguments[Q];for(fe in ue)Object.prototype.hasOwnProperty.call(ue,fe)&&(J[fe]=ue[fe])}return J}function Ne(J,Q){const ue=J.replace(/\|/g,(Ee,be,Ue)=>{let ze=!1,et=be;for(;--et>=0&&Ue[et]==="\\";)ze=!ze;return ze?"|":" |"}),fe=ue.split(/ \|/);let ye=0;if(fe.length>Q)fe.splice(Q);else for(;fe.length<Q;)fe.push("");for(;ye<fe.length;ye++)fe[ye]=fe[ye].trim().replace(/\\\|/g,"|");return fe}function Y(J,Q,ue){const fe=J.length;if(fe===0)return"";let ye=0;for(;ye<fe;){const Ee=J.charAt(fe-ye-1);if(Ee===Q&&!ue)ye++;else if(Ee!==Q&&ue)ye++;else break}return J.substr(0,fe-ye)}function ae(J,Q){if(J.indexOf(Q[1])===-1)return-1;const ue=J.length;let fe=0,ye=0;for(;ye<ue;ye++)if(J[ye]==="\\")ye++;else if(J[ye]===Q[0])fe++;else if(J[ye]===Q[1]&&(fe--,fe<0))return ye;return-1}function te(J){J&&J.sanitize&&!J.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}u.exports={escape:O,unescape:N,edit:L,cleanUrl:I,resolveUrl:X,noopTest:ve,merge:he,splitCells:Ne,rtrim:Y,findClosingBracket:ae,checkSanitizeDeprecation:te}},7228:(u,Z,M)=>{const V=M(1092),W=M(9170),ne=M(9930),F=M(1477),O=M(7468),x=M(1846),{merge:N,checkSanitizeDeprecation:C,escape:L}=M(621),{getDefaults:q,changeDefaults:B,defaults:I}=M(8644);function $(G,H,se){if(typeof G=="undefined"||G===null)throw new Error("marked(): input parameter is undefined or null");if(typeof G!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(G)+", string expected");if(se||typeof H=="function"){se||(se=H,H=null),H=N({},$.defaults,H||{}),C(H);const X=H.highlight;let ve,he,Ne=0;try{ve=V.lex(G,H)}catch(ae){return se(ae)}he=ve.length;const Y=function(ae){if(ae)return H.highlight=X,se(ae);let te;try{te=W.parse(ve,H)}catch(J){ae=J}return H.highlight=X,ae?se(ae):se(null,te)};if(!X||X.length<3||(delete H.highlight,!he))return Y();for(;Ne<ve.length;Ne++)(function(ae){return ae.type!=="code"?--he||Y():X(ae.text,ae.lang,function(te,J){if(te)return Y(te);if(J==null||J===ae.text)return--he||Y();ae.text=J,ae.escaped=!0,--he||Y()})})(ve[Ne]);return}try{return H=N({},$.defaults,H||{}),C(H),W.parse(V.lex(G,H),H)}catch(X){if(X.message+=`
Please report this to https://github.com/markedjs/marked.`,(H||$.defaults).silent)return"<p>An error occurred:</p><pre>"+L(X.message+"",!0)+"</pre>";throw X}}$.options=$.setOptions=function(G){return N($.defaults,G),B($.defaults),$},$.getDefaults=q,$.defaults=I,$.Parser=W,$.parser=W.parse,$.Renderer=ne,$.TextRenderer=F,$.Lexer=V,$.lexer=V.lex,$.InlineLexer=O,$.inlineLexer=O.output,$.Slugger=x,$.parse=$,u.exports=$},9709:(u,Z,M)=>{const{noopTest:V,edit:W,merge:ne}=M(621),F={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:V,table:V,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/};F._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,F._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,F.def=W(F.def).replace("label",F._label).replace("title",F._title).getRegex(),F.bullet=/(?:[*+-]|\d{1,9}\.)/,F.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,F.item=W(F.item,"gm").replace(/bull/g,F.bullet).getRegex(),F.list=W(F.list).replace(/bull/g,F.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+F.def.source+")").getRegex(),F._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",F._comment=/<!--(?!-?>)[\s\S]*?-->/,F.html=W(F.html,"i").replace("comment",F._comment).replace("tag",F._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),F.paragraph=W(F._paragraph).replace("hr",F.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",F._tag).getRegex(),F.blockquote=W(F.blockquote).replace("paragraph",F.paragraph).getRegex(),F.normal=ne({},F),F.gfm=ne({},F.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n *([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n *\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),F.gfm.nptable=W(F.gfm.nptable).replace("hr",F.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",F._tag).getRegex(),F.gfm.table=W(F.gfm.table).replace("hr",F.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",F._tag).getRegex(),F.pedantic=ne({},F.normal,{html:W(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",F._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:V,paragraph:W(F.normal._paragraph).replace("hr",F.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",F.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const O={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:V,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\spunctuation])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:V,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/};O._punctuation=`!"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~`,O.em=W(O.em).replace(/punctuation/g,O._punctuation).getRegex(),O._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,O._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,O._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,O.autolink=W(O.autolink).replace("scheme",O._scheme).replace("email",O._email).getRegex(),O._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,O.tag=W(O.tag).replace("comment",F._comment).replace("attribute",O._attribute).getRegex(),O._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,O._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,O._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,O.link=W(O.link).replace("label",O._label).replace("href",O._href).replace("title",O._title).getRegex(),O.reflink=W(O.reflink).replace("label",O._label).getRegex(),O.normal=ne({},O),O.pedantic=ne({},O.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:W(/^!?\[(label)\]\((.*?)\)/).replace("label",O._label).getRegex(),reflink:W(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",O._label).getRegex()}),O.gfm=ne({},O.normal,{escape:W(O.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),O.gfm.url=W(O.gfm.url,"i").replace("email",O.gfm._extended_email).getRegex(),O.breaks=ne({},O.gfm,{br:W(O.br).replace("{2,}","*").getRegex(),text:W(O.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),u.exports={block:F,inline:O}},778:(u,Z,M)=>{var V=M(2479);u.exports=V(W),u.exports.strict=V(ne),W.proto=W(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return W(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return ne(this)},configurable:!0})});function W(F){var O=function(){return O.called?O.value:(O.called=!0,O.value=F.apply(this,arguments))};return O.called=!1,O}function ne(F){var O=function(){if(O.called)throw new Error(O.onceError);return O.called=!0,O.value=F.apply(this,arguments)},x=F.name||"Function wrapped with `once`";return O.onceError=x+" shouldn't be called more than once",O.called=!1,O}},6200:(u,Z,M)=>{"use strict";const V=M(1669),W=M(1003),ne=/\s/,F=/\r|\n/,O=/^(Host|Match)$/i,x=1,N=2;function C(q,B){return B.hasOwnProperty(q.param)&&B[q.param]===q.value}class L extends Array{compute(B){const I={},$=(G,H)=>{G==="IdentityFile"?(I[G]||(I[G]=[])).push(H):I[G]==null&&(I[G]=H)};for(const G of this)G.type===x&&(G.param==="Host"?W(G.value,B)&&($(G.param,G.value),G.config.filter(H=>H.type===x).forEach(H=>$(H.param,H.value))):G.param==="Match"||$(G.param,G.value));return I}find(B={}){if(typeof B=="function")return super.find(B);if(!(B&&("Host"in B||"Match"in B)))throw new Error("Can only find by Host or Match");return super.find(I=>C(I,B))}remove(B={}){if(!(B&&("Host"in B||"Match"in B)))throw new Error("Can only remove by Host or Match");const I=typeof B=="function"?super.findIndex(B):super.findIndex($=>C($,B));if(I>=0)return this.splice(I,1)}toString(){return this.constructor.stringify(this)}append(B){let I="  ";e:for(const H of this)if(O.test(H.param)){for(const se of H.config)if(se.before){I=se.before;break e}}if(this.length>0){let H=this[this.length-1];H.config&&(H=H.config[H.config.length-1]),H.after=`
`}let $=this,G=this;for(const H in B){const se={type:x,param:H,separator:" ",value:B[H],before:"",after:`
`};O.test(H)?($=G,$.push(se),$=se.config=new L):(se.before=$===G?"":I,$.push(se))}return G}static stringify(B){let I="";const $=(H,se)=>Array.isArray(H)?H.map(X=>$(X,ne.test(X))).join(" "):se?`"${H}"`:H,G=H=>{if(I+=H.before,H.type===N)I+=H.content;else if(H.type===x){const se=H.quoted||/IdentityFile/i.test(H.param)&&ne.test(H.value),X=$(H.value,se);I+=`${H.param}${H.separator}${X}`}I+=H.after,H.config&&H.config.forEach(G)};return B.forEach(G),I}static get DIRECTIVE(){return x}static get COMMENT(){return N}static parse(B){let I=0,$=se(),G=new L,H=G;function se(){return B[I++]}function X(){let ue="";for(;ne.test($);)ue+=$,$=se();return ue}function ve(){let ue="";for(;F.test($);)ue+=$,$=se();return ue}function he(){let ue="";for(;$&&/[^ \t=]/.test($);)ue+=$,$=se();return ue}function Ne(){let ue=X();return $==="="&&(ue+=$,$=se()),ue+X()}function Y(){let ue="",fe=!1,ye=!1;for(;$&&!F.test($);)ye?(ue+=$==='"'?$:`\\${$}`,ye=!1):$==='"'&&(!ue||fe)?fe=!fe:$==="\\"?ye=!0:ue+=$,$=se();if(fe||ye)throw new Error(`Unexpected line break at ${ue}`);return ue.trim()}function ae(){const ue=N;let fe="";for(;$&&!F.test($);)fe+=$,$=se();return{type:ue,content:fe}}function te(){const ue=[];let fe="",ye=!1,Ee=!1;for(;$&&!F.test($);)Ee?(fe+=$==='"'?$:`\\${$}`,Ee=!1):$==='"'?ye=!ye:$==="\\"?Ee=!0:ye?fe+=$:/[ \t]/.test($)?fe&&(ue.push(fe),fe=""):fe+=$,$=se();if(ye||Ee)throw new Error(`Unexpected line break at ${ue.concat(fe).join(" ")}`);return ue.push(fe),ue.length>1?ue:ue[0]}function J(){const ue=x,fe=he(),ye=fe.toLowerCase()=="host",Ee={type:ue,param:fe,separator:Ne(),quoted:!ye&&$==='"',value:ye?te():Y()};return Ee.quoted||delete Ee.quoted,Ee}function Q(){const ue=X(),fe=$==="#"?ae():J(),ye=ve();return fe.before=ue,fe.after=ye,fe}for(;$;){let ue=Q();ue.type===x&&O.test(ue.param)?(G=H,G.push(ue),G=ue.config=new L):G.push(ue)}return H}}L.find=V.deprecate((q,B)=>{const I=q.find(B);return I?[I,q.indexOf(I)]:null},"SSHConfig.find() is deprected. Use SSHConfig.prototype.find() instead."),u.exports=L},1003:u=>{"use strict";function Z(V,W){return V=V.replace(/\./g,"\\.").replace(/\+/g,"\\+").replace(/\*/g,".*").replace(/\?/g,".?"),new RegExp("^(?:"+V+")$").test(W)}function M(V,W){const ne=Array.isArray(V)?V:V.split(/,/);let F=!1;for(const O of ne){if(O[0]=="!"&&Z(O.slice(1),W))return!1;Z(O,W)&&(F=!0)}return F}u.exports=M},2130:(u,Z,M)=>{"use strict";const V=M(2087),W=M(3867),ne=M(6560),{env:F}=process;let O;ne("no-color")||ne("no-colors")||ne("color=false")||ne("color=never")?O=0:(ne("color")||ne("colors")||ne("color=true")||ne("color=always"))&&(O=1),"FORCE_COLOR"in F&&(F.FORCE_COLOR==="true"?O=1:F.FORCE_COLOR==="false"?O=0:O=F.FORCE_COLOR.length===0?1:Math.min(parseInt(F.FORCE_COLOR,10),3));function x(L){return L===0?!1:{level:L,hasBasic:!0,has256:L>=2,has16m:L>=3}}function N(L,q){if(O===0)return 0;if(ne("color=16m")||ne("color=full")||ne("color=truecolor"))return 3;if(ne("color=256"))return 2;if(L&&!q&&O===void 0)return 0;const B=O||0;if(F.TERM==="dumb")return B;if(process.platform==="win32"){const I=V.release().split(".");return Number(I[0])>=10&&Number(I[2])>=10586?Number(I[2])>=14931?3:2:1}if("CI"in F)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(I=>I in F)||F.CI_NAME==="codeship"?1:B;if("TEAMCITY_VERSION"in F)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(F.TEAMCITY_VERSION)?1:0;if(F.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in F){const I=parseInt((F.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(F.TERM_PROGRAM){case"iTerm.app":return I>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(F.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(F.TERM)||"COLORTERM"in F?1:B}function C(L){const q=N(L,L&&L.isTTY);return x(q)}u.exports={supportsColor:C,stdout:x(N(!0,W.isatty(1))),stderr:x(N(!0,W.isatty(2)))}},7121:(u,Z,M)=>{"use strict";M.d(Z,{Z:()=>F});function V(O){var x,N=O.Symbol;return typeof N=="function"?N.observable?x=N.observable:(x=N("observable"),N.observable=x):x="@@observable",x}u=M.hmd(u);var W;typeof self!="undefined"?W=self:typeof window!="undefined"?W=window:typeof global!="undefined"?W=global:W=u;var ne=V(W);const F=ne},4802:(u,Z,M)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});var V=M(6363);Z.ExperimentationService=V.ExperimentationService},6363:(u,Z,M)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});const V=M(4067),W=M(4234),ne=M(5975);class F extends ne.ExperimentationServiceAutoPolling{constructor(x){super(x.telemetry,x.filterProviders||[],x.refetchInterval!=null?x.refetchInterval:0,x.featuresTelemetryPropertyName,x.assignmentContextTelemetryPropertyName,x.telemetryEventName,x.storageKey,x.keyValueStorage);this.options=x,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new V.TasApiFeatureProvider(new W.AxiosHttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}}Z.ExperimentationService=F,F.REFRESH_RATE_IN_MINUTES=30},5975:(u,Z,M)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});const V=M(3663),W=M(3334);class ne extends V.ExperimentationServiceBase{constructor(O,x,N,C,L,q,B,I){super(O,C,L,q,B,I);if(this.telemetry=O,this.filterProviders=x,this.refreshRateMs=N,this.featuresTelemetryPropertyName=C,this.assignmentContextTelemetryPropertyName=L,this.telemetryEventName=q,this.storageKey=B,this.storage=I,N<1e3&&N!==0)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");N>0&&(this.pollingService=new W.PollingService(N),this.pollingService.OnPollTick(async()=>{await super.getFeaturesAsync()}))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(O=!1){if(this.pollingService){this.pollingService.StopPolling();let x=await super.getFeaturesAsync(O);return this.pollingService.StartPolling(),x}else return await super.getFeaturesAsync(O)}}Z.ExperimentationServiceAutoPolling=ne},3663:(u,Z,M)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});const V=M(7002);class W{constructor(F,O,x,N,C,L){this.telemetry=F,this.featuresTelemetryPropertyName=O,this.assignmentContextTelemetryPropertyName=x,this.telemetryEventName=N,this.storageKey=C,this.storage=L,this.featuresConsumed=!1,this.initializePromise=this.loadCachePromise,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(L=new V.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData()}get features(){return this._features}set features(F){this._features=F,this.telemetry&&(this.telemetry.setSharedProperty(this.featuresTelemetryPropertyName,this.features.features.join(";")),this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext))}async getFeaturesAsync(F=!1){if(this.fetchPromise!=null)return await this.fetchPromise,this.features;if(!this.featureProviders||this.featureProviders.length===0)return Promise.resolve({features:[],assignmentContext:"",configs:[]});this.fetchPromise=Promise.all(this.featureProviders.map(async x=>await x.getFeatures()));let O=await this.fetchPromise;return this.fetchPromise=void 0,this.updateFeatures(O,F),this.features}updateFeatures(F,O=!1){let x={features:[],assignmentContext:"",configs:[]};for(let N of F){for(let C of N.features)x.features.includes(C)||x.features.push(C);for(let C of N.configs){const L=x.configs.find(q=>q.Id===C.Id);L?L.Parameters=Object.assign(Object.assign({},L.Parameters),C.Parameters):x.configs.push(C)}x.assignmentContext+=N.assignmentContext}(O||!this.featuresConsumed)&&(this.features=x),this.storage&&this.storage.setValue(this.storageKey,x)}async loadCachedFeatureData(){let F;this.storage&&(F=await this.storage.getValue(this.storageKey),F!==void 0&&F.configs===void 0&&(F.configs=[])),this.features.features.length===0&&(this.features=F||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(F){return this.featuresConsumed=!0,this.PostEventToTelemetry(F),this.features.features.includes(F)}async isCachedFlightEnabled(F){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(F),this.features.features.includes(F)}async isFlightEnabledAsync(F){const O=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(F),O.features.includes(F)}getTreatmentVariable(F,O){var x;return this.featuresConsumed=!0,this.PostEventToTelemetry(`${F}.${O}`),(x=this.features.configs.find(C=>C.Id===F))===null||x===void 0?void 0:x.Parameters[O]}async getTreatmentVariableAsync(F,O){return await this.getFeaturesAsync(!0),this.getTreatmentVariable(F,O)}PostEventToTelemetry(F){this.cachedTelemetryEvents.includes(F)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",F]])),this.cachedTelemetryEvents.push(F))}invokeInit(){this.init()}addFeatureProvider(...F){if(!(F==null||this.featureProviders==null))for(let O of F)this.featureProviders.push(O)}}Z.ExperimentationServiceBase=W},69:(u,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});class M{constructor(W){this.telemetry=W,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let W=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,W}}Z.BaseFeatureProvider=M},4e3:(u,Z,M)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});const V=M(69);class W extends V.BaseFeatureProvider{constructor(F,O){super(F);this.telemetry=F,this.filterProviders=O,this.cachedTelemetryEvents=[]}getFilters(){let F=new Map;for(let O of this.filterProviders){let x=O.getFilters();for(let N of x.keys()){let C=x.get(N);F.set(N,C)}}return F}PostEventToTelemetry(F){if(this.cachedTelemetryEvents.includes(F))return;const O=JSON.stringify(F);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",O]])),this.cachedTelemetryEvents.push(F)}}Z.FilteredFeatureProvider=W},4067:(u,Z,M)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});const V=M(4e3);class W extends V.FilteredFeatureProvider{constructor(F,O,x){super(O,x);this.httpClient=F,this.telemetry=O,this.filterProviders=x}async fetch(){let F=this.getFilters(),O={};for(let q of F.keys()){const B=F.get(q);O[q]=B}let x=await this.httpClient.get({headers:O});F.keys.length>0&&this.PostEventToTelemetry(O);let N=x.data,C=N.Configs,L=[];for(let q of C)if(!!q.Parameters)for(let B of Object.keys(q.Parameters)){const I=B+(q.Parameters[B]?"":"cf");L.includes(I)||L.push(I)}return{features:L,assignmentContext:N.AssignmentContext,configs:C}}}Z.TasApiFeatureProvider=W},4234:(u,Z,M)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});const V=M(9669);class W{constructor(F){this.endpoint=F}get(F){return V.default.get(this.endpoint,Object.assign(Object.assign({},F),{proxy:!1}))}}Z.AxiosHttpClient=W},7002:(u,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});class M{constructor(){this.storage=new Map}async getValue(W,ne){return this.storage.has(W)?await Promise.resolve(this.storage.get(W)):await Promise.resolve(ne||void 0)}setValue(W,ne){this.storage.set(W,ne)}}Z.MemoryKeyValueStorage=M},3334:(u,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});class M{constructor(W){this.fetchInterval=W}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(W){this.onTick=W}StartPolling(W=!1){this.intervalHandle&&this.StopPolling(),this.onTick!=null&&(W&&this.onTick().then(()=>{}).catch(()=>{}),this.intervalHandle=setInterval(async()=>{await this.onTick()},this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}}Z.PollingService=M},6149:(u,Z,M)=>{u.exports=M(5468)},5468:(u,Z,M)=>{"use strict";var V,W=M(1631),ne=M(4016),F=M(8605),O=M(7211),x=M(8614),N=M(2357),C=M(1669);V=L,Z.httpsOverHttp=q,V=B,V=I;function L(ve){var he=new $(ve);return he.request=F.request,he}function q(ve){var he=new $(ve);return he.request=F.request,he.createSocket=G,he.defaultPort=443,he}function B(ve){var he=new $(ve);return he.request=O.request,he}function I(ve){var he=new $(ve);return he.request=O.request,he.createSocket=G,he.defaultPort=443,he}function $(ve){var he=this;he.options=ve||{},he.proxyOptions=he.options.proxy||{},he.maxSockets=he.options.maxSockets||F.Agent.defaultMaxSockets,he.requests=[],he.sockets=[],he.on("free",function(Y,ae,te,J){for(var Q=H(ae,te,J),ue=0,fe=he.requests.length;ue<fe;++ue){var ye=he.requests[ue];if(ye.host===Q.host&&ye.port===Q.port){he.requests.splice(ue,1),ye.request.onSocket(Y);return}}Y.destroy(),he.removeSocket(Y)})}C.inherits($,x.EventEmitter),$.prototype.addRequest=function(he,Ne,Y,ae){var te=this,J=se({request:he},te.options,H(Ne,Y,ae));if(te.sockets.length>=this.maxSockets){te.requests.push(J);return}te.createSocket(J,function(Q){Q.on("free",ue),Q.on("close",fe),Q.on("agentRemove",fe),he.onSocket(Q);function ue(){te.emit("free",Q,J)}function fe(ye){te.removeSocket(Q),Q.removeListener("free",ue),Q.removeListener("close",fe),Q.removeListener("agentRemove",fe)}})},$.prototype.createSocket=function(he,Ne){var Y=this,ae={};Y.sockets.push(ae);var te=se({},Y.proxyOptions,{method:"CONNECT",path:he.host+":"+he.port,agent:!1,headers:{host:he.host+":"+he.port}});he.localAddress&&(te.localAddress=he.localAddress),te.proxyAuth&&(te.headers=te.headers||{},te.headers["Proxy-Authorization"]="Basic "+new Buffer(te.proxyAuth).toString("base64")),X("making CONNECT request");var J=Y.request(te);J.useChunkedEncodingByDefault=!1,J.once("response",Q),J.once("upgrade",ue),J.once("connect",fe),J.once("error",ye),J.end();function Q(Ee){Ee.upgrade=!0}function ue(Ee,be,Ue){process.nextTick(function(){fe(Ee,be,Ue)})}function fe(Ee,be,Ue){if(J.removeAllListeners(),be.removeAllListeners(),Ee.statusCode!==200){X("tunneling socket could not be established, statusCode=%d",Ee.statusCode),be.destroy();var ze=new Error("tunneling socket could not be established, statusCode="+Ee.statusCode);ze.code="ECONNRESET",he.request.emit("error",ze),Y.removeSocket(ae);return}if(Ue.length>0){X("got illegal response body from proxy"),be.destroy();var ze=new Error("got illegal response body from proxy");ze.code="ECONNRESET",he.request.emit("error",ze),Y.removeSocket(ae);return}return X("tunneling connection has established"),Y.sockets[Y.sockets.indexOf(ae)]=be,Ne(be)}function ye(Ee){J.removeAllListeners(),X(`tunneling socket could not be established, cause=%s
`,Ee.message,Ee.stack);var be=new Error("tunneling socket could not be established, cause="+Ee.message);be.code="ECONNRESET",he.request.emit("error",be),Y.removeSocket(ae)}},$.prototype.removeSocket=function(he){var Ne=this.sockets.indexOf(he);if(Ne!==-1){this.sockets.splice(Ne,1);var Y=this.requests.shift();Y&&this.createSocket(Y,function(ae){Y.request.onSocket(ae)})}};function G(ve,he){var Ne=this;$.prototype.createSocket.call(Ne,ve,function(Y){var ae=ve.request.getHeader("host"),te=se({},Ne.options,{socket:Y,servername:ae?ae.replace(/:.*$/,""):ve.host}),J=ne.connect(0,te);Ne.sockets[Ne.sockets.indexOf(Y)]=J,he(J)})}function H(ve,he,Ne){return typeof ve=="string"?{host:ve,port:he,localAddress:Ne}:ve}function se(ve){for(var he=1,Ne=arguments.length;he<Ne;++he){var Y=arguments[he];if(typeof Y=="object")for(var ae=Object.keys(Y),te=0,J=ae.length;te<J;++te){var Q=ae[te];Y[Q]!==void 0&&(ve[Q]=Y[Q])}}return ve}var X;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?X=function(){var ve=Array.prototype.slice.call(arguments);typeof ve[0]=="string"?ve[0]="TUNNEL: "+ve[0]:ve.unshift("TUNNEL:"),console.error.apply(console,ve)}:X=function(){},V=X},8361:(u,Z,M)=>{var V=Object.create,W=Object.defineProperty,ne=Object.getOwnPropertyDescriptor,F=Object.getOwnPropertyNames,O=Object.getOwnPropertySymbols,x=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,L=(s,T,d)=>T in s?W(s,T,{enumerable:!0,configurable:!0,writable:!0,value:d}):s[T]=d,q=(s,T)=>{for(var d in T||(T={}))N.call(T,d)&&L(s,d,T[d]);if(O)for(var d of O(T))C.call(T,d)&&L(s,d,T[d]);return s},B=s=>W(s,"__esModule",{value:!0}),I=(s,T)=>()=>(T||s((T={exports:{}}).exports,T),T.exports),$=(s,T)=>{B(s);for(var d in T)W(s,d,{get:T[d],enumerable:!0})},G=(s,T,d)=>{if(T&&typeof T=="object"||typeof T=="function")for(let v of F(T))!N.call(s,v)&&v!=="default"&&W(s,v,{get:()=>T[v],enumerable:!(d=ne(T,v))||d.enumerable});return s},H=s=>G(B(W(s!=null?V(x(s)):{},"default",s&&s.__esModule&&"default"in s?{get:()=>s.default,enumerable:!0}:{value:s,enumerable:!0})),s),se=I((s,T)=>{"use strict";var d=function(){function v(){}return v.info=function(_){for(var c=[],l=1;l<arguments.length;l++)c[l-1]=arguments[l];v.enableDebug&&console.info(v.TAG+_,c)},v.warn=function(_){for(var c=[],l=1;l<arguments.length;l++)c[l-1]=arguments[l];v.disableWarnings||console.warn(v.TAG+_,c)},v.enableDebug=!1,v.disableWarnings=!1,v.disableErrors=!1,v.TAG="ApplicationInsights:",v}();T.exports=d}),X=I(s=>{"use strict";var T=s&&s.__assign||function(){return T=Object.assign||function(c){for(var l,h=1,p=arguments.length;h<p;h++){l=arguments[h];for(var g in l)Object.prototype.hasOwnProperty.call(l,g)&&(c[g]=l[g])}return c},T.apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0}),s.AsyncScopeManager=s.OpenTelemetryScopeManagerWrapper=void 0;var d=yi(),v=M(8614),_=function(){function c(){}return c.prototype.active=function(){var l=this,h=d.CorrelationContextManager.getCurrentContext();return T(T({},h),{getValue:function(p){return l._activeSymbol?p===l._activeSymbol?h:!1:(l._activeSymbol=p,h)},setValue:function(){}})},c.prototype.with=function(l,h){var p=l.parentSpanId,g=l.name,y=c._spanToContext(l,p,g);return d.CorrelationContextManager.runWithContext(y,h)()},c.prototype.bind=function(l){return typeof l=="function"?d.CorrelationContextManager.wrapCallback(l):(l instanceof v.EventEmitter&&d.CorrelationContextManager.wrapEmitter(l),l)},c.prototype.enable=function(){return d.CorrelationContextManager.enable(),this},c.prototype.disable=function(){return d.CorrelationContextManager.disable(),this},c._spanToContext=function(l,h,p){var g=h?"|"+l.spanContext().traceId+"."+h+".":l.spanContext().traceId,y=T(T({},l.spanContext()),{traceFlags:l.spanContext().traceFlags}),f=d.CorrelationContextManager.spanToContextObject(y,g,p);return f},c}();s.OpenTelemetryScopeManagerWrapper=_,s.AsyncScopeManager=new _}),ve=I((s,T)=>{s=T.exports=ut;var d;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?d=function(){var re=Array.prototype.slice.call(arguments,0);re.unshift("SEMVER"),console.log.apply(console,re)}:d=function(){},s.SEMVER_SPEC_VERSION="2.0.0";var v=256,_=Number.MAX_SAFE_INTEGER||9007199254740991,c=16,l=s.re=[],h=s.src=[],p=0,g=p++;h[g]="0|[1-9]\\d*";var y=p++;h[y]="[0-9]+";var f=p++;h[f]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var b=p++;h[b]="("+h[g]+")\\.("+h[g]+")\\.("+h[g]+")";var w=p++;h[w]="("+h[y]+")\\.("+h[y]+")\\.("+h[y]+")";var S=p++;h[S]="(?:"+h[g]+"|"+h[f]+")";var R=p++;h[R]="(?:"+h[y]+"|"+h[f]+")";var A=p++;h[A]="(?:-("+h[S]+"(?:\\."+h[S]+")*))";var D=p++;h[D]="(?:-?("+h[R]+"(?:\\."+h[R]+")*))";var j=p++;h[j]="[0-9A-Za-z-]+";var ee=p++;h[ee]="(?:\\+("+h[j]+"(?:\\."+h[j]+")*))";var K=p++,oe="v?"+h[b]+h[A]+"?"+h[ee]+"?";h[K]="^"+oe+"$";var ge="[v=\\s]*"+h[w]+h[D]+"?"+h[ee]+"?",ke=p++;h[ke]="^"+ge+"$";var Se=p++;h[Se]="((?:<|>)?=?)";var Pe=p++;h[Pe]=h[y]+"|x|X|\\*";var Ce=p++;h[Ce]=h[g]+"|x|X|\\*";var $e=p++;h[$e]="[v=\\s]*("+h[Ce]+")(?:\\.("+h[Ce]+")(?:\\.("+h[Ce]+")(?:"+h[A]+")?"+h[ee]+"?)?)?";var Qe=p++;h[Qe]="[v=\\s]*("+h[Pe]+")(?:\\.("+h[Pe]+")(?:\\.("+h[Pe]+")(?:"+h[D]+")?"+h[ee]+"?)?)?";var at=p++;h[at]="^"+h[Se]+"\\s*"+h[$e]+"$";var tt=p++;h[tt]="^"+h[Se]+"\\s*"+h[Qe]+"$";var $t=p++;h[$t]="(?:^|[^\\d])(\\d{1,"+c+"})(?:\\.(\\d{1,"+c+"}))?(?:\\.(\\d{1,"+c+"}))?(?:$|[^\\d])";var lt=p++;h[lt]="(?:~>?)";var Ie=p++;h[Ie]="(\\s*)"+h[lt]+"\\s+",l[Ie]=new RegExp(h[Ie],"g");var qe="$1~",Le=p++;h[Le]="^"+h[lt]+h[$e]+"$";var je=p++;h[je]="^"+h[lt]+h[Qe]+"$";var Ke=p++;h[Ke]="(?:\\^)";var ot=p++;h[ot]="(\\s*)"+h[Ke]+"\\s+",l[ot]=new RegExp(h[ot],"g");var We="$1^",kt=p++;h[kt]="^"+h[Ke]+h[$e]+"$";var Jt=p++;h[Jt]="^"+h[Ke]+h[Qe]+"$";var Bt=p++;h[Bt]="^"+h[Se]+"\\s*("+ge+")$|^$";var Ot=p++;h[Ot]="^"+h[Se]+"\\s*("+oe+")$|^$";var Et=p++;h[Et]="(\\s*)"+h[Se]+"\\s*("+ge+"|"+h[$e]+")",l[Et]=new RegExp(h[Et],"g");var tr="$1$2$3",Pr=p++;h[Pr]="^\\s*("+h[$e]+")\\s+-\\s+("+h[$e]+")\\s*$";var Ze=p++;h[Ze]="^\\s*("+h[Qe]+")\\s+-\\s+("+h[Qe]+")\\s*$";var Xe=p++;h[Xe]="(<|>)?=?\\s*\\*";for(var vt=0;vt<p;vt++)d(vt,h[vt]),l[vt]||(l[vt]=new RegExp(h[vt]));s.parse=rr;function rr(re,de){if((!de||typeof de!="object")&&(de={loose:!!de,includePrerelease:!1}),re instanceof ut)return re;if(typeof re!="string"||re.length>v)return null;var _e=de.loose?l[ke]:l[K];if(!_e.test(re))return null;try{return new ut(re,de)}catch(Me){return null}}s.valid=ka;function ka(re,de){var _e=rr(re,de);return _e?_e.version:null}s.clean=Cn;function Cn(re,de){var _e=rr(re.trim().replace(/^[=v]+/,""),de);return _e?_e.version:null}s.SemVer=ut;function ut(re,de){if((!de||typeof de!="object")&&(de={loose:!!de,includePrerelease:!1}),re instanceof ut){if(re.loose===de.loose)return re;re=re.version}else if(typeof re!="string")throw new TypeError("Invalid Version: "+re);if(re.length>v)throw new TypeError("version is longer than "+v+" characters");if(!(this instanceof ut))return new ut(re,de);d("SemVer",re,de),this.options=de,this.loose=!!de.loose;var _e=re.trim().match(de.loose?l[ke]:l[K]);if(!_e)throw new TypeError("Invalid Version: "+re);if(this.raw=re,this.major=+_e[1],this.minor=+_e[2],this.patch=+_e[3],this.major>_||this.major<0)throw new TypeError("Invalid major version");if(this.minor>_||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>_||this.patch<0)throw new TypeError("Invalid patch version");_e[4]?this.prerelease=_e[4].split(".").map(function(Me){if(/^[0-9]+$/.test(Me)){var Fe=+Me;if(Fe>=0&&Fe<_)return Fe}return Me}):this.prerelease=[],this.build=_e[5]?_e[5].split("."):[],this.format()}ut.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},ut.prototype.toString=function(){return this.version},ut.prototype.compare=function(re){return d("SemVer.compare",this.version,this.options,re),re instanceof ut||(re=new ut(re,this.options)),this.compareMain(re)||this.comparePre(re)},ut.prototype.compareMain=function(re){return re instanceof ut||(re=new ut(re,this.options)),br(this.major,re.major)||br(this.minor,re.minor)||br(this.patch,re.patch)},ut.prototype.comparePre=function(re){if(re instanceof ut||(re=new ut(re,this.options)),this.prerelease.length&&!re.prerelease.length)return-1;if(!this.prerelease.length&&re.prerelease.length)return 1;if(!this.prerelease.length&&!re.prerelease.length)return 0;var de=0;do{var _e=this.prerelease[de],Me=re.prerelease[de];if(d("prerelease compare",de,_e,Me),_e===void 0&&Me===void 0)return 0;if(Me===void 0)return 1;if(_e===void 0)return-1;if(_e!==Me)return br(_e,Me)}while(++de)},ut.prototype.inc=function(re,de){switch(re){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",de);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",de);break;case"prepatch":this.prerelease.length=0,this.inc("patch",de),this.inc("pre",de);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",de),this.inc("pre",de);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var _e=this.prerelease.length;--_e>=0;)typeof this.prerelease[_e]=="number"&&(this.prerelease[_e]++,_e=-2);_e===-1&&this.prerelease.push(0)}de&&(this.prerelease[0]===de?isNaN(this.prerelease[1])&&(this.prerelease=[de,0]):this.prerelease=[de,0]);break;default:throw new Error("invalid increment argument: "+re)}return this.format(),this.raw=this.version,this},s.inc=Sa;function Sa(re,de,_e,Me){typeof _e=="string"&&(Me=_e,_e=void 0);try{return new ut(re,_e).inc(de,Me).version}catch(Fe){return null}}s.diff=Rs;function Rs(re,de){if(wi(re,de))return null;var _e=rr(re),Me=rr(de),Fe="";if(_e.prerelease.length||Me.prerelease.length){Fe="pre";var Ge="prerelease"}for(var Ve in _e)if((Ve==="major"||Ve==="minor"||Ve==="patch")&&_e[Ve]!==Me[Ve])return Fe+Ve;return Ge}s.compareIdentifiers=br;var cn=/^[0-9]+$/;function br(re,de){var _e=cn.test(re),Me=cn.test(de);return _e&&Me&&(re=+re,de=+de),re===de?0:_e&&!Me?-1:Me&&!_e?1:re<de?-1:1}s.rcompareIdentifiers=Nr;function Nr(re,de){return br(de,re)}s.major=_r;function _r(re,de){return new ut(re,de).major}s.minor=Wn;function Wn(re,de){return new ut(re,de).minor}s.patch=Kn;function Kn(re,de){return new ut(re,de).patch}s.compare=Vr;function Vr(re,de,_e){return new ut(re,_e).compare(new ut(de,_e))}s.compareLoose=Ta;function Ta(re,de){return Vr(re,de,!0)}s.rcompare=Yn;function Yn(re,de,_e){return Vr(de,re,_e)}s.sort=Cs;function Cs(re,de){return re.sort(function(_e,Me){return s.compare(_e,Me,de)})}s.rsort=_i;function _i(re,de){return re.sort(function(_e,Me){return s.rcompare(_e,Me,de)})}s.gt=Pn;function Pn(re,de,_e){return Vr(re,de,_e)>0}s.lt=Jr;function Jr(re,de,_e){return Vr(re,de,_e)<0}s.eq=wi;function wi(re,de,_e){return Vr(re,de,_e)===0}s.neq=Ps;function Ps(re,de,_e){return Vr(re,de,_e)!==0}s.gte=Ki;function Ki(re,de,_e){return Vr(re,de,_e)>=0}s.lte=Lr;function Lr(re,de,_e){return Vr(re,de,_e)<=0}s.cmp=jr;function jr(re,de,_e,Me){switch(de){case"===":return typeof re=="object"&&(re=re.version),typeof _e=="object"&&(_e=_e.version),re===_e;case"!==":return typeof re=="object"&&(re=re.version),typeof _e=="object"&&(_e=_e.version),re!==_e;case"":case"=":case"==":return wi(re,_e,Me);case"!=":return Ps(re,_e,Me);case">":return Pn(re,_e,Me);case">=":return Ki(re,_e,Me);case"<":return Jr(re,_e,Me);case"<=":return Lr(re,_e,Me);default:throw new TypeError("Invalid operator: "+de)}}s.Comparator=Ar;function Ar(re,de){if((!de||typeof de!="object")&&(de={loose:!!de,includePrerelease:!1}),re instanceof Ar){if(re.loose===!!de.loose)return re;re=re.value}if(!(this instanceof Ar))return new Ar(re,de);d("comparator",re,de),this.options=de,this.loose=!!de.loose,this.parse(re),this.semver===wr?this.value="":this.value=this.operator+this.semver.version,d("comp",this)}var wr={};Ar.prototype.parse=function(re){var de=this.options.loose?l[Bt]:l[Ot],_e=re.match(de);if(!_e)throw new TypeError("Invalid comparator: "+re);this.operator=_e[1],this.operator==="="&&(this.operator=""),_e[2]?this.semver=new ut(_e[2],this.options.loose):this.semver=wr},Ar.prototype.toString=function(){return this.value},Ar.prototype.test=function(re){return d("Comparator.test",re,this.options.loose),this.semver===wr?!0:(typeof re=="string"&&(re=new ut(re,this.options)),jr(re,this.operator,this.semver,this.options))},Ar.prototype.intersects=function(re,de){if(!(re instanceof Ar))throw new TypeError("a Comparator is required");(!de||typeof de!="object")&&(de={loose:!!de,includePrerelease:!1});var _e;if(this.operator==="")return _e=new pt(re.value,de),pn(this.value,_e,de);if(re.operator==="")return _e=new pt(this.value,de),pn(re.semver,_e,de);var Me=(this.operator===">="||this.operator===">")&&(re.operator===">="||re.operator===">"),Fe=(this.operator==="<="||this.operator==="<")&&(re.operator==="<="||re.operator==="<"),Ge=this.semver.version===re.semver.version,Ve=(this.operator===">="||this.operator==="<=")&&(re.operator===">="||re.operator==="<="),rt=jr(this.semver,"<",re.semver,de)&&(this.operator===">="||this.operator===">")&&(re.operator==="<="||re.operator==="<"),st=jr(this.semver,">",re.semver,de)&&(this.operator==="<="||this.operator==="<")&&(re.operator===">="||re.operator===">");return Me||Fe||Ge&&Ve||rt||st},s.Range=pt;function pt(re,de){if((!de||typeof de!="object")&&(de={loose:!!de,includePrerelease:!1}),re instanceof pt)return re.loose===!!de.loose&&re.includePrerelease===!!de.includePrerelease?re:new pt(re.raw,de);if(re instanceof Ar)return new pt(re.value,de);if(!(this instanceof pt))return new pt(re,de);if(this.options=de,this.loose=!!de.loose,this.includePrerelease=!!de.includePrerelease,this.raw=re,this.set=re.split(/\s*\|\|\s*/).map(function(_e){return this.parseRange(_e.trim())},this).filter(function(_e){return _e.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+re);this.format()}pt.prototype.format=function(){return this.range=this.set.map(function(re){return re.join(" ").trim()}).join("||").trim(),this.range},pt.prototype.toString=function(){return this.range},pt.prototype.parseRange=function(re){var de=this.options.loose;re=re.trim();var _e=de?l[Ze]:l[Pr];re=re.replace(_e,Pa),d("hyphen replace",re),re=re.replace(l[Et],tr),d("comparator trim",re,l[Et]),re=re.replace(l[Ie],qe),re=re.replace(l[ot],We),re=re.split(/\s+/).join(" ");var Me=de?l[Bt]:l[Ot],Fe=re.split(" ").map(function(Ge){return dn(Ge,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(Fe=Fe.filter(function(Ge){return!!Ge.match(Me)})),Fe=Fe.map(function(Ge){return new Ar(Ge,this.options)},this),Fe},pt.prototype.intersects=function(re,de){if(!(re instanceof pt))throw new TypeError("a Range is required");return this.set.some(function(_e){return _e.every(function(Me){return re.set.some(function(Fe){return Fe.every(function(Ge){return Me.intersects(Ge,de)})})})})},s.toComparators=Ra;function Ra(re,de){return new pt(re,de).set.map(function(_e){return _e.map(function(Me){return Me.value}).join(" ").trim().split(" ")})}function dn(re,de){return d("comp",re,de),re=Yi(re,de),d("caret",re),re=hn(re,de),d("tildes",re),re=Xi(re,de),d("xrange",re),re=qr(re,de),d("stars",re),re}function Vt(re){return!re||re.toLowerCase()==="x"||re==="*"}function hn(re,de){return re.trim().split(/\s+/).map(function(_e){return Ca(_e,de)}).join(" ")}function Ca(re,de){var _e=de.loose?l[je]:l[Le];return re.replace(_e,function(Me,Fe,Ge,Ve,rt){d("tilde",re,Me,Fe,Ge,Ve,rt);var st;return Vt(Fe)?st="":Vt(Ge)?st=">="+Fe+".0.0 <"+(+Fe+1)+".0.0":Vt(Ve)?st=">="+Fe+"."+Ge+".0 <"+Fe+"."+(+Ge+1)+".0":rt?(d("replaceTilde pr",rt),st=">="+Fe+"."+Ge+"."+Ve+"-"+rt+" <"+Fe+"."+(+Ge+1)+".0"):st=">="+Fe+"."+Ge+"."+Ve+" <"+Fe+"."+(+Ge+1)+".0",d("tilde return",st),st})}function Yi(re,de){return re.trim().split(/\s+/).map(function(_e){return Ei(_e,de)}).join(" ")}function Ei(re,de){d("caret",re,de);var _e=de.loose?l[Jt]:l[kt];return re.replace(_e,function(Me,Fe,Ge,Ve,rt){d("caret",re,Me,Fe,Ge,Ve,rt);var st;return Vt(Fe)?st="":Vt(Ge)?st=">="+Fe+".0.0 <"+(+Fe+1)+".0.0":Vt(Ve)?Fe==="0"?st=">="+Fe+"."+Ge+".0 <"+Fe+"."+(+Ge+1)+".0":st=">="+Fe+"."+Ge+".0 <"+(+Fe+1)+".0.0":rt?(d("replaceCaret pr",rt),Fe==="0"?Ge==="0"?st=">="+Fe+"."+Ge+"."+Ve+"-"+rt+" <"+Fe+"."+Ge+"."+(+Ve+1):st=">="+Fe+"."+Ge+"."+Ve+"-"+rt+" <"+Fe+"."+(+Ge+1)+".0":st=">="+Fe+"."+Ge+"."+Ve+"-"+rt+" <"+(+Fe+1)+".0.0"):(d("no pr"),Fe==="0"?Ge==="0"?st=">="+Fe+"."+Ge+"."+Ve+" <"+Fe+"."+Ge+"."+(+Ve+1):st=">="+Fe+"."+Ge+"."+Ve+" <"+Fe+"."+(+Ge+1)+".0":st=">="+Fe+"."+Ge+"."+Ve+" <"+(+Fe+1)+".0.0"),d("caret return",st),st})}function Xi(re,de){return d("replaceXRanges",re,de),re.split(/\s+/).map(function(_e){return Xo(_e,de)}).join(" ")}function Xo(re,de){re=re.trim();var _e=de.loose?l[tt]:l[at];return re.replace(_e,function(Me,Fe,Ge,Ve,rt,st){d("xRange",re,Me,Fe,Ge,Ve,rt,st);var Er=Vt(Ge),ur=Er||Vt(Ve),hr=ur||Vt(rt),nr=hr;return Fe==="="&&nr&&(Fe=""),Er?Fe===">"||Fe==="<"?Me="<0.0.0":Me="*":Fe&&nr?(ur&&(Ve=0),rt=0,Fe===">"?(Fe=">=",ur?(Ge=+Ge+1,Ve=0,rt=0):(Ve=+Ve+1,rt=0)):Fe==="<="&&(Fe="<",ur?Ge=+Ge+1:Ve=+Ve+1),Me=Fe+Ge+"."+Ve+"."+rt):ur?Me=">="+Ge+".0.0 <"+(+Ge+1)+".0.0":hr&&(Me=">="+Ge+"."+Ve+".0 <"+Ge+"."+(+Ve+1)+".0"),d("xRange return",Me),Me})}function qr(re,de){return d("replaceStars",re,de),re.trim().replace(l[Xe],"")}function Pa(re,de,_e,Me,Fe,Ge,Ve,rt,st,Er,ur,hr,nr){return Vt(_e)?de="":Vt(Me)?de=">="+_e+".0.0":Vt(Fe)?de=">="+_e+"."+Me+".0":de=">="+de,Vt(st)?rt="":Vt(Er)?rt="<"+(+st+1)+".0.0":Vt(ur)?rt="<"+st+"."+(+Er+1)+".0":hr?rt="<="+st+"."+Er+"."+ur+"-"+hr:rt="<="+rt,(de+" "+rt).trim()}pt.prototype.test=function(re){if(!re)return!1;typeof re=="string"&&(re=new ut(re,this.options));for(var de=0;de<this.set.length;de++)if(Ns(this.set[de],re,this.options))return!0;return!1};function Ns(re,de,_e){for(var Me=0;Me<re.length;Me++)if(!re[Me].test(de))return!1;if(de.prerelease.length&&!_e.includePrerelease){for(Me=0;Me<re.length;Me++)if(d(re[Me].semver),re[Me].semver!==wr&&re[Me].semver.prerelease.length>0){var Fe=re[Me].semver;if(Fe.major===de.major&&Fe.minor===de.minor&&Fe.patch===de.patch)return!0}return!1}return!0}s.satisfies=pn;function pn(re,de,_e){try{de=new pt(de,_e)}catch(Me){return!1}return de.test(re)}s.maxSatisfying=Ji;function Ji(re,de,_e){var Me=null,Fe=null;try{var Ge=new pt(de,_e)}catch(Ve){return null}return re.forEach(function(Ve){Ge.test(Ve)&&(!Me||Fe.compare(Ve)===-1)&&(Me=Ve,Fe=new ut(Me,_e))}),Me}s.minSatisfying=As;function As(re,de,_e){var Me=null,Fe=null;try{var Ge=new pt(de,_e)}catch(Ve){return null}return re.forEach(function(Ve){Ge.test(Ve)&&(!Me||Fe.compare(Ve)===1)&&(Me=Ve,Fe=new ut(Me,_e))}),Me}s.minVersion=Nn;function Nn(re,de){re=new pt(re,de);var _e=new ut("0.0.0");if(re.test(_e)||(_e=new ut("0.0.0-0"),re.test(_e)))return _e;_e=null;for(var Me=0;Me<re.set.length;++Me){var Fe=re.set[Me];Fe.forEach(function(Ge){var Ve=new ut(Ge.semver.version);switch(Ge.operator){case">":Ve.prerelease.length===0?Ve.patch++:Ve.prerelease.push(0),Ve.raw=Ve.format();case"":case">=":(!_e||Pn(_e,Ve))&&(_e=Ve);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+Ge.operator)}})}return _e&&re.test(_e)?_e:null}s.validRange=Na;function Na(re,de){try{return new pt(re,de).range||"*"}catch(_e){return null}}s.ltr=Aa;function Aa(re,de,_e){return ki(re,de,"<",_e)}s.gtr=Is;function Is(re,de,_e){return ki(re,de,">",_e)}s.outside=ki;function ki(re,de,_e,Me){re=new ut(re,Me),de=new pt(de,Me);var Fe,Ge,Ve,rt,st;switch(_e){case">":Fe=Pn,Ge=Lr,Ve=Jr,rt=">",st=">=";break;case"<":Fe=Jr,Ge=Ki,Ve=Pn,rt="<",st="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(pn(re,de,Me))return!1;for(var Er=0;Er<de.set.length;++Er){var ur=de.set[Er],hr=null,nr=null;if(ur.forEach(function(Ur){Ur.semver===wr&&(Ur=new Ar(">=0.0.0")),hr=hr||Ur,nr=nr||Ur,Fe(Ur.semver,hr.semver,Me)?hr=Ur:Ve(Ur.semver,nr.semver,Me)&&(nr=Ur)}),hr.operator===rt||hr.operator===st||(!nr.operator||nr.operator===rt)&&Ge(re,nr.semver)||nr.operator===st&&Ve(re,nr.semver))return!1}return!0}s.prerelease=Jo;function Jo(re,de){var _e=rr(re,de);return _e&&_e.prerelease.length?_e.prerelease:null}s.intersects=An;function An(re,de,_e){return re=new pt(re,_e),de=new pt(de,_e),re.intersects(de)}s.coerce=Ia;function Ia(re){if(re instanceof ut)return re;if(typeof re!="string")return null;var de=re.match(l[$t]);return de==null?null:rr(de[1]+"."+(de[2]||"0")+"."+(de[3]||"0"))}}),he=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.makePatchingRequire=void 0;var T=M(5622),d=ve(),v=M(2282),_=Object.keys(process.binding("natives")),c=v.prototype.require;function l(h){var p={};return function(g){var y=c.apply(this,arguments);if(h[g]){var f=v._resolveFilename(g,this);if(p.hasOwnProperty(f))return p[f];var b=void 0;if(_.indexOf(g)<0)try{b=c.call(this,T.join(g,"package.json")).version}catch(j){return y}else b=process.version.substring(1);var w=b.indexOf("-");w>=0&&(b=b.substring(0,w));for(var S=y,R=0,A=h[g];R<A.length;R++){var D=A[R];d.satisfies(b,D.versionSpecifier)&&(S=D.patch(S,f))}return p[f]=S}return y}}s.makePatchingRequire=l}),Ne=I((s,T)=>{T.exports={_args:[["diagnostic-channel@1.0.0","/home/runner/work/vscode-extension-telemetry/vscode-extension-telemetry"]],_development:!0,_from:"diagnostic-channel@1.0.0",_id:"diagnostic-channel@1.0.0",_inBundle:!1,_integrity:"sha512-v7Clmg5HG9XwIhqgbBRfwFzwZhxjvESZ33uu1cgcCLkdb9ZxgtY78eAgQMEQ39UecQ//4K5W75iq6LFBtAQD8w==",_location:"/diagnostic-channel",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"diagnostic-channel@1.0.0",name:"diagnostic-channel",escapedName:"diagnostic-channel",rawSpec:"1.0.0",saveSpec:null,fetchSpec:"1.0.0"},_requiredBy:["/applicationinsights"],_resolved:"https://registry.npmjs.org/diagnostic-channel/-/diagnostic-channel-1.0.0.tgz",_spec:"1.0.0",_where:"/home/runner/work/vscode-extension-telemetry/vscode-extension-telemetry",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},dependencies:{semver:"^5.3.0"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],homepage:"https://github.com/Microsoft/node-diagnostic-channel",license:"MIT",main:"./dist/src/channel.js",name:"diagnostic-channel",repository:{type:"git",url:"git+https://github.com/Microsoft/node-diagnostic-channel.git"},scripts:{build:"tsc",clean:"rimraf ./dist",lint:"tslint -c tslint.json -p tsconfig.json",test:"mocha ./dist/tests/**/*.js"},types:"./dist/src/channel.d.ts",version:"1.0.0"}}),Y=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.channel=s.makePatchingRequire=void 0;var T=he(),d=he();Object.defineProperty(s,"makePatchingRequire",{enumerable:!0,get:function(){return d.makePatchingRequire}});var v=function(l){return!0},_=function(){function l(){this.version=Ne().version,this.subscribers={},this.contextPreservationFunction=function(h){return h},this.knownPatches={},this.currentlyPublishing=!1}return l.prototype.shouldPublish=function(h){var p=this.subscribers[h];return p?p.some(function(g){var y=g.filter;return!y||y(!1)}):!1},l.prototype.publish=function(h,p){if(!this.currentlyPublishing){var g=this.subscribers[h];if(g){var y={timestamp:Date.now(),data:p};this.currentlyPublishing=!0,g.forEach(function(f){var b=f.listener,w=f.filter;try{w&&w(!0)&&b(y)}catch(S){}}),this.currentlyPublishing=!1}}},l.prototype.subscribe=function(h,p,g){g===void 0&&(g=v),this.subscribers[h]||(this.subscribers[h]=[]),this.subscribers[h].push({listener:p,filter:g})},l.prototype.unsubscribe=function(h,p,g){g===void 0&&(g=v);var y=this.subscribers[h];if(y){for(var f=0;f<y.length;++f)if(y[f].listener===p&&y[f].filter===g)return y.splice(f,1),!0}return!1},l.prototype.reset=function(){var h=this;this.subscribers={},this.contextPreservationFunction=function(p){return p},Object.getOwnPropertyNames(this.knownPatches).forEach(function(p){return delete h.knownPatches[p]})},l.prototype.bindToContext=function(h){return this.contextPreservationFunction(h)},l.prototype.addContextPreservation=function(h){var p=this.contextPreservationFunction;this.contextPreservationFunction=function(g){return h(p(g))}},l.prototype.registerMonkeyPatch=function(h,p){this.knownPatches[h]||(this.knownPatches[h]=[]),this.knownPatches[h].push(p)},l.prototype.getPatchesObject=function(){return this.knownPatches},l}();global.diagnosticsSource||(global.diagnosticsSource=new _,c=M(2282),c.prototype.require=T.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var c;s.channel=global.diagnosticsSource}),ae=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),te=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.BaggageImpl=void 0;var T=function(){function d(v){this._entries=v?new Map(v):new Map}return d.prototype.getEntry=function(v){var _=this._entries.get(v);if(_)return Object.assign({},_)},d.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(v){var _=v[0],c=v[1];return[_,c]})},d.prototype.setEntry=function(v,_){var c=new d(this._entries);return c._entries.set(v,_),c},d.prototype.removeEntry=function(v){var _=new d(this._entries);return _._entries.delete(v),_},d.prototype.removeEntries=function(){for(var v=[],_=0;_<arguments.length;_++)v[_]=arguments[_];for(var c=new d(this._entries),l=0,h=v;l<h.length;l++){var p=h[l];c._entries.delete(p)}return c},d.prototype.clear=function(){return new d},d}();s.BaggageImpl=T}),J=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.baggageEntryMetadataSymbol=void 0,s.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")}),Q=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.baggageEntryMetadataFromString=s.createBaggage=void 0;var T=wt(),d=te(),v=J();function _(l){return l===void 0&&(l={}),new d.BaggageImpl(new Map(Object.entries(l)))}s.createBaggage=_;function c(l){return typeof l!="string"&&(T.diag.error("Cannot create baggage metadata from unknown type: "+typeof l),l=""),{__TYPE__:v.baggageEntryMetadataSymbol,toString:function(){return l}}}s.baggageEntryMetadataFromString=c}),ue=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),fe=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),ye=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.DiagConsoleLogger=void 0;var T=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],d=function(){function v(){function _(l){return function(){var h=arguments;if(console){var p=console[l];if(typeof p!="function"&&(p=console.log),typeof p=="function")return p.apply(console,h)}}}for(var c=0;c<T.length;c++)this[T[c].n]=_(T[c].c)}return v}();s.DiagConsoleLogger=d}),Ee=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.DiagLogLevel=void 0;var T;(function(d){d[d.NONE=0]="NONE",d[d.ERROR=30]="ERROR",d[d.WARN=50]="WARN",d[d.INFO=60]="INFO",d[d.DEBUG=70]="DEBUG",d[d.VERBOSE=80]="VERBOSE",d[d.ALL=9999]="ALL"})(T=s.DiagLogLevel||(s.DiagLogLevel={}))}),be=I(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(ye(),s),d(Ee(),s)}),Ue=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.defaultTextMapSetter=s.defaultTextMapGetter=void 0,s.defaultTextMapGetter={get:function(T,d){if(T!=null)return T[d]},keys:function(T){return T==null?[]:Object.keys(T)}},s.defaultTextMapSetter={set:function(T,d,v){T!=null&&(T[d]=v)}}}),ze=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),et=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),it=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.ROOT_CONTEXT=s.createContextKey=void 0;function T(v){return Symbol.for(v)}s.createContextKey=T;var d=function(){function v(_){var c=this;c._currentContext=_?new Map(_):new Map,c.getValue=function(l){return c._currentContext.get(l)},c.setValue=function(l,h){var p=new v(c._currentContext);return p._currentContext.set(l,h),p},c.deleteValue=function(l){var h=new v(c._currentContext);return h._currentContext.delete(l),h}}return v}();s.ROOT_CONTEXT=new d}),At=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.TraceFlags=void 0;var T;(function(d){d[d.NONE=0]="NONE",d[d.SAMPLED=1]="SAMPLED"})(T=s.TraceFlags||(s.TraceFlags={}))}),Rt=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.wrapSpanContext=s.isSpanContextValid=s.isValidSpanId=s.isValidTraceId=s.INVALID_SPAN_CONTEXT=s.INVALID_TRACEID=s.INVALID_SPANID=void 0;var T=Ft(),d=At(),v=/^([0-9a-f]{32})$/i,_=/^[0-9a-f]{16}$/i;s.INVALID_SPANID="0000000000000000",s.INVALID_TRACEID="00000000000000000000000000000000",s.INVALID_SPAN_CONTEXT={traceId:s.INVALID_TRACEID,spanId:s.INVALID_SPANID,traceFlags:d.TraceFlags.NONE};function c(g){return v.test(g)&&g!==s.INVALID_TRACEID}s.isValidTraceId=c;function l(g){return _.test(g)&&g!==s.INVALID_SPANID}s.isValidSpanId=l;function h(g){return c(g.traceId)&&l(g.spanId)}s.isSpanContextValid=h;function p(g){return new T.NonRecordingSpan(g)}s.wrapSpanContext=p}),Ft=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.NonRecordingSpan=void 0;var T=Rt(),d=function(){function v(_){_===void 0&&(_=T.INVALID_SPAN_CONTEXT),this._spanContext=_}return v.prototype.spanContext=function(){return this._spanContext},v.prototype.setAttribute=function(_,c){return this},v.prototype.setAttributes=function(_){return this},v.prototype.addEvent=function(_,c){return this},v.prototype.setStatus=function(_){return this},v.prototype.updateName=function(_){return this},v.prototype.end=function(_){},v.prototype.isRecording=function(){return!1},v.prototype.recordException=function(_,c){},v}();s.NonRecordingSpan=d}),Lt=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.getSpanContext=s.setSpanContext=s.deleteSpan=s.setSpan=s.getSpan=void 0;var T=it(),d=Ft(),v=T.createContextKey("OpenTelemetry Context Key SPAN");function _(g){return g.getValue(v)||void 0}s.getSpan=_;function c(g,y){return g.setValue(v,y)}s.setSpan=c;function l(g){return g.deleteValue(v)}s.deleteSpan=l;function h(g,y){return c(g,new d.NonRecordingSpan(y))}s.setSpanContext=h;function p(g){var y;return(y=_(g))===null||y===void 0?void 0:y.spanContext()}s.getSpanContext=p}),cr=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.NoopTracer=void 0;var T=wt(),d=Lt(),v=Ft(),_=Rt(),c=function(){function h(){}return h.prototype.startSpan=function(p,g,y){var f=Boolean(g==null?void 0:g.root);if(f)return new v.NonRecordingSpan;var b=y&&d.getSpanContext(y);return l(b)&&_.isSpanContextValid(b)?new v.NonRecordingSpan(b):new v.NonRecordingSpan},h.prototype.startActiveSpan=function(p,g,y,f){var b,w,S;if(!(arguments.length<2)){arguments.length===2?S=g:arguments.length===3?(b=g,S=y):(b=g,w=y,S=f);var R=w!=null?w:T.context.active(),A=this.startSpan(p,b,R),D=d.setSpan(R,A);return T.context.with(D,S,void 0,A)}},h}();s.NoopTracer=c;function l(h){return typeof h=="object"&&typeof h.spanId=="string"&&typeof h.traceId=="string"&&typeof h.traceFlags=="number"}}),Tr=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.ProxyTracer=void 0;var T=cr(),d=function(){function v(_,c,l){this._provider=_,this.name=c,this.version=l}return v.prototype.startSpan=function(_,c,l){return this._getTracer().startSpan(_,c,l)},v.prototype.startActiveSpan=function(_,c,l,h){var p=this._getTracer();return Reflect.apply(p.startActiveSpan,p,arguments)},v.prototype._getTracer=function(){if(this._delegate)return this._delegate;var _=this._provider.getDelegateTracer(this.name,this.version);return _?(this._delegate=_,this._delegate):new T.NoopTracer},v}();s.ProxyTracer=d}),rn=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.NoopTracerProvider=void 0;var T=cr(),d=function(){function v(){}return v.prototype.getTracer=function(_,c){return new T.NoopTracer},v}();s.NoopTracerProvider=d}),Oi=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.ProxyTracerProvider=void 0;var T=Tr(),d=rn(),v=new d.NoopTracerProvider,_=function(){function c(){}return c.prototype.getTracer=function(l,h){var p;return(p=this.getDelegateTracer(l,h))!==null&&p!==void 0?p:new T.ProxyTracer(this,l,h)},c.prototype.getDelegate=function(){var l;return(l=this._delegate)!==null&&l!==void 0?l:v},c.prototype.setDelegate=function(l){this._delegate=l},c.prototype.getDelegateTracer=function(l,h){var p;return(p=this._delegate)===null||p===void 0?void 0:p.getTracer(l,h)},c}();s.ProxyTracerProvider=_}),cs=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Di=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.SamplingDecision=void 0;var T;(function(d){d[d.NOT_RECORD=0]="NOT_RECORD",d[d.RECORD=1]="RECORD",d[d.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(T=s.SamplingDecision||(s.SamplingDecision={}))}),oi=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),qn=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.SpanKind=void 0;var T;(function(d){d[d.INTERNAL=0]="INTERNAL",d[d.SERVER=1]="SERVER",d[d.CLIENT=2]="CLIENT",d[d.PRODUCER=3]="PRODUCER",d[d.CONSUMER=4]="CONSUMER"})(T=s.SpanKind||(s.SpanKind={}))}),qt=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),xi=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Gt=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.SpanStatusCode=void 0;var T;(function(d){d[d.UNSET=0]="UNSET",d[d.OK=1]="OK",d[d.ERROR=2]="ERROR"})(T=s.SpanStatusCode||(s.SpanStatusCode={}))}),ht=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),or=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Un=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),$n=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),ui=I(s=>{"use strict";var T=s&&s.__spreadArray||function(_,c){for(var l=0,h=c.length,p=_.length;l<h;l++,p++)_[p]=c[l];return _};Object.defineProperty(s,"__esModule",{value:!0}),s.NoopContextManager=void 0;var d=it(),v=function(){function _(){}return _.prototype.active=function(){return d.ROOT_CONTEXT},_.prototype.with=function(c,l,h){for(var p=[],g=3;g<arguments.length;g++)p[g-3]=arguments[g];return l.call.apply(l,T([h],p))},_.prototype.bind=function(c,l){return l},_.prototype.enable=function(){return this},_.prototype.disable=function(){return this},_}();s.NoopContextManager=v}),Mi=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s._globalThis=void 0,s._globalThis=typeof globalThis=="object"?globalThis:global}),Fi=I(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(Mi(),s)}),jt=I(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(Fi(),s)}),co=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.VERSION=void 0,s.VERSION="1.0.1"}),ho=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.isCompatible=s._makeCompatibilityCheck=void 0;var T=co(),d=/^(\d+)\.(\d+)\.(\d+)(?:-(.*))?$/;function v(_){var c=new Set([_]),l=new Set,h=_.match(d);if(!h)return function(){return!1};var p={major:+h[1],minor:+h[2],patch:+h[3]};function g(f){return l.add(f),!1}function y(f){return c.add(f),!0}return function(f){if(c.has(f))return!0;if(l.has(f))return!1;var b=f.match(d);if(!b)return g(f);var w={major:+b[1],minor:+b[2],patch:+b[3]};return p.major!==w.major?g(f):p.major===0?p.minor===w.minor&&p.patch<=w.patch?y(f):g(f):p.minor<=w.minor?y(f):g(f)}}s._makeCompatibilityCheck=v,s.isCompatible=v(T.VERSION)}),xr=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.unregisterGlobal=s.getGlobal=s.registerGlobal=void 0;var T=jt(),d=co(),v=ho(),_=d.VERSION.split(".")[0],c=Symbol.for("opentelemetry.js.api."+_),l=T._globalThis;function h(y,f,b,w){var S;w===void 0&&(w=!1);var R=l[c]=(S=l[c])!==null&&S!==void 0?S:{version:d.VERSION};if(!w&&R[y]){var A=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+y);return b.error(A.stack||A.message),!1}if(R.version!==d.VERSION){var A=new Error("@opentelemetry/api: All API registration versions must match");return b.error(A.stack||A.message),!1}return R[y]=f,b.debug("@opentelemetry/api: Registered a global for "+y+" v"+d.VERSION+"."),!0}s.registerGlobal=h;function p(y){var f,b,w=(f=l[c])===null||f===void 0?void 0:f.version;if(!(!w||!v.isCompatible(w)))return(b=l[c])===null||b===void 0?void 0:b[y]}s.getGlobal=p;function g(y,f){f.debug("@opentelemetry/api: Unregistering a global for "+y+" v"+d.VERSION+".");var b=l[c];b&&delete b[y]}s.unregisterGlobal=g}),ds=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.DiagComponentLogger=void 0;var T=xr(),d=function(){function _(c){this._namespace=c.namespace||"DiagComponentLogger"}return _.prototype.debug=function(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];return v("debug",this._namespace,c)},_.prototype.error=function(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];return v("error",this._namespace,c)},_.prototype.info=function(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];return v("info",this._namespace,c)},_.prototype.warn=function(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];return v("warn",this._namespace,c)},_.prototype.verbose=function(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];return v("verbose",this._namespace,c)},_}();s.DiagComponentLogger=d;function v(_,c,l){var h=T.getGlobal("diag");if(h)return l.unshift(c),h[_].apply(h,l)}}),li=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.createLogLevelDiagLogger=void 0;var T=Ee();function d(v,_){v<T.DiagLogLevel.NONE?v=T.DiagLogLevel.NONE:v>T.DiagLogLevel.ALL&&(v=T.DiagLogLevel.ALL),_=_||{};function c(l,h){var p=_[l];return typeof p=="function"&&v>=h?p.bind(_):function(){}}return{error:c("error",T.DiagLogLevel.ERROR),warn:c("warn",T.DiagLogLevel.WARN),info:c("info",T.DiagLogLevel.INFO),debug:c("debug",T.DiagLogLevel.DEBUG),verbose:c("verbose",T.DiagLogLevel.VERBOSE)}}s.createLogLevelDiagLogger=d}),er=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.DiagAPI=void 0;var T=ds(),d=li(),v=Ee(),_=xr(),c="diag",l=function(){function h(){function p(y){return function(){var f=_.getGlobal("diag");if(f)return f[y].apply(f,arguments)}}var g=this;g.setLogger=function(y,f){var b,w;if(f===void 0&&(f=v.DiagLogLevel.INFO),y===g){var S=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return g.error((b=S.stack)!==null&&b!==void 0?b:S.message),!1}var R=_.getGlobal("diag"),A=d.createLogLevelDiagLogger(f,y);if(R){var D=(w=new Error().stack)!==null&&w!==void 0?w:"<failed to generate stacktrace>";R.warn("Current logger will be overwritten from "+D),A.warn("Current logger will overwrite one already registered from "+D)}return _.registerGlobal("diag",A,g,!0)},g.disable=function(){_.unregisterGlobal(c,g)},g.createComponentLogger=function(y){return new T.DiagComponentLogger(y)},g.verbose=p("verbose"),g.debug=p("debug"),g.info=p("info"),g.warn=p("warn"),g.error=p("error")}return h.instance=function(){return this._instance||(this._instance=new h),this._instance},h}();s.DiagAPI=l}),Hu=I(s=>{"use strict";var T=s&&s.__spreadArray||function(p,g){for(var y=0,f=g.length,b=p.length;y<f;y++,b++)p[b]=g[y];return p};Object.defineProperty(s,"__esModule",{value:!0}),s.ContextAPI=void 0;var d=ui(),v=xr(),_=er(),c="context",l=new d.NoopContextManager,h=function(){function p(){}return p.getInstance=function(){return this._instance||(this._instance=new p),this._instance},p.prototype.setGlobalContextManager=function(g){return v.registerGlobal(c,g,_.DiagAPI.instance())},p.prototype.active=function(){return this._getContextManager().active()},p.prototype.with=function(g,y,f){for(var b,w=[],S=3;S<arguments.length;S++)w[S-3]=arguments[S];return(b=this._getContextManager()).with.apply(b,T([g,y,f],w))},p.prototype.bind=function(g,y){return this._getContextManager().bind(g,y)},p.prototype._getContextManager=function(){return v.getGlobal(c)||l},p.prototype.disable=function(){this._getContextManager().disable(),v.unregisterGlobal(c,_.DiagAPI.instance())},p}();s.ContextAPI=h}),Bu=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.TraceAPI=void 0;var T=xr(),d=Oi(),v=Rt(),_=Lt(),c=er(),l="trace",h=function(){function p(){this._proxyTracerProvider=new d.ProxyTracerProvider,this.wrapSpanContext=v.wrapSpanContext,this.isSpanContextValid=v.isSpanContextValid,this.deleteSpan=_.deleteSpan,this.getSpan=_.getSpan,this.getSpanContext=_.getSpanContext,this.setSpan=_.setSpan,this.setSpanContext=_.setSpanContext}return p.getInstance=function(){return this._instance||(this._instance=new p),this._instance},p.prototype.setGlobalTracerProvider=function(g){return this._proxyTracerProvider.setDelegate(g),T.registerGlobal(l,this._proxyTracerProvider,c.DiagAPI.instance())},p.prototype.getTracerProvider=function(){return T.getGlobal(l)||this._proxyTracerProvider},p.prototype.getTracer=function(g,y){return this.getTracerProvider().getTracer(g,y)},p.prototype.disable=function(){T.unregisterGlobal(l,c.DiagAPI.instance()),this._proxyTracerProvider=new d.ProxyTracerProvider},p}();s.TraceAPI=h}),po=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.NoopTextMapPropagator=void 0;var T=function(){function d(){}return d.prototype.inject=function(v,_){},d.prototype.extract=function(v,_){return v},d.prototype.fields=function(){return[]},d}();s.NoopTextMapPropagator=T}),ea=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.deleteBaggage=s.setBaggage=s.getBaggage=void 0;var T=it(),d=T.createContextKey("OpenTelemetry Baggage Key");function v(l){return l.getValue(d)||void 0}s.getBaggage=v;function _(l,h){return l.setValue(d,h)}s.setBaggage=_;function c(l){return l.deleteValue(d)}s.deleteBaggage=c}),Yr=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.PropagationAPI=void 0;var T=xr(),d=po(),v=Ue(),_=ea(),c=Q(),l=er(),h="propagation",p=new d.NoopTextMapPropagator,g=function(){function y(){this.createBaggage=c.createBaggage,this.getBaggage=_.getBaggage,this.setBaggage=_.setBaggage,this.deleteBaggage=_.deleteBaggage}return y.getInstance=function(){return this._instance||(this._instance=new y),this._instance},y.prototype.setGlobalPropagator=function(f){return T.registerGlobal(h,f,l.DiagAPI.instance())},y.prototype.inject=function(f,b,w){return w===void 0&&(w=v.defaultTextMapSetter),this._getGlobalPropagator().inject(f,b,w)},y.prototype.extract=function(f,b,w){return w===void 0&&(w=v.defaultTextMapGetter),this._getGlobalPropagator().extract(f,b,w)},y.prototype.fields=function(){return this._getGlobalPropagator().fields()},y.prototype.disable=function(){T.unregisterGlobal(h,l.DiagAPI.instance())},y.prototype._getGlobalPropagator=function(){return T.getGlobal(h)||p},y}();s.PropagationAPI=g}),wt=I(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(g,y,f,b){b===void 0&&(b=f),Object.defineProperty(g,b,{enumerable:!0,get:function(){return y[f]}})}:function(g,y,f,b){b===void 0&&(b=f),g[b]=y[f]}),d=s&&s.__exportStar||function(g,y){for(var f in g)f!=="default"&&!Object.prototype.hasOwnProperty.call(y,f)&&T(y,g,f)};Object.defineProperty(s,"__esModule",{value:!0}),s.diag=s.propagation=s.trace=s.context=s.isValidSpanId=s.isValidTraceId=s.isSpanContextValid=s.INVALID_SPAN_CONTEXT=s.INVALID_TRACEID=s.INVALID_SPANID=s.baggageEntryMetadataFromString=void 0,d(ae(),s);var v=Q();Object.defineProperty(s,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return v.baggageEntryMetadataFromString}}),d(ue(),s),d(fe(),s),d(be(),s),d(Ue(),s),d(ze(),s),d(et(),s),d(Tr(),s),d(Oi(),s),d(cs(),s),d(Di(),s),d(oi(),s),d(qn(),s),d(qt(),s),d(xi(),s),d(Gt(),s),d(At(),s),d(ht(),s),d(or(),s),d(Un(),s);var _=Rt();Object.defineProperty(s,"INVALID_SPANID",{enumerable:!0,get:function(){return _.INVALID_SPANID}}),Object.defineProperty(s,"INVALID_TRACEID",{enumerable:!0,get:function(){return _.INVALID_TRACEID}}),Object.defineProperty(s,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return _.INVALID_SPAN_CONTEXT}}),Object.defineProperty(s,"isSpanContextValid",{enumerable:!0,get:function(){return _.isSpanContextValid}}),Object.defineProperty(s,"isValidTraceId",{enumerable:!0,get:function(){return _.isValidTraceId}}),Object.defineProperty(s,"isValidSpanId",{enumerable:!0,get:function(){return _.isValidSpanId}}),d(it(),s),d($n(),s);var c=Hu();s.context=c.ContextAPI.getInstance();var l=Bu();s.trace=l.TraceAPI.getInstance();var h=Yr();s.propagation=h.PropagationAPI.getInstance();var p=er();s.diag=p.DiagAPI.instance(),s.default={trace:s.trace,context:s.context,propagation:s.propagation,diag:s.diag}}),Li=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.isTracingSuppressed=s.unsuppressTracing=s.suppressTracing=void 0;var T=wt(),d=T.createContextKey("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function v(l){return l.setValue(d,!0)}s.suppressTracing=v;function _(l){return l.deleteValue(d)}s.unsuppressTracing=_;function c(l){return l.getValue(d)===!0}s.isTracingSuppressed=c}),Gn=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.BAGGAGE_MAX_TOTAL_LENGTH=s.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=s.BAGGAGE_MAX_NAME_VALUE_PAIRS=s.BAGGAGE_HEADER=s.BAGGAGE_ITEMS_SEPARATOR=s.BAGGAGE_PROPERTIES_SEPARATOR=s.BAGGAGE_KEY_PAIR_SEPARATOR=void 0,s.BAGGAGE_KEY_PAIR_SEPARATOR="=",s.BAGGAGE_PROPERTIES_SEPARATOR=";",s.BAGGAGE_ITEMS_SEPARATOR=",",s.BAGGAGE_HEADER="baggage",s.BAGGAGE_MAX_NAME_VALUE_PAIRS=180,s.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096,s.BAGGAGE_MAX_TOTAL_LENGTH=8192}),hs=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.parseKeyPairsIntoRecord=s.parsePairKeyValue=s.getKeyPairs=s.serializeKeyPairs=void 0;var T=wt(),d=Gn(),v=h=>h.reduce((p,g)=>{let y=`${p}${p!==""?d.BAGGAGE_ITEMS_SEPARATOR:""}${g}`;return y.length>d.BAGGAGE_MAX_TOTAL_LENGTH?p:y},"");s.serializeKeyPairs=v;var _=h=>h.getAllEntries().map(([p,g])=>`${encodeURIComponent(p)}=${encodeURIComponent(g.value)}`);s.getKeyPairs=_;var c=h=>{let p=h.split(d.BAGGAGE_PROPERTIES_SEPARATOR);if(p.length<=0)return;let g=p.shift();if(!g)return;let y=g.split(d.BAGGAGE_KEY_PAIR_SEPARATOR);if(y.length!==2)return;let f=decodeURIComponent(y[0].trim()),b=decodeURIComponent(y[1].trim()),w;return p.length>0&&(w=T.baggageEntryMetadataFromString(p.join(d.BAGGAGE_PROPERTIES_SEPARATOR))),{key:f,value:b,metadata:w}};s.parsePairKeyValue=c;var l=h=>typeof h!="string"||h.length===0?{}:h.split(d.BAGGAGE_ITEMS_SEPARATOR).map(p=>s.parsePairKeyValue(p)).filter(p=>p!==void 0&&p.value.length>0).reduce((p,g)=>(p[g.key]=g.value,p),{});s.parseKeyPairsIntoRecord=l}),Hn=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.HttpBaggagePropagator=void 0;var T=wt(),d=Li(),v=Gn(),_=hs(),c=class{inject(l,h,p){let g=T.propagation.getBaggage(l);if(!g||d.isTracingSuppressed(l))return;let y=_.getKeyPairs(g).filter(b=>b.length<=v.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS).slice(0,v.BAGGAGE_MAX_NAME_VALUE_PAIRS),f=_.serializeKeyPairs(y);f.length>0&&p.set(h,v.BAGGAGE_HEADER,f)}extract(l,h,p){let g=p.get(h,v.BAGGAGE_HEADER);if(!g)return l;let y={};return g.length===0||(g.split(v.BAGGAGE_ITEMS_SEPARATOR).forEach(f=>{let b=_.parsePairKeyValue(f);if(b){let w={value:b.value};b.metadata&&(w.metadata=b.metadata),y[b.key]=w}}),Object.entries(y).length===0)?l:T.propagation.setBaggage(l,T.propagation.createBaggage(y))}fields(){return[v.BAGGAGE_HEADER]}};s.HttpBaggagePropagator=c}),Vu=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.isAttributeValue=s.sanitizeAttributes=void 0;function T(c){let l={};if(c==null||typeof c!="object")return l;for(let[h,p]of Object.entries(c))d(p)&&(Array.isArray(p)?l[h]=p.slice():l[h]=p);return l}s.sanitizeAttributes=T;function d(c){return c==null?!0:Array.isArray(c)?v(c):_(c)}s.isAttributeValue=d;function v(c){let l;for(let h of c)if(h!=null){if(!l){if(_(h)){l=typeof h;continue}return!1}if(typeof h!==l)return!1}return!0}function _(c){switch(typeof c){case"number":return!0;case"boolean":return!0;case"string":return!0}return!1}}),mo=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.loggingErrorHandler=void 0;var T=wt();function d(){return c=>{T.diag.error(v(c))}}s.loggingErrorHandler=d;function v(c){return typeof c=="string"?c:JSON.stringify(_(c))}function _(c){let l={},h=c;for(;h!==null;)Object.getOwnPropertyNames(h).forEach(p=>{if(l[p])return;let g=h[p];g&&(l[p]=String(g))}),h=Object.getPrototypeOf(h);return l}}),wn=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.globalErrorHandler=s.setGlobalErrorHandler=void 0;var T=mo(),d=T.loggingErrorHandler();function v(c){d=c}s.setGlobalErrorHandler=v;var _=c=>{try{d(c)}catch(l){}};s.globalErrorHandler=_}),ps=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.TracesSamplerValues=void 0;var T;(function(d){d.AlwaysOff="always_off",d.AlwaysOn="always_on",d.ParentBasedAlwaysOff="parentbased_always_off",d.ParentBasedAlwaysOn="parentbased_always_on",d.ParentBasedTraceIdRatio="parentbased_traceidratio",d.TraceIdRatio="traceidratio"})(T=s.TracesSamplerValues||(s.TracesSamplerValues={}))}),ta=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.parseEnvironment=s.DEFAULT_ENVIRONMENT=void 0;var T=wt(),d=ps(),v=",",_=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT"];function c(w){return _.indexOf(w)>-1}var l=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function h(w){return l.indexOf(w)>-1}s.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:T.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:d.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:""};function p(w,S,R,A=-1/0,D=1/0){if(typeof R[w]!="undefined"){let j=Number(R[w]);isNaN(j)||(j<A?S[w]=A:j>D?S[w]=D:S[w]=j)}}function g(w,S,R,A=v){let D=R[w];typeof D=="string"&&(S[w]=D.split(A).map(j=>j.trim()))}var y={ALL:T.DiagLogLevel.ALL,VERBOSE:T.DiagLogLevel.VERBOSE,DEBUG:T.DiagLogLevel.DEBUG,INFO:T.DiagLogLevel.INFO,WARN:T.DiagLogLevel.WARN,ERROR:T.DiagLogLevel.ERROR,NONE:T.DiagLogLevel.NONE};function f(w,S,R){let A=R[w];if(typeof A=="string"){let D=y[A.toUpperCase()];D!=null&&(S[w]=D)}}function b(w){let S={};for(let R in s.DEFAULT_ENVIRONMENT){let A=R;switch(A){case"OTEL_LOG_LEVEL":f(A,S,w);break;default:if(c(A))p(A,S,w);else if(h(A))g(A,S,w);else{let D=w[A];typeof D!="undefined"&&D!==null&&(S[A]=String(D))}}}return S}s.parseEnvironment=b}),fo=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.getEnv=void 0;var T=M(2087),d=ta();function v(){let _=d.parseEnvironment(process.env);return Object.assign({HOSTNAME:T.hostname()},d.DEFAULT_ENVIRONMENT,_)}s.getEnv=v}),go=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.hexToBase64=void 0;function T(d){let v=d.length,_="";for(let c=0;c<v;c+=2){let l=d.substring(c,c+2),h=parseInt(l,16);_+=String.fromCharCode(h)}return Buffer.from(_,"ascii").toString("base64")}s.hexToBase64=T}),ci=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.RandomIdGenerator=void 0;var T=8,d=16,v=class{constructor(){this.generateTraceId=c(d),this.generateSpanId=c(T)}};s.RandomIdGenerator=v;var _=Buffer.allocUnsafe(d);function c(l){return function(){for(let h=0;h<l/4;h++)_.writeUInt32BE(Math.random()*2**32>>>0,h*4);for(let h=0;h<l&&!(_[h]>0);h++)h===l-1&&(_[l-1]=1);return _.toString("hex",0,l)}}}),vo=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.otperformance=void 0;var T=M(630);s.otperformance=T.performance}),ra=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.VERSION=void 0,s.VERSION="0.23.0"}),ju=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.RpcGrpcStatusCodeValues=s.MessagingOperationValues=s.MessagingDestinationKindValues=s.HttpFlavorValues=s.NetTransportValues=s.FaasInvokedProviderValues=s.FaasDocumentOperationValues=s.FaasTriggerValues=s.DbCassandraConsistencyLevelValues=s.DbSystemValues=s.SemanticAttributes=void 0,s.SemanticAttributes={DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_METHOD:"rpc.jsonrpc.method",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message"};var T;(function(f){f.OTHER_SQL="other_sql",f.MSSQL="mssql",f.MYSQL="mysql",f.ORACLE="oracle",f.DB2="db2",f.POSTGRESQL="postgresql",f.REDSHIFT="redshift",f.HIVE="hive",f.CLOUDSCAPE="cloudscape",f.HSQLDB="hsqldb",f.PROGRESS="progress",f.MAXDB="maxdb",f.HANADB="hanadb",f.INGRES="ingres",f.FIRSTSQL="firstsql",f.EDB="edb",f.CACHE="cache",f.ADABAS="adabas",f.FIREBIRD="firebird",f.DERBY="derby",f.FILEMAKER="filemaker",f.INFORMIX="informix",f.INSTANTDB="instantdb",f.INTERBASE="interbase",f.MARIADB="mariadb",f.NETEZZA="netezza",f.PERVASIVE="pervasive",f.POINTBASE="pointbase",f.SQLITE="sqlite",f.SYBASE="sybase",f.TERADATA="teradata",f.VERTICA="vertica",f.H2="h2",f.COLDFUSION="coldfusion",f.CASSANDRA="cassandra",f.HBASE="hbase",f.MONGODB="mongodb",f.REDIS="redis",f.COUCHBASE="couchbase",f.COUCHDB="couchdb",f.COSMOSDB="cosmosdb",f.DYNAMODB="dynamodb",f.NEO4J="neo4j",f.GEODE="geode",f.ELASTICSEARCH="elasticsearch",f.MEMCACHED="memcached",f.COCKROACHDB="cockroachdb"})(T=s.DbSystemValues||(s.DbSystemValues={}));var d;(function(f){f.ALL="all",f.EACH_QUORUM="each_quorum",f.QUORUM="quorum",f.LOCAL_QUORUM="local_quorum",f.ONE="one",f.TWO="two",f.THREE="three",f.LOCAL_ONE="local_one",f.ANY="any",f.SERIAL="serial",f.LOCAL_SERIAL="local_serial"})(d=s.DbCassandraConsistencyLevelValues||(s.DbCassandraConsistencyLevelValues={}));var v;(function(f){f.DATASOURCE="datasource",f.HTTP="http",f.PUBSUB="pubsub",f.TIMER="timer",f.OTHER="other"})(v=s.FaasTriggerValues||(s.FaasTriggerValues={}));var _;(function(f){f.INSERT="insert",f.EDIT="edit",f.DELETE="delete"})(_=s.FaasDocumentOperationValues||(s.FaasDocumentOperationValues={}));var c;(function(f){f.AWS="aws",f.AZURE="azure",f.GCP="gcp"})(c=s.FaasInvokedProviderValues||(s.FaasInvokedProviderValues={}));var l;(function(f){f.IP_TCP="ip_tcp",f.IP_UDP="ip_udp",f.IP="ip",f.UNIX="unix",f.PIPE="pipe",f.INPROC="inproc",f.OTHER="other"})(l=s.NetTransportValues||(s.NetTransportValues={}));var h;(function(f){f.HTTP_1_0="1.0",f.HTTP_1_1="1.1",f.HTTP_2_0="2.0",f.SPDY="SPDY",f.QUIC="QUIC"})(h=s.HttpFlavorValues||(s.HttpFlavorValues={}));var p;(function(f){f.QUEUE="queue",f.TOPIC="topic"})(p=s.MessagingDestinationKindValues||(s.MessagingDestinationKindValues={}));var g;(function(f){f.RECEIVE="receive",f.PROCESS="process"})(g=s.MessagingOperationValues||(s.MessagingOperationValues={}));var y;(function(f){f[f.OK=0]="OK",f[f.CANCELLED=1]="CANCELLED",f[f.UNKNOWN=2]="UNKNOWN",f[f.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",f[f.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",f[f.NOT_FOUND=5]="NOT_FOUND",f[f.ALREADY_EXISTS=6]="ALREADY_EXISTS",f[f.PERMISSION_DENIED=7]="PERMISSION_DENIED",f[f.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",f[f.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",f[f.ABORTED=10]="ABORTED",f[f.OUT_OF_RANGE=11]="OUT_OF_RANGE",f[f.UNIMPLEMENTED=12]="UNIMPLEMENTED",f[f.INTERNAL=13]="INTERNAL",f[f.UNAVAILABLE=14]="UNAVAILABLE",f[f.DATA_LOSS=15]="DATA_LOSS",f[f.UNAUTHENTICATED=16]="UNAUTHENTICATED"})(y=s.RpcGrpcStatusCodeValues||(s.RpcGrpcStatusCodeValues={}))}),Ct=I(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(ju(),s)}),Rr=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.TelemetrySdkLanguageValues=s.OsTypeValues=s.HostArchValues=s.AwsEcsLaunchtypeValues=s.CloudPlatformValues=s.CloudProviderValues=s.ResourceAttributes=void 0,s.ResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"};var T;(function(h){h.AWS="aws",h.AZURE="azure",h.GCP="gcp"})(T=s.CloudProviderValues||(s.CloudProviderValues={}));var d;(function(h){h.AWS_EC2="aws_ec2",h.AWS_ECS="aws_ecs",h.AWS_EKS="aws_eks",h.AWS_LAMBDA="aws_lambda",h.AWS_ELASTIC_BEANSTALK="aws_elastic_beanstalk",h.AZURE_VM="azure_vm",h.AZURE_CONTAINER_INSTANCES="azure_container_instances",h.AZURE_AKS="azure_aks",h.AZURE_FUNCTIONS="azure_functions",h.AZURE_APP_SERVICE="azure_app_service",h.GCP_COMPUTE_ENGINE="gcp_compute_engine",h.GCP_CLOUD_RUN="gcp_cloud_run",h.GCP_KUBERNETES_ENGINE="gcp_kubernetes_engine",h.GCP_CLOUD_FUNCTIONS="gcp_cloud_functions",h.GCP_APP_ENGINE="gcp_app_engine"})(d=s.CloudPlatformValues||(s.CloudPlatformValues={}));var v;(function(h){h.EC2="ec2",h.FARGATE="fargate"})(v=s.AwsEcsLaunchtypeValues||(s.AwsEcsLaunchtypeValues={}));var _;(function(h){h.AMD64="amd64",h.ARM32="arm32",h.ARM64="arm64",h.IA64="ia64",h.PPC32="ppc32",h.PPC64="ppc64",h.X86="x86"})(_=s.HostArchValues||(s.HostArchValues={}));var c;(function(h){h.WINDOWS="windows",h.LINUX="linux",h.DARWIN="darwin",h.FREEBSD="freebsd",h.NETBSD="netbsd",h.OPENBSD="openbsd",h.DRAGONFLYBSD="dragonflybsd",h.HPUX="hpux",h.AIX="aix",h.SOLARIS="solaris",h.Z_OS="z_os"})(c=s.OsTypeValues||(s.OsTypeValues={}));var l;(function(h){h.CPP="cpp",h.DOTNET="dotnet",h.ERLANG="erlang",h.GO="go",h.JAVA="java",h.NODEJS="nodejs",h.PHP="php",h.PYTHON="python",h.RUBY="ruby",h.WEBJS="webjs"})(l=s.TelemetrySdkLanguageValues||(s.TelemetrySdkLanguageValues={}))}),Ye=I(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(Rr(),s)}),di=I(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(Ct(),s),d(Ye(),s)}),yo=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.SDK_INFO=void 0;var T=ra(),d=di();s.SDK_INFO={[d.ResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[d.ResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[d.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:d.TelemetrySdkLanguageValues.NODEJS,[d.ResourceAttributes.TELEMETRY_SDK_VERSION]:T.VERSION}}),zu=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.unrefTimer=void 0;function T(d){d.unref()}s.unrefTimer=T}),Qu=I(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(fo(),s),d(go(),s),d(ci(),s),d(vo(),s),d(yo(),s),d(zu(),s)}),vr=I(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(Qu(),s)}),bo=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.isTimeInput=s.isTimeInputHrTime=s.hrTimeToMicroseconds=s.hrTimeToMilliseconds=s.hrTimeToNanoseconds=s.hrTimeToTimeStamp=s.hrTimeDuration=s.timeInputToHrTime=s.hrTime=void 0;var T=vr(),d=9,v=Math.pow(10,d);function _(R){let A=R/1e3,D=Math.trunc(A),j=Number((A-D).toFixed(d))*v;return[D,j]}function c(){let R=T.otperformance.timeOrigin;if(typeof R!="number"){let A=T.otperformance;R=A.timing&&A.timing.fetchStart}return R}function l(R){let A=_(c()),D=_(typeof R=="number"?R:T.otperformance.now()),j=A[0]+D[0],ee=A[1]+D[1];return ee>v&&(ee-=v,j+=1),[j,ee]}s.hrTime=l;function h(R){if(w(R))return R;if(typeof R=="number")return R<c()?l(R):_(R);if(R instanceof Date)return _(R.getTime());throw TypeError("Invalid input type")}s.timeInputToHrTime=h;function p(R,A){let D=A[0]-R[0],j=A[1]-R[1];return j<0&&(D-=1,j+=v),[D,j]}s.hrTimeDuration=p;function g(R){let A=d,D=`${"0".repeat(A)}${R[1]}Z`,j=D.substr(D.length-A-1);return new Date(R[0]*1e3).toISOString().replace("000Z",j)}s.hrTimeToTimeStamp=g;function y(R){return R[0]*v+R[1]}s.hrTimeToNanoseconds=y;function f(R){return Math.round(R[0]*1e3+R[1]/1e6)}s.hrTimeToMilliseconds=f;function b(R){return Math.round(R[0]*1e6+R[1]/1e3)}s.hrTimeToMicroseconds=b;function w(R){return Array.isArray(R)&&R.length===2&&typeof R[0]=="number"&&typeof R[1]=="number"}s.isTimeInputHrTime=w;function S(R){return w(R)||typeof R=="number"||R instanceof Date}s.isTimeInput=S}),Wu=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Ku=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.ExportResultCode=void 0;var T;(function(d){d[d.SUCCESS=0]="SUCCESS",d[d.FAILED=1]="FAILED"})(T=s.ExportResultCode||(s.ExportResultCode={}))}),_o=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.CompositePropagator=void 0;var T=wt(),d=class{constructor(v={}){var _;this._propagators=(_=v.propagators)!==null&&_!==void 0?_:[],this._fields=Array.from(new Set(this._propagators.map(c=>typeof c.fields=="function"?c.fields():[]).reduce((c,l)=>c.concat(l),[])))}inject(v,_,c){for(let l of this._propagators)try{l.inject(v,_,c)}catch(h){T.diag.warn(`Failed to inject with ${l.constructor.name}. Err: ${h.message}`)}}extract(v,_,c){return this._propagators.reduce((l,h)=>{try{return h.extract(l,_,c)}catch(p){T.diag.warn(`Failed to inject with ${h.constructor.name}. Err: ${p.message}`)}return l},v)}fields(){return this._fields.slice()}};s.CompositePropagator=d}),Yu=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.validateValue=s.validateKey=void 0;var T="[_0-9a-z-*/]",d=`[a-z]${T}{0,255}`,v=`[a-z0-9]${T}{0,240}@[a-z]${T}{0,13}`,_=new RegExp(`^(?:${d}|${v})$`),c=/^[ -~]{0,255}[!-~]$/,l=/,|=/;function h(g){return _.test(g)}s.validateKey=h;function p(g){return c.test(g)&&!l.test(g)}s.validateValue=p}),wo=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.TraceState=void 0;var T=Yu(),d=32,v=512,_=",",c="=",l=class{constructor(h){this._internalState=new Map,h&&this._parse(h)}set(h,p){let g=this._clone();return g._internalState.has(h)&&g._internalState.delete(h),g._internalState.set(h,p),g}unset(h){let p=this._clone();return p._internalState.delete(h),p}get(h){return this._internalState.get(h)}serialize(){return this._keys().reduce((h,p)=>(h.push(p+c+this.get(p)),h),[]).join(_)}_parse(h){h.length>v||(this._internalState=h.split(_).reverse().reduce((p,g)=>{let y=g.trim(),f=y.indexOf(c);if(f!==-1){let b=y.slice(0,f),w=y.slice(f+1,g.length);T.validateKey(b)&&T.validateValue(w)&&p.set(b,w)}return p},new Map),this._internalState.size>d&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,d))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let h=new l;return h._internalState=new Map(this._internalState),h}};s.TraceState=l}),qi=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.HttpTraceContextPropagator=s.parseTraceParent=s.TRACE_STATE_HEADER=s.TRACE_PARENT_HEADER=void 0;var T=wt(),d=Li(),v=wo();s.TRACE_PARENT_HEADER="traceparent",s.TRACE_STATE_HEADER="tracestate";var _="00",c="(?!ff)[\\da-f]{2}",l="(?![0]{32})[\\da-f]{32}",h="(?![0]{16})[\\da-f]{16}",p="[\\da-f]{2}",g=new RegExp(`^\\s?(${c})-(${l})-(${h})-(${p})(-.*)?\\s?$`);function y(b){let w=g.exec(b);return!w||w[1]==="00"&&w[5]?null:{traceId:w[2],spanId:w[3],traceFlags:parseInt(w[4],16)}}s.parseTraceParent=y;var f=class{inject(b,w,S){let R=T.trace.getSpanContext(b);if(!R||d.isTracingSuppressed(b)||!T.isSpanContextValid(R))return;let A=`${_}-${R.traceId}-${R.spanId}-0${Number(R.traceFlags||T.TraceFlags.NONE).toString(16)}`;S.set(w,s.TRACE_PARENT_HEADER,A),R.traceState&&S.set(w,s.TRACE_STATE_HEADER,R.traceState.serialize())}extract(b,w,S){let R=S.get(w,s.TRACE_PARENT_HEADER);if(!R)return b;let A=Array.isArray(R)?R[0]:R;if(typeof A!="string")return b;let D=y(A);if(!D)return b;D.isRemote=!0;let j=S.get(w,s.TRACE_STATE_HEADER);if(j){let ee=Array.isArray(j)?j.join(","):j;D.traceState=new v.TraceState(typeof ee=="string"?ee:void 0)}return T.trace.setSpanContext(b,D)}fields(){return[s.TRACE_PARENT_HEADER,s.TRACE_STATE_HEADER]}};s.HttpTraceContextPropagator=f}),na=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Xu=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.getRPCMetadata=s.deleteRPCMetadata=s.setRPCMetadata=s.RPCType=void 0;var T=wt(),d=T.createContextKey("OpenTelemetry SDK Context Key RPC_METADATA"),v;(function(h){h.HTTP="http"})(v=s.RPCType||(s.RPCType={}));function _(h,p){return h.setValue(d,p)}s.setRPCMetadata=_;function c(h){return h.deleteValue(d)}s.deleteRPCMetadata=c;function l(h){return h.getValue(d)}s.getRPCMetadata=l}),ms=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.AlwaysOffSampler=void 0;var T=wt(),d=class{shouldSample(){return{decision:T.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}};s.AlwaysOffSampler=d}),fs=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.AlwaysOnSampler=void 0;var T=wt(),d=class{shouldSample(){return{decision:T.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}};s.AlwaysOnSampler=d}),Ju=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.ParentBasedSampler=void 0;var T=wt(),d=wn(),v=ms(),_=fs(),c=class{constructor(l){var h,p,g,y;this._root=l.root,this._root||(d.globalErrorHandler(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new _.AlwaysOnSampler),this._remoteParentSampled=(h=l.remoteParentSampled)!==null&&h!==void 0?h:new _.AlwaysOnSampler,this._remoteParentNotSampled=(p=l.remoteParentNotSampled)!==null&&p!==void 0?p:new v.AlwaysOffSampler,this._localParentSampled=(g=l.localParentSampled)!==null&&g!==void 0?g:new _.AlwaysOnSampler,this._localParentNotSampled=(y=l.localParentNotSampled)!==null&&y!==void 0?y:new v.AlwaysOffSampler}shouldSample(l,h,p,g,y,f){let b=T.trace.getSpanContext(l);return!b||!T.isSpanContextValid(b)?this._root.shouldSample(l,h,p,g,y,f):b.isRemote?b.traceFlags&T.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(l,h,p,g,y,f):this._remoteParentNotSampled.shouldSample(l,h,p,g,y,f):b.traceFlags&T.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(l,h,p,g,y,f):this._localParentNotSampled.shouldSample(l,h,p,g,y,f)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}};s.ParentBasedSampler=c}),Zu=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.TraceIdRatioBasedSampler=void 0;var T=wt(),d=class{constructor(v=0){this._ratio=v,this._ratio=this._normalize(v),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(v,_){return{decision:T.isValidTraceId(_)&&this._accumulate(_)<this._upperBound?T.SamplingDecision.RECORD_AND_SAMPLED:T.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(v){return typeof v!="number"||isNaN(v)?0:v>=1?1:v<=0?0:v}_accumulate(v){let _=0;for(let c=0;c<v.length/8;c++){let l=c*8,h=parseInt(v.slice(l,l+8),16);_=(_^h)>>>0}return _}};s.TraceIdRatioBasedSampler=d}),el=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.isUrlIgnored=s.urlMatches=void 0;function T(v,_){return typeof _=="string"?v===_:_.test(v)}s.urlMatches=T;function d(v,_){if(!_)return!1;for(let c of _)if(T(v,c))return!0;return!1}s.isUrlIgnored=d}),tl=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.isWrapped=void 0;function T(d){return typeof d=="function"&&typeof d.__original=="function"&&typeof d.__unwrap=="function"&&d.__wrapped===!0}s.isWrapped=T}),Mr=I(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),s.baggageUtils=void 0,d(Hn(),s),d(Vu(),s),d(wn(),s),d(mo(),s),d(bo(),s),d(Wu(),s),d(Ku(),s),d(ra(),s),s.baggageUtils=hs(),d(vr(),s),d(_o(),s),d(qi(),s),d(na(),s),d(Xu(),s),d(ms(),s),d(fs(),s),d(Ju(),s),d(Zu(),s),d(Li(),s),d(wo(),s),d(ta(),s),d(ps(),s),d(el(),s),d(tl(),s),d(ra(),s)}),rl=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.ExceptionEventName=void 0,s.ExceptionEventName="exception"}),Eo=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.Span=void 0;var T=wt(),d=Mr(),v=di(),_=rl(),c=class{constructor(l,h,p,g,y,f,b=[],w=d.hrTime()){this.attributes={},this.links=[],this.events=[],this.status={code:T.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=p,this._spanContext=g,this.parentSpanId=f,this.kind=y,this.links=b,this.startTime=d.timeInputToHrTime(w),this.resource=l.resource,this.instrumentationLibrary=l.instrumentationLibrary,this._spanLimits=l.getSpanLimits(),this._spanProcessor=l.getActiveSpanProcessor(),this._spanProcessor.onStart(this,h)}spanContext(){return this._spanContext}setAttribute(l,h){return h==null||this._isSpanEnded()?this:l.length===0?(T.diag.warn(`Invalid attribute key: ${l}`),this):d.isAttributeValue(h)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,l)?this:(this.attributes[l]=h,this):(T.diag.warn(`Invalid attribute value set for key: ${l}`),this)}setAttributes(l){for(let[h,p]of Object.entries(l))this.setAttribute(h,p);return this}addEvent(l,h,p){return this._isSpanEnded()?this:(this.events.length>=this._spanLimits.eventCountLimit&&(T.diag.warn("Dropping extra events."),this.events.shift()),d.isTimeInput(h)&&(typeof p=="undefined"&&(p=h),h=void 0),typeof p=="undefined"&&(p=d.hrTime()),this.events.push({name:l,attributes:h,time:d.timeInputToHrTime(p)}),this)}setStatus(l){return this._isSpanEnded()?this:(this.status=l,this)}updateName(l){return this._isSpanEnded()?this:(this.name=l,this)}end(l=d.hrTime()){if(this._isSpanEnded()){T.diag.error("You can only call end() on a span once.");return}this._ended=!0,this.endTime=d.timeInputToHrTime(l),this._duration=d.hrTimeDuration(this.startTime,this.endTime),this._duration[0]<0&&T.diag.warn("Inconsistent start and end time, startTime > endTime",this.startTime,this.endTime),this._spanProcessor.onEnd(this)}isRecording(){return this._ended===!1}recordException(l,h=d.hrTime()){let p={};typeof l=="string"?p[v.SemanticAttributes.EXCEPTION_MESSAGE]=l:l&&(l.code?p[v.SemanticAttributes.EXCEPTION_TYPE]=l.code.toString():l.name&&(p[v.SemanticAttributes.EXCEPTION_TYPE]=l.name),l.message&&(p[v.SemanticAttributes.EXCEPTION_MESSAGE]=l.message),l.stack&&(p[v.SemanticAttributes.EXCEPTION_STACKTRACE]=l.stack)),p[v.SemanticAttributes.EXCEPTION_TYPE]||p[v.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(_.ExceptionEventName,p,h):T.diag.warn(`Failed to record an exception ${l}`)}get duration(){return this._duration}get ended(){return this._ended}_isSpanEnded(){return this._ended&&T.diag.warn("Can not execute the operation on ended Span {traceId: %s, spanId: %s}",this._spanContext.traceId,this._spanContext.spanId),this._ended}};s.Span=c}),ia=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.buildSamplerFromEnv=s.DEFAULT_CONFIG=void 0;var T=wt(),d=Mr(),v=d.getEnv(),_=d.TracesSamplerValues.AlwaysOn;s.DEFAULT_CONFIG={sampler:c(v),forceFlushTimeoutMillis:3e4,spanLimits:{attributeCountLimit:d.getEnv().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:d.getEnv().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:d.getEnv().OTEL_SPAN_EVENT_COUNT_LIMIT}};function c(p=d.getEnv()){switch(p.OTEL_TRACES_SAMPLER){case d.TracesSamplerValues.AlwaysOn:return new d.AlwaysOnSampler;case d.TracesSamplerValues.AlwaysOff:return new d.AlwaysOffSampler;case d.TracesSamplerValues.ParentBasedAlwaysOn:return new d.ParentBasedSampler({root:new d.AlwaysOnSampler});case d.TracesSamplerValues.ParentBasedAlwaysOff:return new d.ParentBasedSampler({root:new d.AlwaysOffSampler});case d.TracesSamplerValues.TraceIdRatio:return new d.TraceIdRatioBasedSampler(h(p));case d.TracesSamplerValues.ParentBasedTraceIdRatio:return new d.ParentBasedSampler({root:new d.TraceIdRatioBasedSampler(h(p))});default:return T.diag.error(`OTEL_TRACES_SAMPLER value "${p.OTEL_TRACES_SAMPLER} invalid, defaulting to ${_}".`),new d.AlwaysOnSampler}}s.buildSamplerFromEnv=c;var l=1;function h(p){if(p.OTEL_TRACES_SAMPLER_ARG===void 0||p.OTEL_TRACES_SAMPLER_ARG==="")return T.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${l}.`),l;let g=Number(p.OTEL_TRACES_SAMPLER_ARG);return isNaN(g)?(T.diag.error(`OTEL_TRACES_SAMPLER_ARG=${p.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${l}.`),l):g<0||g>1?(T.diag.error(`OTEL_TRACES_SAMPLER_ARG=${p.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${l}.`),l):g}}),ld=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.mergeConfig=void 0;var T=ia();function d(v){let _={sampler:T.buildSamplerFromEnv()},c=Object.assign({},T.DEFAULT_CONFIG,_,v);return c.spanLimits=Object.assign({},T.DEFAULT_CONFIG.spanLimits,v.spanLimits||{}),c}s.mergeConfig=d}),gs=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.Tracer=void 0;var T=wt(),d=Mr(),v=Eo(),_=ld(),c=class{constructor(h,p,g){this._tracerProvider=g;let y=_.mergeConfig(p);this._sampler=y.sampler,this._spanLimits=y.spanLimits,this._idGenerator=p.idGenerator||new d.RandomIdGenerator,this.resource=g.resource,this.instrumentationLibrary=h}startSpan(h,p={},g=T.context.active()){var y,f;if(d.isTracingSuppressed(g))return T.diag.debug("Instrumentation suppressed, returning Noop Span"),T.trace.wrapSpanContext(T.INVALID_SPAN_CONTEXT);let b=l(p,g),w=this._idGenerator.generateSpanId(),S,R,A;!b||!T.trace.isSpanContextValid(b)?S=this._idGenerator.generateTraceId():(S=b.traceId,R=b.traceState,A=b.spanId);let D=(y=p.kind)!==null&&y!==void 0?y:T.SpanKind.INTERNAL,j=(f=p.links)!==null&&f!==void 0?f:[],ee=d.sanitizeAttributes(p.attributes),K=this._sampler.shouldSample(p.root?T.trace.setSpanContext(g,T.INVALID_SPAN_CONTEXT):g,S,h,D,ee,j),oe=K.decision===T.SamplingDecision.RECORD_AND_SAMPLED?T.TraceFlags.SAMPLED:T.TraceFlags.NONE,ge={traceId:S,spanId:w,traceFlags:oe,traceState:R};if(K.decision===T.SamplingDecision.NOT_RECORD)return T.diag.debug("Recording is off, propagating context in a non-recording span"),T.trace.wrapSpanContext(ge);let ke=new v.Span(this,g,h,ge,D,A,j,p.startTime);return ke.setAttributes(Object.assign(ee,K.attributes)),ke}startActiveSpan(h,p,g,y){let f,b,w;if(arguments.length<2)return;arguments.length===2?w=p:arguments.length===3?(f=p,w=g):(f=p,b=g,w=y);let S=b!=null?b:T.context.active(),R=this.startSpan(h,f,S),A=T.trace.setSpan(S,R);return T.context.with(A,w,void 0,R)}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}};s.Tracer=c;function l(h,p){if(!h.root)return T.trace.getSpanContext(p)}}),sa=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.defaultServiceName=void 0;function T(){return`unknown_service:${process.argv0}`}s.defaultServiceName=T}),aa=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.detectResources=void 0;var T=vs(),d=wt(),v=M(1669),_=async(l={})=>{let h=Object.assign(l),p=await Promise.all((h.detectors||[]).map(async g=>{try{let y=await g.detect(h);return d.diag.debug(`${g.constructor.name} found resource.`,y),y}catch(y){return d.diag.debug(`${g.constructor.name} failed: ${y.message}`),T.Resource.empty()}}));return c(p),p.reduce((g,y)=>g.merge(y),T.Resource.empty())};s.detectResources=_;var c=l=>{l.forEach(h=>{if(Object.keys(h.attributes).length>0){let p=v.inspect(h.attributes,{depth:2,breakLength:1/0,sorted:!0,compact:!1});d.diag.verbose(p)}})}}),ko=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.envDetector=void 0;var T=wt(),d=Mr(),v=di(),_=la(),c=class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}async detect(l){let h={},p=d.getEnv(),g=p.OTEL_RESOURCE_ATTRIBUTES,y=p.OTEL_SERVICE_NAME;if(g)try{let f=this._parseResourceAttributes(g);Object.assign(h,f)}catch(f){T.diag.debug(`EnvDetector failed: ${f.message}`)}return y&&(h[v.ResourceAttributes.SERVICE_NAME]=y),new _.Resource(h)}_parseResourceAttributes(l){if(!l)return{};let h={},p=l.split(this._COMMA_SEPARATOR,-1);for(let g of p){let y=g.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(y.length!==2)continue;let[f,b]=y;if(f=f.trim(),b=b.trim().split('^"|"$').join(""),!this._isValidAndNotEmpty(f))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(b))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);h[f]=b}return h}_isValid(l){return l.length<=this._MAX_LENGTH&&this._isPrintableString(l)}_isPrintableString(l){for(let h=0;h<l.length;h++){let p=l.charAt(h);if(p<=" "||p>="~")return!1}return!0}_isValidAndNotEmpty(l){return l.length>0&&this._isValid(l)}};s.envDetector=new c}),oa=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.processDetector=void 0;var T=wt(),d=di(),v=la(),_=class{async detect(c){let l={[d.ResourceAttributes.PROCESS_PID]:process.pid,[d.ResourceAttributes.PROCESS_EXECUTABLE_NAME]:process.title||"",[d.ResourceAttributes.PROCESS_COMMAND]:process.argv[1]||"",[d.ResourceAttributes.PROCESS_COMMAND_LINE]:process.argv.join(" ")||""};return this._getResourceAttributes(l,c)}_getResourceAttributes(c,l){return c[d.ResourceAttributes.PROCESS_EXECUTABLE_NAME]===""||c[d.ResourceAttributes.PROCESS_EXECUTABLE_PATH]===""||c[d.ResourceAttributes.PROCESS_COMMAND]===""||c[d.ResourceAttributes.PROCESS_COMMAND_LINE]===""?(T.diag.debug("ProcessDetector failed: Unable to find required process resources. "),v.Resource.empty()):new v.Resource(Object.assign({},c))}};s.processDetector=new _}),nl=I(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(ko(),s),d(oa(),s)}),So=I(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(sa(),s),d(aa(),s),d(nl(),s)}),ua=I(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(So(),s)}),vs=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.Resource=void 0;var T=di(),d=Mr(),v=ua(),_=class{constructor(c){this.attributes=c}static empty(){return _.EMPTY}static default(){return new _({[T.ResourceAttributes.SERVICE_NAME]:v.defaultServiceName(),[T.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:d.SDK_INFO[T.ResourceAttributes.TELEMETRY_SDK_LANGUAGE],[T.ResourceAttributes.TELEMETRY_SDK_NAME]:d.SDK_INFO[T.ResourceAttributes.TELEMETRY_SDK_NAME],[T.ResourceAttributes.TELEMETRY_SDK_VERSION]:d.SDK_INFO[T.ResourceAttributes.TELEMETRY_SDK_VERSION]})}merge(c){if(!c||!Object.keys(c.attributes).length)return this;let l=Object.assign({},this.attributes,c.attributes);return new _(l)}};s.Resource=_,_.EMPTY=new _({})}),il=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),sl=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),la=I(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(vs(),s),d(ua(),s),d(il(),s),d(sl(),s)}),Ui=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.MultiSpanProcessor=void 0;var T=Mr(),d=class{constructor(v){this._spanProcessors=v}forceFlush(){let v=[];for(let _ of this._spanProcessors)v.push(_.forceFlush());return new Promise(_=>{Promise.all(v).then(()=>{_()}).catch(c=>{T.globalErrorHandler(c||new Error("MultiSpanProcessor: forceFlush failed")),_()})})}onStart(v,_){for(let c of this._spanProcessors)c.onStart(v,_)}onEnd(v){for(let _ of this._spanProcessors)_.onEnd(v)}shutdown(){let v=[];for(let _ of this._spanProcessors)v.push(_.shutdown());return new Promise((_,c)=>{Promise.all(v).then(()=>{_()},c)})}};s.MultiSpanProcessor=d}),ys=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.NoopSpanProcessor=void 0;var T=class{onStart(d,v){}onEnd(d){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}};s.NoopSpanProcessor=T}),Bn=I((s,T)=>{var d=200,v="__lodash_hash_undefined__",_=800,c=16,l=9007199254740991,h="[object Arguments]",p="[object Array]",g="[object AsyncFunction]",y="[object Boolean]",f="[object Date]",b="[object Error]",w="[object Function]",S="[object GeneratorFunction]",R="[object Map]",A="[object Number]",D="[object Null]",j="[object Object]",ee="[object Proxy]",K="[object RegExp]",oe="[object Set]",ge="[object String]",ke="[object Undefined]",Se="[object WeakMap]",Pe="[object ArrayBuffer]",Ce="[object DataView]",$e="[object Float32Array]",Qe="[object Float64Array]",at="[object Int8Array]",tt="[object Int16Array]",$t="[object Int32Array]",lt="[object Uint8Array]",Ie="[object Uint8ClampedArray]",qe="[object Uint16Array]",Le="[object Uint32Array]",je=/[\\^$.*+?()[\]{}|]/g,Ke=/^\[object .+?Constructor\]$/,ot=/^(?:0|[1-9]\d*)$/,We={};We[$e]=We[Qe]=We[at]=We[tt]=We[$t]=We[lt]=We[Ie]=We[qe]=We[Le]=!0,We[h]=We[p]=We[Pe]=We[y]=We[Ce]=We[f]=We[b]=We[w]=We[R]=We[A]=We[j]=We[K]=We[oe]=We[ge]=We[Se]=!1;var kt=typeof global=="object"&&global&&global.Object===Object&&global,Jt=typeof self=="object"&&self&&self.Object===Object&&self,Bt=kt||Jt||Function("return this")(),Ot=typeof s=="object"&&s&&!s.nodeType&&s,Et=Ot&&typeof T=="object"&&T&&!T.nodeType&&T,tr=Et&&Et.exports===Ot,Pr=tr&&kt.process,Ze=function(){try{var ie=Et&&Et.require&&Et.require("util").types;return ie||Pr&&Pr.binding&&Pr.binding("util")}catch(pe){}}(),Xe=Ze&&Ze.isTypedArray;function vt(ie,pe,we){switch(we.length){case 0:return ie.call(pe);case 1:return ie.call(pe,we[0]);case 2:return ie.call(pe,we[0],we[1]);case 3:return ie.call(pe,we[0],we[1],we[2])}return ie.apply(pe,we)}function rr(ie,pe){for(var we=-1,Be=Array(ie);++we<ie;)Be[we]=pe(we);return Be}function ka(ie){return function(pe){return ie(pe)}}function Cn(ie,pe){return ie==null?void 0:ie[pe]}function ut(ie,pe){return function(we){return ie(pe(we))}}var Sa=Array.prototype,Rs=Function.prototype,cn=Object.prototype,br=Bt["__core-js_shared__"],Nr=Rs.toString,_r=cn.hasOwnProperty,Wn=function(){var ie=/[^.]+$/.exec(br&&br.keys&&br.keys.IE_PROTO||"");return ie?"Symbol(src)_1."+ie:""}(),Kn=cn.toString,Vr=Nr.call(Object),Ta=RegExp("^"+Nr.call(_r).replace(je,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Yn=tr?Bt.Buffer:void 0,Cs=Bt.Symbol,_i=Bt.Uint8Array,Pn=Yn?Yn.allocUnsafe:void 0,Jr=ut(Object.getPrototypeOf,Object),wi=Object.create,Ps=cn.propertyIsEnumerable,Ki=Sa.splice,Lr=Cs?Cs.toStringTag:void 0,jr=function(){try{var ie=Ma(Object,"defineProperty");return ie({},"",{}),ie}catch(pe){}}(),Ar=Yn?Yn.isBuffer:void 0,wr=Math.max,pt=Date.now,Ra=Ma(Bt,"Map"),dn=Ma(Object,"create"),Vt=function(){function ie(){}return function(pe){if(!In(pe))return{};if(wi)return wi(pe);ie.prototype=pe;var we=new ie;return ie.prototype=void 0,we}}();function hn(ie){var pe=-1,we=ie==null?0:ie.length;for(this.clear();++pe<we;){var Be=ie[pe];this.set(Be[0],Be[1])}}function Ca(){this.__data__=dn?dn(null):{},this.size=0}function Yi(ie){var pe=this.has(ie)&&delete this.__data__[ie];return this.size-=pe?1:0,pe}function Ei(ie){var pe=this.__data__;if(dn){var we=pe[ie];return we===v?void 0:we}return _r.call(pe,ie)?pe[ie]:void 0}function Xi(ie){var pe=this.__data__;return dn?pe[ie]!==void 0:_r.call(pe,ie)}function Xo(ie,pe){var we=this.__data__;return this.size+=this.has(ie)?0:1,we[ie]=dn&&pe===void 0?v:pe,this}hn.prototype.clear=Ca,hn.prototype.delete=Yi,hn.prototype.get=Ei,hn.prototype.has=Xi,hn.prototype.set=Xo;function qr(ie){var pe=-1,we=ie==null?0:ie.length;for(this.clear();++pe<we;){var Be=ie[pe];this.set(Be[0],Be[1])}}function Pa(){this.__data__=[],this.size=0}function Ns(ie){var pe=this.__data__,we=rt(pe,ie);if(we<0)return!1;var Be=pe.length-1;return we==Be?pe.pop():Ki.call(pe,we,1),--this.size,!0}function pn(ie){var pe=this.__data__,we=rt(pe,ie);return we<0?void 0:pe[we][1]}function Ji(ie){return rt(this.__data__,ie)>-1}function As(ie,pe){var we=this.__data__,Be=rt(we,ie);return Be<0?(++this.size,we.push([ie,pe])):we[Be][1]=pe,this}qr.prototype.clear=Pa,qr.prototype.delete=Ns,qr.prototype.get=pn,qr.prototype.has=Ji,qr.prototype.set=As;function Nn(ie){var pe=-1,we=ie==null?0:ie.length;for(this.clear();++pe<we;){var Be=ie[pe];this.set(Be[0],Be[1])}}function Na(){this.size=0,this.__data__={hash:new hn,map:new(Ra||qr),string:new hn}}function Aa(ie){var pe=Os(this,ie).delete(ie);return this.size-=pe?1:0,pe}function Is(ie){return Os(this,ie).get(ie)}function ki(ie){return Os(this,ie).has(ie)}function Jo(ie,pe){var we=Os(this,ie),Be=we.size;return we.set(ie,pe),this.size+=we.size==Be?0:1,this}Nn.prototype.clear=Na,Nn.prototype.delete=Aa,Nn.prototype.get=Is,Nn.prototype.has=ki,Nn.prototype.set=Jo;function An(ie){var pe=this.__data__=new qr(ie);this.size=pe.size}function Ia(){this.__data__=new qr,this.size=0}function re(ie){var pe=this.__data__,we=pe.delete(ie);return this.size=pe.size,we}function de(ie){return this.__data__.get(ie)}function _e(ie){return this.__data__.has(ie)}function Me(ie,pe){var we=this.__data__;if(we instanceof qr){var Be=we.__data__;if(!Ra||Be.length<d-1)return Be.push([ie,pe]),this.size=++we.size,this;we=this.__data__=new Nn(Be)}return we.set(ie,pe),this.size=we.size,this}An.prototype.clear=Ia,An.prototype.delete=re,An.prototype.get=de,An.prototype.has=_e,An.prototype.set=Me;function Fe(ie,pe){var we=xs(ie),Be=!we&&La(ie),dt=!we&&!Be&&ts(ie),yt=!we&&!Be&&!dt&&au(ie),St=we||Be||dt||yt,ct=St?rr(ie.length,String):[],Nt=ct.length;for(var $r in ie)(pe||_r.call(ie,$r))&&!(St&&($r=="length"||dt&&($r=="offset"||$r=="parent")||yt&&($r=="buffer"||$r=="byteLength"||$r=="byteOffset")||nu($r,Nt)))&&ct.push($r);return ct}function Ge(ie,pe,we){(we!==void 0&&!es(ie[pe],we)||we===void 0&&!(pe in ie))&&st(ie,pe,we)}function Ve(ie,pe,we){var Be=ie[pe];(!(_r.call(ie,pe)&&es(Be,we))||we===void 0&&!(pe in ie))&&st(ie,pe,we)}function rt(ie,pe){for(var we=ie.length;we--;)if(es(ie[we][0],pe))return we;return-1}function st(ie,pe,we){pe=="__proto__"&&jr?jr(ie,pe,{configurable:!0,enumerable:!0,value:we,writable:!0}):ie[pe]=we}var Er=_d();function ur(ie){return ie==null?ie===void 0?ke:D:Lr&&Lr in Object(ie)?Jl(ie):iu(ie)}function hr(ie){return mn(ie)&&ur(ie)==h}function nr(ie){if(!In(ie)||Ed(ie))return!1;var pe=Ua(ie)?Ta:Ke;return pe.test(Zi(ie))}function Ur(ie){return mn(ie)&&Dt(ie.length)&&!!We[ur(ie)]}function Xn(ie){if(!In(ie))return kd(ie);var pe=Zl(ie),we=[];for(var Be in ie)Be=="constructor"&&(pe||!_r.call(ie,Be))||we.push(Be);return we}function Oa(ie,pe,we,Be,dt){ie!==pe&&Er(pe,function(yt,St){if(dt||(dt=new An),In(yt))yd(ie,pe,St,we,Oa,Be,dt);else{var ct=Be?Be(Fa(ie,St),yt,St+"",ie,pe,dt):void 0;ct===void 0&&(ct=yt),Ge(ie,St,ct)}},fn)}function yd(ie,pe,we,Be,dt,yt,St){var ct=Fa(ie,we),Nt=Fa(pe,we),$r=St.get(Nt);if($r){Ge(ie,we,$r);return}var Ir=yt?yt(ct,Nt,we+"",ie,pe,St):void 0,rs=Ir===void 0;if(rs){var $a=xs(Nt),Ga=!$a&&ts(Nt),sc=!$a&&!Ga&&au(Nt);Ir=Nt,$a||Ga||sc?xs(ct)?Ir=ct:zr(ct)?Ir=xa(ct):Ga?(rs=!1,Ir=Da(Nt,!0)):sc?(rs=!1,Ir=tu(Nt,!0)):Ir=[]:Si(Nt)||La(Nt)?(Ir=ct,La(ct)?Ir=rc(ct):(!In(ct)||Ua(ct))&&(Ir=pr(Nt))):rs=!1}rs&&(St.set(Nt,Ir),dt(Ir,Nt,Be,yt,St),St.delete(Nt)),Ge(ie,we,Ir)}function Xl(ie,pe){return tc(ec(ie,pe,ou),ie+"")}var Zo=jr?function(ie,pe){return jr(ie,"toString",{configurable:!0,enumerable:!1,value:nc(pe),writable:!0})}:ou;function Da(ie,pe){if(pe)return ie.slice();var we=ie.length,Be=Pn?Pn(we):new ie.constructor(we);return ie.copy(Be),Be}function eu(ie){var pe=new ie.constructor(ie.byteLength);return new _i(pe).set(new _i(ie)),pe}function tu(ie,pe){var we=pe?eu(ie.buffer):ie.buffer;return new ie.constructor(we,ie.byteOffset,ie.length)}function xa(ie,pe){var we=-1,Be=ie.length;for(pe||(pe=Array(Be));++we<Be;)pe[we]=ie[we];return pe}function ru(ie,pe,we,Be){var dt=!we;we||(we={});for(var yt=-1,St=pe.length;++yt<St;){var ct=pe[yt],Nt=Be?Be(we[ct],ie[ct],ct,we,ie):void 0;Nt===void 0&&(Nt=ie[ct]),dt?st(we,ct,Nt):Ve(we,ct,Nt)}return we}function bd(ie){return Xl(function(pe,we){var Be=-1,dt=we.length,yt=dt>1?we[dt-1]:void 0,St=dt>2?we[2]:void 0;for(yt=ie.length>3&&typeof yt=="function"?(dt--,yt):void 0,St&&wd(we[0],we[1],St)&&(yt=dt<3?void 0:yt,dt=1),pe=Object(pe);++Be<dt;){var ct=we[Be];ct&&ie(pe,ct,Be,yt)}return pe})}function _d(ie){return function(pe,we,Be){for(var dt=-1,yt=Object(pe),St=Be(pe),ct=St.length;ct--;){var Nt=St[ie?ct:++dt];if(we(yt[Nt],Nt,yt)===!1)break}return pe}}function Os(ie,pe){var we=ie.__data__;return Ds(pe)?we[typeof pe=="string"?"string":"hash"]:we.map}function Ma(ie,pe){var we=Cn(ie,pe);return nr(we)?we:void 0}function Jl(ie){var pe=_r.call(ie,Lr),we=ie[Lr];try{ie[Lr]=void 0;var Be=!0}catch(yt){}var dt=Kn.call(ie);return Be&&(pe?ie[Lr]=we:delete ie[Lr]),dt}function pr(ie){return typeof ie.constructor=="function"&&!Zl(ie)?Vt(Jr(ie)):{}}function nu(ie,pe){var we=typeof ie;return pe=pe==null?l:pe,!!pe&&(we=="number"||we!="symbol"&&ot.test(ie))&&ie>-1&&ie%1==0&&ie<pe}function wd(ie,pe,we){if(!In(we))return!1;var Be=typeof pe;return(Be=="number"?qa(we)&&nu(pe,we.length):Be=="string"&&pe in we)?es(we[pe],ie):!1}function Ds(ie){var pe=typeof ie;return pe=="string"||pe=="number"||pe=="symbol"||pe=="boolean"?ie!=="__proto__":ie===null}function Ed(ie){return!!Wn&&Wn in ie}function Zl(ie){var pe=ie&&ie.constructor,we=typeof pe=="function"&&pe.prototype||cn;return ie===we}function kd(ie){var pe=[];if(ie!=null)for(var we in Object(ie))pe.push(we);return pe}function iu(ie){return Kn.call(ie)}function ec(ie,pe,we){return pe=wr(pe===void 0?ie.length-1:pe,0),function(){for(var Be=arguments,dt=-1,yt=wr(Be.length-pe,0),St=Array(yt);++dt<yt;)St[dt]=Be[pe+dt];dt=-1;for(var ct=Array(pe+1);++dt<pe;)ct[dt]=Be[dt];return ct[pe]=we(St),vt(ie,this,ct)}}function Fa(ie,pe){if(!(pe==="constructor"&&typeof ie[pe]=="function")&&pe!="__proto__")return ie[pe]}var tc=su(Zo);function su(ie){var pe=0,we=0;return function(){var Be=pt(),dt=c-(Be-we);if(we=Be,dt>0){if(++pe>=_)return arguments[0]}else pe=0;return ie.apply(void 0,arguments)}}function Zi(ie){if(ie!=null){try{return Nr.call(ie)}catch(pe){}try{return ie+""}catch(pe){}}return""}function es(ie,pe){return ie===pe||ie!==ie&&pe!==pe}var La=hr(function(){return arguments}())?hr:function(ie){return mn(ie)&&_r.call(ie,"callee")&&!Ps.call(ie,"callee")},xs=Array.isArray;function qa(ie){return ie!=null&&Dt(ie.length)&&!Ua(ie)}function zr(ie){return mn(ie)&&qa(ie)}var ts=Ar||ic;function Ua(ie){if(!In(ie))return!1;var pe=ur(ie);return pe==w||pe==S||pe==g||pe==ee}function Dt(ie){return typeof ie=="number"&&ie>-1&&ie%1==0&&ie<=l}function In(ie){var pe=typeof ie;return ie!=null&&(pe=="object"||pe=="function")}function mn(ie){return ie!=null&&typeof ie=="object"}function Si(ie){if(!mn(ie)||ur(ie)!=j)return!1;var pe=Jr(ie);if(pe===null)return!0;var we=_r.call(pe,"constructor")&&pe.constructor;return typeof we=="function"&&we instanceof we&&Nr.call(we)==Vr}var au=Xe?ka(Xe):Ur;function rc(ie){return ru(ie,fn(ie))}function fn(ie){return qa(ie)?Fe(ie,!0):Xn(ie)}var Jn=bd(function(ie,pe,we){Oa(ie,pe,we)});function nc(ie){return function(){return ie}}function ou(ie){return ie}function ic(){return!1}T.exports=Jn}),al=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.BatchSpanProcessorBase=void 0;var T=wt(),d=Mr(),v=class{constructor(_,c){this._exporter=_,this._finishedSpans=[],this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve();let l=d.getEnv();this._maxExportBatchSize=typeof(c==null?void 0:c.maxExportBatchSize)=="number"?c.maxExportBatchSize:l.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof(c==null?void 0:c.maxQueueSize)=="number"?c.maxQueueSize:l.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof(c==null?void 0:c.scheduledDelayMillis)=="number"?c.scheduledDelayMillis:l.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof(c==null?void 0:c.exportTimeoutMillis)=="number"?c.exportTimeoutMillis:l.OTEL_BSP_EXPORT_TIMEOUT}forceFlush(){return this._isShutdown?this._shuttingDownPromise:this._flushAll()}onStart(_){}onEnd(_){this._isShutdown||this._addToBuffer(_)}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((_,c)=>{Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown()).then(_).catch(l=>{c(l)})}),this._shuttingDownPromise)}_addToBuffer(_){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(_),this._maybeStartTimer())}_flushAll(){return new Promise((_,c)=>{let l=[],h=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let p=0,g=h;p<g;p++)l.push(this._flushOneBatch());Promise.all(l).then(()=>{_()}).catch(c)})}_flushOneBatch(){return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise((_,c)=>{let l=setTimeout(()=>{c(new Error("Timeout"))},this._exportTimeoutMillis);T.context.with(d.suppressTracing(T.context.active()),()=>{this._exporter.export(this._finishedSpans.splice(0,this._maxExportBatchSize),h=>{var p;clearTimeout(l),h.code===d.ExportResultCode.SUCCESS?_():c((p=h.error)!==null&&p!==void 0?p:new Error("BatchSpanProcessor: span export failed"))})})})}_maybeStartTimer(){this._timer===void 0&&(this._timer=setTimeout(()=>{this._flushOneBatch().then(()=>{this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(_=>{d.globalErrorHandler(_)})},this._scheduledDelayMillis),d.unrefTimer(this._timer))}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)}};s.BatchSpanProcessorBase=v}),ol=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.BatchSpanProcessor=void 0;var T=al(),d=class extends T.BatchSpanProcessorBase{onShutdown(){}};s.BatchSpanProcessor=d}),To=I(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(ol(),s)}),Ht=I(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(To(),s)}),ca=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.BasicTracerProvider=s.ForceFlushState=void 0;var T=wt(),d=Mr(),v=la(),_=Pt(),c=ia(),l=Ui(),h=ys(),p=Bn(),g=Ht(),y;(function(b){b[b.resolved=0]="resolved",b[b.timeout=1]="timeout",b[b.error=2]="error",b[b.unresolved=3]="unresolved"})(y=s.ForceFlushState||(s.ForceFlushState={}));var f=class{constructor(b={}){var w;this._registeredSpanProcessors=[],this._tracers=new Map;let S=p({},c.DEFAULT_CONFIG,b);this.resource=(w=S.resource)!==null&&w!==void 0?w:v.Resource.empty(),this.resource=v.Resource.default().merge(this.resource),this._config=Object.assign({},S,{resource:this.resource});let R=this._buildExporterFromEnv();if(R!==void 0){let A=new g.BatchSpanProcessor(R);this.activeSpanProcessor=A}else this.activeSpanProcessor=new h.NoopSpanProcessor}getTracer(b,w){let S=`${b}@${w||""}`;return this._tracers.has(S)||this._tracers.set(S,new _.Tracer({name:b,version:w},this._config,this)),this._tracers.get(S)}addSpanProcessor(b){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(w=>T.diag.error("Error while trying to shutdown current span processor",w)),this._registeredSpanProcessors.push(b),this.activeSpanProcessor=new l.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(b={}){T.trace.setGlobalTracerProvider(this),b.propagator===void 0&&(b.propagator=this._buildPropagatorFromEnv()),b.contextManager&&T.context.setGlobalContextManager(b.contextManager),b.propagator&&T.propagation.setGlobalPropagator(b.propagator)}forceFlush(){let b=this._config.forceFlushTimeoutMillis,w=this._registeredSpanProcessors.map(S=>new Promise(R=>{let A,D=setTimeout(()=>{R(new Error(`Span processor did not completed within timeout period of ${b} ms`)),A=y.timeout},b);S.forceFlush().then(()=>{clearTimeout(D),A!==y.timeout&&(A=y.resolved,R(A))}).catch(j=>{clearTimeout(D),A=y.error,R(j)})}));return new Promise((S,R)=>{Promise.all(w).then(A=>{let D=A.filter(j=>j!==y.resolved);D.length>0?R(D):S()}).catch(A=>R([A]))})}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(b){var w;return(w=f._registeredPropagators.get(b))===null||w===void 0?void 0:w()}_getSpanExporter(b){var w;return(w=f._registeredExporters.get(b))===null||w===void 0?void 0:w()}_buildPropagatorFromEnv(){let b=Array.from(new Set(d.getEnv().OTEL_PROPAGATORS)),w=b.map(S=>{let R=this._getPropagator(S);return R||T.diag.warn(`Propagator "${S}" requested through environment variable is unavailable.`),R}).reduce((S,R)=>(R&&S.push(R),S),[]);if(w.length!==0)return b.length===1?w[0]:new d.CompositePropagator({propagators:w})}_buildExporterFromEnv(){let b=d.getEnv().OTEL_TRACES_EXPORTER;if(b==="none")return;let w=this._getSpanExporter(b);return w||T.diag.error(`Exporter "${b}" requested through environment variable is unavailable.`),w}};s.BasicTracerProvider=f,f._registeredPropagators=new Map([["tracecontext",()=>new d.HttpTraceContextPropagator],["baggage",()=>new d.HttpBaggagePropagator]]),f._registeredExporters=new Map}),ul=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.ConsoleSpanExporter=void 0;var T=Mr(),d=class{export(v,_){return this._sendSpans(v,_)}shutdown(){return this._sendSpans([]),Promise.resolve()}_exportInfo(v){return{traceId:v.spanContext().traceId,parentId:v.parentSpanId,name:v.name,id:v.spanContext().spanId,kind:v.kind,timestamp:T.hrTimeToMicroseconds(v.startTime),duration:T.hrTimeToMicroseconds(v.duration),attributes:v.attributes,status:v.status,events:v.events}}_sendSpans(v,_){for(let c of v)console.log(this._exportInfo(c));if(_)return _({code:T.ExportResultCode.SUCCESS})}};s.ConsoleSpanExporter=d}),ll=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.InMemorySpanExporter=void 0;var T=Mr(),d=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(v,_){if(this._stopped)return _({code:T.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...v),setTimeout(()=>_({code:T.ExportResultCode.SUCCESS}),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}};s.InMemorySpanExporter=d}),cd=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),dd=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.SimpleSpanProcessor=void 0;var T=wt(),d=Mr(),v=class{constructor(_){this._exporter=_,this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve()}forceFlush(){return Promise.resolve()}onStart(_){}onEnd(_){this._isShutdown||T.context.with(d.suppressTracing(T.context.active()),()=>{this._exporter.export([_],c=>{var l;c.code!==d.ExportResultCode.SUCCESS&&d.globalErrorHandler((l=c.error)!==null&&l!==void 0?l:new Error(`SimpleSpanProcessor: span export failed (status ${c})`))})})}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((_,c)=>{Promise.resolve().then(()=>this._exporter.shutdown()).then(_).catch(l=>{c(l)})}),this._shuttingDownPromise)}};s.SimpleSpanProcessor=v}),hd=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),cl=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Yt=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),nn=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Pt=I(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(gs(),s),d(ca(),s),d(Ht(),s),d(ul(),s),d(ll(),s),d(cd(),s),d(dd(),s),d(hd(),s),d(ys(),s),d(Eo(),s),d(cl(),s),d(Yt(),s),d(nn(),s)}),En=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.azureCoreTracing=s.AzureMonitorSymbol=void 0;var T=Y();s.AzureMonitorSymbol="Azure_Monitor_Tracer";var d=!1,v=function(c){if(d)return c;try{var l=Pt(),h=wt(),p=new l.BasicTracerProvider,g=p.getTracer("applicationinsights tracer"),y=c.setTracer;c.setTracer=function(f){var b=f.startSpan;f.startSpan=function(w,S,R){var A=b.call(this,w,S,R),D=A.end;return A.end=function(){var j=D.apply(this,arguments);return T.channel.publish("azure-coretracing",A),j},A},f[s.AzureMonitorSymbol]=!0,y.call(this,f)},h.trace.getSpan(h.context.active()),c.setTracer(g),d=!0}catch(f){}return c};s.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:v};function _(){T.channel.registerMonkeyPatch("@azure/core-tracing",s.azureCoreTracing)}s.enable=_}),da=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.bunyan=void 0;var T=Y(),d=function(_){var c=_.prototype._emit;return _.prototype._emit=function(l,h){var p=c.apply(this,arguments);if(!h){var g=p;g||(g=c.call(this,l,!0)),T.channel.publish("bunyan",{level:l.level,result:g})}return p},_};s.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:d};function v(){T.channel.registerMonkeyPatch("bunyan",s.bunyan)}s.enable=v}),dl=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.console=void 0;var T=Y(),d=M(2413),v=function(c){var l=new d.Writable,h=new d.Writable;l.write=function(S){if(!S)return!0;var R=S.toString();return T.channel.publish("console",{message:R}),!0},h.write=function(S){if(!S)return!0;var R=S.toString();return T.channel.publish("console",{message:R,stderr:!0}),!0};for(var p=new c.Console(l,h),g=["log","info","warn","error","dir","time","timeEnd","trace","assert"],y=function(S){var R=c[S];R&&(c[S]=function(){if(p[S])try{p[S].apply(p,arguments)}catch(A){}return R.apply(c,arguments)})},f=0,b=g;f<b.length;f++){var w=b[f];y(w)}return c};s.console={versionSpecifier:">= 4.0.0",patch:v};function _(){T.channel.registerMonkeyPatch("console",s.console),M(7082)}s.enable=_}),hl=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.mongoCore=void 0;var T=Y(),d=function(_){var c=_.Server.prototype.connect;return _.Server.prototype.connect=function(){var l=c.apply(this,arguments),h=this.s.pool.write;this.s.pool.write=function(){var g=typeof arguments[1]=="function"?1:2;return typeof arguments[g]=="function"&&(arguments[g]=T.channel.bindToContext(arguments[g])),h.apply(this,arguments)};var p=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=T.channel.bindToContext(arguments[1])),p.apply(this,arguments)},l},_};s.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:d};function v(){T.channel.registerMonkeyPatch("mongodb-core",s.mongoCore)}s.enable=v}),pl=I(s=>{"use strict";var T=s&&s.__assign||function(){return T=Object.assign||function(p){for(var g,y=1,f=arguments.length;y<f;y++){g=arguments[y];for(var b in g)Object.prototype.hasOwnProperty.call(g,b)&&(p[b]=g[b])}return p},T.apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.mongo330=s.mongo3=s.mongo2=void 0;var d=Y(),v=function(p){var g=p.instrument({operationIdGenerator:{next:function(){return d.channel.bindToContext(function(f){return f()})}}}),y={};return g.on("started",function(f){y[f.requestId]||(y[f.requestId]=T(T({},f),{time:new Date}))}),g.on("succeeded",function(f){var b=y[f.requestId];b&&delete y[f.requestId],typeof f.operationId=="function"?f.operationId(function(){return d.channel.publish("mongodb",{startedData:b,event:f,succeeded:!0})}):d.channel.publish("mongodb",{startedData:b,event:f,succeeded:!0})}),g.on("failed",function(f){var b=y[f.requestId];b&&delete y[f.requestId],typeof f.operationId=="function"?f.operationId(function(){return d.channel.publish("mongodb",{startedData:b,event:f,succeeded:!1})}):d.channel.publish("mongodb",{startedData:b,event:f,succeeded:!1})}),p},_=function(p){var g=p.instrument(),y={},f={};return g.on("started",function(b){y[b.requestId]||(f[b.requestId]=d.channel.bindToContext(function(w){return w()}),y[b.requestId]=T(T({},b),{time:new Date}))}),g.on("succeeded",function(b){var w=y[b.requestId];w&&delete y[b.requestId],typeof b=="object"&&typeof f[b.requestId]=="function"&&(f[b.requestId](function(){return d.channel.publish("mongodb",{startedData:w,event:b,succeeded:!0})}),delete f[b.requestId])}),g.on("failed",function(b){var w=y[b.requestId];w&&delete y[b.requestId],typeof b=="object"&&typeof f[b.requestId]=="function"&&(f[b.requestId](function(){return d.channel.publish("mongodb",{startedData:w,event:b,succeeded:!1})}),delete f[b.requestId])}),p},c=function(p){var g=p.Server.prototype.connect;return p.Server.prototype.connect=function(){var y=g.apply(this,arguments),f=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var w=typeof arguments[1]=="function"?1:2;return typeof arguments[w]=="function"&&(arguments[w]=d.channel.bindToContext(arguments[w])),f.apply(this,arguments)};var b=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=d.channel.bindToContext(arguments[1])),b.apply(this,arguments)},y},p},l=function(p){c(p);var g=p.instrument(),y={},f={};return g.on("started",function(b){y[b.requestId]||(f[b.requestId]=d.channel.bindToContext(function(w){return w()}),y[b.requestId]=b)}),g.on("succeeded",function(b){var w=y[b.requestId];w&&delete y[b.requestId],typeof b=="object"&&typeof f[b.requestId]=="function"&&(f[b.requestId](function(){return d.channel.publish("mongodb",{startedData:w,event:b,succeeded:!0})}),delete f[b.requestId])}),g.on("failed",function(b){var w=y[b.requestId];w&&delete y[b.requestId],typeof b=="object"&&typeof f[b.requestId]=="function"&&(f[b.requestId](function(){return d.channel.publish("mongodb",{startedData:w,event:b,succeeded:!1})}),delete f[b.requestId])}),p};s.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:v},s.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:_},s.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:l};function h(){d.channel.registerMonkeyPatch("mongodb",s.mongo2),d.channel.registerMonkeyPatch("mongodb",s.mongo3),d.channel.registerMonkeyPatch("mongodb",s.mongo330)}s.enable=h}),Ro=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.mysql=void 0;var T=Y(),d=M(5622),v=function(c,l){var h=function(w,S){return function(R,A){var D=w[R];D&&(w[R]=function(){for(var j=arguments.length-1,ee=arguments.length-1;ee>=0;--ee)if(typeof arguments[ee]=="function"){j=ee;break}else if(typeof arguments[ee]!="undefined")break;var K=arguments[j],oe={result:null,startTime:null,startDate:null};typeof K=="function"&&(A?(oe.startTime=process.hrtime(),oe.startDate=new Date,arguments[j]=T.channel.bindToContext(A(oe,K))):arguments[j]=T.channel.bindToContext(K));var ge=D.apply(this,arguments);return oe.result=ge,ge})}},p=function(w,S){return h(w.prototype,S+".prototype")},g=["connect","changeUser","ping","statistics","end"],y=M(3255)(d.dirname(l)+"/lib/Connection");g.forEach(function(w){return p(y,"Connection")(w)}),h(y,"Connection")("createQuery",function(w,S){return function(R){var A=process.hrtime(w.startTime),D=A[0]*1e3+A[1]/1e6|0;T.channel.publish("mysql",{query:w.result,callbackArgs:arguments,err:R,duration:D,time:w.startDate}),S.apply(this,arguments)}});var f=["_enqueueCallback"],b=M(9118)(d.dirname(l)+"/lib/Pool");return f.forEach(function(w){return p(b,"Pool")(w)}),c};s.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:v};function _(){T.channel.registerMonkeyPatch("mysql",s.mysql)}s.enable=_}),Xr=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.postgresPool1=void 0;var T=Y();function d(_){var c=_.prototype.connect;return _.prototype.connect=function(l){return l&&(arguments[0]=T.channel.bindToContext(l)),c.apply(this,arguments)},_}s.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:d};function v(){T.channel.registerMonkeyPatch("pg-pool",s.postgresPool1)}s.enable=v}),bs=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.postgres7=s.postgres6=void 0;var T=Y(),d=M(8614);function v(l,h){var p=l.Client.prototype.query,g="__diagnosticOriginalFunc";return l.Client.prototype.query=function(y,f,b){var w={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},S=process.hrtime(),R;function A(D){D&&D[g]&&(D=D[g]);var j=T.channel.bindToContext(function(ee,K){var oe=process.hrtime(S);if(w.result=K&&{rowCount:K.rowCount,command:K.command},w.error=ee,w.duration=Math.ceil(oe[0]*1e3+oe[1]/1e6),T.channel.publish("postgres",w),ee){if(D)return D.apply(this,arguments);R&&R instanceof d.EventEmitter&&R.emit("error",ee)}else D&&D.apply(this,arguments)});try{return Object.defineProperty(j,g,{value:D}),j}catch(ee){return D}}try{typeof y=="string"?f instanceof Array?(w.query.preparable={text:y,args:f},b=A(b)):(w.query.text=y,b?b=A(b):f=A(f)):(typeof y.name=="string"?w.query.plan=y.name:y.values instanceof Array?w.query.preparable={text:y.text,args:y.values}:w.query.text=y.text,b?b=A(b):f?f=A(f):y.callback=A(y.callback))}catch(D){return p.apply(this,arguments)}return arguments[0]=y,arguments[1]=f,arguments[2]=b,arguments.length=arguments.length>3?arguments.length:3,R=p.apply(this,arguments),R},l}function _(l,h){var p=l.Client.prototype.query,g="__diagnosticOriginalFunc";return l.Client.prototype.query=function(y,f,b){var w=this,S=!!b,R={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},A=process.hrtime(),D;function j(ee){ee&&ee[g]&&(ee=ee[g]);var K=T.channel.bindToContext(function(oe,ge){var ke=process.hrtime(A);if(R.result=ge&&{rowCount:ge.rowCount,command:ge.command},R.error=oe,R.duration=Math.ceil(ke[0]*1e3+ke[1]/1e6),T.channel.publish("postgres",R),oe){if(ee)return ee.apply(this,arguments);D&&D instanceof d.EventEmitter&&D.emit("error",oe)}else ee&&ee.apply(this,arguments)});try{return Object.defineProperty(K,g,{value:ee}),K}catch(oe){return ee}}try{typeof y=="string"?f instanceof Array?(R.query.preparable={text:y,args:f},S=typeof b=="function",b=S?j(b):b):(R.query.text=y,b?(S=typeof b=="function",b=S?j(b):b):(S=typeof f=="function",f=S?j(f):f)):(typeof y.name=="string"?R.query.plan=y.name:y.values instanceof Array?R.query.preparable={text:y.text,args:y.values}:R.query.text=y.text,b?(S=typeof b=="function",b=j(b)):f?(S=typeof f=="function",f=S?j(f):f):(S=typeof y.callback=="function",y.callback=S?j(y.callback):y.callback))}catch(ee){return p.apply(this,arguments)}return arguments[0]=y,arguments[1]=f,arguments[2]=b,arguments.length=arguments.length>3?arguments.length:3,D=p.apply(this,arguments),S?D:D.then(function(ee){return j()(void 0,ee),new w._Promise(function(K,oe){K(ee)})}).catch(function(ee){return j()(ee,void 0),new w._Promise(function(K,oe){oe(ee)})})},l}s.postgres6={versionSpecifier:"6.*",patch:v},s.postgres7={versionSpecifier:">=7.* <=8.*",patch:_};function c(){T.channel.registerMonkeyPatch("pg",s.postgres6),T.channel.registerMonkeyPatch("pg",s.postgres7)}s.enable=c}),ml=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.redis=void 0;var T=Y(),d=function(_){var c=_.RedisClient.prototype.internal_send_command;return _.RedisClient.prototype.internal_send_command=function(l){if(l){var h=l.callback;if(!h||!h.pubsubBound){var p=this.address,g=process.hrtime(),y=new Date;l.callback=T.channel.bindToContext(function(f,b){var w=process.hrtime(g),S=w[0]*1e3+w[1]/1e6|0;T.channel.publish("redis",{duration:S,address:p,commandObj:l,err:f,result:b,time:y}),typeof h=="function"&&h.apply(this,arguments)}),l.callback.pubsubBound=!0}}return c.call(this,l)},_};s.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:d};function v(){T.channel.registerMonkeyPatch("redis",s.redis)}s.enable=v}),Co=I(s=>{"use strict";var T=s&&s.__assign||function(){return T=Object.assign||function(c){for(var l,h=1,p=arguments.length;h<p;h++){l=arguments[h];for(var g in l)Object.prototype.hasOwnProperty.call(l,g)&&(c[g]=l[g])}return c},T.apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.tedious=void 0;var d=Y(),v=function(c){var l=c.Connection.prototype.makeRequest;return c.Connection.prototype.makeRequest=function(){function h(g){var y=process.hrtime(),f={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return d.channel.bindToContext(function(b,w,S){var R=process.hrtime(y);f=T(T({},f),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!b&&{rowCount:w,rows:S},query:{text:this.parametersByName.statement.value},error:b,duration:Math.ceil(R[0]*1e3+R[1]/1e6)}),d.channel.publish("tedious",f),g.call(this,b,w,S)})}var p=arguments[0];arguments[0].callback=h(p.callback),l.apply(this,arguments)},c};s.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:v};function _(){d.channel.registerMonkeyPatch("tedious",s.tedious)}s.enable=_}),Po=I(s=>{"use strict";var T=s&&s.__extends||function(){var h=function(p,g){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,f){y.__proto__=f}||function(y,f){for(var b in f)Object.prototype.hasOwnProperty.call(f,b)&&(y[b]=f[b])},h(p,g)};return function(p,g){h(p,g);function y(){this.constructor=p}p.prototype=g===null?Object.create(g):(y.prototype=g.prototype,new y)}}(),d=s&&s.__rest||function(h,p){var g={};for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&p.indexOf(y)<0&&(g[y]=h[y]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,y=Object.getOwnPropertySymbols(h);f<y.length;f++)p.indexOf(y[f])<0&&Object.prototype.propertyIsEnumerable.call(h,y[f])&&(g[y[f]]=h[y[f]]);return g};Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.winston2=s.winston3=void 0;var v=Y(),_=function(h){var p=h.Logger.prototype.log,g,y=function(f,b,w){var S;return g===h.config.npm.levels?S="npm":g===h.config.syslog.levels?S="syslog":S="unknown",v.channel.publish("winston",{level:f,message:b,meta:w,levelKind:S}),b};return h.Logger.prototype.log=function(){return g=this.levels,!this.filters||this.filters.length===0?this.filters=[y]:this.filters[this.filters.length-1]!==y&&(this.filters=this.filters.filter(function(f){return f!==y}),this.filters.push(y)),p.apply(this,arguments)},h},c=function(h){var p=function(w,S){var R;return w.config.npm.levels[S]!=null?R="npm":w.config.syslog.levels[S]!=null?R="syslog":R="unknown",R},g=function(w){T(S,w);function S(R,A){var D=w.call(this,A)||this;return D.winston=R,D}return S.prototype.log=function(R,A){var D=R.message,j=R.level,ee=R.meta,K=d(R,["message","level","meta"]);j=typeof Symbol.for=="function"?R[Symbol.for("level")]:j,D=R instanceof Error?R:D;var oe=p(this.winston,j);ee=ee||{};for(var ge in K)K.hasOwnProperty(ge)&&(ee[ge]=K[ge]);v.channel.publish("winston",{message:D,level:j,levelKind:oe,meta:ee}),A()},S}(h.Transport);function y(){var w=arguments[0].levels||h.config.npm.levels,S;for(var R in w)w.hasOwnProperty(R)&&(S=S===void 0||w[R]>w[S]?R:S);this.add(new g(h,{level:S}))}var f=h.createLogger;h.createLogger=function(){var w=arguments[0].levels||h.config.npm.levels,S;for(var R in w)w.hasOwnProperty(R)&&(S=S===void 0||w[R]>w[S]?R:S);var A=f.apply(this,arguments);A.add(new g(h,{level:S}));var D=A.configure;return A.configure=function(){D.apply(this,arguments),y.apply(this,arguments)},A};var b=h.configure;return h.configure=function(){b.apply(this,arguments),y.apply(this,arguments)},h.add(new g(h)),h};s.winston3={versionSpecifier:"3.x",patch:c},s.winston2={versionSpecifier:"2.x",patch:_};function l(){v.channel.registerMonkeyPatch("winston",s.winston2),v.channel.registerMonkeyPatch("winston",s.winston3)}s.enable=l}),fl=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.tedious=s.pgPool=s.pg=s.winston=s.redis=s.mysql=s.mongodb=s.mongodbCore=s.console=s.bunyan=s.azuresdk=void 0;var T=En();s.azuresdk=T;var d=da();s.bunyan=d;var v=dl();s.console=v;var _=hl();s.mongodbCore=_;var c=pl();s.mongodb=c;var l=Ro();s.mysql=l;var h=Xr();s.pgPool=h;var p=bs();s.pg=p;var g=ml();s.redis=g;var y=Co();s.tedious=y;var f=Po();s.winston=f;function b(){d.enable(),v.enable(),_.enable(),c.enable(),l.enable(),p.enable(),h.enable(),g.enable(),f.enable(),T.enable(),y.enable()}s.enable=b}),_s=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.registerContextPreservation=s.IsInitialized=void 0;var T=X(),d=se();s.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var v="DiagnosticChannel";if(s.IsInitialized){_=fl(),c=process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"",l=c.split(","),h={bunyan:_.bunyan,console:_.console,mongodb:_.mongodb,mongodbCore:_.mongodbCore,mysql:_.mysql,redis:_.redis,pg:_.pg,pgPool:_.pgPool,winston:_.winston,azuresdk:_.azuresdk};for(p in h)l.indexOf(p)===-1&&(h[p].enable(),d.info(v,"Subscribed to "+p+" events"));l.length>0&&d.info(v,"Some modules will not be patched",l)}else d.info(v,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");var _,c,l,h,p;function g(y){if(s.IsInitialized){var f=Y();f.channel.addContextPreservation(y),f.channel.spanContextPropagator=T.AsyncScopeManager}}s.registerContextPreservation=g}),hi=I((s,T)=>{"use strict";T.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}}),yr=I((s,T)=>{"use strict";var d=s&&s.__assign||function(){return d=Object.assign||function(y){for(var f,b=1,w=arguments.length;b<w;b++){f=arguments[b];for(var S in f)Object.prototype.hasOwnProperty.call(f,S)&&(y[S]=f[S])}return y},d.apply(this,arguments)},v=M(8605),_=M(7211),c=M(8835),l=M(7619),h=se(),p=hi(),g=function(){function y(){}return y.getCookie=function(f,b){var w="";if(f&&f.length&&typeof b=="string")for(var S=f+"=",R=b.split(";"),A=0;A<R.length;A++){var b=R[A];if(b=y.trim(b),b&&b.indexOf(S)===0){w=b.substring(S.length,R[A].length);break}}return w},y.trim=function(f){return typeof f=="string"?f.replace(/^\s+|\s+$/g,""):""},y.int32ArrayToBase64=function(f){var b=function(D,j){return String.fromCharCode(D>>j&255)},w=function(D){return b(D,24)+b(D,16)+b(D,8)+b(D,0)},S=f.map(w).join(""),R=Buffer.from?Buffer.from(S,"binary"):new Buffer(S,"binary"),A=R.toString("base64");return A.substr(0,A.indexOf("="))},y.random32=function(){return 4294967296*Math.random()|0},y.randomu32=function(){return y.random32()+2147483648},y.w3cTraceId=function(){for(var f=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],b="",w,S=0;S<4;S++)w=y.random32(),b+=f[w&15]+f[w>>4&15]+f[w>>8&15]+f[w>>12&15]+f[w>>16&15]+f[w>>20&15]+f[w>>24&15]+f[w>>28&15];var R=f[8+Math.random()*4|0];return b.substr(0,8)+b.substr(9,4)+"4"+b.substr(13,3)+R+b.substr(16,3)+b.substr(19,12)},y.w3cSpanId=function(){return y.w3cTraceId().substring(16)},y.isValidW3CId=function(f){return f.length===32&&f!=="00000000000000000000000000000000"},y.isArray=function(f){return Object.prototype.toString.call(f)==="[object Array]"},y.isError=function(f){return f instanceof Error},y.isPrimitive=function(f){var b=typeof f;return b==="string"||b==="number"||b==="boolean"},y.isDate=function(f){return Object.prototype.toString.call(f)==="[object Date]"},y.msToTimeSpan=function(f){(isNaN(f)||f<0)&&(f=0);var b=(f/1e3%60).toFixed(7).replace(/0{0,4}$/,""),w=""+Math.floor(f/(1e3*60))%60,S=""+Math.floor(f/(1e3*60*60))%24,R=Math.floor(f/(1e3*60*60*24));b=b.indexOf(".")<2?"0"+b:b,w=w.length<2?"0"+w:w,S=S.length<2?"0"+S:S;var A=R>0?R+".":"";return A+S+":"+w+":"+b},y.extractError=function(f){var b=f;return{message:f.message,code:b.code||b.id||""}},y.extractObject=function(f){return f instanceof Error?y.extractError(f):typeof f.toJSON=="function"?f.toJSON():f},y.validateStringMap=function(f){if(typeof f!="object"){h.info("Invalid properties dropped from payload");return}var b={};for(var w in f){var S="",R=f[w],A=typeof R;if(y.isPrimitive(R))S=R.toString();else if(R===null||A==="undefined")S="";else if(A==="function"){h.info("key: "+w+" was function; will not serialize");continue}else{var D=y.isArray(R)?R:y.extractObject(R);try{y.isPrimitive(D)?S=D:S=JSON.stringify(D)}catch(j){S=R.constructor.name.toString()+" (Error: "+j.message+")",h.info("key: "+w+", could not be serialized")}}b[w]=S.substring(0,y.MAX_PROPERTY_LENGTH)}return b},y.canIncludeCorrelationHeader=function(f,b){var w=f&&f.config&&f.config.correlationHeaderExcludedDomains;if(!w||w.length==0||!b)return!0;for(var S=0;S<w.length;S++){var R=new RegExp(w[S].replace(/\./g,".").replace(/\*/g,".*"));if(R.test(c.parse(b).hostname))return!1}return!0},y.getCorrelationContextTarget=function(f,b){var w=f.headers&&f.headers[p.requestContextHeader];if(w)for(var S=w.split(","),R=0;R<S.length;++R){var A=S[R].split("=");if(A.length==2&&A[0]==b)return A[1]}},y.makeRequest=function(f,b,w,S){b&&b.indexOf("//")===0&&(b="https:"+b);var R=c.parse(b),A=d(d({},w),{host:R.hostname,port:R.port,path:R.pathname}),D=void 0;if(R.protocol==="https:"&&(D=f.proxyHttpsUrl||void 0),R.protocol==="http:"&&(D=f.proxyHttpUrl||void 0),D){D.indexOf("//")===0&&(D="http:"+D);var j=c.parse(D);j.protocol==="https:"?(h.info("Proxies that use HTTPS are not supported"),D=void 0):A=d(d({},A),{host:j.hostname,port:j.port||"80",path:b,headers:d(d({},A.headers),{Host:R.hostname})})}var ee=R.protocol==="https:"&&!D;return ee&&f.httpsAgent!==void 0?A.agent=f.httpsAgent:!ee&&f.httpAgent!==void 0?A.agent=f.httpAgent:ee&&(A.agent=y.tlsRestrictedAgent),ee?_.request(A,S):v.request(A,S)},y.safeIncludeCorrelationHeader=function(f,b,w){var S;if(typeof w=="string")S=w;else if(w instanceof Array)S=w.join(",");else if(w&&typeof w.toString=="function")try{S=w.toString()}catch(R){h.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",R,w)}S?y.addCorrelationIdHeaderFromString(f,b,S):b.setHeader(p.requestContextHeader,p.requestContextSourceKey+"="+f.config.correlationId)},y.dumpObj=function(f){var b=Object.prototype.toString.call(f),w="";return b==="[object Error]"?w="{ stack: '"+f.stack+"', message: '"+f.message+"', name: '"+f.name+"'":w=JSON.stringify(f),b+w},y.addCorrelationIdHeaderFromString=function(f,b,w){var S=w.split(","),R=p.requestContextSourceKey+"=",A=S.some(function(D){return D.substring(0,R.length)===R});A||b.setHeader(p.requestContextHeader,w+","+p.requestContextSourceKey+"="+f.config.correlationId)},y.MAX_PROPERTY_LENGTH=8192,y.tlsRestrictedAgent=new _.Agent({keepAlive:!0,maxSockets:25,secureOptions:l.SSL_OP_NO_SSLv2|l.SSL_OP_NO_SSLv3|l.SSL_OP_NO_TLSv1|l.SSL_OP_NO_TLSv1_1}),y}();T.exports=g}),pi=I((s,T)=>{"use strict";var d=yr(),v=se(),_=function(){function c(){}return c.queryCorrelationId=function(l,h){var p=l.profileQueryEndpoint+"/api/profiles/"+l.instrumentationKey+"/appId";if(c.completedLookups.hasOwnProperty(p)){h(c.completedLookups[p]);return}else if(c.pendingLookups[p]){c.pendingLookups[p].push(h);return}c.pendingLookups[p]=[h];var g=function(){if(c.pendingLookups[p]){var y={method:"GET",disableAppInsightsAutoCollection:!0};v.info(c.TAG,y);var f=d.makeRequest(l,p,y,function(b){if(b.statusCode===200){var w="";b.setEncoding("utf-8"),b.on("data",function(S){w+=S}),b.on("end",function(){v.info(c.TAG,w);var S=c.correlationIdPrefix+w;c.completedLookups[p]=S,c.pendingLookups[p]&&c.pendingLookups[p].forEach(function(R){return R(S)}),delete c.pendingLookups[p]})}else b.statusCode>=400&&b.statusCode<500?(c.completedLookups[p]=void 0,delete c.pendingLookups[p]):setTimeout(g,l.correlationIdRetryIntervalMs)});f&&(f.on("error",function(b){v.warn(c.TAG,b)}),f.end())}};setTimeout(g,0)},c.cancelCorrelationIdQuery=function(l,h){var p=l.profileQueryEndpoint+"/api/profiles/"+l.instrumentationKey+"/appId",g=c.pendingLookups[p];g&&(c.pendingLookups[p]=g.filter(function(y){return y!=h}),c.pendingLookups[p].length==0&&delete c.pendingLookups[p])},c.generateRequestId=function(l){if(l){l=l[0]=="|"?l:"|"+l,l[l.length-1]!=="."&&(l+=".");var h=(c.currentRootId++).toString(16);return c.appendSuffix(l,h,"_")}else return c.generateRootId()},c.getRootId=function(l){var h=l.indexOf(".");h<0&&(h=l.length);var p=l[0]==="|"?1:0;return l.substring(p,h)},c.generateRootId=function(){return"|"+d.w3cTraceId()+"."},c.appendSuffix=function(l,h,p){if(l.length+h.length<c.requestIdMaxLength)return l+h+p;var g=c.requestIdMaxLength-9;if(l.length>g)for(;g>1;--g){var y=l[g-1];if(y==="."||y==="_")break}if(g<=1)return c.generateRootId();for(h=d.randomu32().toString(16);h.length<8;)h="0"+h;return l.substring(0,g)+h+"#"},c.TAG="CorrelationIdManager",c.correlationIdPrefix="cid-v1:",c.w3cEnabled=!0,c.pendingLookups={},c.completedLookups={},c.requestIdMaxLength=1024,c.currentRootId=d.randomu32(),c}();T.exports=_}),ws=I((s,T)=>{"use strict";var d=yr(),v=pi(),_=function(){function c(l,h){if(this.traceFlag=c.DEFAULT_TRACE_FLAG,this.version=c.DEFAULT_VERSION,l&&typeof l=="string")if(l.split(",").length>1)this.traceId=d.w3cTraceId(),this.spanId=d.w3cTraceId().substr(0,16);else{var p=l.trim().split("-"),g=p.length;g>=4?(this.version=p[0],this.traceId=p[1],this.spanId=p[2],this.traceFlag=p[3]):(this.traceId=d.w3cTraceId(),this.spanId=d.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=c.DEFAULT_VERSION,this.traceId=d.w3cTraceId()),this.version==="00"&&g!==4&&(this.traceId=d.w3cTraceId(),this.spanId=d.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=c.DEFAULT_VERSION,this.traceId=d.w3cTraceId(),this.spanId=d.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=c.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=c.DEFAULT_TRACE_FLAG,this.traceId=d.w3cTraceId()),c.isValidTraceId(this.traceId)||(this.traceId=d.w3cTraceId()),c.isValidSpanId(this.spanId)||(this.spanId=d.w3cTraceId().substr(0,16),this.traceId=d.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(h){this.parentId=h.slice();var y=v.getRootId(h);c.isValidTraceId(y)||(this.legacyRootId=y,y=d.w3cTraceId()),h.indexOf("|")!==-1&&(h=h.substring(1+h.substring(0,h.length-1).lastIndexOf("."),h.length-1)),this.traceId=y,this.spanId=h}else this.traceId=d.w3cTraceId(),this.spanId=d.w3cTraceId().substr(0,16)}return c.isValidTraceId=function(l){return l.match(/^[0-9a-f]{32}$/)&&l!=="00000000000000000000000000000000"},c.isValidSpanId=function(l){return l.match(/^[0-9a-f]{16}$/)&&l!=="0000000000000000"},c.formatOpenTelemetryTraceFlags=function(l){var h="0"+l.toString(16);return h.substring(h.length-2)},c.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},c.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},c.prototype.updateSpanId=function(){this.spanId=d.w3cTraceId().substr(0,16)},c.DEFAULT_TRACE_FLAG="01",c.DEFAULT_VERSION="00",c}();T.exports=_}),No=I((s,T)=>{"use strict";var d=function(){function v(_){this.fieldmap=[],!!_&&(this.fieldmap=this.parseHeader(_))}return v.prototype.toString=function(){var _=this.fieldmap;return!_||_.length==0?null:_.join(", ")},v.validateKeyChars=function(_){var c=_.split("@");if(c.length==2){var l=c[0].trim(),h=c[1].trim(),p=Boolean(l.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),g=Boolean(h.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return p&&g}else if(c.length==1)return Boolean(_.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/));return!1},v.prototype.parseHeader=function(_){var c=[],l={},h=_.split(",");if(h.length>32)return null;for(var p=0,g=h;p<g.length;p++){var y=g[p],f=y.trim();if(f.length!==0){var b=f.split("=");if(b.length!==2||!v.validateKeyChars(b[0])||l[b[0]])return null;l[b[0]]=!0,c.push(f)}}return c},v.strict=!0,v}();T.exports=d}),kn=I((s,T)=>{"use strict";var d=function(){function v(){}return v}();T.exports=d}),Ao=I((s,T)=>{"use strict";var d=s&&s.__extends||function(){var c=function(l,h){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(p[y]=g[y])},c(l,h)};return function(l,h){c(l,h);function p(){this.constructor=l}l.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)}}(),v=kn(),_=function(c){d(l,c);function l(){var h=c.call(this)||this;return h.ver=2,h.properties={},h.measurements={},h}return l}(v);T.exports=_}),ha=I((s,T)=>{"use strict";var d=function(){function v(){}return v}();T.exports=d}),mi=I((s,T)=>{"use strict";var d=function(){function v(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return v}();T.exports=d}),$i=I((s,T)=>{"use strict";var d=s&&s.__extends||function(){var c=function(l,h){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(p[y]=g[y])},c(l,h)};return function(l,h){c(l,h);function p(){this.constructor=l}l.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)}}(),v=ha(),_=function(c){d(l,c);function l(){return c.call(this)||this}return l}(v);T.exports=_}),Vn=I((s,T)=>{"use strict";var d;(function(v){v[v.Measurement=0]="Measurement",v[v.Aggregation=1]="Aggregation"})(d||(d={})),T.exports=d}),pa=I((s,T)=>{"use strict";var d=Vn(),v=function(){function _(){this.kind=d.Measurement}return _}();T.exports=v}),gl=I((s,T)=>{"use strict";var d=function(){function v(){this.ver=1,this.sampleRate=100,this.tags={}}return v}();T.exports=d}),Io=I((s,T)=>{"use strict";var d=s&&s.__extends||function(){var c=function(l,h){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(p[y]=g[y])},c(l,h)};return function(l,h){c(l,h);function p(){this.constructor=l}l.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)}}(),v=kn(),_=function(c){d(l,c);function l(){var h=c.call(this)||this;return h.ver=2,h.properties={},h.measurements={},h}return l}(v);T.exports=_}),vl=I((s,T)=>{"use strict";var d=s&&s.__extends||function(){var c=function(l,h){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(p[y]=g[y])},c(l,h)};return function(l,h){c(l,h);function p(){this.constructor=l}l.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)}}(),v=kn(),_=function(c){d(l,c);function l(){var h=c.call(this)||this;return h.ver=2,h.exceptions=[],h.properties={},h.measurements={},h}return l}(v);T.exports=_}),Oo=I((s,T)=>{"use strict";var d=function(){function v(){this.hasFullStack=!0,this.parsedStack=[]}return v}();T.exports=d}),yl=I((s,T)=>{"use strict";var d=s&&s.__extends||function(){var c=function(l,h){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(p[y]=g[y])},c(l,h)};return function(l,h){c(l,h);function p(){this.constructor=l}l.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)}}(),v=kn(),_=function(c){d(l,c);function l(){var h=c.call(this)||this;return h.ver=2,h.properties={},h}return l}(v);T.exports=_}),Do=I((s,T)=>{"use strict";var d=s&&s.__extends||function(){var c=function(l,h){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(p[y]=g[y])},c(l,h)};return function(l,h){c(l,h);function p(){this.constructor=l}l.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)}}(),v=kn(),_=function(c){d(l,c);function l(){var h=c.call(this)||this;return h.ver=2,h.metrics=[],h.properties={},h}return l}(v);T.exports=_}),pd=I((s,T)=>{"use strict";var d=s&&s.__extends||function(){var c=function(l,h){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(p[y]=g[y])},c(l,h)};return function(l,h){c(l,h);function p(){this.constructor=l}l.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)}}(),v=Io(),_=function(c){d(l,c);function l(){var h=c.call(this)||this;return h.ver=2,h.properties={},h.measurements={},h}return l}(v);T.exports=_}),bl=I((s,T)=>{"use strict";var d=s&&s.__extends||function(){var c=function(l,h){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(p[y]=g[y])},c(l,h)};return function(l,h){c(l,h);function p(){this.constructor=l}l.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)}}(),v=kn(),_=function(c){d(l,c);function l(){var h=c.call(this)||this;return h.ver=2,h.success=!0,h.properties={},h.measurements={},h}return l}(v);T.exports=_}),md=I((s,T)=>{"use strict";var d=s&&s.__extends||function(){var c=function(l,h){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(p[y]=g[y])},c(l,h)};return function(l,h){c(l,h);function p(){this.constructor=l}l.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)}}(),v=kn(),_=function(c){d(l,c);function l(){var h=c.call(this)||this;return h.ver=2,h.properties={},h.measurements={},h}return l}(v);T.exports=_}),_l=I((s,T)=>{"use strict";var d;(function(v){v[v.Verbose=0]="Verbose",v[v.Information=1]="Information",v[v.Warning=2]="Warning",v[v.Error=3]="Error",v[v.Critical=4]="Critical"})(d||(d={})),T.exports=d}),mt=I((s,T)=>{"use strict";var d=function(){function v(){}return v}();T.exports=d}),Sn=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.AvailabilityData=Ao(),s.Base=ha(),s.ContextTagKeys=mi(),s.Data=$i(),s.DataPoint=pa(),s.DataPointType=Vn(),s.Domain=kn(),s.Envelope=gl(),s.EventData=Io(),s.ExceptionData=vl(),s.ExceptionDetails=Oo(),s.MessageData=yl(),s.MetricData=Do(),s.PageViewData=pd(),s.RemoteDependencyData=bl(),s.RequestData=md(),s.SeverityLevel=_l(),s.StackFrame=mt()}),fi=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.domainSupportsProperties=s.RemoteDependencyDataConstants=void 0;var T=Sn(),d=function(){function _(){}return _.TYPE_HTTP="Http",_.TYPE_AI="Http (tracked component)",_}();s.RemoteDependencyDataConstants=d;function v(_){return"properties"in _||_ instanceof T.EventData||_ instanceof T.ExceptionData||_ instanceof T.MessageData||_ instanceof T.MetricData||_ instanceof T.PageViewData||_ instanceof T.RemoteDependencyData||_ instanceof T.RequestData}s.domainSupportsProperties=v}),Es=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Cr=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),wl=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),sn=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),ma=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),gi=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),dr=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),fa=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),an=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),xo=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Xt=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),vi=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),El=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.TelemetryType=s.TelemetryTypeString=s.baseTypeToTelemetryType=s.telemetryTypeToBaseType=void 0;function T(_){switch(_){case v.Event:return"EventData";case v.Exception:return"ExceptionData";case v.Trace:return"MessageData";case v.Metric:return"MetricData";case v.Request:return"RequestData";case v.Dependency:return"RemoteDependencyData";case v.Availability:return"AvailabilityData";case v.PageView:return"PageViewData"}}s.telemetryTypeToBaseType=T;function d(_){switch(_){case"EventData":return v.Event;case"ExceptionData":return v.Exception;case"MessageData":return v.Trace;case"MetricData":return v.Metric;case"RequestData":return v.Request;case"RemoteDependencyData":return v.Dependency;case"AvailabilityData":return v.Availability;case"PageViewData":return v.PageView}}s.baseTypeToTelemetryType=d,s.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"};var v;(function(_){_[_.Event=0]="Event",_[_.Exception=1]="Exception",_[_.Trace=2]="Trace",_[_.Metric=3]="Metric",_[_.Request=4]="Request",_[_.Dependency=5]="Dependency",_[_.Availability=6]="Availability",_[_.PageView=7]="PageView"})(v=s.TelemetryType||(s.TelemetryType={}))}),Mo=I(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(Es(),s),d(Cr(),s),d(wl(),s),d(sn(),s),d(ma(),s),d(gi(),s),d(dr(),s),d(fa(),s),d(an(),s),d(xo(),s),d(Xt(),s),d(vi(),s),d(El(),s)}),Gi=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Fo=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Lo=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),qo=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),kl=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Uo=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),ga=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Hi=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),$o=I(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(Gi(),s),d(Fo(),s),d(Lo(),s),d(qo(),s),d(kl(),s),d(Uo(),s),d(ga(),s),d(Hi(),s)}),zt=I(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(fi(),s),d(Sn(),s),d(Mo(),s),d($o(),s)}),Ut=I((s,T)=>{"use strict";var d=function(){function v(){}return v.prototype.getUrl=function(){return this.url},v.prototype.RequestParser=function(){this.startTime=+new Date},v.prototype._setStatus=function(_,c){var l=+new Date;this.duration=l-this.startTime,this.statusCode=_;var h=this.properties||{};if(c){if(typeof c=="string")h.error=c;else if(c instanceof Error)h.error=c.message;else if(typeof c=="object")for(var p in c)h[p]=c[p]&&c[p].toString&&c[p].toString()}this.properties=h},v.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},v}();T.exports=d}),Fr=I((s,T)=>{"use strict";var d=s&&s.__extends||function(){var b=function(w,S){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,A){R.__proto__=A}||function(R,A){for(var D in A)Object.prototype.hasOwnProperty.call(A,D)&&(R[D]=A[D])},b(w,S)};return function(w,S){b(w,S);function R(){this.constructor=w}w.prototype=S===null?Object.create(S):(R.prototype=S.prototype,new R)}}(),v=M(8835),_=zt(),c=yr(),l=hi(),h=Ut(),p=pi(),g=No(),y=ws(),f=function(b){d(w,b);function w(S,R){var A=b.call(this)||this;return S&&(A.method=S.method,A.url=A._getAbsoluteUrl(S),A.startTime=+new Date,A.socketRemoteAddress=S.socket&&S.socket.remoteAddress,A.parseHeaders(S,R),S.connection&&(A.connectionRemoteAddress=S.connection.remoteAddress,A.legacySocketRemoteAddress=S.connection.socket&&S.connection.socket.remoteAddress)),A}return w.prototype.onError=function(S,R){this._setStatus(void 0,S),R&&(this.duration=R)},w.prototype.onResponse=function(S,R){this._setStatus(S.statusCode,void 0),R&&(this.duration=R)},w.prototype.getRequestTelemetry=function(S){var R={id:this.requestId,name:this.method+" "+v.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(S&&S.time?R.time=S.time:this.startTime&&(R.time=new Date(this.startTime)),S){for(var A in S)R[A]||(R[A]=S[A]);if(S.properties)for(var A in S.properties)R.properties[A]=S.properties[A]}return R},w.prototype.getRequestTags=function(S){var R={};for(var A in S)R[A]=S[A];return R[w.keys.locationIp]=S[w.keys.locationIp]||this._getIp(),R[w.keys.sessionId]=S[w.keys.sessionId]||this._getId("ai_session"),R[w.keys.userId]=S[w.keys.userId]||this._getId("ai_user"),R[w.keys.userAuthUserId]=S[w.keys.userAuthUserId]||this._getId("ai_authUser"),R[w.keys.operationName]=this.getOperationName(S),R[w.keys.operationParentId]=this.getOperationParentId(S),R[w.keys.operationId]=this.getOperationId(S),R},w.prototype.getOperationId=function(S){return S[w.keys.operationId]||this.operationId},w.prototype.getOperationParentId=function(S){return S[w.keys.operationParentId]||this.parentId||this.getOperationId(S)},w.prototype.getOperationName=function(S){return S[w.keys.operationName]||this.method+" "+v.parse(this.url).pathname},w.prototype.getRequestId=function(){return this.requestId},w.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},w.prototype.getTraceparent=function(){return this.traceparent},w.prototype.getTracestate=function(){return this.tracestate},w.prototype.getLegacyRootId=function(){return this.legacyRootId},w.prototype._getAbsoluteUrl=function(S){if(!S.headers)return S.url;var R=S.connection?S.connection.encrypted:null,A=v.parse(S.url),D=A.pathname,j=A.search,ee=R||S.headers["x-forwarded-proto"]=="https"?"https":"http",K=v.format({protocol:ee,host:S.headers.host,pathname:D,search:j});return K},w.prototype._getIp=function(){var S=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,R=function(D){var j=S.exec(D);if(j)return j[0]},A=R(this.rawHeaders["x-forwarded-for"])||R(this.rawHeaders["x-client-ip"])||R(this.rawHeaders["x-real-ip"])||R(this.connectionRemoteAddress)||R(this.socketRemoteAddress)||R(this.legacySocketRemoteAddress);return!A&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(A="127.0.0.1"),A},w.prototype._getId=function(S){var R=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"",A=w.parseId(c.getCookie(S,R));return A},w.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},w.prototype.parseHeaders=function(S,R){if(this.rawHeaders=S.headers||S.rawHeaders,this.userAgent=S.headers&&S.headers["user-agent"],this.sourceCorrelationId=c.getCorrelationContextTarget(S,l.requestContextSourceKey),S.headers){var A=S.headers[l.traceStateHeader]?S.headers[l.traceStateHeader].toString():null,D=S.headers[l.traceparentHeader]?S.headers[l.traceparentHeader].toString():null,j=S.headers[l.requestIdHeader]?S.headers[l.requestIdHeader].toString():null,ee=S.headers[l.parentIdHeader]?S.headers[l.parentIdHeader].toString():null,K=S.headers[l.rootIdHeader]?S.headers[l.rootIdHeader].toString():null;this.correlationContextHeader=S.headers[l.correlationContextHeader]?S.headers[l.correlationContextHeader].toString():null,p.w3cEnabled&&(D||A)?(this.traceparent=new y(D?D.toString():null),this.tracestate=D&&A&&new g(A?A.toString():null),this.setBackCompatFromThisTraceContext()):j?p.w3cEnabled?(this.traceparent=new y(null,j),this.setBackCompatFromThisTraceContext()):(this.parentId=j,this.requestId=p.generateRequestId(this.parentId),this.operationId=p.getRootId(this.requestId)):p.w3cEnabled?(this.traceparent=new y,this.traceparent.parentId=ee,this.traceparent.legacyRootId=K||ee,this.setBackCompatFromThisTraceContext()):(this.parentId=ee,this.requestId=p.generateRequestId(K||this.parentId),this.correlationContextHeader=null,this.operationId=p.getRootId(this.requestId)),R&&(this.requestId=R,this.operationId=p.getRootId(this.requestId))}},w.parseId=function(S){var R=S.split("|");return R.length>0?R[0]:""},w.keys=new _.ContextTagKeys,w}(h);T.exports=f}),Bi=I((s,T)=>{"use strict";function d(y){return typeof y=="function"}var v=console.error.bind(console);function _(y,f,b){var w=!!y[f]&&y.propertyIsEnumerable(f);Object.defineProperty(y,f,{configurable:!0,enumerable:w,writable:!0,value:b})}function c(y){y&&y.logger&&(d(y.logger)?v=y.logger:v("new logger isn't a function, not replacing"))}function l(y,f,b){if(!y||!y[f]){v("no original function "+f+" to wrap");return}if(!b){v("no wrapper function"),v(new Error().stack);return}if(!d(y[f])||!d(b)){v("original object and wrapper must be functions");return}var w=y[f],S=b(w,f);return _(S,"__original",w),_(S,"__unwrap",function(){y[f]===S&&_(y,f,w)}),_(S,"__wrapped",!0),_(y,f,S),S}function h(y,f,b){if(y)Array.isArray(y)||(y=[y]);else{v("must provide one or more modules to patch"),v(new Error().stack);return}if(!(f&&Array.isArray(f))){v("must provide one or more functions to wrap on modules");return}y.forEach(function(w){f.forEach(function(S){l(w,S,b)})})}function p(y,f){if(!y||!y[f]){v("no function to unwrap."),v(new Error().stack);return}if(!y[f].__unwrap)v("no original to unwrap to -- has "+f+" already been unwrapped?");else return y[f].__unwrap()}function g(y,f){if(y)Array.isArray(y)||(y=[y]);else{v("must provide one or more modules to patch"),v(new Error().stack);return}if(!(f&&Array.isArray(f))){v("must provide one or more functions to unwrap on modules");return}y.forEach(function(b){f.forEach(function(w){p(b,w)})})}c.wrap=l,c.massWrap=h,c.unwrap=p,c.massUnwrap=g,T.exports=c}),Vi=I((s,T)=>{"use strict";var d=Bi(),v=d.wrap,_=d.unwrap,c="wrap@before";function l(f,b,w){var S=!!f[b]&&f.propertyIsEnumerable(b);Object.defineProperty(f,b,{configurable:!0,enumerable:S,writable:!0,value:w})}function h(f,b){for(var w=b.length,S=0;S<w;S++){var R=b[S],A=f[c];if(typeof A=="function")A(R);else if(Array.isArray(A))for(var D=A.length,j=0;j<D;j++)A[j](R)}}function p(f,b){var w;return w=f._events&&f._events[b],Array.isArray(w)||(w?w=[w]:w=[]),w}function g(f,b,w){var S=p(f,b),R=S.filter(function(A){return w.indexOf(A)===-1});R.length>0&&h(f,R)}function y(f,b){if(f){var w=f;if(typeof f=="function")w=b(f);else if(Array.isArray(f)){w=[];for(var S=0;S<f.length;S++)w[S]=b(f[S])}return w}}T.exports=function(f,b,w){if(!f||!f.on||!f.addListener||!f.removeListener||!f.emit)throw new Error("can only wrap real EEs");if(!b)throw new Error("must have function to run on listener addition");if(!w)throw new Error("must have function to wrap listeners when emitting");function S(A){return function(D,j){var ee=p(this,D).slice();try{var K=A.call(this,D,j);return g(this,D,ee),K}finally{this.on.__wrapped||v(this,"on",S),this.addListener.__wrapped||v(this,"addListener",S)}}}function R(A){return function(D){if(!this._events||!this._events[D])return A.apply(this,arguments);var j=this._events[D];function ee(K){return function(){this._events[D]=j;try{return K.apply(this,arguments)}finally{j=this._events[D],this._events[D]=y(j,w)}}}v(this,"removeListener",ee);try{return this._events[D]=y(j,w),A.apply(this,arguments)}finally{_(this,"removeListener"),this._events[D]=j}}}f[c]?typeof f[c]=="function"?l(f,c,[f[c],b]):Array.isArray(f[c])&&f[c].push(b):l(f,c,b),f.__wrapped||(v(f,"addListener",S),v(f,"on",S),v(f,"emit",R),l(f,"__unwrap",function(){_(f,"addListener"),_(f,"on"),_(f,"emit"),delete f[c],delete f.__wrapped}),l(f,"__wrapped",!0))}}),va=I((s,T)=>{"use strict";var d=M(1669),v=M(2357),_=Vi(),c=M(7303),l="cls@contexts",h="error@context",p=process.env.DEBUG_CLS_HOOKED,g=-1;T.exports={getNamespace:f,createNamespace:b,destroyNamespace:w,reset:S,ERROR_SYMBOL:h};function y(A){this.name=A,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}y.prototype.set=function(A,D){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[A]=D,p){let j=" ".repeat(this._indent<0?0:this._indent);R(j+"CONTEXT-SET KEY:"+A+"="+D+" in ns:"+this.name+" currentUid:"+g+" active:"+d.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return D},y.prototype.get=function(A){if(!this.active){if(p){let D=c.currentId(),j=c.triggerAsyncId(),ee=" ".repeat(this._indent<0?0:this._indent);R(`${ee}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${A}=undefined currentUid:${g} asyncHooksCurrentId:${D} triggerId:${j} len:${this._set.length}`)}return}if(p){let D=c.executionAsyncId(),j=c.triggerAsyncId(),ee=" ".repeat(this._indent<0?0:this._indent);R(ee+"CONTEXT-GETTING KEY:"+A+"="+this.active[A]+" ("+this.name+") currentUid:"+g+" active:"+d.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),R(`${ee}CONTEXT-GETTING KEY: (${this.name}) ${A}=${this.active[A]} currentUid:${g} asyncHooksCurrentId:${D} triggerId:${j} len:${this._set.length} active:${d.inspect(this.active)}`)}return this.active[A]},y.prototype.createContext=function(){let A=Object.create(this.active?this.active:Object.prototype);if(A._ns_name=this.name,A.id=g,p){let D=c.executionAsyncId(),j=c.triggerAsyncId(),ee=" ".repeat(this._indent<0?0:this._indent);R(`${ee}CONTEXT-CREATED Context: (${this.name}) currentUid:${g} asyncHooksCurrentId:${D} triggerId:${j} len:${this._set.length} context:${d.inspect(A,{showHidden:!0,depth:2,colors:!0})}`)}return A},y.prototype.run=function(A){let D=this.createContext();this.enter(D);try{if(p){let j=c.triggerAsyncId(),ee=c.executionAsyncId(),K=" ".repeat(this._indent<0?0:this._indent);R(`${K}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${g} triggerId:${j} asyncHooksCurrentId:${ee} len:${this._set.length} context:${d.inspect(D)}`)}return A(D),D}catch(j){throw j&&(j[h]=D),j}finally{if(p){let j=c.triggerAsyncId(),ee=c.executionAsyncId(),K=" ".repeat(this._indent<0?0:this._indent);R(`${K}CONTEXT-RUN END: (${this.name}) currentUid:${g} triggerId:${j} asyncHooksCurrentId:${ee} len:${this._set.length} ${d.inspect(D)}`)}this.exit(D)}},y.prototype.runAndReturn=function(A){let D;return this.run(function(j){D=A(j)}),D},y.prototype.runPromise=function(A){let D=this.createContext();this.enter(D);let j=A(D);if(!j||!j.then||!j.catch)throw new Error("fn must return a promise.");return p&&R("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+g+" len:"+this._set.length+" "+d.inspect(D)),j.then(ee=>(p&&R("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+g+" len:"+this._set.length+" "+d.inspect(D)),this.exit(D),ee)).catch(ee=>{throw ee[h]=D,p&&R("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+g+" len:"+this._set.length+" "+d.inspect(D)),this.exit(D),ee})},y.prototype.bind=function(A,D){D||(this.active?D=this.active:D=this.createContext());let j=this;return function(){j.enter(D);try{return A.apply(this,arguments)}catch(ee){throw ee&&(ee[h]=D),ee}finally{j.exit(D)}}},y.prototype.enter=function(A){if(v.ok(A,"context must be provided for entering"),p){let D=c.executionAsyncId(),j=c.triggerAsyncId(),ee=" ".repeat(this._indent<0?0:this._indent);R(`${ee}CONTEXT-ENTER: (${this.name}) currentUid:${g} triggerId:${j} asyncHooksCurrentId:${D} len:${this._set.length} ${d.inspect(A)}`)}this._set.push(this.active),this.active=A},y.prototype.exit=function(A){if(v.ok(A,"context must be provided for exiting"),p){let j=c.executionAsyncId(),ee=c.triggerAsyncId(),K=" ".repeat(this._indent<0?0:this._indent);R(`${K}CONTEXT-EXIT: (${this.name}) currentUid:${g} triggerId:${ee} asyncHooksCurrentId:${j} len:${this._set.length} ${d.inspect(A)}`)}if(this.active===A){v.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let D=this._set.lastIndexOf(A);D<0?(p&&R("??ERROR?? context exiting but not entered - ignoring: "+d.inspect(A)),v.ok(D>=0,`context not currently entered; can't exit. 
`+d.inspect(this)+`
`+d.inspect(A))):(v.ok(D,"can't remove top context"),this._set.splice(D,1))},y.prototype.bindEmitter=function(A){v.ok(A.on&&A.addListener&&A.emit,"can only bind real EEs");let D=this,j="context@"+this.name;function ee(oe){!oe||(oe[l]||(oe[l]=Object.create(null)),oe[l][j]={namespace:D,context:D.active})}function K(oe){if(!(oe&&oe[l]))return oe;let ge=oe,ke=oe[l];return Object.keys(ke).forEach(function(Se){let Pe=ke[Se];ge=Pe.namespace.bind(ge,Pe.context)}),ge}_(A,ee,K)},y.prototype.fromException=function(A){return A[h]};function f(A){return process.namespaces[A]}function b(A){v.ok(A,"namespace must be given a name."),p&&R(`NS-CREATING NAMESPACE (${A})`);let D=new y(A);return D.id=g,c.createHook({init(j,ee,K,oe){if(g=c.executionAsyncId(),D.active){if(D._contexts.set(j,D.active),p){let ge=" ".repeat(D._indent<0?0:D._indent);R(`${ge}INIT [${ee}] (${A}) asyncId:${j} currentUid:${g} triggerId:${K} active:${d.inspect(D.active,{showHidden:!0,depth:2,colors:!0})} resource:${oe}`)}}else if(g===0){let ge=c.triggerAsyncId(),ke=D._contexts.get(ge);if(ke){if(D._contexts.set(j,ke),p){let Se=" ".repeat(D._indent<0?0:D._indent);R(`${Se}INIT USING CONTEXT FROM TRIGGERID [${ee}] (${A}) asyncId:${j} currentUid:${g} triggerId:${ge} active:${d.inspect(D.active,{showHidden:!0,depth:2,colors:!0})} resource:${oe}`)}}else if(p){let Se=" ".repeat(D._indent<0?0:D._indent);R(`${Se}INIT MISSING CONTEXT [${ee}] (${A}) asyncId:${j} currentUid:${g} triggerId:${ge} active:${d.inspect(D.active,{showHidden:!0,depth:2,colors:!0})} resource:${oe}`)}}if(p&&ee==="PROMISE"){R(d.inspect(oe,{showHidden:!0}));let ge=oe.parentId,ke=" ".repeat(D._indent<0?0:D._indent);R(`${ke}INIT RESOURCE-PROMISE [${ee}] (${A}) parentId:${ge} asyncId:${j} currentUid:${g} triggerId:${K} active:${d.inspect(D.active,{showHidden:!0,depth:2,colors:!0})} resource:${oe}`)}},before(j){g=c.executionAsyncId();let ee;if(ee=D._contexts.get(j)||D._contexts.get(g),ee){if(p){let K=c.triggerAsyncId(),oe=" ".repeat(D._indent<0?0:D._indent);R(`${oe}BEFORE (${A}) asyncId:${j} currentUid:${g} triggerId:${K} active:${d.inspect(D.active,{showHidden:!0,depth:2,colors:!0})} context:${d.inspect(ee)}`),D._indent+=2}D.enter(ee)}else if(p){let K=c.triggerAsyncId(),oe=" ".repeat(D._indent<0?0:D._indent);R(`${oe}BEFORE MISSING CONTEXT (${A}) asyncId:${j} currentUid:${g} triggerId:${K} active:${d.inspect(D.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${d.inspect(D._contexts,{showHidden:!0,depth:2,colors:!0})}`),D._indent+=2}},after(j){g=c.executionAsyncId();let ee;if(ee=D._contexts.get(j)||D._contexts.get(g),ee){if(p){let K=c.triggerAsyncId();D._indent-=2;let oe=" ".repeat(D._indent<0?0:D._indent);R(`${oe}AFTER (${A}) asyncId:${j} currentUid:${g} triggerId:${K} active:${d.inspect(D.active,{showHidden:!0,depth:2,colors:!0})} context:${d.inspect(ee)}`)}D.exit(ee)}else if(p){let K=c.triggerAsyncId();D._indent-=2;let oe=" ".repeat(D._indent<0?0:D._indent);R(`${oe}AFTER MISSING CONTEXT (${A}) asyncId:${j} currentUid:${g} triggerId:${K} active:${d.inspect(D.active,{showHidden:!0,depth:2,colors:!0})} context:${d.inspect(ee)}`)}},destroy(j){if(g=c.executionAsyncId(),p){let ee=c.triggerAsyncId(),K=" ".repeat(D._indent<0?0:D._indent);R(`${K}DESTROY (${A}) currentUid:${g} asyncId:${j} triggerId:${ee} active:${d.inspect(D.active,{showHidden:!0,depth:2,colors:!0})} context:${d.inspect(D._contexts.get(g))}`)}D._contexts.delete(j)}}).enable(),process.namespaces[A]=D,D}function w(A){let D=f(A);v.ok(D,`can't delete nonexistent namespace! "`+A+'"'),v.ok(D.id,"don't assign to process.namespaces directly! "+d.inspect(D)),process.namespaces[A]=null}function S(){process.namespaces&&Object.keys(process.namespaces).forEach(function(A){w(A)}),process.namespaces=Object.create(null)}process.namespaces={};function R(...A){p&&process._rawDebug(`${d.format(...A)}`)}}),ya=I((s,T)=>{"use strict";function d(){}T.exports=function(){let v=this._hooks,_=this._state,c=process.nextTick;process.nextTick=function(){if(!_.enabled)return c.apply(process,arguments);let l=new Array(arguments.length);for(let y=0;y<arguments.length;y++)l[y]=arguments[y];let h=l[0];if(typeof h!="function")throw new TypeError("callback is not a function");let p=new d,g=--_.counter;return v.init.call(p,g,0,null,null),l[0]=function(){v.pre.call(p,g);let y=!0;try{h.apply(this,arguments),y=!1}finally{y&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){v.post.call(p,g,!0),v.destroy.call(null,g)})}v.post.call(p,g,!1),v.destroy.call(null,g)},c.apply(process,l)}}}),Sl=I((s,T)=>{"use strict";function d(){}T.exports=function(){let v=this._hooks,_=this._state,c=global.Promise,l=c.prototype.then;c.prototype.then=y;function h(f,b,w,S){return typeof f!="function"?S?p(w):g(w):function(){v.pre.call(b,w);try{return f.apply(this,arguments)}finally{v.post.call(b,w,!1),v.destroy.call(null,w)}}}function p(f){return function(b){return v.destroy.call(null,f),b}}function g(f){return function(b){throw v.destroy.call(null,f),b}}function y(f,b){if(!_.enabled)return l.call(this,f,b);let w=new d,S=--_.counter;return v.init.call(w,S,0,null,null),l.call(this,h(f,w,S,!0),h(b,w,S,!1))}}}),Tl=I((s,T)=>{"use strict";var d=M(8213);function v(){}function _(){}function c(){}var l=new Map,h=new Map,p=new Map,g=null,y=!1;T.exports=function(){f(this._hooks,this._state,"setTimeout","clearTimeout",v,l,!0),f(this._hooks,this._state,"setInterval","clearInterval",_,h,!1),f(this._hooks,this._state,"setImmediate","clearImmediate",c,p,!0),global.setTimeout=d.setTimeout,global.setInterval=d.setInterval,global.setImmediate=d.setImmediate,global.clearTimeout=d.clearTimeout,global.clearInterval=d.clearInterval,global.clearImmediate=d.clearImmediate};function f(b,w,S,R,A,D,j){let ee=d[S],K=d[R];d[S]=function(){if(!w.enabled)return ee.apply(d,arguments);let oe=new Array(arguments.length);for(let Ce=0;Ce<arguments.length;Ce++)oe[Ce]=arguments[Ce];let ge=oe[0];if(typeof ge!="function")throw new TypeError('"callback" argument must be a function');let ke=new A,Se=--w.counter,Pe;return b.init.call(ke,Se,0,null,null),oe[0]=function(){g=Pe,b.pre.call(ke,Se);let Ce=!0;try{ge.apply(this,arguments),Ce=!1}finally{Ce&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){b.post.call(ke,Se,!0),D.delete(Pe),b.destroy.call(null,Se)})}b.post.call(ke,Se,!1),g=null,(j||y)&&(y=!1,D.delete(Pe),b.destroy.call(null,Se))},Pe=ee.apply(d,oe),D.set(Pe,Se),Pe},d[R]=function(oe){if(g===oe&&oe!==null)y=!0;else if(D.has(oe)){let ge=D.get(oe);D.delete(oe),b.destroy.call(null,ge)}K.apply(d,arguments)}}}),on=I((s,T)=>{T.exports={_args:[["async-hook-jl@1.7.6","/home/runner/work/vscode-extension-telemetry/vscode-extension-telemetry"]],_development:!0,_from:"async-hook-jl@1.7.6",_id:"async-hook-jl@1.7.6",_inBundle:!1,_integrity:"sha512-gFaHkFfSxTjvoxDMYqDuGHlcRyUuamF8s+ZTtJdDzqjws4mCt7v0vuV79/E2Wr2/riMQgtG4/yUtXWs1gZ7JMg==",_location:"/async-hook-jl",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"async-hook-jl@1.7.6",name:"async-hook-jl",escapedName:"async-hook-jl",rawSpec:"1.7.6",saveSpec:null,fetchSpec:"1.7.6"},_requiredBy:["/cls-hooked"],_resolved:"https://registry.npmjs.org/async-hook-jl/-/async-hook-jl-1.7.6.tgz",_spec:"1.7.6",_where:"/home/runner/work/vscode-extension-telemetry/vscode-extension-telemetry",author:{name:"Andreas Madsen",email:"amwebdk@gmail.com"},bugs:{url:"https://github.com/jeff-lewis/async-hook-jl/issues"},dependencies:{"stack-chain":"^1.3.7"},description:"Inspect the life of handle objects in node",devDependencies:{async:"1.5.x","cli-color":"1.1.x",endpoint:"0.4.x",eslint:"^3.4.0"},engines:{node:"^4.7 || >=6.9 || >=7.3"},homepage:"https://github.com/jeff-lewis/async-hook-jl#readme",keywords:["async","async hooks","inspect","async wrap"],license:"MIT",main:"./index.js",name:"async-hook-jl",repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},scripts:{test:"node ./test/runner.js && eslint ."},version:"1.7.6"}}),Rl=I((s,T)=>{"use strict";var d=process.binding("async_wrap"),v=d.Providers.TIMERWRAP,_={nextTick:ya(),promise:Sl(),timers:Tl()},c=new Set;function l(){this.enabled=!1,this.counter=0}function h(){let y=this.initFns=[],f=this.preFns=[],b=this.postFns=[],w=this.destroyFns=[];this.init=function(S,R,A,D){if(R===v){c.add(S);return}for(let j of y)j(S,this,R,A,D)},this.pre=function(S){if(!c.has(S))for(let R of f)R(S,this)},this.post=function(S,R){if(!c.has(S))for(let A of b)A(S,this,R)},this.destroy=function(S){if(c.has(S)){c.delete(S);return}for(let R of w)R(S)}}h.prototype.add=function(y){y.init&&this.initFns.push(y.init),y.pre&&this.preFns.push(y.pre),y.post&&this.postFns.push(y.post),y.destroy&&this.destroyFns.push(y.destroy)};function p(y,f){let b=y.indexOf(f);b!==-1&&y.splice(b,1)}h.prototype.remove=function(y){y.init&&p(this.initFns,y.init),y.pre&&p(this.preFns,y.pre),y.post&&p(this.postFns,y.post),y.destroy&&p(this.destroyFns,y.destroy)};function g(){this._state=new l,this._hooks=new h,this.version=on().version,this.providers=d.Providers;for(let y of Object.keys(_))_[y].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),d.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}T.exports=g,g.prototype.addHooks=function(y){this._hooks.add(y)},g.prototype.removeHooks=function(y){this._hooks.remove(y)},g.prototype.enable=function(){this._state.enabled=!0,d.enable()},g.prototype.disable=function(){this._state.enabled=!1,d.disable()}}),Br=I((s,T)=>{T.exports={_args:[["stack-chain@1.3.7","/home/runner/work/vscode-extension-telemetry/vscode-extension-telemetry"]],_development:!0,_from:"stack-chain@1.3.7",_id:"stack-chain@1.3.7",_inBundle:!1,_integrity:"sha1-0ZLJ/06moiyUxN1FkXHj8AzqEoU=",_location:"/stack-chain",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"stack-chain@1.3.7",name:"stack-chain",escapedName:"stack-chain",rawSpec:"1.3.7",saveSpec:null,fetchSpec:"1.3.7"},_requiredBy:["/async-hook-jl"],_resolved:"https://registry.npmjs.org/stack-chain/-/stack-chain-1.3.7.tgz",_spec:"1.3.7",_where:"/home/runner/work/vscode-extension-telemetry/vscode-extension-telemetry",author:{name:"Andreas Madsen",email:"amwebdk@gmail.com"},bugs:{url:"https://github.com/AndreasMadsen/stack-chain/issues"},description:"API for combining call site modifiers",devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},homepage:"https://github.com/AndreasMadsen/stack-chain#readme",keywords:["stack","chain","trace","call site","concat","format"],license:"MIT",name:"stack-chain",repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},scripts:{test:"tap ./test/simple"},version:"1.3.7"}}),un=I((s,T)=>{function d(v){try{return Error.prototype.toString.call(v)}catch(_){try{return"<error: "+_+">"}catch(c){return"<error>"}}}T.exports=function(v,_){var c=[];c.push(d(v));for(var l=0;l<_.length;l++){var h=_[l],p;try{p=h.toString()}catch(g){try{p="<error: "+g+">"}catch(y){p="<error>"}}c.push("    at "+p)}return c.join(`
`)}}),ba=I((s,T)=>{var d=un();function v(){this.extend=new l,this.filter=new l,this.format=new h,this.version=Br().version}var _=!1;v.prototype.callSite=function f(b){b||(b={}),_=!0;var w={};Error.captureStackTrace(w,f);var S=w.stack;return _=!1,S=S.slice(b.slice||0),b.extend&&(S=this.extend._modify(w,S)),b.filter&&(S=this.filter._modify(w,S)),S};var c=new v;function l(){this._modifiers=[]}l.prototype._modify=function(f,b){for(var w=0,S=this._modifiers.length;w<S;w++)b=this._modifiers[w](f,b);return b},l.prototype.attach=function(f){this._modifiers.push(f)},l.prototype.deattach=function(f){var b=this._modifiers.indexOf(f);return b===-1?!1:(this._modifiers.splice(b,1),!0)};function h(){this._formater=d,this._previous=void 0}h.prototype.replace=function(f){f?this._formater=f:this.restore()},h.prototype.restore=function(){this._formater=d,this._previous=void 0},h.prototype._backup=function(){this._previous=this._formater},h.prototype._roolback=function(){this._previous===d?this.replace(void 0):this.replace(this._previous),this._previous=void 0},Error.prepareStackTrace&&c.format.replace(Error.prepareStackTrace);var p=!1;function g(f,b){if(_)return b;if(p)return d(f,b);var w=b.concat();w=c.extend._modify(f,w),w=c.filter._modify(f,w),w=w.slice(0,Error.stackTraceLimit),Object.isExtensible(f)&&Object.getOwnPropertyDescriptor(f,"callSite")===void 0&&(f.callSite={original:b,mutated:w}),p=!0;var S=c.format._formater(f,w);return p=!1,S}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return g},set:function(f){f===g?c.format._roolback():(c.format._backup(),c.format.replace(f))}});function y(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:y,set:function(f){Object.defineProperty(this,"callSite",{value:f,writable:!0,configurable:!0})},configurable:!0}),T.exports=c}),Go=I((s,T)=>{if(global._stackChain)if(global._stackChain.version===Br().version)T.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else T.exports=global._stackChain=ba()}),Cl=I((s,T)=>{"use strict";var d=Rl();if(global._asyncHook)if(global._asyncHook.version===on().version)T.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else Go().filter.attach(function(v,_){return _.filter(function(c){let l=c.getFileName();return!(l&&l.slice(0,__dirname.length)===__dirname)})}),T.exports=global._asyncHook=new d}),ks=I((s,T)=>{"use strict";var d=M(1669),v=M(2357),_=Vi(),c=Cl(),l="cls@contexts",h="error@context",p=[];for(let K in c.providers)p[c.providers[K]]=K;var g=process.env.DEBUG_CLS_HOOKED,y=-1;T.exports={getNamespace:b,createNamespace:w,destroyNamespace:S,reset:R,ERROR_SYMBOL:h};function f(K){this.name=K,this.active=null,this._set=[],this.id=null,this._contexts=new Map}f.prototype.set=function(K,oe){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return g&&A("    SETTING KEY:"+K+"="+oe+" in ns:"+this.name+" uid:"+y+" active:"+d.inspect(this.active,!0)),this.active[K]=oe,oe},f.prototype.get=function(K){if(!this.active){g&&A("    GETTING KEY:"+K+"=undefined "+this.name+" uid:"+y+" active:"+d.inspect(this.active,!0));return}return g&&A("    GETTING KEY:"+K+"="+this.active[K]+" "+this.name+" uid:"+y+" active:"+d.inspect(this.active,!0)),this.active[K]},f.prototype.createContext=function(){g&&A("   CREATING Context: "+this.name+" uid:"+y+" len:"+this._set.length+"  active:"+d.inspect(this.active,!0,2,!0));let K=Object.create(this.active?this.active:Object.prototype);return K._ns_name=this.name,K.id=y,g&&A("   CREATED Context: "+this.name+" uid:"+y+" len:"+this._set.length+"  context:"+d.inspect(K,!0,2,!0)),K},f.prototype.run=function(K){let oe=this.createContext();this.enter(oe);try{return g&&A(" BEFORE RUN: "+this.name+" uid:"+y+" len:"+this._set.length+" "+d.inspect(oe)),K(oe),oe}catch(ge){throw ge&&(ge[h]=oe),ge}finally{g&&A(" AFTER RUN: "+this.name+" uid:"+y+" len:"+this._set.length+" "+d.inspect(oe)),this.exit(oe)}},f.prototype.runAndReturn=function(K){var oe;return this.run(function(ge){oe=K(ge)}),oe},f.prototype.runPromise=function(K){let oe=this.createContext();this.enter(oe);let ge=K(oe);if(!ge||!ge.then||!ge.catch)throw new Error("fn must return a promise.");return g&&A(" BEFORE runPromise: "+this.name+" uid:"+y+" len:"+this._set.length+" "+d.inspect(oe)),ge.then(ke=>(g&&A(" AFTER runPromise: "+this.name+" uid:"+y+" len:"+this._set.length+" "+d.inspect(oe)),this.exit(oe),ke)).catch(ke=>{throw ke[h]=oe,g&&A(" AFTER runPromise: "+this.name+" uid:"+y+" len:"+this._set.length+" "+d.inspect(oe)),this.exit(oe),ke})},f.prototype.bind=function(K,oe){oe||(this.active?oe=this.active:oe=this.createContext());let ge=this;return function(){ge.enter(oe);try{return K.apply(this,arguments)}catch(ke){throw ke&&(ke[h]=oe),ke}finally{ge.exit(oe)}}},f.prototype.enter=function(K){v.ok(K,"context must be provided for entering"),g&&A("  ENTER "+this.name+" uid:"+y+" len:"+this._set.length+" context: "+d.inspect(K)),this._set.push(this.active),this.active=K},f.prototype.exit=function(K){if(v.ok(K,"context must be provided for exiting"),g&&A("  EXIT "+this.name+" uid:"+y+" len:"+this._set.length+" context: "+d.inspect(K)),this.active===K){v.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let oe=this._set.lastIndexOf(K);oe<0?(g&&A("??ERROR?? context exiting but not entered - ignoring: "+d.inspect(K)),v.ok(oe>=0,`context not currently entered; can't exit. 
`+d.inspect(this)+`
`+d.inspect(K))):(v.ok(oe,"can't remove top context"),this._set.splice(oe,1))},f.prototype.bindEmitter=function(K){v.ok(K.on&&K.addListener&&K.emit,"can only bind real EEs");let oe=this,ge="context@"+this.name;function ke(Pe){!Pe||(Pe[l]||(Pe[l]=Object.create(null)),Pe[l][ge]={namespace:oe,context:oe.active})}function Se(Pe){if(!(Pe&&Pe[l]))return Pe;let Ce=Pe,$e=Pe[l];return Object.keys($e).forEach(function(Qe){let at=$e[Qe];Ce=at.namespace.bind(Ce,at.context)}),Ce}_(K,ke,Se)},f.prototype.fromException=function(K){return K[h]};function b(K){return process.namespaces[K]}function w(K){v.ok(K,"namespace must be given a name."),g&&A("CREATING NAMESPACE "+K);let oe=new f(K);return oe.id=y,c.addHooks({init(ge,ke,Se,Pe,Ce){y=ge,Pe?(oe._contexts.set(ge,oe._contexts.get(Pe)),g&&A("PARENTID: "+K+" uid:"+ge+" parent:"+Pe+" provider:"+Se)):oe._contexts.set(y,oe.active),g&&A("INIT "+K+" uid:"+ge+" parent:"+Pe+" provider:"+p[Se]+" active:"+d.inspect(oe.active,!0))},pre(ge,ke){y=ge;let Se=oe._contexts.get(ge);Se?(g&&A(" PRE "+K+" uid:"+ge+" handle:"+D(ke)+" context:"+d.inspect(Se)),oe.enter(Se)):g&&A(" PRE MISSING CONTEXT "+K+" uid:"+ge+" handle:"+D(ke))},post(ge,ke){y=ge;let Se=oe._contexts.get(ge);Se?(g&&A(" POST "+K+" uid:"+ge+" handle:"+D(ke)+" context:"+d.inspect(Se)),oe.exit(Se)):g&&A(" POST MISSING CONTEXT "+K+" uid:"+ge+" handle:"+D(ke))},destroy(ge){y=ge,g&&A("DESTROY "+K+" uid:"+ge+" context:"+d.inspect(oe._contexts.get(y))+" active:"+d.inspect(oe.active,!0)),oe._contexts.delete(ge)}}),process.namespaces[K]=oe,oe}function S(K){let oe=b(K);v.ok(oe,`can't delete nonexistent namespace! "`+K+'"'),v.ok(oe.id,"don't assign to process.namespaces directly! "+d.inspect(oe)),process.namespaces[K]=null}function R(){process.namespaces&&Object.keys(process.namespaces).forEach(function(K){S(K)}),process.namespaces=Object.create(null)}process.namespaces={},c._state&&!c._state.enabled&&c.enable();function A(K){process.env.DEBUG&&process._rawDebug(K)}function D(K){if(!K)return K;if(typeof K=="function")return K.name?K.name:(K.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(K.constructor&&K.constructor.name)return K.constructor.name}if(g){j=Go();for(ee in j.filter._modifiers)j.filter.deattach(ee)}var j,ee}),Pl=I((s,T)=>{"use strict";var d=ve();process&&d.gte(process.versions.node,"8.0.0")?T.exports=va():T.exports=ks()}),jn=I((s,T)=>{var d=Bi().wrap,v=1<<0,_=1<<1,c=1<<2,l=1<<3,h=[],p=0,g=!1,y=[],f,b;function w(ke,Se){var Pe=ke.length,Ce=Se.length,$e=[];if(Pe===0&&Ce===0)return $e;for(var Qe=0;Qe<Pe;Qe++)$e[Qe]=ke[Qe];if(Ce===0)return $e;for(var at=0;at<Ce;at++){var tt=!0;for(Qe=0;Qe<Pe;Qe++)if(ke[Qe].uid===Se[at].uid){tt=!1;break}tt&&$e.push(Se[at])}return $e}process._fatalException?(S=!1,f=function(ke){var Se=h.length;if(S||Se===0)return!1;var Pe=!1;S=!0;for(var Ce=0;Ce<Se;++Ce){var $e=h[Ce];if(($e.flags&l)!=0){var Qe=R&&R[$e.uid];Pe=$e.error(Qe,ke)||Pe}}return S=!1,y.length>0&&(h=y.pop()),R=void 0,Pe&&!g},b=function(ke,Se,Pe){var Ce=[];g=!0;for(var $e=0;$e<Pe;++$e){var Qe=Se[$e];if(Ce[Qe.uid]=Qe.data,(Qe.flags&v)!=0){var at=Qe.create(Qe.data);at!==void 0&&(Ce[Qe.uid]=at)}}return g=!1,function(){R=Ce,y.push(h),h=w(Se,h),g=!0;for(var tt=0;tt<Pe;++tt)(Se[tt].flags&_)>0&&Se[tt].before(this,Ce[Se[tt].uid]);g=!1;var $t=ke.apply(this,arguments);for(g=!0,tt=0;tt<Pe;++tt)(Se[tt].flags&c)>0&&Se[tt].after(this,Ce[Se[tt].uid]);return g=!1,h=y.pop(),R=void 0,$t}},d(process,"_fatalException",function(ke){return function(Se){return f(Se)||ke(Se)}})):(A=!1,f=function(ke){if(A)throw ke;for(var Se=!1,Pe=h.length,Ce=0;Ce<Pe;++Ce){var $e=h[Ce];($e.flags&l)!=0&&(Se=$e.error(null,ke)||Se)}if(!Se&&g)throw ke},b=function(ke,Se,Pe){var Ce=[];g=!0;for(var $e=0;$e<Pe;++$e){var Qe=Se[$e];if(Ce[Qe.uid]=Qe.data,(Qe.flags&v)!=0){var at=Qe.create(Qe.data);at!==void 0&&(Ce[Qe.uid]=at)}}return g=!1,function(){var tt=!1,$t=!1;y.push(h),h=w(Se,h),g=!0;for(var lt=0;lt<Pe;++lt)(Se[lt].flags&_)>0&&Se[lt].before(this,Ce[Se[lt].uid]);g=!1;var Ie;try{Ie=ke.apply(this,arguments)}catch(qe){tt=!0;for(var lt=0;lt<Pe;++lt)if((h[lt].flags&l)!=0)try{$t=h[lt].error(Ce[Se[lt].uid],qe)||$t}catch(je){throw A=!0,je}if(!$t)throw process.removeListener("uncaughtException",f),process._originalNextTick(function(){process.addListener("uncaughtException",f)}),qe}finally{if(!tt||$t){for(g=!0,lt=0;lt<Pe;++lt)(Se[lt].flags&c)>0&&Se[lt].after(this,Ce[Se[lt].uid]);g=!1}h=y.pop()}return Ie}},process.addListener("uncaughtException",f));var S,R,A;function D(ke,Se,Pe){g=!0;for(var Ce=0;Ce<Pe;++Ce){var $e=Se[Ce];$e.create&&$e.create($e.data)}return g=!1,function(){y.push(h),h=w(Se,h);var Qe=ke.apply(this,arguments);return h=y.pop(),Qe}}function j(ke){var Se=h.length;if(Se===0)return ke;for(var Pe=h.slice(),Ce=0;Ce<Se;++Ce)if(Pe[Ce].flags>0)return b(ke,Pe,Se);return D(ke,Pe,Se)}function ee(ke,Se){typeof ke.create=="function"&&(this.create=ke.create,this.flags|=v),typeof ke.before=="function"&&(this.before=ke.before,this.flags|=_),typeof ke.after=="function"&&(this.after=ke.after,this.flags|=c),typeof ke.error=="function"&&(this.error=ke.error,this.flags|=l),this.uid=++p,this.data=Se===void 0?null:Se}ee.prototype.create=void 0,ee.prototype.before=void 0,ee.prototype.after=void 0,ee.prototype.error=void 0,ee.prototype.data=void 0,ee.prototype.uid=0,ee.prototype.flags=0;function K(ke,Se){if(typeof ke!="object"||!ke)throw new TypeError("callbacks argument must be an object");return ke instanceof ee?ke:new ee(ke,Se)}function oe(ke,Se){var Pe;ke instanceof ee?Pe=ke:Pe=K(ke,Se);for(var Ce=!1,$e=0;$e<h.length;$e++)if(Pe===h[$e]){Ce=!0;break}return Ce||h.push(Pe),Pe}function ge(ke){for(var Se=0;Se<h.length;Se++)if(ke===h[Se]){h.splice(Se,1);break}}process.createAsyncListener=K,process.addAsyncListener=oe,process.removeAsyncListener=ge,T.exports=j}),Nl=I((s,T)=>{"use strict";T.exports=(d,v)=>class extends d{constructor(_){var c,l;super(p);var h=this;try{_.apply(c,l)}catch(g){l[1](g)}return h;function p(g,y){c=this,l=[f,b];function f(w){return v(h,!1),g(w)}function b(w){return v(h,!1),y(w)}}}}}),ji=I(()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var s=Bi(),T=ve(),d=s.wrap,v=s.massWrap,_=jn(),c=M(1669),l=T.gte(process.version,"6.0.0"),h=T.gte(process.version,"7.0.0"),p=T.gte(process.version,"8.0.0"),g=T.gte(process.version,"11.0.0"),y=M(1631);h&&!y._normalizeArgs?y._normalizeArgs=function(Ie){if(Ie.length===0)return[{},null];var qe=Ie[0],Le={};typeof qe=="object"&&qe!==null?Le=qe:lt(qe)?Le.path=qe:(Le.port=qe,Ie.length>1&&typeof Ie[1]=="string"&&(Le.host=Ie[1]));var je=Ie[Ie.length-1];return typeof je!="function"?[Le,null]:[Le,je]}:!h&&!y._normalizeConnectArgs&&(y._normalizeConnectArgs=function(Ie){var qe={};function Le(Ke){return(Ke=Number(Ke))>=0?Ke:!1}typeof Ie[0]=="object"&&Ie[0]!==null?qe=Ie[0]:typeof Ie[0]=="string"&&Le(Ie[0])===!1?qe.path=Ie[0]:(qe.port=Ie[0],typeof Ie[1]=="string"&&(qe.host=Ie[1]));var je=Ie[Ie.length-1];return typeof je=="function"?[qe,je]:[qe]}),"_setUpListenHandle"in y.Server.prototype?d(y.Server.prototype,"_setUpListenHandle",f):d(y.Server.prototype,"_listen2",f);function f(Ie){return function(){this.on("connection",function(qe){qe._handle&&(qe._handle.onread=_(qe._handle.onread))});try{return Ie.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=_(this._handle.onconnection))}}}function b(Ie){if(Ie&&Ie._handle){var qe=Ie._handle;qe._originalOnread||(qe._originalOnread=qe.onread),qe.onread=_(qe._originalOnread)}}d(y.Socket.prototype,"connect",function(Ie){return function(){var qe;p&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?qe=arguments[0]:qe=h?y._normalizeArgs(arguments):y._normalizeConnectArgs(arguments),qe[1]&&(qe[1]=_(qe[1]));var Le=Ie.apply(this,qe);return b(this),Le}});var w=M(8605);d(w.Agent.prototype,"addRequest",function(Ie){return function(qe){var Le=qe.onSocket;return qe.onSocket=_(function(je){return b(je),Le.apply(this,arguments)}),Ie.apply(this,arguments)}});var S=M(3129);function R(Ie){Array.isArray(Ie.stdio)&&Ie.stdio.forEach(function(qe){qe&&qe._handle&&(qe._handle.onread=_(qe._handle.onread),d(qe._handle,"close",tt))}),Ie._handle&&(Ie._handle.onexit=_(Ie._handle.onexit))}S.ChildProcess?d(S.ChildProcess.prototype,"spawn",function(Ie){return function(){var qe=Ie.apply(this,arguments);return R(this),qe}}):v(S,["execFile","fork","spawn"],function(Ie){return function(){var qe=Ie.apply(this,arguments);return R(qe),qe}}),process._fatalException||(process._originalNextTick=process.nextTick);var A=[];process._nextDomainTick&&A.push("_nextDomainTick"),process._tickDomainCallback&&A.push("_tickDomainCallback"),v(process,A,at),d(process,"nextTick",tt);var D=["setTimeout","setInterval"];global.setImmediate&&D.push("setImmediate");var j=M(8213),ee=global.setTimeout===j.setTimeout;v(j,D,tt),ee&&v(global,D,tt);var K=M(881);v(K,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],at),K.resolveNaptr&&d(K,"resolveNaptr",at);var oe=M(5747);v(oe,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],at),oe.lchown&&d(oe,"lchown",at),oe.lchmod&&d(oe,"lchmod",at),oe.ftruncate&&d(oe,"ftruncate",at);var ge;try{ge=M(8761)}catch(Ie){}ge&&ge.Deflate&&ge.Deflate.prototype&&(ke=Object.getPrototypeOf(ge.Deflate.prototype),ke._transform?d(ke,"_transform",at):ke.write&&ke.flush&&ke.end&&v(ke,["write","flush","end"],at));var ke,Se;try{Se=M(6417)}catch(Ie){}Se&&(Pe=["pbkdf2","randomBytes"],g||Pe.push("pseudoRandomBytes"),v(Se,Pe,at));var Pe,Ce=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";Ce&&($e=process.addAsyncListener({create:function(){Ce=!1}}),global.Promise.resolve(!0).then(function(){Ce=!1}),process.removeAsyncListener($e));var $e;Ce&&Qe();function Qe(){var Ie=global.Promise;function qe(We){if(!(this instanceof qe))return Ie(We);if(typeof We!="function")return new Ie(We);var kt,Jt,Bt=new Ie(Ot);Bt.__proto__=qe.prototype;try{We.apply(kt,Jt)}catch(Et){Jt[1](Et)}return Bt;function Ot(Et,tr){kt=this,Jt=[Pr,Ze];function Pr(Xe){return je(Bt,!1),Et(Xe)}function Ze(Xe){return je(Bt,!1),tr(Xe)}}}if(c.inherits(qe,Ie),d(Ie.prototype,"then",ot),Ie.prototype.chain&&d(Ie.prototype,"chain",ot),l)global.Promise=Nl()(Ie,je);else{var Le=["all","race","reject","resolve","accept","defer"];Le.forEach(function(We){typeof Ie[We]=="function"&&(qe[We]=Ie[We])}),global.Promise=qe}function je(We,kt){(!We.__asl_wrapper||kt)&&(We.__asl_wrapper=_(Ke))}function Ke(We,kt,Jt,Bt){var Ot;try{return Ot=kt.call(We,Jt),{returnVal:Ot,error:!1}}catch(Et){return{errorVal:Et,error:!0}}finally{Ot instanceof Ie?Bt.__asl_wrapper=function(){var Et=Ot.__asl_wrapper||Ke;return Et.apply(this,arguments)}:je(Bt,!0)}}function ot(We){return function(){var kt=this,Jt=We.apply(kt,Array.prototype.map.call(arguments,Bt));return Jt.__asl_wrapper=function(Ot,Et,tr,Pr){return kt.__asl_wrapper?(kt.__asl_wrapper(Ot,function(){},null,Jt),Jt.__asl_wrapper(Ot,Et,tr,Pr)):Ke(Ot,Et,tr,Pr)},Jt;function Bt(Ot){return typeof Ot!="function"?Ot:_(function(Et){var tr=(kt.__asl_wrapper||Ke)(this,Ot,Et,Jt);if(tr.error)throw tr.errorVal;return tr.returnVal})}}}}function at(Ie){var qe=function(){var Le,je=arguments.length-1;if(typeof arguments[je]=="function"){Le=Array(arguments.length);for(var Ke=0;Ke<arguments.length-1;Ke++)Le[Ke]=arguments[Ke];Le[je]=_(arguments[je])}return Ie.apply(this,Le||arguments)};switch(Ie.length){case 1:return function(Le){return arguments.length!==1?qe.apply(this,arguments):(typeof Le=="function"&&(Le=_(Le)),Ie.call(this,Le))};case 2:return function(Le,je){return arguments.length!==2?qe.apply(this,arguments):(typeof je=="function"&&(je=_(je)),Ie.call(this,Le,je))};case 3:return function(Le,je,Ke){return arguments.length!==3?qe.apply(this,arguments):(typeof Ke=="function"&&(Ke=_(Ke)),Ie.call(this,Le,je,Ke))};case 4:return function(Le,je,Ke,ot){return arguments.length!==4?qe.apply(this,arguments):(typeof ot=="function"&&(ot=_(ot)),Ie.call(this,Le,je,Ke,ot))};case 5:return function(Le,je,Ke,ot,We){return arguments.length!==5?qe.apply(this,arguments):(typeof We=="function"&&(We=_(We)),Ie.call(this,Le,je,Ke,ot,We))};case 6:return function(Le,je,Ke,ot,We,kt){return arguments.length!==6?qe.apply(this,arguments):(typeof kt=="function"&&(kt=_(kt)),Ie.call(this,Le,je,Ke,ot,We,kt))};default:return qe}}function tt(Ie){var qe=function(){var Le;if(typeof arguments[0]=="function"){Le=Array(arguments.length),Le[0]=_(arguments[0]);for(var je=1;je<arguments.length;je++)Le[je]=arguments[je]}return Ie.apply(this,Le||arguments)};switch(Ie.length){case 1:return function(Le){return arguments.length!==1?qe.apply(this,arguments):(typeof Le=="function"&&(Le=_(Le)),Ie.call(this,Le))};case 2:return function(Le,je){return arguments.length!==2?qe.apply(this,arguments):(typeof Le=="function"&&(Le=_(Le)),Ie.call(this,Le,je))};case 3:return function(Le,je,Ke){return arguments.length!==3?qe.apply(this,arguments):(typeof Le=="function"&&(Le=_(Le)),Ie.call(this,Le,je,Ke))};case 4:return function(Le,je,Ke,ot){return arguments.length!==4?qe.apply(this,arguments):(typeof Le=="function"&&(Le=_(Le)),Ie.call(this,Le,je,Ke,ot))};case 5:return function(Le,je,Ke,ot,We){return arguments.length!==5?qe.apply(this,arguments):(typeof Le=="function"&&(Le=_(Le)),Ie.call(this,Le,je,Ke,ot,We))};case 6:return function(Le,je,Ke,ot,We,kt){return arguments.length!==6?qe.apply(this,arguments):(typeof Le=="function"&&(Le=_(Le)),Ie.call(this,Le,je,Ke,ot,We,kt))};default:return qe}}function $t(Ie){return(Ie=Number(Ie))>=0?Ie:!1}function lt(Ie){return typeof Ie=="string"&&$t(Ie)===!1}}),Ho=I((s,T)=>{"use strict";var d=M(2357),v=Vi(),_="cls@contexts",c="error@context";process.addAsyncListener||ji();function l(f){this.name=f,this.active=null,this._set=[],this.id=null}l.prototype.set=function(f,b){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[f]=b,b},l.prototype.get=function(f){if(this.active)return this.active[f]},l.prototype.createContext=function(){return Object.create(this.active)},l.prototype.run=function(f){var b=this.createContext();this.enter(b);try{return f(b),b}catch(w){throw w&&(w[c]=b),w}finally{this.exit(b)}},l.prototype.runAndReturn=function(f){var b;return this.run(function(w){b=f(w)}),b},l.prototype.bind=function(f,b){b||(this.active?b=this.active:b=this.createContext());var w=this;return function(){w.enter(b);try{return f.apply(this,arguments)}catch(S){throw S&&(S[c]=b),S}finally{w.exit(b)}}},l.prototype.enter=function(f){d.ok(f,"context must be provided for entering"),this._set.push(this.active),this.active=f},l.prototype.exit=function(f){if(d.ok(f,"context must be provided for exiting"),this.active===f){d.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var b=this._set.lastIndexOf(f);d.ok(b>=0,"context not currently entered; can't exit"),d.ok(b,"can't remove top context"),this._set.splice(b,1)},l.prototype.bindEmitter=function(f){d.ok(f.on&&f.addListener&&f.emit,"can only bind real EEs");var b=this,w="context@"+this.name;function S(A){!A||(A[_]||(A[_]=Object.create(null)),A[_][w]={namespace:b,context:b.active})}function R(A){if(!(A&&A[_]))return A;var D=A,j=A[_];return Object.keys(j).forEach(function(ee){var K=j[ee];D=K.namespace.bind(D,K.context)}),D}v(f,S,R)},l.prototype.fromException=function(f){return f[c]};function h(f){return process.namespaces[f]}function p(f){d.ok(f,"namespace must be given a name!");var b=new l(f);return b.id=process.addAsyncListener({create:function(){return b.active},before:function(w,S){S&&b.enter(S)},after:function(w,S){S&&b.exit(S)},error:function(w){w&&b.exit(w)}}),process.namespaces[f]=b,b}function g(f){var b=h(f);d.ok(b,"can't delete nonexistent namespace!"),d.ok(b.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(b.id),process.namespaces[f]=null}function y(){process.namespaces&&Object.keys(process.namespaces).forEach(function(f){g(f)}),process.namespaces=Object.create(null)}process.namespaces||y(),T.exports={getNamespace:h,createNamespace:p,destroyNamespace:g,reset:y}}),yi=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.CorrelationContextManager=void 0;var T=se(),d=_s(),v=ws(),_=No(),c=Fr(),l=function(){function p(){}return p.getCurrentContext=function(){if(!p.enabled)return null;var g=p.session.get(p.CONTEXT_NAME);return g===void 0?null:g},p.generateContextObject=function(g,y,f,b,w,S){return y=y||g,this.enabled?{operation:{name:f,id:g,parentId:y,traceparent:w,tracestate:S},customProperties:new h(b)}:null},p.spanToContextObject=function(g,y,f){var b=new v;return b.traceId=g.traceId,b.spanId=g.spanId,b.traceFlag=v.formatOpenTelemetryTraceFlags(g.traceFlags)||v.DEFAULT_TRACE_FLAG,b.parentId=y,p.generateContextObject(b.traceId,b.parentId,f,null,b)},p.runWithContext=function(g,y){var f;return p.enabled?p.session.bind(y,(f={},f[p.CONTEXT_NAME]=g,f))():y()},p.wrapEmitter=function(g){p.enabled&&p.session.bindEmitter(g)},p.wrapCallback=function(g,y){var f;return p.enabled?p.session.bind(g,y?(f={},f[p.CONTEXT_NAME]=y,f):void 0):g},p.enable=function(g){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}p.hasEverEnabled||(this.forceClsHooked=g,this.hasEverEnabled=!0,typeof this.cls=="undefined"&&(p.forceClsHooked===!0||p.forceClsHooked===void 0&&p.shouldUseClsHooked()?this.cls=Pl():this.cls=Ho()),p.session=this.cls.createNamespace("AI-CLS-Session"),d.registerContextPreservation(function(y){return p.session.bind(y)})),this.enabled=!0}},p.startOperation=function(g,y){var f=g&&g.traceContext||null,b=g&&g.traceId?g:null,w=g&&g.headers;if(b){var S=new v("00-"+b.traceId+"-"+b.spanId+"-01"),R=new _(b.traceState?b.traceState.serialize():null),A=p.generateContextObject(b.traceId,"|"+b.traceId+"."+b.spanId+".",typeof y=="string"?y:"",void 0,S,R);return A}if(f){var S=new v(f.traceparent),R=new _(f.tracestate),D=typeof y=="object"?new c(y):null,A=p.generateContextObject(S.traceId,S.parentId,typeof y=="string"?y:D.getOperationName({}),D&&D.getCorrelationContextHeader()||void 0,S,R);return A}if(w){var S=new v(w.traceparent?w.traceparent.toString():null),R=new _(w.tracestate?w.tracestate.toString():null),D=new c(g),A=p.generateContextObject(S.traceId,S.parentId,D.getOperationName({}),D.getCorrelationContextHeader(),S,R);return A}return T.warn("startOperation was called with invalid arguments",arguments),null},p.disable=function(){this.enabled=!1},p.reset=function(){p.hasEverEnabled&&(p.session=null,p.session=this.cls.createNamespace("AI-CLS-Session"))},p.isNodeVersionCompatible=function(){var g=process.versions.node.split(".");return parseInt(g[0])>3||parseInt(g[0])>2&&parseInt(g[1])>2},p.shouldUseClsHooked=function(){var g=process.versions.node.split(".");return parseInt(g[0])>8||parseInt(g[0])>=8&&parseInt(g[1])>=2},p.canUseClsHooked=function(){var g=process.versions.node.split("."),y=parseInt(g[0])>8||parseInt(g[0])>=8&&parseInt(g[1])>=0,f=parseInt(g[0])<8||parseInt(g[0])<=8&&parseInt(g[1])<2,b=parseInt(g[0])>4||parseInt(g[0])>=4&&parseInt(g[1])>=7;return!(y&&f)&&b},p.enabled=!1,p.hasEverEnabled=!1,p.forceClsHooked=void 0,p.CONTEXT_NAME="ApplicationInsights-Context",p}();s.CorrelationContextManager=l;var h=function(){function p(g){this.props=[],this.addHeaderData(g)}return p.prototype.addHeaderData=function(g){var y=g?g.split(", "):[];this.props=y.map(function(f){var b=f.split("=");return{key:b[0],value:b[1]}}).concat(this.props)},p.prototype.serializeToHeader=function(){return this.props.map(function(g){return g.key+"="+g.value}).join(", ")},p.prototype.getProperty=function(g){for(var y=0;y<this.props.length;++y){var f=this.props[y];if(f.key===g)return f.value}},p.prototype.setProperty=function(g,y){if(p.bannedCharacters.test(g)||p.bannedCharacters.test(y)){T.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+g+" and value: "+y);return}for(var f=0;f<this.props.length;++f){var b=this.props[f];if(b.key===g){b.value=y;return}}this.props.push({key:g,value:y})},p.bannedCharacters=/[,=]/,p}()}),Tn=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.dispose=s.enable=void 0;var T=zt(),d=Y(),v=[],_=function(h){var p=h.data.message;v.forEach(function(g){p instanceof Error?g.trackException({exception:p}):(p.lastIndexOf(`
`)==p.length-1&&(p=p.substring(0,p.length-1)),g.trackTrace({message:p,severity:h.data.stderr?T.SeverityLevel.Warning:T.SeverityLevel.Information}))})};function c(h,p){h?(v.length===0&&d.channel.subscribe("console",_),v.push(p)):(v=v.filter(function(g){return g!=p}),v.length===0&&d.channel.unsubscribe("console",_))}s.enable=c;function l(){d.channel.unsubscribe("console",_),v=[]}s.dispose=l}),Al=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.dispose=s.enable=void 0;var T=zt(),d=Y(),v=[],_={10:T.SeverityLevel.Verbose,20:T.SeverityLevel.Verbose,30:T.SeverityLevel.Information,40:T.SeverityLevel.Warning,50:T.SeverityLevel.Error,60:T.SeverityLevel.Critical},c=function(p){var g=p.data.result;v.forEach(function(y){var f=_[p.data.level];g instanceof Error?y.trackException({exception:g}):y.trackTrace({message:g,severity:f})})};function l(p,g){p?(v.length===0&&d.channel.subscribe("bunyan",c),v.push(g)):(v=v.filter(function(y){return y!=g}),v.length===0&&d.channel.unsubscribe("bunyan",c))}s.enable=l;function h(){d.channel.unsubscribe("bunyan",c),v=[]}s.dispose=h}),Il=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.dispose=s.enable=void 0;var T=zt(),d=Y(),v=[],_={syslog:function(p){var g={emerg:T.SeverityLevel.Critical,alert:T.SeverityLevel.Critical,crit:T.SeverityLevel.Critical,error:T.SeverityLevel.Error,warning:T.SeverityLevel.Warning,notice:T.SeverityLevel.Information,info:T.SeverityLevel.Information,debug:T.SeverityLevel.Verbose};return g[p]===void 0?T.SeverityLevel.Information:g[p]},npm:function(p){var g={error:T.SeverityLevel.Error,warn:T.SeverityLevel.Warning,info:T.SeverityLevel.Information,verbose:T.SeverityLevel.Verbose,debug:T.SeverityLevel.Verbose,silly:T.SeverityLevel.Verbose};return g[p]===void 0?T.SeverityLevel.Information:g[p]},unknown:function(p){return T.SeverityLevel.Information}},c=function(p){var g=p.data.message;v.forEach(function(y){if(g instanceof Error)y.trackException({exception:g,properties:p.data.meta});else{var f=_[p.data.levelKind](p.data.level);y.trackTrace({message:g,severity:f,properties:p.data.meta})}})};function l(p,g){p?(v.length===0&&d.channel.subscribe("winston",c),v.push(g)):(v=v.filter(function(y){return y!=g}),v.length===0&&d.channel.unsubscribe("winston",c))}s.enable=l;function h(){d.channel.unsubscribe("winston",c),v=[]}s.dispose=h}),Ol=I((s,T)=>{"use strict";var d=_s(),v=function(){function _(c){if(_.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=c,_.INSTANCE=this}return _.prototype.enable=function(c,l){d.IsInitialized&&(Tn().enable(c&&l,this._client),Al().enable(c,this._client),Il().enable(c,this._client))},_.prototype.isInitialized=function(){return this._isInitialized},_.prototype.dispose=function(){_.INSTANCE=null,this.enable(!1,!1)},_._methodNames=["debug","info","log","warn","error"],_}();T.exports=v}),Dl=I((s,T)=>{"use strict";var d=function(){function v(_){if(v.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");v.INSTANCE=this,this._client=_;var c=process.versions.node.split(".");v._canUseUncaughtExceptionMonitor=parseInt(c[0])>13||parseInt(c[0])===13&&parseInt(c[1])>=7}return v.prototype.isInitialized=function(){return this._isInitialized},v.prototype.enable=function(_){var c=this;if(_){this._isInitialized=!0;var l=this;if(!this._exceptionListenerHandle){var h=function(p,g,y){y===void 0&&(y=new Error(v._FALLBACK_ERROR_MESSAGE)),c._client.trackException({exception:y}),c._client.flush({isAppCrashing:!0}),p&&g&&process.listeners(g).length===1&&(console.error(y),process.exit(1))};v._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=h.bind(this,!1,void 0),process.on(v.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=h.bind(this,!0,v.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=h.bind(this,!1,void 0),process.on(v.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(v.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(v._canUseUncaughtExceptionMonitor?process.removeListener(v.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(v.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(v.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},v.prototype.dispose=function(){v.INSTANCE=null,this.enable(!1),this._isInitialized=!1},v.INSTANCE=null,v.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",v.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",v.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",v._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",v._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",v._canUseUncaughtExceptionMonitor=!1,v}();T.exports=d}),Rn=I(s=>{"use strict";var T;Object.defineProperty(s,"__esModule",{value:!0}),s.HeartBeatMetricName=s.DependencyTypeName=s.SpanAttribute=s.TelemetryTypeStringToQuickPulseDocumentType=s.TelemetryTypeStringToQuickPulseType=s.QuickPulseType=s.QuickPulseDocumentType=s.PerformanceToQuickPulseCounter=s.MetricId=s.PerformanceCounter=s.QuickPulseCounter=s.DEFAULT_LIVEMETRICS_HOST=s.DEFAULT_LIVEMETRICS_ENDPOINT=s.DEFAULT_BREEZE_ENDPOINT=void 0,s.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",s.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com",s.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var d;(function(c){c.COMMITTED_BYTES="\\Memory\\Committed Bytes",c.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",c.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",c.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",c.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",c.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",c.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",c.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",c.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(d=s.QuickPulseCounter||(s.QuickPulseCounter={}));var v;(function(c){c.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",c.AVAILABLE_BYTES="\\Memory\\Available Bytes",c.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",c.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",c.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",c.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(v=s.PerformanceCounter||(s.PerformanceCounter={}));var _;(function(c){c.REQUESTS_DURATION="requests/duration",c.DEPENDENCIES_DURATION="dependencies/duration",c.EXCEPTIONS_COUNT="exceptions/count",c.TRACES_COUNT="traces/count"})(_=s.MetricId||(s.MetricId={})),s.PerformanceToQuickPulseCounter=(T={},T[v.PROCESSOR_TIME]=d.PROCESSOR_TIME,T[v.REQUEST_RATE]=d.REQUEST_RATE,T[v.REQUEST_DURATION]=d.REQUEST_DURATION,T[d.COMMITTED_BYTES]=d.COMMITTED_BYTES,T[d.REQUEST_FAILURE_RATE]=d.REQUEST_FAILURE_RATE,T[d.DEPENDENCY_RATE]=d.DEPENDENCY_RATE,T[d.DEPENDENCY_FAILURE_RATE]=d.DEPENDENCY_FAILURE_RATE,T[d.DEPENDENCY_DURATION]=d.DEPENDENCY_DURATION,T[d.EXCEPTION_RATE]=d.EXCEPTION_RATE,T),s.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"},s.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"},s.TelemetryTypeStringToQuickPulseType={EventData:s.QuickPulseType.Event,ExceptionData:s.QuickPulseType.Exception,MessageData:s.QuickPulseType.Trace,MetricData:s.QuickPulseType.Metric,RequestData:s.QuickPulseType.Request,RemoteDependencyData:s.QuickPulseType.Dependency,AvailabilityData:s.QuickPulseType.Availability,PageViewData:s.QuickPulseType.PageView},s.TelemetryTypeStringToQuickPulseDocumentType={EventData:s.QuickPulseDocumentType.Event,ExceptionData:s.QuickPulseDocumentType.Exception,MessageData:s.QuickPulseDocumentType.Trace,MetricData:s.QuickPulseDocumentType.Metric,RequestData:s.QuickPulseDocumentType.Request,RemoteDependencyData:s.QuickPulseDocumentType.Dependency,AvailabilityData:s.QuickPulseDocumentType.Availability,PageViewData:s.QuickPulseDocumentType.PageView},s.SpanAttribute={HttpHost:"http.host",HttpMethod:"http.method",HttpPort:"http.port",HttpStatusCode:"http.status_code",HttpUrl:"http.url",HttpUserAgent:"http.user_agent",GrpcMethod:"grpc.method",GrpcService:"rpc.service"},s.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc"},s.HeartBeatMetricName="HeartBeat"}),zn=I((s,T)=>{"use strict";var d=M(2087),v=Rn(),_=function(){function c(l,h,p){h===void 0&&(h=6e4),p===void 0&&(p=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,c.INSTANCE||(c.INSTANCE=this),this._isInitialized=!1,this._client=l,this._collectionInterval=h,this._enableLiveMetricsCounters=p}return c.prototype.enable=function(l,h){var p=this;this._isEnabled=l,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),l?this._handle||(this._lastCpus=d.cpus(),this._lastRequests={totalRequestCount:c._totalRequestCount,totalFailedRequestCount:c._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:c._totalDependencyCount,totalFailedDependencyCount:c._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:c._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=h||this._collectionInterval,this._handle=setInterval(function(){return p.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},c.countRequest=function(l,h){var p;if(c.isEnabled()){if(typeof l=="string")p=+new Date("1970-01-01T"+l+"Z");else if(typeof l=="number")p=l;else return;c._intervalRequestExecutionTime+=p,h===!1&&c._totalFailedRequestCount++,c._totalRequestCount++}},c.countException=function(){c._totalExceptionCount++},c.countDependency=function(l,h){var p;if(c.isEnabled()){if(typeof l=="string")p=+new Date("1970-01-01T"+l+"Z");else if(typeof l=="number")p=l;else return;c._intervalDependencyExecutionTime+=p,h===!1&&c._totalFailedDependencyCount++,c._totalDependencyCount++}},c.prototype.isInitialized=function(){return this._isInitialized},c.isEnabled=function(){return c.INSTANCE&&c.INSTANCE._isEnabled},c.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},c.prototype._trackCpu=function(){var l=d.cpus();if(l&&l.length&&this._lastCpus&&l.length===this._lastCpus.length){for(var h=0,p=0,g=0,y=0,f=0,b=0;!!l&&b<l.length;b++){var w=l[b],S=this._lastCpus[b],R="% cpu("+b+") ",A=w.model,D=w.speed,j=w.times,ee=S.times,K=j.user-ee.user||0;h+=K;var oe=j.sys-ee.sys||0;p+=oe;var ge=j.nice-ee.nice||0;g+=ge;var ke=j.idle-ee.idle||0;y+=ke;var Se=j.irq-ee.irq||0;f+=Se}var Pe=void 0;if(typeof process.cpuUsage=="function"){var Ce=process.cpuUsage(),$e=process.hrtime(),Qe=Ce.user-this._lastAppCpuUsage.user+(Ce.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime!="undefined"&&this._lastHrtime.length===2){var at=($e[0]-this._lastHrtime[0])*1e6+($e[1]-this._lastHrtime[1])/1e3||0;Pe=100*Qe/(at*l.length)}this._lastAppCpuUsage=Ce,this._lastHrtime=$e}var tt=h+p+g+y+f||1;this._client.trackMetric({name:v.PerformanceCounter.PROCESSOR_TIME,value:(tt-y)/tt*100}),this._client.trackMetric({name:v.PerformanceCounter.PROCESS_TIME,value:Pe||h/tt*100})}this._lastCpus=l},c.prototype._trackMemory=function(){var l=d.freemem(),h=process.memoryUsage().rss,p=d.totalmem()-l;this._client.trackMetric({name:v.PerformanceCounter.PRIVATE_BYTES,value:h}),this._client.trackMetric({name:v.PerformanceCounter.AVAILABLE_BYTES,value:l}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:v.QuickPulseCounter.COMMITTED_BYTES,value:p})},c.prototype._trackNetwork=function(){var l=this._lastRequests,h={totalRequestCount:c._totalRequestCount,totalFailedRequestCount:c._totalFailedRequestCount,time:+new Date},p=h.totalRequestCount-l.totalRequestCount||0,g=h.totalFailedRequestCount-l.totalFailedRequestCount||0,y=h.time-l.time,f=y/1e3,b=(c._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/p||0;if(this._lastIntervalRequestExecutionTime=c._intervalRequestExecutionTime,y>0){var w=p/f,S=g/f;this._client.trackMetric({name:v.PerformanceCounter.REQUEST_RATE,value:w}),(!this._enableLiveMetricsCounters||p>0)&&this._client.trackMetric({name:v.PerformanceCounter.REQUEST_DURATION,value:b}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:v.QuickPulseCounter.REQUEST_FAILURE_RATE,value:S})}this._lastRequests=h},c.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var l=this._lastDependencies,h={totalDependencyCount:c._totalDependencyCount,totalFailedDependencyCount:c._totalFailedDependencyCount,time:+new Date},p=h.totalDependencyCount-l.totalDependencyCount||0,g=h.totalFailedDependencyCount-l.totalFailedDependencyCount||0,y=h.time-l.time,f=y/1e3,b=(c._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/p||0;if(this._lastIntervalDependencyExecutionTime=c._intervalDependencyExecutionTime,y>0){var w=p/f,S=g/f;this._client.trackMetric({name:v.QuickPulseCounter.DEPENDENCY_RATE,value:w}),this._client.trackMetric({name:v.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:S}),(!this._enableLiveMetricsCounters||p>0)&&this._client.trackMetric({name:v.QuickPulseCounter.DEPENDENCY_DURATION,value:b})}this._lastDependencies=h}},c.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var l=this._lastExceptions,h={totalExceptionCount:c._totalExceptionCount,time:+new Date},p=h.totalExceptionCount-l.totalExceptionCount||0,g=h.time-l.time,y=g/1e3;if(g>0){var f=p/y;this._client.trackMetric({name:v.QuickPulseCounter.EXCEPTION_RATE,value:f})}this._lastExceptions=h}},c.prototype.dispose=function(){c.INSTANCE=null,this.enable(!1),this._isInitialized=!1},c._totalRequestCount=0,c._totalFailedRequestCount=0,c._totalDependencyCount=0,c._totalFailedDependencyCount=0,c._totalExceptionCount=0,c._intervalDependencyExecutionTime=0,c._intervalRequestExecutionTime=0,c}();T.exports=_}),xl=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.AggregatedMetricCounter=void 0;var T=function(){function d(v){this.dimensions=v,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}return d}();s.AggregatedMetricCounter=T}),Ml=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.PreaggregatedMetricPropertyNames=void 0,s.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}}),_a=I((s,T)=>{"use strict";var d=s&&s.__assign||function(){return d=Object.assign||function(h){for(var p,g=1,y=arguments.length;g<y;g++){p=arguments[g];for(var f in p)Object.prototype.hasOwnProperty.call(p,f)&&(h[f]=p[f])}return h},d.apply(this,arguments)},v=Rn(),_=xl(),c=Ml(),l=function(){function h(p,g){g===void 0&&(g=6e4),h.INSTANCE||(h.INSTANCE=this),this._isInitialized=!1,h._dependencyCountersCollection=[],h._requestCountersCollection=[],h._exceptionCountersCollection=[],h._traceCountersCollection=[],this._client=p,this._collectionInterval=g}return h.prototype.enable=function(p,g){var y=this;this._isEnabled=p,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),p?this._handle||(this._collectionInterval=g||this._collectionInterval,this._handle=setInterval(function(){return y.trackPreAggregatedMetrics()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},h.countException=function(p){if(h.isEnabled()){var g=h._getAggregatedCounter(p,this._exceptionCountersCollection);g.totalCount++}},h.countTrace=function(p){if(h.isEnabled()){var g=h._getAggregatedCounter(p,this._traceCountersCollection);g.totalCount++}},h.countRequest=function(p,g){if(h.isEnabled()){var y,f=h._getAggregatedCounter(g,this._requestCountersCollection);if(typeof p=="string")y=+new Date("1970-01-01T"+p+"Z");else if(typeof p=="number")y=p;else return;f.intervalExecutionTime+=y,f.totalCount++}},h.countDependency=function(p,g){if(h.isEnabled()){var y=h._getAggregatedCounter(g,this._dependencyCountersCollection),f;if(typeof p=="string")f=+new Date("1970-01-01T"+p+"Z");else if(typeof p=="number")f=p;else return;y.intervalExecutionTime+=f,y.totalCount++}},h.prototype.isInitialized=function(){return this._isInitialized},h.isEnabled=function(){return h.INSTANCE&&h.INSTANCE._isEnabled},h.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},h._getAggregatedCounter=function(p,g){for(var y=!1,f=0;f<g.length;f++){if(p===g[f].dimensions)return g[f];if(Object.keys(p).length===Object.keys(g[f].dimensions).length){for(var b in p)if(p[b]!=g[f].dimensions[b]){y=!0;break}if(!y)return g[f];y=!1}}var w=new _.AggregatedMetricCounter(p);return g.push(w),w},h.prototype._trackRequestMetrics=function(){for(var p=0;p<h._requestCountersCollection.length;p++){var g=h._requestCountersCollection[p];g.time=+new Date;var y=g.totalCount-g.lastTotalCount||0,f=g.time-g.lastTime,b=(g.intervalExecutionTime-g.lastIntervalExecutionTime)/y||0;g.lastIntervalExecutionTime=g.intervalExecutionTime,f>0&&y>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:g.dimensions,value:b,count:y,aggregationInterval:f,metricType:v.MetricId.REQUESTS_DURATION}),g.lastTotalCount=g.totalCount,g.lastTime=g.time}},h.prototype._trackDependencyMetrics=function(){for(var p=0;p<h._dependencyCountersCollection.length;p++){var g=h._dependencyCountersCollection[p];g.time=+new Date;var y=g.totalCount-g.lastTotalCount||0,f=g.time-g.lastTime,b=(g.intervalExecutionTime-g.lastIntervalExecutionTime)/y||0;g.lastIntervalExecutionTime=g.intervalExecutionTime,f>0&&y>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:g.dimensions,value:b,count:y,aggregationInterval:f,metricType:v.MetricId.DEPENDENCIES_DURATION}),g.lastTotalCount=g.totalCount,g.lastTime=g.time}},h.prototype._trackExceptionMetrics=function(){for(var p=0;p<h._exceptionCountersCollection.length;p++){var g=h._exceptionCountersCollection[p],y=g.totalCount-g.lastTotalCount||0,f=g.time-g.lastTime;this._trackPreAggregatedMetric({name:"Exceptions",dimensions:g.dimensions,value:y,count:y,aggregationInterval:f,metricType:v.MetricId.EXCEPTIONS_COUNT}),g.lastTotalCount=g.totalCount,g.lastTime=g.time}},h.prototype._trackTraceMetrics=function(){for(var p=0;p<h._traceCountersCollection.length;p++){var g=h._traceCountersCollection[p],y=g.totalCount-g.lastTotalCount||0,f=g.time-g.lastTime;this._trackPreAggregatedMetric({name:"Traces",dimensions:g.dimensions,value:y,count:y,aggregationInterval:f,metricType:v.MetricId.TRACES_COUNT}),g.lastTotalCount=g.totalCount,g.lastTime=g.time}},h.prototype._trackPreAggregatedMetric=function(p){var g={};for(var y in p.dimensions)g[c.PreaggregatedMetricPropertyNames[y]]=p.dimensions[y];g=d(d({},g),{"_MS.MetricId":p.metricType,"_MS.AggregationIntervalMs":String(p.aggregationInterval),"_MS.IsAutocollected":"True"});var f={name:p.name,value:p.value,count:p.count,properties:g,kind:"Aggregation"};this._client.trackMetric(f)},h.prototype.dispose=function(){h.INSTANCE=null,this.enable(!1),this._isInitialized=!1},h}();T.exports=l}),bi=I((s,T)=>{"use strict";var d=M(2087),v=M(5747),_=M(5622),c=zt(),l=se(),h=function(){function p(g){this.keys=new c.ContextTagKeys,this.tags={},this._loadApplicationContext(g),this._loadDeviceContext(),this._loadInternalContext()}return p.prototype._loadApplicationContext=function(g){if(g=g||_.resolve(__dirname,"../../../../package.json"),!p.appVersion[g]){p.appVersion[g]="unknown";try{var y=JSON.parse(v.readFileSync(g,"utf8"));y&&typeof y.version=="string"&&(p.appVersion[g]=y.version)}catch(f){l.info("unable to read app version: ",f)}}this.tags[this.keys.applicationVersion]=p.appVersion[g]},p.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=d&&d.hostname(),this.tags[this.keys.deviceOSVersion]=d&&d.type()+" "+d.release(),this.tags[this.keys.cloudRole]=p.DefaultRoleName,this.tags["ai.device.osArchitecture"]=d&&d.arch(),this.tags["ai.device.osPlatform"]=d&&d.platform()},p.prototype._loadInternalContext=function(){var g=_.resolve(__dirname,"../../package.json");if(!p.sdkVersion){p.sdkVersion="unknown";try{var y=JSON.parse(v.readFileSync(g,"utf8"));y&&typeof y.version=="string"&&(p.sdkVersion=y.version)}catch(f){l.info("unable to read app version: ",f)}}this.tags[this.keys.internalSdkVersion]="node:"+p.sdkVersion},p.DefaultRoleName="Web",p.appVersion={},p.sdkVersion=null,p}();T.exports=h}),Ss=I((s,T)=>{"use strict";var d=s&&s.__extends||function(){var y=function(f,b){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,S){w.__proto__=S}||function(w,S){for(var R in S)Object.prototype.hasOwnProperty.call(S,R)&&(w[R]=S[R])},y(f,b)};return function(f,b){y(f,b);function w(){this.constructor=f}f.prototype=b===null?Object.create(b):(w.prototype=b.prototype,new w)}}(),v=M(8835),_=zt(),c=yr(),l=hi(),h=Ut(),p=pi(),g=function(y){d(f,y);function f(b,w){var S=y.call(this)||this;return w&&w.method&&b&&(S.method=w.method,S.url=f._getUrlFromRequestOptions(b,w),S.startTime=+new Date),S}return f.prototype.onError=function(b){this._setStatus(void 0,b)},f.prototype.onResponse=function(b){this._setStatus(b.statusCode,void 0),this.correlationId=c.getCorrelationContextTarget(b,l.requestContextTargetKey)},f.prototype.getDependencyTelemetry=function(b,w){var S=v.parse(this.url);S.search=void 0,S.hash=void 0;var R=this.method.toUpperCase()+" "+S.pathname,A=_.RemoteDependencyDataConstants.TYPE_HTTP,D=S.hostname;S.port&&(D+=":"+S.port),this.correlationId?(A=_.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==p.correlationIdPrefix&&(D+=" | "+this.correlationId)):A=_.RemoteDependencyDataConstants.TYPE_HTTP;var j={id:w,name:R,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:A,target:D};if(b&&b.time?j.time=b.time:this.startTime&&(j.time=new Date(this.startTime)),b){for(var ee in b)j[ee]||(j[ee]=b[ee]);if(b.properties)for(var ee in b.properties)j.properties[ee]=b.properties[ee]}return j},f._getUrlFromRequestOptions=function(b,w){if(typeof b=="string")if(b.indexOf("http://")===0||b.indexOf("https://")===0)b=v.parse(b);else{var S=v.parse(b);S.host==="443"?b=v.parse("https://"+b):b=v.parse("http://"+b)}else{if(b&&typeof v.URL=="function"&&b instanceof v.URL)return v.format(b);var R=b;b={},R&&Object.keys(R).forEach(function(j){b[j]=R[j]})}if(b.path){var A=v.parse(b.path);b.pathname=A.pathname,b.search=A.search}if(b.host&&b.port){var D=v.parse("http://"+b.host);!D.port&&b.port&&(b.hostname=b.host,delete b.host)}return b.protocol=b.protocol||w.agent&&w.agent.protocol||w.protocol||void 0,b.hostname=b.hostname||"localhost",v.format(b)},f}(h);T.exports=g}),Fl=I(s=>{"use strict";var T=s&&s.__assign||function(){return T=Object.assign||function(l){for(var h,p=1,g=arguments.length;p<g;p++){h=arguments[p];for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(l[y]=h[y])}return l},T.apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0}),s.spanToTelemetryContract=void 0;var d=wt(),v=Rn();function _(l){var h=T({},l);return Object.keys(v.SpanAttribute).forEach(function(p){delete h[p]}),h}function c(l){var h="|"+l.spanContext().traceId+"."+l.spanContext().spanId+".",p=Math.round(l._duration[0]*1e3+l._duration[1]/1e6),g=l.attributes["peer.address"]?l.attributes["peer.address"].toString():"",y=l.attributes.component?l.attributes.component.toString():"",f=y.toUpperCase()===v.DependencyTypeName.Http||!!l.attributes[v.SpanAttribute.HttpUrl],b=y.toLowerCase()===v.DependencyTypeName.Grpc;if(f){var w=l.attributes[v.SpanAttribute.HttpMethod]||"GET",S=new URL(l.attributes[v.SpanAttribute.HttpUrl].toString()),R=l.attributes[v.SpanAttribute.HttpHost]||S.host,A=l.attributes[v.SpanAttribute.HttpPort]||S.port||null,D=S.pathname||"/",j=w+" "+D,ee=v.DependencyTypeName.Http,K=A?(R+":"+A).toString():R.toString(),oe=S.toString(),ge=l.attributes[v.SpanAttribute.HttpStatusCode]||l.status.code||0,ke=ge<400;return{id:h,name:j,dependencyTypeName:ee,target:K,data:oe,success:ke,duration:p,url:oe,resultCode:String(ge),properties:_(l.attributes)}}else if(b){var w=l.attributes[v.SpanAttribute.GrpcMethod]||"rpc",Se=l.attributes[v.SpanAttribute.GrpcService],Pe=Se?w+" "+Se:l.name;return{id:h,duration:p,name:Pe,target:Se.toString(),data:Se.toString()||Pe,url:Se.toString()||Pe,dependencyTypeName:v.DependencyTypeName.Grpc,resultCode:String(l.status.code||0),success:l.status.code===0,properties:_(l.attributes)}}else{var Ce=l.name,$e=l.links&&l.links.map(function(Qe){return{operation_Id:Qe.context.traceId,id:Qe.context.spanId}});return{id:h,duration:p,name:Ce,target:g,data:g||Ce,url:g||Ce,dependencyTypeName:l.kind===d.SpanKind.INTERNAL?v.DependencyTypeName.InProc:y||l.name,resultCode:String(l.status.code||0),success:l.status.code===0,properties:T(T({},_(l.attributes)),{"_MS.links":$e||void 0})}}}s.spanToTelemetryContract=c}),Ll=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.subscriber=void 0;var T=wt(),d=Y(),v=ws(),_=Fl(),c=X(),l=[],h=function(g){var y=g.data,f=_.spanToTelemetryContract(y),b=y.spanContext(),w=new v;w.traceId=b.traceId,w.spanId=b.spanId,w.traceFlag=v.formatOpenTelemetryTraceFlags(b.traceFlags),w.parentId=y.parentSpanId?"|"+b.traceId+"."+y.parentSpanId+".":null,c.AsyncScopeManager.with(y,function(){l.forEach(function(S){y.kind===T.SpanKind.SERVER?S.trackRequest(f):(y.kind===T.SpanKind.CLIENT||y.kind===T.SpanKind.INTERNAL)&&S.trackDependency(f)})})};s.subscriber=h;function p(g,y){g?(l.length===0&&d.channel.subscribe("azure-coretracing",s.subscriber),l.push(y)):(l=l.filter(function(f){return f!=y}),l.length===0&&d.channel.unsubscribe("azure-coretracing",s.subscriber))}s.enable=p}),ql=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.subscriber=void 0;var T=Y(),d=[],v=function(c){c.data.event.commandName!=="ismaster"&&d.forEach(function(l){var h=c.data.startedData&&c.data.startedData.databaseName||"Unknown database";l.trackDependency({target:h,data:c.data.event.commandName,name:c.data.event.commandName,duration:c.data.event.duration,success:c.data.succeeded,resultCode:c.data.succeeded?"0":"1",time:c.data.startedData.time,dependencyTypeName:"mongodb"})})};s.subscriber=v;function _(c,l){c?(d.length===0&&T.channel.subscribe("mongodb",s.subscriber),d.push(l)):(d=d.filter(function(h){return h!=l}),d.length===0&&T.channel.unsubscribe("mongodb",s.subscriber))}s.enable=_}),Ul=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.subscriber=void 0;var T=Y(),d=[],v=function(c){d.forEach(function(l){var h=c.data.query||{},p=h.sql||"Unknown query",g=!c.data.err,y=h._connection||{},f=y.config||{},b=f.socketPath?f.socketPath:(f.host||"localhost")+":"+f.port;l.trackDependency({target:b,data:p,name:p,duration:c.data.duration,success:g,resultCode:g?"0":"1",time:c.data.time,dependencyTypeName:"mysql"})})};s.subscriber=v;function _(c,l){c?(d.length===0&&T.channel.subscribe("mysql",s.subscriber),d.push(l)):(d=d.filter(function(h){return h!=l}),d.length===0&&T.channel.unsubscribe("mysql",s.subscriber))}s.enable=_}),Bo=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.subscriber=void 0;var T=Y(),d=[],v=function(c){d.forEach(function(l){c.data.commandObj.command!=="info"&&l.trackDependency({target:c.data.address,name:c.data.commandObj.command,data:c.data.commandObj.command,duration:c.data.duration,success:!c.data.err,resultCode:c.data.err?"1":"0",time:c.data.time,dependencyTypeName:"redis"})})};s.subscriber=v;function _(c,l){c?(d.length===0&&T.channel.subscribe("redis",s.subscriber),d.push(l)):(d=d.filter(function(h){return h!=l}),d.length===0&&T.channel.unsubscribe("redis",s.subscriber))}s.enable=_}),$l=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.enable=s.subscriber=void 0;var T=Y(),d=[],v=function(c){d.forEach(function(l){var h=c.data.query,p=h.preparable&&h.preparable.text||h.plan||h.text||"unknown query",g=!c.data.error,y=c.data.database.host+":"+c.data.database.port;l.trackDependency({target:y,data:p,name:p,duration:c.data.duration,success:g,resultCode:g?"0":"1",time:c.data.time,dependencyTypeName:"postgres"})})};s.subscriber=v;function _(c,l){c?(d.length===0&&T.channel.subscribe("postgres",s.subscriber),d.push(l)):(d=d.filter(function(h){return h!=l}),d.length===0&&T.channel.unsubscribe("postgres",s.subscriber))}s.enable=_}),Qn=I((s,T)=>{"use strict";var d=s&&s.__spreadArrays||function(){for(var S=0,R=0,A=arguments.length;R<A;R++)S+=arguments[R].length;for(var D=Array(S),j=0,R=0;R<A;R++)for(var ee=arguments[R],K=0,oe=ee.length;K<oe;K++,j++)D[j]=ee[K];return D},v=M(8605),_=M(7211),c=se(),l=yr(),h=hi(),p=Ss(),g=yi(),y=pi(),f=ws(),b=_s(),w=function(){function S(R){if(S.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");S.INSTANCE=this,this._client=R}return S.prototype.enable=function(R){this._isEnabled=R,this._isEnabled&&!this._isInitialized&&this._initialize(),b.IsInitialized&&(Ll().enable(!0,this._client),ql().enable(R,this._client),Ul().enable(R,this._client),Bo().enable(R,this._client),$l().enable(R,this._client))},S.prototype.isInitialized=function(){return this._isInitialized},S.prototype._initialize=function(){var R=this;this._isInitialized=!0;var A=v.request,D=_.request,j=function(ee,K){var oe=!K[S.disableCollectionRequestOption]&&!ee[S.alreadyAutoCollectedFlag];K.headers&&K.headers["user-agent"]&&K.headers["user-agent"].toString().indexOf("azsdk-js")!==-1&&(oe=!1),ee[S.alreadyAutoCollectedFlag]=!0,ee&&K&&oe&&(g.CorrelationContextManager.wrapEmitter(ee),S.trackRequest(R._client,{options:K,request:ee}))};v.request=function(ee){for(var K=[],oe=1;oe<arguments.length;oe++)K[oe-1]=arguments[oe];var ge=A.call.apply(A,d([v,ee],K));return j(ge,ee),ge},_.request=function(ee){for(var K=[],oe=1;oe<arguments.length;oe++)K[oe-1]=arguments[oe];var ge=D.call.apply(D,d([_,ee],K));return j(ge,ee),ge},v.get=function(ee){for(var K,oe=[],ge=1;ge<arguments.length;ge++)oe[ge-1]=arguments[ge];var ke=(K=v.request).call.apply(K,d([v,ee],oe));return ke.end(),ke},_.get=function(ee){for(var K,oe=[],ge=1;ge<arguments.length;ge++)oe[ge-1]=arguments[ge];var ke=(K=_.request).call.apply(K,d([_,ee],oe));return ke.end(),ke}},S.trackRequest=function(R,A){if(!A.options||!A.request||!R){c.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!A.options,!A.request,!R);return}var D=new p(A.options,A.request),j=g.CorrelationContextManager.getCurrentContext(),ee,K;if(j&&j.operation&&j.operation.traceparent&&f.isValidTraceId(j.operation.traceparent.traceId))j.operation.traceparent.updateSpanId(),ee=j.operation.traceparent.getBackCompatRequestId();else if(y.w3cEnabled){var oe=new f;K=oe.toString(),ee=oe.getBackCompatRequestId()}else ee=j&&j.operation&&j.operation.parentId+S.requestNumber+++".";if(l.canIncludeCorrelationHeader(R,D.getUrl())&&A.request.getHeader&&A.request.setHeader&&R.config&&R.config.correlationId){var ge=A.request.getHeader(h.requestContextHeader);try{l.safeIncludeCorrelationHeader(R,A.request,ge)}catch(Pe){c.warn("Request-Context header could not be set. Correlation of requests may be lost",Pe)}if(j&&j.operation)try{if(A.request.setHeader(h.requestIdHeader,ee),R.config.ignoreLegacyHeaders||(A.request.setHeader(h.parentIdHeader,j.operation.id),A.request.setHeader(h.rootIdHeader,ee)),K||j.operation.traceparent)A.request.setHeader(h.traceparentHeader,K||j.operation.traceparent.toString());else if(y.w3cEnabled){var oe=new f().toString();A.request.setHeader(h.traceparentHeader,oe)}if(j.operation.tracestate){var ke=j.operation.tracestate.toString();ke&&A.request.setHeader(h.traceStateHeader,ke)}var Se=j.customProperties.serializeToHeader();Se&&A.request.setHeader(h.correlationContextHeader,Se)}catch(Pe){c.warn("Correlation headers could not be set. Correlation of requests may be lost.",Pe)}}A.request.on&&(A.request.on("response",function(Pe){D.onResponse(Pe);var Ce=D.getDependencyTelemetry(A,ee);Ce.contextObjects=Ce.contextObjects||{},Ce.contextObjects["http.RequestOptions"]=A.options,Ce.contextObjects["http.ClientRequest"]=A.request,Ce.contextObjects["http.ClientResponse"]=Pe,R.trackDependency(Ce)}),A.request.on("error",function(Pe){D.onError(Pe);var Ce=D.getDependencyTelemetry(A,ee);Ce.contextObjects=Ce.contextObjects||{},Ce.contextObjects["http.RequestOptions"]=A.options,Ce.contextObjects["http.ClientRequest"]=A.request,Ce.contextObjects.Error=Pe,R.trackDependency(Ce)}),A.request.on("abort",function(){D.onError(new Error);var Pe=D.getDependencyTelemetry(A,ee);Pe.contextObjects=Pe.contextObjects||{},Pe.contextObjects["http.RequestOptions"]=A.options,Pe.contextObjects["http.ClientRequest"]=A.request,R.trackDependency(Pe)}))},S.prototype.dispose=function(){S.INSTANCE=null,this.enable(!1),this._isInitialized=!1},S.disableCollectionRequestOption="disableAppInsightsAutoCollection",S.requestNumber=1,S.alreadyAutoCollectedFlag="_appInsightsAutoCollected",S}();T.exports=w}),fd=I((s,T)=>{"use strict";var d=M(2087),v=Rn(),_=yr(),c=bi(),l=Qn(),h="http://169.254.169.254/metadata/instance/compute",p="api-version=2017-12-01",g="format=json",y="ENETUNREACH",f=function(){function b(w){this._collectionInterval=9e5,this._vmData={},this._azInst_vmId="",this._azInst_subscriptionId="",this._azInst_osType="",b.INSTANCE||(b.INSTANCE=this),this._isInitialized=!1,this._client=w}return b.prototype.enable=function(w,S){var R=this;this._isEnabled=w,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),w?this._handle||(this._handle=setInterval(function(){return R.trackHeartBeat(S,function(){})},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},b.prototype.isInitialized=function(){return this._isInitialized},b.isEnabled=function(){return b.INSTANCE&&b.INSTANCE._isEnabled},b.prototype.trackHeartBeat=function(w,S){var R=this,A=!1,D={},j=c.sdkVersion;D.sdk=j,D.osType=d.type(),process.env.WEBSITE_SITE_NAME?(D.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",D.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",D.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?D.azfunction_appId=process.env.WEBSITE_HOSTNAME:w&&(this._isVM===void 0?(A=!0,this._getAzureComputeMetadata(w,function(){R._isVM&&Object.keys(R._vmData).length>0&&(D.azInst_vmId=R._vmData.vmId||"",D.azInst_subscriptionId=R._vmData.subscriptionId||"",D.azInst_osType=R._vmData.osType||"",R._azInst_vmId=R._vmData.vmId||"",R._azInst_subscriptionId=R._vmData.subscriptionId||"",R._azInst_osType=R._vmData.osType||""),R._client.trackMetric({name:v.HeartBeatMetricName,value:0,properties:D}),S()})):this._isVM&&(D.azInst_vmId=this._azInst_vmId,D.azInst_subscriptionId=this._azInst_subscriptionId,D.azInst_osType=this._azInst_osType)),A||(this._client.trackMetric({name:v.HeartBeatMetricName,value:0,properties:D}),S())},b.prototype.dispose=function(){b.INSTANCE=null,this.enable(!1),this._isInitialized=!1},b.prototype._getAzureComputeMetadata=function(w,S){var R,A=this,D=h+"?"+p+"&"+g,j=(R={method:"GET"},R[l.disableCollectionRequestOption]=!0,R.headers={Metadata:"True"},R),ee=_.makeRequest(w,D,j,function(K){if(K.statusCode===200){A._isVM=!0;var oe="";K.on("data",function(ge){oe+=ge}),K.on("end",function(){A._vmData=A._isJSON(oe)?JSON.parse(oe):{},S()})}else S()});ee&&(ee.on("error",function(K){K&&K.message&&K.message.indexOf(y)>-1&&(A._isVM=!1),S()}),ee.end())},b.prototype._isJSON=function(w){try{return JSON.parse(w)&&!!w}catch(S){return!1}},b}();T.exports=f}),Vo=I((s,T)=>{"use strict";var d=M(8605),v=M(7211),_=se(),c=yr(),l=hi(),h=Fr(),p=yi(),g=zn(),y=function(){function f(b){if(f.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");f.INSTANCE=this,this._client=b}return f.prototype.enable=function(b){this._isEnabled=b,(this._isAutoCorrelating||this._isEnabled||g.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},f.prototype.useAutoCorrelation=function(b,w){b&&!this._isAutoCorrelating?p.CorrelationContextManager.enable(w):!b&&this._isAutoCorrelating&&p.CorrelationContextManager.disable(),this._isAutoCorrelating=b},f.prototype.isInitialized=function(){return this._isInitialized},f.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},f.prototype._generateCorrelationContext=function(b){if(this._isAutoCorrelating)return p.CorrelationContextManager.generateContextObject(b.getOperationId(this._client.context.tags),b.getRequestId(),b.getOperationName(this._client.context.tags),b.getCorrelationContextHeader(),b.getTraceparent(),b.getTracestate())},f.prototype._initialize=function(){var b=this;this._isInitialized=!0;var w=function(D){if(D){if(typeof D!="function")throw new Error("onRequest handler must be a function");return function(j,ee){p.CorrelationContextManager.wrapEmitter(j),p.CorrelationContextManager.wrapEmitter(ee);var K=j&&!j[f.alreadyAutoCollectedFlag];if(j&&K){var oe=new h(j),ge=b._generateCorrelationContext(oe);p.CorrelationContextManager.runWithContext(ge,function(){b._isEnabled&&(j[f.alreadyAutoCollectedFlag]=!0,f.trackRequest(b._client,{request:j,response:ee},oe)),typeof D=="function"&&D(j,ee)})}else typeof D=="function"&&D(j,ee)}}},S=function(D){var j=D.addListener.bind(D);D.addListener=function(ee,K){switch(ee){case"request":case"checkContinue":return j(ee,w(K));default:return j(ee,K)}},D.on=D.addListener},R=d.createServer;d.createServer=function(D,j){if(j&&typeof j=="function"){var ee=R(D,w(j));return S(ee),ee}else{var ee=R(w(D));return S(ee),ee}};var A=v.createServer;v.createServer=function(D,j){var ee=A(D,w(j));return S(ee),ee}},f.trackRequestSync=function(b,w){if(!w.request||!w.response||!b){_.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!w.request,!w.response,!b);return}f.addResponseCorrelationIdHeader(b,w.response);var S=p.CorrelationContextManager.getCurrentContext(),R=new h(w.request,S&&S.operation.parentId);S&&(S.operation.id=R.getOperationId(b.context.tags)||S.operation.id,S.operation.name=R.getOperationName(b.context.tags)||S.operation.name,S.operation.parentId=R.getRequestId()||S.operation.parentId,S.customProperties.addHeaderData(R.getCorrelationContextHeader())),f.endRequest(b,R,w,w.duration,w.error)},f.trackRequest=function(b,w,S){if(!w.request||!w.response||!b){_.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!w.request,!w.response,!b);return}var R=p.CorrelationContextManager.getCurrentContext(),A=S||new h(w.request,R&&R.operation.parentId);c.canIncludeCorrelationHeader(b,A.getUrl())&&f.addResponseCorrelationIdHeader(b,w.response),R&&!S&&(R.operation.id=A.getOperationId(b.context.tags)||R.operation.id,R.operation.name=A.getOperationName(b.context.tags)||R.operation.name,R.operation.parentId=A.getOperationParentId(b.context.tags)||R.operation.parentId,R.customProperties.addHeaderData(A.getCorrelationContextHeader())),w.response.once&&w.response.once("finish",function(){f.endRequest(b,A,w,null,null)}),w.request.on&&w.request.on("error",function(D){f.endRequest(b,A,w,null,D)}),w.request.on&&w.request.on("aborted",function(){var D="The request has been aborted and the network socket has closed.";f.endRequest(b,A,w,null,D)})},f.addResponseCorrelationIdHeader=function(b,w){if(b.config&&b.config.correlationId&&w.getHeader&&w.setHeader&&!w.headersSent){var S=w.getHeader(l.requestContextHeader);c.safeIncludeCorrelationHeader(b,w,S)}},f.endRequest=function(b,w,S,R,A){A?w.onError(A,R):w.onResponse(S.response,R);var D=w.getRequestTelemetry(S);if(D.tagOverrides=w.getRequestTags(b.context.tags),S.tagOverrides)for(var j in S.tagOverrides)D.tagOverrides[j]=S.tagOverrides[j];var ee=w.getLegacyRootId();ee&&(D.properties.ai_legacyRootId=ee),D.contextObjects=D.contextObjects||{},D.contextObjects["http.ServerRequest"]=S.request,D.contextObjects["http.ServerResponse"]=S.response,b.trackRequest(D)},f.prototype.dispose=function(){f.INSTANCE=null,this.enable(!1),this._isInitialized=!1,p.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},f.alreadyAutoCollectedFlag="_appInsightsAutoCollected",f}();T.exports=y}),Gl=I((s,T)=>{"use strict";var d=s&&s.__assign||function(){return d=Object.assign||function(y){for(var f,b=1,w=arguments.length;b<w;b++){f=arguments[b];for(var S in f)Object.prototype.hasOwnProperty.call(f,S)&&(y[S]=f[S])}return y},d.apply(this,arguments)},v=M(2087),_=zt(),c=Rn(),l=yr(),h=se(),p=l.w3cTraceId(),g=function(){function y(){}return y.createQuickPulseEnvelope=function(f,b,w,S){var R=v&&typeof v.hostname=="function"&&v.hostname()||"Unknown",A=S.tags&&S.keys&&S.keys.cloudRoleInstance&&S.tags[S.keys.cloudRoleInstance]||R,D=S.tags&&S.keys&&S.keys.cloudRole&&S.tags[S.keys.cloudRole]||null,j={Documents:b.length>0?b:null,InstrumentationKey:w.instrumentationKey||"",Metrics:f.length>0?f:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:S.tags[S.keys.internalSdkVersion],StreamId:p,MachineName:R,Instance:A,RoleName:D};return j},y.createQuickPulseMetric=function(f){var b;return b={Name:f.name,Value:f.value,Weight:f.count||1},b},y.telemetryEnvelopeToQuickPulseDocument=function(f){switch(f.data.baseType){case _.TelemetryTypeString.Event:return y.createQuickPulseEventDocument(f);case _.TelemetryTypeString.Exception:return y.createQuickPulseExceptionDocument(f);case _.TelemetryTypeString.Trace:return y.createQuickPulseTraceDocument(f);case _.TelemetryTypeString.Dependency:return y.createQuickPulseDependencyDocument(f);case _.TelemetryTypeString.Request:return y.createQuickPulseRequestDocument(f)}return null},y.createQuickPulseEventDocument=function(f){var b=y.createQuickPulseDocument(f),w=f.data.baseData.name,S=d(d({},b),{Name:w});return S},y.createQuickPulseTraceDocument=function(f){var b=y.createQuickPulseDocument(f),w=f.data.baseData.severityLevel||0,S=d(d({},b),{Message:f.data.baseData.message,SeverityLevel:_.SeverityLevel[w]});return S},y.createQuickPulseExceptionDocument=function(f){var b=y.createQuickPulseDocument(f),w=f.data.baseData.exceptions,S="",R="",A="";w&&w.length>0&&(w[0].parsedStack&&w[0].parsedStack.length>0?w[0].parsedStack.forEach(function(j){S+=j.assembly+`
`}):w[0].stack&&w[0].stack.length>0&&(S=w[0].stack),R=w[0].message,A=w[0].typeName);var D=d(d({},b),{Exception:S,ExceptionMessage:R,ExceptionType:A});return D},y.createQuickPulseRequestDocument=function(f){var b=y.createQuickPulseDocument(f),w=f.data.baseData,S=d(d({},b),{Name:w.name,Success:w.success,Duration:w.duration,ResponseCode:w.responseCode,OperationName:w.name});return S},y.createQuickPulseDependencyDocument=function(f){var b=y.createQuickPulseDocument(f),w=f.data.baseData,S=d(d({},b),{Name:w.name,Target:w.target,Success:w.success,Duration:w.duration,ResultCode:w.resultCode,CommandName:w.data,OperationName:b.OperationId,DependencyTypeName:w.type});return S},y.createQuickPulseDocument=function(f){var b,w,S,R;f.data.baseType?(w=c.TelemetryTypeStringToQuickPulseType[f.data.baseType],b=c.TelemetryTypeStringToQuickPulseDocumentType[f.data.baseType]):h.warn("Document type invalid; not sending live metric document",f.data.baseType),S=f.tags[y.keys.operationId],R=y.aggregateProperties(f);var A={DocumentType:b,__type:w,OperationId:S,Version:"1.0",Properties:R};return A},y.aggregateProperties=function(f){var b=[],w=f.data.baseData.measurements||{};for(var S in w)if(w.hasOwnProperty(S)){var R=w[S],A={key:S,value:R};b.push(A)}var D=f.data.baseData.properties||{};for(var S in D)if(D.hasOwnProperty(S)){var R=D[S],A={key:S,value:R};b.push(A)}return b},y.keys=new _.ContextTagKeys,y}();T.exports=g}),Hl=I((s,T)=>{"use strict";var d=function(){return(Date.now()+621355968e5)*1e4};T.exports={getTransmissionTime:d}}),Bl=I((s,T)=>{"use strict";var d=s&&s.__awaiter||function(f,b,w,S){function R(A){return A instanceof w?A:new w(function(D){D(A)})}return new(w||(w=Promise))(function(A,D){function j(oe){try{K(S.next(oe))}catch(ge){D(ge)}}function ee(oe){try{K(S.throw(oe))}catch(ge){D(ge)}}function K(oe){oe.done?A(oe.value):R(oe.value).then(j,ee)}K((S=S.apply(f,b||[])).next())})},v=s&&s.__generator||function(f,b){var w={label:0,sent:function(){if(A[0]&1)throw A[1];return A[1]},trys:[],ops:[]},S,R,A,D;return D={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(D[Symbol.iterator]=function(){return this}),D;function j(K){return function(oe){return ee([K,oe])}}function ee(K){if(S)throw new TypeError("Generator is already executing.");for(;w;)try{if(S=1,R&&(A=K[0]&2?R.return:K[0]?R.throw||((A=R.return)&&A.call(R),0):R.next)&&!(A=A.call(R,K[1])).done)return A;switch(R=0,A&&(K=[K[0]&2,A.value]),K[0]){case 0:case 1:A=K;break;case 4:return w.label++,{value:K[1],done:!1};case 5:w.label++,R=K[1],K=[0];continue;case 7:K=w.ops.pop(),w.trys.pop();continue;default:if(A=w.trys,!(A=A.length>0&&A[A.length-1])&&(K[0]===6||K[0]===2)){w=0;continue}if(K[0]===3&&(!A||K[1]>A[0]&&K[1]<A[3])){w.label=K[1];break}if(K[0]===6&&w.label<A[1]){w.label=A[1],A=K;break}if(A&&w.label<A[2]){w.label=A[2],w.ops.push(K);break}A[2]&&w.ops.pop(),w.trys.pop();continue}K=b.call(f,w)}catch(oe){K=[6,oe],R=0}finally{S=A=0}if(K[0]&5)throw K[1];return{value:K[0]?K[1]:void 0,done:!0}}},_=M(7211),c=Qn(),l=se(),h=Hl(),p=yr(),g={method:"POST",time:"x-ms-qps-transmission-time",pollingIntervalHint:"x-ms-qps-service-polling-interval-hint",endpointRedirect:"x-ms-qps-service-endpoint-redirect",instanceName:"x-ms-qps-instance-name",streamId:"x-ms-qps-stream-id",machineName:"x-ms-qps-machine-name",roleName:"x-ms-qps-role-name",streamid:"x-ms-qps-stream-id",invariantVersion:"x-ms-qps-invariant-version",subscribed:"x-ms-qps-subscribed"},y=function(){function f(b){this._config=b,this._consecutiveErrors=0}return f.prototype.ping=function(b,w,S){var R=[{name:g.streamId,value:b.StreamId},{name:g.machineName,value:b.MachineName},{name:g.roleName,value:b.RoleName},{name:g.instanceName,value:b.Instance},{name:g.invariantVersion,value:b.InvariantVersion.toString()}];this._submitData(b,w,S,"ping",R)},f.prototype.post=function(b,w,S){return d(this,void 0,void 0,function(){return v(this,function(R){switch(R.label){case 0:return[4,this._submitData([b],w,S,"post")];case 1:return R.sent(),[2]}})})},f.prototype._submitData=function(b,w,S,R,A){return d(this,void 0,void 0,function(){var D,j,ee,K,oe,ge=this;return v(this,function(ke){return D=JSON.stringify(b),j=(K={},K[c.disableCollectionRequestOption]=!0,K.host=w&&w.length>0?w:this._config.quickPulseHost,K.method=g.method,K.path="/QuickPulseService.svc/"+R+"?ikey="+this._config.instrumentationKey,K.headers=(oe={Expect:"100-continue"},oe[g.time]=h.getTransmissionTime(),oe["Content-Type"]="application/json",oe["Content-Length"]=Buffer.byteLength(D),oe),K),A&&A.length>0&&A.forEach(function(Se){return j.headers[Se.name]=Se.value}),this._config.httpsAgent?j.agent=this._config.httpsAgent:j.agent=p.tlsRestrictedAgent,ee=_.request(j,function(Se){if(Se.statusCode==200){var Pe=Se.headers[g.subscribed]==="true",Ce=Se.headers[g.endpointRedirect]?Se.headers[g.endpointRedirect].toString():null,$e=Se.headers[g.pollingIntervalHint]?parseInt(Se.headers[g.pollingIntervalHint].toString()):null;ge._consecutiveErrors=0,S(Pe,Se,Ce,$e)}else ge._onError("StatusCode:"+Se.statusCode+" StatusMessage:"+Se.statusMessage),S()}),ee.on("error",function(Se){ge._onError(Se),S()}),ee.write(D),ee.end(),[2]})})},f.prototype._onError=function(b){this._consecutiveErrors++;var w="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%f.MAX_QPS_FAILURES_BEFORE_WARN==0?(w="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",l.warn(f.TAG,w,b)):l.info(f.TAG,w,b)},f.TAG="QuickPulseSender",f.MAX_QPS_FAILURES_BEFORE_WARN=25,f}();T.exports=y}),Vl=I((s,T)=>{"use strict";var d=s&&s.__awaiter||function(y,f,b,w){function S(R){return R instanceof b?R:new b(function(A){A(R)})}return new(b||(b=Promise))(function(R,A){function D(K){try{ee(w.next(K))}catch(oe){A(oe)}}function j(K){try{ee(w.throw(K))}catch(oe){A(oe)}}function ee(K){K.done?R(K.value):S(K.value).then(D,j)}ee((w=w.apply(y,f||[])).next())})},v=s&&s.__generator||function(y,f){var b={label:0,sent:function(){if(R[0]&1)throw R[1];return R[1]},trys:[],ops:[]},w,S,R,A;return A={next:D(0),throw:D(1),return:D(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function D(ee){return function(K){return j([ee,K])}}function j(ee){if(w)throw new TypeError("Generator is already executing.");for(;b;)try{if(w=1,S&&(R=ee[0]&2?S.return:ee[0]?S.throw||((R=S.return)&&R.call(S),0):S.next)&&!(R=R.call(S,ee[1])).done)return R;switch(S=0,R&&(ee=[ee[0]&2,R.value]),ee[0]){case 0:case 1:R=ee;break;case 4:return b.label++,{value:ee[1],done:!1};case 5:b.label++,S=ee[1],ee=[0];continue;case 7:ee=b.ops.pop(),b.trys.pop();continue;default:if(R=b.trys,!(R=R.length>0&&R[R.length-1])&&(ee[0]===6||ee[0]===2)){b=0;continue}if(ee[0]===3&&(!R||ee[1]>R[0]&&ee[1]<R[3])){b.label=ee[1];break}if(ee[0]===6&&b.label<R[1]){b.label=R[1],R=ee;break}if(R&&b.label<R[2]){b.label=R[2],b.ops.push(ee);break}R[2]&&b.ops.pop(),b.trys.pop();continue}ee=f.call(y,b)}catch(K){ee=[6,K],S=0}finally{w=R=0}if(ee[0]&5)throw ee[1];return{value:ee[0]?ee[1]:void 0,done:!0}}},_=se(),c=Gl(),l=Bl(),h=Rn(),p=bi(),g=function(){function y(f,b){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=f,this.context=b||new p,this._sender=new l(this.config),this._isEnabled=!1}return y.prototype.addCollector=function(f){this._collectors.push(f)},y.prototype.trackMetric=function(f){this._addMetric(f)},y.prototype.addDocument=function(f){var b=c.telemetryEnvelopeToQuickPulseDocument(f);b&&this._documents.push(b)},y.prototype.enable=function(f){f&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!f&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},y.prototype.enableCollectors=function(f){this._collectors.forEach(function(b){b.enable(f)})},y.prototype._addMetric=function(f){var b=f.value,w=f.count||1,S=h.PerformanceToQuickPulseCounter[f.name];S&&(this._metrics[S]?(this._metrics[S].Value=(this._metrics[S].Value*this._metrics[S].Weight+b*w)/(this._metrics[S].Weight+w),this._metrics[S].Weight+=w):(this._metrics[S]=c.createQuickPulseMetric(f),this._metrics[S].Name=S,this._metrics[S].Weight=1))},y.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},y.prototype._goQuickPulse=function(){return d(this,void 0,void 0,function(){var f,b,w,S,R=this;return v(this,function(A){switch(A.label){case 0:return f=Object.keys(this._metrics).map(function(D){return R._metrics[D]}),b=c.createQuickPulseEnvelope(f,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(b)]:[3,2];case 1:return A.sent(),[3,3];case 2:this._ping(b),A.label=3;case 3:return w=this._pollingIntervalHint>0?this._pollingIntervalHint:y.PING_INTERVAL,S=this._isCollectingData?y.POST_INTERVAL:w,this._isCollectingData&&Date.now()-this._lastSuccessTime>=y.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,S=y.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=y.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(S=y.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),S),this._handle.unref(),[2]}})})},y.prototype._ping=function(f){this._sender.ping(f,this._redirectedHost,this._quickPulseDone.bind(this))},y.prototype._post=function(f){return d(this,void 0,void 0,function(){return v(this,function(b){switch(b.label){case 0:return[4,this._sender.post(f,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return b.sent(),[2]}})})},y.prototype._quickPulseDone=function(f,b,w,S){f!=null?(this._isCollectingData!==f&&(_.info("Live Metrics sending data",f),this.enableCollectors(f)),this._isCollectingData=f,w&&w.length>0&&(this._redirectedHost=w,_.info("Redirecting endpoint to: ",w)),S&&S>0&&(this._pollingIntervalHint=S),b&&b.statusCode<300&&b.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},y.MAX_POST_WAIT_TIME=2e4,y.MAX_PING_WAIT_TIME=6e4,y.FALLBACK_INTERVAL=6e4,y.PING_INTERVAL=5e3,y.POST_INTERVAL=1e3,y}();T.exports=g}),jo=I((s,T)=>{"use strict";var d=Rn(),v=function(){function _(){}return _.parse=function(c){if(!c)return{};var l=c.split(_._FIELDS_SEPARATOR),h=l.reduce(function(g,y){var f=y.split(_._FIELD_KEY_VALUE_SEPARATOR);if(f.length===2){var b=f[0].toLowerCase(),w=f[1];g[b]=w}return g},{});if(Object.keys(h).length>0){if(h.endpointsuffix){var p=h.location?h.location+".":"";h.ingestionendpoint=h.ingestionendpoint||"https://"+p+"dc."+h.endpointsuffix,h.liveendpoint=h.liveendpoint||"https://"+p+"live."+h.endpointsuffix}h.ingestionendpoint=h.ingestionendpoint||d.DEFAULT_BREEZE_ENDPOINT,h.liveendpoint=h.liveendpoint||d.DEFAULT_LIVEMETRICS_ENDPOINT}return h},_._FIELDS_SEPARATOR=";",_._FIELD_KEY_VALUE_SEPARATOR="=",_}();T.exports=v}),Ts=I((s,T)=>{"use strict";var d=pi(),v=jo(),_=se(),c=Rn(),l=M(8835),h=function(){function p(g){var y=this;this.endpointBase=c.DEFAULT_BREEZE_ENDPOINT;var f=process.env[p.ENV_connectionString],b=v.parse(g),w=v.parse(f),S=!b.instrumentationkey&&Object.keys(b).length>0?null:g;this.instrumentationKey=b.instrumentationkey||S||w.instrumentationkey||p._getInstrumentationKey(),p._validateInstrumentationKey(this.instrumentationKey),this.endpointUrl=(b.ingestionendpoint||w.ingestionendpoint||this.endpointBase)+"/v2.1/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=30*1e3,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(R){return y.correlationId=R},this.proxyHttpUrl=process.env[p.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[p.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=b.ingestionendpoint||w.ingestionendpoint||process.env[p.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=b.liveendpoint||w.liveendpoint||process.env[p.ENV_quickPulseHost]||c.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=l.parse(this._quickPulseHost).host)}return Object.defineProperty(p.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(g){d.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=g,this.correlationId=d.correlationIdPrefix,d.queryCorrelationId(this,this.setCorrelationId)},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(g){this._quickPulseHost=g},enumerable:!1,configurable:!0}),p._getInstrumentationKey=function(){var g=process.env[p.ENV_iKey]||process.env[p.ENV_azurePrefix+p.ENV_iKey]||process.env[p.legacy_ENV_iKey]||process.env[p.ENV_azurePrefix+p.legacy_ENV_iKey];if(!g||g=="")throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return g},p._validateInstrumentationKey=function(g){var y="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",f=new RegExp(y);return f.test(g)},p.ENV_azurePrefix="APPSETTING_",p.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",p.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",p.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",p.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",p.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",p.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",p.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",p.ENV_http_proxy="http_proxy",p.ENV_https_proxy="https_proxy",p}();T.exports=h}),jl=I(s=>{"use strict";var T=s&&s.__assign||function(){return T=Object.assign||function(l){for(var h,p=1,g=arguments.length;p<g;p++){h=arguments[p];for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(l[y]=h[y])}return l},T.apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0}),s.AutoCollectNativePerformance=void 0;var d=Ts(),v=bi(),_=se(),c=function(){function l(h){this._disabledMetrics={},l.INSTANCE&&l.INSTANCE.dispose(),l.INSTANCE=this,this._client=h}return l.isNodeVersionCompatible=function(){var h=process.versions.node.split(".");return parseInt(h[0])>=6},l.prototype.enable=function(h,p,g){var y=this;if(p===void 0&&(p={}),g===void 0&&(g=6e4),!!l.isNodeVersionCompatible()){if(l._metricsAvailable==null&&h&&!this._isInitialized)try{var f=M(6591);l._emitter=new f,l._metricsAvailable=!0,_.info("Native metrics module successfully loaded!")}catch(b){l._metricsAvailable=!1;return}this._isEnabled=h,this._disabledMetrics=p,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&l._emitter?(l._emitter.enable(!0,g),this._handle||(this._handle=setInterval(function(){return y._trackNativeMetrics()},g),this._handle.unref())):l._emitter&&(l._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},l.prototype.dispose=function(){this.enable(!1)},l.parseEnabled=function(h){var p=process.env[d.ENV_nativeMetricsDisableAll],g=process.env[d.ENV_nativeMetricsDisablers];if(p)return{isEnabled:!1,disabledMetrics:{}};if(g){var y=g.split(","),f={};if(y.length>0)for(var b=0,w=y;b<w.length;b++){var S=w[b];f[S]=!0}return typeof h=="object"?{isEnabled:!0,disabledMetrics:T(T({},h),f)}:{isEnabled:h,disabledMetrics:f}}return typeof h=="boolean"?{isEnabled:h,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:h}},l.prototype._trackNativeMetrics=function(){var h=!0;typeof this._isEnabled!="object"&&(h=this._isEnabled),h&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},l.prototype._trackGarbageCollection=function(){var h;if(!this._disabledMetrics.gc){var p=l._emitter.getGCData();for(var g in p){var y=p[g].metrics,f=g+" Garbage Collection Duration",b=Math.sqrt(y.sumSquares/y.count-Math.pow(y.total/y.count,2))||0;this._client.trackMetric({name:f,value:y.total,count:y.count,max:y.max,min:y.min,stdDev:b,tagOverrides:(h={},h[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+v.sdkVersion,h)})}}},l.prototype._trackEventLoop=function(){var h;if(!this._disabledMetrics.loop){var p=l._emitter.getLoopData(),g=p.loopUsage;if(g.count!=0){var y="Event Loop CPU Time",f=Math.sqrt(g.sumSquares/g.count-Math.pow(g.total/g.count,2))||0;this._client.trackMetric({name:y,value:g.total,count:g.count,min:g.min,max:g.max,stdDev:f,tagOverrides:(h={},h[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+v.sdkVersion,h)})}}},l.prototype._trackHeapUsage=function(){var h,p,g;if(!this._disabledMetrics.heap){var y=process.memoryUsage(),f=y.heapUsed,b=y.heapTotal,w=y.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:f,count:1,tagOverrides:(h={},h[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+v.sdkVersion,h)}),this._client.trackMetric({name:"Memory Total (Heap)",value:b,count:1,tagOverrides:(p={},p[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+v.sdkVersion,p)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:w-b,count:1,tagOverrides:(g={},g[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+v.sdkVersion,g)})}},l}();s.AutoCollectNativePerformance=c}),zo=I((s,T)=>{"use strict";var d=se(),v=function(){function _(c,l,h,p){this._buffer=[],this._lastSend=0,this._isDisabled=c,this._getBatchSize=l,this._getBatchIntervalMs=h,this._sender=p}return _.prototype.setUseDiskRetryCaching=function(c,l,h){this._sender.setDiskRetryMode(c,l,h)},_.prototype.send=function(c){var l=this;if(!this._isDisabled()){if(!c){d.warn("Cannot send null/undefined telemetry");return}if(this._buffer.push(c),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){l._timeoutHandle=null,l.triggerSend(!1)},this._getBatchIntervalMs()))}},_.prototype.triggerSend=function(c,l){var h=this._buffer.length<1;h||(c?(this._sender.saveOnCrash(this._buffer),typeof l=="function"&&l("data saved on crash")):this._sender.send(this._buffer,l)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,h&&typeof l=="function"&&l("no data to send")},_}();T.exports=v}),zl=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.azureRoleEnvironmentTelemetryProcessor=void 0;function T(d,v){process.env.WEBSITE_SITE_NAME&&(d.tags[v.keys.cloudRole]=process.env.WEBSITE_SITE_NAME)}s.azureRoleEnvironmentTelemetryProcessor=T}),Ql=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.getSamplingHashCode=s.samplingTelemetryProcessor=void 0;var T=zt();function d(_,c){var l=_.sampleRate,h=!1;return l==null||l>=100||_.data&&T.TelemetryType.Metric===T.baseTypeToTelemetryType(_.data.baseType)?!0:(c.correlationContext&&c.correlationContext.operation?h=v(c.correlationContext.operation.id)<l:h=Math.random()*100<l,h)}s.samplingTelemetryProcessor=d;function v(_){var c=-2147483648,l=2147483647,h=5381;if(!_)return 0;for(;_.length<8;)_=_+_;for(var p=0;p<_.length;p++)h=((h<<5)+h|0)+_.charCodeAt(p)|0;return h=h<=c?l:Math.abs(h),h/l*100}s.getSamplingHashCode=v}),wa=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.performanceMetricsTelemetryProcessor=void 0;var T=zn(),d=zt();function v(_,c){switch(c&&c.addDocument(_),_.data.baseType){case d.TelemetryTypeString.Exception:T.countException();break;case d.TelemetryTypeString.Request:var l=_.data.baseData;T.countRequest(l.duration,l.success);break;case d.TelemetryTypeString.Dependency:var h=_.data.baseData;T.countDependency(h.duration,h.success);break}return!0}s.performanceMetricsTelemetryProcessor=v}),Qo=I(s=>{"use strict";var T=s&&s.__assign||function(){return T=Object.assign||function(l){for(var h,p=1,g=arguments.length;p<g;p++){h=arguments[p];for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(l[y]=h[y])}return l},T.apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0}),s.preAggregatedMetricsTelemetryProcessor=void 0;var d=zt(),v=_a(),_=zt();function c(l,h){if(v.isEnabled())switch(l.data.baseType){case _.TelemetryTypeString.Exception:var p=l.data.baseData;p.properties=T(T({},p.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var g={cloudRoleInstance:l.tags[h.keys.cloudRoleInstance],cloudRoleName:l.tags[h.keys.cloudRole]};v.countException(g);break;case _.TelemetryTypeString.Trace:var y=l.data.baseData;y.properties=T(T({},y.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var f={cloudRoleInstance:l.tags[h.keys.cloudRoleInstance],cloudRoleName:l.tags[h.keys.cloudRole],traceSeverityLevel:d.SeverityLevel[y.severity]};v.countTrace(f);break;case _.TelemetryTypeString.Request:var b=l.data.baseData;b.properties=T(T({},b.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var w={cloudRoleInstance:l.tags[h.keys.cloudRoleInstance],cloudRoleName:l.tags[h.keys.cloudRole],operationSynthetic:l.tags[h.keys.operationSyntheticSource],requestSuccess:b.success,requestResultCode:b.responseCode};v.countRequest(b.duration,w);break;case _.TelemetryTypeString.Dependency:var S=l.data.baseData;S.properties=T(T({},S.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var R={cloudRoleInstance:l.tags[h.keys.cloudRoleInstance],cloudRoleName:l.tags[h.keys.cloudRole],operationSynthetic:l.tags[h.keys.operationSyntheticSource],dependencySuccess:S.success,dependencyType:S.type,dependencyTarget:S.target,dependencyResultCode:S.resultCode};v.countDependency(S.duration,R);break}return!0}s.preAggregatedMetricsTelemetryProcessor=c}),Wo=I(s=>{"use strict";var T=s&&s.__createBinding||(Object.create?function(v,_,c,l){l===void 0&&(l=c),Object.defineProperty(v,l,{enumerable:!0,get:function(){return _[c]}})}:function(v,_,c,l){l===void 0&&(l=c),v[l]=_[c]}),d=s&&s.__exportStar||function(v,_){for(var c in v)c!=="default"&&!Object.prototype.hasOwnProperty.call(_,c)&&T(_,v,c)};Object.defineProperty(s,"__esModule",{value:!0}),d(zl(),s),d(Ql(),s),d(wa(),s),d(Qo(),s)}),gd=I((s,T)=>{"use strict";var d=s&&s.__awaiter||function(w,S,R,A){function D(j){return j instanceof R?j:new R(function(ee){ee(j)})}return new(R||(R=Promise))(function(j,ee){function K(ke){try{ge(A.next(ke))}catch(Se){ee(Se)}}function oe(ke){try{ge(A.throw(ke))}catch(Se){ee(Se)}}function ge(ke){ke.done?j(ke.value):D(ke.value).then(K,oe)}ge((A=A.apply(w,S||[])).next())})},v=s&&s.__generator||function(w,S){var R={label:0,sent:function(){if(j[0]&1)throw j[1];return j[1]},trys:[],ops:[]},A,D,j,ee;return ee={next:K(0),throw:K(1),return:K(2)},typeof Symbol=="function"&&(ee[Symbol.iterator]=function(){return this}),ee;function K(ge){return function(ke){return oe([ge,ke])}}function oe(ge){if(A)throw new TypeError("Generator is already executing.");for(;R;)try{if(A=1,D&&(j=ge[0]&2?D.return:ge[0]?D.throw||((j=D.return)&&j.call(D),0):D.next)&&!(j=j.call(D,ge[1])).done)return j;switch(D=0,j&&(ge=[ge[0]&2,j.value]),ge[0]){case 0:case 1:j=ge;break;case 4:return R.label++,{value:ge[1],done:!1};case 5:R.label++,D=ge[1],ge=[0];continue;case 7:ge=R.ops.pop(),R.trys.pop();continue;default:if(j=R.trys,!(j=j.length>0&&j[j.length-1])&&(ge[0]===6||ge[0]===2)){R=0;continue}if(ge[0]===3&&(!j||ge[1]>j[0]&&ge[1]<j[3])){R.label=ge[1];break}if(ge[0]===6&&R.label<j[1]){R.label=j[1],j=ge;break}if(j&&R.label<j[2]){R.label=j[2],R.ops.push(ge);break}j[2]&&R.ops.pop(),R.trys.pop();continue}ge=S.call(w,R)}catch(ke){ge=[6,ke],D=0}finally{A=j=0}if(ge[0]&5)throw ge[1];return{value:ge[0]?ge[1]:void 0,done:!0}}},_=M(5747),c=M(2087),l=M(5622),h=M(8761),p=M(3129),g=se(),y=Qn(),f=yr(),b=function(){function w(S,R,A){if(this._redirectedHost=null,this._config=S,this._onSuccess=R,this._onError=A,this._enableDiskRetryMode=!1,this._resendInterval=w.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=w.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._fileCleanupTimer=null,this._tempDir=l.join(c.tmpdir(),w.TEMPDIR_PREFIX+this._config.instrumentationKey),!w.OS_PROVIDES_FILE_PROTECTION)if(w.USE_ICACLS){try{w.OS_PROVIDES_FILE_PROTECTION=_.existsSync(w.ICACLS_PATH)}catch(D){}w.OS_PROVIDES_FILE_PROTECTION||g.warn(w.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else w.OS_PROVIDES_FILE_PROTECTION=!0}return w.prototype.setDiskRetryMode=function(S,R,A){var D=this;this._enableDiskRetryMode=w.OS_PROVIDES_FILE_PROTECTION&&S,typeof R=="number"&&R>=0&&(this._resendInterval=Math.floor(R)),typeof A=="number"&&A>=0&&(this._maxBytesOnDisk=Math.floor(A)),S&&!w.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,g.warn(w.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout(function(){D._fileCleanupTask()},w.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref()):this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer)},w.prototype.send=function(S,R){return d(this,void 0,void 0,function(){var A,D,j,ee,K=this;return v(this,function(oe){return S&&(A=this._redirectedHost||this._config.endpointUrl,D={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},j="",S.forEach(function(ge){var ke=K._stringify(ge);typeof ke=="string"&&(j+=ke+`
`)}),j.length>0&&(j=j.substring(0,j.length-1)),ee=Buffer.from?Buffer.from(j):new Buffer(j),h.gzip(ee,function(ge,ke){var Se=ke;ge?(g.warn(ge),Se=ee,D.headers["Content-Length"]=ee.length.toString()):(D.headers["Content-Encoding"]="gzip",D.headers["Content-Length"]=ke.length.toString()),g.info(w.TAG,D),D[y.disableCollectionRequestOption]=!0;var Pe=function($e){$e.setEncoding("utf-8");var Qe="";$e.on("data",function(at){Qe+=at}),$e.on("end",function(){if(K._numConsecutiveFailures=0,K._enableDiskRetryMode){if($e.statusCode===200)K._resendTimer||(K._resendTimer=setTimeout(function(){K._resendTimer=null,K._sendFirstFileOnDisk()},K._resendInterval),K._resendTimer.unref());else if(K._isRetriable($e.statusCode))try{var at=JSON.parse(Qe),tt=[];at.errors.forEach(function(lt){K._isRetriable(lt.statusCode)&&tt.push(S[lt.index])}),tt.length>0&&K._storeToDisk(tt)}catch(lt){K._storeToDisk(S)}}if($e.statusCode===307||$e.statusCode===308)if(K._numConsecutiveRedirects++,K._numConsecutiveRedirects<10){var $t=$e.headers.location?$e.headers.location.toString():null;$t&&(K._redirectedHost=$t,K.send(S,R))}else typeof R=="function"&&R("Error sending telemetry because of circular redirects.");else K._numConsecutiveRedirects=0,typeof R=="function"&&R(Qe),g.info(w.TAG,Qe),typeof K._onSuccess=="function"&&K._onSuccess(Qe)})},Ce=f.makeRequest(K._config,A,D,Pe);Ce.on("error",function($e){if(K._numConsecutiveFailures++,!K._enableDiskRetryMode||K._numConsecutiveFailures>0&&K._numConsecutiveFailures%w.MAX_CONNECTION_FAILURES_BEFORE_WARN==0){var Qe="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";K._enableDiskRetryMode&&(Qe="Ingestion endpoint could not be reached "+K._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),g.warn(w.TAG,Qe,f.dumpObj($e))}else{var Qe="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";g.info(w.TAG,Qe,f.dumpObj($e))}K._onErrorHelper($e),typeof R=="function"&&($e&&R(f.dumpObj($e)),R("Error sending telemetry")),K._enableDiskRetryMode&&K._storeToDisk(S)}),Ce.write(Se),Ce.end()})),[2]})})},w.prototype.saveOnCrash=function(S){this._enableDiskRetryMode&&this._storeToDiskSync(this._stringify(S))},w.prototype._isRetriable=function(S){return S===206||S===408||S===429||S===439||S===500||S===503},w.prototype._runICACLS=function(S,R){var A=p.spawn(w.ICACLS_PATH,S,{windowsHide:!0});A.on("error",function(D){return R(D)}),A.on("close",function(D,j){return R(D===0?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+D+")"))})},w.prototype._runICACLSSync=function(S){if(p.spawnSync){var R=p.spawnSync(w.ICACLS_PATH,S,{windowsHide:!0});if(R.error)throw R.error;if(R.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+R.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},w.prototype._getACLIdentity=function(S){if(w.ACL_IDENTITY)return S(null,w.ACL_IDENTITY);var R=p.spawn(w.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),A="";R.stdout.on("data",function(D){return A+=D}),R.on("error",function(D){return S(D,null)}),R.on("close",function(D,j){return w.ACL_IDENTITY=A&&A.trim(),S(D===0?null:new Error("Getting ACL identity did not succeed (PS returned code "+D+")"),w.ACL_IDENTITY)})},w.prototype._getACLIdentitySync=function(){if(w.ACL_IDENTITY)return w.ACL_IDENTITY;if(p.spawnSync){var S=p.spawnSync(w.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(S.error)throw S.error;if(S.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+S.status+")");return w.ACL_IDENTITY=S.stdout&&S.stdout.toString().trim(),w.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},w.prototype._getACLArguments=function(S,R){return[S,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",R+":(OI)(CI)F","/inheritance:r"]},w.prototype._applyACLRules=function(S,R){var A=this;if(!w.USE_ICACLS)return R(null);if(w.ACLED_DIRECTORIES[S]===void 0)w.ACLED_DIRECTORIES[S]=!1,this._getACLIdentity(function(D,j){if(D)return w.ACLED_DIRECTORIES[S]=!1,R(D);A._runICACLS(A._getACLArguments(S,j),function(ee){return w.ACLED_DIRECTORIES[S]=!ee,R(ee)})});else return R(w.ACLED_DIRECTORIES[S]?null:new Error("Setting ACL restrictions did not succeed (cached result)"))},w.prototype._applyACLRulesSync=function(S){if(w.USE_ICACLS){if(w.ACLED_DIRECTORIES[S]===void 0){this._runICACLSSync(this._getACLArguments(S,this._getACLIdentitySync())),w.ACLED_DIRECTORIES[S]=!0;return}else if(!w.ACLED_DIRECTORIES[S])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},w.prototype._confirmDirExists=function(S,R){var A=this;_.lstat(S,function(D,j){D&&D.code==="ENOENT"?_.mkdir(S,function(ee){ee&&ee.code!=="EEXIST"?R(ee):A._applyACLRules(S,R)}):!D&&j.isDirectory()?A._applyACLRules(S,R):R(D||new Error("Path existed but was not a directory"))})},w.prototype._getShallowDirectorySize=function(S,R){_.readdir(S,function(A,D){if(A)return R(A,-1);var j=null,ee=0,K=0;if(D.length===0){R(null,0);return}for(var oe=0;oe<D.length;oe++)_.stat(l.join(S,D[oe]),function(ge,ke){K++,ge?j=ge:ke.isFile()&&(ee+=ke.size),K===D.length&&(j?R(j,-1):R(j,ee))})})},w.prototype._getShallowDirectorySizeSync=function(S){for(var R=_.readdirSync(S),A=0,D=0;D<R.length;D++)A+=_.statSync(l.join(S,R[D])).size;return A},w.prototype._storeToDisk=function(S){var R=this;g.info(w.TAG,"Checking existence of data storage directory: "+this._tempDir),this._confirmDirExists(this._tempDir,function(A){if(A){g.warn(w.TAG,"Error while checking/creating directory: "+(A&&A.message)),R._onErrorHelper(A);return}R._getShallowDirectorySize(R._tempDir,function(D,j){if(D||j<0){g.warn(w.TAG,"Error while checking directory size: "+(D&&D.message)),R._onErrorHelper(D);return}else if(j>R._maxBytesOnDisk){g.warn(w.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+j);return}var ee=new Date().getTime()+".ai.json",K=l.join(R._tempDir,ee);g.info(w.TAG,"saving data to disk at: "+K),_.writeFile(K,R._stringify(S),{mode:384},function(oe){return R._onErrorHelper(oe)})})})},w.prototype._storeToDiskSync=function(S){try{g.info(w.TAG,"Checking existence of data storage directory: "+this._tempDir),_.existsSync(this._tempDir)||_.mkdirSync(this._tempDir),this._applyACLRulesSync(this._tempDir);var R=this._getShallowDirectorySizeSync(this._tempDir);if(R>this._maxBytesOnDisk){g.info(w.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+R);return}var A=new Date().getTime()+".ai.json",D=l.join(this._tempDir,A);g.info(w.TAG,"saving data before crash to disk at: "+D),_.writeFileSync(D,S,{mode:384})}catch(j){g.warn(w.TAG,"Error while saving data to disk: "+(j&&j.message)),this._onErrorHelper(j)}},w.prototype._sendFirstFileOnDisk=function(){var S=this;_.exists(this._tempDir,function(R){R&&_.readdir(S._tempDir,function(A,D){if(A)S._onErrorHelper(A);else if(D=D.filter(function(K){return l.basename(K).indexOf(".ai.json")>-1}),D.length>0){var j=D[0],ee=l.join(S._tempDir,j);_.readFile(ee,function(K,oe){K?S._onErrorHelper(K):_.unlink(ee,function(ge){if(ge)S._onErrorHelper(ge);else try{var ke=JSON.parse(oe.toString());S.send(ke)}catch(Se){g.warn("Failed to read persisted file",Se)}})})}})})},w.prototype._onErrorHelper=function(S){typeof this._onError=="function"&&this._onError(S)},w.prototype._stringify=function(S){try{return JSON.stringify(S)}catch(R){g.warn("Failed to serialize payload",R,S)}},w.prototype._fileCleanupTask=function(){var S=this;_.exists(this._tempDir,function(R){R&&_.readdir(S._tempDir,function(A,D){A?S._onErrorHelper(A):(D=D.filter(function(j){return l.basename(j).indexOf(".ai.json")>-1}),D.length>0&&D.forEach(function(j){var ee=new Date(parseInt(j.split(".ai.json")[0])),K=new Date(+new Date-w.FILE_RETEMPTION_PERIOD)>ee;if(K){var oe=l.join(S._tempDir,j);_.unlink(oe,function(ge){ge&&S._onErrorHelper(ge)})}}))})})},w.TAG="Sender",w.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",w.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",w.ACLED_DIRECTORIES={},w.ACL_IDENTITY=null,w.WAIT_BETWEEN_RESEND=60*1e3,w.MAX_BYTES_ON_DISK=50*1024*1024,w.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,w.CLEANUP_TIMEOUT=60*60*1e3,w.FILE_RETEMPTION_PERIOD=7*24*60*60*1e3,w.TEMPDIR_PREFIX="appInsights-node",w.OS_PROVIDES_FILE_PROTECTION=!1,w.USE_ICACLS=c.type()==="Windows_NT",w}();T.exports=b}),Wl=I((s,T)=>{"use strict";var d=zt(),v=yr(),_=yi(),c=function(){function h(){}return h.createEnvelope=function(p,g,y,f,b){var w=null;switch(g){case d.TelemetryType.Trace:w=h.createTraceData(p);break;case d.TelemetryType.Dependency:w=h.createDependencyData(p);break;case d.TelemetryType.Event:w=h.createEventData(p);break;case d.TelemetryType.Exception:w=h.createExceptionData(p);break;case d.TelemetryType.Request:w=h.createRequestData(p);break;case d.TelemetryType.Metric:w=h.createMetricData(p);break;case d.TelemetryType.Availability:w=h.createAvailabilityData(p);break;case d.TelemetryType.PageView:w=h.createPageViewData(p);break}if(y&&d.domainSupportsProperties(w.baseData)){if(w&&w.baseData)if(!w.baseData.properties)w.baseData.properties=y;else for(var S in y)w.baseData.properties[S]||(w.baseData.properties[S]=y[S]);w.baseData.properties=v.validateStringMap(w.baseData.properties)}var R=b&&b.instrumentationKey||"",A=new d.Envelope;return A.data=w,A.iKey=R,A.name="Microsoft.ApplicationInsights."+R.replace(/-/g,"")+"."+w.baseType.substr(0,w.baseType.length-4),A.tags=this.getTags(f,p.tagOverrides),A.time=new Date().toISOString(),A.ver=1,A.sampleRate=b?b.samplingPercentage:100,g===d.TelemetryType.Metric&&(A.sampleRate=100),A},h.createTraceData=function(p){var g=new d.MessageData;g.message=p.message,g.properties=p.properties,isNaN(p.severity)?g.severityLevel=d.SeverityLevel.Information:g.severityLevel=p.severity;var y=new d.Data;return y.baseType=d.telemetryTypeToBaseType(d.TelemetryType.Trace),y.baseData=g,y},h.createDependencyData=function(p){var g=new d.RemoteDependencyData;typeof p.name=="string"&&(g.name=p.name.length>1024?p.name.slice(0,1021)+"...":p.name),g.data=p.data,g.target=p.target,g.duration=v.msToTimeSpan(p.duration),g.success=p.success,g.type=p.dependencyTypeName,g.properties=p.properties,g.resultCode=p.resultCode?p.resultCode+"":"",p.id?g.id=p.id:g.id=v.w3cTraceId();var y=new d.Data;return y.baseType=d.telemetryTypeToBaseType(d.TelemetryType.Dependency),y.baseData=g,y},h.createEventData=function(p){var g=new d.EventData;g.name=p.name,g.properties=p.properties,g.measurements=p.measurements;var y=new d.Data;return y.baseType=d.telemetryTypeToBaseType(d.TelemetryType.Event),y.baseData=g,y},h.createExceptionData=function(p){var g=new d.ExceptionData;g.properties=p.properties,isNaN(p.severity)?g.severityLevel=d.SeverityLevel.Error:g.severityLevel=p.severity,g.measurements=p.measurements,g.exceptions=[];var y=p.exception.stack,f=new d.ExceptionDetails;f.message=p.exception.message,f.typeName=p.exception.name,f.parsedStack=this.parseStack(y),f.hasFullStack=v.isArray(f.parsedStack)&&f.parsedStack.length>0,g.exceptions.push(f);var b=new d.Data;return b.baseType=d.telemetryTypeToBaseType(d.TelemetryType.Exception),b.baseData=g,b},h.createRequestData=function(p){var g=new d.RequestData;p.id?g.id=p.id:g.id=v.w3cTraceId(),g.name=p.name,g.url=p.url,g.source=p.source,g.duration=v.msToTimeSpan(p.duration),g.responseCode=p.resultCode?p.resultCode+"":"",g.success=p.success,g.properties=p.properties;var y=new d.Data;return y.baseType=d.telemetryTypeToBaseType(d.TelemetryType.Request),y.baseData=g,y},h.createMetricData=function(p){var g=new d.MetricData;g.metrics=[];var y=new d.DataPoint;y.count=isNaN(p.count)?1:p.count,y.kind=d.DataPointType.Aggregation,y.max=isNaN(p.max)?p.value:p.max,y.min=isNaN(p.min)?p.value:p.min,y.name=p.name,y.stdDev=isNaN(p.stdDev)?0:p.stdDev,y.value=p.value,g.metrics.push(y),g.properties=p.properties;var f=new d.Data;return f.baseType=d.telemetryTypeToBaseType(d.TelemetryType.Metric),f.baseData=g,f},h.createAvailabilityData=function(p){var g=new d.AvailabilityData;p.id?g.id=p.id:g.id=v.w3cTraceId(),g.name=p.name,g.duration=v.msToTimeSpan(p.duration),g.success=p.success,g.runLocation=p.runLocation,g.message=p.message,g.measurements=p.measurements,g.properties=p.properties;var y=new d.Data;return y.baseType=d.telemetryTypeToBaseType(d.TelemetryType.Availability),y.baseData=g,y},h.createPageViewData=function(p){var g=new d.PageViewData;g.name=p.name,g.duration=v.msToTimeSpan(p.duration),g.url=p.url,g.measurements=p.measurements,g.properties=p.properties;var y=new d.Data;return y.baseType=d.telemetryTypeToBaseType(d.TelemetryType.PageView),y.baseData=g,y},h.getTags=function(p,g){var y=_.CorrelationContextManager.getCurrentContext(),f={};if(p&&p.tags)for(var b in p.tags)f[b]=p.tags[b];if(g)for(var b in g)f[b]=g[b];return y&&(f[p.keys.operationId]=f[p.keys.operationId]||y.operation.id,f[p.keys.operationName]=f[p.keys.operationName]||y.operation.name,f[p.keys.operationParentId]=f[p.keys.operationParentId]||y.operation.parentId),f},h.parseStack=function(p){var g=void 0;if(typeof p=="string"){var y=p.split(`
`);g=[];for(var f=0,b=0,w=0;w<=y.length;w++){var S=y[w];if(l.regex.test(S)){var R=new l(y[w],f++);b+=R.sizeInBytes,g.push(R)}}var A=32*1024;if(b>A)for(var D=0,j=g.length-1,ee=0,K=D,oe=j;D<j;){var ge=g[D].sizeInBytes,ke=g[j].sizeInBytes;if(ee+=ge+ke,ee>A){var Se=oe-K+1;g.splice(K,Se);break}K=D,oe=j,D++,j--}}return g},h}(),l=function(){function h(p,g){this.sizeInBytes=0,this.level=g,this.method="<no_method>",this.assembly=v.trim(p);var y=p.match(h.regex);y&&y.length>=5&&(this.method=v.trim(y[2])||this.method,this.fileName=v.trim(y[4])||"<no_filename>",this.line=parseInt(y[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=h.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return h.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,h.baseSize=58,h}();T.exports=c}),vd=I((s,T)=>{"use strict";var d=M(8835),v=Ts(),_=bi(),c=zt(),l=zo(),h=Wo(),p=yi(),g=gd(),y=yr(),f=se(),b=Wl(),w=function(){function S(R){this._telemetryProcessors=[],this._enableAzureProperties=!1;var A=new v(R);this.config=A,this.context=new _,this.commonProperties={};var D=new g(this.config);this.channel=new l(function(){return A.disableAppInsights},function(){return A.maxBatchSize},function(){return A.maxBatchIntervalMs},D)}return S.prototype.trackAvailability=function(R){this.track(R,c.TelemetryType.Availability)},S.prototype.trackPageView=function(R){this.track(R,c.TelemetryType.PageView)},S.prototype.trackTrace=function(R){this.track(R,c.TelemetryType.Trace)},S.prototype.trackMetric=function(R){this.track(R,c.TelemetryType.Metric)},S.prototype.trackException=function(R){R&&R.exception&&!y.isError(R.exception)&&(R.exception=new Error(R.exception.toString())),this.track(R,c.TelemetryType.Exception)},S.prototype.trackEvent=function(R){this.track(R,c.TelemetryType.Event)},S.prototype.trackRequest=function(R){this.track(R,c.TelemetryType.Request)},S.prototype.trackDependency=function(R){R&&!R.target&&R.data&&(R.target=d.parse(R.data).host),this.track(R,c.TelemetryType.Dependency)},S.prototype.flush=function(R){this.channel.triggerSend(R?!!R.isAppCrashing:!1,R?R.callback:void 0)},S.prototype.track=function(R,A){if(R&&c.telemetryTypeToBaseType(A)){var D=b.createEnvelope(R,A,this.commonProperties,this.context,this.config);R.time&&(D.time=R.time.toISOString()),this._enableAzureProperties&&h.azureRoleEnvironmentTelemetryProcessor(D,this.context);var j=this.runTelemetryProcessors(D,R.contextObjects);j=j&&h.samplingTelemetryProcessor(D,{correlationContext:p.CorrelationContextManager.getCurrentContext()}),h.preAggregatedMetricsTelemetryProcessor(D,this.context),j&&(h.performanceMetricsTelemetryProcessor(D,this.quickPulseClient),this.channel.send(D))}else f.warn("track() requires telemetry object and telemetryType to be specified.")},S.prototype.setAutoPopulateAzureProperties=function(R){this._enableAzureProperties=R},S.prototype.addTelemetryProcessor=function(R){this._telemetryProcessors.push(R)},S.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},S.prototype.runTelemetryProcessors=function(R,A){var D=!0,j=this._telemetryProcessors.length;if(j===0)return D;A=A||{},A.correlationContext=p.CorrelationContextManager.getCurrentContext();for(var ee=0;ee<j;++ee)try{var K=this._telemetryProcessors[ee];if(K&&K.apply(null,[R,A])===!1){D=!1;break}}catch(oe){D=!0,f.warn("One of telemetry processors failed, telemetry item will be sent.",oe,R)}return D&&(R&&R.tags&&(R.tags=y.validateStringMap(R.tags)),R&&R.data&&R.data.baseData&&R.data.baseData.properties&&(R.data.baseData.properties=y.validateStringMap(R.data.baseData.properties))),D},S}();T.exports=w}),Ko=I((s,T)=>{"use strict";var d=s&&s.__extends||function(){var p=function(g,y){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,b){f.__proto__=b}||function(f,b){for(var w in b)Object.prototype.hasOwnProperty.call(b,w)&&(f[w]=b[w])},p(g,y)};return function(g,y){p(g,y);function f(){this.constructor=g}g.prototype=y===null?Object.create(y):(f.prototype=y.prototype,new f)}}(),v=vd(),_=Vo(),c=Qn(),l=se(),h=function(p){d(g,p);function g(){return p!==null&&p.apply(this,arguments)||this}return g.prototype.trackNodeHttpRequestSync=function(y){y&&y.request&&y.response&&y.duration?_.trackRequestSync(this,y):l.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},g.prototype.trackNodeHttpRequest=function(y){(y.duration||y.error)&&l.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),y&&y.request&&y.response?_.trackRequest(this,y):l.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},g.prototype.trackNodeHttpDependency=function(y){y&&y.request?c.trackRequest(this,y):l.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},g}(v);T.exports=h}),Kl=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0})}),Yl=I(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.dispose=s.Configuration=s.wrapWithCorrelationContext=s.startOperation=s.getCorrelationContext=s.start=s.setup=s.liveMetricsClient=s.defaultClient=s.DistributedTracingModes=void 0;var T=yi(),d=Ol(),v=Dl(),_=zn(),c=_a(),l=fd(),h=Qn(),p=Vo(),g=pi(),y=se(),f=Vl(),b=jl();s.TelemetryClient=Ko(),s.Contracts=zt(),s.azureFunctionsTypes=Kl();var w;(function(Ze){Ze[Ze.AI=0]="AI",Ze[Ze.AI_AND_W3C=1]="AI_AND_W3C"})(w=s.DistributedTracingModes||(s.DistributedTracingModes={}));var S=!0,R=!1,A=!0,D=!0,j=!0,ee=!1,K=!0,oe=!0,ge=!0,ke=!0,Se,Pe=!1,Ce=!0,$e,Qe=void 0,at=void 0,tt,$t,lt,Ie,qe,Le,je,Ke,ot=!1,We;function kt(Ze){return s.defaultClient?y.info("The default client is already setup"):(s.defaultClient=new s.TelemetryClient(Ze),tt=new d(s.defaultClient),$t=new v(s.defaultClient),lt=new _(s.defaultClient),Ie=new c(s.defaultClient),qe=new l(s.defaultClient),je=new p(s.defaultClient),Ke=new h(s.defaultClient),Le||(Le=new b.AutoCollectNativePerformance(s.defaultClient))),s.defaultClient&&s.defaultClient.channel&&s.defaultClient.channel.setUseDiskRetryCaching(ge,Qe,at),tr}s.setup=kt;function Jt(){return s.defaultClient?(ot=!0,tt.enable(S,R),$t.enable(A),lt.enable(D),Ie.enable(j),qe.enable(ee,s.defaultClient.config),Le.enable(Ce,$e),je.useAutoCorrelation(ke,Se),je.enable(K),Ke.enable(oe),s.liveMetricsClient&&Pe&&s.liveMetricsClient.enable(Pe)):y.warn("Start cannot be called before setup"),tr}s.start=Jt;function Bt(){return ke?T.CorrelationContextManager.getCurrentContext():null}s.getCorrelationContext=Bt;function Ot(Ze,Xe){return T.CorrelationContextManager.startOperation(Ze,Xe)}s.startOperation=Ot;function Et(Ze,Xe){return T.CorrelationContextManager.wrapCallback(Ze,Xe)}s.wrapWithCorrelationContext=Et;var tr=function(){function Ze(){}return Ze.setDistributedTracingMode=function(Xe){return g.w3cEnabled=Xe===w.AI_AND_W3C,Ze},Ze.setAutoCollectConsole=function(Xe,vt){return vt===void 0&&(vt=!1),S=Xe,R=vt,ot&&tt.enable(Xe,vt),Ze},Ze.setAutoCollectExceptions=function(Xe){return A=Xe,ot&&$t.enable(Xe),Ze},Ze.setAutoCollectPerformance=function(Xe,vt){vt===void 0&&(vt=!0),D=Xe;var rr=b.AutoCollectNativePerformance.parseEnabled(vt);return Ce=rr.isEnabled,$e=rr.disabledMetrics,ot&&(lt.enable(Xe),Le.enable(rr.isEnabled,rr.disabledMetrics)),Ze},Ze.setAutoCollectPreAggregatedMetrics=function(Xe){return j=Xe,ot&&Ie.enable(Xe),Ze},Ze.setAutoCollectHeartbeat=function(Xe){return ee=Xe,ot&&qe.enable(Xe,s.defaultClient.config),Ze},Ze.setAutoCollectRequests=function(Xe){return K=Xe,ot&&je.enable(Xe),Ze},Ze.setAutoCollectDependencies=function(Xe){return oe=Xe,ot&&Ke.enable(Xe),Ze},Ze.setAutoDependencyCorrelation=function(Xe,vt){return ke=Xe,Se=vt,ot&&je.useAutoCorrelation(Xe,vt),Ze},Ze.setUseDiskRetryCaching=function(Xe,vt,rr){return ge=Xe,Qe=vt,at=rr,s.defaultClient&&s.defaultClient.channel&&s.defaultClient.channel.setUseDiskRetryCaching(Xe,vt,rr),Ze},Ze.setInternalLogging=function(Xe,vt){return Xe===void 0&&(Xe=!1),vt===void 0&&(vt=!0),y.enableDebug=Xe,y.disableWarnings=!vt,Ze},Ze.setSendLiveMetrics=function(Xe){return Xe===void 0&&(Xe=!1),s.defaultClient?(!s.liveMetricsClient&&Xe?(s.liveMetricsClient=new f(s.defaultClient.config,null),We=new _(s.liveMetricsClient,1e3,!0),s.liveMetricsClient.addCollector(We),s.defaultClient.quickPulseClient=s.liveMetricsClient):s.liveMetricsClient&&s.liveMetricsClient.enable(Xe),Pe=Xe,Ze):(y.warn("Live metrics client cannot be setup without the default client"),Ze)},Ze.start=Jt,Ze}();s.Configuration=tr;function Pr(){g.w3cEnabled=!0,s.defaultClient=null,ot=!1,tt&&tt.dispose(),$t&&$t.dispose(),lt&&lt.dispose(),Ie&&Ie.dispose(),qe&&qe.dispose(),Le&&Le.dispose(),je&&je.dispose(),Ke&&Ke.dispose(),s.liveMetricsClient&&(s.liveMetricsClient.enable(!1),Pe=!1,s.liveMetricsClient=void 0)}s.dispose=Pr});$(Z,{default:()=>De});var Yo=H(M(2087)),zi=H(M(7549)),Qi=H(Yl()),It=H(M(7549)),Ea=class{constructor(s,T,d,v,_){this.extensionId=s,this.extensionVersion=T,this.telemetryAppender=d,this.osShim=v,this.firstParty=!1,this.userOptIn=!1,this.firstParty=!!_,this.updateUserOptStatus(),It.env.onDidChangeTelemetryEnabled!==void 0?this.optOutListener=It.env.onDidChangeTelemetryEnabled(()=>this.updateUserOptStatus()):this.optOutListener=It.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus())}updateUserOptStatus(){let s=It.workspace.getConfiguration(Ea.TELEMETRY_CONFIG_ID),T=It.env.isTelemetryEnabled===void 0?s.get(Ea.TELEMETRY_CONFIG_ENABLED_ID,!0):It.env.isTelemetryEnabled;this.userOptIn!==T&&(this.userOptIn=T)}cleanRemoteName(s){if(!s)return"none";let T="other";return["ssh-remote","dev-container","attached-container","wsl"].forEach(d=>{s.indexOf(`${d}+`)===0&&(T=d)}),T}get extension(){return this._extension===void 0&&(this._extension=It.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(s,T){if(s===null||typeof s!="object"||typeof T!="function")return s;let d={};for(let v in s)d[v]=T(v,s[v]);return d}shouldSendErrorTelemetry(){return this.firstParty?this.cleanRemoteName(It.env.remoteName)!=="other"?!0:!(this.extension===void 0||this.extension.extensionKind===It.ExtensionKind.Workspace||It.env.uiKind===It.UIKind.Web):!0}getCommonProperties(){let s=Object.create(null);if(s["common.os"]=this.osShim.platform,s["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),s["common.extname"]=this.extensionId,s["common.extversion"]=this.extensionVersion,It&&It.env){switch(s["common.vscodemachineid"]=It.env.machineId,s["common.vscodesessionid"]=It.env.sessionId,s["common.vscodeversion"]=It.version,s["common.isnewappinstall"]=It.env.isNewAppInstall.toString(),It.env.uiKind){case It.UIKind.Web:s["common.uikind"]="web";break;case It.UIKind.Desktop:s["common.uikind"]="desktop";break;default:s["common.uikind"]="unknown"}s["common.remotename"]=this.cleanRemoteName(It.env.remoteName)}return s}anonymizeFilePaths(s,T){let d;if(s==null)return"";let v=[];It.env.appRoot!==""&&v.push(new RegExp(It.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&v.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let _=s;if(T){let c=[];for(let g of v)for(;(d=g.exec(s))&&d;)c.push([d.index,g.lastIndex]);let l=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,h=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,p=0;for(_="";(d=h.exec(s))&&d;)d[0]&&!l.test(d[0])&&c.every(([g,y])=>d.index<g||d.index>=y)&&(_+=s.substring(p,d.index)+"<REDACTED: user-file-path>",p=h.lastIndex);p<s.length&&(_+=s.substr(p))}for(let c of v)_=_.replace(c,"");return _}removePropertiesWithPossibleUserInfo(s){if(typeof s!="object")return;let T=Object.create(null);for(let d of Object.keys(s)){let v=s[d];if(!v)continue;let _=/@[a-zA-Z0-9-.]+/;/\S*(key|token|sig|password|passwd|pwd)[="':\s]+\S*/.test(v.toLowerCase())?T[d]="<REDACTED: secret>":_.test(v)?T[d]="<REDACTED: email>":T[d]=v}return T}sendTelemetryEvent(s,T,d){if(this.userOptIn&&s!==""){T=q(q({},T),this.getCommonProperties());let v=this.cloneAndChange(T,(_,c)=>this.anonymizeFilePaths(c,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${s}`,{properties:this.removePropertiesWithPossibleUserInfo(v),measurements:d})}}sendTelemetryErrorEvent(s,T,d,v){if(this.userOptIn&&s!==""){T=q(q({},T),this.getCommonProperties());let _=this.cloneAndChange(T,(c,l)=>this.shouldSendErrorTelemetry()?this.anonymizeFilePaths(l,this.firstParty):v===void 0||v.indexOf(c)!==-1?"REDACTED":this.anonymizeFilePaths(l,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${s}`,{properties:this.removePropertiesWithPossibleUserInfo(_),measurements:d})}}sendTelemetryException(s,T,d){if(this.shouldSendErrorTelemetry()&&this.userOptIn&&s){T=q(q({},T),this.getCommonProperties());let v=this.cloneAndChange(T,(_,c)=>this.anonymizeFilePaths(c,this.firstParty));s.stack&&(s.stack=this.anonymizeFilePaths(s.stack,this.firstParty)),this.telemetryAppender.logException(s,{properties:this.removePropertiesWithPossibleUserInfo(v),measurements:d})}}dispose(){return this.telemetryAppender.flush(),this.optOutListener.dispose()}},Wi=Ea;Wi.TELEMETRY_CONFIG_ID="telemetry",Wi.TELEMETRY_CONFIG_ENABLED_ID="enableTelemetry";var ln=class{constructor(s){Qi.defaultClient?(this._appInsightsClient=new Qi.TelemetryClient(s),this._appInsightsClient.channel.setUseDiskRetryCaching(!0)):(Qi.setup(s).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setUseDiskRetryCaching(!0).start(),this._appInsightsClient=Qi.defaultClient),zi&&zi.env&&(this._appInsightsClient.context.tags[this._appInsightsClient.context.keys.userId]=zi.env.machineId,this._appInsightsClient.context.tags[this._appInsightsClient.context.keys.sessionId]=zi.env.sessionId,this._appInsightsClient.context.tags[this._appInsightsClient.context.keys.cloudRole]=zi.env.appName),s&&s.indexOf("AIF-")===0&&(this._appInsightsClient.config.endpointUrl="https://vortex.data.microsoft.com/collect/v1")}logEvent(s,T){!this._appInsightsClient||this._appInsightsClient.trackEvent({name:s,properties:T==null?void 0:T.properties,measurements:T==null?void 0:T.measurements})}logException(s,T){!this._appInsightsClient||this._appInsightsClient.trackException({exception:s,properties:T==null?void 0:T.properties,measurements:T==null?void 0:T.measurements})}flush(){return this._appInsightsClient&&(this._appInsightsClient.flush(),this._appInsightsClient=void 0),Promise.resolve(void 0)}},De=class extends Wi{constructor(s,T,d,v){let _=new ln(d);d&&d.indexOf("AIF-")===0&&(v=!0),super(s,T,_,{release:Yo.release(),platform:Yo.platform()},v)}}},3255:u=>{function Z(M){var V=new Error("Cannot find module '"+M+"'");throw V.code="MODULE_NOT_FOUND",V}Z.keys=()=>[],Z.resolve=Z,Z.id=3255,u.exports=Z},9118:u=>{function Z(M){var V=new Error("Cannot find module '"+M+"'");throw V.code="MODULE_NOT_FOUND",V}Z.keys=()=>[],Z.resolve=Z,Z.id=9118,u.exports=Z},9035:(u,Z,M)=>{"use strict";var V;V={value:!0};var W=M(5654);Z.X7=W.getExperimentationService,V=W.getExperimentationServiceAsync;var ne=M(2560);Z.aU=ne.TargetPopulation},5708:(u,Z)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});class M{constructor(W){this.mementoGlobalStorage=W}async getValue(W,ne){return await this.mementoGlobalStorage.get(W)||ne}setValue(W,ne){this.mementoGlobalStorage.update(W,ne)}}Z.MementoKeyValueStorage=M},2560:(u,Z,M)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});const V=M(7549);class W{constructor(x,N,C){this.extensionName=x,this.extensionVersion=N,this.targetPopulation=C}static trimVersionSuffix(x){const N=/\-[a-zA-Z0-9]+$/;return x.split(N)[0]}getFilterValue(x){switch(x){case ne.ApplicationVersion:return W.trimVersionSuffix(V.version);case ne.Build:return V.env.appName;case ne.ClientId:return V.env.machineId;case ne.ExtensionName:return this.extensionName;case ne.ExtensionVersion:return W.trimVersionSuffix(this.extensionVersion);case ne.Language:return V.env.language;case ne.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let x=new Map,N=Object.values(ne);for(let C of N)x.set(C,this.getFilterValue(C));return x}}Z.VSCodeFilterProvider=W;var ne;(function(O){O.Market="X-MSEdge-Market",O.CorpNet="X-FD-Corpnet",O.ApplicationVersion="X-VSCode-AppVersion",O.Build="X-VSCode-Build",O.ClientId="X-MSEdge-ClientId",O.ExtensionName="X-VSCode-ExtensionName",O.ExtensionVersion="X-VSCode-ExtensionVersion",O.Language="X-VSCode-Language",O.TargetPopulation="X-VSCode-TargetPopulation"})(ne=Z.Filters||(Z.Filters={}));var F;(function(O){O.Team="team",O.Internal="internal",O.Insiders="insider",O.Public="public"})(F=Z.TargetPopulation||(Z.TargetPopulation={}))},5654:(u,Z,M)=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});const V=M(2560),W=M(4802),ne=M(5708),F="https://default.exp-tas.com/vscode/ab",O="query-expfeature",x="VSCode.ABExp.Features",N="abexp.assignmentcontext",C="VSCode.ABExp.FeatureData",L=1e3*60*30;function q(I,$,G,H,se,...X){if(!se)throw new Error("Memento storage was not provided.");const he=[new V.VSCodeFilterProvider(I,$,G),...X],Ne=new ne.MementoKeyValueStorage(se);return new W.ExperimentationService({filterProviders:he,telemetry:H,storageKey:C,keyValueStorage:Ne,featuresTelemetryPropertyName:x,assignmentContextTelemetryPropertyName:N,telemetryEventName:O,endpoint:F,refetchInterval:L})}Z.getExperimentationService=q;async function B(I,$,G,H,se,...X){const ve=q(I,$,G,H,se,...X);return await ve.initializePromise,ve}Z.getExperimentationServiceAsync=B},2479:u=>{u.exports=Z;function Z(M,V){if(M&&V)return Z(M)(V);if(typeof M!="function")throw new TypeError("need wrapper function");return Object.keys(M).forEach(function(ne){W[ne]=M[ne]}),W;function W(){for(var ne=new Array(arguments.length),F=0;F<ne.length;F++)ne[F]=arguments[F];var O=M.apply(this,ne),x=ne[ne.length-1];return typeof O=="function"&&O!==x&&Object.keys(x).forEach(function(N){O[N]=x[N]}),O}}},9602:u=>{"use strict";u.exports=function(Z){Z.prototype[Symbol.iterator]=function*(){for(let M=this.head;M;M=M.next)yield M.value}}},4411:(u,Z,M)=>{"use strict";u.exports=V,V.Node=O,V.create=V;function V(x){var N=this;if(N instanceof V||(N=new V),N.tail=null,N.head=null,N.length=0,x&&typeof x.forEach=="function")x.forEach(function(q){N.push(q)});else if(arguments.length>0)for(var C=0,L=arguments.length;C<L;C++)N.push(arguments[C]);return N}V.prototype.removeNode=function(x){if(x.list!==this)throw new Error("removing node which does not belong to this list");var N=x.next,C=x.prev;return N&&(N.prev=C),C&&(C.next=N),x===this.head&&(this.head=N),x===this.tail&&(this.tail=C),x.list.length--,x.next=null,x.prev=null,x.list=null,N},V.prototype.unshiftNode=function(x){if(x!==this.head){x.list&&x.list.removeNode(x);var N=this.head;x.list=this,x.next=N,N&&(N.prev=x),this.head=x,this.tail||(this.tail=x),this.length++}},V.prototype.pushNode=function(x){if(x!==this.tail){x.list&&x.list.removeNode(x);var N=this.tail;x.list=this,x.prev=N,N&&(N.next=x),this.tail=x,this.head||(this.head=x),this.length++}},V.prototype.push=function(){for(var x=0,N=arguments.length;x<N;x++)ne(this,arguments[x]);return this.length},V.prototype.unshift=function(){for(var x=0,N=arguments.length;x<N;x++)F(this,arguments[x]);return this.length},V.prototype.pop=function(){if(!!this.tail){var x=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,x}},V.prototype.shift=function(){if(!!this.head){var x=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,x}},V.prototype.forEach=function(x,N){N=N||this;for(var C=this.head,L=0;C!==null;L++)x.call(N,C.value,L,this),C=C.next},V.prototype.forEachReverse=function(x,N){N=N||this;for(var C=this.tail,L=this.length-1;C!==null;L--)x.call(N,C.value,L,this),C=C.prev},V.prototype.get=function(x){for(var N=0,C=this.head;C!==null&&N<x;N++)C=C.next;if(N===x&&C!==null)return C.value},V.prototype.getReverse=function(x){for(var N=0,C=this.tail;C!==null&&N<x;N++)C=C.prev;if(N===x&&C!==null)return C.value},V.prototype.map=function(x,N){N=N||this;for(var C=new V,L=this.head;L!==null;)C.push(x.call(N,L.value,this)),L=L.next;return C},V.prototype.mapReverse=function(x,N){N=N||this;for(var C=new V,L=this.tail;L!==null;)C.push(x.call(N,L.value,this)),L=L.prev;return C},V.prototype.reduce=function(x,N){var C,L=this.head;if(arguments.length>1)C=N;else if(this.head)L=this.head.next,C=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var q=0;L!==null;q++)C=x(C,L.value,q),L=L.next;return C},V.prototype.reduceReverse=function(x,N){var C,L=this.tail;if(arguments.length>1)C=N;else if(this.tail)L=this.tail.prev,C=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var q=this.length-1;L!==null;q--)C=x(C,L.value,q),L=L.prev;return C},V.prototype.toArray=function(){for(var x=new Array(this.length),N=0,C=this.head;C!==null;N++)x[N]=C.value,C=C.next;return x},V.prototype.toArrayReverse=function(){for(var x=new Array(this.length),N=0,C=this.tail;C!==null;N++)x[N]=C.value,C=C.prev;return x},V.prototype.slice=function(x,N){N=N||this.length,N<0&&(N+=this.length),x=x||0,x<0&&(x+=this.length);var C=new V;if(N<x||N<0)return C;x<0&&(x=0),N>this.length&&(N=this.length);for(var L=0,q=this.head;q!==null&&L<x;L++)q=q.next;for(;q!==null&&L<N;L++,q=q.next)C.push(q.value);return C},V.prototype.sliceReverse=function(x,N){N=N||this.length,N<0&&(N+=this.length),x=x||0,x<0&&(x+=this.length);var C=new V;if(N<x||N<0)return C;x<0&&(x=0),N>this.length&&(N=this.length);for(var L=this.length,q=this.tail;q!==null&&L>N;L--)q=q.prev;for(;q!==null&&L>x;L--,q=q.prev)C.push(q.value);return C},V.prototype.splice=function(x,N,...C){x>this.length&&(x=this.length-1),x<0&&(x=this.length+x);for(var L=0,q=this.head;q!==null&&L<x;L++)q=q.next;for(var B=[],L=0;q&&L<N;L++)B.push(q.value),q=this.removeNode(q);q===null&&(q=this.tail),q!==this.head&&q!==this.tail&&(q=q.prev);for(var L=0;L<C.length;L++)q=W(this,q,C[L]);return B},V.prototype.reverse=function(){for(var x=this.head,N=this.tail,C=x;C!==null;C=C.prev){var L=C.prev;C.prev=C.next,C.next=L}return this.head=N,this.tail=x,this};function W(x,N,C){var L=N===x.head?new O(C,null,N,x):new O(C,N,N.next,x);return L.next===null&&(x.tail=L),L.prev===null&&(x.head=L),x.length++,L}function ne(x,N){x.tail=new O(N,x.tail,null,x),x.head||(x.head=x.tail),x.length++}function F(x,N){x.head=new O(N,null,x.head,x),x.tail||(x.tail=x.head),x.length++}function O(x,N,C,L){if(!(this instanceof O))return new O(x,N,C,L);this.list=L,this.value=x,N?(N.next=this,this.prev=N):this.prev=null,C?(C.prev=this,this.next=C):this.next=null}try{M(9602)(V)}catch(x){}},9329:(u,Z,M)=>{u.exports=M(516).Observable},516:(u,Z)=>{"use strict";var M;M={value:!0},Z.Observable=void 0;function V(te,J){if(!(te instanceof J))throw new TypeError("Cannot call a class as a function")}function W(te,J){for(var Q=0;Q<J.length;Q++){var ue=J[Q];ue.enumerable=ue.enumerable||!1,ue.configurable=!0,"value"in ue&&(ue.writable=!0),Object.defineProperty(te,ue.key,ue)}}function ne(te,J,Q){return J&&W(te.prototype,J),Q&&W(te,Q),te}var F=function(){return typeof Symbol=="function"},O=function(te){return F()&&Boolean(Symbol[te])},x=function(te){return O(te)?Symbol[te]:"@@"+te};F()&&!O("observable")&&(Symbol.observable=Symbol("observable"));var N=x("iterator"),C=x("observable"),L=x("species");function q(te,J){var Q=te[J];if(Q!=null){if(typeof Q!="function")throw new TypeError(Q+" is not a function");return Q}}function B(te){var J=te.constructor;return J!==void 0&&(J=J[L],J===null&&(J=void 0)),J!==void 0?J:ae}function I(te){return te instanceof ae}function $(te){$.log?$.log(te):setTimeout(function(){throw te})}function G(te){Promise.resolve().then(function(){try{te()}catch(J){$(J)}})}function H(te){var J=te._cleanup;if(J!==void 0&&(te._cleanup=void 0,!!J))try{if(typeof J=="function")J();else{var Q=q(J,"unsubscribe");Q&&Q.call(J)}}catch(ue){$(ue)}}function se(te){te._observer=void 0,te._queue=void 0,te._state="closed"}function X(te){var J=te._queue;if(!!J){te._queue=void 0,te._state="ready";for(var Q=0;Q<J.length&&(ve(te,J[Q].type,J[Q].value),te._state!=="closed");++Q);}}function ve(te,J,Q){te._state="running";var ue=te._observer;try{var fe=q(ue,J);switch(J){case"next":fe&&fe.call(ue,Q);break;case"error":if(se(te),fe)fe.call(ue,Q);else throw Q;break;case"complete":se(te),fe&&fe.call(ue);break}}catch(ye){$(ye)}te._state==="closed"?H(te):te._state==="running"&&(te._state="ready")}function he(te,J,Q){if(te._state!=="closed"){if(te._state==="buffering"){te._queue.push({type:J,value:Q});return}if(te._state!=="ready"){te._state="buffering",te._queue=[{type:J,value:Q}],G(function(){return X(te)});return}ve(te,J,Q)}}var Ne=function(){function te(J,Q){V(this,te),this._cleanup=void 0,this._observer=J,this._queue=void 0,this._state="initializing";var ue=new Y(this);try{this._cleanup=Q.call(void 0,ue)}catch(fe){ue.error(fe)}this._state==="initializing"&&(this._state="ready")}return ne(te,[{key:"unsubscribe",value:function(){this._state!=="closed"&&(se(this),H(this))}},{key:"closed",get:function(){return this._state==="closed"}}]),te}(),Y=function(){function te(J){V(this,te),this._subscription=J}return ne(te,[{key:"next",value:function(Q){he(this._subscription,"next",Q)}},{key:"error",value:function(Q){he(this._subscription,"error",Q)}},{key:"complete",value:function(){he(this._subscription,"complete")}},{key:"closed",get:function(){return this._subscription._state==="closed"}}]),te}(),ae=function(){function te(J){if(V(this,te),!(this instanceof te))throw new TypeError("Observable cannot be called as a function");if(typeof J!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=J}return ne(te,[{key:"subscribe",value:function(Q){return(typeof Q!="object"||Q===null)&&(Q={next:Q,error:arguments[1],complete:arguments[2]}),new Ne(Q,this._subscriber)}},{key:"forEach",value:function(Q){var ue=this;return new Promise(function(fe,ye){if(typeof Q!="function"){ye(new TypeError(Q+" is not a function"));return}function Ee(){be.unsubscribe(),fe()}var be=ue.subscribe({next:function(Ue){try{Q(Ue,Ee)}catch(ze){ye(ze),be.unsubscribe()}},error:ye,complete:fe})})}},{key:"map",value:function(Q){var ue=this;if(typeof Q!="function")throw new TypeError(Q+" is not a function");var fe=B(this);return new fe(function(ye){return ue.subscribe({next:function(Ee){try{Ee=Q(Ee)}catch(be){return ye.error(be)}ye.next(Ee)},error:function(Ee){ye.error(Ee)},complete:function(){ye.complete()}})})}},{key:"filter",value:function(Q){var ue=this;if(typeof Q!="function")throw new TypeError(Q+" is not a function");var fe=B(this);return new fe(function(ye){return ue.subscribe({next:function(Ee){try{if(!Q(Ee))return}catch(be){return ye.error(be)}ye.next(Ee)},error:function(Ee){ye.error(Ee)},complete:function(){ye.complete()}})})}},{key:"reduce",value:function(Q){var ue=this;if(typeof Q!="function")throw new TypeError(Q+" is not a function");var fe=B(this),ye=arguments.length>1,Ee=!1,be=arguments[1],Ue=be;return new fe(function(ze){return ue.subscribe({next:function(et){var it=!Ee;if(Ee=!0,!it||ye)try{Ue=Q(Ue,et)}catch(At){return ze.error(At)}else Ue=et},error:function(et){ze.error(et)},complete:function(){if(!Ee&&!ye)return ze.error(new TypeError("Cannot reduce an empty sequence"));ze.next(Ue),ze.complete()}})})}},{key:"concat",value:function(){for(var Q=this,ue=arguments.length,fe=new Array(ue),ye=0;ye<ue;ye++)fe[ye]=arguments[ye];var Ee=B(this);return new Ee(function(be){var Ue,ze=0;function et(it){Ue=it.subscribe({next:function(At){be.next(At)},error:function(At){be.error(At)},complete:function(){ze===fe.length?(Ue=void 0,be.complete()):et(Ee.from(fe[ze++]))}})}return et(Q),function(){Ue&&(Ue.unsubscribe(),Ue=void 0)}})}},{key:"flatMap",value:function(Q){var ue=this;if(typeof Q!="function")throw new TypeError(Q+" is not a function");var fe=B(this);return new fe(function(ye){var Ee=[],be=ue.subscribe({next:function(ze){if(Q)try{ze=Q(ze)}catch(it){return ye.error(it)}var et=fe.from(ze).subscribe({next:function(it){ye.next(it)},error:function(it){ye.error(it)},complete:function(){var it=Ee.indexOf(et);it>=0&&Ee.splice(it,1),Ue()}});Ee.push(et)},error:function(ze){ye.error(ze)},complete:function(){Ue()}});function Ue(){be.closed&&Ee.length===0&&ye.complete()}return function(){Ee.forEach(function(ze){return ze.unsubscribe()}),be.unsubscribe()}})}},{key:C,value:function(){return this}}],[{key:"from",value:function(Q){var ue=typeof this=="function"?this:te;if(Q==null)throw new TypeError(Q+" is not an object");var fe=q(Q,C);if(fe){var ye=fe.call(Q);if(Object(ye)!==ye)throw new TypeError(ye+" is not an object");return I(ye)&&ye.constructor===ue?ye:new ue(function(Ee){return ye.subscribe(Ee)})}if(O("iterator")&&(fe=q(Q,N),fe))return new ue(function(Ee){G(function(){if(!Ee.closed){var be=!0,Ue=!1,ze=void 0;try{for(var et=fe.call(Q)[Symbol.iterator](),it;!(be=(it=et.next()).done);be=!0){var At=it.value;if(Ee.next(At),Ee.closed)return}}catch(Rt){Ue=!0,ze=Rt}finally{try{!be&&et.return!=null&&et.return()}finally{if(Ue)throw ze}}Ee.complete()}})});if(Array.isArray(Q))return new ue(function(Ee){G(function(){if(!Ee.closed){for(var be=0;be<Q.length;++be)if(Ee.next(Q[be]),Ee.closed)return;Ee.complete()}})});throw new TypeError(Q+" is not observable")}},{key:"of",value:function(){for(var Q=arguments.length,ue=new Array(Q),fe=0;fe<Q;fe++)ue[fe]=arguments[fe];var ye=typeof this=="function"?this:te;return new ye(function(Ee){G(function(){if(!Ee.closed){for(var be=0;be<ue.length;++be)if(Ee.next(ue[be]),Ee.closed)return;Ee.complete()}})})}},{key:L,get:function(){return this}}]),te}();Z.Observable=ae,F()&&Object.defineProperty(ae,Symbol("extensions"),{value:{symbol:C,hostReportError:$},configurable:!0})},6591:u=>{"use strict";u.exports=require("applicationinsights-native-metrics")},2357:u=>{"use strict";u.exports=require("assert")},7303:u=>{"use strict";u.exports=require("async_hooks")},3129:u=>{"use strict";u.exports=require("child_process")},7082:u=>{"use strict";u.exports=require("console")},7619:u=>{"use strict";u.exports=require("constants")},6417:u=>{"use strict";u.exports=require("crypto")},881:u=>{"use strict";u.exports=require("dns")},8614:u=>{"use strict";u.exports=require("events")},5747:u=>{"use strict";u.exports=require("fs")},8605:u=>{"use strict";u.exports=require("http")},7211:u=>{"use strict";u.exports=require("https")},2282:u=>{"use strict";u.exports=require("module")},1631:u=>{"use strict";u.exports=require("net")},2087:u=>{"use strict";u.exports=require("os")},5622:u=>{"use strict";u.exports=require("path")},630:u=>{"use strict";u.exports=require("perf_hooks")},2413:u=>{"use strict";u.exports=require("stream")},8213:u=>{"use strict";u.exports=require("timers")},4016:u=>{"use strict";u.exports=require("tls")},3867:u=>{"use strict";u.exports=require("tty")},8835:u=>{"use strict";u.exports=require("url")},1669:u=>{"use strict";u.exports=require("util")},7549:u=>{"use strict";u.exports=require("vscode")},8761:u=>{"use strict";u.exports=require("zlib")}},ud={};function Je(u){var Z=ud[u];if(Z!==void 0)return Z.exports;var M=ud[u]={id:u,loaded:!1,exports:{}};return Ap[u].call(M.exports,M,M.exports,Je),M.loaded=!0,M.exports}(()=>{Je.n=u=>{var Z=u&&u.__esModule?()=>u.default:()=>u;return Je.d(Z,{a:Z}),Z}})(),(()=>{Je.d=(u,Z)=>{for(var M in Z)Je.o(Z,M)&&!Je.o(u,M)&&Object.defineProperty(u,M,{enumerable:!0,get:Z[M]})}})(),(()=>{Je.hmd=u=>(u=Object.create(u),u.children||(u.children=[]),Object.defineProperty(u,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+u.id)}}),u)})(),(()=>{Je.o=(u,Z)=>Object.prototype.hasOwnProperty.call(u,Z)})(),(()=>{Je.r=u=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})}})();var Gu={};(()=>{"use strict";Je.r(Gu),Je.d(Gu,{activate:()=>Xv,deactivate:()=>Zv});var u=Je(7549),Z=Je(8361),M=Je.n(Z),V=Object.defineProperty,W=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?V(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r),ne;(function(t){t[t.Info=0]="Info",t[t.Debug=1]="Debug",t[t.Off=2]="Off"})(ne||(ne={}));const F="githubPullRequests",O="logLevel";class x{constructor(){W(this,"_outputChannel"),W(this,"_logLevel"),W(this,"_disposable"),this._outputChannel=u.window.createOutputChannel("GitHub Pull Request"),this._disposable=u.workspace.onDidChangeConfiguration(()=>{this.getLogLevel()}),this.getLogLevel()}appendLine(e,r){switch(this._logLevel){case 2:return;case 1:const i=`${new Date().getTime()/1e3}s`,a=r?`${r}> ${e}`:`${e}`;this._outputChannel.appendLine(`[Debug ${i}] ${a}`);return;case 0:default:this._outputChannel.appendLine("[Info] "+(r?`${r}> ${e}`:`${e}`));return}}debug(e,r){this._logLevel===1&&this.appendLine(e,r)}dispose(){this._disposable&&this._disposable.dispose()}getLogLevel(){switch(u.workspace.getConfiguration(F).get(O)){case"debug":this._logLevel=1;break;case"off":this._logLevel=2;break;case"info":default:this._logLevel=0;break}}}const C=new x;var L=Je(5622),q=Je(7484),B=Je.n(q),I=Je(4110),$=Je.n(I),G=Je(660),H=Je.n(G),se=Object.defineProperty,X=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?se(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);B().extend($(),{thresholds:[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:6,d:"day"},{l:"w",r:7},{l:"ww",r:3,d:"week"},{l:"M",r:4},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}]}),B().extend(H()),B().updateLocale("en",{relativeTime:{future:"in %s",past:"%s ago",s:"seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"}});function ve(t,e){const r=Object.create(null);return t.filter(n=>{const i=e(n);return r[i]?!1:(r[i]=!0,!0)})}function he(t){return t.forEach(e=>e.dispose()),[]}function Ne(t){return{dispose:t}}function Y(t){return Ne(()=>he(t))}function ae(...t){return(e,r=null,n)=>{const i=Y(t.map(a=>a(o=>e.call(r,o))));return n&&n.push(i),i}}function te(t,e){return(r,n=null,i)=>t(a=>e(a)&&r.call(n,a),null,i)}function J(t){return(e,r=null,n)=>{const i=t(a=>(i.dispose(),e.call(r,a)),null,n);return i}}function Q(t){return/^[a-zA-Z]:\\/.test(t)}function ue(t,e){return t===e?!0:(t.charAt(t.length-1)!==sep&&(t+=sep),Q(t)&&(t=t.toLowerCase(),e=e.toLowerCase()),e.startsWith(t))}function fe(t,e){return t.reduce((r,n)=>{const i=e(n);return r[i]=[...r[i]||[],n],r},Object.create(null))}function ye(t){return!!t.errors}function Ee(t){let e=!0;if(!!t.errors&&Array.isArray(t.errors)){for(const r of t.errors)if(!r.field||!r.value||!r.code){e=!1;break}}else e=!1;return e}function be(t){if(!(t instanceof Error))return typeof t=="string"?t:t.gitErrorCode?`${t.message}. Please check git output for more details`:t.stderr?`${t.stderr}. Please check git output for more details`:"Error";let e=t.message,r;if(t.message==="Validation Failed"&&Ee(t))r=t.errors.map(n=>`Value "${n.value}" cannot be set for field ${n.field} (code: ${n.code})`).join(", ");else if(ye(t)&&t.errors)return t.errors.map(n=>typeof n=="string"?n:n.message).join(", ");return r&&(e=`${e}: ${r}`),e}const Ue=(t,e)=>e(t);async function ze(t,e=Ue){let r;return new Promise((n,i)=>r=t(a=>{try{Promise.resolve(e(a,n,i)).catch(i)}catch(o){i(o)}})).then(n=>(r.dispose(),n),n=>{throw r.dispose(),n})}function et(t){const e=dayjs(t),r=Date.now();return e.diff(r,"month"),e.diff(r,"month")<1?e.fromNow():e.diff(r,"year")<1?`on ${e.format("MMM D")}`:`on ${e.format("MMM D, YYYY")}`}var it;(function(t){t[t.Period=46]="Period",t[t.Slash=47]="Slash",t[t.A=65]="A",t[t.Z=90]="Z",t[t.Backslash=92]="Backslash",t[t.a=97]="a",t[t.z=122]="z"})(it||(it={}));function At(t,e){return t<e?-1:t>e?1:0}function Rt(t,e,r=0,n=t.length,i=0,a=e.length){for(;r<n&&i<a;r++,i++){const E=t.charCodeAt(r),k=e.charCodeAt(i);if(E<k)return-1;if(E>k)return 1}const o=n-r,m=a-i;return o<m?-1:o>m?1:0}function Ft(t,e){return Lt(t,e,0,t.length,0,e.length)}function Lt(t,e,r=0,n=t.length,i=0,a=e.length){for(;r<n&&i<a;r++,i++){let E=t.charCodeAt(r),k=e.charCodeAt(i);if(E===k)continue;const P=E-k;if(!(P===32&&Tr(k))&&!(P===-32&&Tr(E)))return cr(E)&&cr(k)?P:Rt(t.toLowerCase(),e.toLowerCase(),r,n,i,a)}const o=n-r,m=a-i;return o<m?-1:o>m?1:0}function cr(t){return t>=97&&t<=122}function Tr(t){return t>=65&&t<=90}class rn{constructor(){X(this,"_value",""),X(this,"_pos",0)}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const r=e.charCodeAt(0),n=this._value.charCodeAt(this._pos);return r-n}value(){return this._value[this._pos]}}class Oi{constructor(e=!0){this._caseSensitive=e,X(this,"_value"),X(this,"_from"),X(this,"_to")}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?Rt(e,this._value,0,e.length,this._from,this._to):Lt(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class cs{constructor(e=!0,r=!0){this._splitOnBackslash=e,this._caseSensitive=r,X(this,"_value"),X(this,"_from"),X(this,"_to")}reset(e){return this._value=e.replace(/\\$|\/$/,""),this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){const r=this._value.charCodeAt(this._to);if(r===47||this._splitOnBackslash&&r===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?Rt(e,this._value,0,e.length,this._from,this._to):Lt(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}var Di;(function(t){t[t.Scheme=1]="Scheme",t[t.Authority=2]="Authority",t[t.Path=3]="Path",t[t.Query=4]="Query",t[t.Fragment=5]="Fragment"})(Di||(Di={}));class oi{constructor(e){this._ignorePathCasing=e,X(this,"_pathIterator"),X(this,"_value"),X(this,"_states",[]),X(this,"_stateIdx",0)}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new cs(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return Ft(e,this._value.scheme);if(this._states[this._stateIdx]===2)return Ft(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return At(e,this._value.query);if(this._states[this._stateIdx]===5)return At(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class qn{constructor(){X(this,"segment"),X(this,"value"),X(this,"key"),X(this,"left"),X(this,"mid"),X(this,"right")}isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}}class qt{constructor(e){X(this,"_iter"),X(this,"_root"),this._iter=e}static forUris(e=()=>!1){return new qt(new oi(e))}static forPaths(){return new qt(new cs)}static forStrings(){return new qt(new rn)}static forConfigKeys(){return new qt(new Oi)}clear(){this._root=void 0}set(e,r){const n=this._iter.reset(e);let i;for(this._root||(this._root=new qn,this._root.segment=n.value()),i=this._root;;){const o=n.cmp(i.segment);if(o>0)i.left||(i.left=new qn,i.left.segment=n.value()),i=i.left;else if(o<0)i.right||(i.right=new qn,i.right.segment=n.value()),i=i.right;else if(n.hasNext())n.next(),i.mid||(i.mid=new qn,i.mid.segment=n.value()),i=i.mid;else break}const a=i.value;return i.value=r,i.key=e,a}get(e){var r;return(r=this._getNode(e))==null?void 0:r.value}_getNode(e){const r=this._iter.reset(e);let n=this._root;for(;n;){const i=r.cmp(n.segment);if(i>0)n=n.left;else if(i<0)n=n.right;else if(r.hasNext())r.next(),n=n.mid;else break}return n}has(e){const r=this._getNode(e);return!((r==null?void 0:r.value)===void 0&&(r==null?void 0:r.mid)===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,r){const n=this._iter.reset(e),i=[];let a=this._root;for(;a;){const o=n.cmp(a.segment);if(o>0)i.push([1,a]),a=a.left;else if(o<0)i.push([-1,a]),a=a.right;else if(n.hasNext())n.next(),i.push([0,a]),a=a.mid;else{for(r?(a.left=void 0,a.mid=void 0,a.right=void 0):a.value=void 0;i.length>0&&a.isEmpty();){let[m,E]=i.pop();switch(m){case 1:E.left=void 0;break;case 0:E.mid=void 0;break;case-1:E.right=void 0;break}a=E}break}}}findSubstr(e){const r=this._iter.reset(e);let n=this._root,i;for(;n;){const a=r.cmp(n.segment);if(a>0)n=n.left;else if(a<0)n=n.right;else if(r.hasNext())r.next(),i=n.value||i,n=n.mid;else break}return n&&n.value||i}findSuperstr(e){const r=this._iter.reset(e);let n=this._root;for(;n;){const i=r.cmp(n.segment);if(i>0)n=n.left;else if(i<0)n=n.right;else if(r.hasNext())r.next(),n=n.mid;else return n.mid?this._entries(n.mid):void 0}}forEach(e){for(const[r,n]of this)e(n,r)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(e){e&&(yield*this._entries(e.left),e.value&&(yield[e.key,e.value]),yield*this._entries(e.mid),yield*this._entries(e.right))}}var xi=Object.defineProperty,Gt=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?xi(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r),ht;(function(t){t[t.Head=0]="Head",t[t.RemoteHead=1]="RemoteHead",t[t.Tag=2]="Tag"})(ht||(ht={}));var or;(function(t){t.BadConfigFile="BadConfigFile",t.AuthenticationFailed="AuthenticationFailed",t.NoUserNameConfigured="NoUserNameConfigured",t.NoUserEmailConfigured="NoUserEmailConfigured",t.NoRemoteRepositorySpecified="NoRemoteRepositorySpecified",t.NotAGitRepository="NotAGitRepository",t.NotAtRepositoryRoot="NotAtRepositoryRoot",t.Conflict="Conflict",t.StashConflict="StashConflict",t.UnmergedChanges="UnmergedChanges",t.PushRejected="PushRejected",t.RemoteConnectionError="RemoteConnectionError",t.DirtyWorkTree="DirtyWorkTree",t.CantOpenResource="CantOpenResource",t.GitNotFound="GitNotFound",t.CantCreatePipe="CantCreatePipe",t.CantAccessRemote="CantAccessRemote",t.RepositoryNotFound="RepositoryNotFound",t.RepositoryIsLocked="RepositoryIsLocked",t.BranchNotFullyMerged="BranchNotFullyMerged",t.NoRemoteReference="NoRemoteReference",t.InvalidBranchName="InvalidBranchName",t.BranchAlreadyExists="BranchAlreadyExists",t.NoLocalChanges="NoLocalChanges",t.NoStashFound="NoStashFound",t.LocalChangesOverwritten="LocalChangesOverwritten",t.NoUpstreamBranch="NoUpstreamBranch",t.IsInSubmodule="IsInSubmodule",t.WrongCase="WrongCase",t.CantLockRef="CantLockRef",t.CantRebaseMultipleBranches="CantRebaseMultipleBranches",t.PatchDoesNotApply="PatchDoesNotApply"})(or||(or={}));const Un=class{constructor(){Gt(this,"_providers",new Map),Gt(this,"_onDidOpenRepository",new u.EventEmitter),Gt(this,"onDidOpenRepository",this._onDidOpenRepository.event),Gt(this,"_onDidCloseRepository",new u.EventEmitter),Gt(this,"onDidCloseRepository",this._onDidCloseRepository.event),Gt(this,"_onDidChangeState",new u.EventEmitter),Gt(this,"onDidChangeState",this._onDidChangeState.event),Gt(this,"_onDidPublish",new u.EventEmitter),Gt(this,"onDidPublish",this._onDidPublish.event),Gt(this,"_disposables"),this._disposables=[]}get repositories(){const t=[];return this._providers.forEach(({repositories:e})=>{e&&t.push(...e)}),t}get state(){if(this._providers.size!==0){for(const[,{state:t}]of this._providers)if(t!=="initialized")return"uninitialized";return"initialized"}}_updateReposContext(){const t=Array.from(this._providers.values()).reduce((e,r)=>e+r.repositories.length,0);u.commands.executeCommand("setContext","gitHubOpenRepositoryCount",t)}registerGitProvider(t){C.appendLine("Registering git provider");const e=this._nextHandle();return this._providers.set(e,t),this._disposables.push(t.onDidCloseRepository(r=>this._onDidCloseRepository.fire(r))),this._disposables.push(t.onDidOpenRepository(r=>{C.appendLine(`Repository ${r.rootUri} has been opened`),this._updateReposContext(),this._onDidOpenRepository.fire(r)})),t.onDidChangeState&&this._disposables.push(t.onDidChangeState(r=>this._onDidChangeState.fire(r))),t.onDidPublish&&this._disposables.push(t.onDidPublish(r=>this._onDidPublish.fire(r))),this._updateReposContext(),t.repositories.forEach(r=>{this._onDidOpenRepository.fire(r)}),{dispose:()=>{const r=t==null?void 0:t.repositories;r&&r.length>0&&r.forEach(n=>this._onDidCloseRepository.fire(n)),this._providers.delete(e)}}}getGitProvider(t){const e=qt.forUris();return this._providers.forEach(r=>{const n=r.repositories;if(n&&n.length>0)for(const i of n)e.set(i.rootUri,r)}),e.findSubstr(t)}_nextHandle(){return Un._handlePool++}dispose(){this._disposables.forEach(t=>t.dispose())}};let $n=Un;Gt($n,"_handlePool",0);const ui=new Map;function Mi(t,e){ui.set(t,e)}function Fi(t){ui.delete(t)}function jt(t){for(const e of ui.values())if(e.hasCommentThread(t))return e;C.appendLine(`Unable to find handler for comment thread ${t.gitHubThreadId}`)}var co=Object.defineProperty,ho=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?co(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);let xr;class ds extends u.Disposable{constructor(e){super(()=>this.disposables.forEach(r=>r.dispose()));this._storageUri=e,ho(this,"SUBPATH","temp"),ho(this,"disposables",[])}get path(){return u.Uri.joinPath(this._storageUri,this.SUBPATH)}addDisposable(e){if(this.disposables.length>30){const r=this.disposables.shift();r==null||r.dispose()}this.disposables.push(e)}async writeState(e,r,n){let i=this.path;const a=u.workspace.workspaceFolders&&u.workspace.workspaceFolders.length>0?u.workspace.workspaceFolders[0].name:void 0;a&&(i=u.Uri.joinPath(i,a)),e&&(i=u.Uri.joinPath(i,e)),await u.workspace.fs.createDirectory(i);const o=u.Uri.joinPath(i,r);await u.workspace.fs.writeFile(o,n);const m={dispose:()=>u.workspace.fs.delete(o,{recursive:!0})};return this.addDisposable(m),o}static async init(e){if(e.globalStorageUri&&!xr){xr=new ds(e.globalStorageUri);try{await u.workspace.fs.delete(xr.path,{recursive:!0})}catch(r){C.appendLine(`TemporaryState> Error in initialization: ${r.message}`)}try{await u.workspace.fs.createDirectory(xr.path)}catch(r){C.appendLine(`TemporaryState> Error in initialization: ${r.message}`)}return e.subscriptions.push(xr),xr}}static async write(e,r,n){if(!!xr)return xr.writeState(e,r,n)}}function li(t){return JSON.parse(t)}function er(t){try{return JSON.parse(t.query)}catch(e){}}function Hu(t){try{return JSON.parse(t.query)}catch(e){}}const Bu=["image/png","image/gif","image/jpeg","image/webp","image/tiff","image/bmp"],po=u.Uri.parse("data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==");async function ea(t,e){try{const{commit:r,baseCommit:n,headCommit:i,isBase:a,path:o}=JSON.parse(t.query),m=t.scheme==="review"?r:a?n:i,{object:E}=await e.getObjectDetails(m,t.fsPath),{mimetype:k}=await e.detectObjectType(E);if(k==="text/plain")return;if(Bu.indexOf(k)>-1){const P=await e.buffer(m,t.fsPath);return ds.write(L.dirname(o),L.basename(o),P)}}catch(r){return}}function Yr(t,e,r,n,i,a,o){const m={path:e||t.path,ref:r,commit:n,base:a.base,isOutdated:i,rootPath:o.path};let E=t.path;return a.replaceFileExtension&&(E=`${E}.git`),t.with({scheme:"review",path:E,query:JSON.stringify(m)})}function wt(t,e,r,n){const i={prNumber:e,fileName:r,status:n};return t.with({scheme:"filechange",query:JSON.stringify(i)})}function Li(t){try{return t.query?JSON.parse(t.query):void 0}catch(e){}}function Gn(t,e,r,n,i,a,o){const m={baseCommit:r,headCommit:n,isBase:a,fileName:i,prNumber:e.number,status:o,remoteName:e.githubRepository.remote.remoteName},E=t.path;return t.with({scheme:"pr",path:E,query:JSON.stringify(m)})}var hs;(function(t){t.file="file"})(hs||(hs={}));function Hn(t,e){return t.scheme===hs.file?L.resolve(t.fsPath,e):L.posix.resolve(t.path,e)}class Vu extends u.EventEmitter{handleUri(e){this.fire(e)}}const mo=new Vu,wn="GitHub.vscode-pull-request-github",ps="git",ta="ghpr",fo="initialize",go="statechange",ci="github:focusedReview",vo=require("buffer");var ra=Je(4063),ju=Je.n(ra),Ct;(function(t){t.LEFT="LEFT",t.RIGHT="RIGHT"})(Ct||(Ct={}));var Rr;(function(t){t.DISMISSED="DISMISSED",t.VIEWED="VIEWED",t.UNVIEWED="UNVIEWED"})(Rr||(Rr={}));var Ye;(function(t){t[t.ADD=0]="ADD",t[t.COPY=1]="COPY",t[t.DELETE=2]="DELETE",t[t.MODIFY=3]="MODIFY",t[t.RENAME=4]="RENAME",t[t.TYPE=5]="TYPE",t[t.UNKNOWN=6]="UNKNOWN",t[t.UNMERGED=7]="UNMERGED"})(Ye||(Ye={}));class di{constructor(e,r,n,i,a,o,m,E){this.baseCommit=e,this.status=r,this.fileName=n,this.previousFileName=i,this.patch=a,this.diffHunks=o,this.isPartial=m,this.blobUrl=E}}class yo{constructor(e,r,n,i,a){this.baseCommit=e,this.blobUrl=r,this.status=n,this.fileName=i,this.previousFileName=a}}var zu=Object.defineProperty,Qu=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?zu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r),vr;(function(t){t[t.Context=0]="Context",t[t.Add=1]="Add",t[t.Delete=2]="Delete",t[t.Control=3]="Control"})(vr||(vr={}));class bo{constructor(e,r,n,i,a,o=!0){this.type=e,this.oldLineNumber=r,this.newLineNumber=n,this.positionInHunk=i,this._raw=a,this.endwithLineBreak=o}get raw(){return this._raw}get text(){return this._raw.substr(1)}}function Wu(t){switch(t[0]){case" ":return 0;case"+":return 1;case"-":return 2;default:return 3}}class Ku{constructor(e,r,n,i,a){this.oldLineNumber=e,this.oldLength=r,this.newLineNumber=n,this.newLength=i,this.positionInHunk=a,Qu(this,"diffLines",[])}}const _o=/^@@ \-(\d+)(,(\d+))?( \+(\d+)(,(\d+)?)?)? @@/;function Yu(t){let e=0,r=0;for(;(r=t.indexOf("\r",r))!==-1;)r++,e++;return e}function*wo(t){let e=0;for(;e!==-1&&e<t.length;){const r=e;e=t.indexOf(`
`,e);let i=(e!==-1?e:t.length)-r;e!==-1&&(e>0&&t[e-1]==="\r"&&i--,e++),yield t.substr(r,i)}}function*qi(t){const e=wo(t);let r=e.next(),n,i=-1,a=-1,o=-1;for(;!r.done;){const m=r.value;if(_o.test(m)){n&&(yield n,n=void 0),i===-1&&(i=0);const E=_o.exec(m),k=a=Number(E[1]),P=Number(E[3])||1,U=o=Number(E[5]),z=Number(E[7])||1;n=new Ku(k,P,U,z,i),n.diffLines.push(new bo(3,-1,-1,i,m))}else if(n){const E=Wu(m);if(E===3)n.diffLines&&n.diffLines.length&&(n.diffLines[n.diffLines.length-1].endwithLineBreak=!1);else{n.diffLines.push(new bo(E,E!==1?a:-1,E!==2?o:-1,i,m));const k=1+Yu(m);switch(E){case 0:a+=k,o+=k;break;case 2:a+=k;break;case 1:o+=k;break}}}i!==-1&&++i,r=e.next()}n&&(yield n)}function na(t){const e=qi(t);let r=e.next();const n=[],i=[];for(;!r.done;){const a=r.value;n.push(a);for(let o=0;o<a.diffLines.length;o++){const m=a.diffLines[o];if(!(m.type===2||m.type===3))if(m.type===1)i.push(m.text);else{const E=m.text;i.push(E)}}r=e.next()}return n}function Xu(t,e){const r=t.split(/\r?\n/),n=qi(e);let i=n.next();const a=[],o=[];let m=0;for(;!i.done;){const E=i.value;a.push(E);const k=E.oldLineNumber;for(let P=m+1;P<k;P++)o.push(r[P-1]);m=k+E.oldLength-1;for(let P=0;P<E.diffLines.length;P++){const U=E.diffLines[P];if(!(U.type===2||U.type===3))if(U.type===1)o.push(U.text);else{const z=U.text;o.push(z)}}i=n.next()}if(m<r.length)for(let E=m+1;E<=r.length;E++)o.push(r[E-1]);return o.join(`
`)}function ms(t){switch(t){case"removed":return Ye.DELETE;case"added":return Ye.ADD;case"renamed":return Ye.RENAME;case"modified":return Ye.MODIFY;default:return Ye.UNKNOWN}}async function fs(t,e,r){const n=[];for(let i=0;i<t.length;i++){const a=t[i],o=ms(a.status);if(!a.patch){n.push(new yo(r,a.blob_url,o,a.filename,a.previous_filename));continue}let m=!1;switch(o){case Ye.DELETE:case Ye.MODIFY:try{await e.getObjectDetails(r,a.filename),m=!0}catch(P){}break;case Ye.RENAME:try{await e.getObjectDetails(r,a.previous_filename),m=!0}catch(P){}break}const E=na(a.patch),k=!m&&o!==Ye.ADD;n.push(new di(r,o,a.filename,a.previous_filename,a.patch,E,k,a.blob_url))}return n}var Ju=Je(5747),Zu=Je(2087),el=Je(6200),tl=Object.defineProperty,Mr=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?tl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const rl=/^(?:([^@:]+)@)?([^:/]+):?(.+)$/,Eo=/^([a-z-]+):\/\//,ia=t=>{const e=Eo.exec(t);if(e){const[o,m]=e;if(m==="ssh")t=t.slice(o.length);else return}const r=rl.exec(t);if(!r)return;const[,n,i,a]=r;return{User:n,Host:i,path:a}},ld=(t,e=oa.current)=>{const r=ia(t);return r&&e(r)};function gs(t){return{...t,Hostname:t.Host}}function sa(...t){const e=t.filter(r=>!!r);return r=>e.reduce((n,i)=>({...n,...i(n)}),r)}function aa(t){const e=(0,el.parse)(t);return r=>e.compute(r.Host)}const ko=class{static fromConfig(t){return sa(gs,aa(t))}};let oa=ko;Mr(oa,"default",gs),Mr(oa,"current",ko.default);var nl=Object.defineProperty,So=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?nl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const ua=class{static fromConfig(t){return sa(gs,aa(t))}};let vs=ua;So(vs,"default",sa(gs,sl())),So(vs,"current",ua.default);const il=(t,e=vs.current)=>{const r=ia(t);return r&&e(r)};function sl(t=(0,L.join)((0,Zu.homedir)(),".ssh","config")){try{const e=(0,Ju.readFileSync)(t).toString();return aa(e)}catch(e){C.appendLine(`${t}: ${e.message}`)}}var la=Object.defineProperty,Ui=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?la(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r),ys;(function(t){t[t.Local=0]="Local",t[t.HTTP=1]="HTTP",t[t.SSH=2]="SSH",t[t.GIT=3]="GIT",t[t.OTHER=4]="OTHER"})(ys||(ys={}));class Bn{constructor(e){if(Ui(this,"type",4),Ui(this,"host",""),Ui(this,"owner",""),Ui(this,"repositoryName",""),Ui(this,"url"),!this.parseSshProtocol(e))try{this.url=u.Uri.parse(e),this.type=this.getType(this.url.scheme),this.host=this.getHostName(this.url.authority),this.host&&(this.repositoryName=this.getRepositoryName(this.url.path)||"",this.owner=this.getOwnerName(this.url.path)||"")}catch(r){C.appendLine(`Failed to parse '${e}'`),u.window.showWarningMessage(`Unable to parse remote '${e}'. Please check that it is correctly formatted.`)}}get nameWithOwner(){return this.owner?`${this.owner}/${this.repositoryName}`:this.repositoryName}getType(e){switch(e){case"file":return 0;case"http":case"https":return 1;case"git":return 3;case"ssh":return 2;default:return 4}}parseSshProtocol(e){const r=il(e);if(!r)return!1;const{Hostname:n,HostName:i,path:a}=r;return this.host=i||n,this.owner=this.getOwnerName(a)||"",this.repositoryName=this.getRepositoryName(a)||"",this.type=2,!0}getHostName(e){const r=/^(?:.*:?@)?([^:]*)(?::.*)?$/.exec(e);return r&&r.length>=2?r[1].toLocaleLowerCase()==="www.github.com"?"github.com":r[1]:""}getRepositoryName(e){let r=e.replace(/\\/g,"/");r.endsWith("/")&&(r=r.substr(0,r.length-1));const n=r.lastIndexOf("/"),i=r.substr(n+1);if(!(i===""||i==="/"))return i.replace(/\/$/,"").replace(/\.git$/,"")}getOwnerName(e){let r=e.replace(/\\/g,"/");r.endsWith("/")&&(r=r.substr(0,r.length-1));const n=r.split("/");if(n.length>1)return n[n.length-2]}normalizeUri(){if(this.type===4&&!this.url)return;if(this.type===0)return this.url;let e="https";this.url&&(this.url.scheme==="http"||this.url.scheme==="https")&&(e=this.url.scheme);try{return u.Uri.parse(`${e}://${this.host.toLocaleLowerCase()}/${this.nameWithOwner.toLocaleLowerCase()}`)}catch(r){return}}toString(){if(this.type===2)return`git@${this.host}:${this.owner}/${this.repositoryName}`;if(this.type===3)return`git://git@${this.host}:${this.owner}/${this.repositoryName}`;const e=this.normalizeUri();if(e)return e.toString()}update(e){return e.type&&(this.type=e.type),e.host&&(this.host=e.host),e.owner&&(this.owner=e.owner),e.repositoryName&&(this.repositoryName=e.repositoryName),this}equals(e){const r=this.normalizeUri();if(!r)return!1;const n=e.normalizeUri();return n?r.toString().toLocaleLowerCase()===n.toString().toLocaleLowerCase():!1}}var al=Object.defineProperty,ol=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?al(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class To{constructor(e,r,n,i){this.ref=e,this.label=r,this.sha=n,ol(this,"repositoryCloneUrl"),this.repositoryCloneUrl=new Bn(i)}}var Ht;(function(t){t[t.Committed=0]="Committed",t[t.Mentioned=1]="Mentioned",t[t.Subscribed=2]="Subscribed",t[t.Commented=3]="Commented",t[t.Reviewed=4]="Reviewed",t[t.Labeled=5]="Labeled",t[t.Milestoned=6]="Milestoned",t[t.Assigned=7]="Assigned",t[t.HeadRefDeleted=8]="HeadRefDeleted",t[t.Merged=9]="Merged",t[t.Other=10]="Other"})(Ht||(Ht={}));function ca(t){return t.event===4}function ul(t){return t.event===0}function ll(t){return t.event===3}function cd(t){return t.event===9}function dd(t){return t.event===7}function hd(t){return t.event===8}function cl(t){return t.__typename==="CheckRun"}var Yt;(function(t){t[t.Query=0]="Query",t[t.All=1]="All",t[t.LocalPullRequest=2]="LocalPullRequest"})(Yt||(Yt={}));var nn;(function(t){t.Approve="APPROVE",t.RequestChanges="REQUEST_CHANGES",t.Comment="COMMENT"})(nn||(nn={}));var Pt;(function(t){t[t.Open=0]="Open",t[t.Merged=1]="Merged",t[t.Closed=2]="Closed"})(Pt||(Pt={}));var En;(function(t){t[t.Mergeable=0]="Mergeable",t[t.NotMergeable=1]="NotMergeable",t[t.Unknown=2]="Unknown"})(En||(En={}));var da=Je(6417),dl=Je.n(da),hl=Object.defineProperty,pl=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?hl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Ro=class{static initialize(t){Ro.icons={reactions:{THUMBS_UP:t.asAbsolutePath(L.join("resources","icons","reactions","thumbs_up.png")),THUMBS_DOWN:t.asAbsolutePath(L.join("resources","icons","reactions","thumbs_down.png")),CONFUSED:t.asAbsolutePath(L.join("resources","icons","reactions","confused.png")),EYES:t.asAbsolutePath(L.join("resources","icons","reactions","eyes.png")),HEART:t.asAbsolutePath(L.join("resources","icons","reactions","heart.png")),HOORAY:t.asAbsolutePath(L.join("resources","icons","reactions","hooray.png")),LAUGH:t.asAbsolutePath(L.join("resources","icons","reactions","laugh.png")),ROCKET:t.asAbsolutePath(L.join("resources","icons","reactions","rocket.png"))}}}};let Xr=Ro;pl(Xr,"icons");function bs(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof process=="object"&&"version"in process?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:"<environment undetectable>"}var ml=Je(5186);/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function Co(t){return Object.prototype.toString.call(t)==="[object Object]"}function Po(t){var e,r;return Co(t)===!1?!1:(e=t.constructor,e===void 0?!0:(r=e.prototype,!(Co(r)===!1||r.hasOwnProperty("isPrototypeOf")===!1)))}function fl(t){return t?Object.keys(t).reduce((e,r)=>(e[r.toLowerCase()]=t[r],e),{}):{}}function _s(t,e){const r=Object.assign({},t);return Object.keys(e).forEach(n=>{Po(e[n])?n in t?r[n]=_s(t[n],e[n]):Object.assign(r,{[n]:e[n]}):Object.assign(r,{[n]:e[n]})}),r}function hi(t){for(const e in t)t[e]===void 0&&delete t[e];return t}function yr(t,e,r){if(typeof e=="string"){let[i,a]=e.split(" ");r=Object.assign(a?{method:i,url:a}:{url:i},r)}else r=Object.assign({},e);r.headers=fl(r.headers),hi(r),hi(r.headers);const n=_s(t||{},r);return t&&t.mediaType.previews.length&&(n.mediaType.previews=t.mediaType.previews.filter(i=>!n.mediaType.previews.includes(i)).concat(n.mediaType.previews)),n.mediaType.previews=n.mediaType.previews.map(i=>i.replace(/-preview/,"")),n}function pi(t,e){const r=/\?/.test(t)?"&":"?",n=Object.keys(e);return n.length===0?t:t+r+n.map(i=>i==="q"?"q="+e.q.split("+").map(encodeURIComponent).join("+"):`${i}=${encodeURIComponent(e[i])}`).join("&")}const ws=/\{[^}]+\}/g;function No(t){return t.replace(/^\W+|\W+$/g,"").split(/,/)}function kn(t){const e=t.match(ws);return e?e.map(No).reduce((r,n)=>r.concat(n),[]):[]}function Ao(t,e){return Object.keys(t).filter(r=>!e.includes(r)).reduce((r,n)=>(r[n]=t[n],r),{})}function ha(t){return t.split(/(%[0-9A-Fa-f]{2})/g).map(function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]")),e}).join("")}function mi(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function $i(t,e,r){return e=t==="+"||t==="#"?ha(e):mi(e),r?mi(r)+"="+e:e}function Vn(t){return t!=null}function pa(t){return t===";"||t==="&"||t==="?"}function gl(t,e,r,n){var i=t[r],a=[];if(Vn(i)&&i!=="")if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")i=i.toString(),n&&n!=="*"&&(i=i.substring(0,parseInt(n,10))),a.push($i(e,i,pa(e)?r:""));else if(n==="*")Array.isArray(i)?i.filter(Vn).forEach(function(o){a.push($i(e,o,pa(e)?r:""))}):Object.keys(i).forEach(function(o){Vn(i[o])&&a.push($i(e,i[o],o))});else{const o=[];Array.isArray(i)?i.filter(Vn).forEach(function(m){o.push($i(e,m))}):Object.keys(i).forEach(function(m){Vn(i[m])&&(o.push(mi(m)),o.push($i(e,i[m].toString())))}),pa(e)?a.push(mi(r)+"="+o.join(",")):o.length!==0&&a.push(o.join(","))}else e===";"?Vn(i)&&a.push(mi(r)):i===""&&(e==="&"||e==="?")?a.push(mi(r)+"="):i===""&&a.push("");return a}function Io(t){return{expand:vl.bind(null,t)}}function vl(t,e){var r=["+","#",".","/",";","?","&"];return t.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(n,i,a){if(i){let m="";const E=[];if(r.indexOf(i.charAt(0))!==-1&&(m=i.charAt(0),i=i.substr(1)),i.split(/,/g).forEach(function(k){var P=/([^:\*]*)(?::(\d+)|(\*))?/.exec(k);E.push(gl(e,m,P[1],P[2]||P[3]))}),m&&m!=="+"){var o=",";return m==="?"?o="&":m!=="#"&&(o=m),(E.length!==0?m:"")+E.join(o)}else return E.join(",")}else return ha(a)})}function Oo(t){let e=t.method.toUpperCase(),r=(t.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),n=Object.assign({},t.headers),i,a=Ao(t,["method","baseUrl","url","headers","request","mediaType"]);const o=kn(r);r=Io(r).expand(a),/^http/.test(r)||(r=t.baseUrl+r);const m=Object.keys(t).filter(P=>o.includes(P)).concat("baseUrl"),E=Ao(a,m);if(!/application\/octet-stream/i.test(n.accept)&&(t.mediaType.format&&(n.accept=n.accept.split(/,/).map(P=>P.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${t.mediaType.format}`)).join(",")),t.mediaType.previews.length)){const P=n.accept.match(/[\w-]+(?=-preview)/g)||[];n.accept=P.concat(t.mediaType.previews).map(U=>{const z=t.mediaType.format?`.${t.mediaType.format}`:"+json";return`application/vnd.github.${U}-preview${z}`}).join(",")}return["GET","HEAD"].includes(e)?r=pi(r,E):"data"in E?i=E.data:Object.keys(E).length?i=E:n["content-length"]=0,!n["content-type"]&&typeof i!="undefined"&&(n["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(e)&&typeof i=="undefined"&&(i=""),Object.assign({method:e,url:r,headers:n},typeof i!="undefined"?{body:i}:null,t.request?{request:t.request}:null)}function yl(t,e,r){return Oo(yr(t,e,r))}function Do(t,e){const r=yr(t,e),n=yl.bind(null,r);return Object.assign(n,{DEFAULTS:r,defaults:Do.bind(null,r),merge:yr.bind(null,r),parse:Oo})}const bl=`octokit-endpoint.js/6.0.11 ${bs()}`,_l=Do(null,{method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":bl},mediaType:{format:"",previews:[]}});var mt=Je(2413),Sn=Je(8605),fi=Je(8835),Es=Je(7211),Cr=Je(8761);const wl=mt.Readable,sn=Symbol("buffer"),ma=Symbol("type");class gi{constructor(){this[ma]="";const e=arguments[0],r=arguments[1],n=[];let i=0;if(e){const o=e,m=Number(o.length);for(let E=0;E<m;E++){const k=o[E];let P;k instanceof Buffer?P=k:ArrayBuffer.isView(k)?P=Buffer.from(k.buffer,k.byteOffset,k.byteLength):k instanceof ArrayBuffer?P=Buffer.from(k):k instanceof gi?P=k[sn]:P=Buffer.from(typeof k=="string"?k:String(k)),i+=P.length,n.push(P)}}this[sn]=Buffer.concat(n);let a=r&&r.type!==void 0&&String(r.type).toLowerCase();a&&!/[^\u0020-\u007E]/.test(a)&&(this[ma]=a)}get size(){return this[sn].length}get type(){return this[ma]}text(){return Promise.resolve(this[sn].toString())}arrayBuffer(){const e=this[sn],r=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return Promise.resolve(r)}stream(){const e=new wl;return e._read=function(){},e.push(this[sn]),e.push(null),e}toString(){return"[object Blob]"}slice(){const e=this.size,r=arguments[0],n=arguments[1];let i,a;r===void 0?i=0:r<0?i=Math.max(e+r,0):i=Math.min(r,e),n===void 0?a=e:n<0?a=Math.max(e+n,0):a=Math.min(n,e);const o=Math.max(a-i,0),E=this[sn].slice(i,i+o),k=new gi([],{type:arguments[2]});return k[sn]=E,k}}Object.defineProperties(gi.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(gi.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0});function dr(t,e,r){Error.call(this,t),this.message=t,this.type=e,r&&(this.code=this.errno=r.code),Error.captureStackTrace(this,this.constructor)}dr.prototype=Object.create(Error.prototype),dr.prototype.constructor=dr,dr.prototype.name="FetchError";let fa;try{fa=require("encoding").convert}catch(t){}const an=Symbol("Body internals"),xo=mt.PassThrough;function Xt(t){var e=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.size;let i=n===void 0?0:n;var a=r.timeout;let o=a===void 0?0:a;t==null?t=null:Mo(t)?t=Buffer.from(t.toString()):Gi(t)||Buffer.isBuffer(t)||(Object.prototype.toString.call(t)==="[object ArrayBuffer]"?t=Buffer.from(t):ArrayBuffer.isView(t)?t=Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof mt||(t=Buffer.from(String(t)))),this[an]={body:t,disturbed:!1,error:null},this.size=i,this.timeout=o,t instanceof mt&&t.on("error",function(m){const E=m.name==="AbortError"?m:new dr(`Invalid response body while trying to fetch ${e.url}: ${m.message}`,"system",m);e[an].error=E})}Xt.prototype={get body(){return this[an].body},get bodyUsed(){return this[an].disturbed},arrayBuffer(){return vi.call(this).then(function(t){return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)})},blob(){let t=this.headers&&this.headers.get("content-type")||"";return vi.call(this).then(function(e){return Object.assign(new gi([],{type:t.toLowerCase()}),{[sn]:e})})},json(){var t=this;return vi.call(this).then(function(e){try{return JSON.parse(e.toString())}catch(r){return Xt.Promise.reject(new dr(`invalid json response body at ${t.url} reason: ${r.message}`,"invalid-json"))}})},text(){return vi.call(this).then(function(t){return t.toString()})},buffer(){return vi.call(this)},textConverted(){var t=this;return vi.call(this).then(function(e){return El(e,t.headers)})}},Object.defineProperties(Xt.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),Xt.mixIn=function(t){for(const e of Object.getOwnPropertyNames(Xt.prototype))if(!(e in t)){const r=Object.getOwnPropertyDescriptor(Xt.prototype,e);Object.defineProperty(t,e,r)}};function vi(){var t=this;if(this[an].disturbed)return Xt.Promise.reject(new TypeError(`body used already for: ${this.url}`));if(this[an].disturbed=!0,this[an].error)return Xt.Promise.reject(this[an].error);let e=this.body;if(e===null)return Xt.Promise.resolve(Buffer.alloc(0));if(Gi(e)&&(e=e.stream()),Buffer.isBuffer(e))return Xt.Promise.resolve(e);if(!(e instanceof mt))return Xt.Promise.resolve(Buffer.alloc(0));let r=[],n=0,i=!1;return new Xt.Promise(function(a,o){let m;t.timeout&&(m=setTimeout(function(){i=!0,o(new dr(`Response timeout while trying to fetch ${t.url} (over ${t.timeout}ms)`,"body-timeout"))},t.timeout)),e.on("error",function(E){E.name==="AbortError"?(i=!0,o(E)):o(new dr(`Invalid response body while trying to fetch ${t.url}: ${E.message}`,"system",E))}),e.on("data",function(E){if(!(i||E===null)){if(t.size&&n+E.length>t.size){i=!0,o(new dr(`content size at ${t.url} over limit: ${t.size}`,"max-size"));return}n+=E.length,r.push(E)}}),e.on("end",function(){if(!i){clearTimeout(m);try{a(Buffer.concat(r,n))}catch(E){o(new dr(`Could not create Buffer from response body for ${t.url}: ${E.message}`,"system",E))}}})})}function El(t,e){if(typeof fa!="function")throw new Error("The package `encoding` must be installed to use the textConverted() function");const r=e.get("content-type");let n="utf-8",i,a;return r&&(i=/charset=([^;]*)/i.exec(r)),a=t.slice(0,1024).toString(),!i&&a&&(i=/<meta.+?charset=(['"])(.+?)\1/i.exec(a)),!i&&a&&(i=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(a),i||(i=/<meta[\s]+?content=(['"])(.+?)\1[\s]+?http-equiv=(['"])content-type\3/i.exec(a),i&&i.pop()),i&&(i=/charset=(.*)/i.exec(i.pop()))),!i&&a&&(i=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(a)),i&&(n=i.pop(),(n==="gb2312"||n==="gbk")&&(n="gb18030")),fa(t,"UTF-8",n).toString()}function Mo(t){return typeof t!="object"||typeof t.append!="function"||typeof t.delete!="function"||typeof t.get!="function"||typeof t.getAll!="function"||typeof t.has!="function"||typeof t.set!="function"?!1:t.constructor.name==="URLSearchParams"||Object.prototype.toString.call(t)==="[object URLSearchParams]"||typeof t.sort=="function"}function Gi(t){return typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&typeof t.constructor.name=="string"&&/^(Blob|File)$/.test(t.constructor.name)&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}function Fo(t){let e,r,n=t.body;if(t.bodyUsed)throw new Error("cannot clone body after it is used");return n instanceof mt&&typeof n.getBoundary!="function"&&(e=new xo,r=new xo,n.pipe(e),n.pipe(r),t[an].body=e,n=r),n}function Lo(t){return t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":Mo(t)?"application/x-www-form-urlencoded;charset=UTF-8":Gi(t)?t.type||null:Buffer.isBuffer(t)||Object.prototype.toString.call(t)==="[object ArrayBuffer]"||ArrayBuffer.isView(t)?null:typeof t.getBoundary=="function"?`multipart/form-data;boundary=${t.getBoundary()}`:t instanceof mt?null:"text/plain;charset=UTF-8"}function qo(t){const e=t.body;return e===null?0:Gi(e)?e.size:Buffer.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"&&(e._lengthRetrievers&&e._lengthRetrievers.length==0||e.hasKnownLength&&e.hasKnownLength())?e.getLengthSync():null}function kl(t,e){const r=e.body;r===null?t.end():Gi(r)?r.stream().pipe(t):Buffer.isBuffer(r)?(t.write(r),t.end()):r.pipe(t)}Xt.Promise=global.Promise;const Uo=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,ga=/[^\t\x20-\x7e\x80-\xff]/;function Hi(t){if(t=`${t}`,Uo.test(t)||t==="")throw new TypeError(`${t} is not a legal HTTP header name`)}function $o(t){if(t=`${t}`,ga.test(t))throw new TypeError(`${t} is not a legal HTTP header value`)}function zt(t,e){e=e.toLowerCase();for(const r in t)if(r.toLowerCase()===e)return r}const Ut=Symbol("map");class Fr{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;if(this[Ut]=Object.create(null),e instanceof Fr){const r=e.raw(),n=Object.keys(r);for(const i of n)for(const a of r[i])this.append(i,a);return}if(e!=null)if(typeof e=="object"){const r=e[Symbol.iterator];if(r!=null){if(typeof r!="function")throw new TypeError("Header pairs must be iterable");const n=[];for(const i of e){if(typeof i!="object"||typeof i[Symbol.iterator]!="function")throw new TypeError("Each header pair must be iterable");n.push(Array.from(i))}for(const i of n){if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");this.append(i[0],i[1])}}else for(const n of Object.keys(e)){const i=e[n];this.append(n,i)}}else throw new TypeError("Provided initializer must be an object")}get(e){e=`${e}`,Hi(e);const r=zt(this[Ut],e);return r===void 0?null:this[Ut][r].join(", ")}forEach(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,n=Bi(this),i=0;for(;i<n.length;){var a=n[i];const o=a[0],m=a[1];e.call(r,m,o,this),n=Bi(this),i++}}set(e,r){e=`${e}`,r=`${r}`,Hi(e),$o(r);const n=zt(this[Ut],e);this[Ut][n!==void 0?n:e]=[r]}append(e,r){e=`${e}`,r=`${r}`,Hi(e),$o(r);const n=zt(this[Ut],e);n!==void 0?this[Ut][n].push(r):this[Ut][e]=[r]}has(e){return e=`${e}`,Hi(e),zt(this[Ut],e)!==void 0}delete(e){e=`${e}`,Hi(e);const r=zt(this[Ut],e);r!==void 0&&delete this[Ut][r]}raw(){return this[Ut]}keys(){return va(this,"key")}values(){return va(this,"value")}[Symbol.iterator](){return va(this,"key+value")}}Fr.prototype.entries=Fr.prototype[Symbol.iterator],Object.defineProperty(Fr.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(Fr.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});function Bi(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"key+value";return Object.keys(t[Ut]).sort().map(e==="key"?function(n){return n.toLowerCase()}:e==="value"?function(n){return t[Ut][n].join(", ")}:function(n){return[n.toLowerCase(),t[Ut][n].join(", ")]})}const Vi=Symbol("internal");function va(t,e){const r=Object.create(ya);return r[Vi]={target:t,kind:e,index:0},r}const ya=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==ya)throw new TypeError("Value of `this` is not a HeadersIterator");var t=this[Vi];const e=t.target,r=t.kind,n=t.index,i=Bi(e,r),a=i.length;return n>=a?{value:void 0,done:!0}:(this[Vi].index=n+1,{value:i[n],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));Object.defineProperty(ya,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});function Sl(t){const e=Object.assign({__proto__:null},t[Ut]),r=zt(t[Ut],"Host");return r!==void 0&&(e[r]=e[r][0]),e}function Tl(t){const e=new Fr;for(const r of Object.keys(t))if(!Uo.test(r))if(Array.isArray(t[r]))for(const n of t[r])ga.test(n)||(e[Ut][r]===void 0?e[Ut][r]=[n]:e[Ut][r].push(n));else ga.test(t[r])||(e[Ut][r]=[t[r]]);return e}const on=Symbol("Response internals"),Rl=Sn.STATUS_CODES;class Br{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Xt.call(this,e,r);const n=r.status||200,i=new Fr(r.headers);if(e!=null&&!i.has("Content-Type")){const a=Lo(e);a&&i.append("Content-Type",a)}this[on]={url:r.url,status:n,statusText:r.statusText||Rl[n],headers:i,counter:r.counter}}get url(){return this[on].url||""}get status(){return this[on].status}get ok(){return this[on].status>=200&&this[on].status<300}get redirected(){return this[on].counter>0}get statusText(){return this[on].statusText}get headers(){return this[on].headers}clone(){return new Br(Fo(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}}Xt.mixIn(Br.prototype),Object.defineProperties(Br.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(Br.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});const un=Symbol("Request internals"),ba=fi.parse,Go=fi.format,Cl="destroy"in mt.Readable.prototype;function ks(t){return typeof t=="object"&&typeof t[un]=="object"}function Pl(t){const e=t&&typeof t=="object"&&Object.getPrototypeOf(t);return!!(e&&e.constructor.name==="AbortSignal")}class jn{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n;ks(e)?n=ba(e.url):(e&&e.href?n=ba(e.href):n=ba(`${e}`),e={});let i=r.method||e.method||"GET";if(i=i.toUpperCase(),(r.body!=null||ks(e)&&e.body!==null)&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let a=r.body!=null?r.body:ks(e)&&e.body!==null?Fo(e):null;Xt.call(this,a,{timeout:r.timeout||e.timeout||0,size:r.size||e.size||0});const o=new Fr(r.headers||e.headers||{});if(a!=null&&!o.has("Content-Type")){const E=Lo(a);E&&o.append("Content-Type",E)}let m=ks(e)?e.signal:null;if("signal"in r&&(m=r.signal),m!=null&&!Pl(m))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[un]={method:i,redirect:r.redirect||e.redirect||"follow",headers:o,parsedURL:n,signal:m},this.follow=r.follow!==void 0?r.follow:e.follow!==void 0?e.follow:20,this.compress=r.compress!==void 0?r.compress:e.compress!==void 0?e.compress:!0,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent}get method(){return this[un].method}get url(){return Go(this[un].parsedURL)}get headers(){return this[un].headers}get redirect(){return this[un].redirect}get signal(){return this[un].signal}clone(){return new jn(this)}}Xt.mixIn(jn.prototype),Object.defineProperty(jn.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(jn.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});function Nl(t){const e=t[un].parsedURL,r=new Fr(t[un].headers);if(r.has("Accept")||r.set("Accept","*/*"),!e.protocol||!e.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(e.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(t.signal&&t.body instanceof mt.Readable&&!Cl)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let n=null;if(t.body==null&&/^(POST|PUT)$/i.test(t.method)&&(n="0"),t.body!=null){const a=qo(t);typeof a=="number"&&(n=String(a))}n&&r.set("Content-Length",n),r.has("User-Agent")||r.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),t.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip,deflate");let i=t.agent;return typeof i=="function"&&(i=i(e)),!r.has("Connection")&&!i&&r.set("Connection","close"),Object.assign({},e,{method:t.method,headers:Sl(r),agent:i})}function ji(t){Error.call(this,t),this.type="aborted",this.message=t,Error.captureStackTrace(this,this.constructor)}ji.prototype=Object.create(Error.prototype),ji.prototype.constructor=ji,ji.prototype.name="AbortError";const Ho=mt.PassThrough,yi=fi.resolve;function Tn(t,e){if(!Tn.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return Xt.Promise=Tn.Promise,new Tn.Promise(function(r,n){const i=new jn(t,e),a=Nl(i),o=(a.protocol==="https:"?Es:Sn).request,m=i.signal;let E=null;const k=function(){let me=new ji("The user aborted a request.");n(me),i.body&&i.body instanceof mt.Readable&&i.body.destroy(me),!(!E||!E.body)&&E.body.emit("error",me)};if(m&&m.aborted){k();return}const P=function(){k(),le()},U=o(a);let z;m&&m.addEventListener("abort",P);function le(){U.abort(),m&&m.removeEventListener("abort",P),clearTimeout(z)}i.timeout&&U.once("socket",function(ce){z=setTimeout(function(){n(new dr(`network timeout at: ${i.url}`,"request-timeout")),le()},i.timeout)}),U.on("error",function(ce){n(new dr(`request to ${i.url} failed, reason: ${ce.message}`,"system",ce)),le()}),U.on("response",function(ce){clearTimeout(z);const me=Tl(ce.headers);if(Tn.isRedirect(ce.statusCode)){const Ae=me.get("Location"),He=Ae===null?null:yi(i.url,Ae);switch(i.redirect){case"error":n(new dr(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),le();return;case"manual":if(He!==null)try{me.set("Location",He)}catch(gt){n(gt)}break;case"follow":if(He===null)break;if(i.counter>=i.follow){n(new dr(`maximum redirect reached at: ${i.url}`,"max-redirect")),le();return}const ft={headers:new Fr(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:i.body,signal:i.signal,timeout:i.timeout,size:i.size};if(ce.statusCode!==303&&i.body&&qo(i)===null){n(new dr("Cannot follow redirect with body being a readable stream","unsupported-redirect")),le();return}(ce.statusCode===303||(ce.statusCode===301||ce.statusCode===302)&&i.method==="POST")&&(ft.method="GET",ft.body=void 0,ft.headers.delete("content-length")),r(Tn(new jn(He,ft))),le();return}}ce.once("end",function(){m&&m.removeEventListener("abort",P)});let Te=ce.pipe(new Ho);const Re={url:i.url,status:ce.statusCode,statusText:ce.statusMessage,headers:me,size:i.size,timeout:i.timeout,counter:i.counter},xe=me.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||xe===null||ce.statusCode===204||ce.statusCode===304){E=new Br(Te,Re),r(E);return}const Oe={flush:Cr.Z_SYNC_FLUSH,finishFlush:Cr.Z_SYNC_FLUSH};if(xe=="gzip"||xe=="x-gzip"){Te=Te.pipe(Cr.createGunzip(Oe)),E=new Br(Te,Re),r(E);return}if(xe=="deflate"||xe=="x-deflate"){ce.pipe(new Ho).once("data",function(He){(He[0]&15)==8?Te=Te.pipe(Cr.createInflate()):Te=Te.pipe(Cr.createInflateRaw()),E=new Br(Te,Re),r(E)});return}if(xe=="br"&&typeof Cr.createBrotliDecompress=="function"){Te=Te.pipe(Cr.createBrotliDecompress()),E=new Br(Te,Re),r(E);return}E=new Br(Te,Re),r(E)}),kl(U,i)})}Tn.isRedirect=function(t){return t===301||t===302||t===303||t===307||t===308},Tn.Promise=global.Promise;const Al=Tn;class Il extends Error{constructor(e){super(e);Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="Deprecation"}}var Ol=Je(778),Dl=Je.n(Ol);const Rn=Dl()(t=>console.warn(t));class zn extends Error{constructor(e,r,n){super(e);Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="HttpError",this.status=r,Object.defineProperty(this,"code",{get(){return Rn(new Il("[@octokit/request-error] `error.code` is deprecated, use `error.status`.")),r}}),this.headers=n.headers||{};const i=Object.assign({},n.request);n.request.headers.authorization&&(i.headers=Object.assign({},n.request.headers,{authorization:n.request.headers.authorization.replace(/ .*$/," [REDACTED]")})),i.url=i.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=i}}const xl="5.4.14";function Ml(t){return t.arrayBuffer()}function _a(t){(Po(t.body)||Array.isArray(t.body))&&(t.body=JSON.stringify(t.body));let e={},r,n;return(t.request&&t.request.fetch||Al)(t.url,Object.assign({method:t.method,body:t.body,headers:t.headers,redirect:t.redirect},t.request)).then(a=>{n=a.url,r=a.status;for(const m of a.headers)e[m[0]]=m[1];if(r===204||r===205)return;if(t.method==="HEAD"){if(r<400)return;throw new zn(a.statusText,r,{headers:e,request:t})}if(r===304)throw new zn("Not modified",r,{headers:e,request:t});if(r>=400)return a.text().then(m=>{const E=new zn(m,r,{headers:e,request:t});try{let k=JSON.parse(E.message);Object.assign(E,k);let P=k.errors;E.message=E.message+": "+P.map(JSON.stringify).join(", ")}catch(k){}throw E});const o=a.headers.get("content-type");return/application\/json/.test(o)?a.json():!o||/^text\/|charset=utf-8$/.test(o)?a.text():Ml(a)}).then(a=>({status:r,url:n,headers:e,data:a})).catch(a=>{throw a instanceof zn?a:new zn(a.message,500,{headers:e,request:t})})}function bi(t,e){const r=t.defaults(e);return Object.assign(function(i,a){const o=r.merge(i,a);if(!o.request||!o.request.hook)return _a(r.parse(o));const m=(E,k)=>_a(r.parse(r.merge(E,k)));return Object.assign(m,{endpoint:r,defaults:bi.bind(null,r)}),o.request.hook(m,o)},{endpoint:r,defaults:bi.bind(null,r)})}const Ss=bi(_l,{headers:{"user-agent":`octokit-request.js/${xl} ${bs()}`}}),Fl="4.6.1";class Ll extends Error{constructor(e,r){const n=r.data.errors[0].message;super(n);Object.assign(this,r.data),Object.assign(this,{headers:r.headers}),this.name="GraphqlError",this.request=e,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}const ql=["method","baseUrl","url","headers","request","query","mediaType"],Ul=["query","method","url"],Bo=/\/api\/v3\/?$/;function $l(t,e,r){if(r){if(typeof e=="string"&&"query"in r)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(const o in r)if(!!Ul.includes(o))return Promise.reject(new Error(`[@octokit/graphql] "${o}" cannot be used as variable name`))}const n=typeof e=="string"?Object.assign({query:e},r):e,i=Object.keys(n).reduce((o,m)=>ql.includes(m)?(o[m]=n[m],o):(o.variables||(o.variables={}),o.variables[m]=n[m],o),{}),a=n.baseUrl||t.endpoint.DEFAULTS.baseUrl;return Bo.test(a)&&(i.url=a.replace(Bo,"/api/graphql")),t(i).then(o=>{if(o.data.errors){const m={};for(const E of Object.keys(o.headers))m[E]=o.headers[E];throw new Ll(i,{headers:m,data:o.data})}return o.data.data})}function Qn(t,e){const r=t.defaults(e);return Object.assign((i,a)=>$l(r,i,a),{defaults:Qn.bind(null,r),endpoint:Ss.endpoint})}const fd=Qn(Ss,{headers:{"user-agent":`octokit-graphql.js/${Fl} ${bs()}`},method:"POST",url:"/graphql"});function Vo(t){return Qn(t,{method:"POST",url:"/graphql"})}async function Gl(t){const e=t.split(/\./).length===3?"app":/^v\d+\./.test(t)?"installation":"oauth";return{type:"token",token:t,tokenType:e}}function Hl(t){return t.split(/\./).length===3?`bearer ${t}`:`token ${t}`}async function Bl(t,e,r,n){const i=e.endpoint.merge(r,n);return i.headers.authorization=Hl(t),e(i)}const Vl=function(e){if(!e)throw new Error("[@octokit/auth-token] No token passed to createTokenAuth");if(typeof e!="string")throw new Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return e=e.replace(/^(token|bearer) +/i,""),Object.assign(Gl.bind(null,e),{hook:Bl.bind(null,e)})},jo="3.3.1";class Ts{constructor(e={}){const r=new ml.Collection,n={baseUrl:Ss.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},e.request,{hook:r.bind(null,"request")}),mediaType:{previews:[],format:""}};if(n.headers["user-agent"]=[e.userAgent,`octokit-core.js/${jo} ${bs()}`].filter(Boolean).join(" "),e.baseUrl&&(n.baseUrl=e.baseUrl),e.previews&&(n.mediaType.previews=e.previews),e.timeZone&&(n.headers["time-zone"]=e.timeZone),this.request=Ss.defaults(n),this.graphql=Vo(this.request).defaults(n),this.log=Object.assign({debug:()=>{},info:()=>{},warn:console.warn.bind(console),error:console.error.bind(console)},e.log),this.hook=r,e.authStrategy){const{authStrategy:a,...o}=e,m=a(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:o},e.auth));r.wrap("request",m.hook),this.auth=m}else if(!e.auth)this.auth=async()=>({type:"unauthenticated"});else{const a=Vl(e.auth);r.wrap("request",a.hook),this.auth=a}this.constructor.plugins.forEach(a=>{Object.assign(this,a(this,e))})}static defaults(e){return class extends this{constructor(...n){const i=n[0]||{};if(typeof e=="function"){super(e(i));return}super(Object.assign({},e,i,i.userAgent&&e.userAgent?{userAgent:`${i.userAgent} ${e.userAgent}`}:null))}}}static plugin(...e){var r;const n=this.plugins;return r=class extends this{},r.plugins=n.concat(e.filter(a=>!n.includes(a))),r}}Ts.VERSION=jo,Ts.plugins=[];const jl="1.0.3";function zo(t){t.hook.wrap("request",(e,r)=>{t.log.debug("request",r);const n=Date.now(),i=t.request.endpoint.parse(r),a=i.url.replace(r.baseUrl,"");return e(r).then(o=>(t.log.info(`${i.method} ${a} - ${o.status} in ${Date.now()-n}ms`),o)).catch(o=>{throw t.log.info(`${i.method} ${a} - ${o.status} in ${Date.now()-n}ms`),o})})}zo.VERSION=jl;const zl="2.13.2";function Ql(t){if(!("total_count"in t.data&&!("url"in t.data)))return t;const r=t.data.incomplete_results,n=t.data.repository_selection,i=t.data.total_count;delete t.data.incomplete_results,delete t.data.repository_selection,delete t.data.total_count;const a=Object.keys(t.data)[0],o=t.data[a];return t.data=o,typeof r!="undefined"&&(t.data.incomplete_results=r),typeof n!="undefined"&&(t.data.repository_selection=n),t.data.total_count=i,t}function wa(t,e,r){const n=typeof e=="function"?e.endpoint(r):t.request.endpoint(e,r),i=typeof e=="function"?e:t.request,a=n.method,o=n.headers;let m=n.url;return{[Symbol.asyncIterator]:()=>({async next(){if(!m)return{done:!0};const E=await i({method:a,url:m,headers:o}),k=Ql(E);return m=((k.headers.link||"").match(/<([^>]+)>;\s*rel="next"/)||[])[1],{value:k}}})}}function Qo(t,e,r,n){return typeof r=="function"&&(n=r,r=void 0),Wo(t,[],wa(t,e,r)[Symbol.asyncIterator](),n)}function Wo(t,e,r,n){return r.next().then(i=>{if(i.done)return e;let a=!1;function o(){a=!0}return e=e.concat(n?n(i.value,o):i.value.data),a?e:Wo(t,e,r,n)})}const gd=Object.assign(Qo,{iterator:wa}),Wl=null;function vd(t){return typeof t=="string"?Wl.includes(t):!1}function Ko(t){return{paginate:Object.assign(Qo.bind(null,t),{iterator:wa.bind(null,t)})}}Ko.VERSION=zl;const Kl={actions:{addSelectedRepoToOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],cancelWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/cancel"],createOrUpdateOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/actions/secrets/{secret_name}"],createRegistrationTokenForOrg:["POST /orgs/{org}/actions/runners/registration-token"],createRegistrationTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/registration-token"],createRemoveTokenForOrg:["POST /orgs/{org}/actions/runners/remove-token"],createRemoveTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/remove-token"],createWorkflowDispatch:["POST /repos/{owner}/{repo}/actions/workflows/{workflow_id}/dispatches"],deleteArtifact:["DELETE /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],deleteOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/actions/secrets/{secret_name}"],deleteSelfHostedRunnerFromOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}"],deleteSelfHostedRunnerFromRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}"],deleteWorkflowRun:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}"],deleteWorkflowRunLogs:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],disableSelectedRepositoryGithubActionsOrganization:["DELETE /orgs/{org}/actions/permissions/repositories/{repository_id}"],disableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/disable"],downloadArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}/{archive_format}"],downloadJobLogsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}/logs"],downloadWorkflowRunLogs:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],enableSelectedRepositoryGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories/{repository_id}"],enableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/enable"],getAllowedActionsOrganization:["GET /orgs/{org}/actions/permissions/selected-actions"],getAllowedActionsRepository:["GET /repos/{owner}/{repo}/actions/permissions/selected-actions"],getArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],getGithubActionsPermissionsOrganization:["GET /orgs/{org}/actions/permissions"],getGithubActionsPermissionsRepository:["GET /repos/{owner}/{repo}/actions/permissions"],getJobForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}"],getOrgPublicKey:["GET /orgs/{org}/actions/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}"],getRepoPermissions:["GET /repos/{owner}/{repo}/actions/permissions",{},{renamed:["actions","getGithubActionsPermissionsRepository"]}],getRepoPublicKey:["GET /repos/{owner}/{repo}/actions/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/actions/secrets/{secret_name}"],getSelfHostedRunnerForOrg:["GET /orgs/{org}/actions/runners/{runner_id}"],getSelfHostedRunnerForRepo:["GET /repos/{owner}/{repo}/actions/runners/{runner_id}"],getWorkflow:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}"],getWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}"],getWorkflowRunUsage:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/timing"],getWorkflowUsage:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/timing"],listArtifactsForRepo:["GET /repos/{owner}/{repo}/actions/artifacts"],listJobsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/jobs"],listOrgSecrets:["GET /orgs/{org}/actions/secrets"],listRepoSecrets:["GET /repos/{owner}/{repo}/actions/secrets"],listRepoWorkflows:["GET /repos/{owner}/{repo}/actions/workflows"],listRunnerApplicationsForOrg:["GET /orgs/{org}/actions/runners/downloads"],listRunnerApplicationsForRepo:["GET /repos/{owner}/{repo}/actions/runners/downloads"],listSelectedReposForOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}/repositories"],listSelectedRepositoriesEnabledGithubActionsOrganization:["GET /orgs/{org}/actions/permissions/repositories"],listSelfHostedRunnersForOrg:["GET /orgs/{org}/actions/runners"],listSelfHostedRunnersForRepo:["GET /repos/{owner}/{repo}/actions/runners"],listWorkflowRunArtifacts:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/artifacts"],listWorkflowRuns:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/runs"],listWorkflowRunsForRepo:["GET /repos/{owner}/{repo}/actions/runs"],reRunWorkflow:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],setAllowedActionsOrganization:["PUT /orgs/{org}/actions/permissions/selected-actions"],setAllowedActionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions/selected-actions"],setGithubActionsPermissionsOrganization:["PUT /orgs/{org}/actions/permissions"],setGithubActionsPermissionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories"],setSelectedRepositoriesEnabledGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories"]},activity:{checkRepoIsStarredByAuthenticatedUser:["GET /user/starred/{owner}/{repo}"],deleteRepoSubscription:["DELETE /repos/{owner}/{repo}/subscription"],deleteThreadSubscription:["DELETE /notifications/threads/{thread_id}/subscription"],getFeeds:["GET /feeds"],getRepoSubscription:["GET /repos/{owner}/{repo}/subscription"],getThread:["GET /notifications/threads/{thread_id}"],getThreadSubscriptionForAuthenticatedUser:["GET /notifications/threads/{thread_id}/subscription"],listEventsForAuthenticatedUser:["GET /users/{username}/events"],listNotificationsForAuthenticatedUser:["GET /notifications"],listOrgEventsForAuthenticatedUser:["GET /users/{username}/events/orgs/{org}"],listPublicEvents:["GET /events"],listPublicEventsForRepoNetwork:["GET /networks/{owner}/{repo}/events"],listPublicEventsForUser:["GET /users/{username}/events/public"],listPublicOrgEvents:["GET /orgs/{org}/events"],listReceivedEventsForUser:["GET /users/{username}/received_events"],listReceivedPublicEventsForUser:["GET /users/{username}/received_events/public"],listRepoEvents:["GET /repos/{owner}/{repo}/events"],listRepoNotificationsForAuthenticatedUser:["GET /repos/{owner}/{repo}/notifications"],listReposStarredByAuthenticatedUser:["GET /user/starred"],listReposStarredByUser:["GET /users/{username}/starred"],listReposWatchedByUser:["GET /users/{username}/subscriptions"],listStargazersForRepo:["GET /repos/{owner}/{repo}/stargazers"],listWatchedReposForAuthenticatedUser:["GET /user/subscriptions"],listWatchersForRepo:["GET /repos/{owner}/{repo}/subscribers"],markNotificationsAsRead:["PUT /notifications"],markRepoNotificationsAsRead:["PUT /repos/{owner}/{repo}/notifications"],markThreadAsRead:["PATCH /notifications/threads/{thread_id}"],setRepoSubscription:["PUT /repos/{owner}/{repo}/subscription"],setThreadSubscription:["PUT /notifications/threads/{thread_id}/subscription"],starRepoForAuthenticatedUser:["PUT /user/starred/{owner}/{repo}"],unstarRepoForAuthenticatedUser:["DELETE /user/starred/{owner}/{repo}"]},apps:{addRepoToInstallation:["PUT /user/installations/{installation_id}/repositories/{repository_id}"],checkToken:["POST /applications/{client_id}/token"],createContentAttachment:["POST /content_references/{content_reference_id}/attachments",{mediaType:{previews:["corsair"]}}],createFromManifest:["POST /app-manifests/{code}/conversions"],createInstallationAccessToken:["POST /app/installations/{installation_id}/access_tokens"],deleteAuthorization:["DELETE /applications/{client_id}/grant"],deleteInstallation:["DELETE /app/installations/{installation_id}"],deleteToken:["DELETE /applications/{client_id}/token"],getAuthenticated:["GET /app"],getBySlug:["GET /apps/{app_slug}"],getInstallation:["GET /app/installations/{installation_id}"],getOrgInstallation:["GET /orgs/{org}/installation"],getRepoInstallation:["GET /repos/{owner}/{repo}/installation"],getSubscriptionPlanForAccount:["GET /marketplace_listing/accounts/{account_id}"],getSubscriptionPlanForAccountStubbed:["GET /marketplace_listing/stubbed/accounts/{account_id}"],getUserInstallation:["GET /users/{username}/installation"],getWebhookConfigForApp:["GET /app/hook/config"],listAccountsForPlan:["GET /marketplace_listing/plans/{plan_id}/accounts"],listAccountsForPlanStubbed:["GET /marketplace_listing/stubbed/plans/{plan_id}/accounts"],listInstallationReposForAuthenticatedUser:["GET /user/installations/{installation_id}/repositories"],listInstallations:["GET /app/installations"],listInstallationsForAuthenticatedUser:["GET /user/installations"],listPlans:["GET /marketplace_listing/plans"],listPlansStubbed:["GET /marketplace_listing/stubbed/plans"],listReposAccessibleToInstallation:["GET /installation/repositories"],listSubscriptionsForAuthenticatedUser:["GET /user/marketplace_purchases"],listSubscriptionsForAuthenticatedUserStubbed:["GET /user/marketplace_purchases/stubbed"],removeRepoFromInstallation:["DELETE /user/installations/{installation_id}/repositories/{repository_id}"],resetToken:["PATCH /applications/{client_id}/token"],revokeInstallationAccessToken:["DELETE /installation/token"],scopeToken:["POST /applications/{client_id}/token/scoped"],suspendInstallation:["PUT /app/installations/{installation_id}/suspended"],unsuspendInstallation:["DELETE /app/installations/{installation_id}/suspended"],updateWebhookConfigForApp:["PATCH /app/hook/config"]},billing:{getGithubActionsBillingOrg:["GET /orgs/{org}/settings/billing/actions"],getGithubActionsBillingUser:["GET /users/{username}/settings/billing/actions"],getGithubPackagesBillingOrg:["GET /orgs/{org}/settings/billing/packages"],getGithubPackagesBillingUser:["GET /users/{username}/settings/billing/packages"],getSharedStorageBillingOrg:["GET /orgs/{org}/settings/billing/shared-storage"],getSharedStorageBillingUser:["GET /users/{username}/settings/billing/shared-storage"]},checks:{create:["POST /repos/{owner}/{repo}/check-runs"],createSuite:["POST /repos/{owner}/{repo}/check-suites"],get:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}"],getSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}"],listAnnotations:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}/annotations"],listForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-runs"],listForSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}/check-runs"],listSuitesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-suites"],rerequestSuite:["POST /repos/{owner}/{repo}/check-suites/{check_suite_id}/rerequest"],setSuitesPreferences:["PATCH /repos/{owner}/{repo}/check-suites/preferences"],update:["PATCH /repos/{owner}/{repo}/check-runs/{check_run_id}"]},codeScanning:{deleteAnalysis:["DELETE /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}{?confirm_delete}"],getAlert:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}",{},{renamedParameters:{alert_id:"alert_number"}}],getAnalysis:["GET /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}"],getSarif:["GET /repos/{owner}/{repo}/code-scanning/sarifs/{sarif_id}"],listAlertsForRepo:["GET /repos/{owner}/{repo}/code-scanning/alerts"],listAlertsInstances:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances"],listRecentAnalyses:["GET /repos/{owner}/{repo}/code-scanning/analyses"],updateAlert:["PATCH /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}"],uploadSarif:["POST /repos/{owner}/{repo}/code-scanning/sarifs"]},codesOfConduct:{getAllCodesOfConduct:["GET /codes_of_conduct",{mediaType:{previews:["scarlet-witch"]}}],getConductCode:["GET /codes_of_conduct/{key}",{mediaType:{previews:["scarlet-witch"]}}],getForRepo:["GET /repos/{owner}/{repo}/community/code_of_conduct",{mediaType:{previews:["scarlet-witch"]}}]},emojis:{get:["GET /emojis"]},enterpriseAdmin:{disableSelectedOrganizationGithubActionsEnterprise:["DELETE /enterprises/{enterprise}/actions/permissions/organizations/{org_id}"],enableSelectedOrganizationGithubActionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions/organizations/{org_id}"],getAllowedActionsEnterprise:["GET /enterprises/{enterprise}/actions/permissions/selected-actions"],getGithubActionsPermissionsEnterprise:["GET /enterprises/{enterprise}/actions/permissions"],listSelectedOrganizationsEnabledGithubActionsEnterprise:["GET /enterprises/{enterprise}/actions/permissions/organizations"],setAllowedActionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions/selected-actions"],setGithubActionsPermissionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions"],setSelectedOrganizationsEnabledGithubActionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions/organizations"]},gists:{checkIsStarred:["GET /gists/{gist_id}/star"],create:["POST /gists"],createComment:["POST /gists/{gist_id}/comments"],delete:["DELETE /gists/{gist_id}"],deleteComment:["DELETE /gists/{gist_id}/comments/{comment_id}"],fork:["POST /gists/{gist_id}/forks"],get:["GET /gists/{gist_id}"],getComment:["GET /gists/{gist_id}/comments/{comment_id}"],getRevision:["GET /gists/{gist_id}/{sha}"],list:["GET /gists"],listComments:["GET /gists/{gist_id}/comments"],listCommits:["GET /gists/{gist_id}/commits"],listForUser:["GET /users/{username}/gists"],listForks:["GET /gists/{gist_id}/forks"],listPublic:["GET /gists/public"],listStarred:["GET /gists/starred"],star:["PUT /gists/{gist_id}/star"],unstar:["DELETE /gists/{gist_id}/star"],update:["PATCH /gists/{gist_id}"],updateComment:["PATCH /gists/{gist_id}/comments/{comment_id}"]},git:{createBlob:["POST /repos/{owner}/{repo}/git/blobs"],createCommit:["POST /repos/{owner}/{repo}/git/commits"],createRef:["POST /repos/{owner}/{repo}/git/refs"],createTag:["POST /repos/{owner}/{repo}/git/tags"],createTree:["POST /repos/{owner}/{repo}/git/trees"],deleteRef:["DELETE /repos/{owner}/{repo}/git/refs/{ref}"],getBlob:["GET /repos/{owner}/{repo}/git/blobs/{file_sha}"],getCommit:["GET /repos/{owner}/{repo}/git/commits/{commit_sha}"],getRef:["GET /repos/{owner}/{repo}/git/ref/{ref}"],getTag:["GET /repos/{owner}/{repo}/git/tags/{tag_sha}"],getTree:["GET /repos/{owner}/{repo}/git/trees/{tree_sha}"],listMatchingRefs:["GET /repos/{owner}/{repo}/git/matching-refs/{ref}"],updateRef:["PATCH /repos/{owner}/{repo}/git/refs/{ref}"]},gitignore:{getAllTemplates:["GET /gitignore/templates"],getTemplate:["GET /gitignore/templates/{name}"]},interactions:{getRestrictionsForAuthenticatedUser:["GET /user/interaction-limits"],getRestrictionsForOrg:["GET /orgs/{org}/interaction-limits"],getRestrictionsForRepo:["GET /repos/{owner}/{repo}/interaction-limits"],getRestrictionsForYourPublicRepos:["GET /user/interaction-limits",{},{renamed:["interactions","getRestrictionsForAuthenticatedUser"]}],removeRestrictionsForAuthenticatedUser:["DELETE /user/interaction-limits"],removeRestrictionsForOrg:["DELETE /orgs/{org}/interaction-limits"],removeRestrictionsForRepo:["DELETE /repos/{owner}/{repo}/interaction-limits"],removeRestrictionsForYourPublicRepos:["DELETE /user/interaction-limits",{},{renamed:["interactions","removeRestrictionsForAuthenticatedUser"]}],setRestrictionsForAuthenticatedUser:["PUT /user/interaction-limits"],setRestrictionsForOrg:["PUT /orgs/{org}/interaction-limits"],setRestrictionsForRepo:["PUT /repos/{owner}/{repo}/interaction-limits"],setRestrictionsForYourPublicRepos:["PUT /user/interaction-limits",{},{renamed:["interactions","setRestrictionsForAuthenticatedUser"]}]},issues:{addAssignees:["POST /repos/{owner}/{repo}/issues/{issue_number}/assignees"],addLabels:["POST /repos/{owner}/{repo}/issues/{issue_number}/labels"],checkUserCanBeAssigned:["GET /repos/{owner}/{repo}/assignees/{assignee}"],create:["POST /repos/{owner}/{repo}/issues"],createComment:["POST /repos/{owner}/{repo}/issues/{issue_number}/comments"],createLabel:["POST /repos/{owner}/{repo}/labels"],createMilestone:["POST /repos/{owner}/{repo}/milestones"],deleteComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}"],deleteLabel:["DELETE /repos/{owner}/{repo}/labels/{name}"],deleteMilestone:["DELETE /repos/{owner}/{repo}/milestones/{milestone_number}"],get:["GET /repos/{owner}/{repo}/issues/{issue_number}"],getComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}"],getEvent:["GET /repos/{owner}/{repo}/issues/events/{event_id}"],getLabel:["GET /repos/{owner}/{repo}/labels/{name}"],getMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}"],list:["GET /issues"],listAssignees:["GET /repos/{owner}/{repo}/assignees"],listComments:["GET /repos/{owner}/{repo}/issues/{issue_number}/comments"],listCommentsForRepo:["GET /repos/{owner}/{repo}/issues/comments"],listEvents:["GET /repos/{owner}/{repo}/issues/{issue_number}/events"],listEventsForRepo:["GET /repos/{owner}/{repo}/issues/events"],listEventsForTimeline:["GET /repos/{owner}/{repo}/issues/{issue_number}/timeline",{mediaType:{previews:["mockingbird"]}}],listForAuthenticatedUser:["GET /user/issues"],listForOrg:["GET /orgs/{org}/issues"],listForRepo:["GET /repos/{owner}/{repo}/issues"],listLabelsForMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}/labels"],listLabelsForRepo:["GET /repos/{owner}/{repo}/labels"],listLabelsOnIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/labels"],listMilestones:["GET /repos/{owner}/{repo}/milestones"],lock:["PUT /repos/{owner}/{repo}/issues/{issue_number}/lock"],removeAllLabels:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels"],removeAssignees:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/assignees"],removeLabel:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels/{name}"],setLabels:["PUT /repos/{owner}/{repo}/issues/{issue_number}/labels"],unlock:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/lock"],update:["PATCH /repos/{owner}/{repo}/issues/{issue_number}"],updateComment:["PATCH /repos/{owner}/{repo}/issues/comments/{comment_id}"],updateLabel:["PATCH /repos/{owner}/{repo}/labels/{name}"],updateMilestone:["PATCH /repos/{owner}/{repo}/milestones/{milestone_number}"]},licenses:{get:["GET /licenses/{license}"],getAllCommonlyUsed:["GET /licenses"],getForRepo:["GET /repos/{owner}/{repo}/license"]},markdown:{render:["POST /markdown"],renderRaw:["POST /markdown/raw",{headers:{"content-type":"text/plain; charset=utf-8"}}]},meta:{get:["GET /meta"],getOctocat:["GET /octocat"],getZen:["GET /zen"],root:["GET /"]},migrations:{cancelImport:["DELETE /repos/{owner}/{repo}/import"],deleteArchiveForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],deleteArchiveForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],downloadArchiveForOrg:["GET /orgs/{org}/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],getArchiveForAuthenticatedUser:["GET /user/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],getCommitAuthors:["GET /repos/{owner}/{repo}/import/authors"],getImportStatus:["GET /repos/{owner}/{repo}/import"],getLargeFiles:["GET /repos/{owner}/{repo}/import/large_files"],getStatusForAuthenticatedUser:["GET /user/migrations/{migration_id}",{mediaType:{previews:["wyandotte"]}}],getStatusForOrg:["GET /orgs/{org}/migrations/{migration_id}",{mediaType:{previews:["wyandotte"]}}],listForAuthenticatedUser:["GET /user/migrations",{mediaType:{previews:["wyandotte"]}}],listForOrg:["GET /orgs/{org}/migrations",{mediaType:{previews:["wyandotte"]}}],listReposForOrg:["GET /orgs/{org}/migrations/{migration_id}/repositories",{mediaType:{previews:["wyandotte"]}}],listReposForUser:["GET /user/migrations/{migration_id}/repositories",{mediaType:{previews:["wyandotte"]}}],mapCommitAuthor:["PATCH /repos/{owner}/{repo}/import/authors/{author_id}"],setLfsPreference:["PATCH /repos/{owner}/{repo}/import/lfs"],startForAuthenticatedUser:["POST /user/migrations"],startForOrg:["POST /orgs/{org}/migrations"],startImport:["PUT /repos/{owner}/{repo}/import"],unlockRepoForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/repos/{repo_name}/lock",{mediaType:{previews:["wyandotte"]}}],unlockRepoForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/repos/{repo_name}/lock",{mediaType:{previews:["wyandotte"]}}],updateImport:["PATCH /repos/{owner}/{repo}/import"]},orgs:{blockUser:["PUT /orgs/{org}/blocks/{username}"],cancelInvitation:["DELETE /orgs/{org}/invitations/{invitation_id}"],checkBlockedUser:["GET /orgs/{org}/blocks/{username}"],checkMembershipForUser:["GET /orgs/{org}/members/{username}"],checkPublicMembershipForUser:["GET /orgs/{org}/public_members/{username}"],convertMemberToOutsideCollaborator:["PUT /orgs/{org}/outside_collaborators/{username}"],createInvitation:["POST /orgs/{org}/invitations"],createWebhook:["POST /orgs/{org}/hooks"],deleteWebhook:["DELETE /orgs/{org}/hooks/{hook_id}"],get:["GET /orgs/{org}"],getMembershipForAuthenticatedUser:["GET /user/memberships/orgs/{org}"],getMembershipForUser:["GET /orgs/{org}/memberships/{username}"],getWebhook:["GET /orgs/{org}/hooks/{hook_id}"],getWebhookConfigForOrg:["GET /orgs/{org}/hooks/{hook_id}/config"],list:["GET /organizations"],listAppInstallations:["GET /orgs/{org}/installations"],listBlockedUsers:["GET /orgs/{org}/blocks"],listFailedInvitations:["GET /orgs/{org}/failed_invitations"],listForAuthenticatedUser:["GET /user/orgs"],listForUser:["GET /users/{username}/orgs"],listInvitationTeams:["GET /orgs/{org}/invitations/{invitation_id}/teams"],listMembers:["GET /orgs/{org}/members"],listMembershipsForAuthenticatedUser:["GET /user/memberships/orgs"],listOutsideCollaborators:["GET /orgs/{org}/outside_collaborators"],listPendingInvitations:["GET /orgs/{org}/invitations"],listPublicMembers:["GET /orgs/{org}/public_members"],listWebhooks:["GET /orgs/{org}/hooks"],pingWebhook:["POST /orgs/{org}/hooks/{hook_id}/pings"],removeMember:["DELETE /orgs/{org}/members/{username}"],removeMembershipForUser:["DELETE /orgs/{org}/memberships/{username}"],removeOutsideCollaborator:["DELETE /orgs/{org}/outside_collaborators/{username}"],removePublicMembershipForAuthenticatedUser:["DELETE /orgs/{org}/public_members/{username}"],setMembershipForUser:["PUT /orgs/{org}/memberships/{username}"],setPublicMembershipForAuthenticatedUser:["PUT /orgs/{org}/public_members/{username}"],unblockUser:["DELETE /orgs/{org}/blocks/{username}"],update:["PATCH /orgs/{org}"],updateMembershipForAuthenticatedUser:["PATCH /user/memberships/orgs/{org}"],updateWebhook:["PATCH /orgs/{org}/hooks/{hook_id}"],updateWebhookConfigForOrg:["PATCH /orgs/{org}/hooks/{hook_id}/config"]},packages:{deletePackageForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}"],deletePackageForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}"],deletePackageVersionForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],deletePackageVersionForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getAllPackageVersionsForAPackageOwnedByAnOrg:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForAPackageOwnedByTheAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForPackageOwnedByUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions"],getPackageForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}"],getPackageForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}"],getPackageForUser:["GET /users/{username}/packages/{package_type}/{package_name}"],getPackageVersionForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}"],restorePackageForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/restore"],restorePackageForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/restore"],restorePackageVersionForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"],restorePackageVersionForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"]},projects:{addCollaborator:["PUT /projects/{project_id}/collaborators/{username}",{mediaType:{previews:["inertia"]}}],createCard:["POST /projects/columns/{column_id}/cards",{mediaType:{previews:["inertia"]}}],createColumn:["POST /projects/{project_id}/columns",{mediaType:{previews:["inertia"]}}],createForAuthenticatedUser:["POST /user/projects",{mediaType:{previews:["inertia"]}}],createForOrg:["POST /orgs/{org}/projects",{mediaType:{previews:["inertia"]}}],createForRepo:["POST /repos/{owner}/{repo}/projects",{mediaType:{previews:["inertia"]}}],delete:["DELETE /projects/{project_id}",{mediaType:{previews:["inertia"]}}],deleteCard:["DELETE /projects/columns/cards/{card_id}",{mediaType:{previews:["inertia"]}}],deleteColumn:["DELETE /projects/columns/{column_id}",{mediaType:{previews:["inertia"]}}],get:["GET /projects/{project_id}",{mediaType:{previews:["inertia"]}}],getCard:["GET /projects/columns/cards/{card_id}",{mediaType:{previews:["inertia"]}}],getColumn:["GET /projects/columns/{column_id}",{mediaType:{previews:["inertia"]}}],getPermissionForUser:["GET /projects/{project_id}/collaborators/{username}/permission",{mediaType:{previews:["inertia"]}}],listCards:["GET /projects/columns/{column_id}/cards",{mediaType:{previews:["inertia"]}}],listCollaborators:["GET /projects/{project_id}/collaborators",{mediaType:{previews:["inertia"]}}],listColumns:["GET /projects/{project_id}/columns",{mediaType:{previews:["inertia"]}}],listForOrg:["GET /orgs/{org}/projects",{mediaType:{previews:["inertia"]}}],listForRepo:["GET /repos/{owner}/{repo}/projects",{mediaType:{previews:["inertia"]}}],listForUser:["GET /users/{username}/projects",{mediaType:{previews:["inertia"]}}],moveCard:["POST /projects/columns/cards/{card_id}/moves",{mediaType:{previews:["inertia"]}}],moveColumn:["POST /projects/columns/{column_id}/moves",{mediaType:{previews:["inertia"]}}],removeCollaborator:["DELETE /projects/{project_id}/collaborators/{username}",{mediaType:{previews:["inertia"]}}],update:["PATCH /projects/{project_id}",{mediaType:{previews:["inertia"]}}],updateCard:["PATCH /projects/columns/cards/{card_id}",{mediaType:{previews:["inertia"]}}],updateColumn:["PATCH /projects/columns/{column_id}",{mediaType:{previews:["inertia"]}}]},pulls:{checkIfMerged:["GET /repos/{owner}/{repo}/pulls/{pull_number}/merge"],create:["POST /repos/{owner}/{repo}/pulls"],createReplyForReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments/{comment_id}/replies"],createReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],createReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments"],deletePendingReview:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],deleteReviewComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}"],dismissReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/dismissals"],get:["GET /repos/{owner}/{repo}/pulls/{pull_number}"],getReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],getReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}"],list:["GET /repos/{owner}/{repo}/pulls"],listCommentsForReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/comments"],listCommits:["GET /repos/{owner}/{repo}/pulls/{pull_number}/commits"],listFiles:["GET /repos/{owner}/{repo}/pulls/{pull_number}/files"],listRequestedReviewers:["GET /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],listReviewComments:["GET /repos/{owner}/{repo}/pulls/{pull_number}/comments"],listReviewCommentsForRepo:["GET /repos/{owner}/{repo}/pulls/comments"],listReviews:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],merge:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/merge"],removeRequestedReviewers:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],requestReviewers:["POST /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],submitReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/events"],update:["PATCH /repos/{owner}/{repo}/pulls/{pull_number}"],updateBranch:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/update-branch",{mediaType:{previews:["lydian"]}}],updateReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],updateReviewComment:["PATCH /repos/{owner}/{repo}/pulls/comments/{comment_id}"]},rateLimit:{get:["GET /rate_limit"]},reactions:{createForCommitComment:["POST /repos/{owner}/{repo}/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForIssue:["POST /repos/{owner}/{repo}/issues/{issue_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForIssueComment:["POST /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForPullRequestReviewComment:["POST /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForTeamDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForTeamDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],deleteForCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForIssue:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForIssueComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForPullRequestComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForTeamDiscussion:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForTeamDiscussionComment:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteLegacy:["DELETE /reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}},{deprecated:"octokit.reactions.deleteLegacy() is deprecated, see https://docs.github.com/v3/reactions/#delete-a-reaction-legacy"}],listForCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForIssueComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForPullRequestReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForTeamDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForTeamDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}]},repos:{acceptInvitation:["PATCH /user/repository_invitations/{invitation_id}"],addAppAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],addCollaborator:["PUT /repos/{owner}/{repo}/collaborators/{username}"],addStatusCheckContexts:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],addTeamAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],addUserAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],checkCollaborator:["GET /repos/{owner}/{repo}/collaborators/{username}"],checkVulnerabilityAlerts:["GET /repos/{owner}/{repo}/vulnerability-alerts",{mediaType:{previews:["dorian"]}}],compareCommits:["GET /repos/{owner}/{repo}/compare/{base}...{head}"],createCommitComment:["POST /repos/{owner}/{repo}/commits/{commit_sha}/comments"],createCommitSignatureProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures",{mediaType:{previews:["zzzax"]}}],createCommitStatus:["POST /repos/{owner}/{repo}/statuses/{sha}"],createDeployKey:["POST /repos/{owner}/{repo}/keys"],createDeployment:["POST /repos/{owner}/{repo}/deployments"],createDeploymentStatus:["POST /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],createDispatchEvent:["POST /repos/{owner}/{repo}/dispatches"],createForAuthenticatedUser:["POST /user/repos"],createFork:["POST /repos/{owner}/{repo}/forks"],createInOrg:["POST /orgs/{org}/repos"],createOrUpdateFileContents:["PUT /repos/{owner}/{repo}/contents/{path}"],createPagesSite:["POST /repos/{owner}/{repo}/pages",{mediaType:{previews:["switcheroo"]}}],createRelease:["POST /repos/{owner}/{repo}/releases"],createUsingTemplate:["POST /repos/{template_owner}/{template_repo}/generate",{mediaType:{previews:["baptiste"]}}],createWebhook:["POST /repos/{owner}/{repo}/hooks"],declineInvitation:["DELETE /user/repository_invitations/{invitation_id}"],delete:["DELETE /repos/{owner}/{repo}"],deleteAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],deleteAdminBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],deleteBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection"],deleteCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}"],deleteCommitSignatureProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures",{mediaType:{previews:["zzzax"]}}],deleteDeployKey:["DELETE /repos/{owner}/{repo}/keys/{key_id}"],deleteDeployment:["DELETE /repos/{owner}/{repo}/deployments/{deployment_id}"],deleteFile:["DELETE /repos/{owner}/{repo}/contents/{path}"],deleteInvitation:["DELETE /repos/{owner}/{repo}/invitations/{invitation_id}"],deletePagesSite:["DELETE /repos/{owner}/{repo}/pages",{mediaType:{previews:["switcheroo"]}}],deletePullRequestReviewProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],deleteRelease:["DELETE /repos/{owner}/{repo}/releases/{release_id}"],deleteReleaseAsset:["DELETE /repos/{owner}/{repo}/releases/assets/{asset_id}"],deleteWebhook:["DELETE /repos/{owner}/{repo}/hooks/{hook_id}"],disableAutomatedSecurityFixes:["DELETE /repos/{owner}/{repo}/automated-security-fixes",{mediaType:{previews:["london"]}}],disableVulnerabilityAlerts:["DELETE /repos/{owner}/{repo}/vulnerability-alerts",{mediaType:{previews:["dorian"]}}],downloadArchive:["GET /repos/{owner}/{repo}/zipball/{ref}",{},{renamed:["repos","downloadZipballArchive"]}],downloadTarballArchive:["GET /repos/{owner}/{repo}/tarball/{ref}"],downloadZipballArchive:["GET /repos/{owner}/{repo}/zipball/{ref}"],enableAutomatedSecurityFixes:["PUT /repos/{owner}/{repo}/automated-security-fixes",{mediaType:{previews:["london"]}}],enableVulnerabilityAlerts:["PUT /repos/{owner}/{repo}/vulnerability-alerts",{mediaType:{previews:["dorian"]}}],get:["GET /repos/{owner}/{repo}"],getAccessRestrictions:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],getAdminBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],getAllStatusCheckContexts:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts"],getAllTopics:["GET /repos/{owner}/{repo}/topics",{mediaType:{previews:["mercy"]}}],getAppsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps"],getBranch:["GET /repos/{owner}/{repo}/branches/{branch}"],getBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection"],getClones:["GET /repos/{owner}/{repo}/traffic/clones"],getCodeFrequencyStats:["GET /repos/{owner}/{repo}/stats/code_frequency"],getCollaboratorPermissionLevel:["GET /repos/{owner}/{repo}/collaborators/{username}/permission"],getCombinedStatusForRef:["GET /repos/{owner}/{repo}/commits/{ref}/status"],getCommit:["GET /repos/{owner}/{repo}/commits/{ref}"],getCommitActivityStats:["GET /repos/{owner}/{repo}/stats/commit_activity"],getCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}"],getCommitSignatureProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures",{mediaType:{previews:["zzzax"]}}],getCommunityProfileMetrics:["GET /repos/{owner}/{repo}/community/profile"],getContent:["GET /repos/{owner}/{repo}/contents/{path}"],getContributorsStats:["GET /repos/{owner}/{repo}/stats/contributors"],getDeployKey:["GET /repos/{owner}/{repo}/keys/{key_id}"],getDeployment:["GET /repos/{owner}/{repo}/deployments/{deployment_id}"],getDeploymentStatus:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses/{status_id}"],getLatestPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/latest"],getLatestRelease:["GET /repos/{owner}/{repo}/releases/latest"],getPages:["GET /repos/{owner}/{repo}/pages"],getPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/{build_id}"],getParticipationStats:["GET /repos/{owner}/{repo}/stats/participation"],getPullRequestReviewProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],getPunchCardStats:["GET /repos/{owner}/{repo}/stats/punch_card"],getReadme:["GET /repos/{owner}/{repo}/readme"],getRelease:["GET /repos/{owner}/{repo}/releases/{release_id}"],getReleaseAsset:["GET /repos/{owner}/{repo}/releases/assets/{asset_id}"],getReleaseByTag:["GET /repos/{owner}/{repo}/releases/tags/{tag}"],getStatusChecksProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],getTeamsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams"],getTopPaths:["GET /repos/{owner}/{repo}/traffic/popular/paths"],getTopReferrers:["GET /repos/{owner}/{repo}/traffic/popular/referrers"],getUsersWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users"],getViews:["GET /repos/{owner}/{repo}/traffic/views"],getWebhook:["GET /repos/{owner}/{repo}/hooks/{hook_id}"],getWebhookConfigForRepo:["GET /repos/{owner}/{repo}/hooks/{hook_id}/config"],listBranches:["GET /repos/{owner}/{repo}/branches"],listBranchesForHeadCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/branches-where-head",{mediaType:{previews:["groot"]}}],listCollaborators:["GET /repos/{owner}/{repo}/collaborators"],listCommentsForCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/comments"],listCommitCommentsForRepo:["GET /repos/{owner}/{repo}/comments"],listCommitStatusesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/statuses"],listCommits:["GET /repos/{owner}/{repo}/commits"],listContributors:["GET /repos/{owner}/{repo}/contributors"],listDeployKeys:["GET /repos/{owner}/{repo}/keys"],listDeploymentStatuses:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],listDeployments:["GET /repos/{owner}/{repo}/deployments"],listForAuthenticatedUser:["GET /user/repos"],listForOrg:["GET /orgs/{org}/repos"],listForUser:["GET /users/{username}/repos"],listForks:["GET /repos/{owner}/{repo}/forks"],listInvitations:["GET /repos/{owner}/{repo}/invitations"],listInvitationsForAuthenticatedUser:["GET /user/repository_invitations"],listLanguages:["GET /repos/{owner}/{repo}/languages"],listPagesBuilds:["GET /repos/{owner}/{repo}/pages/builds"],listPublic:["GET /repositories"],listPullRequestsAssociatedWithCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/pulls",{mediaType:{previews:["groot"]}}],listReleaseAssets:["GET /repos/{owner}/{repo}/releases/{release_id}/assets"],listReleases:["GET /repos/{owner}/{repo}/releases"],listTags:["GET /repos/{owner}/{repo}/tags"],listTeams:["GET /repos/{owner}/{repo}/teams"],listWebhooks:["GET /repos/{owner}/{repo}/hooks"],merge:["POST /repos/{owner}/{repo}/merges"],pingWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/pings"],removeAppAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],removeCollaborator:["DELETE /repos/{owner}/{repo}/collaborators/{username}"],removeStatusCheckContexts:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],removeStatusCheckProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],removeTeamAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],removeUserAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],renameBranch:["POST /repos/{owner}/{repo}/branches/{branch}/rename"],replaceAllTopics:["PUT /repos/{owner}/{repo}/topics",{mediaType:{previews:["mercy"]}}],requestPagesBuild:["POST /repos/{owner}/{repo}/pages/builds"],setAdminBranchProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],setAppAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],setStatusCheckContexts:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],setTeamAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],setUserAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],testPushWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/tests"],transfer:["POST /repos/{owner}/{repo}/transfer"],update:["PATCH /repos/{owner}/{repo}"],updateBranchProtection:["PUT /repos/{owner}/{repo}/branches/{branch}/protection"],updateCommitComment:["PATCH /repos/{owner}/{repo}/comments/{comment_id}"],updateInformationAboutPagesSite:["PUT /repos/{owner}/{repo}/pages"],updateInvitation:["PATCH /repos/{owner}/{repo}/invitations/{invitation_id}"],updatePullRequestReviewProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],updateRelease:["PATCH /repos/{owner}/{repo}/releases/{release_id}"],updateReleaseAsset:["PATCH /repos/{owner}/{repo}/releases/assets/{asset_id}"],updateStatusCheckPotection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks",{},{renamed:["repos","updateStatusCheckProtection"]}],updateStatusCheckProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],updateWebhook:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}"],updateWebhookConfigForRepo:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}/config"],uploadReleaseAsset:["POST /repos/{owner}/{repo}/releases/{release_id}/assets{?name,label}",{baseUrl:"https://uploads.github.com"}]},search:{code:["GET /search/code"],commits:["GET /search/commits",{mediaType:{previews:["cloak"]}}],issuesAndPullRequests:["GET /search/issues"],labels:["GET /search/labels"],repos:["GET /search/repositories"],topics:["GET /search/topics",{mediaType:{previews:["mercy"]}}],users:["GET /search/users"]},secretScanning:{getAlert:["GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"],listAlertsForRepo:["GET /repos/{owner}/{repo}/secret-scanning/alerts"],updateAlert:["PATCH /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"]},teams:{addOrUpdateMembershipForUserInOrg:["PUT /orgs/{org}/teams/{team_slug}/memberships/{username}"],addOrUpdateProjectPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/projects/{project_id}",{mediaType:{previews:["inertia"]}}],addOrUpdateRepoPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],checkPermissionsForProjectInOrg:["GET /orgs/{org}/teams/{team_slug}/projects/{project_id}",{mediaType:{previews:["inertia"]}}],checkPermissionsForRepoInOrg:["GET /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],create:["POST /orgs/{org}/teams"],createDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],createDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions"],deleteDiscussionCommentInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],deleteDiscussionInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],deleteInOrg:["DELETE /orgs/{org}/teams/{team_slug}"],getByName:["GET /orgs/{org}/teams/{team_slug}"],getDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],getDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],getMembershipForUserInOrg:["GET /orgs/{org}/teams/{team_slug}/memberships/{username}"],list:["GET /orgs/{org}/teams"],listChildInOrg:["GET /orgs/{org}/teams/{team_slug}/teams"],listDiscussionCommentsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],listDiscussionsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions"],listForAuthenticatedUser:["GET /user/teams"],listMembersInOrg:["GET /orgs/{org}/teams/{team_slug}/members"],listPendingInvitationsInOrg:["GET /orgs/{org}/teams/{team_slug}/invitations"],listProjectsInOrg:["GET /orgs/{org}/teams/{team_slug}/projects",{mediaType:{previews:["inertia"]}}],listReposInOrg:["GET /orgs/{org}/teams/{team_slug}/repos"],removeMembershipForUserInOrg:["DELETE /orgs/{org}/teams/{team_slug}/memberships/{username}"],removeProjectInOrg:["DELETE /orgs/{org}/teams/{team_slug}/projects/{project_id}"],removeRepoInOrg:["DELETE /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],updateDiscussionCommentInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],updateDiscussionInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],updateInOrg:["PATCH /orgs/{org}/teams/{team_slug}"]},users:{addEmailForAuthenticated:["POST /user/emails"],block:["PUT /user/blocks/{username}"],checkBlocked:["GET /user/blocks/{username}"],checkFollowingForUser:["GET /users/{username}/following/{target_user}"],checkPersonIsFollowedByAuthenticated:["GET /user/following/{username}"],createGpgKeyForAuthenticated:["POST /user/gpg_keys"],createPublicSshKeyForAuthenticated:["POST /user/keys"],deleteEmailForAuthenticated:["DELETE /user/emails"],deleteGpgKeyForAuthenticated:["DELETE /user/gpg_keys/{gpg_key_id}"],deletePublicSshKeyForAuthenticated:["DELETE /user/keys/{key_id}"],follow:["PUT /user/following/{username}"],getAuthenticated:["GET /user"],getByUsername:["GET /users/{username}"],getContextForUser:["GET /users/{username}/hovercard"],getGpgKeyForAuthenticated:["GET /user/gpg_keys/{gpg_key_id}"],getPublicSshKeyForAuthenticated:["GET /user/keys/{key_id}"],list:["GET /users"],listBlockedByAuthenticated:["GET /user/blocks"],listEmailsForAuthenticated:["GET /user/emails"],listFollowedByAuthenticated:["GET /user/following"],listFollowersForAuthenticatedUser:["GET /user/followers"],listFollowersForUser:["GET /users/{username}/followers"],listFollowingForUser:["GET /users/{username}/following"],listGpgKeysForAuthenticated:["GET /user/gpg_keys"],listGpgKeysForUser:["GET /users/{username}/gpg_keys"],listPublicEmailsForAuthenticated:["GET /user/public_emails"],listPublicKeysForUser:["GET /users/{username}/keys"],listPublicSshKeysForAuthenticated:["GET /user/keys"],setPrimaryEmailVisibilityForAuthenticated:["PATCH /user/email/visibility"],unblock:["DELETE /user/blocks/{username}"],unfollow:["DELETE /user/following/{username}"],updateAuthenticated:["PATCH /user"]}},Yl="4.12.0";function Yo(t,e){const r={};for(const[n,i]of Object.entries(e))for(const[a,o]of Object.entries(i)){const[m,E,k]=o,[P,U]=m.split(/ /),z=Object.assign({method:P,url:U},E);r[n]||(r[n]={});const le=r[n];if(k){le[a]=zi(t,n,a,z,k);continue}le[a]=t.request.defaults(z)}return r}function zi(t,e,r,n,i){const a=t.request.defaults(n);function o(...m){let E=a.endpoint.merge(...m);if(i.mapToData)return E=Object.assign({},E,{data:E[i.mapToData],[i.mapToData]:void 0}),a(E);if(i.renamed){const[k,P]=i.renamed;t.log.warn(`octokit.${e}.${r}() has been renamed to octokit.${k}.${P}()`)}if(i.deprecated&&t.log.warn(i.deprecated),i.renamedParameters){const k=a.endpoint.merge(...m);for(const[P,U]of Object.entries(i.renamedParameters))P in k&&(t.log.warn(`"${P}" parameter is deprecated for "octokit.${e}.${r}()". Use "${U}" instead`),U in k||(k[U]=k[P]),delete k[P]);return a(k)}return a(...m)}return Object.assign(o,a)}function Qi(t){return Yo(t,Kl)}Qi.VERSION=Yl;const It="18.2.0",Ea=Ts.plugin(zo,Qi,Ko).defaults({userAgent:`octokit-rest.js/${It}`});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Wi=function(t,e){return Wi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Wi(t,e)};function ln(t,e){Wi(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var De=function(){return De=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},De.apply(this,arguments)};function s(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function T(t,e,r,n){var i=arguments.length,a=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,r,n);else for(var m=t.length-1;m>=0;m--)(o=t[m])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a}function d(t,e){return function(r,n){e(r,n,t)}}function v(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function _(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function m(P){try{k(n.next(P))}catch(U){o(U)}}function E(P){try{k(n.throw(P))}catch(U){o(U)}}function k(P){P.done?a(P.value):i(P.value).then(m,E)}k((n=n.apply(t,e||[])).next())})}function c(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function m(k){return function(P){return E([k,P])}}function E(k){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=k[0]&2?i.return:k[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,k[1])).done)return a;switch(i=0,a&&(k=[k[0]&2,a.value]),k[0]){case 0:case 1:a=k;break;case 4:return r.label++,{value:k[1],done:!1};case 5:r.label++,i=k[1],k=[0];continue;case 7:k=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(k[0]===6||k[0]===2)){r=0;continue}if(k[0]===3&&(!a||k[1]>a[0]&&k[1]<a[3])){r.label=k[1];break}if(k[0]===6&&r.label<a[1]){r.label=a[1],a=k;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(k);break}a[2]&&r.ops.pop(),r.trys.pop();continue}k=e.call(t,r)}catch(P){k=[6,P],i=0}finally{n=a=0}if(k[0]&5)throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}}function l(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function h(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function p(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(m){o={error:m}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a}function y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(g(arguments[e]));return t}function f(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var a=arguments[e],o=0,m=a.length;o<m;o++,i++)n[i]=a[o];return n}function b(t){return this instanceof b?(this.v=t,this):new b(t)}function w(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,a=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(z){n[z]&&(i[z]=function(le){return new Promise(function(ce,me){a.push([z,le,ce,me])>1||m(z,le)})})}function m(z,le){try{E(n[z](le))}catch(ce){U(a[0][3],ce)}}function E(z){z.value instanceof b?Promise.resolve(z.value.v).then(k,P):U(a[0][2],z)}function k(z){m("next",z)}function P(z){m("throw",z)}function U(z,le){z(le),a.shift(),a.length&&m(a[0][0],a[0][1])}}function S(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,a){e[i]=t[i]?function(o){return(r=!r)?{value:b(t[i](o)),done:i==="return"}:a?a(o):o}:a}}function R(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof p=="function"?p(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(a){r[a]=t[a]&&function(o){return new Promise(function(m,E){o=t[a](o),i(m,E,o.done,o.value)})}}function i(a,o,m,E){Promise.resolve(E).then(function(k){a({value:k,done:m})},o)}}function A(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function D(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function j(t){return t&&t.__esModule?t:{default:t}}function ee(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function K(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var oe=Je(285),ge="Invariant Violation",ke=Object.setPrototypeOf,Se=ke===void 0?function(t,e){return t.__proto__=e,t}:ke,Pe=function(t){ln(e,t);function e(r){r===void 0&&(r=ge);var n=t.call(this,typeof r=="number"?ge+": "+r+" (see https://github.com/apollographql/invariant-packages)":r)||this;return n.framesToPop=1,n.name=ge,Se(n,e.prototype),n}return e}(Error);function Ce(t,e){if(!t)throw new Pe(e)}function $e(t){return function(){return console[t].apply(console,arguments)}}(function(t){t.warn=$e("warn"),t.error=$e("error")})(Ce||(Ce={}));var Qe={env:{}};if(typeof process=="object")Qe=process;else try{Function("stub","process = stub")(Qe)}catch(t){}var at=null;const tt=null;var $t=Je(5035),lt=Je.n($t),Ie=Object.prototype,qe=Ie.toString,Le=Ie.hasOwnProperty,je=new Map;function Ke(t,e){try{return ot(t,e)}finally{je.clear()}}function ot(t,e){if(t===e)return!0;var r=qe.call(t),n=qe.call(e);if(r!==n)return!1;switch(r){case"[object Array]":if(t.length!==e.length)return!1;case"[object Object]":{if(We(t,e))return!0;var i=Object.keys(t),a=Object.keys(e),o=i.length;if(o!==a.length)return!1;for(var m=0;m<o;++m)if(!Le.call(e,i[m]))return!1;for(var m=0;m<o;++m){var E=i[m];if(!ot(t[E],e[E]))return!1}return!0}case"[object Error]":return t.name===e.name&&t.message===e.message;case"[object Number]":if(t!==t)return e!==e;case"[object Boolean]":case"[object Date]":return+t==+e;case"[object RegExp]":case"[object String]":return t==""+e;case"[object Map]":case"[object Set]":{if(t.size!==e.size)return!1;if(We(t,e))return!0;for(var k=t.entries(),P=r==="[object Map]";;){var U=k.next();if(U.done)break;var z=U.value,le=z[0],ce=z[1];if(!e.has(le)||P&&!ot(ce,e.get(le)))return!1}return!0}}return!1}function We(t,e){var r=je.get(t);if(r){if(r.has(e))return!0}else je.set(t,r=new Set);return r.add(e),!1}const kt=null;function Jt(t){return["StringValue","BooleanValue","EnumValue"].indexOf(t.kind)>-1}function Bt(t){return["IntValue","FloatValue"].indexOf(t.kind)>-1}function Ot(t){return t.kind==="StringValue"}function Et(t){return t.kind==="BooleanValue"}function tr(t){return t.kind==="IntValue"}function Pr(t){return t.kind==="FloatValue"}function Ze(t){return t.kind==="Variable"}function Xe(t){return t.kind==="ObjectValue"}function vt(t){return t.kind==="ListValue"}function rr(t){return t.kind==="EnumValue"}function ka(t){return t.kind==="NullValue"}function Cn(t,e,r,n){if(tr(r)||Pr(r))t[e.value]=Number(r.value);else if(Et(r)||Ot(r))t[e.value]=r.value;else if(Xe(r)){var i={};r.fields.map(function(o){return Cn(i,o.name,o.value,n)}),t[e.value]=i}else if(Ze(r)){var a=(n||{})[r.name.value];t[e.value]=a}else if(vt(r))t[e.value]=r.values.map(function(o){var m={};return Cn(m,e,o,n),m[e.value]});else if(rr(r))t[e.value]=r.value;else if(ka(r))t[e.value]=null;else throw new Pe(17)}function ut(t,e){var r=null;t.directives&&(r={},t.directives.forEach(function(i){r[i.name.value]={},i.arguments&&i.arguments.forEach(function(a){var o=a.name,m=a.value;return Cn(r[i.name.value],o,m,e)})}));var n=null;return t.arguments&&t.arguments.length&&(n={},t.arguments.forEach(function(i){var a=i.name,o=i.value;return Cn(n,a,o,e)})),Rs(t.name.value,n,r)}var Sa=["connection","include","skip","client","rest","export"];function Rs(t,e,r){if(r&&r.connection&&r.connection.key)if(r.connection.filter&&r.connection.filter.length>0){var n=r.connection.filter?r.connection.filter:[];n.sort();var i=e,a={};return n.forEach(function(E){a[E]=i[E]}),r.connection.key+"("+JSON.stringify(a)+")"}else return r.connection.key;var o=t;if(e){var m=lt()(e);o+="("+m+")"}return r&&Object.keys(r).forEach(function(E){Sa.indexOf(E)===-1&&(r[E]&&Object.keys(r[E]).length?o+="@"+E+"("+JSON.stringify(r[E])+")":o+="@"+E)}),o}function cn(t,e){if(t.arguments&&t.arguments.length){var r={};return t.arguments.forEach(function(n){var i=n.name,a=n.value;return Cn(r,i,a,e)}),r}return null}function br(t){return t.alias?t.alias.value:t.name.value}function Nr(t){return t.kind==="Field"}function _r(t){return t.kind==="InlineFragment"}function Wn(t){return t&&t.type==="id"&&typeof t.generated=="boolean"}function Kn(t,e){return e===void 0&&(e=!1),De({type:"id",generated:e},typeof t=="string"?{id:t,typename:void 0}:t)}function Vr(t){return t!=null&&typeof t=="object"&&t.type==="json"}function Ta(t){throw new InvariantError(18)}function Yn(t,e){switch(e===void 0&&(e=Ta),t.kind){case"Variable":return e(t);case"NullValue":return null;case"IntValue":return parseInt(t.value,10);case"FloatValue":return parseFloat(t.value);case"ListValue":return t.values.map(function(o){return Yn(o,e)});case"ObjectValue":{for(var r={},n=0,i=t.fields;n<i.length;n++){var a=i[n];r[a.name.value]=Yn(a.value,e)}return r}default:return t.value}}function Cs(t,e){if(t.directives&&t.directives.length){var r={};return t.directives.forEach(function(n){r[n.name.value]=cn(n,e)}),r}return null}function _i(t,e){return e===void 0&&(e={}),Ki(t.directives).every(function(r){var n=r.directive,i=r.ifArgument,a=!1;return i.value.kind==="Variable"?(a=e[i.value.name.value],Ce(a!==void 0,13)):a=i.value.value,n.name.value==="skip"?!a:a})}function Pn(t){var e=[];return(0,oe.visit)(t,{Directive:function(r){e.push(r.name.value)}}),e}function Jr(t,e){return Pn(e).some(function(r){return t.indexOf(r)>-1})}function wi(t){return t&&Jr(["client"],t)&&Jr(["export"],t)}function Ps(t){var e=t.name.value;return e==="skip"||e==="include"}function Ki(t){return t?t.filter(Ps).map(function(e){var r=e.arguments,n=e.name.value;Ce(r&&r.length===1,14);var i=r[0];Ce(i.name&&i.name.value==="if",15);var a=i.value;return Ce(a&&(a.kind==="Variable"||a.kind==="BooleanValue"),16),{directive:e,ifArgument:i}}):[]}function Lr(t,e){var r=e,n=[];t.definitions.forEach(function(a){if(a.kind==="OperationDefinition")throw new Pe(11);a.kind==="FragmentDefinition"&&n.push(a)}),typeof r=="undefined"&&(Ce(n.length===1,12),r=n[0].name.value);var i=De(De({},t),{definitions:f([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:r}}]}}],t.definitions)});return i}function jr(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return e.forEach(function(n){typeof n=="undefined"||n===null||Object.keys(n).forEach(function(i){t[i]=n[i]})}),t}function Ar(t){wr(t);var e=t.definitions.filter(function(r){return r.kind==="OperationDefinition"&&r.operation==="mutation"})[0];return invariant(e,1),e}function wr(t){Ce(t&&t.kind==="Document",2);var e=t.definitions.filter(function(r){return r.kind!=="FragmentDefinition"}).map(function(r){if(r.kind!=="OperationDefinition")throw new Pe(3);return r});return Ce(e.length<=1,4),t}function pt(t){return wr(t),t.definitions.filter(function(e){return e.kind==="OperationDefinition"})[0]}function Ra(t){var e=pt(t);return invariant(e,5),e}function dn(t){return t.definitions.filter(function(e){return e.kind==="OperationDefinition"&&e.name}).map(function(e){return e.name.value})[0]||null}function Vt(t){return t.definitions.filter(function(e){return e.kind==="FragmentDefinition"})}function hn(t){var e=pt(t);return Ce(e&&e.operation==="query",6),e}function Ca(t){Ce(t.kind==="Document",7),Ce(t.definitions.length<=1,8);var e=t.definitions[0];return Ce(e.kind==="FragmentDefinition",9),e}function Yi(t){wr(t);for(var e,r=0,n=t.definitions;r<n.length;r++){var i=n[r];if(i.kind==="OperationDefinition"){var a=i.operation;if(a==="query"||a==="mutation"||a==="subscription")return i}i.kind==="FragmentDefinition"&&!e&&(e=i)}if(e)return e;throw new Pe(10)}function Ei(t){t===void 0&&(t=[]);var e={};return t.forEach(function(r){e[r.name.value]=r}),e}function Xi(t){if(t&&t.variableDefinitions&&t.variableDefinitions.length){var e=t.variableDefinitions.filter(function(r){var n=r.defaultValue;return n}).map(function(r){var n=r.variable,i=r.defaultValue,a={};return Cn(a,n.name,i),a});return jr.apply(void 0,f([{}],e))}return{}}function Xo(t){var e=new Set;if(t.variableDefinitions)for(var r=0,n=t.variableDefinitions;r<n.length;r++){var i=n[r];e.add(i.variable.name.value)}return e}function qr(t,e,r){var n=0;return t.forEach(function(i,a){e.call(this,i,a,t)&&(t[n++]=i)},r),t.length=n,t}var Pa={kind:"Field",name:{kind:"Name",value:"__typename"}};function Ns(t,e){return t.selectionSet.selections.every(function(r){return r.kind==="FragmentSpread"&&Ns(e[r.name.value],e)})}function pn(t){return Ns(pt(t)||Ca(t),Ei(Vt(t)))?null:t}function Ji(t){return function(r){return t.some(function(n){return n.name&&n.name===r.name.value||n.test&&n.test(r)})}}function As(t,e){var r=Object.create(null),n=[],i=Object.create(null),a=[],o=pn((0,oe.visit)(e,{Variable:{enter:function(m,E,k){k.kind!=="VariableDefinition"&&(r[m.name.value]=!0)}},Field:{enter:function(m){if(t&&m.directives){var E=t.some(function(k){return k.remove});if(E&&m.directives&&m.directives.some(Ji(t)))return m.arguments&&m.arguments.forEach(function(k){k.value.kind==="Variable"&&n.push({name:k.value.name.value})}),m.selectionSet&&de(m.selectionSet).forEach(function(k){a.push({name:k.name.value})}),null}}},FragmentSpread:{enter:function(m){i[m.name.value]=!0}},Directive:{enter:function(m){if(Ji(t)(m))return null}}}));return o&&qr(n,function(m){return!r[m.name]}).length&&(o=Ia(n,o)),o&&qr(a,function(m){return!i[m.name]}).length&&(o=re(a,o)),o}function Nn(t){return(0,oe.visit)(wr(t),{SelectionSet:{enter:function(e,r,n){if(!(n&&n.kind==="OperationDefinition")){var i=e.selections;if(!!i){var a=i.some(function(m){return Nr(m)&&(m.name.value==="__typename"||m.name.value.lastIndexOf("__",0)===0)});if(!a){var o=n;if(!(Nr(o)&&o.directives&&o.directives.some(function(m){return m.name.value==="export"})))return De(De({},e),{selections:f(i,[Pa])})}}}}}})}var Na={test:function(t){var e=t.name.value==="connection";return e&&(!t.arguments||!t.arguments.some(function(r){return r.name.value==="key"})),e}};function Aa(t){return As([Na],wr(t))}function Is(t,e,r){return r===void 0&&(r=!0),e&&e.selections&&e.selections.some(function(n){return ki(t,n,r)})}function ki(t,e,r){return r===void 0&&(r=!0),Nr(e)?e.directives?e.directives.some(Ji(t))||r&&Is(t,e.selectionSet,r):!1:!0}function Jo(t,e){wr(e);var r;return pn(visit(e,{SelectionSet:{enter:function(n,i,a,o){var m=o.join("-");if(!r||m===r||!m.startsWith(r))if(n.selections){var E=n.selections.filter(function(k){return ki(t,k)});return Is(t,n,!1)&&(r=m),__assign(__assign({},n),{selections:E})}else return null}}}))}function An(t){return function(r){return t.some(function(n){return r.value&&r.value.kind==="Variable"&&r.value.name&&(n.name===r.value.name.value||n.test&&n.test(r))})}}function Ia(t,e){var r=An(t);return pn((0,oe.visit)(e,{OperationDefinition:{enter:function(n){return De(De({},n),{variableDefinitions:n.variableDefinitions.filter(function(i){return!t.some(function(a){return a.name===i.variable.name.value})})})}},Field:{enter:function(n){var i=t.some(function(o){return o.remove});if(i){var a=0;if(n.arguments.forEach(function(o){r(o)&&(a+=1)}),a===1)return null}}},Argument:{enter:function(n){if(r(n))return null}}}))}function re(t,e){function r(n){if(t.some(function(i){return i.name===n.name.value}))return null}return pn((0,oe.visit)(e,{FragmentSpread:{enter:r},FragmentDefinition:{enter:r}}))}function de(t){var e=[];return t.selections.forEach(function(r){(Nr(r)||_r(r))&&r.selectionSet?de(r.selectionSet).forEach(function(n){return e.push(n)}):r.kind==="FragmentSpread"&&e.push(r)}),e}function _e(t){var e=Yi(t),r=e.operation;if(r==="query")return t;var n=(0,oe.visit)(t,{OperationDefinition:{enter:function(i){return De(De({},i),{operation:"query"})}}});return n}function Me(t){wr(t);var e=As([{test:function(r){return r.name.value==="client"},remove:!0}],t);return e&&(e=(0,oe.visit)(e,{FragmentDefinition:{enter:function(r){if(r.selectionSet){var n=r.selectionSet.selections.every(function(i){return Nr(i)&&i.name.value==="__typename"});if(n)return null}}}})),e}var Fe=typeof WeakMap=="function"&&!(typeof navigator=="object"&&navigator.product==="ReactNative"),Ge=Object.prototype.toString;function Ve(t){return rt(t,new Map)}function rt(t,e){switch(Ge.call(t)){case"[object Array]":{if(e.has(t))return e.get(t);var r=t.slice(0);return e.set(t,r),r.forEach(function(i,a){r[a]=rt(i,e)}),r}case"[object Object]":{if(e.has(t))return e.get(t);var n=Object.create(Object.getPrototypeOf(t));return e.set(t,n),Object.keys(t).forEach(function(i){n[i]=rt(t[i],e)}),n}default:return t}}function st(){return typeof process!="undefined"?"production":"development"}function Er(t){return st()===t}function ur(){return Er("production")===!0}function hr(){return Er("development")===!0}function nr(){return Er("test")===!0}function Ur(t){try{return t()}catch(e){console.error&&console.error(e)}}function Xn(t){return t.errors&&t.errors.length}function Oa(t){return Object.freeze(t),Object.getOwnPropertyNames(t).forEach(function(e){t[e]!==null&&(typeof t[e]=="object"||typeof t[e]=="function")&&!Object.isFrozen(t[e])&&Oa(t[e])}),t}function yd(t){if(hr()||nr()){var e=typeof Symbol=="function"&&typeof Symbol("")=="string";if(!e)return Oa(t)}return t}var Xl=Object.prototype.hasOwnProperty;function Zo(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Da(t)}function Da(t){var e=t[0]||{},r=t.length;if(r>1){var n=[];e=xa(e,n);for(var i=1;i<r;++i)e=tu(e,t[i],n)}return e}function eu(t){return t!==null&&typeof t=="object"}function tu(t,e,r){return eu(e)&&eu(t)?(Object.isExtensible&&!Object.isExtensible(t)&&(t=xa(t,r)),Object.keys(e).forEach(function(n){var i=e[n];if(Xl.call(t,n)){var a=t[n];i!==a&&(t[n]=tu(xa(a,r),i,r))}else t[n]=i}),t):e}function xa(t,e){return t!==null&&typeof t=="object"&&e.indexOf(t)<0&&(Array.isArray(t)?t=t.slice(0):t=De({__proto__:Object.getPrototypeOf(t)},t),e.push(t)),t}var ru=Object.create({});function bd(t,e){e===void 0&&(e="warn"),!ur()&&!ru[t]&&(nr()||(ru[t]=!0),e==="error"?console.error(t):console.warn(t))}function _d(t){return JSON.parse(JSON.stringify(t))}var Os=Je(9329),Ma=Je.n(Os),Jl=Ma();const pr=Jl;function nu(t){for(var e=["query","operationName","variables","extensions","context"],r=0,n=Object.keys(t);r<n.length;r++){var i=n[r];if(e.indexOf(i)<0)throw new Pe(2)}return t}var wd=function(t){ln(e,t);function e(r,n){var i=t.call(this,r)||this;return i.link=n,i}return e}(Error);function Ds(t){return t.request.length<=1}function Ed(t){var e=!1;return new Promise(function(r,n){t.subscribe({next:function(i){e||(e=!0,r(i))},error:n})})}var Zl=null;function kd(t){return new Observable(function(e){t.then(function(r){e.next(r),e.complete()}).catch(e.error.bind(e))})}function iu(t){return new pr(function(e){e.error(t)})}function ec(t){var e={variables:t.variables||{},extensions:t.extensions||{},operationName:t.operationName,query:t.query};return e.operationName||(e.operationName=typeof e.query!="string"?dn(e.query):""),e}function Fa(t,e){var r=De({},t),n=function(a){typeof a=="function"?r=De({},r,a(r)):r=De({},r,a)},i=function(){return De({},r)};return Object.defineProperty(e,"setContext",{enumerable:!1,value:n}),Object.defineProperty(e,"getContext",{enumerable:!1,value:i}),Object.defineProperty(e,"toKey",{enumerable:!1,value:function(){return tc(e)}}),e}function tc(t){var e=t.query,r=t.variables,n=t.operationName;return JSON.stringify([n,e,r])}function su(t,e){return e?e(t):pr.of()}function Zi(t){return typeof t=="function"?new zr(t):t}function es(){return new zr(function(){return pr.of()})}function La(t){return t.length===0?es():t.map(Zi).reduce(function(e,r){return e.concat(r)})}function xs(t,e,r){var n=Zi(e),i=Zi(r||new zr(su));return Ds(n)&&Ds(i)?new zr(function(a){return t(a)?n.request(a)||pr.of():i.request(a)||pr.of()}):new zr(function(a,o){return t(a)?n.request(a,o)||pr.of():i.request(a,o)||pr.of()})}var qa=function(t,e){var r=Zi(t);if(Ds(r))return r;var n=Zi(e);return Ds(n)?new zr(function(i){return r.request(i,function(a){return n.request(a)||pr.of()})||pr.of()}):new zr(function(i,a){return r.request(i,function(o){return n.request(o,a)||pr.of()})||pr.of()})},zr=function(){function t(e){e&&(this.request=e)}return t.prototype.split=function(e,r,n){return this.concat(xs(e,r,n||new t(su)))},t.prototype.concat=function(e){return qa(this,e)},t.prototype.request=function(e,r){throw new Pe(1)},t.empty=es,t.from=La,t.split=xs,t.execute=ts,t}();function ts(t,e){return t.request(Fa(e.context,ec(nu(e))))||pr.of()}var Ua=Je(7121),Dt;(function(t){t[t.loading=1]="loading",t[t.setVariables=2]="setVariables",t[t.fetchMore=3]="fetchMore",t[t.refetch=4]="refetch",t[t.poll=6]="poll",t[t.ready=7]="ready",t[t.error=8]="error"})(Dt||(Dt={}));function In(t){return t<7}var mn=function(t){ln(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype[Ua.Z]=function(){return this},e.prototype["@@observable"]=function(){return this},e}(pr);function Si(t){return Array.isArray(t)&&t.length>0}function au(t){return t.hasOwnProperty("graphQLErrors")}var rc=function(t){var e="";return Si(t.graphQLErrors)&&t.graphQLErrors.forEach(function(r){var n=r?r.message:"Error message not found.";e+="GraphQL error: "+n+`
`}),t.networkError&&(e+="Network error: "+t.networkError.message+`
`),e=e.replace(/\n$/,""),e},fn=function(t){ln(e,t);function e(r){var n=r.graphQLErrors,i=r.networkError,a=r.errorMessage,o=r.extraInfo,m=t.call(this,a)||this;return m.graphQLErrors=n||[],m.networkError=i||null,a?m.message=a:m.message=rc(m),m.extraInfo=o,m.__proto__=e.prototype,m}return e}(Error),Jn;(function(t){t[t.normal=1]="normal",t[t.refetch=2]="refetch",t[t.poll=3]="poll"})(Jn||(Jn={}));var nc=function(t,e){return e===void 0&&(e="none"),t&&(t.networkError||e==="none"&&Si(t.graphQLErrors))},ou=function(t){ln(e,t);function e(r){var n=r.queryManager,i=r.options,a=r.shouldSubscribe,o=a===void 0?!0:a,m=t.call(this,function(k){return m.onSubscribe(k)})||this;m.observers=new Set,m.subscriptions=new Set,m.isTornDown=!1,m.options=i,m.variables=i.variables||{},m.queryId=n.generateQueryId(),m.shouldSubscribe=o;var E=pt(i.query);return m.queryName=E&&E.name&&E.name.value,m.queryManager=n,m}return e.prototype.result=function(){var r=this;return new Promise(function(n,i){var a={next:function(m){n(m),r.observers.delete(a),r.observers.size||r.queryManager.removeQuery(r.queryId),setTimeout(function(){o.unsubscribe()},0)},error:i},o=r.subscribe(a)})},e.prototype.currentResult=function(){var r=this.getCurrentResult();return r.data===void 0&&(r.data={}),r},e.prototype.getCurrentResult=function(){if(this.isTornDown){var r=this.lastResult;return{data:!this.lastError&&r&&r.data||void 0,error:this.lastError,loading:!1,networkStatus:Dt.error}}var n=this.queryManager.getCurrentQueryResult(this),i=n.data,a=n.partial,o=this.queryManager.queryStore.get(this.queryId),m,E=this.options.fetchPolicy,k=E==="network-only"||E==="no-cache";if(o){var P=o.networkStatus;if(nc(o,this.options.errorPolicy))return{data:void 0,loading:!1,networkStatus:P,error:new fn({graphQLErrors:o.graphQLErrors,networkError:o.networkError})};o.variables&&(this.options.variables=De(De({},this.options.variables),o.variables),this.variables=this.options.variables),m={data:i,loading:In(P),networkStatus:P},o.graphQLErrors&&this.options.errorPolicy==="all"&&(m.errors=o.graphQLErrors)}else{var U=k||a&&E!=="cache-only";m={data:i,loading:U,networkStatus:U?Dt.loading:Dt.ready}}return a||this.updateLastResult(De(De({},m),{stale:!1})),De(De({},m),{partial:a})},e.prototype.isDifferentFromLastResult=function(r){var n=this.lastResultSnapshot;return!(n&&r&&n.networkStatus===r.networkStatus&&n.stale===r.stale&&Ke(n.data,r.data))},e.prototype.getLastResult=function(){return this.lastResult},e.prototype.getLastError=function(){return this.lastError},e.prototype.resetLastResults=function(){delete this.lastResult,delete this.lastResultSnapshot,delete this.lastError,this.isTornDown=!1},e.prototype.resetQueryStoreErrors=function(){var r=this.queryManager.queryStore.get(this.queryId);r&&(r.networkError=null,r.graphQLErrors=[])},e.prototype.refetch=function(r){var n=this.options.fetchPolicy;return n==="cache-only"?Promise.reject(new Pe(1)):(n!=="no-cache"&&n!=="cache-and-network"&&(n="network-only"),Ke(this.variables,r)||(this.variables=De(De({},this.variables),r)),Ke(this.options.variables,this.variables)||(this.options.variables=De(De({},this.options.variables),this.variables)),this.queryManager.fetchQuery(this.queryId,De(De({},this.options),{fetchPolicy:n}),Jn.refetch))},e.prototype.fetchMore=function(r){var n=this;Ce(r.updateQuery,2);var i=De(De({},r.query?r:De(De(De({},this.options),r),{variables:De(De({},this.variables),r.variables)})),{fetchPolicy:"network-only"}),a=this.queryManager.generateQueryId();return this.queryManager.fetchQuery(a,i,Jn.normal,this.queryId).then(function(o){return n.updateQuery(function(m){return r.updateQuery(m,{fetchMoreResult:o.data,variables:i.variables})}),n.queryManager.stopQuery(a),o},function(o){throw n.queryManager.stopQuery(a),o})},e.prototype.subscribeToMore=function(r){var n=this,i=this.queryManager.startGraphQLSubscription({query:r.document,variables:r.variables}).subscribe({next:function(a){var o=r.updateQuery;o&&n.updateQuery(function(m,E){var k=E.variables;return o(m,{subscriptionData:a,variables:k})})},error:function(a){if(r.onError){r.onError(a);return}}});return this.subscriptions.add(i),function(){n.subscriptions.delete(i)&&i.unsubscribe()}},e.prototype.setOptions=function(r){var n=this.options.fetchPolicy;this.options=De(De({},this.options),r),r.pollInterval?this.startPolling(r.pollInterval):r.pollInterval===0&&this.stopPolling();var i=r.fetchPolicy;return this.setVariables(this.options.variables,n!==i&&(n==="cache-only"||n==="standby"||i==="network-only"),r.fetchResults)},e.prototype.setVariables=function(r,n,i){return n===void 0&&(n=!1),i===void 0&&(i=!0),this.isTornDown=!1,r=r||this.variables,!n&&Ke(r,this.variables)?this.observers.size&&i?this.result():Promise.resolve():(this.variables=this.options.variables=r,this.observers.size?this.queryManager.fetchQuery(this.queryId,this.options):Promise.resolve())},e.prototype.updateQuery=function(r){var n=this.queryManager,i=n.getQueryWithPreviousResult(this.queryId),a=i.previousResult,o=i.variables,m=i.document,E=Ur(function(){return r(a,{variables:o})});E&&(n.dataStore.markUpdateQueryResult(m,o,E),n.broadcastQueries())},e.prototype.stopPolling=function(){this.queryManager.stopPollingQuery(this.queryId),this.options.pollInterval=void 0},e.prototype.startPolling=function(r){pe(this),this.options.pollInterval=r,this.queryManager.startPollingQuery(this.options,this.queryId)},e.prototype.updateLastResult=function(r){var n=this.lastResult;return this.lastResult=r,this.lastResultSnapshot=this.queryManager.assumeImmutableResults?r:Ve(r),n},e.prototype.onSubscribe=function(r){var n=this;try{var i=r._subscription._observer;i&&!i.error&&(i.error=ic)}catch(o){}var a=!this.observers.size;return this.observers.add(r),r.next&&this.lastResult&&r.next(this.lastResult),r.error&&this.lastError&&r.error(this.lastError),a&&this.setUpQuery(),function(){n.observers.delete(r)&&!n.observers.size&&n.tearDownQuery()}},e.prototype.setUpQuery=function(){var r=this,n=this,i=n.queryManager,a=n.queryId;this.shouldSubscribe&&i.addObservableQuery(a,this),this.options.pollInterval&&(pe(this),i.startPollingQuery(this.options,a));var o=function(m){r.updateLastResult(De(De({},r.lastResult),{errors:m.graphQLErrors,networkStatus:Dt.error,loading:!1})),ie(r.observers,"error",r.lastError=m)};i.observeQuery(a,this.options,{next:function(m){if(r.lastError||r.isDifferentFromLastResult(m)){var E=r.updateLastResult(m),k=r.options,P=k.query,U=k.variables,z=k.fetchPolicy;i.transform(P).hasClientExports?i.getLocalState().addExportedVariables(P,U).then(function(le){var ce=r.variables;r.variables=r.options.variables=le,!m.loading&&E&&z!=="cache-only"&&i.transform(P).serverQuery&&!Ke(ce,le)?r.refetch():ie(r.observers,"next",m)}):ie(r.observers,"next",m)}},error:o}).catch(o)},e.prototype.tearDownQuery=function(){var r=this.queryManager;this.isTornDown=!0,r.stopPollingQuery(this.queryId),this.subscriptions.forEach(function(n){return n.unsubscribe()}),this.subscriptions.clear(),r.removeObservableQuery(this.queryId),r.stopQuery(this.queryId),this.observers.clear()},e}(mn);function ic(t){}function ie(t,e,r){var n=[];t.forEach(function(i){return i[e]&&n.push(i)}),n.forEach(function(i){return i[e](r)})}function pe(t){var e=t.options.fetchPolicy;Ce(e!=="cache-first"&&e!=="cache-only",3)}var we=function(){function t(){this.store={}}return t.prototype.getStore=function(){return this.store},t.prototype.get=function(e){return this.store[e]},t.prototype.initMutation=function(e,r,n){this.store[e]={mutation:r,variables:n||{},loading:!0,error:null}},t.prototype.markMutationError=function(e,r){var n=this.store[e];n&&(n.loading=!1,n.error=r)},t.prototype.markMutationResult=function(e){var r=this.store[e];r&&(r.loading=!1,r.error=null)},t.prototype.reset=function(){this.store={}},t}(),Be=function(){function t(){this.store={}}return t.prototype.getStore=function(){return this.store},t.prototype.get=function(e){return this.store[e]},t.prototype.initQuery=function(e){var r=this.store[e.queryId];Ce(!r||r.document===e.document||Ke(r.document,e.document),19);var n=!1,i=null;e.storePreviousVariables&&r&&r.networkStatus!==Dt.loading&&(Ke(r.variables,e.variables)||(n=!0,i=r.variables));var a;n?a=Dt.setVariables:e.isPoll?a=Dt.poll:e.isRefetch?a=Dt.refetch:a=Dt.loading;var o=[];r&&r.graphQLErrors&&(o=r.graphQLErrors),this.store[e.queryId]={document:e.document,variables:e.variables,previousVariables:i,networkError:null,graphQLErrors:o,networkStatus:a,metadata:e.metadata},typeof e.fetchMoreForQueryId=="string"&&this.store[e.fetchMoreForQueryId]&&(this.store[e.fetchMoreForQueryId].networkStatus=Dt.fetchMore)},t.prototype.markQueryResult=function(e,r,n){!this.store||!this.store[e]||(this.store[e].networkError=null,this.store[e].graphQLErrors=Si(r.errors)?r.errors:[],this.store[e].previousVariables=null,this.store[e].networkStatus=Dt.ready,typeof n=="string"&&this.store[n]&&(this.store[n].networkStatus=Dt.ready))},t.prototype.markQueryError=function(e,r,n){!this.store||!this.store[e]||(this.store[e].networkError=r,this.store[e].networkStatus=Dt.error,typeof n=="string"&&this.markQueryResultClient(n,!0))},t.prototype.markQueryResultClient=function(e,r){var n=this.store&&this.store[e];n&&(n.networkError=null,n.previousVariables=null,r&&(n.networkStatus=Dt.ready))},t.prototype.stopQuery=function(e){delete this.store[e]},t.prototype.reset=function(e){var r=this;Object.keys(this.store).forEach(function(n){e.indexOf(n)<0?r.stopQuery(n):r.store[n].networkStatus=Dt.loading})},t}();function dt(t){return t.charAt(0).toUpperCase()+t.slice(1)}var yt=function(){function t(e){var r=e.cache,n=e.client,i=e.resolvers,a=e.fragmentMatcher;this.cache=r,n&&(this.client=n),i&&this.addResolvers(i),a&&this.setFragmentMatcher(a)}return t.prototype.addResolvers=function(e){var r=this;this.resolvers=this.resolvers||{},Array.isArray(e)?e.forEach(function(n){r.resolvers=Zo(r.resolvers,n)}):this.resolvers=Zo(this.resolvers,e)},t.prototype.setResolvers=function(e){this.resolvers={},this.addResolvers(e)},t.prototype.getResolvers=function(){return this.resolvers||{}},t.prototype.runResolvers=function(e){var r=e.document,n=e.remoteResult,i=e.context,a=e.variables,o=e.onlyRunForcedResolvers,m=o===void 0?!1:o;return _(this,void 0,void 0,function(){return c(this,function(E){return r?[2,this.resolveDocument(r,n.data,i,a,this.fragmentMatcher,m).then(function(k){return De(De({},n),{data:k.result})})]:[2,n]})})},t.prototype.setFragmentMatcher=function(e){this.fragmentMatcher=e},t.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},t.prototype.clientQuery=function(e){return Jr(["client"],e)&&this.resolvers?e:null},t.prototype.serverQuery=function(e){return this.resolvers?Me(e):e},t.prototype.prepareContext=function(e){e===void 0&&(e={});var r=this.cache,n=De(De({},e),{cache:r,getCacheKey:function(i){if(r.config)return r.config.dataIdFromObject(i);Ce(!1,6)}});return n},t.prototype.addExportedVariables=function(e,r,n){return r===void 0&&(r={}),n===void 0&&(n={}),_(this,void 0,void 0,function(){return c(this,function(i){return e?[2,this.resolveDocument(e,this.buildRootValueFromCache(e,r)||{},this.prepareContext(n),r).then(function(a){return De(De({},r),a.exportedVariables)})]:[2,De({},r)]})})},t.prototype.shouldForceResolvers=function(e){var r=!1;return(0,oe.visit)(e,{Directive:{enter:function(n){if(n.name.value==="client"&&n.arguments&&(r=n.arguments.some(function(i){return i.name.value==="always"&&i.value.kind==="BooleanValue"&&i.value.value===!0}),r))return oe.BREAK}}}),r},t.prototype.buildRootValueFromCache=function(e,r){return this.cache.diff({query:_e(e),variables:r,returnPartialData:!0,optimistic:!1}).result},t.prototype.resolveDocument=function(e,r,n,i,a,o){return n===void 0&&(n={}),i===void 0&&(i={}),a===void 0&&(a=function(){return!0}),o===void 0&&(o=!1),_(this,void 0,void 0,function(){var m,E,k,P,U,z,le,ce,me;return c(this,function(Te){return m=Yi(e),E=Vt(e),k=Ei(E),P=m.operation,U=P?dt(P):"Query",z=this,le=z.cache,ce=z.client,me={fragmentMap:k,context:De(De({},n),{cache:le,client:ce}),variables:i,fragmentMatcher:a,defaultOperationType:U,exportedVariables:{},onlyRunForcedResolvers:o},[2,this.resolveSelectionSet(m.selectionSet,r,me).then(function(Re){return{result:Re,exportedVariables:me.exportedVariables}})]})})},t.prototype.resolveSelectionSet=function(e,r,n){return _(this,void 0,void 0,function(){var i,a,o,m,E,k=this;return c(this,function(P){return i=n.fragmentMap,a=n.context,o=n.variables,m=[r],E=function(U){return _(k,void 0,void 0,function(){var z,le;return c(this,function(ce){return _i(U,o)?Nr(U)?[2,this.resolveField(U,r,n).then(function(me){var Te;typeof me!="undefined"&&m.push((Te={},Te[br(U)]=me,Te))})]:(_r(U)?z=U:(z=i[U.name.value],Ce(z,7)),z&&z.typeCondition&&(le=z.typeCondition.name.value,n.fragmentMatcher(r,le,a))?[2,this.resolveSelectionSet(z.selectionSet,r,n).then(function(me){m.push(me)})]:[2]):[2]})})},[2,Promise.all(e.selections.map(E)).then(function(){return Da(m)})]})})},t.prototype.resolveField=function(e,r,n){return _(this,void 0,void 0,function(){var i,a,o,m,E,k,P,U,z,le=this;return c(this,function(ce){return i=n.variables,a=e.name.value,o=br(e),m=a!==o,E=r[o]||r[a],k=Promise.resolve(E),(!n.onlyRunForcedResolvers||this.shouldForceResolvers(e))&&(P=r.__typename||n.defaultOperationType,U=this.resolvers&&this.resolvers[P],U&&(z=U[m?a:o],z&&(k=Promise.resolve(z(r,cn(e,i),n.context,{field:e,fragmentMap:n.fragmentMap}))))),[2,k.then(function(me){if(me===void 0&&(me=E),e.directives&&e.directives.forEach(function(Te){Te.name.value==="export"&&Te.arguments&&Te.arguments.forEach(function(Re){Re.name.value==="as"&&Re.value.kind==="StringValue"&&(n.exportedVariables[Re.value.value]=me)})}),!e.selectionSet||me==null)return me;if(Array.isArray(me))return le.resolveSubSelectedArray(e,me,n);if(e.selectionSet)return le.resolveSelectionSet(e.selectionSet,me,n)})]})})},t.prototype.resolveSubSelectedArray=function(e,r,n){var i=this;return Promise.all(r.map(function(a){if(a===null)return null;if(Array.isArray(a))return i.resolveSubSelectedArray(e,a,n);if(e.selectionSet)return i.resolveSelectionSet(e.selectionSet,a,n)}))},t}();function St(t){var e=new Set,r=null;return new mn(function(n){return e.add(n),r=r||t.subscribe({next:function(i){e.forEach(function(a){return a.next&&a.next(i)})},error:function(i){e.forEach(function(a){return a.error&&a.error(i)})},complete:function(){e.forEach(function(i){return i.complete&&i.complete()})}}),function(){e.delete(n)&&!e.size&&r&&(r.unsubscribe(),r=null)}})}function ct(t,e){return new mn(function(r){var n=r.next,i=r.error,a=r.complete,o=0,m=!1,E={next:function(P){++o,new Promise(function(U){U(e(P))}).then(function(U){--o,n&&n.call(r,U),m&&E.complete()},function(U){--o,i&&i.call(r,U)})},error:function(P){i&&i.call(r,P)},complete:function(){m=!0,o||a&&a.call(r)}},k=t.subscribe(E);return function(){return k.unsubscribe()}})}var Nt=Object.prototype.hasOwnProperty,$r=function(){function t(e){var r=e.link,n=e.queryDeduplication,i=n===void 0?!1:n,a=e.store,o=e.onBroadcast,m=o===void 0?function(){}:o,E=e.ssrMode,k=E===void 0?!1:E,P=e.clientAwareness,U=P===void 0?{}:P,z=e.localState,le=e.assumeImmutableResults;this.mutationStore=new we,this.queryStore=new Be,this.clientAwareness={},this.idCounter=1,this.queries=new Map,this.fetchQueryRejectFns=new Map,this.transformCache=new(Fe?WeakMap:Map),this.inFlightLinkObservables=new Map,this.pollingInfoByQueryId=new Map,this.link=r,this.queryDeduplication=i,this.dataStore=a,this.onBroadcast=m,this.clientAwareness=U,this.localState=z||new yt({cache:a.getCache()}),this.ssrMode=k,this.assumeImmutableResults=!!le}return t.prototype.stop=function(){var e=this;this.queries.forEach(function(r,n){e.stopQueryNoBroadcast(n)}),this.fetchQueryRejectFns.forEach(function(r){r(new Pe(8))})},t.prototype.mutate=function(e){var r=e.mutation,n=e.variables,i=e.optimisticResponse,a=e.updateQueries,o=e.refetchQueries,m=o===void 0?[]:o,E=e.awaitRefetchQueries,k=E===void 0?!1:E,P=e.update,U=e.errorPolicy,z=U===void 0?"none":U,le=e.fetchPolicy,ce=e.context,me=ce===void 0?{}:ce;return _(this,void 0,void 0,function(){var Te,Re,xe,Oe=this;return c(this,function(Ae){switch(Ae.label){case 0:return Ce(r,9),Ce(!le||le==="no-cache",10),Te=this.generateQueryId(),r=this.transform(r).document,this.setQuery(Te,function(){return{document:r}}),n=this.getVariables(r,n),this.transform(r).hasClientExports?[4,this.localState.addExportedVariables(r,n,me)]:[3,2];case 1:n=Ae.sent(),Ae.label=2;case 2:return Re=function(){var He={};return a&&Oe.queries.forEach(function(ft,gt){var Mt=ft.observableQuery;if(Mt){var _t=Mt.queryName;_t&&Nt.call(a,_t)&&(He[gt]={updater:a[_t],query:Oe.queryStore.get(gt)})}}),He},this.mutationStore.initMutation(Te,r,n),this.dataStore.markMutationInit({mutationId:Te,document:r,variables:n,updateQueries:Re(),update:P,optimisticResponse:i}),this.broadcastQueries(),xe=this,[2,new Promise(function(He,ft){var gt,Mt;xe.getObservableFromLink(r,De(De({},me),{optimisticResponse:i}),n,!1).subscribe({next:function(_t){if(Xn(_t)&&z==="none"){Mt=new fn({graphQLErrors:_t.errors});return}xe.mutationStore.markMutationResult(Te),le!=="no-cache"&&xe.dataStore.markMutationResult({mutationId:Te,result:_t,document:r,variables:n,updateQueries:Re(),update:P}),gt=_t},error:function(_t){xe.mutationStore.markMutationError(Te,_t),xe.dataStore.markMutationComplete({mutationId:Te,optimisticResponse:i}),xe.broadcastQueries(),xe.setQuery(Te,function(){return{document:null}}),ft(new fn({networkError:_t}))},complete:function(){if(Mt&&xe.mutationStore.markMutationError(Te,Mt),xe.dataStore.markMutationComplete({mutationId:Te,optimisticResponse:i}),xe.broadcastQueries(),Mt){ft(Mt);return}typeof m=="function"&&(m=m(gt));var _t=[];Si(m)&&m.forEach(function(Ii){if(typeof Ii=="string")xe.queries.forEach(function(_n){var Sr=_n.observableQuery;Sr&&Sr.queryName===Ii&&_t.push(Sr.refetch())});else{var uo={query:Ii.query,variables:Ii.variables,fetchPolicy:"network-only"};Ii.context&&(uo.context=Ii.context),_t.push(xe.query(uo))}}),Promise.all(k?_t:[]).then(function(){xe.setQuery(Te,function(){return{document:null}}),z==="ignore"&&gt&&Xn(gt)&&delete gt.errors,He(gt)})}})})]}})})},t.prototype.fetchQuery=function(e,r,n,i){return _(this,void 0,void 0,function(){var a,o,m,E,k,P,U,z,le,ce,me,Te,Re,xe,Oe,Ae,He,ft,gt=this;return c(this,function(Mt){switch(Mt.label){case 0:return a=r.metadata,o=a===void 0?null:a,m=r.fetchPolicy,E=m===void 0?"cache-first":m,k=r.context,P=k===void 0?{}:k,U=this.transform(r.query).document,z=this.getVariables(U,r.variables),this.transform(U).hasClientExports?[4,this.localState.addExportedVariables(U,z,P)]:[3,2];case 1:z=Mt.sent(),Mt.label=2;case 2:if(r=De(De({},r),{variables:z}),ce=E==="network-only"||E==="no-cache",me=ce,ce||(Te=this.dataStore.getCache().diff({query:U,variables:z,returnPartialData:!0,optimistic:!1}),Re=Te.complete,xe=Te.result,me=!Re||E==="cache-and-network",le=xe),Oe=me&&E!=="cache-only"&&E!=="standby",Jr(["live"],U)&&(Oe=!0),Ae=this.idCounter++,He=E!=="no-cache"?this.updateQueryWatch(e,U,r):void 0,this.setQuery(e,function(){return{document:U,lastRequestId:Ae,invalidated:!0,cancel:He}}),this.invalidate(i),this.queryStore.initQuery({queryId:e,document:U,storePreviousVariables:Oe,variables:z,isPoll:n===Jn.poll,isRefetch:n===Jn.refetch,metadata:o,fetchMoreForQueryId:i}),this.broadcastQueries(),Oe){if(ft=this.fetchRequest({requestId:Ae,queryId:e,document:U,options:r,fetchMoreForQueryId:i}).catch(function(_t){throw au(_t)?_t:(Ae>=gt.getQuery(e).lastRequestId&&(gt.queryStore.markQueryError(e,_t,i),gt.invalidate(e),gt.invalidate(i),gt.broadcastQueries()),new fn({networkError:_t}))}),E!=="cache-and-network")return[2,ft];ft.catch(function(){})}return this.queryStore.markQueryResultClient(e,!Oe),this.invalidate(e),this.invalidate(i),this.transform(U).hasForcedResolvers?[2,this.localState.runResolvers({document:U,remoteResult:{data:le},context:P,variables:z,onlyRunForcedResolvers:!0}).then(function(_t){return gt.markQueryResult(e,_t,r,i),gt.broadcastQueries(),_t})]:(this.broadcastQueries(),[2,{data:le}])}})})},t.prototype.markQueryResult=function(e,r,n,i){var a=n.fetchPolicy,o=n.variables,m=n.errorPolicy;a==="no-cache"?this.setQuery(e,function(){return{newData:{result:r.data,complete:!0}}}):this.dataStore.markQueryResult(r,this.getQuery(e).document,o,i,m==="ignore"||m==="all")},t.prototype.queryListenerForObserver=function(e,r,n){var i=this;function a(o,m){if(n[o])try{n[o](m)}catch(E){}}return function(o,m){if(i.invalidate(e,!1),!!o){var E=i.getQuery(e),k=E.observableQuery,P=E.document,U=k?k.options.fetchPolicy:r.fetchPolicy;if(U!=="standby"){var z=In(o.networkStatus),le=k&&k.getLastResult(),ce=!!(le&&le.networkStatus!==o.networkStatus),me=r.returnPartialData||!m&&o.previousVariables||ce&&r.notifyOnNetworkStatusChange||U==="cache-only"||U==="cache-and-network";if(!(z&&!me)){var Te=Si(o.graphQLErrors),Re=k&&k.options.errorPolicy||r.errorPolicy||"none";if(Re==="none"&&Te||o.networkError)return a("error",new fn({graphQLErrors:o.graphQLErrors,networkError:o.networkError}));try{var xe=void 0,Oe=void 0;if(m)U!=="no-cache"&&U!=="network-only"&&i.setQuery(e,function(){return{newData:null}}),xe=m.result,Oe=!m.complete;else{var Ae=k&&k.getLastError(),He=Re!=="none"&&(Ae&&Ae.graphQLErrors)!==o.graphQLErrors;if(le&&le.data&&!He)xe=le.data,Oe=!1;else{var ft=i.dataStore.getCache().diff({query:P,variables:o.previousVariables||o.variables,returnPartialData:!0,optimistic:!0});xe=ft.result,Oe=!ft.complete}}var gt=Oe&&!(r.returnPartialData||U==="cache-only"),Mt={data:gt?le&&le.data:xe,loading:z,networkStatus:o.networkStatus,stale:gt};Re==="all"&&Te&&(Mt.errors=o.graphQLErrors),a("next",Mt)}catch(_t){a("error",new fn({networkError:_t}))}}}}}},t.prototype.transform=function(e){var r=this.transformCache;if(!r.has(e)){var n=this.dataStore.getCache(),i=n.transformDocument(e),a=Aa(n.transformForLink(i)),o=this.localState.clientQuery(i),m=this.localState.serverQuery(a),E={document:i,hasClientExports:wi(i),hasForcedResolvers:this.localState.shouldForceResolvers(i),clientQuery:o,serverQuery:m,defaultVars:Xi(pt(i))},k=function(P){P&&!r.has(P)&&r.set(P,E)};k(e),k(i),k(o),k(m)}return r.get(e)},t.prototype.getVariables=function(e,r){return De(De({},this.transform(e).defaultVars),r)},t.prototype.watchQuery=function(e,r){r===void 0&&(r=!0),Ce(e.fetchPolicy!=="standby",11),e.variables=this.getVariables(e.query,e.variables),typeof e.notifyOnNetworkStatusChange=="undefined"&&(e.notifyOnNetworkStatusChange=!1);var n=De({},e);return new ou({queryManager:this,options:n,shouldSubscribe:r})},t.prototype.query=function(e){var r=this;return Ce(e.query,12),Ce(e.query.kind==="Document",13),Ce(!e.returnPartialData,14),Ce(!e.pollInterval,15),new Promise(function(n,i){var a=r.watchQuery(e,!1);r.fetchQueryRejectFns.set("query:"+a.queryId,i),a.result().then(n,i).then(function(){return r.fetchQueryRejectFns.delete("query:"+a.queryId)})})},t.prototype.generateQueryId=function(){return String(this.idCounter++)},t.prototype.stopQueryInStore=function(e){this.stopQueryInStoreNoBroadcast(e),this.broadcastQueries()},t.prototype.stopQueryInStoreNoBroadcast=function(e){this.stopPollingQuery(e),this.queryStore.stopQuery(e),this.invalidate(e)},t.prototype.addQueryListener=function(e,r){this.setQuery(e,function(n){var i=n.listeners;return i.add(r),{invalidated:!1}})},t.prototype.updateQueryWatch=function(e,r,n){var i=this,a=this.getQuery(e).cancel;a&&a();var o=function(){var m=null,E=i.getQuery(e).observableQuery;if(E){var k=E.getLastResult();k&&(m=k.data)}return m};return this.dataStore.getCache().watch({query:r,variables:n.variables,optimistic:!0,previousResult:o,callback:function(m){i.setQuery(e,function(){return{invalidated:!0,newData:m}})}})},t.prototype.addObservableQuery=function(e,r){this.setQuery(e,function(){return{observableQuery:r}})},t.prototype.removeObservableQuery=function(e){var r=this.getQuery(e).cancel;this.setQuery(e,function(){return{observableQuery:null}}),r&&r()},t.prototype.clearStore=function(){this.fetchQueryRejectFns.forEach(function(r){r(new Pe(16))});var e=[];return this.queries.forEach(function(r,n){var i=r.observableQuery;i&&e.push(n)}),this.queryStore.reset(e),this.mutationStore.reset(),this.dataStore.reset()},t.prototype.resetStore=function(){var e=this;return this.clearStore().then(function(){return e.reFetchObservableQueries()})},t.prototype.reFetchObservableQueries=function(e){var r=this;e===void 0&&(e=!1);var n=[];return this.queries.forEach(function(i,a){var o=i.observableQuery;if(o){var m=o.options.fetchPolicy;o.resetLastResults(),m!=="cache-only"&&(e||m!=="standby")&&n.push(o.refetch()),r.setQuery(a,function(){return{newData:null}}),r.invalidate(a)}}),this.broadcastQueries(),Promise.all(n)},t.prototype.observeQuery=function(e,r,n){return this.addQueryListener(e,this.queryListenerForObserver(e,r,n)),this.fetchQuery(e,r)},t.prototype.startQuery=function(e,r,n){return this.addQueryListener(e,n),this.fetchQuery(e,r).catch(function(){}),e},t.prototype.startGraphQLSubscription=function(e){var r=this,n=e.query,i=e.fetchPolicy,a=e.variables;n=this.transform(n).document,a=this.getVariables(n,a);var o=function(E){return r.getObservableFromLink(n,{},E,!1).map(function(k){if((!i||i!=="no-cache")&&(r.dataStore.markSubscriptionResult(k,n,E),r.broadcastQueries()),Xn(k))throw new fn({graphQLErrors:k.errors});return k})};if(this.transform(n).hasClientExports){var m=this.localState.addExportedVariables(n,a).then(o);return new mn(function(E){var k=null;return m.then(function(P){return k=P.subscribe(E)},E.error),function(){return k&&k.unsubscribe()}})}return o(a)},t.prototype.stopQuery=function(e){this.stopQueryNoBroadcast(e),this.broadcastQueries()},t.prototype.stopQueryNoBroadcast=function(e){this.stopQueryInStoreNoBroadcast(e),this.removeQuery(e)},t.prototype.removeQuery=function(e){this.fetchQueryRejectFns.delete("query:"+e),this.fetchQueryRejectFns.delete("fetchRequest:"+e),this.getQuery(e).subscriptions.forEach(function(r){return r.unsubscribe()}),this.queries.delete(e)},t.prototype.getCurrentQueryResult=function(e,r){r===void 0&&(r=!0);var n=e.options,i=n.variables,a=n.query,o=n.fetchPolicy,m=n.returnPartialData,E=e.getLastResult(),k=this.getQuery(e.queryId).newData;if(k&&k.complete)return{data:k.result,partial:!1};if(o==="no-cache"||o==="network-only")return{data:void 0,partial:!1};var P=this.dataStore.getCache().diff({query:a,variables:i,previousResult:E?E.data:void 0,returnPartialData:!0,optimistic:r}),U=P.result,z=P.complete;return{data:z||m?U:void 0,partial:!z}},t.prototype.getQueryWithPreviousResult=function(e){var r;if(typeof e=="string"){var n=this.getQuery(e).observableQuery;Ce(n,17),r=n}else r=e;var i=r.options,a=i.variables,o=i.query;return{previousResult:this.getCurrentQueryResult(r,!1).data,variables:a,document:o}},t.prototype.broadcastQueries=function(){var e=this;this.onBroadcast(),this.queries.forEach(function(r,n){r.invalidated&&r.listeners.forEach(function(i){i&&i(e.queryStore.get(n),r.newData)})})},t.prototype.getLocalState=function(){return this.localState},t.prototype.getObservableFromLink=function(e,r,n,i){var a=this;i===void 0&&(i=this.queryDeduplication);var o,m=this.transform(e).serverQuery;if(m){var E=this,k=E.inFlightLinkObservables,P=E.link,U={query:m,variables:n,operationName:dn(m)||void 0,context:this.prepareContext(De(De({},r),{forceFetch:!i}))};if(r=U.context,i){var z=k.get(m)||new Map;k.set(m,z);var le=JSON.stringify(n);if(o=z.get(le),!o){z.set(le,o=St(ts(P,U)));var ce=function(){z.delete(le),z.size||k.delete(m),me.unsubscribe()},me=o.subscribe({next:ce,error:ce,complete:ce})}}else o=St(ts(P,U))}else o=mn.of({data:{}}),r=this.prepareContext(r);var Te=this.transform(e).clientQuery;return Te&&(o=ct(o,function(Re){return a.localState.runResolvers({document:Te,remoteResult:Re,context:r,variables:n})})),o},t.prototype.fetchRequest=function(e){var r=this,n=e.requestId,i=e.queryId,a=e.document,o=e.options,m=e.fetchMoreForQueryId,E=o.variables,k=o.errorPolicy,P=k===void 0?"none":k,U=o.fetchPolicy,z,le;return new Promise(function(ce,me){var Te=r.getObservableFromLink(a,o.context,E),Re="fetchRequest:"+i;r.fetchQueryRejectFns.set(Re,me);var xe=function(){r.fetchQueryRejectFns.delete(Re),r.setQuery(i,function(Ae){var He=Ae.subscriptions;He.delete(Oe)})},Oe=Te.map(function(Ae){if(n>=r.getQuery(i).lastRequestId&&(r.markQueryResult(i,Ae,o,m),r.queryStore.markQueryResult(i,Ae,m),r.invalidate(i),r.invalidate(m),r.broadcastQueries()),P==="none"&&Si(Ae.errors))return me(new fn({graphQLErrors:Ae.errors}));if(P==="all"&&(le=Ae.errors),m||U==="no-cache")z=Ae.data;else{var He=r.dataStore.getCache().diff({variables:E,query:a,optimistic:!1,returnPartialData:!0}),ft=He.result,gt=He.complete;(gt||o.returnPartialData)&&(z=ft)}}).subscribe({error:function(Ae){xe(),me(Ae)},complete:function(){xe(),ce({data:z,errors:le,loading:!1,networkStatus:Dt.ready,stale:!1})}});r.setQuery(i,function(Ae){var He=Ae.subscriptions;He.add(Oe)})})},t.prototype.getQuery=function(e){return this.queries.get(e)||{listeners:new Set,invalidated:!1,document:null,newData:null,lastRequestId:1,observableQuery:null,subscriptions:new Set}},t.prototype.setQuery=function(e,r){var n=this.getQuery(e),i=De(De({},n),r(n));this.queries.set(e,i)},t.prototype.invalidate=function(e,r){r===void 0&&(r=!0),e&&this.setQuery(e,function(){return{invalidated:r}})},t.prototype.prepareContext=function(e){e===void 0&&(e={});var r=this.localState.prepareContext(e);return De(De({},r),{clientAwareness:this.clientAwareness})},t.prototype.checkInFlight=function(e){var r=this.queryStore.get(e);return r&&r.networkStatus!==Dt.ready&&r.networkStatus!==Dt.error},t.prototype.startPollingQuery=function(e,r,n){var i=this,a=e.pollInterval;if(Ce(a,18),!this.ssrMode){var o=this.pollingInfoByQueryId.get(r);o||this.pollingInfoByQueryId.set(r,o={}),o.interval=a,o.options=De(De({},e),{fetchPolicy:"network-only"});var m=function(){var k=i.pollingInfoByQueryId.get(r);k&&(i.checkInFlight(r)?E():i.fetchQuery(r,k.options,Jn.poll).then(E,E))},E=function(){var k=i.pollingInfoByQueryId.get(r);k&&(clearTimeout(k.timeout),k.timeout=setTimeout(m,k.interval))};n&&this.addQueryListener(r,n),E()}return r},t.prototype.stopPollingQuery=function(e){this.pollingInfoByQueryId.delete(e)},t}(),Ir=function(){function t(e){this.cache=e}return t.prototype.getCache=function(){return this.cache},t.prototype.markQueryResult=function(e,r,n,i,a){a===void 0&&(a=!1);var o=!Xn(e);a&&Xn(e)&&e.data&&(o=!0),!i&&o&&this.cache.write({result:e.data,dataId:"ROOT_QUERY",query:r,variables:n})},t.prototype.markSubscriptionResult=function(e,r,n){Xn(e)||this.cache.write({result:e.data,dataId:"ROOT_SUBSCRIPTION",query:r,variables:n})},t.prototype.markMutationInit=function(e){var r=this;if(e.optimisticResponse){var n;typeof e.optimisticResponse=="function"?n=e.optimisticResponse(e.variables):n=e.optimisticResponse,this.cache.recordOptimisticTransaction(function(i){var a=r.cache;r.cache=i;try{r.markMutationResult({mutationId:e.mutationId,result:{data:n},document:e.document,variables:e.variables,updateQueries:e.updateQueries,update:e.update})}finally{r.cache=a}},e.mutationId)}},t.prototype.markMutationResult=function(e){var r=this;if(!Xn(e.result)){var n=[{result:e.result.data,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}],i=e.updateQueries;i&&Object.keys(i).forEach(function(a){var o=i[a],m=o.query,E=o.updater,k=r.cache.diff({query:m.document,variables:m.variables,returnPartialData:!0,optimistic:!1}),P=k.result,U=k.complete;if(U){var z=Ur(function(){return E(P,{mutationResult:e.result,queryName:dn(m.document)||void 0,queryVariables:m.variables})});z&&n.push({result:z,dataId:"ROOT_QUERY",query:m.document,variables:m.variables})}}),this.cache.performTransaction(function(a){n.forEach(function(m){return a.write(m)});var o=e.update;o&&Ur(function(){return o(a,e.result)})})}},t.prototype.markMutationComplete=function(e){var r=e.mutationId,n=e.optimisticResponse;n&&this.cache.removeOptimistic(r)},t.prototype.markUpdateQueryResult=function(e,r,n){this.cache.write({result:n,dataId:"ROOT_QUERY",variables:r,query:e})},t.prototype.reset=function(){return this.cache.reset()},t}(),rs="2.6.10",$a=!1,Ga=function(){function t(e){var r=this;this.defaultOptions={},this.resetStoreCallbacks=[],this.clearStoreCallbacks=[];var n=e.cache,i=e.ssrMode,a=i===void 0?!1:i,o=e.ssrForceFetchDelay,m=o===void 0?0:o,E=e.connectToDevTools,k=e.queryDeduplication,P=k===void 0?!0:k,U=e.defaultOptions,z=e.assumeImmutableResults,le=z===void 0?!1:z,ce=e.resolvers,me=e.typeDefs,Te=e.fragmentMatcher,Re=e.name,xe=e.version,Oe=e.link;if(!Oe&&ce&&(Oe=zr.empty()),!Oe||!n)throw new Pe(4);this.link=Oe,this.cache=n,this.store=new Ir(n),this.disableNetworkFetches=a||m>0,this.queryDeduplication=P,this.defaultOptions=U||{},this.typeDefs=me,m&&setTimeout(function(){return r.disableNetworkFetches=!1},m),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this);var Ae=!1;(typeof E=="undefined"?Ae:E&&typeof window!="undefined")&&(window.__APOLLO_CLIENT__=this),this.version=rs,this.localState=new yt({cache:n,client:this,resolvers:ce,fragmentMatcher:Te}),this.queryManager=new $r({link:this.link,store:this.store,queryDeduplication:P,ssrMode:a,clientAwareness:{name:Re,version:xe},localState:this.localState,assumeImmutableResults:le,onBroadcast:function(){r.devToolsHookCb&&r.devToolsHookCb({action:{},state:{queries:r.queryManager.queryStore.getStore(),mutations:r.queryManager.mutationStore.getStore()},dataWithOptimisticResults:r.cache.extract(!0)})}})}return t.prototype.stop=function(){this.queryManager.stop()},t.prototype.watchQuery=function(e){return this.defaultOptions.watchQuery&&(e=De(De({},this.defaultOptions.watchQuery),e)),this.disableNetworkFetches&&(e.fetchPolicy==="network-only"||e.fetchPolicy==="cache-and-network")&&(e=De(De({},e),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(e)},t.prototype.query=function(e){return this.defaultOptions.query&&(e=De(De({},this.defaultOptions.query),e)),Ce(e.fetchPolicy!=="cache-and-network",5),this.disableNetworkFetches&&e.fetchPolicy==="network-only"&&(e=De(De({},e),{fetchPolicy:"cache-first"})),this.queryManager.query(e)},t.prototype.mutate=function(e){return this.defaultOptions.mutate&&(e=De(De({},this.defaultOptions.mutate),e)),this.queryManager.mutate(e)},t.prototype.subscribe=function(e){return this.queryManager.startGraphQLSubscription(e)},t.prototype.readQuery=function(e,r){return r===void 0&&(r=!1),this.cache.readQuery(e,r)},t.prototype.readFragment=function(e,r){return r===void 0&&(r=!1),this.cache.readFragment(e,r)},t.prototype.writeQuery=function(e){var r=this.cache.writeQuery(e);return this.queryManager.broadcastQueries(),r},t.prototype.writeFragment=function(e){var r=this.cache.writeFragment(e);return this.queryManager.broadcastQueries(),r},t.prototype.writeData=function(e){var r=this.cache.writeData(e);return this.queryManager.broadcastQueries(),r},t.prototype.__actionHookForDevTools=function(e){this.devToolsHookCb=e},t.prototype.__requestRaw=function(e){return ts(this.link,e)},t.prototype.initQueryManager=function(){return this.queryManager},t.prototype.resetStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore()}).then(function(){return Promise.all(e.resetStoreCallbacks.map(function(r){return r()}))}).then(function(){return e.reFetchObservableQueries()})},t.prototype.clearStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore()}).then(function(){return Promise.all(e.clearStoreCallbacks.map(function(r){return r()}))})},t.prototype.onResetStore=function(e){var r=this;return this.resetStoreCallbacks.push(e),function(){r.resetStoreCallbacks=r.resetStoreCallbacks.filter(function(n){return n!==e})}},t.prototype.onClearStore=function(e){var r=this;return this.clearStoreCallbacks.push(e),function(){r.clearStoreCallbacks=r.clearStoreCallbacks.filter(function(n){return n!==e})}},t.prototype.reFetchObservableQueries=function(e){return this.queryManager.reFetchObservableQueries(e)},t.prototype.extract=function(e){return this.cache.extract(e)},t.prototype.restore=function(e){return this.cache.restore(e)},t.prototype.addResolvers=function(e){this.localState.addResolvers(e)},t.prototype.setResolvers=function(e){this.localState.setResolvers(e)},t.prototype.getResolvers=function(){return this.localState.getResolvers()},t.prototype.setLocalStateFragmentMatcher=function(e){this.localState.setFragmentMatcher(e)},t}();const sc=null;function Ip(t){var e={kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GeneratedClientQuery"},selectionSet:uu(t)},r={kind:"Document",definitions:[e]};return r}function Op(t,e){var r={kind:"FragmentDefinition",typeCondition:{kind:"NamedType",name:{kind:"Name",value:e||"__FakeType"}},name:{kind:"Name",value:"GeneratedClientQuery"},selectionSet:uu(t)},n={kind:"Document",definitions:[r]};return n}function uu(t){if(typeof t=="number"||typeof t=="boolean"||typeof t=="string"||typeof t=="undefined"||t===null)return null;if(Array.isArray(t))return uu(t[0]);var e=[];Object.keys(t).forEach(function(n){var i=uu(t[n]),a={kind:"Field",name:{kind:"Name",value:n},selectionSet:i||void 0};e.push(a)});var r={kind:"SelectionSet",selections:e};return r}var Dp={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:null,variableDefinitions:null,directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"__typename"},arguments:[],directives:[],selectionSet:null}]}}]},xp=function(){function t(){}return t.prototype.transformDocument=function(e){return e},t.prototype.transformForLink=function(e){return e},t.prototype.readQuery=function(e,r){return r===void 0&&(r=!1),this.read({query:e.query,variables:e.variables,optimistic:r})},t.prototype.readFragment=function(e,r){return r===void 0&&(r=!1),this.read({query:Lr(e.fragment,e.fragmentName),variables:e.variables,rootId:e.id,optimistic:r})},t.prototype.writeQuery=function(e){this.write({dataId:"ROOT_QUERY",result:e.data,query:e.query,variables:e.variables})},t.prototype.writeFragment=function(e){this.write({dataId:e.id,result:e.data,variables:e.variables,query:Lr(e.fragment,e.fragmentName)})},t.prototype.writeData=function(e){var r=e.id,n=e.data;if(typeof r!="undefined"){var i=null;try{i=this.read({rootId:r,optimistic:!1,query:Dp})}catch(m){}var a=i&&i.__typename||"__ClientData",o=Object.assign({__typename:a},n);this.writeFragment({id:r,fragment:Op(o,a),data:o})}else this.writeQuery({query:Ip(n),data:n})},t}(),Sd;(function(t){})(Sd||(Sd={}));var mr=null,Td={},Mp=1,Fp=function(){return function(){function t(){this.id=["slot",Mp++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return t.prototype.hasValue=function(){for(var e=mr;e;e=e.parent)if(this.id in e.slots){var r=e.slots[this.id];if(r===Td)break;return e!==mr&&(mr.slots[this.id]=r),!0}return mr&&(mr.slots[this.id]=Td),!1},t.prototype.getValue=function(){if(this.hasValue())return mr.slots[this.id]},t.prototype.withValue=function(e,r,n,i){var a,o=(a={__proto__:null},a[this.id]=e,a),m=mr;mr={parent:m,slots:o};try{return r.apply(i,n)}finally{mr=m}},t.bind=function(e){var r=mr;return function(){var n=mr;try{return mr=r,e.apply(this,arguments)}finally{mr=n}}},t.noContext=function(e,r,n){if(mr){var i=mr;try{return mr=null,e.apply(n,r)}finally{mr=i}}else return e.apply(n,r)},t}()},ac="@wry/context:Slot",oc=Array,uc=oc[ac]||function(){var t=Fp();try{Object.defineProperty(oc,ac,{value:oc[ac]=t,enumerable:!1,writable:!1,configurable:!1})}finally{return t}}(),lc=uc.bind,Lp=uc.noContext;function ey(t,e){return setTimeout(lc(t),e)}function ty(t){return function(){var e=t.apply(this,arguments),r=lc(e.next),n=lc(e.throw);return new Promise(function(i,a){function o(k,P){try{var U=k.call(e,P)}catch(le){return a(le)}var z=U.done?i:m;qp(U.value)?U.value.then(z,U.done?a:E):z(U.value)}var m=function(k){return o(r,k)},E=function(k){return o(n,k)};m()})}}function qp(t){return t&&typeof t.then=="function"}var Rd=null;function ry(t){if(Rd.indexOf(t)<0){var e=function(r,n){var i=r[n];r[n]=function(){return Lp(i,arguments,this)}};e(t,"yield"),e(t.prototype,"run"),e(t.prototype,"throwInto"),Rd.push(t)}return t}function Up(){}var $p=function(){function t(e,r){e===void 0&&(e=Infinity),r===void 0&&(r=Up),this.max=e,this.dispose=r,this.map=new Map,this.newest=null,this.oldest=null}return t.prototype.has=function(e){return this.map.has(e)},t.prototype.get=function(e){var r=this.getEntry(e);return r&&r.value},t.prototype.getEntry=function(e){var r=this.map.get(e);if(r&&r!==this.newest){var n=r.older,i=r.newer;i&&(i.older=n),n&&(n.newer=i),r.older=this.newest,r.older.newer=r,r.newer=null,this.newest=r,r===this.oldest&&(this.oldest=i)}return r},t.prototype.set=function(e,r){var n=this.getEntry(e);return n?n.value=r:(n={key:e,value:r,newer:null,older:this.newest},this.newest&&(this.newest.newer=n),this.newest=n,this.oldest=this.oldest||n,this.map.set(e,n),n.value)},t.prototype.clean=function(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)},t.prototype.delete=function(e){var r=this.map.get(e);return r?(r===this.newest&&(this.newest=r.older),r===this.oldest&&(this.oldest=r.newer),r.newer&&(r.newer.older=r.older),r.older&&(r.older.newer=r.newer),this.map.delete(e),this.dispose(r.value,e),!0):!1},t}(),lu=new uc,Gp=[],cc=[],Hp=100;function Ms(t,e){if(!t)throw new Error(e||"assertion failure")}function Bp(t,e){var r=t.length;return r>0&&r===e.length&&t[r-1]===e[r-1]}function Cd(t){switch(t.length){case 0:throw new Error("unknown value");case 1:return t[0];case 2:throw t[1]}}function Vp(t){return t.slice(0)}var jp=function(){function t(e,r){this.fn=e,this.args=r,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],++t.count}return t.prototype.recompute=function(){if(Ms(!this.recomputing,"already recomputing"),!(!zp(this)&&dc(this)))return Fs(this)?Qp(this):Cd(this.value)},t.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value.length=0,Pd(this),hc(this))},t.prototype.dispose=function(){var e=this;Dd(this).forEach(dc),hc(this),this.parents.forEach(function(r){r.setDirty(),xd(r,e)})},t.count=0,t}();function zp(t){var e=lu.getValue();if(e)return t.parents.add(e),e.childValues.has(t)||e.childValues.set(t,[]),Fs(t)?Ad(e,t):Id(e,t),e}function Qp(t){var e=Dd(t);return lu.withValue(t,Wp,[t]),Yp(t)&&Kp(t),e.forEach(dc),Cd(t.value)}function Wp(t){t.recomputing=!0,t.value.length=0;try{t.value[0]=t.fn.apply(null,t.args)}catch(e){t.value[1]=e}t.recomputing=!1}function Fs(t){return t.dirty||!!(t.dirtyChildren&&t.dirtyChildren.size)}function Kp(t){t.dirty=!1,!Fs(t)&&Nd(t)}function Pd(t){t.parents.forEach(function(e){return Ad(e,t)})}function Nd(t){t.parents.forEach(function(e){return Id(e,t)})}function Ad(t,e){if(Ms(t.childValues.has(e)),Ms(Fs(e)),!t.dirtyChildren)t.dirtyChildren=cc.pop()||new Set;else if(t.dirtyChildren.has(e))return;t.dirtyChildren.add(e),Pd(t)}function Id(t,e){Ms(t.childValues.has(e)),Ms(!Fs(e));var r=t.childValues.get(e);r.length===0?t.childValues.set(e,Vp(e.value)):Bp(r,e.value)||t.setDirty(),Od(t,e),!Fs(t)&&Nd(t)}function Od(t,e){var r=t.dirtyChildren;r&&(r.delete(e),r.size===0&&(cc.length<Hp&&cc.push(r),t.dirtyChildren=null))}function dc(t){return t.parents.size===0&&typeof t.reportOrphan=="function"&&t.reportOrphan()===!0}function Dd(t){var e=Gp;return t.childValues.size>0&&(e=[],t.childValues.forEach(function(r,n){xd(t,n),e.push(n)})),Ms(t.dirtyChildren===null),e}function xd(t,e){e.parents.delete(t),t.childValues.delete(e),Od(t,e)}function Yp(t){if(typeof t.subscribe=="function")try{hc(t),t.unsubscribe=t.subscribe.apply(null,t.args)}catch(e){return t.setDirty(),!1}return!0}function hc(t){var e=t.unsubscribe;typeof e=="function"&&(t.unsubscribe=void 0,e())}var pc=function(){function t(e){this.weakness=e}return t.prototype.lookup=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this.lookupArray(e)},t.prototype.lookupArray=function(e){var r=this;return e.forEach(function(n){return r=r.getChildTrie(n)}),r.data||(r.data=Object.create(null))},t.prototype.getChildTrie=function(e){var r=this.weakness&&Xp(e)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),n=r.get(e);return n||r.set(e,n=new t(this.weakness)),n},t}();function Xp(t){switch(typeof t){case"object":if(t===null)break;case"function":return!0}return!1}var Jp=new pc(typeof WeakMap=="function");function Zp(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Jp.lookupArray(t)}var mc=new Set;function Ha(t,e){e===void 0&&(e=Object.create(null));var r=new $p(e.max||Math.pow(2,16),function(o){return o.dispose()}),n=!!e.disposable,i=e.makeCacheKey||Zp;function a(){if(!(n&&!lu.hasValue())){var o=i.apply(null,arguments);if(o===void 0)return t.apply(null,arguments);var m=Array.prototype.slice.call(arguments),E=r.get(o);E?E.args=m:(E=new jp(t,m),r.set(o,E),E.subscribe=e.subscribe,n&&(E.reportOrphan=function(){return r.delete(o)}));var k=E.recompute();return r.set(o,E),mc.add(r),lu.hasValue()||(mc.forEach(function(P){return P.clean()}),mc.clear()),n?void 0:k}}return a.dirty=function(){var o=i.apply(null,arguments),m=o!==void 0&&r.get(o);m&&m.setDirty()},a}var Md=!1;function Fd(){var t=!Md;return nr()||(Md=!0),t}var em=function(){function t(){}return t.prototype.ensureReady=function(){return Promise.resolve()},t.prototype.canBypassInit=function(){return!0},t.prototype.match=function(e,r,n){var i=n.store.get(e.id),a=e.id==="ROOT_QUERY";if(!i)return a;var o=i.__typename,m=o===void 0?a&&"Query":o;return m&&m===r?!0:(Fd(),"heuristic")},t}(),ny=function(){function t(e){e&&e.introspectionQueryResultData?(this.possibleTypesMap=this.parseIntrospectionResult(e.introspectionQueryResultData),this.isReady=!0):this.isReady=!1,this.match=this.match.bind(this)}return t.prototype.match=function(e,r,n){Ce(this.isReady,1);var i=n.store.get(e.id),a=e.id==="ROOT_QUERY";if(!i)return a;var o=i.__typename,m=o===void 0?a&&"Query":o;if(Ce(m,2),m===r)return!0;var E=this.possibleTypesMap[r];return!!(m&&E&&E.indexOf(m)>-1)},t.prototype.parseIntrospectionResult=function(e){var r={};return e.__schema.types.forEach(function(n){(n.kind==="UNION"||n.kind==="INTERFACE")&&(r[n.name]=n.possibleTypes.map(function(i){return i.name}))}),r},t}(),Ld=Object.prototype.hasOwnProperty,Ls=function(){function t(e){var r=this;e===void 0&&(e=Object.create(null)),this.data=e,this.depend=Ha(function(n){return r.data[n]},{disposable:!0,makeCacheKey:function(n){return n}})}return t.prototype.toObject=function(){return this.data},t.prototype.get=function(e){return this.depend(e),this.data[e]},t.prototype.set=function(e,r){var n=this.data[e];r!==n&&(this.data[e]=r,this.depend.dirty(e))},t.prototype.delete=function(e){Ld.call(this.data,e)&&(delete this.data[e],this.depend.dirty(e))},t.prototype.clear=function(){this.replace(null)},t.prototype.replace=function(e){var r=this;e?(Object.keys(e).forEach(function(n){r.set(n,e[n])}),Object.keys(this.data).forEach(function(n){Ld.call(e,n)||r.delete(n)})):Object.keys(this.data).forEach(function(n){r.delete(n)})},t}();function qd(t){return new Ls(t)}var tm=function(){function t(e){var r=this,n=e===void 0?{}:e,i=n.cacheKeyRoot,a=i===void 0?new pc(Fe):i,o=n.freezeResults,m=o===void 0?!1:o,E=this,k=E.executeStoreQuery,P=E.executeSelectionSet,U=E.executeSubSelectedArray;this.freezeResults=m,this.executeStoreQuery=Ha(function(z){return k.call(r,z)},{makeCacheKey:function(z){var le=z.query,ce=z.rootValue,me=z.contextValue,Te=z.variableValues,Re=z.fragmentMatcher;if(me.store instanceof Ls)return a.lookup(me.store,le,Re,JSON.stringify(Te),ce.id)}}),this.executeSelectionSet=Ha(function(z){return P.call(r,z)},{makeCacheKey:function(z){var le=z.selectionSet,ce=z.rootValue,me=z.execContext;if(me.contextValue.store instanceof Ls)return a.lookup(me.contextValue.store,le,me.fragmentMatcher,JSON.stringify(me.variableValues),ce.id)}}),this.executeSubSelectedArray=Ha(function(z){return U.call(r,z)},{makeCacheKey:function(z){var le=z.field,ce=z.array,me=z.execContext;if(me.contextValue.store instanceof Ls)return a.lookup(me.contextValue.store,le,ce,JSON.stringify(me.variableValues))}})}return t.prototype.readQueryFromStore=function(e){return this.diffQueryAgainstStore(De(De({},e),{returnPartialData:!1})).result},t.prototype.diffQueryAgainstStore=function(e){var r=e.store,n=e.query,i=e.variables,a=e.previousResult,o=e.returnPartialData,m=o===void 0?!0:o,E=e.rootId,k=E===void 0?"ROOT_QUERY":E,P=e.fragmentMatcherFunction,U=e.config,z=hn(n);i=jr({},Xi(z),i);var le={store:r,dataIdFromObject:U&&U.dataIdFromObject,cacheRedirects:U&&U.cacheRedirects||{}},ce=this.executeStoreQuery({query:n,rootValue:{type:"id",id:k,generated:!0,typename:"Query"},contextValue:le,variableValues:i,fragmentMatcher:P}),me=ce.missing&&ce.missing.length>0;return me&&!m&&ce.missing.forEach(function(Te){if(!Te.tolerable)throw new Pe(8)}),a&&Ke(a,ce.result)&&(ce.result=a),{result:ce.result,complete:!me}},t.prototype.executeStoreQuery=function(e){var r=e.query,n=e.rootValue,i=e.contextValue,a=e.variableValues,o=e.fragmentMatcher,m=o===void 0?rm:o,E=Yi(r),k=Vt(r),P=Ei(k),U={query:r,fragmentMap:P,contextValue:i,variableValues:a,fragmentMatcher:m};return this.executeSelectionSet({selectionSet:E.selectionSet,rootValue:n,execContext:U})},t.prototype.executeSelectionSet=function(e){var r=this,n=e.selectionSet,i=e.rootValue,a=e.execContext,o=a.fragmentMap,m=a.contextValue,E=a.variableValues,k={result:null},P=[],U=m.store.get(i.id),z=U&&U.__typename||i.id==="ROOT_QUERY"&&"Query"||void 0;function le(ce){var me;return ce.missing&&(k.missing=k.missing||[],(me=k.missing).push.apply(me,ce.missing)),ce.result}return n.selections.forEach(function(ce){var me;if(!!_i(ce,E))if(Nr(ce)){var Te=le(r.executeField(U,z,ce,a));typeof Te!="undefined"&&P.push((me={},me[br(ce)]=Te,me))}else{var Re=void 0;if(_r(ce))Re=ce;else if(Re=o[ce.name.value],!Re)throw new Pe(9);var xe=Re.typeCondition&&Re.typeCondition.name.value,Oe=!xe||a.fragmentMatcher(i,xe,m);if(Oe){var Ae=r.executeSelectionSet({selectionSet:Re.selectionSet,rootValue:i,execContext:a});Oe==="heuristic"&&Ae.missing&&(Ae=De(De({},Ae),{missing:Ae.missing.map(function(He){return De(De({},He),{tolerable:!0})})})),P.push(le(Ae))}}}),k.result=Da(P),this.freezeResults,k},t.prototype.executeField=function(e,r,n,i){var a=i.variableValues,o=i.contextValue,m=n.name.value,E=cn(n,a),k={resultKey:br(n),directives:Cs(n,a)},P=nm(e,r,m,E,o,k);return Array.isArray(P.result)?this.combineExecResults(P,this.executeSubSelectedArray({field:n,array:P.result,execContext:i})):n.selectionSet?P.result==null?P:this.combineExecResults(P,this.executeSelectionSet({selectionSet:n.selectionSet,rootValue:P.result,execContext:i})):(Ud(n,P.result),this.freezeResults,P)},t.prototype.combineExecResults=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n;return e.forEach(function(i){i.missing&&(n=n||[],n.push.apply(n,i.missing))}),{result:e.pop().result,missing:n}},t.prototype.executeSubSelectedArray=function(e){var r=this,n=e.field,i=e.array,a=e.execContext,o;function m(E){return E.missing&&(o=o||[],o.push.apply(o,E.missing)),E.result}return i=i.map(function(E){return E===null?null:Array.isArray(E)?m(r.executeSubSelectedArray({field:n,array:E,execContext:a})):n.selectionSet?m(r.executeSelectionSet({selectionSet:n.selectionSet,rootValue:E,execContext:a})):(Ud(n,E),E)}),this.freezeResults,{result:i,missing:o}},t}();function Ud(t,e){if(!t.selectionSet&&Wn(e))throw new Pe(10)}function rm(){return!0}function iy(t){invariant(isIdValue(t),11)}function nm(t,e,r,n,i,a){var o=a.resultKey,m=a.directives,E=r;(n||m)&&(E=Rs(E,n,m));var k=void 0;if(t&&(k=t[E],typeof k=="undefined"&&i.cacheRedirects&&typeof e=="string")){var P=i.cacheRedirects[e];if(P){var U=P[r];U&&(k=U(t,n,{getCacheKey:function(z){var le=i.dataIdFromObject(z);return le&&Kn({id:le,typename:z.__typename})}}))}}return typeof k=="undefined"?{result:k,missing:[{object:t,fieldName:E,tolerable:!1}]}:(Vr(k)&&(k=k.json),{result:k})}var cu=function(){function t(e){e===void 0&&(e=Object.create(null)),this.data=e}return t.prototype.toObject=function(){return this.data},t.prototype.get=function(e){return this.data[e]},t.prototype.set=function(e,r){this.data[e]=r},t.prototype.delete=function(e){this.data[e]=void 0},t.prototype.clear=function(){this.data=Object.create(null)},t.prototype.replace=function(e){this.data=e||Object.create(null)},t}();function sy(t){return new cu(t)}var im=function(t){ln(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="WriteError",r}return e}(Error);function sm(t,e){var r=new im(`Error writing result to store for query:
 `+JSON.stringify(e));return r.message+=`
`+t.message,r.stack=t.stack,r}var am=function(){function t(){}return t.prototype.writeQueryToStore=function(e){var r=e.query,n=e.result,i=e.store,a=i===void 0?qd():i,o=e.variables,m=e.dataIdFromObject,E=e.fragmentMatcherFunction;return this.writeResultToStore({dataId:"ROOT_QUERY",result:n,document:r,store:a,variables:o,dataIdFromObject:m,fragmentMatcherFunction:E})},t.prototype.writeResultToStore=function(e){var r=e.dataId,n=e.result,i=e.document,a=e.store,o=a===void 0?qd():a,m=e.variables,E=e.dataIdFromObject,k=e.fragmentMatcherFunction,P=pt(i);try{return this.writeSelectionSetToStore({result:n,dataId:r,selectionSet:P.selectionSet,context:{store:o,processedData:{},variables:jr({},Xi(P),m),dataIdFromObject:E,fragmentMap:Ei(Vt(i)),fragmentMatcherFunction:k}})}catch(U){throw sm(U,i)}},t.prototype.writeSelectionSetToStore=function(e){var r=this,n=e.result,i=e.dataId,a=e.selectionSet,o=e.context,m=o.variables,E=o.store,k=o.fragmentMap;return a.selections.forEach(function(P){var U;if(!!_i(P,m))if(Nr(P)){var z=br(P),le=n[z];if(typeof le!="undefined")r.writeFieldToStore({dataId:i,value:le,field:P,context:o});else{var ce=!1,me=!1;P.directives&&P.directives.length&&(ce=P.directives.some(function(ft){return ft.name&&ft.name.value==="defer"}),me=P.directives.some(function(ft){return ft.name&&ft.name.value==="client"})),!ce&&!me&&o.fragmentMatcherFunction}}else{var Te=void 0;_r(P)?Te=P:(Te=(k||{})[P.name.value],Ce(Te,3));var Re=!0;if(o.fragmentMatcherFunction&&Te.typeCondition){var xe=i||"self",Oe=Kn({id:xe,typename:void 0}),Ae={store:new cu((U={},U[xe]=n,U)),cacheRedirects:{}},He=o.fragmentMatcherFunction(Oe,Te.typeCondition.name.value,Ae);!ur()&&He==="heuristic",Re=!!He}Re&&r.writeSelectionSetToStore({result:n,selectionSet:Te.selectionSet,dataId:i,context:o})}}),E},t.prototype.writeFieldToStore=function(e){var r,n=e.field,i=e.value,a=e.dataId,o=e.context,m=o.variables,E=o.dataIdFromObject,k=o.store,P,U,z=ut(n,m);if(!n.selectionSet||i===null)P=i!=null&&typeof i=="object"?{type:"json",json:i}:i;else if(Array.isArray(i)){var le=a+"."+z;P=this.processArrayValue(i,le,n.selectionSet,o)}else{var ce=a+"."+z,me=!0;if(fc(ce)||(ce="$"+ce),E){var Te=E(i);Ce(!Te||!fc(Te),4),(Te||typeof Te=="number"&&Te===0)&&(ce=Te,me=!1)}Gd(ce,n,o.processedData)||this.writeSelectionSetToStore({dataId:ce,result:i,selectionSet:n.selectionSet,context:o});var Re=i.__typename;P=Kn({id:ce,typename:Re},me),U=k.get(a);var xe=U&&U[z];if(xe!==P&&Wn(xe)){var Oe=xe.typename!==void 0,Ae=Re!==void 0,He=Oe&&Ae&&xe.typename!==Re;Ce(!me||xe.generated||He,5),Ce(!Oe||Ae,6),xe.generated&&(He?me||k.delete(xe.id):$d(xe.id,P.id,k))}}U=k.get(a),(!U||!Ke(P,U[z]))&&k.set(a,De(De({},U),(r={},r[z]=P,r)))},t.prototype.processArrayValue=function(e,r,n,i){var a=this;return e.map(function(o,m){if(o===null)return null;var E=r+"."+m;if(Array.isArray(o))return a.processArrayValue(o,E,n,i);var k=!0;if(i.dataIdFromObject){var P=i.dataIdFromObject(o);P&&(E=P,k=!1)}return Gd(E,n,i.processedData)||a.writeSelectionSetToStore({dataId:E,result:o,selectionSet:n,context:i}),Kn({id:E,typename:o.__typename},k)})},t}();function fc(t){return t[0]==="$"}function $d(t,e,r){if(t===e)return!1;var n=r.get(t),i=r.get(e),a=!1;Object.keys(n).forEach(function(m){var E=n[m],k=i[m];Wn(E)&&fc(E.id)&&Wn(k)&&!Ke(E,k)&&$d(E.id,k.id,r)&&(a=!0)}),r.delete(t);var o=De(De({},n),i);return Ke(o,i)?a:(r.set(e,o),!0)}function Gd(t,e,r){if(!r)return!1;if(r[t]){if(r[t].indexOf(e)>=0)return!0;r[t].push(e)}else r[t]=[e];return!1}var om={fragmentMatcher:new em,dataIdFromObject:um,addTypename:!0,resultCaching:!0,freezeResults:!1};function um(t){if(t.__typename){if(t.id!==void 0)return t.__typename+":"+t.id;if(t._id!==void 0)return t.__typename+":"+t._id}return null}var lm=Object.prototype.hasOwnProperty,Hd=function(t){ln(e,t);function e(r,n,i){var a=t.call(this,Object.create(null))||this;return a.optimisticId=r,a.parent=n,a.transaction=i,a}return e.prototype.toObject=function(){return De(De({},this.parent.toObject()),this.data)},e.prototype.get=function(r){return lm.call(this.data,r)?this.data[r]:this.parent.get(r)},e}(cu),cm=function(t){ln(e,t);function e(r){r===void 0&&(r={});var n=t.call(this)||this;n.watches=new Set,n.typenameDocumentCache=new Map,n.cacheKeyRoot=new pc(Fe),n.silenceBroadcast=!1,n.config=De(De({},om),r),n.config.customResolvers&&(n.config.cacheRedirects=n.config.customResolvers),n.config.cacheResolvers&&(n.config.cacheRedirects=n.config.cacheResolvers),n.addTypename=!!n.config.addTypename,n.data=n.config.resultCaching?new Ls:new cu,n.optimisticData=n.data,n.storeWriter=new am,n.storeReader=new tm({cacheKeyRoot:n.cacheKeyRoot,freezeResults:r.freezeResults});var i=n,a=i.maybeBroadcastWatch;return n.maybeBroadcastWatch=Ha(function(o){return a.call(n,o)},{makeCacheKey:function(o){if(!o.optimistic&&!o.previousResult&&i.data instanceof Ls)return i.cacheKeyRoot.lookup(o.query,JSON.stringify(o.variables))}}),n}return e.prototype.restore=function(r){return r&&this.data.replace(r),this},e.prototype.extract=function(r){return r===void 0&&(r=!1),(r?this.optimisticData:this.data).toObject()},e.prototype.read=function(r){if(typeof r.rootId=="string"&&typeof this.data.get(r.rootId)=="undefined")return null;var n=this.config.fragmentMatcher,i=n&&n.match;return this.storeReader.readQueryFromStore({store:r.optimistic?this.optimisticData:this.data,query:this.transformDocument(r.query),variables:r.variables,rootId:r.rootId,fragmentMatcherFunction:i,previousResult:r.previousResult,config:this.config})||null},e.prototype.write=function(r){var n=this.config.fragmentMatcher,i=n&&n.match;this.storeWriter.writeResultToStore({dataId:r.dataId,result:r.result,variables:r.variables,document:this.transformDocument(r.query),store:this.data,dataIdFromObject:this.config.dataIdFromObject,fragmentMatcherFunction:i}),this.broadcastWatches()},e.prototype.diff=function(r){var n=this.config.fragmentMatcher,i=n&&n.match;return this.storeReader.diffQueryAgainstStore({store:r.optimistic?this.optimisticData:this.data,query:this.transformDocument(r.query),variables:r.variables,returnPartialData:r.returnPartialData,previousResult:r.previousResult,fragmentMatcherFunction:i,config:this.config})},e.prototype.watch=function(r){var n=this;return this.watches.add(r),function(){n.watches.delete(r)}},e.prototype.evict=function(r){throw new Pe(7)},e.prototype.reset=function(){return this.data.clear(),this.broadcastWatches(),Promise.resolve()},e.prototype.removeOptimistic=function(r){for(var n=[],i=0,a=this.optimisticData;a instanceof Hd;)a.optimisticId===r?++i:n.push(a),a=a.parent;if(i>0){for(this.optimisticData=a;n.length>0;){var o=n.pop();this.performTransaction(o.transaction,o.optimisticId)}this.broadcastWatches()}},e.prototype.performTransaction=function(r,n){var i=this,a=i.data,o=i.silenceBroadcast;this.silenceBroadcast=!0,typeof n=="string"&&(this.data=this.optimisticData=new Hd(n,this.optimisticData,r));try{r(this)}finally{this.silenceBroadcast=o,this.data=a}this.broadcastWatches()},e.prototype.recordOptimisticTransaction=function(r,n){return this.performTransaction(r,n)},e.prototype.transformDocument=function(r){if(this.addTypename){var n=this.typenameDocumentCache.get(r);return n||(n=Nn(r),this.typenameDocumentCache.set(r,n),this.typenameDocumentCache.set(n,n)),n}return r},e.prototype.broadcastWatches=function(){var r=this;this.silenceBroadcast||this.watches.forEach(function(n){return r.maybeBroadcastWatch(n)})},e.prototype.maybeBroadcastWatch=function(r){r.callback(this.diff({query:r.query,variables:r.variables,previousResult:r.previousResult&&r.previousResult(),optimistic:r.optimistic}))},e}(xp);function dm(t){return new zr(function(e,r){var n=s(e,[]);return new pr(function(i){var a;return Promise.resolve(n).then(function(o){return t(o,e.getContext())}).then(e.setContext).then(function(){a=r(e).subscribe({next:i.next.bind(i),error:i.error.bind(i),complete:i.complete.bind(i)})}).catch(i.error.bind(i)),function(){a&&a.unsubscribe()}})})}var hm=Je(3033),pm={includeQuery:!0,includeExtensions:!1},mm={accept:"*/*","content-type":"application/json"},fm={method:"POST"},gm={http:pm,headers:mm,options:fm},Bd=function(t,e,r){var n=new Error(r);throw n.name="ServerError",n.response=t,n.statusCode=t.status,n.result=e,n},vm=function(t){return function(e){return e.text().then(function(r){try{return JSON.parse(r)}catch(i){var n=i;return n.name="ServerParseError",n.response=e,n.statusCode=e.status,n.bodyText=r,Promise.reject(n)}}).then(function(r){return e.status>=300&&Bd(e,r,"Response not successful: Received status code "+e.status),!Array.isArray(r)&&!r.hasOwnProperty("data")&&!r.hasOwnProperty("errors")&&Bd(e,r,"Server response was missing for query '"+(Array.isArray(t)?t.map(function(n){return n.operationName}):t.operationName)+"'."),r})}},ym=function(t){if(!t&&typeof fetch=="undefined"){var e="unfetch";throw typeof window=="undefined"&&(e="node-fetch"),new Pe(1)}},bm=function(){if(typeof AbortController=="undefined")return{controller:!1,signal:!1};var t=new AbortController,e=t.signal;return{controller:t,signal:e}},_m=function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=De({},e.options,{headers:e.headers,credentials:e.credentials}),a=e.http;r.forEach(function(U){i=De({},i,U.options,{headers:De({},i.headers,U.headers)}),U.credentials&&(i.credentials=U.credentials),a=De({},a,U.http)});var o=t.operationName,m=t.extensions,E=t.variables,k=t.query,P={operationName:o,variables:E};return a.includeExtensions&&(P.extensions=m),a.includeQuery&&(P.query=(0,hm.S)(k)),{options:i,body:P}},gc=function(t,e){var r;try{r=JSON.stringify(t)}catch(i){var n=new Pe(2);throw n.parseError=i,n}return r},wm=function(t,e){var r=t.getContext(),n=r.uri;return n||(typeof e=="function"?e(t):e||"/graphql")},Vd=function(t){t===void 0&&(t={});var e=t.uri,r=e===void 0?"/graphql":e,n=t.fetch,i=t.includeExtensions,a=t.useGETForQueries,o=s(t,["uri","fetch","includeExtensions","useGETForQueries"]);ym(n),n||(n=fetch);var m={http:{includeExtensions:i},options:o.fetchOptions,credentials:o.credentials,headers:o.headers};return new zr(function(E){var k=wm(E,r),P=E.getContext(),U={};if(P.clientAwareness){var z=P.clientAwareness,le=z.name,ce=z.version;le&&(U["apollographql-client-name"]=le),ce&&(U["apollographql-client-version"]=ce)}var me=De({},U,P.headers),Te={http:P.http,options:P.fetchOptions,credentials:P.credentials,headers:me},Re=_m(E,gm,m,Te),xe=Re.options,Oe=Re.body,Ae;if(!xe.signal){var He=bm(),ft=He.controller,gt=He.signal;Ae=ft,Ae&&(xe.signal=gt)}var Mt=function(_n){return _n.kind==="OperationDefinition"&&_n.operation==="mutation"};if(a&&!E.query.definitions.some(Mt)&&(xe.method="GET"),xe.method==="GET"){var _t=Em(k,Oe),Ii=_t.newURI,uo=_t.parseError;if(uo)return iu(uo);k=Ii}else try{xe.body=gc(Oe,"Payload")}catch(_n){return iu(_n)}return new pr(function(_n){return n(k,xe).then(function(Sr){return E.setContext({response:Sr}),Sr}).then(vm(E)).then(function(Sr){return _n.next(Sr),_n.complete(),Sr}).catch(function(Sr){Sr.name!=="AbortError"&&(Sr.result&&Sr.result.errors&&Sr.result.data&&_n.next(Sr.result),_n.error(Sr))}),function(){Ae&&Ae.abort()}})})};function Em(t,e){var r=[],n=function(U,z){r.push(U+"="+encodeURIComponent(z))};if("query"in e&&n("query",e.query),e.operationName&&n("operationName",e.operationName),e.variables){var i=void 0;try{i=gc(e.variables,"Variables map")}catch(U){return{parseError:U}}n("variables",i)}if(e.extensions){var a=void 0;try{a=gc(e.extensions,"Extensions map")}catch(U){return{parseError:U}}n("extensions",a)}var o="",m=t,E=t.indexOf("#");E!==-1&&(o=t.substr(E),m=t.substr(0,E));var k=m.indexOf("?")===-1?"?":"&",P=m+k+r.join("&")+o;return{newURI:P}}var ay=function(t){ln(e,t);function e(r){return t.call(this,Vd(r).request)||this}return e}(zr),km=Je(5175),du=Je(1669),Sm=Je(6030);class hu extends Error{constructor(e,r){super(e);Error.captureStackTrace(this,this.constructor),this.type=r}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}}class Zn extends hu{constructor(e,r,n){super(e,r);n&&(this.code=this.errno=n.code,this.erroredSysCall=n.syscall)}}const pu=Symbol.toStringTag,jd=t=>typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&typeof t.sort=="function"&&t[pu]==="URLSearchParams",Ti=t=>typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&/^(Blob|File)$/.test(t[pu]);function vc(t){return typeof t=="object"&&typeof t.append=="function"&&typeof t.set=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.delete=="function"&&typeof t.keys=="function"&&typeof t.values=="function"&&typeof t.entries=="function"&&typeof t.constructor=="function"&&t[pu]==="FormData"}const Tm=t=>typeof t=="object"&&t[pu]==="AbortSignal",qs=`\r
`,yc="-".repeat(2),Rm=Buffer.byteLength(qs),zd=t=>`${yc}${t}${yc}${qs.repeat(2)}`;function Qd(t,e,r){let n="";return n+=`${yc}${t}${qs}`,n+=`Content-Disposition: form-data; name="${e}"`,Ti(r)&&(n+=`; filename="${r.name}"${qs}`,n+=`Content-Type: ${r.type||"application/octet-stream"}`),`${n}${qs.repeat(2)}`}const Cm=()=>(0,da.randomBytes)(8).toString("hex");async function*Pm(t,e){for(const[r,n]of t)yield Qd(e,r,n),Ti(n)?yield*n.stream():yield n,yield qs;yield zd(e)}function Nm(t,e){let r=0;for(const[n,i]of t)r+=Buffer.byteLength(Qd(e,n,i)),Ti(i)?r+=i.size:r+=Buffer.byteLength(String(i)),r+=Rm;return r+=Buffer.byteLength(zd(e)),r}const Qr=Symbol("Body internals");class bc{constructor(e,{size:r=0}={}){let n=null;e===null?e=null:jd(e)?e=Buffer.from(e.toString()):Ti(e)||Buffer.isBuffer(e)||(du.types.isAnyArrayBuffer(e)?e=Buffer.from(e):ArrayBuffer.isView(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof mt||(vc(e)?(n=`NodeFetchFormDataBoundary${Cm()}`,e=mt.Readable.from(Pm(e,n))):e=Buffer.from(String(e)))),this[Qr]={body:e,boundary:n,disturbed:!1,error:null},this.size=r,e instanceof mt&&e.on("error",i=>{const a=i instanceof hu?i:new Zn(`Invalid response body while trying to fetch ${this.url}: ${i.message}`,"system",i);this[Qr].error=a})}get body(){return this[Qr].body}get bodyUsed(){return this[Qr].disturbed}async arrayBuffer(){const{buffer:e,byteOffset:r,byteLength:n}=await mu(this);return e.slice(r,r+n)}async blob(){const e=this.headers&&this.headers.get("content-type")||this[Qr].body&&this[Qr].body.type||"",r=await this.buffer();return new Sm([r],{type:e})}async json(){const e=await mu(this);return JSON.parse(e.toString())}async text(){return(await mu(this)).toString()}buffer(){return mu(this)}}Object.defineProperties(bc.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});async function mu(t){if(t[Qr].disturbed)throw new TypeError(`body used already for: ${t.url}`);if(t[Qr].disturbed=!0,t[Qr].error)throw t[Qr].error;let{body:e}=t;if(e===null)return Buffer.alloc(0);if(Ti(e)&&(e=e.stream()),Buffer.isBuffer(e))return e;if(!(e instanceof mt))return Buffer.alloc(0);const r=[];let n=0;try{for await(const i of e){if(t.size>0&&n+i.length>t.size){const a=new Zn(`content size at ${t.url} over limit: ${t.size}`,"max-size");throw e.destroy(a),a}n+=i.length,r.push(i)}}catch(i){throw i instanceof hu?i:new Zn(`Invalid response body while trying to fetch ${t.url}: ${i.message}`,"system",i)}if(e.readableEnded===!0||e._readableState.ended===!0)try{return r.every(i=>typeof i=="string")?Buffer.from(r.join("")):Buffer.concat(r,n)}catch(i){throw new Zn(`Could not create Buffer from response body for ${t.url}: ${i.message}`,"system",i)}else throw new Zn(`Premature close of server response while trying to fetch ${t.url}`)}const Wd=(t,e)=>{let r,n,{body:i}=t;if(t.bodyUsed)throw new Error("cannot clone body after it is used");return i instanceof mt&&typeof i.getBoundary!="function"&&(r=new mt.PassThrough({highWaterMark:e}),n=new mt.PassThrough({highWaterMark:e}),i.pipe(r),i.pipe(n),t[Qr].body=r,i=n),i},Kd=(t,e)=>t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":jd(t)?"application/x-www-form-urlencoded;charset=UTF-8":Ti(t)?t.type||null:Buffer.isBuffer(t)||du.types.isAnyArrayBuffer(t)||ArrayBuffer.isView(t)?null:t&&typeof t.getBoundary=="function"?`multipart/form-data;boundary=${t.getBoundary()}`:vc(t)?`multipart/form-data; boundary=${e[Qr].boundary}`:t instanceof mt?null:"text/plain;charset=UTF-8",Am=t=>{const{body:e}=t;return e===null?0:Ti(e)?e.size:Buffer.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"?e.hasKnownLength&&e.hasKnownLength()?e.getLengthSync():null:vc(e)?Nm(t[Qr].boundary):null},Im=(t,{body:e})=>{e===null?t.end():Ti(e)?e.stream().pipe(t):Buffer.isBuffer(e)?(t.write(e),t.end()):e.pipe(t)},fu=typeof Sn.validateHeaderName=="function"?Sn.validateHeaderName:t=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(t)){const e=new TypeError(`Header name must be a valid HTTP token [${t}]`);throw Object.defineProperty(e,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),e}},_c=typeof Sn.validateHeaderValue=="function"?Sn.validateHeaderValue:(t,e)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(e)){const r=new TypeError(`Invalid character in header content ["${t}"]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_CHAR"}),r}};class Ri extends URLSearchParams{constructor(e){let r=[];if(e instanceof Ri){const n=e.raw();for(const[i,a]of Object.entries(n))r.push(...a.map(o=>[i,o]))}else if(e!=null)if(typeof e=="object"&&!du.types.isBoxedPrimitive(e)){const n=e[Symbol.iterator];if(n==null)r.push(...Object.entries(e));else{if(typeof n!="function")throw new TypeError("Header pairs must be iterable");r=[...e].map(i=>{if(typeof i!="object"||du.types.isBoxedPrimitive(i))throw new TypeError("Each header pair must be an iterable object");return[...i]}).map(i=>{if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...i]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return r=r.length>0?r.map(([n,i])=>(fu(n),_c(n,String(i)),[String(n).toLowerCase(),String(i)])):void 0,super(r),new Proxy(this,{get(n,i,a){switch(i){case"append":case"set":return(o,m)=>(fu(o),_c(o,String(m)),URLSearchParams.prototype[i].call(a,String(o).toLowerCase(),String(m)));case"delete":case"has":case"getAll":return o=>(fu(o),URLSearchParams.prototype[i].call(a,String(o).toLowerCase()));case"keys":return()=>(n.sort(),new Set(URLSearchParams.prototype.keys.call(n)).keys());default:return Reflect.get(n,i,a)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){const r=this.getAll(e);if(r.length===0)return null;let n=r.join(", ");return/^content-encoding$/i.test(e)&&(n=n.toLowerCase()),n}forEach(e){for(const r of this.keys())e(this.get(r),r)}*values(){for(const e of this.keys())yield this.get(e)}*entries(){for(const e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((e,r)=>(e[r]=this.getAll(r),e),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((e,r)=>{const n=this.getAll(r);return r==="host"?e[r]=n[0]:e[r]=n.length>1?n:n[0],e},{})}}Object.defineProperties(Ri.prototype,["get","entries","forEach","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}));function Om(t=[]){return new Ri(t.reduce((e,r,n,i)=>(n%2==0&&e.push(i.slice(n,n+2)),e),[]).filter(([e,r])=>{try{return fu(e),_c(e,String(r)),!0}catch{return!1}}))}const Dm=new Set([301,302,303,307,308]),Yd=t=>Dm.has(t),ei=Symbol("Response internals");class On extends bc{constructor(e=null,r={}){super(e,r);const n=r.status||200,i=new Ri(r.headers);if(e!==null&&!i.has("Content-Type")){const a=Kd(e);a&&i.append("Content-Type",a)}this[ei]={url:r.url,status:n,statusText:r.statusText||"",headers:i,counter:r.counter,highWaterMark:r.highWaterMark}}get url(){return this[ei].url||""}get status(){return this[ei].status}get ok(){return this[ei].status>=200&&this[ei].status<300}get redirected(){return this[ei].counter>0}get statusText(){return this[ei].statusText}get headers(){return this[ei].headers}get highWaterMark(){return this[ei].highWaterMark}clone(){return new On(Wd(this,this.highWaterMark),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size})}static redirect(e,r=302){if(!Yd(r))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new On(null,{headers:{location:new URL(e).toString()},status:r})}get[Symbol.toStringTag](){return"Response"}}Object.defineProperties(On.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});const xm=t=>{if(t.search)return t.search;const e=t.href.length-1,r=t.hash||(t.href[e]==="#"?"#":"");return t.href[e-r.length]==="?"?"?":""},ti=Symbol("Request internals"),gu=t=>typeof t=="object"&&typeof t[ti]=="object";class Ba extends bc{constructor(e,r={}){let n;gu(e)?n=new URL(e.url):(n=new URL(e),e={});let i=r.method||e.method||"GET";if(i=i.toUpperCase(),(r.body!=null||gu(e))&&e.body!==null&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");const a=r.body?r.body:gu(e)&&e.body!==null?Wd(e):null;super(a,{size:r.size||e.size||0});const o=new Ri(r.headers||e.headers||{});if(a!==null&&!o.has("Content-Type")){const E=Kd(a,this);E&&o.append("Content-Type",E)}let m=gu(e)?e.signal:null;if("signal"in r&&(m=r.signal),m!==null&&!Tm(m))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[ti]={method:i,redirect:r.redirect||e.redirect||"follow",headers:o,parsedURL:n,signal:m},this.follow=r.follow===void 0?e.follow===void 0?20:e.follow:r.follow,this.compress=r.compress===void 0?e.compress===void 0?!0:e.compress:r.compress,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent,this.highWaterMark=r.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=r.insecureHTTPParser||e.insecureHTTPParser||!1}get method(){return this[ti].method}get url(){return(0,fi.format)(this[ti].parsedURL)}get headers(){return this[ti].headers}get redirect(){return this[ti].redirect}get signal(){return this[ti].signal}clone(){return new Ba(this)}get[Symbol.toStringTag](){return"Request"}}Object.defineProperties(Ba.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});const Mm=t=>{const{parsedURL:e}=t[ti],r=new Ri(t[ti].headers);r.has("Accept")||r.set("Accept","*/*");let n=null;if(t.body===null&&/^(post|put)$/i.test(t.method)&&(n="0"),t.body!==null){const m=Am(t);typeof m=="number"&&!Number.isNaN(m)&&(n=String(m))}n&&r.set("Content-Length",n),r.has("User-Agent")||r.set("User-Agent","node-fetch"),t.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip,deflate,br");let{agent:i}=t;typeof i=="function"&&(i=i(e)),!r.has("Connection")&&!i&&r.set("Connection","close");const a=xm(e);return{path:e.pathname+a,pathname:e.pathname,hostname:e.hostname,protocol:e.protocol,port:e.port,hash:e.hash,search:e.search,query:e.query,href:e.href,method:t.method,headers:r[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:t.insecureHTTPParser,agent:i}};class Fm extends hu{constructor(e,r="aborted"){super(e,r)}}const Lm=new Set(["data:","http:","https:"]);async function vu(t,e){return new Promise((r,n)=>{const i=new Ba(t,e),a=Mm(i);if(!Lm.has(a.protocol))throw new TypeError(`node-fetch cannot load ${t}. URL scheme "${a.protocol.replace(/:$/,"")}" is not supported.`);if(a.protocol==="data:"){const le=km(i.url),ce=new On(le,{headers:{"Content-Type":le.typeFull}});r(ce);return}const o=(a.protocol==="https:"?Es:Sn).request,{signal:m}=i;let E=null;const k=()=>{const le=new Fm("The operation was aborted.");n(le),i.body&&i.body instanceof mt.Readable&&i.body.destroy(le),!(!E||!E.body)&&E.body.emit("error",le)};if(m&&m.aborted){k();return}const P=()=>{k(),z()},U=o(a);m&&m.addEventListener("abort",P);const z=()=>{U.abort(),m&&m.removeEventListener("abort",P)};U.on("error",le=>{n(new Zn(`request to ${i.url} failed, reason: ${le.message}`,"system",le)),z()}),U.on("response",le=>{U.setTimeout(0);const ce=Om(le.rawHeaders);if(Yd(le.statusCode)){const Oe=ce.get("Location"),Ae=Oe===null?null:new URL(Oe,i.url);switch(i.redirect){case"error":n(new Zn(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),z();return;case"manual":if(Ae!==null)try{ce.set("Location",Ae)}catch(He){n(He)}break;case"follow":{if(Ae===null)break;if(i.counter>=i.follow){n(new Zn(`maximum redirect reached at: ${i.url}`,"max-redirect")),z();return}const He={headers:new Ri(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:i.body,signal:i.signal,size:i.size};if(le.statusCode!==303&&i.body&&e.body instanceof mt.Readable){n(new Zn("Cannot follow redirect with body being a readable stream","unsupported-redirect")),z();return}(le.statusCode===303||(le.statusCode===301||le.statusCode===302)&&i.method==="POST")&&(He.method="GET",He.body=void 0,He.headers.delete("content-length")),r(vu(new Ba(Ae,He))),z();return}default:}}le.once("end",()=>{m&&m.removeEventListener("abort",P)});let me=(0,mt.pipeline)(le,new mt.PassThrough,Oe=>{n(Oe)});process.version<"v12.10"&&le.on("aborted",P);const Te={url:i.url,status:le.statusCode,statusText:le.statusMessage,headers:ce,size:i.size,counter:i.counter,highWaterMark:i.highWaterMark},Re=ce.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||Re===null||le.statusCode===204||le.statusCode===304){E=new On(me,Te),r(E);return}const xe={flush:Cr.Z_SYNC_FLUSH,finishFlush:Cr.Z_SYNC_FLUSH};if(Re==="gzip"||Re==="x-gzip"){me=(0,mt.pipeline)(me,Cr.createGunzip(xe),Oe=>{n(Oe)}),E=new On(me,Te),r(E);return}if(Re==="deflate"||Re==="x-deflate"){(0,mt.pipeline)(le,new mt.PassThrough,Ae=>{n(Ae)}).once("data",Ae=>{(Ae[0]&15)==8?me=(0,mt.pipeline)(me,Cr.createInflate(),He=>{n(He)}):me=(0,mt.pipeline)(me,Cr.createInflateRaw(),He=>{n(He)}),E=new On(me,Te),r(E)});return}if(Re==="br"){me=(0,mt.pipeline)(me,Cr.createBrotliDecompress(),Oe=>{n(Oe)}),E=new On(me,Te),r(E);return}E=new On(me,Te),r(E)}),Im(U,i)})}let Va;const qm={};function Um(t){Va=t.globalState}const Xd=(t,e)=>{if(!Va)throw new Error("Persistent store not initialized.");return Va.get(t+":"+e,qm)},Jd=(t,e,r)=>{if(!Va)throw new Error("Persistent store not initialized.");return Va.update(t+":"+e,r)};var $m=Je(6149);const Zd=Gm();function Gm(t=process.env.HTTPS_PROXY){if(!t)return Es.globalAgent;try{const{hostname:e,port:r,username:n,password:i}=new fi.URL(t),a=n&&i&&`${n}:${i}`;return(0,$m.httpsOverHttp)({proxy:{host:e,port:r,proxyAuth:a}})}catch(e){return u.window.showErrorMessage(`HTTPS_PROXY environment variable ignored: ${e.message}`),Es.globalAgent}}var Hm=Object.defineProperty,ns=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Hm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const eh="Try again?",Bm="Cancel",th="Sign in",Vm="Don't show again",rh="prompt for sign in",nh="login",ih=["read:user","user:email","repo"];var bt;(function(t){t.github="github",t["github-enterprise"]="github-enterprise"})(bt||(bt={}));class jm{constructor(e){this._telemetry=e,ns(this,"_githubAPI"),ns(this,"_sessionId"),ns(this,"_githubEnterpriseAPI"),ns(this,"_enterpriseSessionId"),ns(this,"_disposables"),ns(this,"_onDidInitialize",new u.EventEmitter),ns(this,"onDidInitialize",this._onDidInitialize.event),this._disposables=[],this._disposables.push(u.authentication.onDidChangeSessions(()=>{this.isAuthenticated(bt.github)||this.initialize(bt.github),!this.isAuthenticated(bt["github-enterprise"])&&Ou()&&this.initialize(bt["github-enterprise"])}))}async initialize(e,r){if(e===bt["github-enterprise"]&&!Ou()){C.debug("GitHub Enterprise provider selected without URI.","Authentication");return}r={...r,createIfNone:!1};let n;try{n=await u.authentication.getSession(e,ih,r)}catch(i){if(!(r.forceNewSession&&i.message==="User did not consent to login."))throw i}if(n){e===bt.github?this._sessionId=n.id:this._enterpriseSessionId=n.id;const i=await this.createHub(n.accessToken,e);e===bt.github?this._githubAPI=i:this._githubEnterpriseAPI=i,await this.setCurrentUser(i),this._onDidInitialize.fire()}else C.debug(`No GitHub${wc(e)} token found.`,"Authentication")}async doCreate(e){await this.initialize(bt.github,e),Ou()&&await this.initialize(bt["github-enterprise"],e)}async create(e={}){return this.doCreate(e)}async recreate(){return this.doCreate({forceNewSession:!0})}async reset(){return this._githubAPI=void 0,this._githubEnterpriseAPI=void 0,this.create()}isAnyAuthenticated(){return this.isAuthenticated(bt.github)||this.isAuthenticated(bt["github-enterprise"])}isAuthenticated(e){return e===bt.github?!!this._githubAPI:!!this._githubEnterpriseAPI}getHub(e){return e===bt.github?this._githubAPI:this._githubEnterpriseAPI}async getHubOrLogin(e){var r,n;return e===bt.github?(r=this._githubAPI)!=null?r:await this.login(e):(n=this._githubEnterpriseAPI)!=null?n:await this.login(e)}async showSignInNotification(e){if(Xd(rh,nh)===!1)return;if(await u.window.showInformationMessage(`In order to use the Pull Requests functionality, you must sign in to GitHub${wc(e)}`,th,Vm)===th)return await this.login(e);Jd(rh,nh,!1),this._telemetry.sendTelemetryEvent("auth.cancel")}async login(e){this._telemetry.sendTelemetryEvent("auth.start");const r=`Error signing in to GitHub${wc(e)}`;let n=!0,i;for(;n;){try{const a=await this.getSessionOrLogin(e);i=await this.createHub(a,e)}catch(a){C.appendLine(`${r}: ${a}`),a instanceof Error&&a.stack&&C.appendLine(a.stack)}i?n=!1:n=await u.window.showErrorMessage(r,eh,Bm)===eh}return i?(this._githubAPI=i,await this.setCurrentUser(i),this._telemetry.sendTelemetryEvent("auth.success")):this._telemetry.sendTelemetryEvent("auth.fail"),i}async showSamlMessageAndAuth(){if(await u.window.showWarningMessage("GitHub Pull Requests and Issues requires that you provide SAML access to your organization when you sign in.",{modal:!0},"OK")==="OK")return this.recreate()}isCurrentUser(e){var r,n,i,a;return((n=(r=this._githubAPI)==null?void 0:r.currentUser)==null?void 0:n.login)===e||((a=(i=this._githubEnterpriseAPI)==null?void 0:i.currentUser)==null?void 0:a.login)==e}getCurrentUser(e){const r=this.getHub(e);return(r==null?void 0:r.octokit)&&(r==null?void 0:r.currentUser)}async setCurrentUser(e){const r=await e.octokit.users.getAuthenticated({});e.currentUser=r.data}async getSessionOrLogin(e){const r=await u.authentication.getSession(e,ih,{createIfNone:!0});return e===bt.github?this._sessionId=r.id:this._enterpriseSessionId=r.id,r.accessToken}async createHub(e,r){let n="https://api.github.com",i;r===bt["github-enterprise"]&&(i=Gc()),i&&(n=`${i.scheme}://${i.authority}/api/v3`);let a;u.env.uiKind===u.UIKind.Web&&(a=(k,P)=>{if(P.headers!==void 0){const{"user-agent":U,...z}=P.headers;U&&(P.headers=z)}return vu(k,P)});const o=new Ea({request:{agent:Zd,fetch:a},userAgent:"GitHub VSCode Pull Requests",previews:["shadow-cat-preview"],auth:`${e||""}`,baseUrl:n});i&&(n=`${i.scheme}://${i.authority}/api`);const m=new Ga({link:zm(n,e||""),cache:new cm,defaultOptions:{query:{fetchPolicy:"no-cache"}}}),E={octokit:o,graphql:m};return await this.setCurrentUser(E),E}dispose(){this._disposables.forEach(e=>e.dispose())}}const zm=(t,e)=>dm((r,{headers:n})=>({headers:{...n,authorization:e?`Bearer ${e}`:"",Accept:"application/vnd.github.shadow-cat-preview+json, application/vnd.github.antiope-preview+json"}})).concat(Vd({uri:`${t}/graphql`,fetch:vu}));function wc(t){return t===bt.github?"":" Enterprise"}let sh=!1;const ah=class{static async getApiHost(t){const e=process.env.GITHUB_TEST_SERVER;if(e){if(sh)return u.Uri.parse(e);if(await u.window.showInformationMessage(`The 'GITHUB_TEST_SERVER' environment variable is set to '${e}'. Use this as the GitHub API endpoint?`,{modal:!0},"Yes")==="Yes")return sh=!0,u.Uri.parse(e)}const r=t instanceof u.Uri?t:u.Uri.parse(t.host);return r.authority==="github.com"?u.Uri.parse("https://api.github.com"):u.Uri.parse(`${r.scheme}://${r.authority}`)}static getApiPath(t,e){return(t instanceof u.Uri?t:u.Uri.parse(t.host)).authority==="github.com"?e:`/api/v3${e}`}};var Qm=Object.defineProperty,Wm=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Qm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Ec{constructor(){Wm(this,"_servers",new Map().set("github.com",!0).set("ssh.github.com",!0))}async isGitHub(e){if(e===null||e.path.endsWith(".wiki")||e.authority.match(/gist[.]github[.]com/))return!1;if(this._servers.has(e.authority))return!!this._servers.get(e.authority);const[r,n]=await Ec.getOptions(e,"HEAD","/rate_limit");let i=!1;try{const o=(await vu(r.toString(),n)).headers.get("x-github-request-id");return i=o!=null,i}catch(a){return C.appendLine(`No response from host ${e}: ${a.message}`,"GitHubServer"),i}finally{C.debug(`Host ${e} is associated with GitHub: ${i}`,"GitHubServer"),this._servers.set(e.authority,i)}}static async getOptions(e,r="GET",n,i){const a={"user-agent":"GitHub VSCode Pull Requests"};i&&(a.authorization=`token ${i}`);const o=u.Uri.joinPath(await ah.getApiHost(e),ah.getApiPath(e,n));return[o,{hostname:o.authority,port:443,method:r,headers:a,agent:Zd}]}}class kc{constructor(e,r,n){this.remoteName=e,this.url=r,this.gitProtocol=n}get host(){return this.gitProtocol.host}get owner(){return this.gitProtocol.owner}get repositoryName(){return this.gitProtocol.repositoryName}get normalizedHost(){const e=this.gitProtocol.normalizeUri();return`${e.scheme}://${e.authority}`}get authProviderId(){var e;return this.host===((e=Gc())==null?void 0:e.authority)?bt["github-enterprise"]:bt.github}equals(e){return!(this.remoteName!==e.remoteName||this.host!==e.host||this.owner!==e.owner||this.repositoryName!==e.repositoryName)}}function oh(t,e,r){if(!e)return null;const n=new Bn(e);return r&&n.update({type:r.type}),n.host?new kc(t,e,n):null}function Us(t){const e=[];for(const r of t.state.remotes){const n=[];r.fetchUrl&&n.push(r.fetchUrl),r.pushUrl&&r.pushUrl!==r.fetchUrl&&n.push(r.pushUrl),n.forEach(i=>{const a=oh(r.name,i);a&&e.push(a)})}return e}const Sc="github.pullRequest.pullNotification.show",ja="github.pullRequest.repos";function Km(t){t.globalState.setKeysForSync([Sc])}var Ym=Je(9593),Xm=Je.n(Ym),yu=Je(7228);const uh=/http(s)?\:\/\/github\.com\/([^\/]+)\/([^\/]+)\/blob\/([0-9a-fA-F]{40})\/([^#]+)#L(\d+)(-L(\d+))?/;function lh(t){return t.match(uh)}function Jm(t){return!!lh(t.body)}async function ch(t,e,r=!0){const n=t[2],i=t[3],a=t[5],o=Number(t[6])-1,m=t[8]?Number(t[8])-1:o;let E;for(const P of e.folderManagers){const U=P.getGitHubRemotes();for(const z of U)if(n.toLowerCase()===z.owner.toLowerCase()&&i.toLowerCase()===z.repositoryName.toLowerCase()){E=P;break}if(E)break}if(!E)return;const k=u.Uri.joinPath(E.repository.rootUri,a);try{await u.workspace.fs.stat(k)}catch(P){return}return{file:k,start:o,end:m}}async function Zm(t,e){const r=lh(t.body);if(!r){u.window.showInformationMessage("Issue has no link.");return}const n=await ch(r,e,!1);if(!n)return u.env.openExternal(u.Uri.parse(r[0]));const i=await u.workspace.openTextDocument(n==null?void 0:n.file),a=i.lineAt(n.end<i.lineCount?n.end:i.lineCount-1),o=new u.Range(n.start,0,n.end,a.text.length);return u.window.showTextDocument(n.file,{selection:o})}var ef=Object.defineProperty,dh=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?ef(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const oy=/(([^\s]+)\/([^\s]+))?(#|GH-)([1-9][0-9]*)($|\b)/,za=/(https?:\/\/github\.com\/(([^\s]+)\/([^\s]+))\/([^\s]+\/)?(issues|pull)\/([0-9]+)(#issuecomment\-([0-9]+))?)|(([^\s]+)\/([^\s]+))?(#|GH-)([1-9][0-9]*)($|\b)/,Tc=/\@([^\s]+)/,tf=150,ir="githubIssues",$s="queries",rf="default",hh="issueBranchTitle",ph="useBranchForIssues",nf="workingIssueFormatScm";function Rc(t){if(!t)return;const e={owner:void 0,name:void 0,issueNumber:0};return t.length===7?(e.owner=t[2],e.name=t[3],e.issueNumber=parseInt(t[5]),e):t.length===16?(e.owner=t[3]||t[11],e.name=t[4]||t[12],e.issueNumber=parseInt(t[7]||t[14]),e.commentNumber=t[9]!==void 0?parseInt(t[9]):void 0,e):void 0}async function sf(t,e,r,n){var i;const a=(i=t.resolvedIssues.get(e.repository.rootUri.path))==null?void 0:i.get(r);if(a)return a;{let o,m,E;const k=e.getGitHubRemotes();for(const P of k){if(n)o=n.owner?n.owner:P.owner,m=n.name?n.name:P.repositoryName,E=n.issueNumber;else{const U=Rc(r.match(za));U&&(!U.name||!U.owner)&&(o=P.owner,m=P.repositoryName)}if(o&&m&&E!==void 0){let U=await e.resolveIssue(o,m,E,!!n.commentNumber);if(U||(U=await e.resolvePullRequest(o,m,E)),U){let z;return t.resolvedIssues.has(e.repository.rootUri.path)?z=t.resolvedIssues.get(e.repository.rootUri.path):t.resolvedIssues.set(e.repository.rootUri.path,z=new(Xm())(50)),z.set(r,U),U}}}}}function af(t,e){let r;return t.commitContributions.forEach(n=>{e.toLowerCase()===n.repoNameWithOwner.toLowerCase()&&(r=n.createdAt.toLocaleString("default",{day:"numeric",month:"short",year:"numeric"}))}),r}class of extends u.CompletionItem{constructor(){super(...arguments);dh(this,"login"),dh(this,"uri")}}function Cc(t,e){const r=new u.MarkdownString(void 0,!0);r.appendMarkdown(`![Avatar](${e.avatarUrl}|height=50,width=50) **${e.name}** [${e.login}](${e.url})`),e.bio&&r.appendText(`  \r
`+e.bio.replace(/\r\n/g," "));const n=af(e,t.owner+"/"+t.repo);return(e.location||n)&&r.appendMarkdown(`  \r
\r
---`),e.location&&r.appendMarkdown(`  \r
$(location) ${e.location}`),n&&r.appendMarkdown(`  \r
$(git-commit) Committed to this repository on ${n}`),e.company&&r.appendMarkdown(`  \r
$(jersey) Member of ${e.company}`),r}function uf(t){const e=/^([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:void 0}function lf(t,e){const r=uf(t);let n="ffffff";return r&&(.299*r.r+.587*r.g+.114*r.b)/255>.5&&(n="000000"),`<span style="color:#${n};background-color:#${t};">&nbsp;&nbsp;${e}&nbsp;&nbsp;</span>`}async function mh(t,e,r){let n=t.search(e),i=0;for(;n>=0&&n<t.length;){let a;if(n===0||t.charAt(n-1)!=="&"){const m=t.substring(n).match(e);if(m){const E=await r(m);E&&(a=t.slice(0,n)+E,t=a+t.slice(n+m[0].length))}}i=a?a.length:n+1;const o=t.substring(i).search(e);n=o>0?i+o:o}return t}function fh(t,e){return mh(t,za,async r=>{const n=Rc(r);if(n){const i=bh(n);return(!n.owner||!n.name)&&(n.owner=e.remote.owner,n.name=e.remote.repositoryName),`[${i}](https://github.com/${n.owner}/${n.name}/issues/${n.issueNumber})`}})}async function cf(t,e){return mh(t,uh,async r=>{const n=await ch(r,e);if(n){const i=await u.workspace.openTextDocument(n==null?void 0:n.file),a=i.lineAt(n.end<i.lineCount?n.end:i.lineCount-1),o=[n.file,{selection:{start:{line:n.start,character:0},end:{line:n.end,character:a.text.length}}}],m=u.Uri.parse(`command:vscode.open?${encodeURIComponent(JSON.stringify(o))}`);return`[${r[0]}](${m} "Open ${n.file.fsPath}")`}})}const bu=200;async function Pc(t,e,r,n){const i=new u.MarkdownString(void 0,!0);i.isTrusted=!0;const a=new Date(t.createdAt),o=`${t.remote.owner}/${t.remote.repositoryName}`;i.appendMarkdown(`[${o}](https://github.com/${o}) on ${a.toLocaleString("default",{day:"numeric",month:"short",year:"numeric"})}  
`);const m=yu.parse(t.title,{renderer:new Oc}).trim();i.appendMarkdown(`${hf(t)} **${m}** [#${t.number}](${t.html_url})  
`);let E=yu.parse(t.body,{renderer:new Oc});if(i.appendMarkdown(`  
`),E=E.length>bu?E.substr(0,bu)+"...":E,E=await fh(E,t),E=await cf(E,r),i.appendMarkdown(E+`  
`),i.appendMarkdown(`&nbsp;  
`),t.item.labels.length>0&&t.item.labels.forEach(k=>{i.appendMarkdown(`[${lf(k.color,k.name)}](https://github.com/${o}/labels/${encodeURIComponent(k.name)}) `)}),t.item.comments&&n){for(const k of t.item.comments)if(k.databaseId===n){i.appendMarkdown(`  \r
\r
---\r
`),i.appendMarkdown(`&nbsp;  
`),i.appendMarkdown(`![Avatar](${k.author.avatarUrl}|height=15,width=15) &nbsp;&nbsp;**${k.author.login}** commented`),i.appendMarkdown(`&nbsp;  
`);let P=yu.parse(k.body.length>bu?k.body.substr(0,bu)+"...":k.body,{renderer:new Oc});P=await fh(P,t),i.appendMarkdown(P)}}return i}function df(t){switch(t.state){case Pt.Open:return t instanceof ni?"$(git-pull-request)":"$(issues)";case Pt.Closed:return t instanceof ni?"$(git-pull-request)":"$(issue-closed)";case Pt.Merged:return"$(git-merge)"}}function hf(t){if(t instanceof ni)return df(t);switch(t.state){case Pt.Open:return'<span style="color:#22863a;">$(issues)</span>';case Pt.Closed:return'<span style="color:#cb2431;">$(issue-closed)</span>'}}const gh="HEAD",pf=1,mf=2,ff=3,vh=4,_u=new Map([["upstream",pf],["ups",mf],["origin",ff]]);async function gf(t,e){var r,n,i;const a=((r=t.state.HEAD)==null?void 0:r.upstream)&&!_u.has(t.state.HEAD.upstream.remote)?t.state.HEAD.upstream.remote:void 0;let o;const m=t.state.remotes.map(U=>({name:U.name,remote:U})).filter(U=>(U.name===a&&(o=U.remote),_u.has(U.name))).sort((U,z)=>{var le,ce;const me=(le=_u.get(U.name))!=null?le:vh,Te=(ce=_u.get(z.name))!=null?ce:vh;return me-Te});a&&m.push({name:a,remote:o});const E=[gh];((n=t.state.HEAD)==null?void 0:n.name)&&t.state.HEAD.name!==gh&&E.unshift((i=t.state.HEAD)==null?void 0:i.name);let k,P;for(let U=0;U<E.length&&!k;U++)for(let z=0;z<m.length&&!k;z++){const le=(await t.getBranches({contains:e.hash,remote:!0,pattern:`remotes/${m[z].name}/${E[U]}`,count:1})).filter(ce=>ce.remote&&ce.name);le&&le.length>0&&(k=le[0],P=m[z].remote)}return P}async function Nc(t,e,r){var n,i;let a,o;if(r)a=r,((n=u.window.activeTextEditor)==null?void 0:n.document.uri.fsPath)===a.fsPath&&(o=u.window.activeTextEditor.selection);else if(!e&&u.window.activeTextEditor)a=u.window.activeTextEditor.document.uri,o=u.window.activeTextEditor.selection;else if(e)a=e.document.uri,o=e.range;else return{permalink:void 0,error:"No active text editor position to create permalink from.",originalFile:void 0};const m=Uc(t,a);if(!m)return{permalink:void 0,error:"The current file isn't part of repository.",originalFile:a};let E,k;try{const ce=await m.log({maxEntries:1,path:a.fsPath});if(ce.length===0)return{permalink:void 0,error:"No branch on a remote contains the most recent commit for the file.",originalFile:a};E=ce[0],k=ce[0].hash}catch(ce){k=(i=m.state.HEAD)==null?void 0:i.commit}const P=new Promise(ce=>{var me;if((me=m.state.HEAD)==null?void 0:me.upstream)for(const Te of m.state.remotes)m.state.HEAD.upstream.remote===Te.name&&ce(Te);ce(void 0)});let U=E?await Promise.race([gf(m,E),new Promise(ce=>{setTimeout(()=>{ce(P)},1500)})]):await P;if((!U||!U.fetchUrl)&&(U=await P,!U||!U.fetchUrl))return{permalink:void 0,error:"The selection may not exist on any remote.",originalFile:a};const z=a.path.substring(m.rootUri.path.length),le=()=>{if(!o)return"";let ce=`#L${o.start.line+1}`;return o.start.line!==o.end.line&&(ce+=`-L${o.end.line+1}`),ce};return{permalink:`https://github.com/${new Bn(U.fetchUrl).nameWithOwner}/blob/${k}${z}${le()}`,error:void 0,originalFile:a}}function yh(t){const e=/[~^:;'".,~#?%*[\]@\\{}()]|\/\//g;return t.replace(e,"").trim().replace(/\s+/g,"-")}const vf=/\$\{(.*?)\}/g;async function wu(t,e,r,n){return t.replace(vf,(i,a)=>{switch(a){case"user":return n||i;case"issueNumber":return e?`${e.number}`:i;case"issueNumberLabel":return e?`${Gs(e,r)}`:i;case"issueTitle":return e?e.title:i;case"repository":return r?r.repo:i;case"owner":return r?r.owner:i;case"sanitizedIssueTitle":return e?yh(e.title):i;case"sanitizedLowercaseIssueTitle":return e?yh(e.title).toLowerCase():i;default:return i}})}function Gs(t,e){const r={issueNumber:t.number,owner:void 0,name:void 0};return e&&(e.owner.toLowerCase()!==t.remote.owner.toLowerCase()||e.repo.toLowerCase()!==t.remote.repositoryName.toLowerCase())&&(r.owner=t.remote.owner,r.name=t.remote.repositoryName),bh(r)}function bh(t){return!t.owner||!t.name?`#${t.issueNumber}`:`${t.owner}/${t.name}#${t.issueNumber}`}async function _h(t,e,r){var n;const i=await((n=e.currentIssue(t.repository.rootUri))==null?void 0:n.getCommitMessage());if(i)return t.repository.commit(i,{all:r})}const wh="Commit Staged",Eh="Commit All";async function yf(t,e,r){var n,i;if(t.repository.state.workingTreeChanges.length>0||t.repository.state.indexChanges.length>0){const a=[];switch(t.repository.state.indexChanges&&a.push(wh),t.repository.state.workingTreeChanges&&a.push(Eh),await u.window.showInformationMessage("There are uncommitted changes. Do you want to commit them with the default commit message?",{modal:!0},...a)){case wh:{await _h(t,r,!1);break}case Eh:{await _h(t,r,!0);break}default:return!1}}if((n=t.repository.state.HEAD)==null?void 0:n.upstream)return await t.repository.push(),await e.createPullRequest(void 0),!0;{let a;return t.repository.state.remotes.length===1?a=t.repository.state.remotes[0].name:t.repository.state.remotes.length>1&&(a=await u.window.showQuickPick(t.repository.state.remotes.map(o=>o.name),{placeHolder:"Remote to push to"})),a?(await t.repository.push(a,(i=t.repository.state.HEAD)==null?void 0:i.name,!0),await e.createPullRequest(void 0),!0):(u.window.showWarningMessage("The current repository has no remotes to push to. Please set up a remote and try again."),!1)}}async function Ac(t,e){return!(t.languageId!=="markdown"&&t.languageId!=="plaintext"&&(await u.languages.getTokenInformationAtPosition(t,e)).type!==u.StandardTokenType.Comment)}async function kh(t,e){return t.lineAt(e.line).range.end.character>1e4?!1:Ac(t,e)}function Ic(t){const e=new fi.URLSearchParams(t.query).get("rootUri");return e?u.Uri.parse(e):void 0}class Oc extends yu.Renderer{code(e){return e}blockquote(e){return e}html(e){return""}heading(e,r,n,i){return e+" "}hr(){return""}list(e,r,n){return e}listitem(e){return" "+e}checkbox(e){return""}paragraph(e){return e.replace(/\</g,"\\<").replace(/\>/g,"\\>")+" "}table(e,r){return e+" "+r}tablerow(e){return e}tablecell(e,r){return e}strong(e){return e}em(e){return e}codespan(e){return`\\\`${e}\\\``}br(){return" "}del(e){return e}image(e,r,n){return""}text(e){return e}link(e,r,n){return n+" "}}var bf=Object.defineProperty,Sh=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?bf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Eu extends Error{constructor(e){super(e);this.message=e,Sh(this,"name"),Sh(this,"stack")}}function _f(t){var e;return!!((e=t.message)==null?void 0:e.startsWith("Resource protected by organization SAML enforcement."))}const ku=new Uint8Array(256);let Su=ku.length;function wf(){return Su>ku.length-16&&(dl().randomFillSync(ku),Su=0),ku.slice(Su,Su+=16)}const Ef=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function kf(t){return typeof t=="string"&&Ef.test(t)}const Sf=kf,fr=[];for(let t=0;t<256;++t)fr.push((t+256).toString(16).substr(1));function Tf(t,e=0){const r=(fr[t[e+0]]+fr[t[e+1]]+fr[t[e+2]]+fr[t[e+3]]+"-"+fr[t[e+4]]+fr[t[e+5]]+"-"+fr[t[e+6]]+fr[t[e+7]]+"-"+fr[t[e+8]]+fr[t[e+9]]+"-"+fr[t[e+10]]+fr[t[e+11]]+fr[t[e+12]]+fr[t[e+13]]+fr[t[e+14]]+fr[t[e+15]]).toLowerCase();if(!Sf(r))throw TypeError("Stringified UUID is invalid");return r}const Rf=Tf;function Cf(t,e,r){t=t||{};const n=t.random||(t.rng||wf)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return Rf(n)}const Th=Cf;var Pf=Object.defineProperty,Zt=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Pf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Tu=class{constructor(t,e,r,n,i){Zt(this,"commentId"),Zt(this,"id"),Zt(this,"parent"),Zt(this,"body"),Zt(this,"originalBody"),Zt(this,"mode"),Zt(this,"author"),Zt(this,"label"),Zt(this,"commentReactions"),Zt(this,"contextValue"),this.parent=t,this.body=new u.MarkdownString(e),this.mode=u.CommentMode.Preview,this.author={name:n.login,iconPath:n.avatarUrl?u.Uri.parse(`${n.avatarUrl}&s=64`):void 0},this.label=r?"Pending":void 0,this.contextValue="canEdit,canDelete",this.originalBody=i?i._rawComment.body:void 0,this.commentReactions=i?i.reactions:void 0,this.id=Tu.idPool++}static is(t){return t.commentId===void 0}startEdit(){this.parent.comments=this.parent.comments.map(t=>(t instanceof Tu&&t.id===this.id&&(t.mode=u.CommentMode.Editing),t))}cancelEdit(){this.parent.comments=this.parent.comments.map(t=>(t instanceof Tu&&t.id===this.id&&(t.mode=u.CommentMode.Preview,t.body=t.originalBody||t.body),t))}};let Wr=Tu;Zt(Wr,"idPool",0);class sr{constructor(e,r){Zt(this,"commentId"),Zt(this,"parent"),Zt(this,"body"),Zt(this,"mode"),Zt(this,"author"),Zt(this,"label"),Zt(this,"reactions"),Zt(this,"_rawComment"),Zt(this,"contextValue"),this._rawComment=e,this.commentId=e.id.toString(),this.body=new u.MarkdownString(e.body),this.author={name:e.user.login,iconPath:e.user&&e.user.avatarUrl?u.Uri.parse(e.user.avatarUrl):void 0},Wf(this,e.reactions),this.label=e.isDraft?"Pending":void 0;const n=[];e.canEdit&&n.push("canEdit"),e.canDelete&&n.push("canDelete"),this.contextValue=n.join(","),this.parent=r}static is(e){return e.commentId!==void 0}startEdit(){this.parent.comments=this.parent.comments.map(e=>(e instanceof sr&&e.commentId===this.commentId&&(e.mode=u.CommentMode.Editing),e))}cancelEdit(){this.parent.comments=this.parent.comments.map(e=>(e instanceof sr&&e.commentId===this.commentId&&(e.mode=u.CommentMode.Preview,e.body=e._rawComment.body),e))}}var Nf=Object.defineProperty,is=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Nf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);function Dc(){let t="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<32;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}class Rh{constructor(){is(this,"_webview"),is(this,"_disposables",[]),is(this,"_waitForReady"),is(this,"_onIsReady",new u.EventEmitter),is(this,"MESSAGE_UNHANDLED","message not handled"),this._waitForReady=new Promise(e=>{const r=this._onIsReady.event(()=>{r.dispose(),e()})})}initialize(){var e;const r=(e=this._webview)==null?void 0:e.onDidReceiveMessage(async n=>{await this._onDidReceiveMessage(n)},null,this._disposables);r&&this._disposables.push(r)}async _onDidReceiveMessage(e){switch(e.command){case"ready":this._onIsReady.fire();return;default:return this.MESSAGE_UNHANDLED}}async _postMessage(e){var r;await this._waitForReady,(r=this._webview)==null||r.postMessage({res:e})}async _replyMessage(e,r){var n;const i={seq:e.req,res:r};(n=this._webview)==null||n.postMessage(i)}async _throwError(e,r){var n;const i={seq:e.req,err:r};(n=this._webview)==null||n.postMessage(i)}dispose(){this._disposables.forEach(e=>e.dispose())}}class Ch extends Rh{constructor(e){super();this._extensionUri=e,is(this,"viewType"),is(this,"_view")}resolveWebviewView(e,r,n){this._view=e,this._webview=e.webview,super.initialize(),e.webview.options={enableScripts:!0,localResourceRoots:[this._extensionUri]},this._disposables.push(this._view.onDidDispose(()=>{this._webview=void 0,this._view=void 0}))}show(){this._view?this._view.show():u.commands.executeCommand(`${this.viewType}.focus`)}}var Af=Object.defineProperty,ri=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Af(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Dn=class extends Rh{constructor(t,e,r,n,i=Dn._viewType){super();this._extensionUri=t,ri(this,"_panel"),ri(this,"_disposables",[]),ri(this,"_descriptionNode"),ri(this,"_item"),ri(this,"_folderRepositoryManager"),ri(this,"_scrollPosition",{x:0,y:0}),this._folderRepositoryManager=n,this._panel=u.window.createWebviewPanel(i,r,e,{enableScripts:!0,retainContextWhenHidden:!0,localResourceRoots:[u.Uri.joinPath(t,"dist")]}),this._webview=this._panel.webview,super.initialize(),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._folderRepositoryManager.onDidChangeActiveIssue(a=>{if(this._folderRepositoryManager&&this._item){const o=this._item.equals(this._folderRepositoryManager.activeIssue);this._postMessage({command:"pr.update-checkout-status",isCurrentlyCheckedOut:o})}},null,this._disposables)}static async createOrShow(t,e,r,n=!1){const i=n?u.ViewColumn.Beside:u.window.activeTextEditor?u.window.activeTextEditor.viewColumn:u.ViewColumn.One;if(Dn.currentPanel)Dn.currentPanel._panel.reveal(i,!0);else{const a=`Issue #${r.number.toString()}`;Dn.currentPanel=new Dn(t,i||u.ViewColumn.Active,a,e)}await Dn.currentPanel.update(e,r)}static refresh(){this.currentPanel&&this.currentPanel.refreshPanel()}async refreshPanel(){this._panel&&this._panel.visible&&this.update(this._folderRepositoryManager,this._item)}async updateIssue(t){return Promise.all([this._folderRepositoryManager.resolveIssue(t.remote.owner,t.remote.repositoryName,t.number),t.getIssueTimelineEvents(),this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(t)]).then(e=>{const[r,n,i]=e;if(!r)throw new Error(`Fail to resolve issue #${t.number} in ${t.remote.owner}/${t.remote.repositoryName}`);this._item=r,this._panel.title=`Pull Request #${t.number.toString()}`,C.debug("pr.initialize",Dn.ID),this._postMessage({command:"pr.initialize",pullrequest:{number:this._item.number,title:this._item.title,url:this._item.html_url,createdAt:this._item.createdAt,body:this._item.body,bodyHTML:this._item.bodyHTML,labels:this._item.item.labels,author:{login:this._item.author.login,name:this._item.author.name,avatarUrl:this._item.userAvatar,url:this._item.author.url},state:this._item.state,events:n,repositoryDefaultBranch:i,canEdit:!0,status:{statuses:[]},isIssue:!0}})}).catch(e=>{u.window.showErrorMessage(be(e))})}async update(t,e){return this._folderRepositoryManager=t,this._postMessage({command:"set-scroll",scrollPosition:this._scrollPosition}),this._panel.webview.html=this.getHtmlForWebview(e.number.toString()),this.updateIssue(e)}async _onDidReceiveMessage(t){if(await super._onDidReceiveMessage(t)===this.MESSAGE_UNHANDLED)switch(t.command){case"alert":u.window.showErrorMessage(t.args);return;case"pr.close":return this.close(t);case"pr.comment":return this.createComment(t);case"scroll":this._scrollPosition=t.args;return;case"pr.edit-comment":return this.editComment(t);case"pr.delete-comment":return this.deleteComment(t);case"pr.edit-description":return this.editDescription(t);case"pr.edit-title":return this.editTitle(t);case"pr.refresh":this.refreshPanel();return;case"pr.add-labels":return this.addLabels(t);case"pr.remove-label":return this.removeLabel(t);case"pr.debug":return this.webviewDebug(t);default:return this.MESSAGE_UNHANDLED}}async addLabels(t){try{let e=[];async function r(i,a){return e=(await i.getLabels(a)).filter(m=>!a.item.labels.some(E=>E.name===m.name)),e.map(m=>({label:m.name}))}const n=await u.window.showQuickPick(r(this._folderRepositoryManager,this._item),{canPickMany:!0});if(n&&n.length){await this._item.addLabels(n.map(a=>a.label));const i=n.map(a=>e.find(o=>o.name===a.label));this._item.item.labels=this._item.item.labels.concat(...i),this._replyMessage(t,{added:i})}}catch(e){u.window.showErrorMessage(be(e))}}async removeLabel(t){try{await this._item.removeLabel(t.args);const e=this._item.item.labels.findIndex(r=>r.name===t.args);this._item.item.labels.splice(e,1),this._replyMessage(t,{})}catch(e){u.window.showErrorMessage(be(e))}}webviewDebug(t){C.debug(t.args,Dn.ID)}editDescription(t){this._item.edit({body:t.args.text}).then(e=>{this._replyMessage(t,{body:e.body,bodyHTML:e.bodyHTML})}).catch(e=>{this._throwError(t,e),u.window.showErrorMessage(`Editing description failed: ${be(e)}`)})}editTitle(t){this._item.edit({title:t.args.text}).then(e=>{this._replyMessage(t,{text:e.title})}).catch(e=>{this._throwError(t,e),u.window.showErrorMessage(`Editing title failed: ${be(e)}`)})}editCommentPromise(t,e){return this._item.editIssueComment(t,e)}editComment(t){this.editCommentPromise(t.args.comment,t.args.text).then(e=>{this._replyMessage(t,{body:e.body,bodyHTML:e.bodyHTML})}).catch(e=>{this._throwError(t,e),u.window.showErrorMessage(be(e))})}deleteCommentPromise(t){return this._item.deleteIssueComment(t.id.toString())}deleteComment(t){u.window.showWarningMessage("Are you sure you want to delete this comment?",{modal:!0},"Delete").then(e=>{e==="Delete"&&this.deleteCommentPromise(t.args).then(r=>{this._replyMessage(t,{})}).catch(r=>{this._throwError(t,r),u.window.showErrorMessage(be(r))})})}close(t){u.commands.executeCommand("pr.close",this._item,t.args).then(e=>{e?this._replyMessage(t,{value:e}):this._throwError(t,"Close cancelled")})}createComment(t){this._item.createIssueComment(t.args).then(e=>{this._replyMessage(t,{value:e})})}set _currentPanel(t){Dn.currentPanel=t}dispose(){for(this._currentPanel=void 0,this._panel.dispose(),this._webview=void 0;this._disposables.length;){const t=this._disposables.pop();t&&t.dispose()}}getHtmlForWebview(t){const e=Dc(),r=u.Uri.joinPath(this._extensionUri,"dist","webview-pr-description.js");return`<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src vscode-resource: https:; script-src 'nonce-${e}'; style-src vscode-resource: 'unsafe-inline' http: https: data:;">

		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Pull Request #${t}</title>
	</head>
	<body class="${process.platform}">
		<div id=app></div>
		<script nonce="${e}" src="${this._webview.asWebviewUri(r).toString()}"></script>
	</body>
</html>`}getCurrentTitle(){return this._panel.title}};let Ru=Dn;ri(Ru,"ID","PullRequestOverviewPanel"),ri(Ru,"currentPanel"),ri(Ru,"_viewType","IssueOverview");var If=Object.defineProperty,Hs=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?If(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);function Of(t){return!!t.id&&!!t.milestone}const xn=class extends Ru{constructor(t,e,r,n){super(t,e,r,n,xn._viewType);Hs(this,"_repositoryDefaultBranch"),Hs(this,"_existingReviewers",[]),Hs(this,"_changeActivePullRequestListener"),this.registerFolderRepositoryListener(),ap(i=>{i&&this._item.update(i),this._postMessage({command:"update-state",state:this._item.state})},null,this._disposables),this._disposables.push(n.onDidMergePullRequest(i=>{this._postMessage({command:"update-state",state:Pt.Merged})}))}static async createOrShow(t,e,r,n=!1){const i=n?u.ViewColumn.Beside:u.window.activeTextEditor?u.window.activeTextEditor.viewColumn:u.ViewColumn.One;if(xn.currentPanel)xn.currentPanel._panel.reveal(i,!0);else{const a=`Pull Request #${r.number.toString()}`;xn.currentPanel=new xn(t,i||u.ViewColumn.Active,a,e)}await xn.currentPanel.update(e,r)}set _currentPanel(t){xn.currentPanel=t}static refresh(){this.currentPanel&&this.currentPanel.refreshPanel()}static scrollToReview(){this.currentPanel&&this.currentPanel._postMessage({command:"pr.scrollToPendingReview"})}registerFolderRepositoryListener(){this._changeActivePullRequestListener=this._folderRepositoryManager.onDidChangeActivePullRequest(t=>{if(this._folderRepositoryManager&&this._item){const e=this._item.equals(this._folderRepositoryManager.activePullRequest);this._postMessage({command:"pr.update-checkout-status",isCurrentlyCheckedOut:e})}})}getCurrentUserReviewState(t,e){const r=t.find(n=>n.reviewer.login===e.login);return r==null?void 0:r.state}async updatePullRequest(t){return Promise.all([this._folderRepositoryManager.resolvePullRequest(t.remote.owner,t.remote.repositoryName,t.number),t.getTimelineEvents(),this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(t),t.getStatusChecks(),t.getReviewRequests(),this._folderRepositoryManager.getPullRequestRepositoryAccessAndMergeMethods(t),this._folderRepositoryManager.getBranchNameForPullRequest(t)]).then(e=>{var r,n;const[i,a,o,m,E,k,P]=e;if(!i)throw new Error(`Fail to resolve Pull Request #${t.number} in ${t.remote.owner}/${t.remote.repositoryName}`);this._item=i,this._repositoryDefaultBranch=o,this._panel.title=`Pull Request #${t.number.toString()}`;const U=t.equals(this._folderRepositoryManager.activePullRequest),z=k.hasWritePermission,le=k.mergeMethodsAvailability,ce=z||this._item.canEdit(),me=u.workspace.getConfiguration("githubPullRequests").get("defaultMergeMethod"),Te=Ph(le,me);this._existingReviewers=Kh(E,a,i.author);const Re=this._folderRepositoryManager.getCurrentUser(this._item),Oe=i.base&&i.head&&!i.base.repositoryCloneUrl.equals(i.head.repositoryCloneUrl)&&$c(),Ae=this.getCurrentUserReviewState(this._existingReviewers,Re);C.debug("pr.initialize",xn.ID),this._postMessage({command:"pr.initialize",pullrequest:{number:i.number,title:i.title,url:i.html_url,createdAt:i.createdAt,body:i.body,bodyHTML:i.bodyHTML,labels:i.item.labels,author:{login:i.author.login,name:i.author.name,avatarUrl:i.userAvatar,url:i.author.url},state:i.state,events:a,isCurrentlyCheckedOut:U,isRemoteBaseDeleted:i.isRemoteBaseDeleted,base:i.base.label,isRemoteHeadDeleted:i.isRemoteHeadDeleted,isLocalHeadDeleted:!P,head:(n=(r=i.head)==null?void 0:r.label)!=null?n:"",repositoryDefaultBranch:o,canEdit:ce,hasWritePermission:z,status:m||{statuses:[]},mergeable:i.item.mergeable,reviewers:this._existingReviewers,isDraft:i.isDraft,mergeMethodsAvailability:le,defaultMergeMethod:Te,isIssue:!1,milestone:i.milestone,assignees:i.assignees,continueOnGitHub:Oe,isAuthor:Re.login===i.author.login,currentUserReviewState:Ae}})}).catch(e=>{u.window.showErrorMessage(be(e))})}async update(t,e){return this._folderRepositoryManager!==t&&(this._folderRepositoryManager=t,this._changeActivePullRequestListener&&(this._changeActivePullRequestListener.dispose(),this._changeActivePullRequestListener=void 0,this.registerFolderRepositoryListener())),this._postMessage({command:"set-scroll",scrollPosition:this._scrollPosition}),this._panel.webview.html=this.getHtmlForWebview(e.number.toString()),this.updatePullRequest(e)}async _onDidReceiveMessage(t){if(await super._onDidReceiveMessage(t)===this.MESSAGE_UNHANDLED)switch(t.command){case"pr.checkout":return this.checkoutPullRequest(t);case"pr.merge":return this.mergePullRequest(t);case"pr.deleteBranch":return this.deleteBranch(t);case"pr.readyForReview":return this.setReadyForReview(t);case"pr.approve":return this.approvePullRequest(t);case"pr.request-changes":return this.requestChanges(t);case"pr.submit":return this.submitReview(t);case"pr.checkout-default-branch":return this.checkoutDefaultBranch(t);case"pr.apply-patch":return this.applyPatch(t);case"pr.open-diff":return this.openDiff(t);case"pr.checkMergeability":return this._replyMessage(t,await this._item.getMergeability());case"pr.add-reviewers":return this.addReviewers(t);case"pr.remove-milestone":return this.removeMilestone(t);case"pr.add-milestone":return this.addMilestone(t);case"pr.add-assignees":return this.addAssignees(t);case"pr.remove-reviewer":return this.removeReviewer(t);case"pr.remove-assignee":return this.removeAssignee(t);case"pr.copy-prlink":return this.copyPrLink();case"pr.openOnGitHub":return eo(this._item,this._item._telemetry)}}async getReviewersQuickPickItems(t){var e;if(!t)return[];const n=(e=(await this._folderRepositoryManager.getAssignableUsers())[this._item.remote.remoteName])!=null?e:[],i=new Set([this._item.author.login,...this._existingReviewers.map(o=>o.reviewer.login)]),a=[];for(const o of t){const{login:m,name:E,isAuthor:k,isCommenter:P}=o;if(i.has(m))continue;const U=k&&P?"Recently edited and reviewed changes to these files":k?"Recently edited these files":P?"Recently reviewed changes to these files":"Suggested reviewer";a.push({label:m,description:E,detail:U,reviewer:o}),i.add(m)}for(const o of n)i.has(o.login)||a.push({label:o.login,description:o.name,reviewer:o});return a.length===0&&a.push({label:"No reviewers available for this repository"}),a}getAssigneesQuickPickItems(t,e){var r,n;if(!e)return[];t=t!=null?t:[];const i=new Set([...(n=(r=this._item.assignees)==null?void 0:r.map(o=>o.login))!=null?n:[]]),a=[];for(const o of e){const{login:m,name:E,isAuthor:k,isCommenter:P}=o;if(i.has(m))continue;const U=k&&P?"Recently edited and reviewed changes to these files":k?"Recently edited these files":P?"Recently reviewed changes to these files":"Suggested reviewer";a.push({label:m,description:E,detail:U,assignee:o}),i.add(m)}for(const o of t)i.has(o.login)||a.push({label:o.login,description:o.name,assignee:o});return a.length===0&&a.push({label:"No assignees available for this repository"}),a}async addReviewers(t){var e;try{const r=(e=await u.window.showQuickPick(this.getReviewersQuickPickItems(this._item.suggestedReviewers),{canPickMany:!0,matchOnDescription:!0}))==null?void 0:e.filter(n=>n.reviewer);if(r){await this._item.requestReview(r.map(i=>i.label));const n=r.map(i=>({reviewer:i.reviewer,state:"REQUESTED"}));this._existingReviewers=this._existingReviewers.concat(n),this._replyMessage(t,{added:n})}}catch(r){u.window.showErrorMessage(be(r))}}async addMilestone(t){try{async function e(n){const i=await n.getMilestones();return i.items.length?i.items.map(a=>({label:a.milestone.title,id:a.milestone.id,milestone:a.milestone})):[{label:"No milestones created for this repository."}]}const r=await u.window.showQuickPick(e(this._folderRepositoryManager),{canPickMany:!1});r&&Of(r)&&(await this._item.updateMilestone(r.id),this._replyMessage(t,{added:r.milestone}))}catch(e){u.window.showErrorMessage(be(e))}}async removeMilestone(t){try{await this._item.updateMilestone("null"),this._replyMessage(t,{})}catch(e){u.window.showErrorMessage(be(e))}}async addAssignees(t){var e,r;try{const i=(await this._folderRepositoryManager.getAssignableUsers())[this._item.remote.remoteName],a=(e=await u.window.showQuickPick(this.getAssigneesQuickPickItems(i,[]),{canPickMany:!0,matchOnDescription:!0}))==null?void 0:e.filter(o=>o.assignee);if(a){const o=a.map(m=>m.assignee);this._item.assignees=(r=this._item.assignees)==null?void 0:r.concat(o),await this._item.updateAssignees(o.map(m=>m.login)),this._replyMessage(t,{added:o})}}catch(n){u.window.showErrorMessage(be(n))}}async removeReviewer(t){try{await this._item.deleteReviewRequest(t.args);const e=this._existingReviewers.findIndex(r=>r.reviewer.login===t.args);this._existingReviewers.splice(e,1),this._replyMessage(t,{})}catch(e){u.window.showErrorMessage(be(e))}}async removeAssignee(t){var e,r,n;try{await this._item.deleteAssignees(t.args);const i=(r=(e=this._item.assignees)==null?void 0:e.findIndex(a=>a.login===t.args))!=null?r:-1;(n=this._item.assignees)==null||n.splice(i,1),this._replyMessage(t,{})}catch(i){u.window.showErrorMessage(be(i))}}async applyPatch(t){try{const e=t.args.comment,n=/```diff\n([\s\S]*)\n```/g.exec(e.body),i=L.join(this._folderRepositoryManager.repository.rootUri.path,".git",`${e.id}.diff`),a=new TextEncoder,o=u.Uri.parse(i);await u.workspace.fs.writeFile(o,a.encode(n[1])),await this._folderRepositoryManager.repository.apply(i,!0),await u.workspace.fs.delete(o)}catch(e){C.appendLine(`Applying patch failed: ${e}`),u.window.showErrorMessage(`Applying patch failed: ${be(e)}`)}}async openDiff(t){try{const e=t.args.comment;return ni.openDiffFromComment(this._folderRepositoryManager,this._item,e)}catch(e){C.appendLine(`Open diff view failed: ${be(e)}`,xn.ID)}}checkoutPullRequest(t){u.commands.executeCommand("pr.pick",this._item).then(()=>{const e=this._item.equals(this._folderRepositoryManager.activePullRequest);this._replyMessage(t,{isCurrentlyCheckedOut:e})},()=>{const e=this._item.equals(this._folderRepositoryManager.activePullRequest);this._replyMessage(t,{isCurrentlyCheckedOut:e})})}mergePullRequest(t){const{title:e,description:r,method:n}=t.args;this._folderRepositoryManager.mergePullRequest(this._item,e,r,n).then(i=>{u.commands.executeCommand("pr.refreshList"),i.merged||u.window.showErrorMessage(`Merging PR failed: ${i.message}`),this._replyMessage(t,{state:i.merged?Pt.Merged:Pt.Open})}).catch(i=>{u.window.showErrorMessage(`Unable to merge pull request. ${be(i)}`),this._throwError(t,{})})}async deleteBranch(t){const e=await this._folderRepositoryManager.getBranchNameForPullRequest(this._item),r=[];if(this._item.isResolved()){const a=this._item.head.ref;!(this._repositoryDefaultBranch===this._item.head.ref)&&!this._item.isRemoteHeadDeleted&&r.push({label:`Delete remote branch ${this._item.remote.remoteName}/${a}`,description:`${this._item.remote.normalizedHost}/${this._item.remote.owner}/${this._item.remote.repositoryName}`,type:"upstream",picked:!0})}if(e){const a=u.workspace.getConfiguration("githubPullRequests").get("defaultDeletionMethod.selectLocalBranch");r.push({label:`Delete local branch ${e.branch}`,type:"local",picked:!!a});const o=u.workspace.getConfiguration("githubPullRequests").get("defaultDeletionMethod.selectRemote");e.remote&&e.createdForPullRequest&&!e.remoteInUse&&r.push({label:`Delete remote ${e.remote}, which is no longer used by any other branch`,type:"remote",picked:!!o})}if(u.env.remoteName==="codespaces"&&r.push({label:"Suspend Codespace",type:"suspend"}),!r.length){u.window.showWarningMessage(`There is no longer an upstream or local branch for Pull Request #${this._item.number}`),this._replyMessage(t,{cancelled:!0});return}const n=await u.window.showQuickPick(r,{canPickMany:!0,ignoreFocusOut:!0}),i=[];if(n){const a=this._item.equals(this._folderRepositoryManager.activePullRequest),o=n.map(async m=>{switch(m.type){case"upstream":return await this._folderRepositoryManager.deleteBranch(this._item),i.push(m.type),this._folderRepositoryManager.repository.fetch({prune:!0});case"local":if(a){if(this._folderRepositoryManager.repository.state.workingTreeChanges.length)if(await u.window.showWarningMessage("Your local changes will be lost, do you want to continue?",{modal:!0},"Yes")==="Yes")await u.commands.executeCommand("git.cleanAll");else return;await this._folderRepositoryManager.repository.checkout(this._repositoryDefaultBranch)}return await this._folderRepositoryManager.repository.deleteBranch(e.branch,!0),i.push(m.type);case"remote":return i.push(m.type),this._folderRepositoryManager.repository.removeRemote(e.remote);case"suspend":return i.push(m.type),u.commands.executeCommand("github.codespaces.disconnectSuspend")}});await Promise.all(o),this.refreshPanel(),u.commands.executeCommand("pr.refreshList"),this._postMessage({command:"pr.deleteBranch",branchTypes:i})}else this._replyMessage(t,{cancelled:!0})}setReadyForReview(t){this._item.setReadyForReview().then(e=>{u.commands.executeCommand("pr.refreshList"),this._replyMessage(t,{isDraft:e})}).catch(e=>{u.window.showErrorMessage(`Unable to set PR ready for review. ${be(e)}`),this._throwError(t,{})})}async checkoutDefaultBranch(t){try{await this._folderRepositoryManager.checkoutDefaultBranch(t.args)}finally{this._replyMessage(t,{})}}updateReviewers(t){if(t){const e=this._existingReviewers.find(r=>t.user.login===r.reviewer.login);e?e.state=t.state:this._existingReviewers.push({reviewer:t.user,state:t.state})}}approvePullRequest(t){this._item.approve(t.args).then(e=>{this.updateReviewers(e),this._replyMessage(t,{review:e,reviewers:this._existingReviewers}),u.commands.executeCommand("pr.refreshList")},e=>{u.window.showErrorMessage(`Approving pull request failed. ${be(e)}`),this._throwError(t,`${be(e)}`)})}requestChanges(t){this._item.requestChanges(t.args).then(e=>{this.updateReviewers(e),this._replyMessage(t,{review:e,reviewers:this._existingReviewers})},e=>{u.window.showErrorMessage(`Requesting changes failed. ${be(e)}`),this._throwError(t,`${be(e)}`)})}submitReview(t){this._item.submitReview(nn.Comment,t.args).then(e=>{this.updateReviewers(e),this._replyMessage(t,{review:e,reviewers:this._existingReviewers})},e=>{u.window.showErrorMessage(`Submitting review failed. ${be(e)}`),this._throwError(t,`${be(e)}`)})}async copyPrLink(){await u.env.clipboard.writeText(this._item.html_url),u.window.showInformationMessage(`Copied link to PR ${this._item.title}!`)}editCommentPromise(t,e){return this._item.editReviewComment(t,e)}deleteCommentPromise(t){return this._item.deleteReviewComment(t.id.toString())}dispose(){super.dispose(),this._changeActivePullRequestListener&&this._changeActivePullRequestListener.dispose()}};let Zr=xn;Hs(Zr,"ID","PullRequestOverviewPanel"),Hs(Zr,"currentPanel"),Hs(Zr,"_viewType","PullRequestOverview");function Ph(t,e){return e&&t.hasOwnProperty(e)&&t[e]?e:["merge","squash","rebase"].find(n=>t[n])}var Df=Object.defineProperty,Qa=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Df(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class xf{constructor(e,r,n,i){this.pullRequestModel=e,this._folderReposManager=r,this._commentController=n,this._sessionState=i,Qa(this,"_pendingCommentThreadAdds",[]),Qa(this,"_commentHandlerId"),Qa(this,"_commentThreadCache",{}),Qa(this,"_openPREditors",[]),Qa(this,"_disposables",[]),this._commentHandlerId=Th(),Mi(this._commentHandlerId,this),this.initializeThreadsInOpenEditors(),this.registerListeners()}registerListeners(){this._disposables.push(this.pullRequestModel.onDidChangeReviewThreads(e=>this.onDidChangeReviewThreads(e))),this._disposables.push(u.window.onDidChangeVisibleTextEditors(async e=>{this.onDidChangeOpenEditors(e)})),this._disposables.push(this.pullRequestModel.onDidChangePendingReviewState(e=>{for(const r in this._commentThreadCache)this._commentThreadCache[r].forEach(n=>{$h(n,e)})})),this._disposables.push(u.window.onDidChangeActiveTextEditor(e=>{this.refreshContextKey(e)})),this._disposables.push(this._sessionState.onDidChangeCommentsExpandState(e=>{for(const r of this.pullRequestModel.reviewThreadsCache){const n=this.getCommentThreadCacheKey(r.path,r.diffSide===Ct.LEFT),i=this._commentThreadCache[n];if(!i){C.appendLine(`PullRequestCommentController> Thread with ID ${n} is no longer in cache`);continue}const a=i.findIndex(o=>o.gitHubThreadId===r.id);if(a>-1){const o=i[a];Pu(o,r,e)}}}))}refreshContextKey(e){if(!e)return;const r=e.document.uri;if(r.scheme!=="pr")return;const n=er(r);!n||n.prNumber!==this.pullRequestModel.number||this.setContextKey(this.pullRequestModel.hasPendingReview)}getPREditors(e){return e.filter(r=>{if(r.document.uri.scheme!=="pr")return!1;const n=er(r.document.uri);return!(!n||n.prNumber!==this.pullRequestModel.number)})}getCommentThreadCacheKey(e,r){return`${e}-${r?"original":"modified"}`}addThreadsForEditors(e){const r=this.pullRequestModel.reviewThreadsCache,n=fe(r,i=>i.path);e.forEach(i=>{const{fileName:a,isBase:o}=er(i.document.uri);n[a]&&(this._commentThreadCache[this.getCommentThreadCacheKey(a,o)]=n[a].filter(m=>m.diffSide===Ct.LEFT&&o||m.diffSide===Ct.RIGHT&&!o).map(m=>{const E=new u.Range(new u.Position(m.line-1,0),new u.Position(m.line-1,0));return Ka(i.document.uri,E,m,this._commentController)}))})}initializeThreadsInOpenEditors(){const e=this.getPREditors(u.window.visibleTextEditors);this._openPREditors=e,this.addThreadsForEditors(e)}onDidChangeOpenEditors(e){const r=this.getPREditors(e),n=this._openPREditors.filter(a=>!r.includes(a)),i=r.filter(a=>!this._openPREditors.includes(a));this._openPREditors=r,n.forEach(a=>{const{fileName:o,isBase:m}=er(a.document.uri),E=this.getCommentThreadCacheKey(o,m);(this._commentThreadCache[E]||[]).forEach(P=>P.dispose()),delete this._commentThreadCache[E]}),i.length&&this.addThreadsForEditors(i)}onDidChangeReviewThreads(e){e.added.forEach(r=>{const n=r.path,i=this._pendingCommentThreadAdds.findIndex(m=>{const E=this.gitRelativeRootPath(m.uri.path)===r.path,k=m.range.start.line+1===r.line;return E&&k});let a;if(i>-1)a=this._pendingCommentThreadAdds[i],a.gitHubThreadId=r.id,a.comments=r.comments.map(m=>new sr(m,a)),this._pendingCommentThreadAdds.splice(i,1);else{const E=this.getPREditors(u.window.visibleTextEditors).find(k=>{const P=er(k.document.uri),U=r.diffSide===Ct.RIGHT&&!(P==null?void 0:P.isBase)||r.diffSide===Ct.LEFT&&(P==null?void 0:P.isBase);return(P==null?void 0:P.fileName)===n&&U});if(E){const k=new u.Range(new u.Position(r.line-1,0),new u.Position(r.line-1,0));a=Ka(E.document.uri,k,r,this._commentController)}}if(!a)return;const o=this.getCommentThreadCacheKey(r.path,r.diffSide===Ct.LEFT);this._commentThreadCache[o]?this._commentThreadCache[o].push(a):this._commentThreadCache[o]=[a]}),e.changed.forEach(r=>{const n=this.getCommentThreadCacheKey(r.path,r.diffSide===Ct.LEFT),i=this._commentThreadCache[n].findIndex(a=>a.gitHubThreadId===r.id);if(i>-1){const a=this._commentThreadCache[n][i];Pu(a,r)}}),e.removed.forEach(async r=>{const n=this.getCommentThreadCacheKey(r.path,r.diffSide===Ct.LEFT),i=this._commentThreadCache[n].findIndex(a=>a.gitHubThreadId===r.id);if(i>-1){const a=this._commentThreadCache[n][i];this._commentThreadCache[n].splice(i,1),a.dispose()}})}hasCommentThread(e){if(e.uri.scheme!=="pr")return!1;const r=er(e.uri);return!(!r||r.prNumber!==this.pullRequestModel.number)}getCommentSide(e){const r=er(e.uri);return(r==null?void 0:r.isBase)?Ct.LEFT:Ct.RIGHT}async createOrReplyComment(e,r,n,i){var a;const o=e.comments.length,m=n?!1:i!==void 0?i:this.pullRequestModel.hasPendingReview,E=this.optimisticallyAddComment(e,r,m);try{if(o)await this.reply(e,r,n);else{const k=this.gitRelativeRootPath(e.uri.path),P=this.getCommentSide(e);this._pendingCommentThreadAdds.push(e),await this.pullRequestModel.createReviewThread(r,k,e.range.start.line+1,P,n)}n&&await this.pullRequestModel.submitReview()}catch(k){((a=k.graphQLErrors)==null?void 0:a.length)&&k.graphQLErrors[0].type==="NOT_FOUND"?u.window.showWarningMessage("The comment that you're replying to was deleted. Refresh to update.","Refresh").then(P=>{P==="Refresh"&&this.pullRequestModel.invalidate()}):u.window.showErrorMessage(`Creating comment failed: ${k}`),e.comments=e.comments.map(P=>(P instanceof Wr&&P.id===E&&(P.mode=u.CommentMode.Editing),P))}}reply(e,r,n){const i=e.comments[0];if(i instanceof sr)return this.pullRequestModel.createCommentReply(r,i._rawComment.graphNodeId,n);throw new Error("Cannot respond to temporary comment")}optimisticallyEditComment(e,r){const n=this._folderReposManager.getCurrentUser(this.pullRequestModel),i=new Wr(e,r.body instanceof u.MarkdownString?r.body.value:r.body,!!r.label,n,r);return e.comments=e.comments.map(a=>a instanceof sr&&a.commentId===r.commentId?i:a),i.id}async editComment(e,r){if(r instanceof sr){const n=this.optimisticallyEditComment(e,r);try{await this.pullRequestModel.editReviewComment(r._rawComment,r.body instanceof u.MarkdownString?r.body.value:r.body)}catch(i){u.window.showErrorMessage(`Editing comment failed ${i}`),e.comments=e.comments.map(a=>a instanceof Wr&&a.id===n?new sr(r._rawComment,e):a)}}else this.createOrReplyComment(e,r.body instanceof u.MarkdownString?r.body.value:r.body,!1)}async deleteComment(e,r){r instanceof sr?await this.pullRequestModel.deleteReviewComment(r.commentId):e.comments=e.comments.filter(n=>!(n instanceof Wr&&n.id===r.id)),await this.pullRequestModel.validateDraftMode()}gitRelativeRootPath(e){return L.relative(this._folderReposManager.repository.rootUri.path,e).replace(/\\/g,"/")}async startReview(e,r){const n=e.comments.length,i=this.optimisticallyAddComment(e,r,!0);try{if(n)await this.reply(e,r,!1);else{const a=this.gitRelativeRootPath(e.uri.path),o=this.getCommentSide(e);this._pendingCommentThreadAdds.push(e),await this.pullRequestModel.createReviewThread(r,a,e.range.start.line+1,o)}this.setContextKey(!0)}catch(a){u.window.showErrorMessage(`Starting a review failed: ${a}`),e.comments=e.comments.map(o=>(o instanceof Wr&&o.id===i&&(o.mode=u.CommentMode.Editing),o))}}async openReview(){await Zr.createOrShow(this._folderReposManager.context.extensionUri,this._folderReposManager,this.pullRequestModel),Zr.scrollToReview(),this._folderReposManager.telemetry.sendTelemetryEvent("pr.openDescription")}optimisticallyAddComment(e,r,n){const i=this._folderReposManager.getCurrentUser(this.pullRequestModel),a=new Wr(e,r,n,i);return this.updateCommentThreadComments(e,[...e.comments,a]),a.id}updateCommentThreadComments(e,r){e.comments=r,zs(e)}async createCommentOnResolve(e,r){const n=await this.pullRequestModel.getPendingReviewId();await this.createOrReplyComment(e,r,!n)}async resolveReviewThread(e,r){try{r&&await this.createCommentOnResolve(e,r),await this.pullRequestModel.resolveReviewThread(e.gitHubThreadId)}catch(n){u.window.showErrorMessage(`Resolving conversation failed: ${n}`)}}async unresolveReviewThread(e,r){try{r&&await this.createCommentOnResolve(e,r),await this.pullRequestModel.unresolveReviewThread(e.gitHubThreadId)}catch(n){u.window.showErrorMessage(`Unresolving conversation failed: ${n}`)}}async toggleReaction(e,r){e.parent.uri.scheme==="pr"&&(e.reactions&&!e.reactions.find(n=>n.label===r.label&&!!n.authorHasReacted)?await this.pullRequestModel.addCommentReaction(e._rawComment.graphNodeId,r):await this.pullRequestModel.deleteCommentReaction(e._rawComment.graphNodeId,r))}setContextKey(e){u.commands.executeCommand("setContext","prInDraft",e)}dispose(){Object.keys(this._commentThreadCache).forEach(e=>{this._commentThreadCache[e].forEach(r=>r.dispose())}),Fi(this._commentHandlerId),this._disposables.forEach(e=>e.dispose())}}var Mf=Object.defineProperty,Nh=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Mf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Ff{constructor(e,r){this.commentsController=e,this._sessionState=r,Nh(this,"_prCommentHandlers",{}),Nh(this,"_prCommentingRangeProviders",{}),this.commentsController.commentingRangeProvider=this,this.commentsController.reactionHandler=this.toggleReaction.bind(this)}async provideCommentingRanges(e,r){const n=e.uri,i=er(n);return!i||!this._prCommentingRangeProviders[i.prNumber]?void 0:this._prCommentingRangeProviders[i.prNumber].provideCommentingRanges.bind(this._prCommentingRangeProviders[i.prNumber])(e,r)}async toggleReaction(e,r){const n=e.parent.uri,i=er(n);return!i||!this._prCommentHandlers[i.prNumber]||!this._prCommentHandlers[i.prNumber].handler.toggleReaction?void 0:this._prCommentHandlers[i.prNumber].handler.toggleReaction.bind(this._prCommentHandlers[i.prNumber].handler)(e,r)}registerCommentController(e,r,n){if(this._prCommentHandlers[e])return this._prCommentHandlers[e].refCount+=1,this._prCommentHandlers[e];const i=new xf(r,n,this.commentsController,this._sessionState);return this._prCommentHandlers[e]={handler:i,refCount:1,dispose:()=>{!this._prCommentHandlers[e]||(this._prCommentHandlers[e].refCount-=1,this._prCommentHandlers[e].refCount===0&&(this._prCommentHandlers[e].handler.dispose(),delete this._prCommentHandlers[e]))}},this._prCommentHandlers[e]}registerCommentingRangeProvider(e,r){return this._prCommentingRangeProviders[e]=r,{dispose:()=>{delete this._prCommentingRangeProviders[e]}}}dispose(){Object.keys(this._prCommentHandlers).forEach(e=>{this._prCommentHandlers[e].handler.dispose()}),this._prCommentingRangeProviders={},this._prCommentHandlers={}}}var Lf=Je(9967),qf=Je.n(Lf),Uf=Object.defineProperty,gn=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Uf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Ah=20,Bs="GraphQL";var Gr;(function(t){t.Unknown="unknown",t.Admin="ADMIN",t.Maintain="MAINTAIN",t.Read="READ",t.Triage="TRIAGE",t.Write="WRITE"})(Gr||(Gr={}));const nt=class{constructor(t,e,r,n){this.remote=t,this._credentialStore=e,this._telemetry=r,this._sessionState=n,gn(this,"_initialized",!1),gn(this,"_hub"),gn(this,"_metadata"),gn(this,"_toDispose",[]),gn(this,"commentsController"),gn(this,"commentsHandler"),gn(this,"_pullRequestModels",new Map),gn(this,"isGitHubDotCom"),gn(this,"query",async i=>{var a;const o=this.hub&&this.hub.graphql;if(!o)return C.debug(`Not available for query: ${i}`,Bs),{data:null,loading:!1,networkStatus:Dt.error,stale:!1};C.debug(`Request: ${JSON.stringify(i,null,2)}`,Bs);let m;try{m=await o.query(i)}catch(E){if(i.query!==this.schema.GetChecks&&((a=E.message)==null?void 0:a.startsWith("GraphQL error: Resource protected by organization SAML enforcement.")))await this._credentialStore.recreate(),m=await o.query(i);else throw E}return C.debug(`Response: ${JSON.stringify(m,null,2)}`,Bs),m}),gn(this,"mutate",async i=>{const a=this.hub&&this.hub.graphql;if(!a)return C.debug(`Not available for query: ${i}`,Bs),{data:null,loading:!1,networkStatus:Dt.error,stale:!1};C.debug(`Request: ${JSON.stringify(i,null,2)}`,Bs);const o=await a.mutate(i);return C.debug(`Response: ${JSON.stringify(o,null,2)}`,Bs),o}),this.isGitHubDotCom=t.host.toLowerCase()==="github.com"}get hub(){if(!this._hub)throw this._initialized?new Eu("Not authenticated."):new Error("Call ensure() before accessing this property.");return this._hub}equals(t){return this.remote.equals(t.remote)}async ensureCommentsController(){try{if(this.commentsController)return;await this.ensure(),this.commentsController=u.comments.createCommentController(`github-browse-${this.remote.normalizedHost}`,`GitHub Pull Request for ${this.remote.normalizedHost}`),this.commentsHandler=new Ff(this.commentsController,this._sessionState),this._toDispose.push(this.commentsHandler),this._toDispose.push(this.commentsController)}catch(t){console.log(t)}}dispose(){this._toDispose.forEach(t=>t.dispose())}get octokit(){return this.hub&&this.hub.octokit}get schema(){return qf()}async getMetadata(){var t;if(C.debug("Fetch metadata - enter",nt.ID),this._metadata)return C.debug(`Fetch metadata ${(t=this._metadata.owner)==null?void 0:t.login}/${this._metadata.name} - done`,nt.ID),this._metadata;const{octokit:e,remote:r}=await this.ensure(),n=await e.repos.get({owner:r.owner,repo:r.repositoryName});return C.debug(`Fetch metadata ${r.owner}/${r.repositoryName} - done`,nt.ID),this._metadata={...n.data,currentUser:e.currentUser},this._metadata}async resolveRemote(){try{const{clone_url:t}=await this.getMetadata();this.remote=oh(this.remote.remoteName,t,this.remote.gitProtocol)}catch(t){if(C.appendLine(`Unable to resolve remote: ${t}`),_f(t))return!1}return!0}async ensure(){return this._initialized=!0,this._credentialStore.isAuthenticated(this.remote.authProviderId)?this._hub=this._credentialStore.getHub(this.remote.authProviderId):this._hub=await this._credentialStore.showSignInNotification(this.remote.authProviderId),this}async getDefaultBranch(){try{C.debug("Fetch default branch - enter",nt.ID);const{octokit:t,remote:e}=await this.ensure(),{data:r}=await t.repos.get({owner:e.owner,repo:e.repositoryName});return C.debug("Fetch default branch - done",nt.ID),r.default_branch}catch(t){C.appendLine(`GitHubRepository> Fetching default branch failed: ${t}`)}return"master"}async getRepoAccessAndMergeMethods(){var t,e,r,n,i;try{C.debug("Fetch repo permissions and available merge methods - enter",nt.ID);const{octokit:a,remote:o}=await this.ensure(),{data:m}=await a.repos.get({owner:o.owner,repo:o.repositoryName});return C.debug("Fetch repo permissions and available merge methods - done",nt.ID),{hasWritePermission:(e=(t=m.permissions)==null?void 0:t.push)!=null?e:!1,mergeMethodsAvailability:{merge:(r=m.allow_merge_commit)!=null?r:!1,squash:(n=m.allow_squash_merge)!=null?n:!1,rebase:(i=m.allow_rebase_merge)!=null?i:!1}}}catch(a){C.appendLine(`GitHubRepository> Fetching repo permissions and available merge methods failed: ${a}`)}return{hasWritePermission:!0,mergeMethodsAvailability:{merge:!0,squash:!0,rebase:!0}}}async getAllPullRequests(t){try{C.debug("Fetch all pull requests - enter",nt.ID);const{octokit:e,remote:r}=await this.ensure(),n=await e.pulls.list({owner:r.owner,repo:r.repositoryName,per_page:Ah,page:t||1}),i=!!n.headers.link&&n.headers.link.indexOf('rel="next"')>-1;if(!n.data)return C.appendLine(`Warning: no result data for ${r.owner}/${r.repositoryName} Status: ${n.status}`),{items:[],hasMorePages:!1};const a=n.data.map(o=>o.head.repo?this.createOrUpdatePullRequestModel(ss(o,this)):(C.appendLine("GitHubRepository> The remote branch for this PR was already deleted."),null)).filter(o=>o!==null);return C.debug("Fetch all pull requests - done",nt.ID),{items:a,hasMorePages:i}}catch(e){if(C.appendLine(`Fetching all pull requests failed: ${e}`,nt.ID),e.code===404)u.window.showWarningMessage(`Fetching pull requests for remote '${this.remote.remoteName}' failed, please check if the url ${this.remote.url} is valid.`);else throw e}}async getPullRequestForBranch(t){try{C.debug("Fetch pull requests for branch - enter",nt.ID);const{octokit:e,remote:r}=await this.ensure(),i=(await e.pulls.list({owner:r.owner,repo:r.repositoryName,head:`${r.owner}:${t}`})).data.map(a=>this.createOrUpdatePullRequestModel(ss(a,this))).filter(a=>a!==null);return C.debug("Fetch pull requests for branch - done",nt.ID),i}catch(e){if(C.appendLine(`Fetching pull requests for branch failed: ${e}`,nt.ID),e.code===404)u.window.showWarningMessage(`Fetching pull requests for remote '${this.remote.remoteName}' failed, please check if the url ${this.remote.url} is valid.`);else throw e}}getRepoForIssue(t,e){if(e.repositoryName&&e.repositoryUrl&&(t.remote.owner!==e.repositoryOwner||t.remote.repositoryName!==e.repositoryName)){const r=new kc(e.repositoryName,e.repositoryUrl,new Bn(e.repositoryUrl));t=new nt(r,this._credentialStore,this._telemetry,this._sessionState)}return t}async getIssuesForUserByMilestone(t){var e;try{C.debug("Fetch all issues - enter",nt.ID);const{query:r,remote:n,schema:i}=await this.ensure(),{data:a}=await r({query:i.GetMilestones,variables:{owner:n.owner,name:n.repositoryName,assignee:(e=this._credentialStore.getCurrentUser(n.authProviderId))==null?void 0:e.login}});C.debug("Fetch all issues - done",nt.ID);const o=[];let m=this;return a&&a.repository.milestones&&a.repository.milestones.nodes&&a.repository.milestones.nodes.forEach(E=>{const k=Fc(E);if(k){const P=[];E.issues.edges.forEach(U=>{const z=qc(U.node,this);m=this.getRepoForIssue(m,z),P.push(new gr(m,m.remote,z))}),o.push({milestone:k,issues:P})}}),{items:o,hasMorePages:a.repository.milestones.pageInfo.hasNextPage}}catch(r){C.appendLine(`GithubRepository> Unable to fetch issues: ${r}`);return}}async getIssuesWithoutMilestone(t){var e;try{C.debug("Fetch issues without milestone- enter",nt.ID);const{query:r,remote:n,schema:i}=await this.ensure(),{data:a}=await r({query:i.IssuesWithoutMilestone,variables:{owner:n.owner,name:n.repositoryName,assignee:(e=this._credentialStore.getCurrentUser(n.authProviderId))==null?void 0:e.login}});C.debug("Fetch issues without milestone - done",nt.ID);const o=[];let m=this;return a&&a.repository.issues.edges&&a.repository.issues.edges.forEach(E=>{if(E.node.id){const k=qc(E.node,this);m=this.getRepoForIssue(m,k),o.push(new gr(m,m.remote,k))}}),{items:o,hasMorePages:a.repository.issues.pageInfo.hasNextPage}}catch(r){C.appendLine(`GithubRepository> Unable to fetch issues without milestone: ${r}`);return}}async getIssues(t,e){try{C.debug("Fetch issues with query - enter",nt.ID);const{query:r,schema:n}=await this.ensure(),{data:i}=await r({query:n.Issues,variables:{query:`${e} type:issue`}});C.debug("Fetch issues with query - done",nt.ID);const a=[];let o=this;return i&&i.search.edges&&i.search.edges.forEach(m=>{if(m.node.id){const E=qc(m.node,this);o=this.getRepoForIssue(o,E),a.push(new gr(o,o.remote,E))}}),{items:a,hasMorePages:i.search.pageInfo.hasNextPage}}catch(r){C.appendLine(`GithubRepository> Unable to fetch issues with query: ${r}`);return}}async getMaxIssue(){try{C.debug("Fetch max issue - enter",nt.ID);const{query:t,remote:e,schema:r}=await this.ensure(),{data:n}=await t({query:r.MaxIssue,variables:{owner:e.owner,name:e.repositoryName}});return C.debug("Fetch max issue - done",nt.ID),n&&n.repository.issues.edges.length===1?n.repository.issues.edges[0].node.number:void 0}catch(t){C.appendLine(`GithubRepository> Unable to fetch issues with query: ${t}`);return}}async getViewerPermission(){try{C.debug("Fetch viewer permission - enter",nt.ID);const{query:t,remote:e,schema:r}=await this.ensure(),{data:n}=await t({query:r.GetViewerPermission,variables:{owner:e.owner,name:e.repositoryName}});return C.debug("Fetch viewer permission - done",nt.ID),ng(n)}catch(t){return C.appendLine(`GithubRepository> Unable to fetch viewer permission: ${t}`),Gr.Unknown}}async fork(){try{C.debug("Fork repository",nt.ID);const{octokit:t,remote:e}=await this.ensure();return(await t.repos.createFork({owner:e.owner,repo:e.repositoryName})).data.clone_url}catch(t){C.appendLine(`GitHubRepository> Forking repository failed: ${t}`);return}}async getRepositoryForkDetails(){try{C.debug("Fetch repository fork details - enter",nt.ID);const{query:t,remote:e,schema:r}=await this.ensure(),{data:n}=await t({query:r.GetRepositoryForkDetails,variables:{owner:e.owner,name:e.repositoryName}});return C.debug("Fetch repository fork details - done",nt.ID),n.repository}catch(t){C.appendLine(`GithubRepository> Unable to fetch repository fork details: ${t}`);return}}async getAuthenticatedUser(){const{octokit:t}=await this.ensure();return(await t.users.getAuthenticated({})).data.login}async getPullRequestsForCategory(t,e){try{C.debug(`Fetch pull request category ${t} - enter`,nt.ID);const{octokit:r,remote:n}=await this.ensure(),i=await r.users.getAuthenticated({}),a=await r.repos.get({owner:this.remote.owner,repo:this.remote.repositoryName}),{data:o,headers:m}=await r.search.issuesAndPullRequests({q:ig(a.data.full_name,i.data.login,t),per_page:Ah,page:e||1}),E=[];o.items.forEach(z=>{E.push(new Promise(async(le,ce)=>{const me=await r.pulls.get({owner:n.owner,repo:n.repositoryName,pull_number:z.number});le(me)}))});const k=!!m.link&&m.link.indexOf('rel="next"')>-1,U=(await Promise.all(E)).map(z=>z.data.head.repo?this.createOrUpdatePullRequestModel(ss(z.data,this)):(C.appendLine("GitHubRepository> The remote branch for this PR was already deleted."),null)).filter(z=>z!==null);return C.debug(`Fetch pull request category ${t} - done`,nt.ID),{items:U,hasMorePages:k}}catch(r){if(C.appendLine(`GitHubRepository> Fetching all pull requests failed: ${r}`),r.code===404)u.window.showWarningMessage(`Fetching pull requests for remote ${this.remote.remoteName}, please check if the url ${this.remote.url} is valid.`);else throw r}}createOrUpdatePullRequestModel(t){let e=this._pullRequestModels.get(t.number);return e?e.update(t):(e=new ni(this._telemetry,this,this.remote,t),e.onDidInvalidate(()=>this.getPullRequest(t.number)),this._pullRequestModels.set(t.number,e)),e}async createPullRequest(t){const{octokit:e}=await this.ensure(),{data:r}=await e.pulls.create(t);return this.createOrUpdatePullRequestModel(ss(r,this))}async getPullRequest(t){try{C.debug(`Fetch pull request ${t} - enter`,nt.ID);const{query:e,remote:r,schema:n}=await this.ensure(),{data:i}=await e({query:n.PullRequest,variables:{owner:r.owner,name:r.repositoryName,number:t}});return C.debug(`Fetch pull request ${t} - done`,nt.ID),this.createOrUpdatePullRequestModel(jh(i,this))}catch(e){C.appendLine(`GithubRepository> Unable to fetch PR: ${e}`);return}}async getIssue(t,e=!1){try{C.debug(`Fetch issue ${t} - enter`,nt.ID);const{query:r,remote:n,schema:i}=await this.ensure(),{data:a}=await r({query:e?i.IssueWithComments:i.Issue,variables:{owner:n.owner,name:n.repositoryName,number:t}});return C.debug(`Fetch issue ${t} - done`,nt.ID),new gr(this,n,jh(a,this))}catch(r){C.appendLine(`GithubRepository> Unable to fetch PR: ${r}`);return}}async listBranches(t,e){const{octokit:r}=await this.ensure();C.debug(`List branches for ${t}/${e} - enter`,nt.ID);try{let n=[];const i=new Date().getTime();for await(const a of r.paginate.iterator("GET /repos/:owner/:repo/branches",{owner:t,repo:e,per_page:100}))if(n.push(...a.data.map(o=>o.name)),new Date().getTime()-i>5e3)break;return C.debug(`List branches for ${t}/${e} - done`,nt.ID),n}catch(n){throw C.debug(`List branches for ${t}/${e} failed`,nt.ID),n}}async deleteBranch(t){const{octokit:e}=await this.ensure();if(!!t.validatePullRequestModel("Unable to delete branch"))try{await e.git.deleteRef({owner:t.head.repositoryCloneUrl.owner,repo:t.head.repositoryCloneUrl.repositoryName,ref:`heads/${t.head.ref}`})}catch(r){C.appendLine(`GithubRepository> Unable to delete branch: ${r}`);return}}async getMentionableUsers(){C.debug("Fetch mentionable users - enter",nt.ID);const{query:t,remote:e,schema:r}=await this.ensure();let n=null,i=!1;const a=[];do try{const o=await t({query:r.GetMentionableUsers,variables:{owner:e.owner,name:e.repositoryName,first:100,after:n}});a.push(...o.data.repository.mentionableUsers.nodes.map(m=>({login:m.login,avatarUrl:m.avatarUrl,name:m.name,url:m.url,email:m.email}))),i=o.data.repository.mentionableUsers.pageInfo.hasNextPage,n=o.data.repository.mentionableUsers.pageInfo.endCursor}catch(o){return C.debug(`Unable to fetch mentionable users: ${o}`,nt.ID),a}while(i);return a}async getAssignableUsers(){C.debug("Fetch assignable users - enter",nt.ID);const{query:t,remote:e,schema:r}=await this.ensure();let n=null,i=!1;const a=[];do try{const o=await t({query:r.GetAssignableUsers,variables:{owner:e.owner,name:e.repositoryName,first:100,after:n}});a.push(...o.data.repository.assignableUsers.nodes.map(m=>({login:m.login,avatarUrl:m.avatarUrl,name:m.name,url:m.url,email:m.email}))),i=o.data.repository.assignableUsers.pageInfo.hasNextPage,n=o.data.repository.assignableUsers.pageInfo.endCursor}catch(o){return C.debug(`Unable to fetch assignable users: ${o}`,nt.ID),o.graphQLErrors&&o.graphQLErrors.length>0&&o.graphQLErrors[0].type==="INSUFFICIENT_SCOPES"&&u.window.showWarningMessage(`GitHub user features will not work. ${o.graphQLErrors[0].message}`),a}while(i);return a}async compareCommits(t,e){const{remote:r,octokit:n}=await this.ensure(),{data:i}=await n.repos.compareCommits({repo:r.repositoryName,owner:r.owner,base:t,head:e});return i}isCurrentUser(t){return this._credentialStore.isCurrentUser(t)}};let xc=nt;gn(xc,"ID","GitHubRepository");var $f=Object.defineProperty,Gf=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?$f(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Ih="github-pr-remote",Oh="github-pr-owner-number",Dh=/branch\.(.+)\.github-pr-owner-number/,Hf=/branch\.(.+)\.remote/,xt=class{static async checkoutFromFork(t,e,r){const n=await xt.calculateUniqueBranchNameForPR(t,e);r||(C.appendLine(`Branch ${n} is from a fork. Create a remote first.`,xt.ID),r=await xt.createRemote(t,e.remote,e.head.repositoryCloneUrl));const i=`${e.head.ref}:${n}`;C.debug(`Fetch ${r}/${e.head.ref}:${n} - start`,xt.ID),await t.fetch(r,i,1),C.debug(`Fetch ${r}/${e.head.ref}:${n} - done`,xt.ID),await t.checkout(n),await t.setBranchUpstream(n,`refs/remotes/${r}/${e.head.ref}`),await this.unshallow(t),xt.associateBranchWithPullRequest(t,e,n)}static async fetchAndCheckout(t,e,r){var n;if(!r.validatePullRequestModel("Checkout pull request failed"))return;const i=xt.getHeadRemoteForPullRequest(e,r),a=r.head.repositoryCloneUrl.owner!==r.base.repositoryCloneUrl.owner;if(!i||a)return xt.checkoutFromFork(t,r,i&&i.remoteName);const o=r.head.ref,m=i.remoteName;let E;try{if(E=await t.getBranch(o),((n=t.state.HEAD)==null?void 0:n.name)===E.name){C.appendLine(`Tried to checkout ${o}, but branch is already checked out.`,xt.ID);return}if(C.debug(`Checkout ${o}`,xt.ID),await t.checkout(o),!E.upstream){const k=`refs/remotes/${m}/${o}`;await t.setBranchUpstream(o,k)}E.behind!==void 0&&E.behind>0&&E.ahead===0&&(C.debug("Pull from upstream",xt.ID),await t.pull())}catch(k){C.appendLine(`Branch ${m}/${o} doesn't exist on local disk yet.`,xt.ID);const P=`refs/remotes/${m}/${o}`;C.appendLine(`Fetch tracked branch ${P}`,xt.ID),await t.fetch(m,o,1);const U=await t.getBranch(P);await t.createBranch(o,!0,U.commit),await t.setBranchUpstream(o,P),await this.unshallow(t)}await xt.associateBranchWithPullRequest(t,r,o)}static async unshallow(t){try{await t.pull(!0)}catch(e){C.appendLine(`Unshallowing failed: ${e}. Falling back to git pull`),await t.pull()}}static async checkoutExistingPullRequestBranch(t,e){const r=xt.buildPullRequestMetadata(e),n=await t.getConfigs(),i=o=>n.filter(({key:m})=>o===m).map(({value:m})=>m)[0],a=n.map(o=>{const m=Dh.exec(o.key);return{branch:m&&m.length?m[1]:null,value:o.value}}).filter(o=>o.branch&&o.value===r);if(a&&a.length){const o=a[0].branch;await t.checkout(o);const m=i(`branch.${o}.remote`),E=i(`branch.${o}.merge`);await t.fetch(m,E);const k=await t.getBranch(a[0].branch);return k.behind!==void 0&&k.behind>0&&k.ahead===0&&(C.debug("Pull from upstream",xt.ID),await t.pull()),!0}else return!1}static async getBranchNRemoteForPullRequest(t,e){const r=xt.buildPullRequestMetadata(e),n=await t.getConfigs(),i=n.map(a=>{const o=Dh.exec(a.key);return{branch:o&&o.length?o[1]:null,value:a.value}}).find(a=>!!a.branch&&a.value===r);if(i){const a=i.branch;try{const o=`branch.${a}.remote`,m=n.filter(U=>U.key===o).map(U=>U.value);let E;m.length&&(E=m[0]);let k=!1;if(E){const U=`remote.${E}.github-pr-remote`;n.filter(le=>le.key===U&&le.value).length&&(k=!0)}let P;return k&&(P=n.some(U=>!!(Hf.exec(U.key)&&U.key!==`branch.${a}.remote`&&U.value===E))),{branch:a,remote:E,createdForPullRequest:k,remoteInUse:P}}catch(o){return{branch:a}}}return null}static buildPullRequestMetadata(t){return`${t.base.repositoryCloneUrl.owner}#${t.base.repositoryCloneUrl.repositoryName}#${t.number}`}static parsePullRequestMetadata(t){if(t){const e=/(.*)#(.*)#(.*)/g.exec(t);if(e&&e.length===4){const[,r,n,i]=e;return{owner:r,repositoryName:n,prNumber:Number(i)}}}}static getMetadataKeyForBranch(t){return`branch.${t}.${Oh}`}static async getMatchingPullRequestMetadataForBranch(t,e){try{const r=this.getMetadataKeyForBranch(e),n=await t.getConfig(r);return xt.parsePullRequestMetadata(n)}catch(r){return}}static async createRemote(t,e,r){C.appendLine(`create remote for ${r}.`,xt.ID);const n=Us(t);for(const a of n)if(new Bn(a.url).equals(r))return a.remoteName;const i=xt.getUniqueRemoteName(t,r.owner);return r.update({type:e.gitProtocol.type}),await t.addRemote(i,r.toString()),await t.setConfig(`remote.${i}.${Ih}`,"true"),i}static async isRemoteCreatedForPullRequest(t,e){try{C.debug(`Check if remote '${e}' is created for pull request - start`,xt.ID);const r=await t.getConfig(`remote.${e}.${Ih}`);return C.debug(`Check if remote '${e}' is created for pull request - end`,xt.ID),r==="true"}catch(r){return!1}}static async calculateUniqueBranchNameForPR(t,e){const r=`pr/${e.author.login}/${e.number}`;let n=r,i=1;for(;;)try{await t.getBranch(n),n=`${r}-${i++}`}catch(a){break}return n}static getUniqueRemoteName(t,e){let r=e,n=1;const i=Us(t);for(;i.find(a=>a.remoteName===r);)r=`${e}${n++}`;return r}static getHeadRemoteForPullRequest(t,e){return t.find(r=>r.gitProtocol&&r.gitProtocol.equals(e.head.repositoryCloneUrl))}static async associateBranchWithPullRequest(t,e,r){C.appendLine(`associate ${r} with Pull Request #${e.number}`,xt.ID);const n=`branch.${r}.${Oh}`;await t.setConfig(n,xt.buildPullRequestMetadata(e))}};let vn=xt;Gf(vn,"ID","PullRequestGitHelper");var Bf=Object.defineProperty,Tt=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Bf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Vf extends Error{constructor(e){super();this.repository=e}get message(){return`${this.repository.rootUri.toString()} has no GitHub remotes`}}class xh extends Error{constructor(e){super();this.repository=e}get message(){return`${this.repository.rootUri.toString()} has a detached HEAD (create a branch first)`}}class jf extends Error{constructor(e,r,n){super();this.branchName=e,this.upstreamRef=r,this.problem=n}get message(){const{upstreamRef:{remote:e,name:r},branchName:n,problem:i}=this;return`The upstream ref ${e}/${r} for branch ${n} ${i}.`}}const Or="githubPullRequests",Wa="remotes",Mh="ReposManagerStateContext";var en;(function(t){t.Initializing="Initializing",t.NeedsAuthentication="NeedsAuthentication",t.RepositoriesLoaded="RepositoriesLoaded"})(en||(en={}));const Fh="No Milestone";var Lh;(function(t){t[t.PullRequest=0]="PullRequest",t[t.Milestones=1]="Milestones",t[t.IssuesWithoutMilestone=2]="IssuesWithoutMilestone",t[t.IssueSearch=3]="IssueSearch"})(Lh||(Lh={}));const tn=class{constructor(t,e,r,n,i,a){this.context=t,this._repository=e,this.telemetry=r,this._git=n,this._credentialStore=i,this._sessionState=a,Tt(this,"_subs"),Tt(this,"_activePullRequest"),Tt(this,"_activeIssue"),Tt(this,"_githubRepositories"),Tt(this,"_allGitHubRemotes",[]),Tt(this,"_mentionableUsers"),Tt(this,"_fetchMentionableUsersPromise"),Tt(this,"_assignableUsers"),Tt(this,"_fetchAssignableUsersPromise"),Tt(this,"_gitBlameCache",{}),Tt(this,"_githubManager"),Tt(this,"_repositoryPageInformation",new Map),Tt(this,"_onDidMergePullRequest",new u.EventEmitter),Tt(this,"onDidMergePullRequest",this._onDidMergePullRequest.event),Tt(this,"_onDidChangeActivePullRequest",new u.EventEmitter),Tt(this,"onDidChangeActivePullRequest",this._onDidChangeActivePullRequest.event),Tt(this,"_onDidChangeActiveIssue",new u.EventEmitter),Tt(this,"onDidChangeActiveIssue",this._onDidChangeActiveIssue.event),Tt(this,"_onDidLoadRepositories",new u.EventEmitter),Tt(this,"onDidLoadRepositories",this._onDidLoadRepositories.event),Tt(this,"_onDidChangeRepositories",new u.EventEmitter),Tt(this,"onDidChangeRepositories",this._onDidChangeRepositories.event),Tt(this,"_onDidChangeAssignableUsers",new u.EventEmitter),Tt(this,"onDidChangeAssignableUsers",this._onDidChangeAssignableUsers.event),Tt(this,"_updatingRepositories"),Tt(this,"totalFetchedPages",new Map),this._subs=[],this._githubRepositories=[],this._githubManager=new Ec,this._subs.push(u.workspace.onDidChangeConfiguration(async o=>{o.affectsConfiguration(`${Or}.${Wa}`)&&await this.updateRepositories()})),this._subs.push(i.onDidInitialize(()=>this.updateRepositories())),this.setUpCompletionItemProvider(),this.cleanStoredRepoState()}cleanStoredRepoState(){const t=new Date().valueOf()-30*864e5,e=this.context.globalState.get(ja);if(e==null?void 0:e.repos){let r=!1;Object.keys(e.repos).forEach(n=>{var i;((i=e.repos[n].stateModifiedTime)!=null?i:0)<t&&(r=!0,delete e.repos[n])}),r&&this.context.globalState.update(ja,e)}}get gitHubRepositories(){return this._githubRepositories}computeAllGitHubRemotes(){const e=Us(this.repository).filter(r=>r.host);return Promise.all(e.map(r=>this._githubManager.isGitHub(r.gitProtocol.normalizeUri()))).then(r=>e.filter((n,i,a)=>r[i])).catch(r=>(C.appendLine(`Resolving GitHub remotes failed: ${r}`),u.window.showErrorMessage(`Resolving GitHub remotes failed: ${be(r)}`),[]))}async getActiveGitHubRemotes(t){const e=u.workspace.getConfiguration(Or).get(Wa);if(!e)return C.appendLine("Unable to read remotes setting"),Promise.resolve([]);const r=e.filter(n=>!t.some(i=>i.remoteName===n));return r.length===e.length?C.appendLine(`No remotes found. The following remotes are missing: ${r.join(", ")}`):C.debug(`Not all remotes found. The following remotes are missing: ${r.join(", ")}`,tn.ID),C.debug(`Displaying configured remotes: ${e.join(", ")}`,tn.ID),e.map(n=>t.find(i=>i.remoteName===n)).filter(n=>!!n)}setUpCompletionItemProvider(){let t,e=[],r=[];u.languages.registerCompletionItemProvider({scheme:"comment"},{provideCompletionItems:async(n,i,a)=>{try{const o=JSON.parse(n.uri.query);if(Ft(o.extensionId,wn)!==0)return;const m=n.getWordRangeAtPosition(i,/@([a-z\d](?:[a-z\d]|-(?=[a-z\d])){0,38})?/i);if(!m||m.isEmpty)return;let E=[];const k={};let P={},U,z;const le=u.window.visibleTextEditors;if(le.length){const Oe=le.find(Ae=>Ae.document.uri.scheme==="pr");if(Oe){const Ae=er(Oe.document.uri);U=Ae.prNumber,z=Ae.remoteName}else this._activePullRequest&&(U=this._activePullRequest.number,z=this._activePullRequest.remote.remoteName);if(t&&U&&U===t.number)return r}const ce=new Promise(async Oe=>{if(U&&z){if(C.debug("get Timeline Events and parse users",tn.ID),t&&t.number===U)return e;const Ae=this._githubRepositories.find(He=>He.remote.remoteName===z);Ae&&(t=await Ae.getPullRequest(U),e=await t.getTimelineEvents()),E=rg(e),Oe()}Oe()}),me=new Promise(async Oe=>{if(le.length)try{C.debug("git blame and parse users",tn.ID);const Ae=L.resolve(le[0].document.uri.fsPath);let He;this._gitBlameCache[Ae]?He=this._gitBlameCache[Ae]:(He=await this.repository.blame(Ae),this._gitBlameCache[Ae]=He);const ft=He.split(`
`);for(const gt of ft){const Mt=/^\w{11} \S*\s*\((.*)\s*\d{4}\-/.exec(gt);if(Mt&&Mt.length===2){const _t=Mt[1].trim();k[_t]=!0}}}catch(Ae){C.debug(Ae,tn.ID)}Oe()}),Te=new Promise(async Oe=>{C.debug("get mentionable users",tn.ID),P=await this.getMentionableUsers(),Oe()});await Promise.all([ce,me,Te]),r=[];const Re={};C.debug("prepare user suggestions",tn.ID),E.forEach(Oe=>{Re[Oe.login]||(Re[Oe.login]=Oe)});const xe={};for(const Oe in P)for(const Ae of P[Oe])if(!Re[Ae.login]&&!xe[Ae.login]){xe[Ae.login]=!0;let He=2;(k[Ae.login]||Ae.name&&k[Ae.name])&&(He=1),Re[Ae.login]&&(He=0),r.push({label:Ae.login,insertText:Ae.login,filterText:`${Ae.login}`+(Ae.name&&Ae.name!==Ae.login?`_${Ae.name.toLowerCase().replace(" ","_")}`:""),sortText:`${He}_${Ae.login}`,detail:Ae.name,kind:u.CompletionItemKind.User,login:Ae.login,uri:this.repository.rootUri})}for(const Oe in Re)xe[Oe]||r.push({label:Re[Oe].login,insertText:`${Re[Oe].login}`,filterText:`${Re[Oe].login}`+(Re[Oe].name&&Re[Oe].name!==Re[Oe].login?`_${Re[Oe].name.toLowerCase().replace(" ","_")}`:""),sortText:`0_${Re[Oe].login}`,detail:Re[Oe].name,kind:u.CompletionItemKind.User,login:Re[Oe].login,uri:this.repository.rootUri});return C.debug("done",tn.ID),r}catch(o){return[]}},resolveCompletionItem:async(n,i)=>{try{const a=await this.getPullRequestDefaults(),o=await this.resolveUser(a.owner,a.repo,typeof n.label=="string"?n.label:n.label.label);o&&(n.documentation=Cc(a,o))}catch(a){}return n}},"@")}get activeIssue(){return this._activeIssue}set activeIssue(t){this._activeIssue=t,this._onDidChangeActiveIssue.fire()}get activePullRequest(){return this._activePullRequest}set activePullRequest(t){this._activePullRequest&&(this._activePullRequest.isActive=!1),t&&(t.isActive=!0),this._activePullRequest=t,this._onDidChangeActivePullRequest.fire()}get repository(){return this._repository}set repository(t){this._repository=t}get credentialStore(){return this._credentialStore}async loginAndUpdate(){if(!this._credentialStore.isAnyAuthenticated()){const t=new Promise(e=>{const r=this.onDidChangeRepositories(()=>{r.dispose(),e()})});await this._credentialStore.login(bt.github),await t}}async getActiveRemotes(){this._allGitHubRemotes=await this.computeAllGitHubRemotes();const t=await this.getActiveGitHubRemotes(this._allGitHubRemotes);return t.length?(await u.commands.executeCommand("setContext","github:hasGitHubRemotes",!0),C.appendLine("Found GitHub remote")):(await u.commands.executeCommand("setContext","github:hasGitHubRemotes",!1),C.appendLine("No GitHub remotes found")),t}async updateRepositories(t=!1){return this._updatingRepositories&&await this._updatingRepositories,this._updatingRepositories=this.doUpdateRepositories(t),this._updatingRepositories}async doUpdateRepositories(t){if(this._git.state==="uninitialized"){C.appendLine("Cannot updates repositories as git is uninitialized");return}const e=await this.getActiveRemotes(),r=this._credentialStore.isAuthenticated(bt.github)||this._credentialStore.isAuthenticated(bt["github-enterprise"]);u.commands.executeCommand("setContext","github:authenticated",r);const n=[],i=[];return e.filter(o=>this._credentialStore.isAuthenticated(o.authProviderId)).forEach(o=>{const m=this.createGitHubRepository(o,this._credentialStore);i.push(m.resolveRemote()),n.push(m)}),Promise.all(i).then(async o=>{if(o.some(k=>!k))return this._credentialStore.showSamlMessageAndAuth();const m=this._githubRepositories;this._githubRepositories=n,m.filter(k=>this._githubRepositories.indexOf(k)<0).forEach(k=>k.dispose());const E=m.length!==this._githubRepositories.length||!m.every(k=>this._githubRepositories.some(P=>P.remote.equals(k.remote)));if(this._githubRepositories.length&&E&&await this.checkIfMissingUpstream()){this.updateRepositories(t);return}this.activePullRequest&&this.getMentionableUsers(E,!0),this.getAssignableUsers(E),this._onDidLoadRepositories.fire(r||!e.length?en.RepositoriesLoaded:en.NeedsAuthentication),t||this._onDidChangeRepositories.fire()})}async checkIfMissingUpstream(){var t;try{const r=await(await this.getOrigin()).getMetadata();if(r.fork&&r.parent){const n=new Bn(r.parent.git_url);if(!this._githubRepositories.some(a=>a.remote.owner===n.owner&&a.remote.repositoryName===n.repositoryName)){const o=!this.repository.state.remotes.some(m=>m.name==="upstream")?"upstream":(t=r.parent.owner)==null?void 0:t.login;if(o)return this.gitHubRepositories[0].remote.gitProtocol.type===ys.SSH?await this.repository.addRemote(o,r.parent.git_url):await this.repository.addRemote(o,r.parent.clone_url),!0}}}catch(e){C.appendLine(`Missing upstream check failed: ${e}`)}return!1}getAllAssignableUsers(){if(this._assignableUsers){const t=[];return Object.keys(this._assignableUsers).forEach(e=>{t.push(...this._assignableUsers[e])}),t}}getMentionableUsersFromGlobalState(){C.appendLine("Trying to use globalState for mentionable users.");const t=this.context.globalState.get(ja);if(t){const e={};if(this._githubRepositories.every(n=>{var i;const a=`${n.remote.owner}/${n.remote.repositoryName}`;return t.repos[a]?(e[n.remote.repositoryName]=(i=t.repos[a].mentionableUsers)!=null?i:[],!0):!1}))return C.appendLine(`Using globalState mentionable users for ${Object.keys(e).length}.`),e}C.appendLine("No globalState for mentionable users.")}createFetchMentionableUsersPromise(){const t={};return new Promise(e=>{const r=this._githubRepositories.map(async n=>{const i=await n.getMentionableUsers();t[n.remote.remoteName]=i});Promise.all(r).then(()=>{this._mentionableUsers=t,this._fetchMentionableUsersPromise=void 0;const n=this.context.globalState.get(ja,{repos:{}});this._githubRepositories.forEach(i=>{const a=`${i.remote.owner}/${i.remote.repositoryName}`;n.repos[a]||(n.repos[a]={}),n.repos[a].mentionableUsers=t[i.remote.remoteName],n.repos[a].stateModifiedTime=new Date().valueOf()}),this.context.globalState.update(ja,n),e(t)})})}async getMentionableUsers(t,e){if(t&&delete this._mentionableUsers,this._mentionableUsers)return this._mentionableUsers;let r=this.getMentionableUsersFromGlobalState();return e&&!this._fetchMentionableUsersPromise&&r?r:this._fetchMentionableUsersPromise?this._fetchMentionableUsersPromise:(this._fetchMentionableUsersPromise=this.createFetchMentionableUsersPromise(),r!=null?r:this._fetchMentionableUsersPromise)}async getAssignableUsers(t){if(t&&delete this._assignableUsers,this._assignableUsers)return this._assignableUsers;if(!this._fetchAssignableUsersPromise){const e={},r=[];return this._fetchAssignableUsersPromise=new Promise(n=>{const i=this._githubRepositories.map(async a=>{const o=await a.getAssignableUsers();e[a.remote.remoteName]=o.sort(Qh),r.push(...o)});Promise.all(i).then(()=>{this._assignableUsers=e,this._fetchAssignableUsersPromise=void 0,n(e),this._onDidChangeAssignableUsers.fire(r)})})}return this._fetchAssignableUsersPromise}getGitHubRemotes(){const t=this._githubRepositories;return!t||!t.length?[]:t.map(e=>e.remote)}async getAllGitHubRemotes(){return await this.computeAllGitHubRemotes()}async getLocalPullRequests(){const t=this._githubRepositories;if(!t||!t.length)return[];const r=this.repository.state.refs.filter(n=>n.type===ht.Head&&n.name!==void 0).map(n=>n.name).map(async n=>{const i=await vn.getMatchingPullRequestMetadataForBranch(this.repository,n);if(i){const{owner:a,prNumber:o}=i,m=t.find(E=>E.remote.owner.toLocaleLowerCase()===a.toLocaleLowerCase());if(m){const E=await m.getPullRequest(o);if(E)return E.localBranchName=n,E}}return Promise.resolve(null)});return Promise.all(r).then(n=>n.filter(i=>i!==null))}async getLabels(t,e){const r=t?t.githubRepository:this._githubRepositories.find(E=>E.remote.owner===(e==null?void 0:e.owner)&&E.remote.repositoryName===(e==null?void 0:e.repo));if(!r)throw new Error("No matching repository found for getting labels.");const{remote:n,octokit:i}=await r.ensure();let a=!1,o=1,m=[];do{const E=await i.issues.listLabelsForRepo({owner:n.owner,repo:n.repositoryName,per_page:100,page:o});m=m.concat(E.data.map(k=>({name:k.name,color:k.color}))),m=m.sort((k,P)=>k.name.localeCompare(P.name)),a=!!E.headers.link&&E.headers.link.indexOf('rel="next"')>-1,o+=1}while(a);return m}async listBranches(t,e){if(this._githubRepositories.length)return this._githubRepositories[0].listBranches(t,e);throw new Error("No GitHub repositories found")}async deleteLocalPullRequest(t,e){if(!t.localBranchName)return;await this.repository.deleteBranch(t.localBranchName,e);let r;try{r=await this.repository.getConfig(`branch.${t.localBranchName}.remote`)}catch(i){}if(!r)return;await vn.isRemoteCreatedForPullRequest(this.repository,r)&&((await this.repository.getConfigs()).some(({key:o,value:m})=>/^branch.*\.remote$/.test(o)&&m===r)||await this.repository.removeRemote(r)),this.telemetry.sendTelemetryEvent("branch.delete")}async fetchPagedData(t={fetchNextPage:!1},e,r=0,n=Yt.All,i){if(!this._githubRepositories||!this._githubRepositories.length)return{items:[],hasMorePages:!1,hasUnsearchedRepositories:!1};const a=()=>this.totalFetchedPages.get(e)||0,o=U=>this.totalFetchedPages.set(e,U);for(const U of this._githubRepositories){const z=U.remote.url.toString()+e;this._repositoryPageInformation.get(z)||this._repositoryPageInformation.set(z,{pullRequestPage:0,hasMorePages:null})}let m=0;const E={hasMorePages:!1,items:[]},k=U=>{m++,U&&(E.items=E.items.concat(U.items),E.hasMorePages=U.hasMorePages)},P=this._githubRepositories.filter(U=>{const z=this._repositoryPageInformation.get(U.remote.url.toString()+e);return z&&(t.fetchNextPage===!1||z.hasMorePages!==!1)});for(let U=0;U<P.length;U++){const z=P[U],le=z.remote.url.toString()+e,ce=this._repositoryPageInformation.get(le),me=async Te=>{switch(r){case 0:return n===Yt.All?z.getAllPullRequests(Te):z.getPullRequestsForCategory(i||"",Te);case 1:return z.getIssuesForUserByMilestone(ce.pullRequestPage);case 2:return z.getIssuesWithoutMilestone(ce.pullRequestPage);case 3:return z.getIssues(ce.pullRequestPage,i)}};if(t.fetchNextPage?(ce.pullRequestPage++,k(await me(ce.pullRequestPage)),o(a()+1)):(ce.pullRequestPage===0&&(ce.pullRequestPage=1),(await Promise.all(Array.from({length:ce.pullRequestPage}).map((Re,xe)=>me(xe+1)))).forEach(Re=>k(Re))),ce.hasMorePages=E.hasMorePages,E.items.length&&(t.fetchNextPage===!0||t.fetchNextPage===!1&&m>=a()))return a()===0&&o(m),{items:E.items,hasMorePages:ce.hasMorePages,hasUnsearchedRepositories:U<P.length-1}}return{items:[],hasMorePages:!1,hasUnsearchedRepositories:!1}}async getPullRequests(t,e={fetchNextPage:!1},r){const n=t.toString()+(r||"");return this.fetchPagedData(e,n,0,t,r)}async getMilestones(t={fetchNextPage:!1},e=!1,r){const n=await this.fetchPagedData(t,"issuesKey",1,Yt.All,r);if(e){const i=await this.fetchPagedData(t,"issuesKey",2,Yt.All,r);n.items.push({milestone:{createdAt:new Date(0).toDateString(),id:"",title:Fh},issues:i.items})}return n}async getIssues(t={fetchNextPage:!1},e){return this.fetchPagedData(t,"issuesKey",3,Yt.All,e)}async getMaxIssue(){const t=await Promise.all(this._githubRepositories.map(r=>r.getMaxIssue()));let e=0;for(const r of t)r!==void 0&&(e=Math.max(e,r));return e}async getPullRequestTemplates(){const t=await u.workspace.findFiles(new u.RelativePattern(this._repository.rootUri,"{pull_request_template,PULL_REQUEST_TEMPLATE}.md")),e=await u.workspace.findFiles(new u.RelativePattern(this._repository.rootUri,"{docs,.github}/{pull_request_template,PULL_REQUEST_TEMPLATE}.md")),r=await u.workspace.findFiles(new u.RelativePattern(this._repository.rootUri,"PULL_REQUEST_TEMPLATE/*.md")),n=await u.workspace.findFiles(new u.RelativePattern(this._repository.rootUri,"{docs,.github}/PULL_REQUEST_TEMPLATE/*.md"));return[...t,...e,...r,...n]}async getPullRequestDefaults(t){var e;if(!t&&!this.repository.state.HEAD)throw new xh(this.repository);const r=await this.getOrigin(t),n=await r.getMetadata(),i=(e=u.workspace.getConfiguration(Or).inspect(Wa))==null?void 0:e.defaultValue,a=u.workspace.getConfiguration(Or).get(Wa),o=!a||(i==null?void 0:i.every((E,k)=>a[k]===E)),m=n.fork&&n.parent&&o?n.parent:await(this.findRepo(js("upstream"))||r).getMetadata();return{owner:m.owner.login,repo:m.name,base:m.default_branch}}async getMetadata(t){const e=this.findRepo(js(t));return e&&e.getMetadata()}async getHeadCommitMessage(){const{repository:t}=this;if(t.state.HEAD&&t.state.HEAD.commit){const{message:e}=await t.getCommit(t.state.HEAD.commit);return e}return""}async getTipCommitMessage(t){const{repository:e}=this,{commit:r}=await e.getBranch(t);if(r){const{message:n}=await e.getCommit(r);return n}return""}async getOrigin(t){if(!this._githubRepositories.length)throw new Vf(this.repository);const e=t?t.upstream:this.upstreamRef;if(e){const i=this.findRepo(js(e.remote));if(!i){const a=(await this.getAllGitHubRemotes()).find(o=>o.remoteName===e.remote);if(a)return new xc(a,this._credentialStore,this.telemetry,this._sessionState);throw C.appendLine(`The remote '${e.remote}' is not a GitHub repository.`),new jf(this.repository.state.HEAD.name,e,"is not a GitHub repo")}return i}const[r,...n]=this._githubRepositories;return n.length&&(this.findRepo(js("origin"))||this.findRepo(zf))||r}findRepo(t){return this._githubRepositories.filter(t)[0]}get upstreamRef(){const{HEAD:t}=this.repository.state;return t&&t.upstream}async createPullRequest(t){var e,r;const n=this._githubRepositories.find(i=>i.remote.owner===t.owner&&i.remote.repositoryName===t.repo);if(!n)throw new Error(`No matching repository ${t.repo} found for ${t.owner}`);try{const i=await n.createPullRequest(t),a=t.head.indexOf(":"),o=t.head.slice(a+1);return await vn.associateBranchWithPullRequest(this._repository,i,o),this.telemetry.sendTelemetryEvent("pr.create.success",{isDraft:(t.draft||"").toString()}),i}catch(i){if(i.message.indexOf("No commits between ")>-1){if((e=this._repository.state.HEAD)==null?void 0:e.ahead)return await u.window.showInformationMessage(`There are no commits between '${t.base}' and '${t.head}'.

Do you want to push your local commits and create the pull request?`,{modal:!0},"Push commits")==="Push commits"?(await this._repository.push(),this.createPullRequest(t)):void 0;if(this._repository.state.workingTreeChanges.length||this._repository.state.indexChanges.length)return await u.window.showInformationMessage(`There are no commits between '${t.base}' and '${t.head}'.

Do you want to commit your changes and create the pull request?`,{modal:!0},"Commit changes")==="Commit changes"?(await u.commands.executeCommand("git.commit"),await this._repository.push(),this.createPullRequest(t)):void 0}if(!((r=this._repository.state.HEAD)==null?void 0:r.upstream))return await u.window.showInformationMessage(`There is no upstream branch for '${t.base}'.

Do you want to publish it and create the pull request?`,{modal:!0},"Publish branch")==="Publish branch"?(await this._repository.push(n.remote.remoteName,t.base,!0),this.createPullRequest(t)):void 0;throw C.appendLine(`GitHubRepository> Creating pull requests failed: ${i}`),this.telemetry.sendTelemetryErrorEvent("pr.create.failure",{isDraft:(t.draft||"").toString()}),new Error(be(i))}}async createIssue(t){try{const e=this._githubRepositories.find(a=>a.remote.owner===t.owner&&a.remote.repositoryName===t.repo);if(!e)throw new Error(`No matching repository ${t.repo} found for ${t.owner}`);await e.ensure();const{data:r}=await e.octokit.issues.create(t),n=Kf(r,e),i=new gr(e,e.remote,n);return this.telemetry.sendTelemetryEvent("issue.create.success"),i}catch(e){C.appendLine(`GitHubRepository> Creating issue failed: ${e}`),this.telemetry.sendTelemetryErrorEvent("issue.create.failure"),u.window.showWarningMessage(`Creating issue failed: ${be(e)}`)}}async assignIssue(t,e){try{const r=this._githubRepositories.find(i=>i.remote.owner===t.remote.owner&&i.remote.repositoryName===t.remote.repositoryName);if(!r)throw new Error(`No matching repository ${t.remote.repositoryName} found for ${t.remote.owner}`);await r.ensure();const n={assignees:[e],owner:t.remote.owner,repo:t.remote.repositoryName,issue_number:t.number};await r.octokit.issues.addAssignees(n),this.telemetry.sendTelemetryEvent("issue.assign.success")}catch(r){C.appendLine(`GitHubRepository> Assigning issue failed: ${r}`),this.telemetry.sendTelemetryErrorEvent("issue.assign.failure"),u.window.showWarningMessage(`Assigning issue failed: ${be(r)}`)}}getCurrentUser(t){return Ci(this._credentialStore.getCurrentUser(t.githubRepository.remote.authProviderId),t.githubRepository)}async mergePullRequest(t,e,r,n){const{octokit:i,remote:a}=await t.githubRepository.ensure(),o=this.activePullRequest&&this.activePullRequest.head&&this.activePullRequest.head.sha,m=this.repository.state.HEAD&&this.repository.state.HEAD.commit,E=t.head&&t.head.sha,k=this.repository.state.workingTreeChanges.length>0;if(o===E){if(m!==E){const{ahead:P}=this.repository.state.HEAD;if(P&&await u.window.showWarningMessage(`You have ${P} unpushed ${P>1?"commits":"commit"} on this PR branch.

Would you like to proceed anyway?`,{modal:!0},"Yes")===void 0)return{merged:!1,message:"unpushed changes"}}if(k&&await u.window.showWarningMessage(`You have uncommitted changes on this PR branch.

 Would you like to proceed anyway?`,{modal:!0},"Yes")===void 0)return{merged:!1,message:"uncommitted changes"}}return await i.pulls.merge({commit_message:r,commit_title:e,merge_method:n||u.workspace.getConfiguration("githubPullRequests").get("defaultMergeMethod"),owner:a.owner,repo:a.repositoryName,pull_number:t.number}).then(P=>(this.telemetry.sendTelemetryEvent("pr.merge.success"),this._onDidMergePullRequest.fire(),P.data)).catch(P=>{throw this.telemetry.sendTelemetryErrorEvent("pr.merge.failure"),P})}async deleteBranch(t){await t.githubRepository.deleteBranch(t)}async getBranchDeletionItems(){const t=await this.repository.getConfigs(),e=new Map;t.forEach(i=>{const a=i.key,o=/^branch\.(.*)\.(.*)$/.exec(a);if(o&&o.length===3){const m=o[1];e.has(m)||e.set(m,{});const E=e.get(m);if(o[2]==="remote"&&(E.remote=i.value),o[2]==="github-pr-owner-number"){const k=vn.parsePullRequestMetadata(i.value);E.metadata=k}e.set(m,E)}});const r=[];e.forEach((i,a)=>{if(i.metadata){const o=this.activePullRequest&&this.activePullRequest.base.repositoryCloneUrl;(o?o.owner===i.metadata.owner&&o.repositoryName===i.metadata.repositoryName&&this.activePullRequest&&this.activePullRequest.number===i.metadata.prNumber:!1)||r.push({label:`${a}`,description:`${i.metadata.repositoryName}/${i.metadata.owner} #${i.metadata.prNumber}`,picked:!1,metadata:i.metadata})}});const n=await Promise.all(r.map(async i=>{const a=i.metadata,o=this._githubRepositories.find(P=>P.remote.owner.toLowerCase()===a.owner.toLowerCase()&&P.remote.repositoryName.toLowerCase()===a.repositoryName.toLowerCase());if(!o)return i;const{remote:m,query:E,schema:k}=await o.ensure();try{const{data:P}=await E({query:k.PullRequestState,variables:{owner:m.owner,name:m.repositoryName,number:a.prNumber}});i.legacy=P.repository.pullRequest.state!=="OPEN"}catch{}return i}));return n.forEach(i=>{i.legacy?i.picked=!0:i.description=`${i.description} is still Open`}),n}async getRemoteDeletionItems(){const t=await this.repository.getConfigs(),e=new Map;t.forEach(n=>{const i=n.key;let a=/^branch\.(.*)\.(.*)$/.exec(i);if(a&&a.length===3){const o=a[1];if(a[2]==="remote"){const m=n.value;e.has(m)||e.set(m,{branches:new Set}),e.get(m).branches.add(o)}}if(a=/^remote\.(.*)\.(.*)$/.exec(i),a&&a.length===3){const o=a[1];e.has(o)||e.set(o,{branches:new Set});const m=e.get(o);a[2]==="github-pr-remote"&&(m.createdForPullRequest=n.value==="true"),a[2]==="url"&&(m.url=n.value)}});const r=[];return e.forEach((n,i)=>{if(n.branches.size===0){let a=n.createdForPullRequest?"":"Not created by GitHub Pull Request extension";n.url&&(a=a?a+" "+n.url:n.url),r.push({label:i,description:a,picked:n.createdForPullRequest,remote:i})}}),r}async deleteLocalBranchesNRemotes(){return new Promise(async t=>{const e=u.window.createQuickPick();e.canSelectMany=!0,e.ignoreFocusOut=!0,e.placeholder="Choose local branches you want to delete permanently",e.show(),e.busy=!0;const r=await this.getBranchDeletionItems();e.items=r,e.selectedItems=r.filter(i=>i.picked),e.busy=!1;let n=!0;e.onDidAccept(async()=>{if(n){const i=e.selectedItems;if(i.length){e.busy=!0;try{await Promise.all(i.map(async o=>{await this.repository.deleteBranch(o.label,!0)})),e.busy=!1}catch(o){e.hide(),u.window.showErrorMessage(`Deleting branches failed: ${o}`)}}n=!1,e.busy=!0;const a=await this.getRemoteDeletionItems();a?(e.placeholder="Choose remotes you want to delete permanently",e.busy=!1,e.items=a,e.selectedItems=a.filter(o=>o.picked)):e.hide()}else{const i=e.selectedItems;i.length&&(e.busy=!0,await Promise.all(i.map(async a=>{await this.repository.removeRemote(a.label)})),e.busy=!1),e.hide()}}),e.onDidHide(()=>{t()})})}async getPullRequestRepositoryDefaultBranch(t){return await t.githubRepository.getDefaultBranch()}async getPullRequestRepositoryAccessAndMergeMethods(t){return await t.githubRepository.getRepoAccessAndMergeMethods()}async fulfillPullRequestMissingInfo(t){try{if(!t.isResolved())return;C.debug("Fulfill pull request missing info - start",tn.ID);const e=t.githubRepository,{octokit:r,remote:n}=await e.ensure();if(!t.base){const{data:i}=await r.pulls.get({owner:n.owner,repo:n.repositoryName,pull_number:t.number});t.update(ss(i,e))}if(!t.mergeBase){const{data:i}=await r.repos.compareCommits({repo:n.repositoryName,owner:n.owner,base:`${t.base.repositoryCloneUrl.owner}:${t.base.ref}`,head:`${t.head.repositoryCloneUrl.owner}:${t.head.ref}`});t.mergeBase=i.merge_base_commit.sha}}catch(e){u.window.showErrorMessage(`Fetching Pull Request merge base failed: ${be(e)}`)}C.debug("Fulfill pull request missing info - done",tn.ID)}async resolveItem(t,e){let r=this._githubRepositories.find(n=>n.remote.owner.toLowerCase()===t.toLowerCase()&&n.remote.repositoryName.toLowerCase()===e.toLowerCase());return r||(r=this.createGitHubRepositoryFromOwnerName(t,e)),r}async resolvePullRequest(t,e,r){const n=await this.resolveItem(t,e);if(n)return n.getPullRequest(r)}async resolveIssue(t,e,r,n=!1){const i=await this.resolveItem(t,e);if(i)return i.getIssue(r,n)}async resolveUser(t,e,r){C.debug(`Fetch user ${r}`,tn.ID);const n=this.createGitHubRepositoryFromOwnerName(t,e),{query:i,schema:a}=await n.ensure();try{const{data:o}=await i({query:a.GetUser,variables:{login:r}});return eg(o,n)}catch(o){o.message.startsWith("GraphQL error: Could not resolve to a User with the login of")||C.appendLine(o.message)}}async getMatchingPullRequestMetadataForBranch(){return!this.repository||!this.repository.state.HEAD||!this.repository.state.HEAD.name?null:await vn.getMatchingPullRequestMetadataForBranch(this.repository,this.repository.state.HEAD.name)}async getMatchingPullRequestMetadataFromGitHub(){if(!this.repository||!this.repository.state.HEAD||!this.repository.state.HEAD.name||!this.repository.state.HEAD.upstream)return null;for(const t of this.gitHubRepositories)if(t.remote.remoteName===this.repository.state.HEAD.upstream.remote){const e=await t.getPullRequestForBranch(this.repository.state.HEAD.upstream.name);if(e&&e.length>0)return{owner:t.remote.owner,repositoryName:t.remote.repositoryName,prNumber:e[0].number,model:e[0]};break}return null}async checkoutExistingPullRequestBranch(t){return await vn.checkoutExistingPullRequestBranch(this.repository,t)}async getBranchNameForPullRequest(t){return await vn.getBranchNRemoteForPullRequest(this.repository,t)}async fetchAndCheckout(t){await vn.fetchAndCheckout(this.repository,this._allGitHubRemotes,t)}async checkout(t){return this.repository.checkout(t)}async fetchById(t,e){const r=await t.getPullRequest(e);if(r)return r;u.window.showErrorMessage(`Pull request number ${e} does not exist in ${t.remote.owner}/${t.remote.repositoryName}`,{modal:!0})}async checkoutDefaultBranch(t){var e;try{const r=await this.repository.getBranch(t);if(((e=this.repository.state.HEAD)==null?void 0:e.name)===r.name){u.window.showInformationMessage("The default branch is already checked out.");return}r.upstream&&t===r.upstream.name?await this.repository.checkout(t):await u.commands.executeCommand("git.checkout")}catch(r){if(r.gitErrorCode&&r.gitErrorCode===or.DirtyWorkTree){u.window.showErrorMessage("Your local changes would be overwritten by checkout, please commit your changes or stash them before you switch branches");return}u.window.showErrorMessage(`Exiting failed: ${r}`)}}findExistingGitHubRepository(t){return this._githubRepositories.find(e=>e.remote.owner===t.owner&&e.remote.repositoryName===t.repositoryName&&(!t.remoteName||e.remote.remoteName===t.remoteName))}createAndAddGitHubRepository(t,e){const r=new xc(t,e,this.telemetry,this._sessionState);return this._githubRepositories.push(r),r}createGitHubRepository(t,e){var r;return(r=this.findExistingGitHubRepository(t))!=null?r:this.createAndAddGitHubRepository(t,e)}createGitHubRepositoryFromOwnerName(t,e){const r=this.findExistingGitHubRepository({owner:t,repositoryName:e});if(r)return r;const n=`https://github.com/${t}/${e}`;return this.createAndAddGitHubRepository(new kc(e,n,new Bn(n)),this._credentialStore)}async findUpstreamForItem(t){let e,r;for(const i of this.gitHubRepositories){if(!e&&i.remote.owner===t.remote.owner&&i.remote.repositoryName===t.remote.repositoryName){e=i;continue}const a=await i.getRepositoryForkDetails();if(a&&a.isFork&&a.parent.owner.login===t.remote.owner&&a.parent.name===t.remote.repositoryName){const o=await i.getViewerPermission();if(o===Gr.Admin||o===Gr.Maintain||o===Gr.Write){r=i.remote;break}}}let n=!1;if(e&&!r){const i=await t.githubRepository.getViewerPermission();(i===Gr.Read||i===Gr.Triage||i===Gr.Unknown)&&(n=!0)}return{needsFork:n,upstream:e,remote:r}}async forkWithProgress(t,e,r,n){t.report({message:`Forking ${r}...`});const i=await e.fork();if(t.report({increment:50}),!i){u.window.showErrorMessage(`Unable to create a fork of ${r}. Check that your GitHub credentials are correct.`);return}const a=n.state.remotes.length>1?"origin":n.state.remotes[0].name;return t.report({message:"Adding remotes. This may take a few moments."}),await n.renameRemote(a,"upstream"),await n.addRemote(a,i),await new Promise(o=>{if(this.gitHubRepositories.length===0){const m=this.onDidChangeRepositories(()=>{this.gitHubRepositories.length>0&&(m.dispose(),o())})}else o()}),t.report({increment:50}),a}async doFork(t,e,r){return u.window.withProgress({location:u.ProgressLocation.Notification,title:"Creating Fork"},async n=>{try{return this.forkWithProgress(n,t,e,r)}catch(i){u.window.showErrorMessage(`Creating fork failed: ${i}`)}})}async tryOfferToFork(t){const e=`${t.remote.owner}/${t.remote.repositoryName}`,r="Fork",n="Don't Fork";switch(await u.window.showInformationMessage(`You don't have permission to push to ${e}. Do you want to fork ${e}? This will modify your git remotes to set \`origin\` to the fork, and \`upstream\` to ${e}.`,{modal:!0},r,n)){case r:return this.doFork(t,e,this.repository);case n:return!1;default:return}}dispose(){this._subs.forEach(t=>t.dispose())}};let Vs=tn;Tt(Vs,"ID","FolderRepositoryManager");function uy(t){switch(t){case"committed":return EventType.Committed;case"mentioned":return EventType.Mentioned;case"subscribed":return EventType.Subscribed;case"commented":return EventType.Commented;case"reviewed":return EventType.Reviewed;default:return EventType.Other}}const zf=t=>{const{currentUser:e=null}=t.octokit;return e&&t.remote.owner===e.login},js=t=>({remote:{remoteName:e}})=>e===t,qh=t=>{const e=t.indexOf(`
`);return{title:e===-1?t:t.substr(0,e),body:e===-1?"":t.slice(e+1).trim()}};function Ka(t,e,r,n){const i=n.createCommentThread(t,e,[]);return i.gitHubThreadId=r.id,i.comments=r.comments.map(a=>new sr(a,i)),i.isResolved=r.isResolved,r.viewerCanResolve&&!r.isResolved?i.contextValue="canResolve":r.viewerCanUnresolve&&r.isResolved&&(i.contextValue="canUnresolve"),zs(i),i.collapsibleState=Uh(r.isResolved),i}const Cu="commentExpandState",ly="collapseAll",Mc="expandUnresolved";function Uh(t,e){var r;return t?u.CommentThreadCollapsibleState.Collapsed:(e===void 0&&(e=((r=u.workspace.getConfiguration(Or))==null?void 0:r.get(Cu))===Mc),e?u.CommentThreadCollapsibleState.Expanded:u.CommentThreadCollapsibleState.Collapsed)}function Pu(t,e,r){e.viewerCanResolve&&!e.isResolved?t.contextValue="canResolve":e.viewerCanUnresolve&&e.isResolved&&(t.contextValue="canUnresolve"),t.isResolved!==e.isResolved&&(t.isResolved=e.isResolved),t.collapsibleState=Uh(e.isResolved,r),t.comments=e.comments.map(n=>new sr(n,t)),zs(t)}function zs(t){if(t.isResolved){t.label="This thread has been marked as resolved";return}if(t.comments.length){const e=ve(t.comments,r=>r.author.name).map(r=>`@${r.author.name}`).join(", ");t.label=`Participants: ${e}`}else t.label="Start discussion"}function Qf(t){return Iu().map(e=>{if(!t)return{label:e.label,authorHasReacted:!1,count:0,iconPath:e.icon||""};const r=t.find(n=>n.label===e.label);return r?{label:r.label,authorHasReacted:r.viewerHasReacted,count:r.count,iconPath:e.icon||""}:{label:e.label,authorHasReacted:!1,count:0,iconPath:e.icon||""}})}function Wf(t,e){t.reactions=Qf(e)}function $h(t,e){e||(t.comments=t.comments.map(r=>(r instanceof sr&&(r._rawComment.isDraft=!1),r.label=void 0,r)))}function Ci(t,e){var r;return{login:t.login,url:t.html_url,avatarUrl:Hc(t.avatar_url,(r=t.gravatar_id)!=null?r:void 0,e.remote.authProviderId)}}function Gh(t){return{label:t.label,ref:t.ref,sha:t.sha,repo:{cloneUrl:t.repo.clone_url}}}function ss(t,e){const{number:r,body:n,title:i,html_url:a,user:o,state:m,assignees:E,created_at:k,updated_at:P,head:U,base:z,labels:le,node_id:ce,id:me,draft:Te}=t;return{id:me,graphNodeId:ce,number:r,body:n!=null?n:"",title:i,url:a,user:Ci(o,e),state:m,merged:t.merged||!1,assignees:E?E.map(xe=>Ci(xe,e)):void 0,createdAt:k,updatedAt:P,head:Gh(U),base:Gh(z),mergeable:t.mergeable?En.Mergeable:En.NotMergeable,labels:le.map(xe=>({name:"",color:"",...xe})),isDraft:Te,suggestedReviewers:[]}}function Kf(t,e){const{number:r,body:n,title:i,html_url:a,user:o,state:m,assignees:E,created_at:k,updated_at:P,labels:U,node_id:z,id:le}=t;return{id:le,graphNodeId:z,number:r,body:n!=null?n:"",title:i,url:a,user:Ci(o,e),state:m,assignees:E?E.map(me=>Ci(me,e)):void 0,createdAt:k,updatedAt:P,labels:U.map(me=>{var Te,Re;return typeof me=="string"?{name:me,color:""}:{name:(Te=me.name)!=null?Te:"",color:(Re=me.color)!=null?Re:""}}),suggestedReviewers:[]}}function Yf(t,e){return{event:Ht.Reviewed,comments:[],submittedAt:t.submitted_at,body:t.body,bodyHTML:t.body,htmlUrl:t.html_url,user:Ci(t.user,e),authorAssociation:t.user.type,state:t.state,id:t.id}}function Hh(t){const e=[],r=qi(t.diffHunk);let n=r.next();for(;!n.done;){const i=n.value;e.push(i),n=r.next()}return e}function cy(t,e){var r;const n={url:t.url,id:t.id,pullRequestReviewId:(r=t.pull_request_review_id)!=null?r:void 0,diffHunk:t.diff_hunk,path:t.path,position:t.position,commitId:t.commit_id,originalPosition:t.original_position,originalCommitId:t.original_commit_id,user:Ci(t.user,e),body:t.body,createdAt:t.created_at,htmlUrl:t.html_url,inReplyToId:t.in_reply_to_id,graphNodeId:t.node_id},i=Hh(n);return n.diffHunks=i,n}function Xf(t){switch(t){case"PullRequestCommit":return Ht.Committed;case"LabeledEvent":return Ht.Labeled;case"MilestonedEvent":return Ht.Milestoned;case"AssignedEvent":return Ht.Assigned;case"HeadRefDeletedEvent":return Ht.HeadRefDeleted;case"IssueComment":return Ht.Commented;case"PullRequestReview":return Ht.Reviewed;case"MergedEvent":return Ht.Merged;default:return Ht.Other}}function Nu(t){return{id:t.id,isResolved:t.isResolved,viewerCanResolve:t.viewerCanResolve,viewerCanUnresolve:t.viewerCanUnresolve,path:t.path,line:t.line,originalLine:t.originalLine,diffSide:t.diffSide,isOutdated:t.isOutdated,comments:t.comments.nodes.map(e=>Qs(e,t.isResolved))}}function Qs(t,e){const r={id:t.databaseId,url:t.url,body:t.body,bodyHTML:t.bodyHTML,path:t.path,canEdit:t.viewerCanDelete,canDelete:t.viewerCanDelete,pullRequestReviewId:t.pullRequestReview&&t.pullRequestReview.databaseId,diffHunk:t.diffHunk,position:t.position,commitId:t.commit.oid,originalPosition:t.originalPosition,originalCommitId:t.originalCommit&&t.originalCommit.oid,user:t.author,createdAt:t.createdAt,htmlUrl:t.url,graphNodeId:t.id,isDraft:t.state==="PENDING",inReplyToId:t.replyTo&&t.replyTo.databaseId,reactions:Vh(t.reactionGroups),isResolved:e},n=Hh(r);return r.diffHunks=n,r}function Bh(t){return{id:t.databaseId,url:t.url,body:t.body,bodyHTML:t.bodyHTML,canEdit:t.viewerCanDelete,canDelete:t.viewerCanDelete,user:t.author,createdAt:t.createdAt,htmlUrl:t.url,graphNodeId:t.id,diffHunk:""}}function Vh(t){const e=Iu().reduce((n,i)=>(n[i.title]=i,n),{});return t.filter(n=>n.users.totalCount>0).map(n=>({label:e[n.content].label,count:n.users.totalCount,icon:e[n.content].icon,viewerHasReacted:n.viewerHasReacted}))}function Au(t,e,r){if(!!r)return{label:`${r.owner.login}:${t}`,ref:t,sha:e,repo:{cloneUrl:r.url}}}function yn(t,e){return t?{login:t.login,url:t.url,avatarUrl:Hc(t.avatarUrl,void 0,e.remote.authProviderId),email:t.email}:{login:"",url:""}}function Fc(t){if(!!t)return{title:t.title,dueOn:t.dueOn,createdAt:t.createdAt,id:t.id}}function Lc(t){switch(t){case"UNKNOWN":return En.Unknown;case"MERGEABLE":return En.Mergeable;case"CONFLICTING":return En.NotMergeable}}function jh(t,e){var r,n,i,a,o,m;const E=t.repository.pullRequest;return{id:E.databaseId,graphNodeId:E.id,url:E.url,number:E.number,state:E.state,body:E.body,bodyHTML:E.bodyHTML,title:E.title,createdAt:E.createdAt,updatedAt:E.updatedAt,isRemoteHeadDeleted:!E.headRef,head:Au((n=(r=E.headRef)==null?void 0:r.name)!=null?n:E.headRefName,E.headRefOid,E.headRepository),isRemoteBaseDeleted:!E.baseRef,base:Au((a=(i=E.baseRef)==null?void 0:i.name)!=null?a:E.baseRefName,E.baseRefOid,E.baseRepository),user:yn(E.author,e),merged:E.merged,mergeable:Lc(E.mergeable),labels:E.labels.nodes,isDraft:E.isDraft,suggestedReviewers:zh(E.suggestedReviewers),comments:Jf((o=E.comments)==null?void 0:o.nodes,e),milestone:Fc(E.milestone),assignees:(m=E.assignees)==null?void 0:m.nodes.map(k=>yn(k,e))}}function Jf(t,e){if(!t)return;const r=[];for(const n of t)r.push({author:yn(n.author,e),body:n.body,databaseId:n.databaseId});return r}function qc(t,e){var r,n,i,a;return{id:t.databaseId,graphNodeId:t.id,url:t.url,number:t.number,state:t.state,body:t.body,bodyHTML:t.bodyHTML,title:t.title,createdAt:t.createdAt,updatedAt:t.updatedAt,assignees:(r=t.assignees)==null?void 0:r.nodes.map(o=>yn(o,e)),user:yn(t.author,e),labels:t.labels.nodes,repositoryName:(n=t.repository)==null?void 0:n.name,repositoryOwner:(i=t.repository)==null?void 0:i.owner.login,repositoryUrl:(a=t.repository)==null?void 0:a.url}}function dy(t,e){var r,n,i,a;const o=t;return{id:o.databaseId,graphNodeId:o.id,url:o.url,number:o.number,state:o.state,body:o.body,bodyHTML:o.bodyHTML,title:o.title,createdAt:o.createdAt,updatedAt:o.updatedAt,isRemoteHeadDeleted:!o.headRef,head:Au((n=(r=o.headRef)==null?void 0:r.name)!=null?n:o.headRefName,o.headRefOid,o.headRepository),isRemoteBaseDeleted:!o.baseRef,base:Au((a=(i=o.baseRef)==null?void 0:i.name)!=null?a:o.baseRefName,o.baseRefOid,o.baseRepository),user:yn(o.author,e),merged:o.merged,mergeable:Lc(o.mergeable),labels:o.labels.nodes,isDraft:o.isDraft,suggestedReviewers:zh(o.suggestedReviewers),milestone:Fc(o.milestone)}}function zh(t){return t?t.map(r=>({login:r.reviewer.login,avatarUrl:r.reviewer.avatarUrl,name:r.reviewer.name,url:r.reviewer.url,isAuthor:r.isAuthor,isCommenter:r.isCommenter})).sort(Qh):[]}function Qh(t,e){return t.login.localeCompare(e.login,"en",{sensitivity:"accent"})}function Zf(t,e){return{event:Ht.Reviewed,comments:t.comments.nodes.map(r=>Qs(r,!1)).filter(r=>!r.inReplyToId),submittedAt:t.submittedAt,body:t.body,bodyHTML:t.bodyHTML,htmlUrl:t.url,user:yn(t.author,e),authorAssociation:t.authorAssociation,state:t.state,id:t.databaseId}}function Wh(t,e){const r=[];return t.forEach(n=>{const i=Xf(n.__typename);switch(i){case Ht.Commented:const a=n;r.push({htmlUrl:a.url,body:a.body,bodyHTML:a.bodyHTML,user:yn(a.author,e),event:i,canEdit:a.viewerCanUpdate,canDelete:a.viewerCanDelete,id:a.databaseId,graphNodeId:a.id,createdAt:a.createdAt});return;case Ht.Reviewed:const o=n;r.push({event:i,comments:[],submittedAt:o.submittedAt,body:o.body,bodyHTML:o.bodyHTML,htmlUrl:o.url,user:yn(o.author,e),authorAssociation:o.authorAssociation,state:o.state,id:o.databaseId});return;case Ht.Committed:const m=n;r.push({id:m.databaseId,event:i,sha:m.commit.oid,author:m.commit.author.user?yn(m.commit.author.user,e):{login:m.commit.committer.name},htmlUrl:m.url,message:m.commit.message,authoredDate:new Date(m.commit.authoredDate)});return;case Ht.Merged:const E=n;r.push({id:E.databaseId,event:i,user:yn(E.actor,e),createdAt:E.createdAt,mergeRef:E.mergeRef.name,sha:E.commit.oid,commitUrl:E.commit.commitUrl,url:E.url,graphNodeId:E.id});return;case Ht.Assigned:const k=n;r.push({id:k.databaseId,event:i,user:k.user,actor:k.actor});return;case Ht.HeadRefDeleted:const P=n;r.push({id:P.id,event:i,actor:P.actor,createdAt:P.createdAt,headRef:P.headRefName});return;default:break}}),r}function eg(t,e){return{login:t.user.login,name:t.user.name,avatarUrl:t.user.avatarUrl?Hc(t.user.avatarUrl,void 0,e.remote.authProviderId):void 0,url:t.user.url,bio:t.user.bio,company:t.user.company,location:t.user.location,commitContributions:tg(t.user.contributionsCollection)}}function tg(t){const e=[];return t.commitContributionsByRepository.forEach(r=>{r.contributions.nodes.forEach(n=>{e.push({createdAt:new Date(n.occurredAt),repoNameWithOwner:r.repository.nameWithOwner})})}),e}function Iu(){return[{title:"THUMBS_UP",label:"\u{1F44D}",icon:Xr.icons.reactions.THUMBS_UP},{title:"THUMBS_DOWN",label:"\u{1F44E}",icon:Xr.icons.reactions.THUMBS_DOWN},{title:"LAUGH",label:"\u{1F604}",icon:Xr.icons.reactions.LAUGH},{title:"HOORAY",label:"\u{1F389}",icon:Xr.icons.reactions.HOORAY},{title:"CONFUSED",label:"\u{1F615}",icon:Xr.icons.reactions.CONFUSED},{title:"HEART",label:"\u2764\uFE0F",icon:Xr.icons.reactions.HEART},{title:"ROCKET",label:"\u{1F680}",icon:Xr.icons.reactions.ROCKET},{title:"EYES",label:"\u{1F440}",icon:Xr.icons.reactions.EYES}]}function rg(t){const e=[];return t.forEach(r=>{var n,i;ul(r)&&e.push({login:r.author.login,name:r.author.name||""}),ca(r)&&e.push({login:r.user.login,name:(n=r.user.name)!=null?n:r.user.login}),ll(r)&&e.push({login:r.user.login,name:(i=r.user.name)!=null?i:r.user.login})}),e}function ng(t){return t&&t.repository.viewerPermission&&Object.values(Gr).includes(t.repository.viewerPermission)?t.repository.viewerPermission:Gr.Unknown}function Uc(t,e){for(const r of t.repositories)if(e.path.toLowerCase()===r.rootUri.path.toLowerCase()||e.path.toLowerCase().startsWith(r.rootUri.path.toLowerCase())&&e.path.substring(r.rootUri.path.length).startsWith("/"))return r}function Kh(t,e,r){const n=e.filter(ca).filter(o=>o.state!=="PENDING");let i=[];const a=new Map;a.set(r.login,!0);for(let o=n.length-1;o>=0;o--){const m=n[o].user;a.get(m.login)||(a.set(m.login,!0),i.push({reviewer:m,state:n[o].state}))}return t.forEach(o=>{if(!a.get(o.login))i.push({reviewer:o,state:"REQUESTED"});else{const m=i.find(E=>E.reviewer.login===o.login);m.state="REQUESTED"}}),i=i.sort((o,m)=>o.state==="REQUESTED"&&m.state!=="REQUESTED"?1:m.state==="REQUESTED"&&o.state!=="REQUESTED"||o.reviewer.login.toLowerCase()<m.reviewer.login.toLowerCase()?-1:1),i}function ig(t,e,r){return`is:pull-request ${r.replace(/\$\{user\}/g,e)} type:pr repo:${t}`}function $c(){return u.env.remoteName==="codespaces"&&u.env.uiKind===u.UIKind.Web}function Gc(){const t=u.workspace.getConfiguration("github-enterprise").get("uri","");if(t)return u.Uri.parse(t,!0)}function Ou(){return!!Gc()}function sg(t,e=200){return t?`https://www.gravatar.com/avatar/${t}?s=${e}&d=retro`:void 0}function Hc(t,e,r){var n;return r===bt.github?t:e?sg(da.createHash("md5").update((n=e==null?void 0:e.trim())==null?void 0:n.toLowerCase()).digest("hex")):void 0}var ag=Object.defineProperty,lr=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?ag(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Du=class{constructor(t,e,r,n=!1){lr(this,"id"),lr(this,"graphNodeId"),lr(this,"number"),lr(this,"title"),lr(this,"html_url"),lr(this,"state",Pt.Open),lr(this,"author"),lr(this,"assignees"),lr(this,"createdAt"),lr(this,"updatedAt"),lr(this,"milestone"),lr(this,"githubRepository"),lr(this,"remote"),lr(this,"item"),lr(this,"bodyHTML"),lr(this,"_onDidInvalidate",new u.EventEmitter),lr(this,"onDidInvalidate",this._onDidInvalidate.event),this.githubRepository=t,this.remote=e,this.item=r,n||this.update(r)}invalidate(){this._onDidInvalidate.fire()}get isOpen(){return this.state===Pt.Open}get isClosed(){return this.state===Pt.Closed}get userAvatar(){if(this.item)return this.item.user.avatarUrl}get userAvatarUri(){if(this.item){const t=this.userAvatar;if(t){const e=u.Uri.parse(`${t}&s=${64}`),r=e.toString;return e.toString=function(n){return r.call(e,!0)},e}}}get body(){return this.item?this.item.body:""}updateState(t){t.toLowerCase()==="open"?this.state=Pt.Open:this.state=Pt.Closed}update(t){this.id=t.id,this.graphNodeId=t.graphNodeId,this.number=t.number,this.title=t.title,this.bodyHTML=t.bodyHTML,this.html_url=t.url,this.author=t.user,this.milestone=t.milestone,this.createdAt=t.createdAt,this.updatedAt=t.updatedAt,this.updateState(t.state),t.assignees&&(this.assignees=t.assignees),this.item=t}equals(t){return!(!t||this.number!==t.number||this.html_url!==t.html_url)}async edit(t){try{const{mutate:e,schema:r}=await this.githubRepository.ensure(),{data:n}=await e({mutation:r.UpdatePullRequest,variables:{input:{pullRequestId:this.graphNodeId,body:t.body,title:t.title}}});return(n==null?void 0:n.updatePullRequest.pullRequest)&&(this.item.body=n.updatePullRequest.pullRequest.body,this.bodyHTML=n.updatePullRequest.pullRequest.bodyHTML,this.title=n.updatePullRequest.pullRequest.title,this.invalidate()),n.updatePullRequest.pullRequest}catch(e){throw new Error(be(e))}}canEdit(){const t=this.author&&this.author.login;return this.githubRepository.isCurrentUser(t)}async getIssueComments(){C.debug(`Fetch issue comments of PR #${this.number} - enter`,Du.ID);const{octokit:t,remote:e}=await this.githubRepository.ensure(),r=await t.issues.listComments({owner:e.owner,repo:e.repositoryName,issue_number:this.number,per_page:100});return C.debug(`Fetch issue comments of PR #${this.number} - done`,Du.ID),r.data}async createIssueComment(t){const{mutate:e,schema:r}=await this.githubRepository.ensure(),{data:n}=await e({mutation:r.AddIssueComment,variables:{input:{subjectId:this.graphNodeId,body:t}}});return Bh(n.addComment.commentEdge.node)}async editIssueComment(t,e){try{const{mutate:r,schema:n}=await this.githubRepository.ensure(),{data:i}=await r({mutation:n.EditIssueComment,variables:{input:{id:t.graphNodeId,body:e}}});return Bh(i.updateIssueComment.issueComment)}catch(r){throw new Error(be(r))}}async deleteIssueComment(t){try{const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.issues.deleteComment({owner:r.owner,repo:r.repositoryName,comment_id:Number(t)})}catch(e){throw new Error(be(e))}}async addLabels(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.issues.addLabels({owner:r.owner,repo:r.repositoryName,issue_number:this.number,labels:t})}async removeLabel(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.issues.removeLabel({owner:r.owner,repo:r.repositoryName,issue_number:this.number,name:t})}async getIssueTimelineEvents(){C.debug(`Fetch timeline events of issue #${this.number} - enter`,Du.ID);const t=this.githubRepository,{query:e,remote:r,schema:n}=await t.ensure();try{const{data:i}=await e({query:n.IssueTimelineEvents,variables:{owner:r.owner,name:r.repositoryName,number:this.number}}),a=i.repository.pullRequest.timelineItems.nodes;return Wh(a,t)}catch(i){return console.log(i),[]}}};let gr=Du;lr(gr,"ID","IssueModel");var og=Object.defineProperty,Qt=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?og(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const bn=class extends gr{constructor(t,e,r,n,i){super(e,r,n,!0);Qt(this,"isDraft"),Qt(this,"localBranchName"),Qt(this,"mergeBase"),Qt(this,"suggestedReviewers"),Qt(this,"_hasPendingReview",!1),Qt(this,"_onDidChangePendingReviewState",new u.EventEmitter),Qt(this,"onDidChangePendingReviewState",this._onDidChangePendingReviewState.event),Qt(this,"_reviewThreadsCache",[]),Qt(this,"_reviewThreadsCacheInitialized",!1),Qt(this,"_onDidChangeReviewThreads",new u.EventEmitter),Qt(this,"onDidChangeReviewThreads",this._onDidChangeReviewThreads.event),Qt(this,"fileChangeViewedState",{}),Qt(this,"_onDidChangeFileViewedState",new u.EventEmitter),Qt(this,"onDidChangeFileViewedState",this._onDidChangeFileViewedState.event),Qt(this,"isActive"),Qt(this,"_telemetry"),Qt(this,"isRemoteHeadDeleted"),Qt(this,"head"),Qt(this,"isRemoteBaseDeleted"),Qt(this,"base"),this._telemetry=t,this.isActive=!!i,this.update(n)}async initializeReviewThreadCache(){await this.getReviewThreads(),this._reviewThreadsCacheInitialized=!0}get reviewThreadsCache(){if(this._reviewThreadsCacheInitialized)return this._reviewThreadsCache;throw new Error("Cache has not been initialized yet")}get isMerged(){return this.state===Pt.Merged}get hasPendingReview(){return this._hasPendingReview}set hasPendingReview(t){this._hasPendingReview!==t&&(this._hasPendingReview=t,this._onDidChangePendingReviewState.fire(this._hasPendingReview))}updateState(t){t.toLowerCase()==="open"?this.state=Pt.Open:this.state=this.item.merged?Pt.Merged:Pt.Closed}update(t){super.update(t),this.isDraft=t.isDraft,this.suggestedReviewers=t.suggestedReviewers,t.isRemoteHeadDeleted!=null&&(this.isRemoteHeadDeleted=t.isRemoteHeadDeleted),t.head&&(this.head=new To(t.head.ref,t.head.label,t.head.sha,t.head.repo.cloneUrl)),t.isRemoteBaseDeleted!=null&&(this.isRemoteBaseDeleted=t.isRemoteBaseDeleted),t.base&&(this.base=new To(t.base.ref,t.base.label,t.base.sha,t.base.repo.cloneUrl))}isResolved(){return!!this.head}validatePullRequestModel(t){if(this.head)return!0;const e=`There is no upstream branch for Pull Request #${this.number}. View it on GitHub for more details`;return t?t+=`: ${e}`:t=e,u.window.showWarningMessage(t,"Open on GitHub").then(r=>{r&&r==="Open on GitHub"&&u.commands.executeCommand("vscode.open",u.Uri.parse(this.html_url))}),!1}async approve(t){return(await this.getPendingReviewId()?this.submitReview(nn.Approve,t):this.createReview(nn.Approve,t)).then(r=>(this._telemetry.sendTelemetryEvent("pr.approve"),r))}async requestChanges(t){return(await this.getPendingReviewId()?this.submitReview(nn.RequestChanges,t):this.createReview(nn.RequestChanges,t)).then(r=>(this._telemetry.sendTelemetryEvent("pr.requestChanges"),r))}async close(){const{octokit:t,remote:e}=await this.githubRepository.ensure(),r=await t.pulls.update({owner:e.owner,repo:e.repositoryName,pull_number:this.number,state:"closed"});return this._telemetry.sendTelemetryEvent("pr.close"),ss(r.data,this.githubRepository)}async createReview(t,e){const{octokit:r,remote:n}=await this.githubRepository.ensure(),{data:i}=await r.pulls.createReview({owner:n.owner,repo:n.repositoryName,pull_number:this.number,event:t,body:e});return Yf(i,this.githubRepository)}async submitReview(t,e){const r=await this.getPendingReviewId(),{mutate:n,schema:i}=await this.githubRepository.ensure();if(r){const{data:a}=await n({mutation:i.SubmitReview,variables:{id:r,event:t||nn.Comment,body:e}});this.hasPendingReview=!1,await this.updateDraftModeContext();const o=Zf(a.submitPullRequestReview.pullRequestReview,this.githubRepository),m=this._reviewThreadsCache.find(E=>E.comments.length?E.comments[0].pullRequestReviewId===o.id:void 0);return m&&(m.comments=o.comments,this._onDidChangeReviewThreads.fire({added:[],changed:[m],removed:[]})),o}else throw new Error(`Submitting review failed, no pending review for current pull request: ${this.number}.`)}async updateMilestone(t){const{mutate:e,schema:r}=await this.githubRepository.ensure(),n=t==="null"?null:t;try{await e({mutation:r.UpdatePullRequest,variables:{input:{pullRequestId:this.item.graphNodeId,milestoneId:n}}})}catch(i){C.appendLine(i)}}async updateAssignees(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.issues.addAssignees({owner:r.owner,repo:r.repositoryName,issue_number:this.number,assignees:t})}async getPendingReviewId(){const{query:t,schema:e}=await this.githubRepository.ensure(),r=await this.githubRepository.getAuthenticatedUser();try{const{data:n}=await t({query:e.GetPendingReviewId,variables:{pullRequestId:this.item.graphNodeId,author:r}});return n.node.reviews.nodes.length>0?n.node.reviews.nodes[0].id:void 0}catch(n){return}}async deleteReview(){const t=await this.getPendingReviewId(),{mutate:e,schema:r}=await this.githubRepository.ensure(),{data:n}=await e({mutation:r.DeleteReview,variables:{input:{pullRequestReviewId:t}}}),{comments:i,databaseId:a}=n.deletePullRequestReview.pullRequestReview;return this.hasPendingReview=!1,await this.updateDraftModeContext(),this.getReviewThreads(),{deletedReviewId:a,deletedReviewComments:i.nodes.map(o=>Qs(o,!1))}}async startReview(t){var e;const{mutate:r,schema:n}=await this.githubRepository.ensure(),{data:i}=await r({mutation:n.StartReview,variables:{input:{body:"",pullRequestId:this.item.graphNodeId,commitOID:t||((e=this.head)==null?void 0:e.sha)}}});if(!i)throw new Error("Failed to start review");return i.addPullRequestReview.pullRequestReview.id}async createReviewThread(t,e,r,n,i){if(!this.validatePullRequestModel("Creating comment failed"))return;const a=await this.getPendingReviewId(),{mutate:o,schema:m}=await this.githubRepository.ensure(),{data:E}=await o({mutation:m.AddReviewThread,variables:{input:{path:e,body:t,pullRequestId:this.graphNodeId,pullRequestReviewId:a,line:r,side:n}}});if(!E)throw new Error("Creating review thread failed.");i||(this.hasPendingReview=!0,await this.updateDraftModeContext());const k=E.addPullRequestReviewThread.thread,P=Nu(k);return this._reviewThreadsCache.push(P),this._onDidChangeReviewThreads.fire({added:[P],changed:[],removed:[]}),P}async createCommentReply(t,e,r,n){var i;if(!this.validatePullRequestModel("Creating comment failed"))return;let a=await this.getPendingReviewId();a||(a=await this.startReview(n));const{mutate:o,schema:m}=await this.githubRepository.ensure(),{data:E}=await o({mutation:m.AddComment,variables:{input:{pullRequestReviewId:a,body:t,inReplyTo:e,commitOID:n||((i=this.head)==null?void 0:i.sha)}}});if(!E)throw new Error("Creating comment reply failed.");const{comment:k}=E.addPullRequestReviewComment,P=Qs(k,!1);r&&(P.isDraft=!1);const U=this._reviewThreadsCache.find(z=>z.comments.some(le=>le.graphNodeId===e));return U&&(U.comments.push(P),this._onDidChangeReviewThreads.fire({added:[],changed:[U],removed:[]})),P}async validateDraftMode(){const t=!!await this.getPendingReviewId();return t!==this.hasPendingReview&&(this.hasPendingReview=t),await this.updateDraftModeContext(),t}async updateDraftModeContext(){this.isActive&&await u.commands.executeCommand("setContext","reviewInDraftMode",this.hasPendingReview)}async editReviewComment(t,e){const{mutate:r,schema:n}=await this.githubRepository.ensure();let i=this._reviewThreadsCache.find(m=>m.comments.some(E=>E.graphNodeId===t.graphNodeId));if(!i)return this.editIssueComment(t,e);const{data:a}=await r({mutation:n.EditComment,variables:{input:{pullRequestReviewCommentId:t.graphNodeId,body:e}}});if(!a)throw new Error("Editing review comment failed.");const o=Qs(a.updatePullRequestReviewComment.pullRequestReviewComment,!!t.isResolved);if(i){const m=i.comments.findIndex(E=>E.graphNodeId===t.graphNodeId);i.comments.splice(m,1,o),this._onDidChangeReviewThreads.fire({added:[],changed:[i],removed:[]})}return o}async deleteReviewComment(t){try{const{octokit:e,remote:r}=await this.githubRepository.ensure(),n=Number(t),i=this._reviewThreadsCache.findIndex(a=>a.comments.some(o=>o.id===n));if(i===-1)this.deleteIssueComment(t);else if(await e.pulls.deleteReviewComment({owner:r.owner,repo:r.repositoryName,comment_id:n}),i>-1){const a=this._reviewThreadsCache[i],o=a.comments.findIndex(m=>m.id===n);a.comments.splice(o,1),a.comments.length===0?(this._reviewThreadsCache.splice(i,1),this._onDidChangeReviewThreads.fire({added:[],changed:[],removed:[a]})):this._onDidChangeReviewThreads.fire({added:[],changed:[a],removed:[]})}}catch(e){throw new Error(be(e))}}async getReviewRequests(){const t=this.githubRepository,{remote:e,octokit:r}=await t.ensure();return(await r.pulls.listRequestedReviewers({owner:e.owner,repo:e.repositoryName,pull_number:this.number})).data.users.map(i=>Ci(i,t))}async requestReview(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.pulls.requestReviewers({owner:r.owner,repo:r.repositoryName,pull_number:this.number,reviewers:t})}async deleteReviewRequest(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.pulls.removeRequestedReviewers({owner:r.owner,repo:r.repositoryName,pull_number:this.number,reviewers:[t]})}async deleteAssignees(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.issues.removeAssignees({owner:r.owner,repo:r.repositoryName,issue_number:this.number,assignees:[t]})}diffThreads(t){const e=[],r=[],n=[];t.forEach(i=>{const a=this._reviewThreadsCache.find(o=>o.id===i.id);a?ju()(i,a)||r.push(i):e.push(i)}),this._reviewThreadsCache.forEach(i=>{t.find(a=>a.id===i.id)||n.push(i)}),this._onDidChangeReviewThreads.fire({added:e,changed:r,removed:n})}async getReviewThreads(){const{remote:t,query:e,schema:r}=await this.githubRepository.ensure();try{const{data:n}=await e({query:r.PullRequestComments,variables:{owner:t.owner,name:t.repositoryName,number:this.number}}),i=n.repository.pullRequest.reviewThreads.nodes.map(a=>Nu(a));return this.diffThreads(i),this._reviewThreadsCache=i,i}catch(n){return C.appendLine(`Failed to get pull request review comments: ${n}`),[]}}async getReviewComments(){const{remote:t,query:e,schema:r}=await this.githubRepository.ensure();try{const{data:n}=await e({query:r.PullRequestComments,variables:{owner:t.owner,name:t.repositoryName,number:this.number}});return n.repository.pullRequest.reviewThreads.nodes.map(a=>a.comments.nodes.map(o=>Qs(o,a.isResolved),t)).reduce((a,o)=>a.concat(o),[]).sort((a,o)=>a.createdAt>o.createdAt?1:-1)}catch(n){return C.appendLine(`Failed to get pull request review comments: ${n}`),[]}}async getCommits(){try{C.debug(`Fetch commits of PR #${this.number} - enter`,bn.ID);const{remote:t,octokit:e}=await this.githubRepository.ensure(),r=await e.pulls.listCommits({pull_number:this.number,owner:t.owner,repo:t.repositoryName});return C.debug(`Fetch commits of PR #${this.number} - done`,bn.ID),r.data}catch(t){return u.window.showErrorMessage(`Fetching commits failed: ${be(t)}`),[]}}async getCommitChangedFiles(t){var e,r;try{C.debug(`Fetch file changes of commit ${t.sha} in PR #${this.number} - enter`,bn.ID);const{octokit:n,remote:i}=await this.githubRepository.ensure(),a=await n.repos.getCommit({owner:i.owner,repo:i.repositoryName,ref:t.sha});return C.debug(`Fetch file changes of commit ${t.sha} in PR #${this.number} - done`,bn.ID),(r=(e=a.data.files)==null?void 0:e.filter(o=>!!o.patch))!=null?r:[]}catch(n){return u.window.showErrorMessage(`Fetching commit file changes failed: ${be(n)}`),[]}}async getFile(t,e){var r;const{octokit:n,remote:i}=await this.githubRepository.ensure(),a=await n.repos.getContent({owner:i.owner,repo:i.repositoryName,path:t,ref:e});if(Array.isArray(a.data))throw new Error(`Unexpected array response when getting file ${t}`);const o=(r=a.data.content)!=null?r:"";return vo.Buffer.from(o,a.data.encoding).toString()}async getTimelineEvents(){C.debug(`Fetch timeline events of PR #${this.number} - enter`,bn.ID);const{query:t,remote:e,schema:r}=await this.githubRepository.ensure();try{const{data:n}=await t({query:r.TimelineEvents,variables:{owner:e.owner,name:e.repositoryName,number:this.number}}),i=n.repository.pullRequest.timelineItems.nodes,a=Wh(i,this.githubRepository);return await this.addReviewTimelineEventComments(a),a}catch(n){return console.log(n),[]}}async addReviewTimelineEventComments(t){const e=t.filter(ca),n=(await this.getReviewThreads()).reduce((k,P)=>k.concat(P.comments),[]),i=e.reduce((k,P)=>(k[P.id]=P,P.comments=[],k),{}),a=n.reduce((k,P)=>(k[P.id]=P,k),{}),o=[];let m=n.length;for(;m-- >0;){const k=n[m];if(!k.inReplyToId){o.unshift(k);continue}const P=a[k.inReplyToId];P.childComments=P.childComments||[],P.childComments=[k,...k.childComments||[],...P.childComments]}o.forEach(k=>{const P=i[k.pullRequestReviewId];P&&(P.comments=P.comments.concat(k).concat(k.childComments||[]))});const E=e.filter(k=>k.state.toLowerCase()==="pending")[0];E&&(E.comments=n.filter(k=>k.isDraft))}async getStatusChecks(){var t;const{query:e,remote:r,schema:n}=await this.githubRepository.ensure();let i;try{i=await e({query:n.GetChecks,variables:{owner:r.owner,name:r.repositoryName,number:this.number}})}catch(o){if((t=o.message)==null?void 0:t.startsWith("GraphQL error: Resource protected by organization SAML enforcement."))return{state:"pending",statuses:[]}}const a=i.data.repository.pullRequest.commits.nodes[0].commit.statusCheckRollup;return a?{state:a.state.toLowerCase(),statuses:a.contexts.nodes.map(o=>{var m,E,k,P;return cl(o)?{id:o.id,url:(m=o.checkSuite.app)==null?void 0:m.url,avatar_url:(E=o.checkSuite.app)==null?void 0:E.logoUrl,state:((k=o.conclusion)==null?void 0:k.toLowerCase())||"pending",description:o.title,context:o.name,target_url:o.detailsUrl}:{id:o.id,url:o.targetUrl,avatar_url:o.avatarUrl,state:(P=o.state)==null?void 0:P.toLowerCase(),description:o.description,context:o.context,target_url:o.targetUrl}})}:{state:"pending",statuses:[]}}static async openDiffFromComment(t,e,r){const n=await e.getFileChangesInfo(),i=e.mergeBase||e.base.sha,o=(await fs(n,t.repository,i)).find(P=>P.fileName===r.path||P.previousFileName===r.path);if(!o)throw new Error("Can't find matching file");let m,E;if(e.equals(t.activePullRequest)){const P=u.Uri.file(L.resolve(t.repository.rootUri.fsPath,o.fileName));m=o.status===Ye.DELETE?Yr(P,void 0,void 0,"",!1,{base:!1},t.repository.rootUri):P,E=Yr(P,o.status===Ye.RENAME?o.previousFileName:o.fileName,void 0,o.status===Ye.ADD?"":i,!1,{base:!0},t.repository.rootUri)}else{const P=e.head.sha,U=o.status===Ye.RENAME?o.previousFileName:o.fileName;m=Gn(u.Uri.file(Hn(t.repository.rootUri,o.fileName)),e,o.baseCommit,P,o.fileName,!1,o.status),E=Gn(u.Uri.file(Hn(t.repository.rootUri,U)),e,o.baseCommit,P,o.fileName,!0,o.status)}const k=r.path.split("/");u.commands.executeCommand("vscode.diff",E,m,`${k[k.length-1]} (Pull Request)`,{})}async getFileChangesInfo(){C.debug(`Fetch file changes, base, head and merge base of PR #${this.number} - enter`,bn.ID);const t=this.githubRepository,{octokit:e,remote:r}=await t.ensure();if(!this.base){const o=await e.pulls.get({owner:r.owner,repo:r.repositoryName,pull_number:this.number});this.update(ss(o.data,t))}if(this.item.merged){const o=await e.pulls.listFiles({repo:r.repositoryName,owner:r.owner,pull_number:this.number});return this.mergeBase=this.base.sha,o.data}const{data:n}=await e.repos.compareCommits({repo:r.repositoryName,owner:r.owner,base:`${this.base.repositoryCloneUrl.owner}:${this.base.ref}`,head:`${this.head.repositoryCloneUrl.owner}:${this.head.ref}`});this.mergeBase=n.merge_base_commit.sha;const i=300;let a=[];return n.files.length>=i?(C.debug(`More than ${i} files changed, fetching all file changes of PR #${this.number}`,bn.ID),a=await e.paginate("GET /repos/:owner/:repo/pulls/:pull_number/files",{owner:this.base.repositoryCloneUrl.owner,pull_number:this.number,repo:r.repositoryName,per_page:100})):a=n.files,C.debug(`Fetch file changes and merge base of PR #${this.number} - done, total files ${a.length} `,bn.ID),a}async getMergeability(){try{C.debug(`Fetch pull request mergeability ${this.number} - enter`,bn.ID);const{query:t,remote:e,schema:r}=await this.githubRepository.ensure(),{data:n}=await t({query:r.PullRequestMergeability,variables:{owner:e.owner,name:e.repositoryName,number:this.number}});return C.debug(`Fetch pull request mergeability ${this.number} - done`,bn.ID),Lc(n.repository.pullRequest.mergeable)}catch(t){return C.appendLine(`PullRequestModel> Unable to fetch PR Mergeability: ${t}`),En.Unknown}}async setReadyForReview(){try{const{mutate:t,schema:e}=await this.githubRepository.ensure(),{data:r}=await t({mutation:e.ReadyForReview,variables:{input:{pullRequestId:this.graphNodeId}}});return this._telemetry.sendTelemetryEvent("pr.readyForReview.success"),r.markPullRequestReadyForReview.pullRequest.isDraft}catch(t){throw this._telemetry.sendTelemetryErrorEvent("pr.readyForReview.failure"),t}}updateCommentReactions(t,e){const r=this._reviewThreadsCache.find(n=>n.comments.some(i=>i.graphNodeId===t));if(r){const n=r.comments.find(i=>i.graphNodeId===t);n&&(n.reactions=Vh(e),this._onDidChangeReviewThreads.fire({added:[],changed:[r],removed:[]}))}}async addCommentReaction(t,e){const r=Iu().reduce((m,E)=>(m[E.label]=E.title,m),{}),{mutate:n,schema:i}=await this.githubRepository.ensure(),{data:a}=await n({mutation:i.AddReaction,variables:{input:{subjectId:t,content:r[e.label]}}});if(!a)throw new Error("Add comment reaction failed.");const o=a.addReaction.subject.reactionGroups;return this.updateCommentReactions(t,o),a}async deleteCommentReaction(t,e){const r=Iu().reduce((m,E)=>(m[E.label]=E.title,m),{}),{mutate:n,schema:i}=await this.githubRepository.ensure(),{data:a}=await n({mutation:i.DeleteReaction,variables:{input:{subjectId:t,content:r[e.label]}}});if(!a)throw new Error("Delete comment reaction failed.");const o=a.removeReaction.subject.reactionGroups;return this.updateCommentReactions(t,o),a}async resolveReviewThread(t){const{mutate:e,schema:r}=await this.githubRepository.ensure(),{data:n}=await e({mutation:r.ResolveReviewThread,variables:{input:{threadId:t}}});if(!n)throw new Error("Resolve review thread failed.");const i=this._reviewThreadsCache.findIndex(a=>a.id===t);if(i>-1){const a=Nu(n.resolveReviewThread.thread);this._reviewThreadsCache.splice(i,1,a),this._onDidChangeReviewThreads.fire({added:[],changed:[a],removed:[]})}}async unresolveReviewThread(t){const{mutate:e,schema:r}=await this.githubRepository.ensure(),{data:n}=await e({mutation:r.UnresolveReviewThread,variables:{input:{threadId:t}}});if(!n)throw new Error("Unresolve review thread failed.");const i=this._reviewThreadsCache.findIndex(a=>a.id===t);if(i>-1){const a=Nu(n.unresolveReviewThread.thread);this._reviewThreadsCache.splice(i,1,a),this._onDidChangeReviewThreads.fire({added:[],changed:[a],removed:[]})}}async getPullRequestFileViewState(){const{query:t,schema:e,remote:r}=await this.githubRepository.ensure(),n=[];let i=null,a=!1;do{const{data:o}=await t({query:e.PullRequestFiles,variables:{owner:r.owner,name:r.repositoryName,number:this.number,after:i}});o.repository.pullRequest.files.nodes.forEach(m=>{this.fileChangeViewedState[m.path]!==m.viewerViewedState&&n.push({fileName:m.path,viewed:m.viewerViewedState}),this.fileChangeViewedState[m.path]=m.viewerViewedState}),a=o.repository.pullRequest.files.pageInfo.hasNextPage,i=o.repository.pullRequest.files.pageInfo.endCursor}while(a);return n.length&&this._onDidChangeFileViewedState.fire({changed:n}),this.fileChangeViewedState}async markFileAsViewed(t){const{mutate:e,schema:r}=await this.githubRepository.ensure();await e({mutation:r.MarkFileAsViewed,variables:{input:{path:t,pullRequestId:this.graphNodeId}}}),this.fileChangeViewedState[t]=Rr.VIEWED,this._onDidChangeFileViewedState.fire({changed:[{fileName:t,viewed:Rr.VIEWED}]})}async unmarkFileAsViewed(t){const{mutate:e,schema:r}=await this.githubRepository.ensure();await e({mutation:r.UnmarkFileAsViewed,variables:{input:{path:t,pullRequestId:this.graphNodeId}}}),this.fileChangeViewedState[t]=Rr.UNVIEWED,this._onDidChangeFileViewedState.fire({changed:[{fileName:t,viewed:Rr.UNVIEWED}]})}};let ni=bn;Qt(ni,"ID","PullRequestModel");var ug=Object.defineProperty,Bc=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?ug(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class lg extends Ch{constructor(e,r,n){super(e);this._folderRepositoryManager=r,this._item=n,Bc(this,"viewType","github:activePullRequest"),Bc(this,"_existingReviewers",[]),Bc(this,"_prChangeListener"),this.registerFolderRepositoryListener(),ap(i=>{i&&this._item.update(i),this._postMessage({command:"update-state",state:this._item.state})},null,this._disposables),this._disposables.push(this._folderRepositoryManager.onDidMergePullRequest(i=>{this._postMessage({command:"update-state",state:Pt.Merged})}))}registerFolderRepositoryListener(){this._disposables.push(this._folderRepositoryManager.onDidChangeActivePullRequest(e=>{if(this._folderRepositoryManager&&this._item){const r=this._item.equals(this._folderRepositoryManager.activePullRequest);this._postMessage({command:"pr.update-checkout-status",isCurrentlyCheckedOut:r})}}))}resolveWebviewView(e,r,n){super.resolveWebviewView(e,r,n),e.webview.html=this._getHtmlForWebview(),this.updatePullRequest(this._item)}async _onDidReceiveMessage(e){if(await super._onDidReceiveMessage(e)===this.MESSAGE_UNHANDLED)switch(e.command){case"alert":u.window.showErrorMessage(e.args);return;case"pr.close":return this.close(e);case"pr.comment":return this.createComment(e);case"pr.merge":return this.mergePullRequest(e);case"pr.deleteBranch":return this.deleteBranch(e);case"pr.readyForReview":return this.setReadyForReview(e);case"pr.approve":return this.approvePullRequest(e);case"pr.request-changes":return this.requestChanges(e);case"pr.submit":return this.submitReview(e);case"pr.openOnGitHub":return eo(this._item,this._item._telemetry);case"pr.checkout-default-branch":return this.checkoutDefaultBranch(e)}}async checkoutDefaultBranch(e){try{const r=await this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(this._item);await this._folderRepositoryManager.checkoutDefaultBranch(r)}finally{this._replyMessage(e,{})}}async refresh(){await this.updatePullRequest(this._item)}async updatePullRequest(e){var r;return(!this._prChangeListener||e.number!==this._item.number)&&((r=this._prChangeListener)==null||r.dispose(),this._prChangeListener=e.onDidInvalidate(()=>this.updatePullRequest(e))),Promise.all([this._folderRepositoryManager.resolvePullRequest(e.remote.owner,e.remote.repositoryName,e.number),this._folderRepositoryManager.getPullRequestRepositoryAccessAndMergeMethods(e),e.getTimelineEvents(),e.getReviewRequests(),this._folderRepositoryManager.getBranchNameForPullRequest(e)]).then(n=>{var i,a;const[o,m,E,k,P]=n;if(!o)throw new Error(`Fail to resolve Pull Request #${e.number} in ${e.remote.owner}/${e.remote.repositoryName}`);if(this._item=o,!this._view)return;this._view.title=`${o.title} #${e.number.toString()}`;const U=e.equals(this._folderRepositoryManager.activePullRequest),z=m.hasWritePermission,le=m.mergeMethodsAvailability,ce=z||this._item.canEdit(),me=u.workspace.getConfiguration("githubPullRequests").get("defaultMergeMethod"),Te=Ph(le,me),Re=this._folderRepositoryManager.getCurrentUser(this._item);this._existingReviewers=Kh(k!=null?k:[],E!=null?E:[],o.author);const Oe=o.base&&o.head&&!o.base.repositoryCloneUrl.equals(o.head.repositoryCloneUrl)&&$c();this._postMessage({command:"pr.initialize",pullrequest:{number:o.number,title:o.title,url:o.html_url,createdAt:o.createdAt,body:o.body,bodyHTML:o.bodyHTML,labels:o.item.labels,author:{login:o.author.login,name:o.author.name,avatarUrl:o.userAvatar,url:o.author.url},state:o.state,isCurrentlyCheckedOut:U,isRemoteBaseDeleted:o.isRemoteBaseDeleted,base:o.base.label,isRemoteHeadDeleted:o.isRemoteHeadDeleted,isLocalHeadDeleted:!P,head:(a=(i=o.head)==null?void 0:i.label)!=null?a:"",canEdit:ce,hasWritePermission:z,mergeable:o.item.mergeable,isDraft:o.isDraft,status:{statuses:[]},events:[],mergeMethodsAvailability:le,defaultMergeMethod:Te,isIssue:!1,isAuthor:Re.login===o.author.login,reviewers:this._existingReviewers,continueOnGitHub:Oe}})}).catch(n=>{u.window.showErrorMessage(be(n))})}close(e){u.commands.executeCommand("pr.close",this._item,e.args).then(r=>{r&&this._replyMessage(e,{value:r})})}createComment(e){this._item.createIssueComment(e.args).then(r=>{this._replyMessage(e,{value:r})})}updateReviewers(e){if(e){const r=this._existingReviewers.find(n=>e.user.login===n.reviewer.login);r?r.state=e.state:this._existingReviewers.push({reviewer:e.user,state:e.state})}}approvePullRequest(e){this._item.approve(e.args).then(r=>{this.updateReviewers(r),this._replyMessage(e,{review:r,reviewers:this._existingReviewers}),u.commands.executeCommand("pr.refreshList")},r=>{u.window.showErrorMessage(`Approving pull request failed. ${be(r)}`),this._throwError(e,`${be(r)}`)})}requestChanges(e){this._item.requestChanges(e.args).then(r=>{this.updateReviewers(r),this._replyMessage(e,{review:r,reviewers:this._existingReviewers})},r=>{u.window.showErrorMessage(`Requesting changes failed. ${be(r)}`),this._throwError(e,`${be(r)}`)})}submitReview(e){this._item.submitReview(nn.Comment,e.args).then(r=>{this.updateReviewers(r),this._replyMessage(e,{review:r,reviewers:this._existingReviewers})},r=>{u.window.showErrorMessage(`Submitting review failed. ${be(r)}`),this._throwError(e,`${be(r)}`)})}async deleteBranch(e){const r=await this._folderRepositoryManager.getBranchNameForPullRequest(this._item),n=[];if(this._item.isResolved()){const o=this._item.head.ref;await this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(this._item)===this._item.head.ref||n.push({label:`Delete remote branch ${this._item.remote.remoteName}/${o}`,description:`${this._item.remote.normalizedHost}/${this._item.remote.owner}/${this._item.remote.repositoryName}`,type:"upstream",picked:!0})}if(r){const o=u.workspace.getConfiguration("githubPullRequests").get("defaultDeletionMethod.selectLocalBranch");n.push({label:`Delete local branch ${r.branch}`,type:"local",picked:!!o});const m=u.workspace.getConfiguration("githubPullRequests").get("defaultDeletionMethod.selectRemote");r.remote&&r.createdForPullRequest&&!r.remoteInUse&&n.push({label:`Delete remote ${r.remote}, which is no longer used by any other branch`,type:"remote",picked:!!m})}if(u.env.remoteName==="codespaces"&&n.push({label:"Suspend Codespace",type:"suspend"}),!n.length){u.window.showWarningMessage(`There is no longer an upstream or local branch for Pull Request #${this._item.number}`),this._replyMessage(e,{cancelled:!0});return}const i=await u.window.showQuickPick(n,{canPickMany:!0,ignoreFocusOut:!0}),a=[];if(i){const o=this._item.equals(this._folderRepositoryManager.activePullRequest),m=i.map(async E=>{switch(E.type){case"upstream":return await this._folderRepositoryManager.deleteBranch(this._item),a.push(E.type),this._folderRepositoryManager.repository.fetch({prune:!0});case"local":if(o){if(this._folderRepositoryManager.repository.state.workingTreeChanges.length)if(await u.window.showWarningMessage("Your local changes will be lost, do you want to continue?",{modal:!0},"Yes")==="Yes")await u.commands.executeCommand("git.cleanAll");else return;const k=await this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(this._item);await this._folderRepositoryManager.repository.checkout(k)}return await this._folderRepositoryManager.repository.deleteBranch(r.branch,!0),a.push(E.type);case"remote":return await this._folderRepositoryManager.repository.removeRemote(r.remote),a.push(E.type);case"suspend":return await u.commands.executeCommand("github.codespaces.disconnectSuspend"),a.push(E.type)}});await Promise.all(m),u.commands.executeCommand("pr.refreshList"),this._postMessage({command:"pr.deleteBranch",branchTypes:a})}else this._replyMessage(e,{cancelled:!0})}setReadyForReview(e){this._item.setReadyForReview().then(r=>{u.commands.executeCommand("pr.refreshList"),this._replyMessage(e,{isDraft:r})}).catch(r=>{u.window.showErrorMessage(`Unable to set PR ready for review. ${be(r)}`),this._throwError(e,{})})}async mergePullRequest(e){const{title:r,description:n,method:i}=e.args;if(await u.window.showInformationMessage("Merge this pull request?",{modal:!0},"Yes")!=="Yes"){this._replyMessage(e,{state:Pt.Open});return}this._folderRepositoryManager.mergePullRequest(this._item,r,n,i).then(o=>{u.commands.executeCommand("pr.refreshList"),o.merged||u.window.showErrorMessage(`Merging PR failed: ${o.message}`),this._replyMessage(e,{state:o.merged?Pt.Merged:Pt.Open})}).catch(o=>{u.window.showErrorMessage(`Unable to merge pull request. ${be(o)}`),this._throwError(e,{})})}_getHtmlForWebview(){const e=Dc(),r=u.Uri.joinPath(this._extensionUri,"dist","webview-open-pr-view.js");return`<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src vscode-resource: https:; script-src 'nonce-${e}'; style-src vscode-resource: 'unsafe-inline' http: https: data:;">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<title>Active Pull Request</title>
	</head>
	<body>
		<div id="app"></div>
		<script nonce="${e}" src="${this._webview.asWebviewUri(r).toString()}"></script>
	</body>
</html>`}}class cg{constructor(e,r){this.reviewManager=e,this.folderRepositoryManager=r}provideTerminalLinks(e,r){var n;const i=e.line.indexOf("https://github.com");if(i===-1)return[];const a=e.line.substring(i),o=new RegExp(/https:\/\/github\.com\/(.*)\/(.*)\/pull\/new\/(.*)/),m=a.match(o);if(m&&m.length===4){const E=m[1],k=m[2],P=m[3];if(this.folderRepositoryManager.gitHubRepositories.findIndex(z=>z.remote.owner===E&&z.remote.repositoryName===k)>-1&&((n=this.reviewManager.repository.state.HEAD)==null?void 0:n.name)===P)return[{startIndex:i,length:e.line.length-i,tooltip:"Create a Pull Request",url:a}]}return[]}handleTerminalLink(e){const r=u.workspace.getConfiguration("githubPullRequests").get("terminalLinksHandler");if(r==="github"){u.env.openExternal(u.Uri.parse(e.url));return}if(r==="vscode"){this.reviewManager.createPullRequest();return}u.window.showInformationMessage("Do you want to create a pull request using the GitHub Pull Requests and Issues extension?","Yes","No, continue to github.com").then(n=>{n==="Yes"?this.reviewManager.createPullRequest():u.env.openExternal(u.Uri.parse(e.url))})}}var dg=Object.defineProperty,Hr=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?dg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class hg extends Ch{constructor(e,r,n,i){super(e);this._folderRepositoryManager=r,this._pullRequestDefaults=n,Hr(this,"viewType","github:createPullRequest"),Hr(this,"_onDone",new u.EventEmitter),Hr(this,"onDone",this._onDone.event),Hr(this,"_onDidChangeBaseRemote",new u.EventEmitter),Hr(this,"onDidChangeBaseRemote",this._onDidChangeBaseRemote.event),Hr(this,"_onDidChangeBaseBranch",new u.EventEmitter),Hr(this,"onDidChangeBaseBranch",this._onDidChangeBaseBranch.event),Hr(this,"_onDidChangeCompareRemote",new u.EventEmitter),Hr(this,"onDidChangeCompareRemote",this._onDidChangeCompareRemote.event),Hr(this,"_onDidChangeCompareBranch",new u.EventEmitter),Hr(this,"onDidChangeCompareBranch",this._onDidChangeCompareBranch.event),Hr(this,"_firstLoad",!0),Hr(this,"_compareBranch"),Hr(this,"_compareRemote"),this._compareBranch=i}resolveWebviewView(e,r,n){super.resolveWebviewView(e,r,n),e.webview.html=this._getHtmlForWebview(),this._firstLoad?(this._firstLoad=!1,this.initializeParams(!0)):this.initializeParams()}get compareBranch(){return this._compareBranch}set compareBranch(e){var r,n;e&&((e==null?void 0:e.name)!==this._compareBranch.name||((r=e==null?void 0:e.upstream)==null?void 0:r.remote)!==((n=this._compareBranch.upstream)==null?void 0:n.remote))&&(this._compareBranch=e,this.initializeParams(),this._onDidChangeCompareBranch.fire(this._compareBranch.name))}get compareRemote(){return this._compareRemote}set compareRemote(e){var r,n;e&&(e.owner!==((r=this._compareRemote)==null?void 0:r.owner)||e.repositoryName!==((n=this._compareRemote)==null?void 0:n.repositoryName))&&(this._compareRemote=e,this.initializeParams(),this._onDidChangeCompareRemote.fire(this._compareRemote))}show(e){e&&(this.compareBranch=e),super.show()}async getTotalCommits(){var e,r,n;const i=await this._folderRepositoryManager.getOrigin(this.compareBranch);if((e=this.compareBranch)==null?void 0:e.upstream){const a=this._folderRepositoryManager.findRepo(js(this.compareBranch.upstream.remote));if(a){const o=`${a.remote.owner}:${(r=this.compareBranch.name)!=null?r:""}`,m=`${this._pullRequestDefaults.owner}:${this._pullRequestDefaults.base}`,{total_commits:E}=await i.compareCommits(m,o);return E}}else if((n=this.compareBranch)==null?void 0:n.commit){const a=await this._folderRepositoryManager.repository.getBranch(this._pullRequestDefaults.base);if(a.commit)return(await this._folderRepositoryManager.repository.diffBetween(a.commit,this.compareBranch.commit)).length}return 0}async getTitle(){var e,r,n,i;const a=await this._folderRepositoryManager.getOrigin(this.compareBranch);let o=this._pullRequestDefaults.base===((e=this.compareBranch)==null?void 0:e.name);try{await this.getTotalCommits()>1&&(o=await a.getDefaultBranch()!==((r=this.compareBranch)==null?void 0:r.name))}catch(m){}if(o){const m=(n=this.compareBranch)==null?void 0:n.name;return m?`${m.charAt(0).toUpperCase()}${m.slice(1)}`:""}else return((i=this.compareBranch)==null?void 0:i.name)?qh(await this._folderRepositoryManager.getTipCommitMessage(this.compareBranch.name)).title:""}async getPullRequestTemplate(){const e=await this._folderRepositoryManager.getPullRequestTemplates();if(e[0])try{return(await u.workspace.fs.readFile(e[0])).toString()}catch(r){C.appendLine(`Reading pull request template failed: ${r}`);return}}async getDescription(){var e,r;let n;try{await this.getTotalCommits()===1&&((e=this.compareBranch)==null?void 0:e.name)&&(n=qh(await this._folderRepositoryManager.getTipCommitMessage(this.compareBranch.name)).body)}catch(a){}const i=await this.getPullRequestTemplate();return i&&n?`${n}

${i}`:i||(n&&this._pullRequestDefaults.base!==((r=this.compareBranch)==null?void 0:r.name)?n:"")}async initializeParams(e=!1){var r,n;if(!this.compareBranch)throw new xh(this._folderRepositoryManager.repository);const i={owner:this._pullRequestDefaults.owner,repositoryName:this._pullRequestDefaults.repo},a=await this._folderRepositoryManager.getOrigin(this.compareBranch),o={owner:a.remote.owner,repositoryName:a.remote.repositoryName},[m,E,k,P]=await Promise.all([this._folderRepositoryManager.getGitHubRemotes(),this._folderRepositoryManager.listBranches(this._pullRequestDefaults.owner,this._pullRequestDefaults.repo),this.getTitle(),this.getDescription()]),U=m.map(le=>({owner:le.owner,repositoryName:le.repositoryName}));let z=E;o.owner!==i.owner&&(z=await this._folderRepositoryManager.listBranches(o.owner,o.repositoryName)),this.compareBranch.name&&!z.includes(this.compareBranch.name)&&(z.push(this.compareBranch.name),z.sort()),this._postMessage({command:e?"reset":"pr.initialize",params:{availableRemotes:U,defaultBaseRemote:i,defaultBaseBranch:this._pullRequestDefaults.base,defaultCompareRemote:o,defaultCompareBranch:(r=this.compareBranch.name)!=null?r:"",branchesForRemote:E,branchesForCompare:z,defaultTitle:k,defaultDescription:P,compareBranch:(n=this.compareBranch.name)!=null?n:"",isDraft:!1}})}async changeRemote(e,r){var n;const{owner:i,repositoryName:a}=e.args,o=this._folderRepositoryManager.findRepo(k=>i===k.remote.owner&&a===k.remote.repositoryName);if(!o)throw new Error("No matching GitHub repository found.");const m=await o.getDefaultBranch(),E=await this._folderRepositoryManager.listBranches(i,a);if(!r&&((n=this.compareBranch)==null?void 0:n.name)&&!E.includes(this.compareBranch.name)&&(E.push(this.compareBranch.name),E.sort()),r)this._onDidChangeBaseRemote.fire({owner:i,repositoryName:a}),this._onDidChangeBaseBranch.fire(m);else{const k=this.compareRemote;this.compareRemote={owner:i,repositoryName:a},k&&(this.compareRemote.repositoryName!==k.repositoryName||this.compareRemote.owner!==k.owner)&&(this.compareBranch=await this._folderRepositoryManager.repository.getBranch(m))}return this._replyMessage(e,{branches:E,defaultBranch:r?m:this.compareBranch})}async create(e){var r,n;try{let i,a;if(!((r=this.compareBranch)==null?void 0:r.name)){this._throwError(e,"Please create a branch.");return}if(this.compareBranch.type===ht.RemoteHead){const k=this.compareBranch.name.indexOf("/");i=this.compareBranch.name.substring(k+1),a=this.compareBranch.name.substring(0,k)}else i=this.compareBranch.name,a=(n=this.compareBranch.upstream)==null?void 0:n.remote;if(!a)if(await u.window.showInformationMessage(`There is no upstream branch for '${i}'.

Do you want to publish it and then create the pull request?`,{modal:!0},"Publish branch")==="Publish branch"){let P;this._folderRepositoryManager.repository.state.remotes.length===1?P=this._folderRepositoryManager.repository.state.remotes[0].name:this._folderRepositoryManager.repository.state.remotes.length>1&&(P=await u.window.showQuickPick(this._folderRepositoryManager.repository.state.remotes.map(U=>U.name),{placeHolder:"Remote to push to"})),P?await this._folderRepositoryManager.repository.push(P,i,!0):this._throwError(e,"The current repository has no remotes to push to. Please set up a remote and try again."),this._folderRepositoryManager.repository.state.HEAD&&(a=P)}else{this._throwError(e,"No upstream for the compare branch.");return}const o=this._folderRepositoryManager.findRepo(js(a));if(!o)throw new Error(`Unable to find GitHub repository matching '${a}'. You can add '${a}' to the setting "githubPullRequests.remotes" to ensure '${a}' is found.`);const m=`${o.remote.owner}:${i}`,E=await this._folderRepositoryManager.createPullRequest({...e.args,head:m});E?(await this._replyMessage(e,{}),await vn.associateBranchWithPullRequest(this._folderRepositoryManager.repository,E,i),this._onDone.fire(E)):this._throwError(e,"There must be a difference in commits to create a pull request.")}catch(i){this._throwError(e,i.message)}}async _onDidReceiveMessage(e){var r;if(await super._onDidReceiveMessage(e)===this.MESSAGE_UNHANDLED)switch(e.command){case"pr.cancelCreate":return u.commands.executeCommand("setContext","github:createPullRequest",!1),this._onDone.fire(void 0),this._replyMessage(e,void 0);case"pr.create":return this.create(e);case"pr.changeBaseRemote":return this.changeRemote(e,!0);case"pr.changeBaseBranch":return this._onDidChangeBaseBranch.fire(e.args),this._replyMessage(e,void 0);case"pr.changeCompareRemote":return this.changeRemote(e,!1);case"pr.changeCompareBranch":return this.compareBranch=await this._folderRepositoryManager.repository.getBranch((r=e.args.name)!=null?r:e.args),this._replyMessage(e,void 0);default:u.window.showErrorMessage("Unsupported webview message")}}_getHtmlForWebview(){const e=Dc(),r=u.Uri.joinPath(this._extensionUri,"dist","webview-create-pr-view.js");return`<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src vscode-resource: https:; script-src 'nonce-${e}'; style-src vscode-resource: 'unsafe-inline' http: https: data:;">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<title>Create Pull Request</title>
	</head>
	<body>
		<div id="app"></div>
		<script nonce="${e}" src="${this._webview.asWebviewUri(r).toString()}"></script>
	</body>
</html>`}}var pg=Object.defineProperty,Vc=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?pg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class mg{constructor(){Vc(this,"fileViewedState",new Map),Vc(this,"_onDidChangeFileDecorations",new u.EventEmitter),Vc(this,"onDidChangeFileDecorations",this._onDidChangeFileDecorations.event)}updateFileViewedState(e,r,n,i){this.fileViewedState.set(`${r}:${n}`,i),this._onDidChangeFileDecorations.fire(e)}provideFileDecoration(e,r){if(e.scheme!=="filechange"&&e.scheme!==ii)return;const n=Li(e);if(n){const i=`${n.prNumber}:${n.fileName}`;if(this.fileViewedState.get(i)===Rr.VIEWED)return{propagate:!1,badge:"\u2713",tooltip:"Viewed"}}}}const jc=new mg;var fg=Object.defineProperty,zc=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?fg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class gg{constructor(){zc(this,"fileHasComments",new Map),zc(this,"_onDidChangeFileDecorations",new u.EventEmitter),zc(this,"onDidChangeFileDecorations",this._onDidChangeFileDecorations.event)}updateFileComments(e,r,n,i){const a=`${r}:${n}`;this.fileHasComments.get(a)!==i&&(this.fileHasComments.set(`${r}:${n}`,i),this._onDidChangeFileDecorations.fire(e))}provideFileDecoration(e,r){const n=Li(e);if(n){const i=`${n.prNumber}:${n.fileName}`;if(this.fileHasComments.get(i))return{propagate:!1,tooltip:"Commented",badge:"\u{1F4AC}"}}}}const Yh=new gg;var vg=Object.defineProperty,xu=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?vg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Dr{constructor(){xu(this,"childrenDisposables"),xu(this,"parent"),xu(this,"label"),xu(this,"accessibilityInformation")}getParent(){if(this.parent instanceof Dr)return this.parent}async reveal(e,r){try{await this.parent.reveal(e||this,r)}catch(n){C.appendLine(n,"TreeNode")}}refresh(e){return this.parent.refresh(e)}async getChildren(){return[]}dispose(){this.childrenDisposables&&(this.childrenDisposables.forEach(e=>e.dispose()),this.childrenDisposables=[])}}var yg=Object.defineProperty,Wt=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?yg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);function Xh(t){const e=u.window.activeTextEditor,r={preserveFocus:!0,viewColumn:u.ViewColumn.Active};return e&&e.document.uri.path===t.path&&(r.selection=e.selection),{command:"vscode.open",arguments:[t,r],title:"Open File"}}async function Qc(t,e,r,n,i){let a=await ea(e,t.repository)||e,o=await ea(r,t.repository)||r;(a.scheme==="data"||o.scheme==="data")&&(i===Ye.ADD&&(a=po),i===Ye.DELETE&&(o=po));const m=r.path.split("/");return{command:"vscode.diff",arguments:[a,o,`${m[m.length-1]} (Pull Request)`,n],title:"Open Changed File in PR"}}class Ya extends Dr{constructor(e,r,n,i,a,o,m,E){super();this.parent=e,this.pullRequest=r,this.status=n,this.fileName=i,this.previousFileName=a,this.blobUrl=o,this.filePath=m,this.parentFilePath=E,Wt(this,"description"),Wt(this,"iconPath"),Wt(this,"command"),Wt(this,"resourceUri"),Wt(this,"contextValue"),Wt(this,"childrenDisposables",[]),Wt(this,"_viewed");var k;const P=(k=this.pullRequest.fileChangeViewedState[i])!=null?k:Rr.UNVIEWED;this.contextValue=`filechange:${Ye[n]}:${P===Rr.VIEWED?"viewed":"unviewed"}`,this.label=L.basename(i),this.description=u.workspace.asRelativePath(L.dirname(i),!1),this.description==="."&&(this.description=""),this.iconPath=u.ThemeIcon.File,this.resourceUri=wt(u.Uri.parse(this.blobUrl),r.number,i,n),this.updateViewed(P),this.command={command:"pr.openFileOnGitHub",title:"Open File on GitHub",arguments:[this]},this.childrenDisposables.push(this.pullRequest.onDidChangeFileViewedState(U=>{const z=U.changed.find(le=>le.fileName===this.fileName);z&&(this.updateViewed(z.viewed),this.refresh(this))})),this.accessibilityInformation={label:`View diffs and comments for file ${this.label}`,role:"link"}}updateViewed(e){this._viewed!==e&&(this._viewed=e,this.contextValue=`filechange:${Ye[this.status]}:${e===Rr.VIEWED?"viewed":"unviewed"}`,jc.updateFileViewedState(this.resourceUri,this.pullRequest.number,this.fileName,e))}getTreeItem(){return this}}class Jh extends Dr{constructor(e,r,n,i,a,o,m,E,k,P){super();this.parent=e,this.pullRequest=r,this.status=n,this.fileName=i,this.blobUrl=a,this.filePath=o,this.parentFilePath=m,this.diffHunks=E,this.comments=k,this.sha=P,Wt(this,"description"),Wt(this,"iconPath"),Wt(this,"resourceUri"),Wt(this,"parentSha"),Wt(this,"contextValue"),Wt(this,"command"),Wt(this,"opts"),Wt(this,"childrenDisposables",[]),Wt(this,"_viewed");var U;const z=(U=this.pullRequest.fileChangeViewedState[i])!=null?U:Rr.UNVIEWED;this.contextValue=`filechange:${Ye[n]}:${z===Rr.VIEWED?"viewed":"unviewed"}`,this.label=L.basename(i),this.description=u.workspace.asRelativePath(L.dirname(i),!1),this.description==="."&&(this.description=""),this.iconPath=u.ThemeIcon.File,this.opts={preserveFocus:!0},this.updateShowOptions(),this.resourceUri=wt(u.Uri.file(this.fileName),this.pullRequest.number,this.fileName,this.status),this.updateViewed(z),this.childrenDisposables.push(this.pullRequest.onDidChangeReviewThreads(le=>{[...le.added,...le.removed].some(ce=>ce.path===this.fileName)&&this.updateShowOptions()})),this.childrenDisposables.push(this.pullRequest.onDidChangeFileViewedState(le=>{const ce=le.changed.find(me=>me.fileName===this.fileName);ce&&(this.updateViewed(ce.viewed),this.refresh(this))})),this.accessibilityInformation={label:`View diffs and comments for file ${this.label}`,role:"link"}}updateViewed(e){this._viewed!==e&&(this._viewed=e,this.contextValue=`filechange:${Ye[this.status]}:${e===Rr.VIEWED?"viewed":"unviewed"}`,jc.updateFileViewedState(this.resourceUri,this.pullRequest.number,this.fileName,e))}updateShowOptions(){const e=this.pullRequest.reviewThreadsCache,n=(fe(e,i=>i.path)[this.fileName]||[]).filter(i=>!i.isOutdated);Yh.updateFileComments(this.resourceUri,this.pullRequest.number,this.fileName,n.length>0),n.length?(n.sort((i,a)=>i.line-a.line),this.opts.selection=new u.Range(n[0].line,0,n[0].line,0)):delete this.opts.selection}getTreeItem(){return this}openFileCommand(){return Xh(this.filePath)}async openDiff(e){var r;const n=await Qc(e,this.parentFilePath,this.filePath,this.opts,this.status);u.commands.executeCommand(n.command,...(r=n.arguments)!=null?r:[])}}class Mu extends Jh{constructor(e,r,n,i,a,o,m,E,k,P,U,z,le,ce){super(r,n,i,a,m,E,k,z,le,ce);this.folderRepositoryManager=e,this.parent=r,this.pullRequest=n,this.status=i,this.fileName=a,this.previousFileName=o,this.blobUrl=m,this.filePath=E,this.parentFilePath=k,this.isPartial=P,this.patch=U,this.diffHunks=z,this.comments=le,this.sha=ce}getTreeItem(){return this}async resolve(){this.command=await Qc(this.folderRepositoryManager,this.parentFilePath,this.filePath,void 0,this.status)}}class Ws extends Jh{constructor(e,r,n,i,a,o,m,E,k,P=[],U,z){super(e,n,i,a,o,m,E,k,P,U);this.parent=e,this.pullRequestManager=r,this.pullRequest=n,this.status=i,this.fileName=a,this.blobUrl=o,this.filePath=m,this.parentFilePath=E,this.diffHunks=k,this.comments=P,this.sha=U,this.isCurrent=z,Wt(this,"_useViewChangesCommand",!1)}useViewChangesCommand(){this._useViewChangesCommand=!0}async alternateCommand(){if(this.status===Ye.DELETE||this.status===Ye.ADD){const le=this.parentFilePath.with({query:JSON.stringify({path:null,commit:null})});return{command:"vscode.diff",arguments:this.status===Ye.DELETE?[this.parentFilePath,le,`${this.fileName}`,{preserveFocus:!0}]:[le,this.parentFilePath,`${this.fileName}`,{preserveFocus:!0}],title:"Open Diff"}}const{path:e,ref:r,commit:n,rootPath:i}=li(this.filePath.query),a=`${n}^`,o={path:e,ref:r,commit:a,base:!0,isOutdated:!0,rootPath:i},m=this.filePath.with({query:JSON.stringify(o)});let E=this.filePath;this.isCurrent&&(E=this.pullRequestManager.repository.rootUri.with({path:L.posix.join(o.rootPath,o.path)}));const k={preserveFocus:!0},P=this.pullRequest.reviewThreadsCache,z=(fe(P,le=>le.path)[this.fileName]||[]).filter(le=>le.isOutdated).sort((le,ce)=>le.line-ce.line);return z.length&&(k.selection=new u.Range(z[0].originalLine,0,z[0].originalLine,0)),{command:"vscode.diff",arguments:[m,E,`${this.fileName} from ${(n||"").substr(0,8)}`,k],title:"View Changes"}}async resolve(){this._useViewChangesCommand?this.command=await this.alternateCommand():u.workspace.getConfiguration().get("git.openDiffOnClick",!0)?this.command=await Qc(this.pullRequestManager,this.parentFilePath,this.filePath,this.opts,this.status):this.command=this.openFileCommand()}}class bg extends Dr{constructor(e,r,n,i,a,o){super();this.parent=e,this.fileName=r,this.previousFileName=n,this.status=i,this.baseBranch=a,this.headBranch=o,Wt(this,"description"),Wt(this,"iconPath"),Wt(this,"resourceUri"),Wt(this,"command"),this.label=r,this.iconPath=u.ThemeIcon.File,this.resourceUri=u.Uri.file(r).with({scheme:ii,query:JSON.stringify({status:i,fileName:r})});let m=u.Uri.file(r).with({scheme:ii,query:JSON.stringify({fileName:r,branch:a})}),E=u.Uri.file(r).with({scheme:ii,query:JSON.stringify({fileName:r,branch:o})});switch(i){case Ye.ADD:m=u.Uri.file(r).with({scheme:ii,query:JSON.stringify({fileName:r,branch:a,isEmpty:!0})});break;case Ye.RENAME:m=u.Uri.file(n).with({scheme:ii,query:JSON.stringify({fileName:n,branch:a,isEmpty:!0})});break;case Ye.DELETE:E=u.Uri.file(r).with({scheme:ii,query:JSON.stringify({fileName:r,branch:o,isEmpty:!0})});break}this.command={title:"Open Diff",command:"vscode.diff",arguments:[m,E,`${r} (Pull Request Preview)`]}}getTreeItem(){return this}}function Wc(t){return t.filter(e=>e instanceof Ws)}var _g=Object.defineProperty,Ks=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?_g(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const ii="githubpr";class wg{constructor(e,r,n,i,a,o,m){this.repository=e,this.baseOwner=r,this.baseBranchName=n,this._compareOwner=i,this.compareBranchName=a,this.compareHasUpstream=o,this.folderRepoManager=m,Ks(this,"_view"),Ks(this,"_onDidChangeTreeData",new u.EventEmitter),Ks(this,"onDidChangeTreeData",this._onDidChangeTreeData.event),Ks(this,"_contentProvider"),Ks(this,"_disposables",[]),Ks(this,"_gitHubRepository"),this._view=u.window.createTreeView("github:compareChanges",{treeDataProvider:this}),this._gitHubRepository=this.folderRepoManager.gitHubRepositories.find(E=>E.remote.owner===this._compareOwner),this._disposables.push(this._view)}get view(){return this._view}updateBaseBranch(e){this.baseBranchName=e,this._onDidChangeTreeData.fire()}updateBaseOwner(e){this.baseOwner=e,this._onDidChangeTreeData.fire()}async reveal(e,r){return this._view.reveal(e,r)}refresh(){this._onDidChangeTreeData.fire()}async updateHasUpstream(e){var r;if(((r=this.repository.state.HEAD)==null?void 0:r.name)===e){const n=await this.repository.getBranch(e);this.compareHasUpstream=!!n.upstream}else this.compareHasUpstream=!0}async updateCompareBranch(e){await this.updateHasUpstream(e),this.compareBranchName=e,this._onDidChangeTreeData.fire()}get compareOwner(){return this._compareOwner}set compareOwner(e){this._gitHubRepository=this.folderRepoManager.gitHubRepositories.find(r=>r.remote.owner===e),this._contentProvider&&this._gitHubRepository&&(this._contentProvider.gitHubRepository=this._gitHubRepository),this._compareOwner=e,this._onDidChangeTreeData.fire()}getTreeItem(e){return e.getTreeItem()}async getChildren(){if(this.compareHasUpstream)u.commands.executeCommand("setContext","github:noUpstream",!1);else return u.commands.executeCommand("setContext","github:noUpstream",!0),this._view.message=void 0,[];if(!this._gitHubRepository)return[];this._contentProvider||(this._contentProvider=new Eg(this._gitHubRepository),this._disposables.push(u.workspace.registerTextDocumentContentProvider(ii,this._contentProvider)));const{octokit:e,remote:r}=await this._gitHubRepository.ensure();try{const{data:n}=await e.repos.compareCommits({repo:r.repositoryName,owner:r.owner,base:`${this.baseOwner}:${this.baseBranchName}`,head:`${this.compareOwner}:${this.compareBranchName}`});return n.files.length?this._view.message=void 0:this._view.message=`There are no commits between the base '${this.baseBranchName}' branch and the comparing '${this.compareBranchName}' branch`,n.files.map(i=>new bg(this,i.filename,i.previous_filename,ms(i.status),n.merge_base_commit.sha,this.compareBranchName))}catch(n){return C.appendLine(`Comparing changes failed: ${n}`),[]}}dispose(){this._disposables.forEach(e=>e.dispose()),this._contentProvider=void 0}}class Eg{constructor(e){this.gitHubRepository=e}async provideTextDocumentContent(e,r){var n;const i=Hu(e);if(!i||i.isEmpty)return"";const{octokit:a,remote:o}=await this.gitHubRepository.ensure(),m=await a.repos.getContent({owner:o.owner,repo:o.repositoryName,path:i.fileName,ref:i.branch}),E=(n=m.data.content)!=null?n:"";return vo.Buffer.from(E,m.data.encoding).toString()}}var kg=Object.defineProperty,Xa=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?kg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Sg{constructor(e){this.repository=e,Xa(this,"_disposables",[]),Xa(this,"_createPRViewProvider"),Xa(this,"_treeView"),Xa(this,"_onDidCreate",new u.EventEmitter),Xa(this,"onDidCreate",this._onDidCreate.event)}registerListeners(e){this._disposables.push(this._createPRViewProvider.onDone(async r=>{var n,i;u.commands.executeCommand("setContext","github:createPullRequest",!1),(n=this._createPRViewProvider)==null||n.dispose(),this._createPRViewProvider=void 0,(i=this._treeView)==null||i.dispose(),this._treeView=void 0,this._disposables.forEach(a=>a.dispose()),r&&this._onDidCreate.fire(r)})),this._disposables.push(this._createPRViewProvider.onDidChangeCompareBranch(r=>{var n;(n=this._treeView)==null||n.updateCompareBranch(r)})),this._disposables.push(this._createPRViewProvider.onDidChangeCompareRemote(r=>{this._treeView&&(this._treeView.compareOwner=r.owner)})),this._disposables.push(this._createPRViewProvider.onDidChangeBaseBranch(r=>{var n;(n=this._treeView)==null||n.updateBaseBranch(r)})),this._disposables.push(this._createPRViewProvider.onDidChangeBaseRemote(r=>{var n;(n=this._treeView)==null||n.updateBaseOwner(r.owner)})),e&&this._disposables.push(this.repository.state.onDidChange(r=>{this._createPRViewProvider&&this.repository.state.HEAD&&(this._createPRViewProvider.compareBranch=this.repository.state.HEAD)}))}get isCreatingPullRequest(){return!!this._createPRViewProvider}async ensureDefaultsAreLocal(e,r){if(e.gitHubRepositories.some(n=>n.remote.owner===r.owner&&n.remote.repositoryName===r.repo))return r;{const n=await e.getOrigin(),i=await e.getMetadata(n.remote.remoteName);return{owner:i.owner.login,repo:i.name,base:i.default_branch}}}async create(e,r,n){var i;await r.loginAndUpdate(),u.commands.executeCommand("setContext","github:createPullRequest",!0);const a=(i=n?await r.repository.getBranch(n):void 0)!=null?i:r.repository.state.HEAD;if(!this._createPRViewProvider){const o=await this.ensureDefaultsAreLocal(r,await r.getPullRequestDefaults(a));this._createPRViewProvider=new hg(e,r,o,a);const m=await r.getOrigin(a);this._treeView=new wg(this.repository,o.owner,o.base,m.remote.owner,a.name,!!a.upstream,r),this.registerListeners(!n),this._disposables.push(u.window.registerWebviewViewProvider(this._createPRViewProvider.viewType,this._createPRViewProvider))}this._createPRViewProvider.show(a)}}var Tg=Object.defineProperty,Zh=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Tg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class ep{constructor(e,r,n,i,a=`${e}:${r}`){this.owner=e,this.name=r,this.description=n,this.remote=i,this.label=a,Zh(this,"detail"),Zh(this,"picked")}static fromRemote(e){return new this(e.owner,e.repositoryName,e.url,e)}}function Ja(t){return t===void 0||t===0?0:t-1}function hy(t,e){for(let r=0;r<t.length;r++){const n=t[r];for(let i=0;i<n.diffLines.length;i++)if(n.diffLines[i].positionInHunk===e)return n.diffLines[i]}}function Kc(t,e){const r=qi(t);let n=r.next(),i=0;for(;!n.done;){const a=n.value;if(!(a.oldLineNumber>e))if(a.oldLineNumber+a.oldLength-1<e)i+=a.newLength-a.oldLength;else return i+=a.newLength-a.oldLength,e+i;n=r.next()}return e+i}function Yc(t,e){const r=qi(t);let n=r.next(),i=0;for(;!n.done;){const a=n.value;if(!(a.newLineNumber>e))if(a.newLineNumber+a.newLength-1<e)i+=a.oldLength-a.newLength;else return i+=a.oldLength-a.newLength,e+i;n=r.next()}return e+i}function tp(t,e){const r=[];for(let n=0;n<t.length;n++){const i=t[n];let a,o;if(e){let m;for(let E=0;E<i.diffLines.length;E++){const k=i.diffLines[E];k.type===vr.Delete?(a!==void 0||(a=Ja(k.oldLineNumber)),m=Ja(k.oldLineNumber)):a!==void 0&&m!==void 0&&(r.push(new u.Range(a,0,m,0)),a=void 0,m=void 0)}a!==void 0&&m!==void 0&&(r.push(new u.Range(a,0,m,0)),a=void 0,m=void 0)}else i.newLineNumber&&(a=Ja(i.newLineNumber),o=Ja(i.newLength),r.push(new u.Range(a,0,a+o,0)))}return r}var Rg=Object.defineProperty,Mn=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Rg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Cg{constructor(e,r,n,i,a){this._reviewManager=e,this._reposManager=r,this._repository=n,this._localFileChanges=i,this._sessionState=a,Mn(this,"_localToDispose",[]),Mn(this,"_onDidChangeComments",new u.EventEmitter),Mn(this,"onDidChangeComments",this._onDidChangeComments.event),Mn(this,"_commentHandlerId"),Mn(this,"_commentController"),Mn(this,"_workspaceFileChangeCommentThreads",{}),Mn(this,"_reviewSchemeFileChangeCommentThreads",{}),Mn(this,"_obsoleteFileChangeCommentThreads",{}),Mn(this,"_visibleNormalTextEditors",[]),Mn(this,"_pendingCommentThreadAdds",[]),this._commentController=u.comments.createCommentController(`github-review-${r.activePullRequest.number}`,r.activePullRequest.title),this._commentController.commentingRangeProvider=this,this._commentController.reactionHandler=this.toggleReaction.bind(this),this._localToDispose.push(this._commentController),this._commentHandlerId=Th(),Mi(this._commentHandlerId,this)}get commentController(){return this._commentController}async initialize(){this._visibleNormalTextEditors=u.window.visibleTextEditors.filter(e=>e.document.uri.scheme!=="comment"),await this._reposManager.activePullRequest.validateDraftMode(),await this.initializeCommentThreads(),await this.registerListeners()}createOutdatedCommentThread(e,r){const n=r.comments[0].originalCommitId,i=u.Uri.file(L.join(`commit~${n.substr(0,8)}`,e)),a=Yr(i,e,void 0,n,!0,{base:r.diffSide===Ct.LEFT},this._repository.rootUri),o=new u.Range(new u.Position(r.originalLine-1,0),new u.Position(r.originalLine-1,0));return Ka(a,o,r,this._commentController)}async createWorkspaceCommentThread(e,r,n){let i=n.line;const a=await this._repository.diffWithHEAD(r);a&&(i=Kc(a,n.line));const o=new u.Range(new u.Position(i-1,0),new u.Position(i-1,0));return Ka(e,o,n,this._commentController)}createReviewCommentThread(e,r,n){var i;if(!((i=this._reposManager.activePullRequest)==null?void 0:i.mergeBase))throw new Error("Cannot create review comment thread without an active pull request base.");const a=Yr(e,r,void 0,this._reposManager.activePullRequest.mergeBase,!1,{base:!0},this._repository.rootUri),o=new u.Range(new u.Position(n.line-1,0),new u.Position(n.line-1,0));return Ka(a,o,n,this._commentController)}async initializeCommentThreads(){if(!this._reposManager.activePullRequest||!this._reposManager.activePullRequest.isResolved())return;const e=this._reposManager.activePullRequest.reviewThreadsCache,r=fe(e,n=>n.path);Object.keys(r).forEach(n=>{const i=r[n],a=i[0];if(a){const o=L.join(this._repository.rootUri.path,a.path).replace(/\\/g,"/"),m=this._repository.rootUri.with({path:o});let E=[],k=[],P=[];const U=i.map(async z=>{z.isOutdated?P.push(this.createOutdatedCommentThread(n,z)):z.diffSide===Ct.RIGHT?E.push(await this.createWorkspaceCommentThread(m,n,z)):k.push(this.createReviewCommentThread(m,n,z))});Promise.all(U),this._workspaceFileChangeCommentThreads[n]=E,this._reviewSchemeFileChangeCommentThreads[n]=k,this._obsoleteFileChangeCommentThreads[n]=P}})}async registerListeners(){this._localToDispose.push(this._reposManager.activePullRequest.onDidChangePendingReviewState(e=>{[this._workspaceFileChangeCommentThreads,this._obsoleteFileChangeCommentThreads,this._reviewSchemeFileChangeCommentThreads].forEach(r=>{for(const n in r)r[n].forEach(i=>{$h(i,e),zs(i)})})})),this._localToDispose.push(this._reposManager.activePullRequest.onDidChangeReviewThreads(e=>{e.added.forEach(async r=>{const{path:n}=r,i=this._pendingCommentThreadAdds.findIndex(async m=>{const E=this.gitRelativeRootPath(m.uri.path);if(E!==r.path)return!1;const k=await this.getContentDiff(m.uri,E);return Yc(k,m.range.start.line)+1===r.line});let a;if(i>-1)a=this._pendingCommentThreadAdds[i],a.gitHubThreadId=r.id,a.comments=r.comments.map(m=>new sr(m,a)),this._pendingCommentThreadAdds.splice(i,1);else{const m=L.join(this._repository.rootUri.path,n).replace(/\\/g,"/"),E=this._repository.rootUri.with({path:m});r.isOutdated?a=this.createOutdatedCommentThread(n,r):r.diffSide===Ct.RIGHT?a=await this.createWorkspaceCommentThread(E,n,r):a=this.createReviewCommentThread(E,n,r)}const o=r.isOutdated?this._obsoleteFileChangeCommentThreads:r.diffSide===Ct.RIGHT?this._workspaceFileChangeCommentThreads:this._reviewSchemeFileChangeCommentThreads;o[n]?o[n].push(a):o[n]=[a]}),e.changed.forEach(r=>{const n=r.isOutdated?this._obsoleteFileChangeCommentThreads:r.diffSide===Ct.RIGHT?this._workspaceFileChangeCommentThreads:this._reviewSchemeFileChangeCommentThreads,i=n[r.path].findIndex(a=>a.gitHubThreadId===r.id);if(i>-1){const a=n[r.path][i];Pu(a,r)}}),e.removed.forEach(r=>{const n=r.isOutdated?this._obsoleteFileChangeCommentThreads:r.diffSide===Ct.RIGHT?this._workspaceFileChangeCommentThreads:this._reviewSchemeFileChangeCommentThreads,i=n[r.path].findIndex(a=>a.gitHubThreadId===r.id);if(i>-1){const a=n[r.path][i];n[r.path].splice(i,1),a.dispose()}})})),this._localToDispose.push(this._sessionState.onDidChangeCommentsExpandState(e=>{this.updateCommentExpandState(e)}))}updateCommentExpandState(e){if(!this._reposManager.activePullRequest)return;function r(o,m){if(m.size!==0)for(const E of m.keys()){const k=m.get(E),P=o[E];for(const U of P){const z=k.get(U.gitHubThreadId);Pu(U,z,e)}}}const n=new Map,i=new Map,a=new Map;for(const o of this._reposManager.activePullRequest.reviewThreadsCache){let m;o.isOutdated?m=n:o.diffSide===Ct.RIGHT?m=a:m=i,m.has(o.path)||m.set(o.path,new Map),m.get(o.path).set(o.id,o)}r(this._obsoleteFileChangeCommentThreads,n),r(this._reviewSchemeFileChangeCommentThreads,i),r(this._workspaceFileChangeCommentThreads,a)}visibleEditorsEqual(e,r){if(e=e.filter(n=>n.document.uri.scheme!=="comment"),r=r.filter(n=>n.document.uri.scheme!=="comment"),e=ve(e,n=>n.document.uri.toString()),r=ve(r,n=>n.document.uri.toString()),e.length!==r.length)return!1;for(let n=0;n<e.length;n++)if(!r.find(a=>a.document.uri.toString()===e[n].document.uri.toString()))return!1;return!0}hasCommentThread(e){if(e.uri.scheme==="review")return!0;const r=u.workspace.getWorkspaceFolder(e.uri);return r?!!(e.uri.scheme===r.uri.scheme&&e.uri.fsPath.startsWith(this._repository.rootUri.fsPath)):!1}async provideCommentingRanges(e,r){let n=e.uri.query&&e.uri.query!==""?li(e.uri.query):void 0;if(n){const a=this.findMatchedFileChangeForReviewDiffView(this._localFileChanges,e.uri);if(a)return tp(a.diffHunks,n.base)}const i=u.workspace.getWorkspaceFolder(e.uri);if(!!i&&e.uri.scheme===i.uri.scheme){if(!this._reposManager.activePullRequest.isResolved())return;const a=this.gitRelativeRootPath(e.uri.path),o=Wc(this._localFileChanges).find(E=>E.fileName===a),m=[];if(o){const E=o.diffHunks;if(o.status===Ye.RENAME&&E.length===0)return[];const k=await this.getContentDiff(e.uri,o.fileName);for(let P=0;P<E.length;P++){const U=E[P],z=Kc(k,U.newLineNumber),le=Kc(k,U.newLineNumber+U.newLength-1);z>0&&le>0&&m.push(new u.Range(z-1,0,le-1,0))}}return m}}async getContentDiff(e,r){var n;const i=u.window.visibleTextEditors.find(a=>a.document.uri.toString()===e.toString());if(!((n=this._reposManager.activePullRequest)==null?void 0:n.head))throw new Error("Cannot get content diff without an active pull request head.");if(i&&i.document.isDirty){const a=i.document.getText(),m=(await this._repository.getObjectDetails(this._reposManager.activePullRequest.head.sha,r)).object,E=await this._repository.hashObject(a);return await this._repository.diffBlobs(m,E)}else return await this._repository.diffWith(this._reposManager.activePullRequest.head.sha,r)}findMatchedFileChangeForReviewDiffView(e,r){const n=li(r.query),i=e.filter(a=>{if(a instanceof Ya||a.fileName!==n.path)return!1;if(a.filePath.scheme!=="review"&&a.sha===n.commit)return!0;const o=a.filePath.query?JSON.parse(a.filePath.query):void 0;if(o&&o.commit===n.commit)return!0;const m=a.parentFilePath.query?JSON.parse(a.parentFilePath.query):void 0;return!!(m&&m.commit===n.commit)});if(i&&i.length)return i[0]}gitRelativeRootPath(e){return L.relative(this._repository.rootUri.path,e).replace(/\\/g,"/")}getCommentSide(e){return e.uri.scheme==="review"&&li(e.uri.query).base?Ct.LEFT:Ct.RIGHT}async startReview(e,r){const n=e.comments.length,i=this.optimisticallyAddComment(e,r,!0);try{if(n){const a=e.comments[0];if(a instanceof sr)await this._reposManager.activePullRequest.createCommentReply(r,a._rawComment.graphNodeId,!1);else throw new Error("Cannot reply to temporary comment")}else{const a=this.gitRelativeRootPath(e.uri.path),o=this.getCommentSide(e);this._pendingCommentThreadAdds.push(e);let m;if(o===Ct.RIGHT){const E=await this.getContentDiff(e.uri,a);m=Yc(E,e.range.start.line)}else m=e.range.start.line;await this._reposManager.activePullRequest.createReviewThread(r,a,m+1,o)}}catch(a){u.window.showErrorMessage(`Starting review failed: ${a}`),e.comments=e.comments.map(o=>(o instanceof Wr&&o.id===i&&(o.mode=u.CommentMode.Editing),o))}}async openReview(){await this._reviewManager.openDescription(),Zr.scrollToReview()}optimisticallyAddComment(e,r,n){const i=this._reposManager.getCurrentUser(this._reposManager.activePullRequest),a=new Wr(e,r,n,i);return this.updateCommentThreadComments(e,[...e.comments,a]),a.id}updateCommentThreadComments(e,r){e.comments=r,zs(e)}optimisticallyEditComment(e,r){const n=this._reposManager.getCurrentUser(this._reposManager.activePullRequest),i=new Wr(e,r.body instanceof u.MarkdownString?r.body.value:r.body,!!r.label,n,r);return e.comments=e.comments.map(a=>a instanceof sr&&a.commentId===r.commentId?i:a),i.id}async createOrReplyComment(e,r,n,i){var a;if(!this._reposManager.activePullRequest)throw new Error("Cannot create comment without an active pull request.");const o=e.comments.length,m=n?!1:i!==void 0?i:this._reposManager.activePullRequest.hasPendingReview,E=this.optimisticallyAddComment(e,r,m);try{if(o){const k=e.comments[0];if(k instanceof sr)await this._reposManager.activePullRequest.createCommentReply(r,k._rawComment.graphNodeId,n);else throw new Error("Cannot reply to temporary comment")}else{const k=this.gitRelativeRootPath(e.uri.path);this._pendingCommentThreadAdds.push(e);const P=this.getCommentSide(e);let U;if(P===Ct.RIGHT){const z=await this.getContentDiff(e.uri,k);U=Yc(z,e.range.start.line)}else U=e.range.start.line;await this._reposManager.activePullRequest.createReviewThread(r,k,U+1,P,n)}n&&await this._reposManager.activePullRequest.submitReview()}catch(k){((a=k.graphQLErrors)==null?void 0:a.length)&&k.graphQLErrors[0].type==="NOT_FOUND"?u.window.showWarningMessage("The comment that you're replying to was deleted. Refresh to update.","Refresh").then(P=>{P==="Refresh"&&this._reviewManager.updateComments()}):u.window.showErrorMessage(`Creating comment failed: ${k}`),e.comments=e.comments.map(P=>(P instanceof Wr&&P.id===E&&(P.mode=u.CommentMode.Editing),P))}}async createCommentOnResolve(e,r){if(!this._reposManager.activePullRequest)throw new Error("Cannot create comment on resolve without an active pull request.");const n=await this._reposManager.activePullRequest.getPendingReviewId();await this.createOrReplyComment(e,r,!n)}async resolveReviewThread(e,r){try{r&&await this.createCommentOnResolve(e,r),await this._reposManager.activePullRequest.resolveReviewThread(e.gitHubThreadId)}catch(n){u.window.showErrorMessage(`Resolving conversation failed: ${n}`)}}async unresolveReviewThread(e,r){try{r&&await this.createCommentOnResolve(e,r),await this._reposManager.activePullRequest.unresolveReviewThread(e.gitHubThreadId)}catch(n){u.window.showErrorMessage(`Unresolving conversation failed: ${n}`)}}async editComment(e,r){if(r instanceof sr){const n=this.optimisticallyEditComment(e,r);try{if(!this._reposManager.activePullRequest)throw new Error("Unable to find active pull request");await this._reposManager.activePullRequest.editReviewComment(r._rawComment,r.body instanceof u.MarkdownString?r.body.value:r.body)}catch(i){u.window.showErrorMessage(be(i)),e.comments=e.comments.map(a=>a instanceof Wr&&a.id===n?new sr(r._rawComment,e):a)}}else this.createOrReplyComment(e,r.body instanceof u.MarkdownString?r.body.value:r.body,!1)}async deleteComment(e,r){try{if(!this._reposManager.activePullRequest)throw new Error("Unable to find active pull request");r instanceof sr?await this._reposManager.activePullRequest.deleteReviewComment(r.commentId):e.comments=e.comments.filter(i=>!(i instanceof Wr&&i.id===r.id)),e.comments.length===0?e.dispose():zs(e);const n=await this._reposManager.activePullRequest.validateDraftMode();n!==this._reposManager.activePullRequest.hasPendingReview&&(this._reposManager.activePullRequest.hasPendingReview=n),this.update(this._localFileChanges)}catch(n){throw new Error(be(n))}}async update(e){await this._reposManager.activePullRequest.validateDraftMode(),this._localFileChanges=e}async toggleReaction(e,r){try{if(!this._reposManager.activePullRequest)throw new Error("Unable to find active pull request");e.reactions&&!e.reactions.find(n=>n.label===r.label&&!!n.authorHasReacted)?await this._reposManager.activePullRequest.addCommentReaction(e._rawComment.graphNodeId,r):await this._reposManager.activePullRequest.deleteCommentReaction(e._rawComment.graphNodeId,r)}catch(n){throw new Error(be(n))}}dispose(){this._commentController&&this._commentController.dispose(),Fi(this._commentHandlerId),this._localToDispose.forEach(e=>e.dispose())}}var Pg=Object.defineProperty,Kt=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Pg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const rp=class{constructor(t,e,r,n,i,a,o){this._context=t,this._repository=e,this._folderRepoManager=r,this._telemetry=n,this.changesInPrDataProvider=i,this._showPullRequest=a,this._sessionState=o,Kt(this,"_localToDispose",[]),Kt(this,"_disposables"),Kt(this,"_comments",[]),Kt(this,"_localFileChanges",[]),Kt(this,"_obsoleteFileChanges",[]),Kt(this,"_lastCommitSha"),Kt(this,"_updateMessageShown",!1),Kt(this,"_validateStatusInProgress"),Kt(this,"_reviewCommentController"),Kt(this,"_statusBarItem"),Kt(this,"_prNumber"),Kt(this,"_previousRepositoryState"),Kt(this,"_webviewViewProvider"),Kt(this,"_createPullRequestHelper"),Kt(this,"_switchingToReviewMode"),Kt(this,"justSwitchedToReviewMode",!1),Kt(this,"_isFirstLoad",!0),this._switchingToReviewMode=!1,this._disposables=[],this._previousRepositoryState={HEAD:e.state.HEAD,remotes:Us(this._repository)},this.registerListeners(),this.updateState(!0),this.pollForStatusChange()}get switchingToReviewMode(){return this._switchingToReviewMode}set switchingToReviewMode(t){this._switchingToReviewMode=t,t||this.updateState()}registerListeners(){this._disposables.push(this._repository.state.onDidChange(t=>{const e=this._previousRepositoryState.HEAD,r=this._repository.state.HEAD;if(!e&&!r)return;let n;!e||!r?n=!1:n=e.upstream?r.upstream&&e.upstream.name===r.upstream.name&&e.upstream.remote===r.upstream.remote:!r.upstream;const i=n&&e.ahead===r.ahead&&e.behind===r.behind&&e.commit===r.commit&&e.name===r.name&&e.remote===r.remote&&e.type===r.type,a=Us(this._repository),o=this._previousRepositoryState.remotes.length===a.length&&this._previousRepositoryState.remotes.every(m=>a.some(E=>m.equals(E)));(!i||!o)&&(this._previousRepositoryState={HEAD:this._repository.state.HEAD,remotes:a},this.updateState(!!this._folderRepoManager.gitHubRepositories.length))})),this._disposables.push(u.workspace.onDidChangeConfiguration(t=>{this.updateFocusedViewMode()})),this._disposables.push(this._folderRepoManager.onDidChangeActivePullRequest(t=>{this.updateFocusedViewMode()})),this._disposables.push(u.window.registerTerminalLinkProvider(new cg(this,this._folderRepoManager)))}get statusBarItem(){return this._statusBarItem||(this._statusBarItem=u.window.createStatusBarItem("github.pullrequest.status",u.StatusBarAlignment.Left),this._statusBarItem.name="GitHub Active Pull Request"),this._statusBarItem}get repository(){return this._repository}get localFileChanges(){return this._localFileChanges}pollForStatusChange(){setTimeout(async()=>{this._validateStatusInProgress||await this.updateComments(),this.pollForStatusChange()},1e3*60*5)}async checkBranchUpToDate(t){var e,r;const n=this._repository.state.HEAD;if(n){const i=n.upstream?n.upstream.remote:null;if(i&&(await this._repository.fetch(i,(e=this._repository.state.HEAD)==null?void 0:e.name),!this._context.globalState.get(Sc,!1)&&!this._updateMessageShown&&(this._lastCommitSha&&t.head.sha!==this._lastCommitSha||n.behind!==void 0&&n.behind>0))){this._updateMessageShown=!0;const o="Pull",m="Never show again";await u.window.showInformationMessage(`There are updates available for pull request ${t.number}: ${t.title}.`,{},o,m)===o?(((r=this._repository.state.HEAD)==null?void 0:r.name)===n.name&&await this._repository.pull(),this._updateMessageShown=!1):m&&await this._context.globalState.update(Sc,!0)}}}async updateState(t=!1,e=!0){if(!this.switchingToReviewMode)return this._validateStatusInProgress?(C.appendLine("Review> Queuing additional validate state"),this._validateStatusInProgress=this._validateStatusInProgress.then(async r=>await this.validateStatueAndSetContext(t,e)),this._validateStatusInProgress):(C.appendLine("Review> Validate state in progress"),this._validateStatusInProgress=this.validateStatueAndSetContext(t,e),this._validateStatusInProgress)}async validateStatueAndSetContext(t,e){await this.validateState(t,e),await u.commands.executeCommand("setContext","github:stateValidated",!0)}async validateState(t,e){if(C.appendLine("Review> Validating state..."),await this._folderRepoManager.updateRepositories(t),!this._repository.state.HEAD){this.clear(!0);return}const r=this._repository.state.HEAD;let n=await this._folderRepoManager.getMatchingPullRequestMetadataForBranch();if(!n){C.appendLine(`Review> no matching pull request metadata found for current branch ${r.name}`);const P=await this._folderRepoManager.getMatchingPullRequestMetadataFromGitHub();P&&(vn.associateBranchWithPullRequest(this._repository,P.model,r.name),n=P)}if(!n){C.appendLine(`Review> no matching pull request metadata found on GitHub for current branch ${r.name}`),this.clear(!0);return}const i=r.commit!==this._lastCommitSha&&r.ahead===0&&r.behind===0;if(this._prNumber===n.prNumber&&!i){u.commands.executeCommand("pr.refreshList");return}if(!(r.upstream?r.upstream.remote:null)){C.appendLine(`Review> current branch ${this._repository.state.HEAD.name} hasn't setup remote yet`),this.clear(!0);return}C.appendLine(`Review> current branch ${this._repository.state.HEAD.name} is associated with pull request #${n.prNumber}`),this.clear(!1),this._prNumber=n.prNumber,this._lastCommitSha=void 0;const{owner:o,repositoryName:m}=n;C.appendLine("Review> Resolving pull request");const E=await this._folderRepoManager.resolvePullRequest(o,m,n.prNumber);if(!E||!E.isResolved()){this._prNumber=void 0,C.appendLine("Review> This PR is no longer valid");return}if(E.isClosed){this.clear(!0),C.appendLine("Review> This PR is closed");return}this._folderRepoManager.activePullRequest=E,this._lastCommitSha=E.head.sha,this._isFirstLoad&&(this._isFirstLoad=!1,this.checkBranchUpToDate(E)),C.appendLine("Review> Fetching pull request data"),await this.getPullRequestData(E),await this.changesInPrDataProvider.addPrToView(this._folderRepoManager,E,this._localFileChanges,this._comments,this.justSwitchedToReviewMode),this.justSwitchedToReviewMode=!1,C.appendLine("Review> register comments provider"),await this.registerCommentController();const k=this._context.workspaceState.get(ci);if(this._webviewViewProvider?this._webviewViewProvider.updatePullRequest(E):(this._webviewViewProvider=new lg(this._context.extensionUri,this._folderRepoManager,E),this._context.subscriptions.push(u.window.registerWebviewViewProvider(this._webviewViewProvider.viewType,this._webviewViewProvider)),this._context.subscriptions.push(u.commands.registerCommand("pr.refreshActivePullRequest",P=>{var U;(U=this._webviewViewProvider)==null||U.refresh()}))),this.statusBarItem.text=`$(git-pull-request) Pull Request #${this._prNumber}`,this.statusBarItem.command={command:"pr.openDescription",title:"View Pull Request Description",arguments:[E]},C.appendLine("Review> display pull request status bar indicator and refresh pull request tree view."),this.statusBarItem.show(),u.commands.executeCommand("pr.refreshList"),C.appendLine(`Review> using focus mode = ${k}.`),C.appendLine(`Review> state validation silent = ${t}.`),C.appendLine(`Review> PR show should show = ${this._showPullRequest.shouldShow}.`),(!t||this._showPullRequest.shouldShow)&&k)this._doFocusShow(e);else if(!this._showPullRequest.shouldShow&&k){const P=this._showPullRequest.onChangedShowValue(U=>{C.appendLine(`Review> PR show value changed = ${U}.`),U&&this._doFocusShow(e),P.dispose()});this._localToDispose.push(P)}this._validateStatusInProgress=void 0}_doFocusShow(t){var e;if((e=this._webviewViewProvider)==null||e.show(),t&&this.localFileChanges.length>0){let r;for(const n of this.localFileChanges)if(n.status===Ye.MODIFY){r=n;break}r=r!=null?r:this.localFileChanges[0],r.openDiff(this._folderRepoManager)}}async updateComments(){const t=this._repository.state.HEAD;if(!t)return;const e=await this._folderRepoManager.getMatchingPullRequestMetadataForBranch();if(!e||!(t.upstream?t.upstream.remote:null)||this._prNumber===void 0||!this._folderRepoManager.activePullRequest)return;const n=await this._folderRepoManager.resolvePullRequest(e.owner,e.repositoryName,this._prNumber);if(!n||!n.isResolved()){C.appendLine("Review> This PR is no longer valid");return}return await this.checkBranchUpToDate(n),await this.getPullRequestData(n),await this._reviewCommentController.update(this._localFileChanges),Promise.resolve(void 0)}async getLocalChangeNodes(t,e,r){const n=[],i=t.mergeBase||t.base.sha,a=t.head.sha;for(let o=0;o<e.length;o++){const m=e[o];let E=[];if(m instanceof di)E=m.diffHunks;else if(m.status!==Ye.RENAME)try{const ce=await this._repository.diffBetween(t.base.sha,t.head.sha,m.fileName);E=na(ce)}catch(ce){C.appendLine(`Failed to parse patch for outdated comments: ${ce}`)}const k=L.join(this._repository.rootUri.path,m.fileName).replace(/\\/g,"/"),P=this._repository.rootUri.with({path:k}),U=m.status===Ye.DELETE?Yr(P,void 0,void 0,"",!1,{base:!1},this._repository.rootUri):P,z=Yr(P,m.status===Ye.RENAME?m.previousFileName:m.fileName,void 0,m.status===Ye.ADD?"":i,!1,{base:!0},this._repository.rootUri),le=new Ws(this.changesInPrDataProvider,this._folderRepoManager,t,m.status,m.fileName,m.blobUrl,U,z,E,r.filter(ce=>ce.path===m.fileName),a);n.push(le)}return n}async getPullRequestData(t){try{this._comments=await t.getReviewComments(),await t.initializeReviewThreadCache(),await t.getPullRequestFileViewState();const e=this._comments.filter(m=>m.position),r=this._comments.filter(m=>!m.position),n=await t.getFileChangesInfo(),i=t.mergeBase||t.base.sha,a=await fs(n,this._repository,i);this._localFileChanges=await this.getLocalChangeNodes(t,a,e);const o=fe(r,m=>m.originalCommitId);this._obsoleteFileChanges=[];for(const m in o){const E=o[m],k=fe(E,P=>P.path);for(const P in k){let U=[];try{const me=await this._repository.diffBetween(t.base.sha,m,P);U=na(me)}catch(me){C.appendLine(`Failed to parse patch for outdated comments: ${me}`)}const z=k[P],le=u.Uri.file(L.join(`commit~${m.substr(0,8)}`,P)),ce=new Ws(this.changesInPrDataProvider,this._folderRepoManager,t,Ye.MODIFY,P,void 0,Yr(le,P,void 0,z[0].originalCommitId,!0,{base:!1},this._repository.rootUri),Yr(le,P,void 0,z[0].originalCommitId,!0,{base:!0},this._repository.rootUri),U,z,m);this._obsoleteFileChanges.push(ce)}}return Promise.resolve(void 0)}catch(e){C.appendLine(`Review> ${e}`)}}async registerCommentController(){this._reviewCommentController=new Cg(this,this._folderRepoManager,this._repository,this._localFileChanges,this._sessionState),await this._reviewCommentController.initialize(),this._localToDispose.push(this._reviewCommentController),this._localToDispose.push(this._reviewCommentController.onDidChangeComments(t=>{this._comments=t}))}async switch(t){C.appendLine(`Review> switch to Pull Request #${t.number} - start`),this.statusBarItem.text="$(sync~spin) Switching to Review Mode",this.statusBarItem.command=void 0,this.statusBarItem.show(),this.switchingToReviewMode=!0;try{await this._folderRepoManager.checkoutExistingPullRequestBranch(t)||await this._folderRepoManager.fetchAndCheckout(t)}catch(e){C.appendLine(`Review> checkout failed #${JSON.stringify(e)}`),this.switchingToReviewMode=!1,e.message==="User aborted"||(e.gitErrorCode&&(e.gitErrorCode===or.LocalChangesOverwritten||e.gitErrorCode===or.DirtyWorkTree)?u.window.showErrorMessage("Your local changes would be overwritten by checkout, please commit your changes or stash them before you switch branches"):e.stderr.startsWith("fatal: couldn't find remote ref")?u.window.showErrorMessage("The remote branch for this pull request has been deleted. The pull request cannot be checked out."):u.window.showErrorMessage(be(e))),this._folderRepoManager.activePullRequest?this.setStatusForPr(this._folderRepoManager.activePullRequest):(this.statusBarItem.hide(),this.switchingToReviewMode=!1);return}try{this.statusBarItem.text=`$(sync~spin) Fetching additional data: pr/${t.number}`,this.statusBarItem.command=void 0,this.statusBarItem.show(),await this._folderRepoManager.fulfillPullRequestMissingInfo(t),this._telemetry.sendTelemetryEvent("pr.checkout"),C.appendLine(`Review> switch to Pull Request #${t.number} - done`,rp.ID)}finally{this.setStatusForPr(t),await this._repository.status()}}setStatusForPr(t){this.switchingToReviewMode=!1,this.justSwitchedToReviewMode=!0,this.statusBarItem.text=`Pull Request #${t.number}`,this.statusBarItem.command=void 0,this.statusBarItem.show()}async publishBranch(t){const e=await this._folderRepoManager.getAllGitHubRemotes();let r=(await this.getRemote(e,`Pick a remote to publish the branch '${t.name}' to:`)).remote;if(!r||t.name===void 0)return;const n=this._folderRepoManager.createGitHubRepository(r,this._folderRepoManager.credentialStore),i=await n.getViewerPermission();if(i===Gr.Read||i===Gr.Triage||i===Gr.Unknown){const o=await this._folderRepoManager.tryOfferToFork(n);if(!o)return;r=this._folderRepoManager.getGitHubRemotes().find(m=>m.remoteName===o)}if(!r)return;const a=r;return new Promise(async o=>{const m=u.window.createInputBox();m.value=t.name,m.ignoreFocusOut=!0,m.prompt=e.length===1?`The branch '${t.name}' is not published yet, pick a name for the upstream branch`:"Pick a name for the upstream branch";const E=async function(k){try{m.busy=!0,await this._reposManager.getBranch(a,k)?m.validationMessage=`Branch ${k} already exists in ${a.owner}/${a.repositoryName}`:m.validationMessage=void 0}catch(P){m.validationMessage=void 0}m.busy=!1};await E(t.name),m.onDidChangeValue(E.bind(this)),m.onDidAccept(async()=>{m.validationMessage=void 0,m.hide();try{await this._repository.push(a.remoteName,`${t.name}:${m.value}`,!0)}catch(P){throw P.gitErrorCode===or.PushRejected&&(u.window.showWarningMessage("Can't push refs to remote, try running 'git pull' first to integrate with your change",{modal:!0}),o(void 0)),P.gitErrorCode===or.RemoteConnectionError&&(u.window.showWarningMessage(`Could not read from remote repository '${a.remoteName}'. Please make sure you have the correct access rights and the repository exists.`,{modal:!0}),o(void 0)),P}const k=await this._repository.getBranch(t.name);(!k||!k.upstream)&&o(void 0),o(k)}),m.show()})}async getRemote(t,e,r){if(!t.length){u.window.showWarningMessage("No GitHub remotes found. Add a remote and try again.");return}if(t.length===1&&!r)return ep.fromRemote(t[0]);if(t.length===1&&r&&r.owner===t[0].owner&&r.name===t[0].repositoryName)return r;let n=!1;const i=t.map(o=>{const m=ep.fromRemote(o);if(r){const{owner:E,name:k}=r;m.picked=m.owner===E&&m.name===k,m.picked&&(n=!0)}return m});!n&&r&&i.unshift(r);const a=await u.window.showQuickPick(i,{ignoreFocusOut:!0,placeHolder:e});if(!!a)return a}async createPullRequest(t){this._createPullRequestHelper||(this._createPullRequestHelper=new Sg(this.repository),this._createPullRequestHelper.onDidCreate(async e=>{await this.updateState(!1,!1);const r=this.changesInPrDataProvider.getDescriptionNode(this._folderRepoManager);await Zc(this._context,this._telemetry,e,r,this._folderRepoManager)})),this._createPullRequestHelper.create(this._context.extensionUri,this._folderRepoManager,t)}async openDescription(){const t=this._folderRepoManager.activePullRequest;if(!t)return;const e=this.changesInPrDataProvider.getDescriptionNode(this._folderRepoManager);await Zc(this._context,this._telemetry,t,e,this._folderRepoManager)}get isCreatingPullRequest(){var t,e;return(e=(t=this._createPullRequestHelper)==null?void 0:t.isCreatingPullRequest)!=null?e:!1}async updateFocusedViewMode(){u.workspace.getConfiguration(Or).get("focusedMode")?(u.commands.executeCommand("setContext",ci,!0),await this._context.workspaceState.update(ci,!0)):(u.commands.executeCommand("setContext",ci,!1),this._context.workspaceState.update(ci,!1))}clear(t){this._updateMessageShown=!1,this._localToDispose.forEach(e=>e.dispose()),t&&(this._prNumber=void 0,this._folderRepoManager.activePullRequest=void 0,this._statusBarItem&&this._statusBarItem.hide(),this.changesInPrDataProvider&&this.changesInPrDataProvider.removePrFromView(this._folderRepoManager),this._comments=[],u.commands.executeCommand("pr.refreshList"))}async provideTextDocumentContent(t){const{path:e,commit:r}=li(t.query);let n=Wc(this._localFileChanges).filter(i=>i.fileName===e).filter(i=>i.sha===r||(i.parentSha?i.parentSha:`${i.sha}^`)===r);if(n.length){const i=n[0],a=r===i.sha?vr.Delete:vr.Add;return i.diffHunks.map(m=>m.diffLines.filter(E=>E.type!==a).map(E=>E.text)).reduce((m,E)=>m.concat(...E),[]).join(`
`)}if(n=Wc(this._obsoleteFileChanges).filter(i=>i.fileName===e).filter(i=>i.sha===r||(i.parentSha?i.parentSha:`${i.sha}^`)===r),n.length){const i=n[0],a=r===i.sha?vr.Delete:vr.Add,o=[],m=fe(i.comments,E=>String(E.originalPosition));for(const E in m){if(!m[E][0].diffHunks)continue;const k=m[E][0].diffHunks.map(P=>P.diffLines.filter(U=>U.type!==a).map(U=>U.text)).reduce((P,U)=>P.concat(...U),[]);o.push(...k)}return o.join(`
`)}}dispose(){this.clear(!0),this._disposables.forEach(t=>{t.dispose()})}static getReviewManagerForRepository(t,e){return t.find(r=>r._folderRepoManager.gitHubRepositories.some(n=>n.equals(e)))}static getReviewManagerForFolderManager(t,e){return t.find(r=>r._folderRepoManager===e)}};let Pi=rp;Kt(Pi,"ID","Review");class Ng{constructor(){Kt(this,"_shouldShow",!1),Kt(this,"_onChangedShowValue",new u.EventEmitter),Kt(this,"onChangedShowValue",this._onChangedShowValue.event)}get shouldShow(){return this._shouldShow}set shouldShow(e){const r=this._shouldShow;this._shouldShow=e,r!==this._shouldShow&&this._onChangedShowValue.fire(this._shouldShow)}}var Ag=Object.defineProperty,Xc=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Ag(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class as extends Dr{constructor(e,r,n,i){super();this.parent=e,this.label=r,this.iconPath=n,this.pullRequestModel=i,Xc(this,"command"),Xc(this,"contextValue"),Xc(this,"tooltip"),this.command={title:"View Pull Request Description",command:"pr.openDescription",arguments:[this]},this.contextValue="description",this.tooltip=`Description of pull request #${i.number}`,this.accessibilityInformation={label:`Pull request page of pull request number ${i.number}`,role:"button"}}getTreeItem(){return this}}var Ig=Object.defineProperty,np=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Ig(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Og{constructor(){np(this,"_onDidChange",new u.EventEmitter),np(this,"_prFileChangeContentProviders",{})}get onDidChange(){return this._onDidChange.event}fireDidChange(e){this._onDidChange.fire(e)}async provideTextDocumentContent(e,r){const n=er(e);if(n&&n.prNumber){const i=this._prFileChangeContentProviders[n.prNumber];if(i)return await i(e)}return""}registerTextDocumentContentProvider(e,r){return this._prFileChangeContentProviders[e]=r,{dispose:()=>{delete this._prFileChangeContentProviders[e]}}}}const Dg=new Og;function ip(){return Dg}var xg=Object.defineProperty,Jc=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?xg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class os extends Dr{constructor(e,r){super();this.parent=e,this.label=r,Jc(this,"collapsibleState"),Jc(this,"children",[]),Jc(this,"pathToChild",new Map),this.collapsibleState=u.TreeItemCollapsibleState.Expanded}async getChildren(){return this.children}finalize(){this.trimTree(),this.sort()}trimTree(){if(this.children.length===0||(this.children.forEach(r=>{r instanceof os&&r.trimTree()}),this.children.length!==1))return;const e=this.children[0];e instanceof os&&(this.label=this.label+"/"+e.label,this.label.startsWith("/")&&(this.label=this.label.substr(1)),this.children=e.children)}sort(){if(this.children.length<=1)return;const e=[],r=[];this.children.forEach(n=>{n instanceof os?(n.sort(),e.push(n)):r.push(n)}),e.sort((n,i)=>n.label<i.label?-1:1),r.sort((n,i)=>n.label<i.label?-1:1),this.children=[...e,...r]}addFile(e){const r=e.fileName.split("/");e.description="",this.addPathRecc(r,e)}addPathRecc(e,r){if(e.length<=0)return;if(e.length===1){this.children.push(r);return}const n=e[0],i=e.slice(1);let a=this.pathToChild.get(n);a||(a=new os(this,n),this.pathToChild.set(n,a),this.children.push(a)),a.addPathRecc(i,r)}getTreeItem(){return this}}var Mg=Object.defineProperty,Ys=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Mg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const sp=class extends Dr{constructor(t,e,r,n){super();this.parent=t,this._folderReposManager=e,this.pullRequestModel=r,this._isLocal=n,Ys(this,"_fileChanges"),Ys(this,"_commentController"),Ys(this,"_disposables",[]),Ys(this,"_inMemPRContentProvider"),Ys(this,"_command")}get command(){return this._command}set command(t){this._command=t}async getChildren(){C.debug(`Fetch children of PRNode #${this.pullRequestModel.number}`,sp.ID),this.pullRequestModel.onDidInvalidate(()=>this.refresh(this));try{this.childrenDisposables&&this.childrenDisposables.length&&(this.childrenDisposables.forEach(n=>n.dispose()),this.childrenDisposables=[]);const t=new as(this,"Description",new u.ThemeIcon("git-pull-request"),this.pullRequestModel);if(!this.pullRequestModel.isResolved())return[t];await this.pullRequestModel.initializeReviewThreadCache(),await this.pullRequestModel.getPullRequestFileViewState(),this._fileChanges=await this.resolveFileChanges(),this._inMemPRContentProvider||(this._inMemPRContentProvider=ip().registerTextDocumentContentProvider(this.pullRequestModel.number,this.provideDocumentContent.bind(this))),this._commentController||await this.resolvePRCommentController(),await this.pullRequestModel.validateDraftMode();const e=[t];if(u.workspace.getConfiguration("githubPullRequests").get("fileListLayout")==="tree"){const n=new os(this,"");this._fileChanges.forEach(i=>n.addFile(i)),n.finalize(),n.label===""?e.push(...n.children):e.push(n)}else e.push(...this._fileChanges);return this.childrenDisposables=e,e}catch(t){return C.appendLine(t),[]}}async resolvePRCommentController(){await this.pullRequestModel.githubRepository.ensureCommentsController(),this._commentController=this.pullRequestModel.githubRepository.commentsController,this._disposables.push(this.pullRequestModel.githubRepository.commentsHandler.registerCommentingRangeProvider(this.pullRequestModel.number,this)),this._disposables.push(this.pullRequestModel.githubRepository.commentsHandler.registerCommentController(this.pullRequestModel.number,this.pullRequestModel,this._folderReposManager)),this.registerListeners()}registerListeners(){this._disposables.push(this.pullRequestModel.onDidChangePendingReviewState(async t=>{t||(await this.getFileChanges()).forEach(e=>{e instanceof Mu&&e.comments.forEach(r=>r.isDraft=t)})}))}async getFileChanges(){return this._fileChanges||(this._fileChanges=await this.resolveFileChanges()),this._fileChanges}async resolveFileChanges(){if(!this.pullRequestModel.isResolved())return[];const t=await this.pullRequestModel.getReviewComments(),e=await this.pullRequestModel.getFileChangesInfo(),r=this.pullRequestModel.mergeBase;return r?(await fs(e,this._folderReposManager.repository,r)).map(i=>{const a=this.pullRequestModel.head.sha,o=i.status===Ye.RENAME?i.previousFileName:i.fileName;return i instanceof yo?new Ya(this,this.pullRequestModel,i.status,i.fileName,i.previousFileName,i.blobUrl,Gn(u.Uri.file(Hn(this._folderReposManager.repository.rootUri,i.fileName)),this.pullRequestModel,i.baseCommit,a,i.fileName,!1,i.status),Gn(u.Uri.file(Hn(this._folderReposManager.repository.rootUri,o)),this.pullRequestModel,i.baseCommit,a,i.fileName,!0,i.status)):(console.log(u.Uri.file(Hn(this._folderReposManager.repository.rootUri,i.fileName))),new Mu(this._folderReposManager,this,this.pullRequestModel,i.status,i.fileName,i.previousFileName,i.blobUrl,Gn(u.Uri.file(Hn(this._folderReposManager.repository.rootUri,i.fileName)),this.pullRequestModel,i.baseCommit,a,i.fileName,!1,i.status),Gn(u.Uri.file(Hn(this._folderReposManager.repository.rootUri,o)),this.pullRequestModel,i.baseCommit,a,i.fileName,!0,i.status),i.isPartial,i.patch,i.diffHunks,t.filter(E=>E.path===i.fileName&&E.position!==null)))}):[]}getTreeItem(){const t=this.pullRequestModel.equals(this._folderReposManager.activePullRequest),{title:e,number:r,author:n,isDraft:i,html_url:a}=this.pullRequestModel,{login:o}=n,m=t?"\u2713 ":"",E=t?"Current Branch * ":"",k=r.toString(),P=`${m}#${k}: ${i?"[DRAFT] ":""}${e}`,U=`${E}${e} by @${o}`,z=`by @${o}`;return{label:P,id:`${this.parent instanceof Dr?this.parent.label:""}${a}`,tooltip:U,description:z,collapsibleState:1,contextValue:"pullrequest"+(this._isLocal?":local":"")+(t?":active":":nonactive"),iconPath:this.pullRequestModel.userAvatarUri?this.pullRequestModel.userAvatarUri:new u.ThemeIcon("github"),accessibilityInformation:{label:`${i?"Draft ":""}Pull request number ${k}: ${e} by ${o}`}}}async provideCommentingRanges(t,e){if(t.uri.scheme==="pr"){const r=er(t.uri);if(!r||r.prNumber!==this.pullRequestModel.number)return;const n=(await this.getFileChanges()).find(i=>i.fileName===r.fileName);return!n||n instanceof Ya?void 0:tp(n.diffHunks,r.isBase)}}async provideDocumentContent(t){const e=er(t);if(!e)return"";const r=(await this.getFileChanges()).find(n=>n.fileName===e.fileName);if(!r)return C.appendLine(`PR> can not find content for document ${t.toString()}`),"";if(e.isBase&&r.status===Ye.ADD||!e.isBase&&r.status===Ye.DELETE)return"";if(r instanceof Ya||r.isPartial)try{return e.isBase?this.pullRequestModel.getFile(r.previousFileName||r.fileName,e.baseCommit):this.pullRequestModel.getFile(r.fileName,e.headCommit)}catch(n){return C.appendLine(`PR> Fetching file content failed: ${n}`),u.window.showWarningMessage("Opening this file locally failed. Would you like to view it on GitHub?","Open on GitHub").then(i=>{i==="Open on GitHub"&&u.commands.executeCommand("vscode.open",u.Uri.parse(r.blobUrl))}),""}if(r instanceof Mu)if(r.status===Ye.ADD||r.status===Ye.DELETE)if(e.isBase){const i=[];for(let a=0;a<r.diffHunks.length;a++)for(let o=0;o<r.diffHunks[a].diffLines.length;o++){const m=r.diffHunks[a].diffLines[o];m.type===vr.Add||(m.type===vr.Delete?i.push(m.text):m.type===vr.Control||i.push(m.text))}return i.join(`
`)}else{const i=[];for(let a=0;a<r.diffHunks.length;a++)for(let o=0;o<r.diffHunks[a].diffLines.length;o++){const m=r.diffHunks[a].diffLines[o];m.type===vr.Add?i.push(m.text):m.type===vr.Delete||m.type===vr.Control||i.push(m.text)}return i.join(`
`)}else{const i=r.status===Ye.RENAME?r.previousFileName:r.fileName,a=u.Uri.joinPath(this._folderReposManager.repository.rootUri,i),o=await this._folderReposManager.repository.show(e.baseCommit,a.fsPath);return e.isBase?o:Xu(o,r.patch)}return""}dispose(){super.dispose(),this._inMemPRContentProvider&&this._inMemPRContentProvider.dispose(),this._commentController=void 0,this._disposables.forEach(t=>t.dispose()),this._disposables=[]}};let Xs=sp;Ys(Xs,"ID","PRNode");const Fu=new u.EventEmitter,ap=Fu.event;function Za(t,e){if(e)return e instanceof Xs?e.pullRequestModel:e;if(!t.activePullRequest)throw u.window.showErrorMessage("Unable to find current pull request."),new Error("Unable to find current pull request.");return t.activePullRequest}async function Zc(t,e,r,n,i){const a=Za(i,r);n==null||n.reveal(n,{select:!0,focus:!0}),await Zr.createOrShow(t.extensionUri,i,a),e.sendTelemetryEvent("pr.openDescription")}async function Js(t,e,r){var n;if(t.length===1)return t[0];const i=t.map(a=>({label:e(a),itemValue:a}));return(n=await u.window.showQuickPick(i,r))==null?void 0:n.itemValue}async function eo(t,e){t instanceof Xs||t instanceof as?u.commands.executeCommand("vscode.open",u.Uri.parse(t.pullRequestModel.html_url)):u.commands.executeCommand("vscode.open",u.Uri.parse(t.html_url)),e.sendTelemetryEvent("pr.openInGitHub")}function Fg(t,e,r,n,i,a,o){t.subscriptions.push(u.commands.registerCommand("pr.openPullRequestOnGitHub",async k=>{if(k)eo(k,i);else{const P=r.folderManagers.map(U=>U.activePullRequest).filter(U=>!!U);if(P.length>=1){const U=await Js(P,z=>z.html_url);U&&eo(U,i)}}})),t.subscriptions.push(u.commands.registerCommand("review.suggestDiff",async k=>{try{const P=await Js(r.folderManagers,Oe=>L.basename(Oe.repository.rootUri.fsPath));if(!P||!P.activePullRequest)return;const{indexChanges:U,workingTreeChanges:z}=P.repository.state;if(!U.length)if(z.length)if(await u.window.showWarningMessage(`There are no staged changes to suggest.

Would you like to automatically stage all your of changes and suggest them?`,{modal:!0},"Yes")==="Yes")await u.commands.executeCommand("git.stageAll");else return;else{u.window.showInformationMessage("There are no changes to suggest.");return}const le=await P.repository.diff(!0);let ce=`Suggested edit:
`;k&&k.inputBox&&k.inputBox.value&&(ce=`${k.inputBox.value}
`,k.inputBox.value="");const me=`${ce}\`\`\`diff
${le}
\`\`\``;await P.activePullRequest.createIssueComment(me),await u.commands.executeCommand("git.unstageAll");const Te=L.join(P.repository.rootUri.fsPath,".git",`${P.activePullRequest.number}.diff`),Re=new TextEncoder,xe=u.Uri.file(Te);await u.workspace.fs.writeFile(xe,Re.encode(le)),await P.repository.apply(Te,!0),await u.workspace.fs.delete(xe)}catch(P){const U=`${P}${P.stderr?`
${P.stderr}`:""}`;C.appendLine(`Applying patch failed: ${U}`),u.window.showErrorMessage(`Applying patch failed: ${be(P)}`)}})),t.subscriptions.push(u.commands.registerCommand("pr.openFileOnGitHub",async k=>{if(!(k instanceof Ya&&!await u.window.showInformationMessage(`${k.fileName} can't be opened locally. Do you want to open it on GitHub?`,"Open"))&&k.blobUrl)return u.commands.executeCommand("vscode.open",u.Uri.parse(k.blobUrl))})),t.subscriptions.push(u.commands.registerCommand("pr.copyCommitHash",k=>{u.env.clipboard.writeText(k.sha)})),t.subscriptions.push(u.commands.registerCommand("pr.openOriginalFile",async k=>{const P=r.getManagerForIssueModel(k.pullRequest);if(P){const U=await ea(k.parentFilePath,P.repository);u.commands.executeCommand("vscode.open",U||k.parentFilePath)}})),t.subscriptions.push(u.commands.registerCommand("pr.openModifiedFile",k=>{u.commands.executeCommand("vscode.open",k.filePath)})),t.subscriptions.push(u.commands.registerCommand("pr.openDiffView",k=>{const P=r.getManagerForIssueModel(k.pullRequest);!P||k.openDiff(P)})),t.subscriptions.push(u.commands.registerCommand("pr.deleteLocalBranch",async k=>{const P=r.getManagerForIssueModel(k.pullRequestModel);if(!P)return;const U=Za(P,k),z="delete branch (even if not merged)";let le=null;try{await P.deleteLocalPullRequest(U)}catch(ce){if(ce.gitErrorCode===or.BranchNotFullyMerged){if(await u.window.showErrorMessage(`The branch '${U.localBranchName}' is not fully merged, are you sure you want to delete it? `,z)!==z)return;try{await P.deleteLocalPullRequest(U,!0)}catch(Te){le=Te}}else le=ce}le?(i.sendTelemetryErrorEvent("pr.deleteLocalPullRequest.failure"),await u.window.showErrorMessage(`Deleting local pull request branch failed: ${le}`)):(i.sendTelemetryEvent("pr.deleteLocalPullRequest.success"),u.commands.executeCommand("pr.refreshList"))}));function m(k){if(k){const P=u.Uri.file(k).toString();for(const U of n)if(U.repository.rootUri.toString()===P)return U}return Js(n,P=>L.basename(P.repository.rootUri.fsPath),{placeHolder:"Choose a repository to create a pull request in",ignoreFocusOut:!0})}function E(k){return!!(k==null?void 0:k.rootUri)}t.subscriptions.push(u.commands.registerCommand("pr.create",async k=>{var P,U;E(k)?(P=await m(k.rootUri.fsPath))==null||P.createPullRequest():(U=await m(k==null?void 0:k.repoPath))==null||U.createPullRequest(k==null?void 0:k.compareBranch)})),t.subscriptions.push(u.commands.registerCommand("pr.pick",async k=>{let P;k instanceof Xs||k instanceof as?P=k.pullRequestModel:P=k;const U=k instanceof ni;return i.sendTelemetryEvent("pr.checkout",{fromDescription:U.toString()}),u.window.withProgress({location:u.ProgressLocation.SourceControl,title:`Switching to Pull Request #${P.number}`},async()=>{var z;await((z=Pi.getReviewManagerForRepository(n,P.githubRepository))==null?void 0:z.switch(P))})})),t.subscriptions.push(u.commands.registerCommand("pr.exit",async k=>{let P;k instanceof Xs||k instanceof as?P=k.pullRequestModel:P=k;const U=k instanceof ni;return i.sendTelemetryEvent("pr.exit",{fromDescription:U.toString()}),u.window.withProgress({location:u.ProgressLocation.SourceControl,title:"Exiting Pull Request"},async()=>{const z=await P.githubRepository.getDefaultBranch(),le=r.getManagerForIssueModel(P);le&&le.checkoutDefaultBranch(z)})})),t.subscriptions.push(u.commands.registerCommand("pr.merge",async k=>{const P=r.getManagerForIssueModel(k==null?void 0:k.pullRequestModel);if(!P)return;const U=Za(P,k);return U.base&&U.head&&!U.base.repositoryCloneUrl.equals(U.head.repositoryCloneUrl)&&$c()?eo(U,i):u.window.showWarningMessage("Are you sure you want to merge this pull request on GitHub?",{modal:!0},"Yes").then(async ce=>{let me;if(ce==="Yes")try{return me=await P.mergePullRequest(U),me}catch(Te){return u.window.showErrorMessage(`Unable to merge pull request. ${be(Te)}`),me}})})),t.subscriptions.push(u.commands.registerCommand("pr.readyForReview",async k=>{const P=r.getManagerForIssueModel(k==null?void 0:k.pullRequestModel);if(!P)return;const U=Za(P,k);return u.window.showWarningMessage("Are you sure you want to mark this pull request as ready to review on GitHub?",{modal:!0},"Yes").then(async z=>{let le;if(z==="Yes")try{return le=await U.setReadyForReview(),u.commands.executeCommand("pr.refreshList"),le}catch(ce){return u.window.showErrorMessage(`Unable to mark pull request as ready to review. ${be(ce)}`),le}})})),t.subscriptions.push(u.commands.registerCommand("pr.close",async(k,P)=>{let U;if(k)U=k instanceof ni?k:k.pullRequestModel;else{const le=r.folderManagers.map(ce=>ce.activePullRequest).filter(ce=>!!ce);U=await Js(le,ce=>`${ce.number}: ${ce.title}`,{placeHolder:"Pull request to close"})}if(!U)return;const z=U;return u.window.showWarningMessage("Are you sure you want to close this pull request on GitHub? This will close the pull request without merging.",{modal:!0},"Yes","No").then(async le=>{if(le==="Yes")try{let ce;P&&(ce=await z.createIssueComment(P));const me=await z.close();return u.commands.executeCommand("pr.refreshList"),Fu.fire(me),ce}catch(ce){u.window.showErrorMessage(`Unable to close pull request. ${be(ce)}`),Fu.fire()}Fu.fire()})})),t.subscriptions.push(u.commands.registerCommand("pr.openDescription",async k=>{let P;if(k)P=k instanceof as?k.pullRequestModel:k;else{const le=r.folderManagers.map(ce=>ce.activePullRequest).filter(ce=>!!ce);le.length>=1&&(P=await Js(le,ce=>ce.title))}if(!P){C.appendLine("No pull request found.");return}const U=r.getManagerForIssueModel(P);if(!U)return;let z;if(k instanceof as)z=k;else{const le=Pi.getReviewManagerForFolderManager(n,U);if(!le)return;z=le.changesInPrDataProvider.getDescriptionNode(U)}await Zc(t,i,P,z,U)})),t.subscriptions.push(u.commands.registerCommand("pr.refreshDescription",async()=>{Zr.currentPanel&&Zr.refresh()})),t.subscriptions.push(u.commands.registerCommand("pr.openDescriptionToTheSide",async k=>{const P=r.getManagerForIssueModel(k.pullRequestModel);if(!P)return;const U=k.pullRequestModel,z=Za(P,U);k.reveal(k,{select:!0,focus:!0}),Zr.createOrShow(t.extensionUri,P,z,!0),i.sendTelemetryEvent("pr.openDescriptionToTheSide")})),t.subscriptions.push(u.commands.registerCommand("pr.signin",async()=>{await r.authenticate()})),t.subscriptions.push(u.commands.registerCommand("pr.deleteLocalBranchesNRemotes",async()=>{for(const k of r.folderManagers)await k.deleteLocalBranchesNRemotes()})),t.subscriptions.push(u.commands.registerCommand("pr.signinAndRefreshList",async()=>{await r.authenticate()&&u.commands.executeCommand("pr.refreshList")})),t.subscriptions.push(u.commands.registerCommand("pr.configureRemotes",async()=>u.commands.executeCommand("workbench.action.openSettings",`@ext:${wn} remotes`))),t.subscriptions.push(u.commands.registerCommand("pr.startReview",async k=>{i.sendTelemetryEvent("pr.startReview");const P=jt(k.thread);P&&P.startReview(k.thread,k.text)})),t.subscriptions.push(u.commands.registerCommand("pr.openReview",async k=>{i.sendTelemetryEvent("pr.openReview");const P=jt(k.thread);P&&await P.openReview(k.thread)})),t.subscriptions.push(u.commands.registerCommand("pr.resolveReviewThread",async k=>{i.sendTelemetryEvent("pr.resolveReviewThread");const P=jt(k.thread);P&&await P.resolveReviewThread(k.thread.value,k.text)})),t.subscriptions.push(u.commands.registerCommand("pr.unresolveReviewThread",async k=>{i.sendTelemetryEvent("pr.unresolveReviewThread");const P=jt(k.thread);P&&await P.unresolveReviewThread(k.thread.value,k.text)})),t.subscriptions.push(u.commands.registerCommand("pr.createComment",async k=>{i.sendTelemetryEvent("pr.createComment");const P=jt(k.thread);P&&P.createOrReplyComment(k.thread,k.text,!1)})),t.subscriptions.push(u.commands.registerCommand("pr.createSingleComment",async k=>{i.sendTelemetryEvent("pr.createSingleComment");const P=jt(k.thread);P&&P.createOrReplyComment(k.thread,k.text,!0)})),t.subscriptions.push(u.commands.registerCommand("pr.editComment",async k=>{i.sendTelemetryEvent("pr.editComment"),k.startEdit()})),t.subscriptions.push(u.commands.registerCommand("pr.editQuery",k=>(i.sendTelemetryEvent("pr.editQuery"),k.editQuery()))),t.subscriptions.push(u.commands.registerCommand("pr.cancelEditComment",async k=>{i.sendTelemetryEvent("pr.cancelEditComment"),k.cancelEdit()})),t.subscriptions.push(u.commands.registerCommand("pr.saveComment",async k=>{i.sendTelemetryEvent("pr.saveComment");const P=jt(k.parent);P&&await P.editComment(k.parent,k)})),t.subscriptions.push(u.commands.registerCommand("pr.deleteComment",async k=>{if(i.sendTelemetryEvent("pr.deleteComment"),await u.window.showWarningMessage("Delete comment?",{modal:!0},"Delete")==="Delete"){const U=jt(k.parent);U&&await U.deleteComment(k.parent,k)}})),t.subscriptions.push(u.commands.registerCommand("review.openFile",k=>{var P;const U=k instanceof Ws?k.openFileCommand():Xh(k);u.commands.executeCommand(U.command,...(P=U.arguments)!=null?P:[])})),t.subscriptions.push(u.commands.registerCommand("pr.refreshChanges",k=>{n.forEach(P=>{P.updateComments(),Zr.refresh(),P.changesInPrDataProvider.refresh()})})),t.subscriptions.push(u.commands.registerCommand("pr.setFileListLayoutAsTree",k=>{u.workspace.getConfiguration("githubPullRequests").update("fileListLayout","tree",!0)})),t.subscriptions.push(u.commands.registerCommand("pr.setFileListLayoutAsFlat",k=>{u.workspace.getConfiguration("githubPullRequests").update("fileListLayout","flat",!0)})),t.subscriptions.push(u.commands.registerCommand("pr.refreshPullRequest",k=>{var P;const U=r.getManagerForIssueModel(k.pullRequestModel);U&&k.pullRequestModel.equals(U==null?void 0:U.activePullRequest)&&((P=Pi.getReviewManagerForFolderManager(n,U))==null||P.updateComments()),Zr.refresh(),o.refresh(k)})),t.subscriptions.push(u.commands.registerCommand("pr.markFileAsViewed",async k=>{try{await k.pullRequest.markFileAsViewed(k.fileName)}catch(P){u.window.showErrorMessage(`Marked file as viewed failed: ${P}`)}})),t.subscriptions.push(u.commands.registerCommand("pr.unmarkFileAsViewed",async k=>{try{await k.pullRequest.unmarkFileAsViewed(k.fileName)}catch(P){u.window.showErrorMessage(`Marked file as not viewed failed: ${P}`)}})),t.subscriptions.push(u.commands.registerCommand("pr.expandAllComments",()=>{e.commentsExpandState=!0})),t.subscriptions.push(u.commands.registerCommand("pr.collapseAllComments",()=>{e.commentsExpandState=!1})),t.subscriptions.push(u.commands.registerCommand("pr.checkoutByNumber",async()=>{var k;const P=[];r.folderManagers.forEach(me=>{P.push(...me.gitHubRepositories.map(Te=>({manager:me,repo:Te})))});const U=await Js(P,me=>`${me.repo.remote.owner}/${me.repo.remote.repositoryName}`,{placeHolder:"Which GitHub repository do you want to checkout the pull request from?"});if(!U)return;const z=/^#?(\d*)$/,le=await u.window.showInputBox({ignoreFocusOut:!0,prompt:"Enter the a pull request number",validateInput:me=>{const Te=me.match(z);if(!Te||Te.length!==2||Number.isNaN(Number(Te[1])))return"Value must be a number"}});if(le===void 0||le==="#")return;const ce=await U.manager.fetchById(U.repo,Number(le.match(z)[1]));if(ce)return(k=Pi.getReviewManagerForFolderManager(n,U.manager))==null?void 0:k.switch(ce)}))}var Lg=Object.defineProperty,ed=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Lg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class qg{constructor(e){ed(this,"_commentsExpandState"),ed(this,"_onDidChangeCommentsExpandState",new u.EventEmitter),ed(this,"onDidChangeCommentsExpandState",this._onDidChangeCommentsExpandState.event);var r;const n=(r=u.workspace.getConfiguration(Or))==null?void 0:r.get(Cu);this._commentsExpandState=n===Mc,e.subscriptions.push(u.workspace.onDidChangeConfiguration(i=>{var a;if(i.affectsConfiguration(`${Or}.${Cu}`)){const o=(a=u.workspace.getConfiguration(Or))==null?void 0:a.get(Cu);this.commentsExpandState=o===Mc}}))}get commentsExpandState(){return this._commentsExpandState}set commentsExpandState(e){this._commentsExpandState=e,this._onDidChangeCommentsExpandState.fire(this._commentsExpandState)}}var Zs=Je(9035),Ug=Object.defineProperty,op=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Ug(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class $g{constructor(e){this.baseReporter=e,op(this,"sharedProperties",{})}sendTelemetryEvent(e,r,n){var i;(i=this.baseReporter)==null||i.sendTelemetryEvent(e,{...this.sharedProperties,...r},n)}sendTelemetryErrorEvent(e,r,n){var i;(i=this.baseReporter)==null||i.sendTelemetryErrorEvent(e,{...this.sharedProperties,...r})}setSharedProperty(e,r){this.sharedProperties[e]=r}postEvent(e,r){const n={};for(const[i,a]of r)n[i]=a;this.sendTelemetryEvent(e,n)}async dispose(){var e;return(e=this.baseReporter)==null?void 0:e.dispose()}}function Gg(){switch(u.env.uriScheme){case"vscode":return Zs.aU.Public;case"vscode-insiders":return Zs.aU.Insiders;case"vscode-exploration":return Zs.aU.Internal;case"code-oss":return Zs.aU.Team;default:return Zs.aU.Public}}class Hg{constructor(){op(this,"initializePromise",Promise.resolve())}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,r){}getTreatmentVariableAsync(e,r){return Promise.resolve(void 0)}}async function Bg(t,e){const r=t.extension.id,n=t.extension.packageJSON.name,i=t.extension.packageJSON.version,a=Gg();return n==="vscode-pull-request-github"?(0,Zs.X7)(r,i,a,e,t.globalState):new Hg}var Vg=Object.defineProperty,to=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Vg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class py extends Error{constructor(e){super();this.repository=e}get message(){return`${this.repository.rootUri.toString()} has no GitHub remotes`}}class my extends Error{constructor(e){super();this.repository=e}get message(){return`${this.repository.rootUri.toString()} has a detached HEAD (create a branch first)`}}class fy extends Error{constructor(e,r,n){super();this.branchName=e,this.upstreamRef=r,this.problem=n}get message(){const{upstreamRef:{remote:e,name:r},branchName:n,problem:i}=this;return`The upstream ref ${e}/${r} for branch ${n} ${i}.`}}const gy="No Milestone";class up{constructor(e,r,n,i){this._folderManagers=e,this._credentialStore=r,this._telemetry=n,this._sessionState=i,to(this,"_subs"),to(this,"_onDidChangeState",new u.EventEmitter),to(this,"onDidChangeState",this._onDidChangeState.event),to(this,"_state",en.Initializing),this._subs=[],u.commands.executeCommand("setContext",Mh,this._state),this._subs.push(...e.map(a=>a.onDidLoadRepositories(o=>this.state=o)))}get folderManagers(){return this._folderManagers}insertFolderManager(e){const r=u.workspace.workspaceFolders;if(r){const n=r.findIndex(i=>i.uri.toString()===e.repository.rootUri.toString());if(n>-1){const i=this._folderManagers.slice(n,this._folderManagers.length);this._folderManagers=this._folderManagers.slice(0,n),this._folderManagers.push(e),this._folderManagers.push(...i);return}}this._folderManagers.push(e)}removeRepo(e){const r=this._folderManagers.findIndex(n=>n.repository.rootUri.toString()===e.rootUri.toString());if(r>-1){const n=this._folderManagers[r];this._folderManagers.splice(r),n.dispose()}}getManagerForIssueModel(e){if(e===void 0)return;const r=e.remote.url.substring(0,e.remote.url.length-L.extname(e.remote.url).length);for(const n of this._folderManagers)if(n.gitHubRepositories.map(i=>i.remote.url.substring(0,i.remote.url.length-L.extname(i.remote.url).length)).includes(r))return n}getManagerForFile(e){if(e.scheme==="untitled")return this._folderManagers[0];for(const r of this._folderManagers){const n=r.repository.rootUri.path,i=e.path.substring(n.length>1?n.length+1:n.length);if(Ft(u.Uri.joinPath(r.repository.rootUri,i).path,e.path)===0)return r}}get state(){return this._state}set state(e){const r=e!==this._state;this._state=e,r&&(u.commands.executeCommand("setContext",Mh,e),this._onDidChangeState.fire())}get credentialStore(){return this._credentialStore}async clearCredentialCache(){await this._credentialStore.reset(),this.state=en.Initializing}async authenticate(){const e=await this._credentialStore.login(bt.github);let r;return Ou()&&(r=await this._credentialStore.login(bt["github-enterprise"])),!!e||!!r}dispose(){this._subs.forEach(e=>e.dispose())}}to(up,"ID","RepositoriesManager");function vy(t){switch(t){case"committed":return EventType.Committed;case"mentioned":return EventType.Mentioned;case"subscribed":return EventType.Subscribed;case"commented":return EventType.Commented;case"reviewed":return EventType.Reviewed;default:return EventType.Other}}var jg=Object.defineProperty,Fn=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?jg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class td{constructor(e){Fn(this,"_onDidOpenRepository",new u.EventEmitter),Fn(this,"onDidOpenRepository",this._onDidOpenRepository.event),Fn(this,"_onDidCloseRepository",new u.EventEmitter),Fn(this,"onDidCloseRepository",this._onDidCloseRepository.event),Fn(this,"_onDidChangeState",new u.EventEmitter),Fn(this,"onDidChangeState",this._onDidChangeState.event),Fn(this,"_onDidPublish",new u.EventEmitter),Fn(this,"onDidPublish",this._onDidPublish.event),Fn(this,"_gitAPI"),Fn(this,"_disposables");const r=e.exports;try{this._gitAPI=r.getAPI(1)}catch(n){throw u.window.showErrorMessage("Activating the Pull Requests and Issues extension failed. Please make sure you have git installed."),n}this._disposables=[],this._disposables.push(this._gitAPI.onDidCloseRepository(n=>this._onDidCloseRepository.fire(n))),this._disposables.push(this._gitAPI.onDidOpenRepository(n=>this._onDidOpenRepository.fire(n))),this._disposables.push(this._gitAPI.onDidChangeState(n=>this._onDidChangeState.fire(n))),this._disposables.push(this._gitAPI.onDidPublish(n=>this._onDidPublish.fire(n)))}get repositories(){return this._gitAPI.repositories}get state(){return this._gitAPI.state}static async createProvider(){const e=u.extensions.getExtension("vscode.git");if(e)return await e.activate(),new td(e)}dispose(){this._disposables.forEach(e=>e.dispose())}}var zg=Object.defineProperty,ar=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?zg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Qg{constructor(e){this._liveShareAPI=e,ar(this,"_onDidOpenRepository",new u.EventEmitter),ar(this,"onDidOpenRepository",this._onDidOpenRepository.event),ar(this,"_onDidCloseRepository",new u.EventEmitter),ar(this,"onDidCloseRepository",this._onDidCloseRepository.event),ar(this,"_openRepositories",[]),ar(this,"_sharedServiceProxy"),ar(this,"_disposables"),this._disposables=[]}get repositories(){return this._openRepositories}async initialize(){this._sharedServiceProxy=await this._liveShareAPI.getSharedService(ta)||void 0,!!this._sharedServiceProxy&&(this._sharedServiceProxy.isServiceAvailable&&await this._refreshWorkspaces(!0),this._disposables.push(this._sharedServiceProxy.onDidChangeIsServiceAvailable(async e=>{await this._refreshWorkspaces(e)})),this._disposables.push(u.workspace.onDidChangeWorkspaceFolders(this._onDidChangeWorkspaceFolders.bind(this))))}async _onDidChangeWorkspaceFolders(e){e.added.forEach(async r=>{r.uri.scheme==="vsls"&&this._sharedServiceProxy&&this._sharedServiceProxy.isServiceAvailable&&await this.openVSLSRepository(r)}),e.removed.forEach(async r=>{r.uri.scheme==="vsls"&&this._sharedServiceProxy&&this._sharedServiceProxy.isServiceAvailable&&await this.closeVSLSRepository(r)})}async _refreshWorkspaces(e){u.workspace.workspaceFolders&&u.workspace.workspaceFolders.forEach(async r=>{r.uri.scheme==="vsls"&&(e?await this.openVSLSRepository(r):await this.closeVSLSRepository(r))})}async openVSLSRepository(e){if(this.getRepository(e))return;const n=new Yg(e,this._sharedServiceProxy),i=new Wg,a=new Proxy(n,i);await a.initialize(),this.openRepository(a)}async closeVSLSRepository(e){const r=this.getRepository(e);!r||this.closeRepository(r)}openRepository(e){this._openRepositories.push(e),this._onDidOpenRepository.fire(e)}closeRepository(e){this._openRepositories=this._openRepositories.filter(r=>r!==e),this._onDidCloseRepository.fire(e)}getRepository(e){return this._openRepositories.filter(r=>r.workspaceFolder===e)[0]}dispose(){this._sharedServiceProxy=void 0,this._disposables.forEach(e=>e.dispose()),this._disposables=[]}}class Wg{constructor(){}get(e,r){return r in e?e[r]:function(...n){return e.proxy.request(ps,[r,e.workspaceFolder.uri.toString(),...n])}}}class Kg{constructor(e){ar(this,"HEAD"),ar(this,"refs"),ar(this,"remotes"),ar(this,"submodules",[]),ar(this,"rebaseCommit"),ar(this,"mergeChanges",[]),ar(this,"indexChanges",[]),ar(this,"workingTreeChanges",[]),ar(this,"_onDidChange",new u.EventEmitter),ar(this,"onDidChange",this._onDidChange.event),this.HEAD=e.HEAD,this.remotes=e.remotes,this.refs=e.refs}update(e){this.HEAD=e.HEAD,this.remotes=e.remotes,this.refs=e.refs,this._onDidChange.fire()}}class Yg{constructor(e,r){this.workspaceFolder=e,this.proxy=r,ar(this,"rootUri"),ar(this,"state")}async initialize(){const e=await this.proxy.request(ps,[fo,this.workspaceFolder.uri.toString()]);this.state=new Kg(e),this.rootUri=u.Uri.parse(e.rootUri),this.proxy.onNotify(go,this._notifyHandler.bind(this))}_notifyHandler(e){var r;(r=this.state)==null||r.update(e)}}var Xg=Object.defineProperty,lp=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Xg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Jg{constructor(e,r){this._liveShareAPI=e,this._api=r,lp(this,"_sharedService"),lp(this,"_disposables"),this._disposables=[]}async initialize(){this._sharedService=await this._liveShareAPI.shareService(ta)||void 0,this._sharedService&&this._sharedService.onRequest(ps,this._gitHandler.bind(this))}async _gitHandler(e){const r=e[0],n=e[1],i=u.Uri.parse(n),a=this._liveShareAPI.convertSharedUriToLocal(i),o=this._api.getGitProvider(a);if(!o)return;const m=o.repositories.filter(E=>E.rootUri.toString()===a.toString())[0];if(m){const E=e.slice(2);if(r===fo)return this._disposables.push(m.state.onDidChange(k=>{this._sharedService.notify(go,{HEAD:m.state.HEAD,remotes:m.state.remotes,refs:m.state.refs})})),{HEAD:m.state.HEAD,remotes:m.state.remotes,refs:m.state.refs,rootUri:i.toString()};if(r==="show"){const k=E[1],P=i.with({path:k}),U=this._liveShareAPI.convertSharedUriToLocal(P);return E[1]=U.fsPath,m[r](...E)}if(m[r])return m[r](...E)}else return null}dispose(){this._disposables.forEach(e=>e.dispose()),this._sharedService=void 0,this._disposables=[]}}var Zg=Object.defineProperty,ro=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Zg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);async function ev(){const t=u.extensions.getExtension("ms-vsliveshare.vsliveshare");if(!t)return null;const e=t.isActive?t.exports:await t.activate();if(!e)return null;const r="0.3.967";return e.getApi?e.getApi(r):e.getApiAsync(r)}class tv{constructor(e){this._api=e,ro(this,"_liveShareAPI"),ro(this,"_host"),ro(this,"_guest"),ro(this,"_localDisposables"),ro(this,"_globalDisposables"),this._localDisposables=[],this._globalDisposables=[]}async initialize(){if(this._liveShareAPI||(this._liveShareAPI=await ev()),!!this._liveShareAPI)return this._globalDisposables.push(this._liveShareAPI.onDidChangeSession(e=>this._onDidChangeSession(e.session),this)),this._liveShareAPI.session&&this._onDidChangeSession(this._liveShareAPI.session),this._liveShareAPI}async _onDidChangeSession(e){if(this._localDisposables.forEach(r=>r.dispose()),e.role===1){this._host=new Jg(this._liveShareAPI,this._api),this._localDisposables.push(this._host),await this._host.initialize();return}e.role===2&&(this._guest=new Qg(this._liveShareAPI),this._localDisposables.push(this._guest),await this._guest.initialize(),this._localDisposables.push(this._api.registerGitProvider(this._guest)))}dispose(){this._liveShareAPI=void 0,this._localDisposables.forEach(e=>e.dispose()),this._globalDisposables.forEach(e=>e.dispose())}}function rv(t){return new tv(t)}async function nv(t,e){const r=await td.createProvider();if(r)return e.registerGitProvider(r),r}var iv=Object.defineProperty,cp=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?iv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class sv{constructor(e){this.pullRequestManager=e,cp(this,"onNotifiedEmitter",new u.EventEmitter),cp(this,"onNotified",this.onNotifiedEmitter.event),e.folderManagers.forEach(r=>{r.onDidChangeAssignableUsers(n=>{this.notifySuggestedAccounts(n)})})}async requestAsync(e,r,n){let i=null;switch(e){case"initialize":i={description:"Pullrequest",capabilities:{supportsDispose:!1,supportsInviteLink:!1,supportsPresence:!1,supportsContactPresenceRequest:!1,supportsPublishPresence:!1}};const a=new Map;for(const o of this.pullRequestManager.folderManagers){const m=o.getAllAssignableUsers();if(!!m)for(const E of m)a.has(E.login)||a.set(E.login,E)}a.size>0&&this.notifySuggestedAccounts(Array.from(a.values()));break;default:throw new Error(`type:${e} not supported`)}return i}async notifySuggestedAccounts(e){let r;try{r=await this.getCurrentUserLogin()}catch(n){}r&&e.findIndex(n=>n.login===r)!==-1&&this.notifySuggestedUsers(e.filter(n=>n.email).map(n=>({id:n.login,displayName:n.name?n.name:n.login,email:n.email})),!0)}async getCurrentUserLogin(){var e;if(this.pullRequestManager.folderManagers.length===0)return;const r=await((e=this.pullRequestManager.folderManagers[0])==null?void 0:e.getOrigin());if(r){const n=r.hub.currentUser;if(n)return n.login}}notify(e,r){this.onNotifiedEmitter.fire({type:e,body:r})}notifySuggestedUsers(e,r){this.notify("suggestedUsers",{contacts:e,exclusive:r})}}var av=Object.defineProperty,dp=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?av(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class ov{constructor(){dp(this,"_extensionsDisposable"),dp(this,"_subscriptions",[]),this._extensionsDisposable=u.extensions.onDidChange(this.onExtensionsChanged,this),this.onExtensionsChanged()}dispose(){this._extensionsDisposable.dispose(),u.Disposable.from(...this._subscriptions).dispose()}register(e){this._subscriptions.push(e.registerActionRunner("createPullRequest",{partnerId:"ghpr",name:"GitHub Pull Requests and Issues",label:"Create Pull Request",run:function(r){r.branch.isRemote||u.commands.executeCommand("pr.create",{repoPath:r.repoPath,compareBranch:r.branch.name})}}))}async onExtensionsChanged(){var e;const r=(e=u.extensions.getExtension("eamodio.gitlens"))!=null?e:u.extensions.getExtension("eamodio.gitlens-insiders");if(r)if(this._extensionsDisposable.dispose(),r.isActive)this.register(await r.exports);else{let n=0;const i=setInterval(async()=>{r.isActive?(clearInterval(i),this.register(await r.exports)):(n++,n>60&&clearInterval(i))},1e3)}}}var uv=Object.defineProperty,us=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?uv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class hp{constructor(e,r,n,i,a){this.issueModel=e,this.manager=r,this.stateManager=n,this.shouldPromptForBranch=a,us(this,"repoChangeDisposable"),us(this,"_branchName"),us(this,"user"),us(this,"repo"),us(this,"_repoDefaults"),us(this,"_onDidChangeCurrentIssueState",new u.EventEmitter),us(this,"onDidChangeCurrentIssueState",this._onDidChangeCurrentIssueState.event),this.setRepo(i!=null?i:this.issueModel.githubRepository.remote)}setRepo(e){var r;for(let n=0;n<this.stateManager.gitAPI.repositories.length;n++){const i=this.stateManager.gitAPI.repositories[n];for(let a=0;a<i.state.remotes.length;a++){const o=i.state.remotes[a];if(o.name===(e==null?void 0:e.remoteName)&&((r=o.fetchUrl)==null?void 0:r.toLowerCase().search(`${e.owner.toLowerCase()}/${e.repositoryName.toLowerCase()}`))!==-1){this.repo=i;return}}}}get branchName(){return this._branchName}get repoDefaults(){return this._repoDefaults}get issue(){return this.issueModel}async startWorking(){var e;try{if(this._repoDefaults=await this.manager.getPullRequestDefaults(),await this.createIssueBranch()){await this.setCommitMessageAndGitEvent(),this._onDidChangeCurrentIssueState.fire();const r=this.manager.getCurrentUser(this.issueModel).login;return u.workspace.getConfiguration("githubIssues").get("assignWhenWorking")&&!((e=this.issueModel.assignees)==null?void 0:e.find(n=>n.login===r))&&(this.manager.gitHubRepositories.find(n=>n.remote.owner===this.issueModel.remote.owner&&n.remote.repositoryName===this.issueModel.remote.repositoryName)&&await this.manager.assignIssue(this.issueModel,r),await this.stateManager.refresh()),!0}}catch(r){u.window.showErrorMessage("There is no remote. Can't start working on an issue.")}return!1}dispose(){var e;(e=this.repoChangeDisposable)==null||e.dispose()}async stopWorking(){this.repo&&(this.repo.inputBox.value=""),this._repoDefaults&&await this.manager.repository.checkout(this._repoDefaults.base),this._onDidChangeCurrentIssueState.fire(),this.dispose()}getBasicBranchName(e){return`${e}/issue${this.issueModel.number}`}async branchExists(e){try{return!!await this.manager.repository.getBranch(e)}catch(r){}return!1}async createOrCheckoutBranch(e){try{return await this.branchExists(e)?await this.manager.repository.checkout(e):await this.manager.repository.createBranch(e,!0),!0}catch(r){return r.message!=="User aborted"&&u.window.showErrorMessage(`Unable to checkout branch ${e}. There may be file conflicts that prevent this branch change. Git error: ${r.error}`),!1}}async getUser(){return this.user||(this.user=await this.issueModel.githubRepository.getAuthenticatedUser()),this.user}async getBranchTitle(){var e;return(e=u.workspace.getConfiguration(ir).get(hh))!=null?e:this.getBasicBranchName(await this.getUser())}validateBranchName(e){const r=/[^ \\@\~\^\?\*\[]+/,n=e.match(r);if(n&&n.length>0&&n[0]!==e)return"Branch name cannot contain a space or the following characters: \\@~^?*["}showBranchNameError(e){const r="Edit Setting";u.window.showErrorMessage(e,r).then(n=>{n===r&&u.commands.executeCommand("workbench.action.openSettings",`${ir}.${hh}`)})}async createIssueBranch(){const e=this.shouldPromptForBranch?"prompt":u.workspace.getConfiguration(ir).get(ph);if(e==="off")return!0;const r=this.stateManager.getSavedIssueState(this.issueModel.number);this._branchName=this.shouldPromptForBranch?void 0:r.branch;const n=await wu(await this.getBranchTitle(),this.issue,void 0,await this.getUser());if(e==="on"&&this._branchName!==n&&(await this.branchExists(this._branchName)||(this._branchName=n)),this._branchName||(this._branchName=await u.window.showInputBox({value:n,prompt:"Enter the label for the new branch."})),!this._branchName)return!1;const i=this.validateBranchName(this._branchName);return i?(this.showBranchNameError(i),!1):(r.branch=this._branchName,await this.stateManager.setSavedIssueState(this.issueModel,r),await this.createOrCheckoutBranch(this._branchName)?!0:(this._branchName=void 0,!1))}async getCommitMessage(){const e=u.workspace.getConfiguration(ir).get(nf);if(typeof e=="string")return wu(e,this.issueModel,this._repoDefaults)}async setCommitMessageAndGitEvent(){const e=await this.getCommitMessage();this.repo&&e&&(this.repo.inputBox.value=e)}}var lv=Object.defineProperty,no=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?lv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Ln="newIssue",cv="NewIssue.md",Lu="Assignees:",io="Labels:";function qu(t){const e=JSON.parse(t.query);if(e.origin)return u.Uri.parse(e.origin)}class dv{constructor(){no(this,"content"),no(this,"createTime",0),no(this,"modifiedTime",0),no(this,"_onDidChangeFile",new u.EventEmitter),no(this,"onDidChangeFile",this._onDidChangeFile.event)}watch(e,r){const n=this.onDidChangeFile(i=>{i.length===0&&i[0].type===u.FileChangeType.Deleted&&n.dispose()});return n}stat(e){var r,n;return{type:u.FileType.File,ctime:this.createTime,mtime:this.modifiedTime,size:(n=(r=this.content)==null?void 0:r.length)!=null?n:0}}readDirectory(e){return[]}createDirectory(e){}readFile(e){var r;return(r=this.content)!=null?r:new Uint8Array(0)}writeFile(e,r,n={create:!1,overwrite:!1}){const i=this.content;this.content=r,i===void 0?(this.createTime=new Date().getTime(),this._onDidChangeFile.fire([{uri:e,type:u.FileChangeType.Created}])):(this.modifiedTime=new Date().getTime(),this._onDidChangeFile.fire([{uri:e,type:u.FileChangeType.Changed}]))}delete(e,r){this.content=void 0,this.createTime=0,this.modifiedTime=0,this._onDidChangeFile.fire([{uri:e,type:u.FileChangeType.Deleted}])}rename(e,r,n){}}class hv{constructor(e){this.manager=e}async provideCompletionItems(e,r,n,i){if(!e.lineAt(r.line).text.startsWith(io))return[];const a=qu(e.uri);if(!a)return[];const o=this.manager.getManagerForFile(a);if(!o)return[];const m=await o.getPullRequestDefaults();return(await o.getLabels(void 0,m)).map(k=>{const P=new u.CompletionItem(k.name,u.CompletionItemKind.Color);return P.documentation=`#${k.color}`,P.commitCharacters=[" ",","],P})}}class pp extends u.CompletionItem{constructor(e){super(`${e.number}: ${e.title}`,u.CompletionItemKind.Issue);this.issue=e}}class pv{constructor(e,r,n){this.stateManager=e,this.repositoriesManager=r,this.context=n}async provideCompletionItems(e,r,n,i){var a,o,m;if(e.languageId!=="scminput"&&e.uri.scheme!=="comment"&&r.character>0&&i.triggerKind===u.CompletionTriggerKind.Invoke&&!e.getText(e.getWordRangeAtPosition(r)).match(/#[0-9]*$/))return[];if(r.character<=6&&e.languageId==="markdown"&&e.getText(new u.Range(r.with(void 0,0),r))===new Array(r.character+1).join("#")&&e.uri.scheme!=="comment"&&i.triggerKind===u.CompletionTriggerKind.TriggerCharacter)return[];if(i.triggerKind===u.CompletionTriggerKind.TriggerCharacter&&u.workspace.getConfiguration(ir).get("ignoreCompletionTrigger",[]).find(me=>me===e.languageId))return[];if(e.languageId!=="scminput"&&!await Ac(e,r))return[];let E=new u.Range(r,r);r.character-1>=0&&e.getText(new u.Range(r.translate(0,-1),r))==="#"&&(E=new u.Range(r.translate(0,-1),r)),await this.stateManager.tryInitializeAndWait();const k=new Map,P=new Date;let U,z;if(e.languageId==="scminput")z=Ic(e.uri);else if(e.uri.scheme==="comment")for(const me of u.window.visibleTextEditors){const Te=u.workspace.getWorkspaceFolder(u.Uri.file(me.document.uri.fsPath));if(Te){z=Te.uri;break}}else z=e.uri.scheme===Ln?(a=qu(e.uri))!=null?a:e.uri:e.languageId==="scminput"?Ic(e.uri):e.uri;if(!z)return[];let le;try{le=this.repositoriesManager.getManagerForFile(z),U=await(le==null?void 0:le.getPullRequestDefaults())}catch(me){}const ce=this.stateManager.getIssueCollection((o=le==null?void 0:le.repository.rootUri)!=null?o:z);for(const me of ce){const Te=(m=await me[1])!=null?m:[];if(Te.length!==0)if(Te[0]instanceof gr){let Re=0;for(const xe of Te)k.set(Gs(xe),await this.completionItemFromIssue(U,xe,P,E,e,Re++))}else for(let Re=0;Re<Te.length;Re++){const xe=Te[Re];for(const Oe of xe.issues)k.set(Gs(Oe),await this.completionItemFromIssue(U,Oe,P,E,e,Re,xe.milestone))}}return[...k.values()]}async completionItemFromIssue(e,r,n,i,a,o,m){var E;const k=new pp(r);if(a.languageId==="markdown")k.insertText=`[${Gs(r,e)}](${r.html_url})`;else{const U=u.workspace.getConfiguration(ir).get("issueCompletionFormatScm");a.uri.path.match(/scm\/git\/scm\d\/input/)&&typeof U=="string"?k.insertText=await wu(U,r,e):k.insertText=`${Gs(r,e)}`}k.documentation=r.body,k.range=i,k.detail=m?m.title:(E=r.milestone)==null?void 0:E.title;let P=(n.getTime()-new Date(r.updatedAt).getTime()).toString();return P=new Array(20-P.length).join("0")+P,k.sortText=`${o} ${P}`,k.filterText=`${k.detail} # ${r.number} ${r.title} ${k.documentation}`,k}async resolveCompletionItem(e,r){return e instanceof pp&&(e.documentation=await Pc(e.issue,this.context,this.repositoriesManager),e.command={command:"issues.issueCompletion",title:"Issue Completion Chose,"}),e}}class mv{constructor(e,r,n,i){this.manager=e,this.stateManager=r,this.context=n,this.telemetry=i}async provideHover(e,r,n){var i;if(!await kh(e,r))return;let a=e.getWordRangeAtPosition(r,za);if(a&&a.start.character>0){a=new u.Range(new u.Position(a.start.line,a.start.character-1),a.end);const m=e.getText(a).match(za),E=Rc(m),k=(i=this.manager.getManagerForFile(e.uri))!=null?i:this.manager.folderManagers[0];if(!k)return;if(E&&m&&E.issueNumber<=this.stateManager.maxIssueNumber(k.repository.rootUri))return this.createHover(k,m[0],E,a)}else return}async createHover(e,r,n,i){const a=await sf(this.stateManager,e,r,n);if(!!a)return this.telemetry.sendTelemetryEvent("issues.issueHover"),new u.Hover(await Pc(a,this.context,this.manager,n.commentNumber),i)}}var fv=Object.defineProperty,mp=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?fv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class ls extends u.TreeItem{constructor(e,r,n){super(r,n);this.uri=e}get labelAsString(){var e;return typeof this.label=="string"?this.label:(e=this.label)==null?void 0:e.label}}class gv{constructor(e,r,n){this.stateManager=e,this.manager=r,this.context=n,mp(this,"_onDidChangeTreeData",new u.EventEmitter),mp(this,"onDidChangeTreeData",this._onDidChangeTreeData.event),n.subscriptions.push(this.manager.onDidChangeState(()=>{this._onDidChangeTreeData.fire()})),n.subscriptions.push(this.stateManager.onDidChangeIssueData(()=>{this._onDidChangeTreeData.fire()})),n.subscriptions.push(this.stateManager.onDidChangeCurrentIssue(()=>{this._onDidChangeTreeData.fire()}))}getTreeItem(e){var r;let n;return e instanceof ls?n=e:e instanceof Vs?n=new ls(e.repository.rootUri,L.basename(e.repository.rootUri.fsPath),u.TreeItemCollapsibleState.Expanded):e instanceof gr?(n=new ls(void 0,`${e.number}: ${e.title}`,u.TreeItemCollapsibleState.None),n.iconPath=e.isOpen?new u.ThemeIcon("issues",new u.ThemeColor("issues.open")):new u.ThemeIcon("issue-closed",new u.ThemeColor("issues.closed")),((r=this.stateManager.currentIssue(e.uri))==null?void 0:r.issue.number)===e.number?(n.label=`\u2713 ${n.label}`,n.contextValue="currentissue"):this.stateManager.getSavedIssueState(e.number).branch?n.contextValue="continueissue":n.contextValue="issue",Jm(e)&&(n.contextValue="link"+n.contextValue)):n=new ls(e.uri,e.milestone.title,e.issues.length>0?u.TreeItemCollapsibleState.Expanded:u.TreeItemCollapsibleState.None),n}getChildren(e){return e===void 0&&this.manager.state!==en.RepositoriesLoaded?this.getStateChildren():this.getIssuesChildren(e)}async resolveTreeItem(e,r){return r instanceof gr&&(e.tooltip=await Pc(r,this.context,this.manager)),e}getStateChildren(){return this.manager.state===en.NeedsAuthentication?[]:[new ls(void 0,"Loading...")]}getQueryItems(e){const r=this.stateManager.getIssueCollection(e.repository.rootUri);if(r.size===1)return Array.from(r.values())[0];const n=Array.from(r.keys()),i=n[0];return n.map(a=>{const o=new ls(e.repository.rootUri,a);return o.contextValue="query",o.collapsibleState=a===i?u.TreeItemCollapsibleState.Expanded:u.TreeItemCollapsibleState.Collapsed,o})}getIssuesChildren(e){var r;return e===void 0?this.manager.folderManagers.length===1?this.getQueryItems(this.manager.folderManagers[0]):this.manager.folderManagers.length>1?this.manager.folderManagers:[]:e instanceof Vs?this.getQueryItems(e):e instanceof ls?e.uri?(r=this.stateManager.getIssueCollection(e.uri).get(e.labelAsString))!=null?r:[]:[]:e instanceof gr?[]:e.issues.map(n=>{const i=Object.assign(n);return i.uri=e.uri,i})}}var vv=Object.defineProperty,yv=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?vv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class bv{constructor(e){yv(this,"expression"),e.subscriptions.push(u.workspace.onDidChangeConfiguration(()=>{this.updateTriggers()})),this.updateTriggers()}updateTriggers(){const e=u.workspace.getConfiguration(ir).get("createIssueTriggers",[]);this.expression=e.length>0?new RegExp(e.join("|")):void 0}async provideCodeActions(e,r,n,i){if(this.expression===void 0||n.only&&n.only!==u.CodeActionKind.QuickFix)return[];const a=[];let o=r.start.line;do{const m=e.lineAt(o).text,E=m.substring(0,tf);if(!E.match(za)){const P=E.search(this.expression);if(P>=0){const U=new u.CodeAction("Create GitHub Issue",u.CodeActionKind.QuickFix),z=E.substring(P).search(/\s/),le=P+(z>0?z:E.match(this.expression)[0].length);U.command={title:"Create GitHub Issue",command:"issue.createIssueFromSelection",arguments:[{document:e,lineNumber:o,line:m,insertIndex:le,range:r}]},a.push(U);break}}o++}while(r.end.line>=o);return a}}var _v=Object.defineProperty,Kr=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?_v(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const wv=["Recovery"],Ev="currentIssue",rd="issues",fp="ignoreMilestones",nd=[{label:"My Issues",query:"default"}];class yy extends null{constructor(){super(...arguments);Kr(this,"uri")}}class kv{constructor(e,r,n){this.gitAPI=e,this.manager=r,this.context=n,Kr(this,"resolvedIssues",new Map),Kr(this,"_singleRepoStates",new Map),Kr(this,"_onRefreshCacheNeeded",new u.EventEmitter),Kr(this,"onRefreshCacheNeeded",this._onRefreshCacheNeeded.event),Kr(this,"_onDidChangeIssueData",new u.EventEmitter),Kr(this,"onDidChangeIssueData",this._onDidChangeIssueData.event),Kr(this,"_queries",[]),Kr(this,"_onDidChangeCurrentIssue",new u.EventEmitter),Kr(this,"onDidChangeCurrentIssue",this._onDidChangeCurrentIssue.event),Kr(this,"initializePromise"),Kr(this,"statusBarItem"),Kr(this,"isSettingIssue",!1),r.folderManagers.forEach(i=>{this.context.subscriptions.push(i.onDidChangeRepositories(()=>this.refresh()))})}getIssueCollection(e){var r;let n=(r=this._singleRepoStates.get(e.path))==null?void 0:r.issueCollection;return n||(n=new Map,n)}getOrCreateSingleRepoState(e,r){let n=this._singleRepoStates.get(e.path);return n||(r||(r=this.manager.getManagerForFile(e)),n={issueCollection:new Map,maxIssueNumber:0,folderManager:r},this._singleRepoStates.set(e.path,n),n)}async tryInitializeAndWait(){return this.initializePromise||(this.initializePromise=new Promise(e=>{if(this.manager.state===en.RepositoriesLoaded)this.doInitialize(),e();else{const r=this.manager.onDidChangeState(()=>{this.manager.state===en.RepositoriesLoaded&&(this.doInitialize(),r.dispose(),e())});this.context.subscriptions.push(r)}})),this.initializePromise}registerRepositoryChangeEvent(){async function e(n,i){var a;const o=n.getOrCreateSingleRepoState(i.rootUri),m=o.lastHead,E=o.lastBranch,k=i.state.HEAD?i.state.HEAD.commit:void 0;(i.state.HEAD?i.state.HEAD.commit:void 0)!==m&&await n.setIssueData(o.folderManager);const P=(a=i.state.HEAD)==null?void 0:a.name;(m!==k||E!==P)&&(!o.currentIssue||P!==o.currentIssue.branchName)&&(P?o.folderManager&&await n.setCurrentIssueFromBranch(o,P):await n.setCurrentIssue(o,void 0)),o.lastHead=i.state.HEAD?i.state.HEAD.commit:void 0,o.lastBranch=i.state.HEAD?i.state.HEAD.name:void 0}function r(n,i){n.context.subscriptions.push(i.state.onDidChange(async()=>{e(n,i)}))}this.context.subscriptions.push(this.gitAPI.onDidOpenRepository(n=>{e(this,n),r(this,n)})),this.gitAPI.repositories.forEach(n=>{r(this,n)})}refreshCacheNeeded(){this._onRefreshCacheNeeded.fire()}async refresh(){return this.setAllIssueData()}async doInitialize(){var e;this.cleanIssueState(),this._queries=u.workspace.getConfiguration(ir).get($s,nd),this._queries.length===0&&(this._queries=nd),this.context.subscriptions.push(u.workspace.onDidChangeConfiguration(r=>{r.affectsConfiguration(`${ir}.${$s}`)?(this._queries=u.workspace.getConfiguration(ir).get($s,nd),this._onRefreshCacheNeeded.fire()):r.affectsConfiguration(`${ir}.${fp}`)&&this._onRefreshCacheNeeded.fire()})),this.registerRepositoryChangeEvent(),await this.setAllIssueData(),this.context.subscriptions.push(this.onRefreshCacheNeeded(async()=>{await this.refresh()}));for(const r of this.manager.folderManagers){const n=this.getOrCreateSingleRepoState(r.repository.rootUri,r);n.lastHead=r.repository.state.HEAD?r.repository.state.HEAD.commit:void 0,this._singleRepoStates.set(r.repository.rootUri.path,n);const i=(e=r.repository.state.HEAD)==null?void 0:e.name;!n.currentIssue&&i&&await this.setCurrentIssueFromBranch(n,i)}}cleanIssueState(){const e=this.context.workspaceState.get(rd),r=e?JSON.parse(e):{issues:[],branches:[]},n=new Date().valueOf()-30*864e5;for(const i in r.issues)r.issues[i].stateModifiedTime<n&&(r.branches&&r.branches[i]&&delete r.branches[i],delete r.issues[i])}async getUsers(e){var r;await this.initializePromise;const n=await((r=this.manager.getManagerForFile(e))==null?void 0:r.getAssignableUsers()),i=new Map;for(const a in n)n[a].forEach(o=>{i.set(o.login,o)});return i}getUserMap(e){if(!this.initializePromise)return Promise.resolve(new Map);const r=this.getOrCreateSingleRepoState(e);return r.userMap||(r.userMap=this.getUsers(e)),r.userMap}async getCurrentUser(e){var r;return(r=this.manager.credentialStore.getCurrentUser(e))==null?void 0:r.login}async setAllIssueData(){return Promise.all(this.manager.folderManagers.map(e=>this.setIssueData(e)))}async setIssueData(e){var r,n;const i=this.getOrCreateSingleRepoState(e.repository.rootUri,e);i.issueCollection.clear();let a,o;for(const m of this._queries){let E;if(m.query===rf)E=this.setMilestones(e);else{if(!a)try{a=await e.getPullRequestDefaults()}catch(k){}if(!o){const k=Us(e.repository).filter(P=>P.authProviderId===bt["github-enterprise"]);o=await this.getCurrentUser(k.length?bt["github-enterprise"]:bt.github)}E=this.setIssues(e,await wu(m.query,void 0,a,o))}i.issueCollection.set(m.label,E)}i.maxIssueNumber=await e.getMaxIssue(),i.lastHead=(r=e.repository.state.HEAD)==null?void 0:r.commit,i.lastBranch=(n=e.repository.state.HEAD)==null?void 0:n.name}setIssues(e,r){return new Promise(async n=>{const i=await e.getIssues({fetchNextPage:!1},r);this._onDidChangeIssueData.fire(),n(i.items.map(a=>{const o=a;return o.uri=e.repository.rootUri,o}))})}async setCurrentIssueFromBranch(e,r){if(u.workspace.getConfiguration(ir).get(ph)==="off")return;let i;try{i=await e.folderManager.getPullRequestDefaults()}catch(o){return}if(r===i.base){await this.setCurrentIssue(e,void 0);return}if(e.currentIssue&&e.currentIssue.branchName===r)return;const a=this.getSavedState();for(const o in a.branches)if(o===r){const m=await e.folderManager.resolveIssue(a.branches[o].owner,a.branches[o].repositoryName,a.branches[o].number);m&&await this.setCurrentIssue(e,new hp(m,e.folderManager,this));return}}setMilestones(e){return new Promise(async r=>{const n=new Date,i=u.workspace.getConfiguration(ir).get(fp,[]),a=await e.getMilestones({fetchNextPage:!1},i.indexOf(Fh)<0);let o;const m=new Map,E=[];for(let k=0;k<a.items.length;k++){const P=a.items[k];P.uri=e.repository.rootUri;const U=a.items[k].milestone;if(P.issues&&P.issues.length<=0||i.indexOf(U.title)>=0)continue;E.push(P);let z=U.dueOn?new Date(U.dueOn):void 0;z||(z=new Date(this.removeDateExcludeStrings(U.title)),isNaN(z.getTime())&&(z=new Date(U.createdAt))),z<n&&(o===void 0||z>o)&&(o=z),m.set(U.id?U.id:U.title,z)}E.sort((k,P)=>{const U=m.get(k.milestone.id?k.milestone.id:k.milestone.title),z=m.get(P.milestone.id?P.milestone.id:P.milestone.title);return o&&U>=o&&z>=o?U<=z?-1:1:U>=z?-1:1}),this._onDidChangeIssueData.fire(),r(E)})}removeDateExcludeStrings(e){return wv.forEach(r=>e=e.replace(r,"")),e}currentIssue(e){var r;return(r=this._singleRepoStates.get(e.path))==null?void 0:r.currentIssue}currentIssues(){return Array.from(this._singleRepoStates.values()).filter(e=>e==null?void 0:e.currentIssue).map(e=>e.currentIssue)}maxIssueNumber(e){var r,n;return(n=(r=this._singleRepoStates.get(e.path))==null?void 0:r.maxIssueNumber)!=null?n:0}async setCurrentIssue(e,r){if(!(this.isSettingIssue&&r===void 0)){if(this.isSettingIssue=!0,e instanceof Vs){const n=this._singleRepoStates.get(e.repository.rootUri.path);if(!n)return;e=n}try{if(e.currentIssue&&(r==null?void 0:r.issue.number)===e.currentIssue.issue.number)return;e.currentIssue&&await e.currentIssue.stopWorking(),r&&this.context.subscriptions.push(r.onDidChangeCurrentIssueState(()=>this.updateStatusBar())),this.context.workspaceState.update(Ev,r==null?void 0:r.issue.number),(!r||await r.startWorking())&&(e.currentIssue=r,this.updateStatusBar()),this._onDidChangeCurrentIssue.fire()}catch(n){}finally{this.isSettingIssue=!1}}}updateStatusBar(){const e=this.currentIssues(),r=e.length>0;if(!r){this.statusBarItem&&(this.statusBarItem.hide(),this.statusBarItem.dispose(),this.statusBarItem=void 0);return}r&&!this.statusBarItem&&(this.statusBarItem=u.window.createStatusBarItem("github.issues.status",u.StatusBarAlignment.Left,0),this.statusBarItem.name="GitHub Active Issue");const n=this.statusBarItem;n.text=`$(issues) Issue ${e.map(i=>Gs(i.issue,i.repoDefaults)).join(", ")}`,n.tooltip=e.map(i=>i.issue.title).join(", "),n.command="issue.statusBar",n.show()}getSavedState(){const e=this.context.workspaceState.get(rd);return e?JSON.parse(e):{issues:Object.create(null),branches:Object.create(null)}}getSavedIssueState(e){var r;return(r=this.getSavedState().issues[`${e}`])!=null?r:{}}async setSavedIssueState(e,r){const n=this.getSavedState();return n.issues[`${e.number}`]={...r,stateModifiedTime:new Date().valueOf()},r.branch&&(n.branches||(n.branches=Object.create(null)),n.branches[r.branch]={number:e.number,owner:e.remote.owner,repositoryName:e.remote.repositoryName}),this.context.workspaceState.update(rd,JSON.stringify(n))}}class Sv{constructor(e,r,n){this.stateManager=e,this.manager=r}async provideCompletionItems(e,r,n,i){var a;if(e.languageId!=="scminput"&&e.uri.scheme!==Ln&&r.character>0&&i.triggerKind===u.CompletionTriggerKind.Invoke&&e.getText(new u.Range(r.with(void 0,r.character-1),r))!=="@")return[];if(i.triggerKind===u.CompletionTriggerKind.TriggerCharacter&&u.workspace.getConfiguration(ir).get("ignoreUserCompletionTrigger",[]).find(k=>k===e.languageId))return[];if(e.languageId!=="scminput"&&!await Ac(e,r))return[];let o=new u.Range(r,r);r.character-1>=0&&e.getText(new u.Range(r.translate(0,-1),r))==="@"&&(o=new u.Range(r.translate(0,-1),r));const m=e.uri.scheme===Ln?(a=qu(e.uri))!=null?a:e.uri:e.languageId==="scminput"?Ic(e.uri):e.uri;if(!m)return[];const E=[];return(await this.stateManager.getUserMap(m)).forEach(k=>{const P=new of({label:k.login,description:k.name},u.CompletionItemKind.User);P.insertText=`@${k.login}`,P.login=k.login,P.uri=m,P.range=o,P.detail=k.name,P.filterText=`@ ${k.login} ${k.name}`,e.uri.scheme===Ln&&(P.commitCharacters=[" ",","]),E.push(P)}),E}async resolveCompletionItem(e,r){const n=this.manager.getManagerForFile(e.uri);if(!n)return e;const i=await n.getPullRequestDefaults(),a=await n.resolveUser(i.owner,i.repo,e.login);return a&&(e.documentation=Cc(i,a),e.command={command:"issues.userCompletion",title:"User Completion Chosen"}),e}}const Tv=["abstract","access","alias","async","augments","author","borrows","callback","class","classdesc","constant","constructs","copyright","default","deprecated","description","enum","event","example","exports","external","host","file","fires","function","generator","global","hideconstructor","ignore","implements","inheritdoc","inner","instance","interface","kind","lends","license","listens","member","memberof","mixes","mixin","module","name","namespace","override","package","param","private","property","protected","public","readonly","requires","returns","see","since","static","summary","this","throws","exception","todo","tutorial","type","typedef","variation","version","yields","yield","link"];class Rv{constructor(e,r){this.manager=e,this.telemetry=r}async provideHover(e,r,n){if(!await kh(e,r))return;let i=e.getWordRangeAtPosition(r,Tc);if(i&&i.start.character>0){i=new u.Range(new u.Position(i.start.line,i.start.character),i.end);const o=e.getText(i).match(Tc);if(o){const m=o[1];return(e.languageId==="javascript"||e.languageId==="typescript")&&Tv.indexOf(m)>=0?void 0:this.createHover(e.uri,m,i)}}else return}async createHover(e,r,n){try{const i=this.manager.getManagerForFile(e);if(!i)return;const a=await i.getPullRequestDefaults(),o=await i.resolveUser(a.owner,a.repo,r);return o&&o.name?(this.telemetry.sendTelemetryEvent("issues.userHover"),new u.Hover(Cc(a,o),n)):void 0}catch(i){return}}}var Cv=Object.defineProperty,id=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Cv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Pv="issueCompletions.enabled",Nv="userCompletions.enabled",gp="issues.creatingFromFile";class Av{constructor(e,r,n,i,a){this.gitAPI=e,this.manager=r,this.reviewManagers=n,this.context=i,this.telemetry=a,id(this,"_stateManager"),id(this,"createIssueInfo"),id(this,"documentFilters",[{language:"php"},{language:"powershell"},{language:"jade"},{language:"python"},{language:"r"},{language:"razor"},{language:"ruby"},{language:"rust"},{language:"scss"},{language:"search-result"},{language:"shaderlab"},{language:"shellscript"},{language:"sql"},{language:"swift"},{language:"typescript"},{language:"vb"},{language:"xml"},{language:"yaml"},{language:"markdown"},{language:"bat"},{language:"clojure"},{language:"coffeescript"},{language:"jsonc"},{language:"c"},{language:"cpp"},{language:"csharp"},{language:"css"},{language:"dockerfile"},{language:"fsharp"},{language:"git-commit"},{language:"go"},{language:"groovy"},{language:"handlebars"},{language:"hlsl"},{language:"ini"},{language:"java"},{language:"javascriptreact"},{language:"javascript"},{language:"json"},{language:"less"},{language:"log"},{language:"lua"},{language:"makefile"},{language:"ignore"},{language:"properties"},{language:"objective-c"},{language:"perl"},{language:"perl6"},"*"]),this._stateManager=new kv(e,this.manager,this.context)}async initialize(){return this.context.subscriptions.push(u.workspace.registerFileSystemProvider(Ln,new dv)),this.registerCompletionProviders(),this.context.subscriptions.push(u.languages.registerCompletionItemProvider({scheme:Ln},new hv(this.manager)," ",",")),this.context.subscriptions.push(u.window.createTreeView("issues:github",{showCollapseAll:!0,treeDataProvider:new gv(this._stateManager,this.manager,this.context)})),this.context.subscriptions.push(u.commands.registerCommand("issue.createIssueFromSelection",(e,r)=>(this.telemetry.sendTelemetryEvent("issue.createIssueFromSelection"),this.createTodoIssue(e,r)),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.createIssueFromClipboard",()=>(this.telemetry.sendTelemetryEvent("issue.createIssueFromClipboard"),this.createTodoIssueClipboard()),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.copyGithubPermalink",e=>(this.telemetry.sendTelemetryEvent("issue.copyGithubPermalink"),this.copyPermalink(e instanceof u.Uri?e:void 0)),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.copyMarkdownGithubPermalink",()=>(this.telemetry.sendTelemetryEvent("issue.copyMarkdownGithubPermalink"),this.copyMarkdownPermalink()),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.openGithubPermalink",()=>(this.telemetry.sendTelemetryEvent("issue.openGithubPermalink"),this.openPermalink()),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.openIssue",e=>(this.telemetry.sendTelemetryEvent("issue.openIssue"),this.openIssue(e)))),this.context.subscriptions.push(u.commands.registerCommand("issue.startWorking",e=>(this.telemetry.sendTelemetryEvent("issue.startWorking"),this.startWorking(e)),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.startWorkingBranchDescriptiveTitle",e=>(this.telemetry.sendTelemetryEvent("issue.startWorking"),this.startWorking(e)),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.continueWorking",e=>(this.telemetry.sendTelemetryEvent("issue.continueWorking"),this.startWorking(e)),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.startWorkingBranchPrompt",e=>(this.telemetry.sendTelemetryEvent("issue.startWorkingBranchPrompt"),this.startWorkingBranchPrompt(e)),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.stopWorking",e=>(this.telemetry.sendTelemetryEvent("issue.stopWorking"),this.stopWorking(e)),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.stopWorkingBranchDescriptiveTitle",e=>(this.telemetry.sendTelemetryEvent("issue.stopWorking"),this.stopWorking(e)),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.statusBar",()=>(this.telemetry.sendTelemetryEvent("issue.statusBar"),this.statusBar()),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.copyIssueNumber",e=>(this.telemetry.sendTelemetryEvent("issue.copyIssueNumber"),this.copyIssueNumber(e)))),this.context.subscriptions.push(u.commands.registerCommand("issue.copyIssueUrl",e=>(this.telemetry.sendTelemetryEvent("issue.copyIssueUrl"),this.copyIssueUrl(e)))),this.context.subscriptions.push(u.commands.registerCommand("issue.refresh",()=>(this.telemetry.sendTelemetryEvent("issue.refresh"),this.refreshView()),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.suggestRefresh",()=>(this.telemetry.sendTelemetryEvent("issue.suggestRefresh"),this.suggestRefresh()),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.getCurrent",()=>(this.telemetry.sendTelemetryEvent("issue.getCurrent"),this.getCurrent()),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.editQuery",e=>(this.telemetry.sendTelemetryEvent("issue.editQuery"),this.editQuery(e)),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.createIssue",()=>(this.telemetry.sendTelemetryEvent("issue.createIssue"),this.createIssue()),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.createIssueFromFile",async()=>{this.telemetry.sendTelemetryEvent("issue.createIssueFromFile"),await u.commands.executeCommand("setContext",gp,!0),await this.createIssueFromFile(),await u.commands.executeCommand("setContext",gp,!1)},this)),this.context.subscriptions.push(u.commands.registerCommand("issue.issueCompletion",()=>{this.telemetry.sendTelemetryEvent("issue.issueCompletion")})),this.context.subscriptions.push(u.commands.registerCommand("issue.userCompletion",()=>{this.telemetry.sendTelemetryEvent("issue.userCompletion")})),this.context.subscriptions.push(u.commands.registerCommand("issue.signinAndRefreshList",async()=>this.manager.authenticate())),this.context.subscriptions.push(u.commands.registerCommand("issue.goToLinkedCode",async e=>Zm(e,this.manager))),this._stateManager.tryInitializeAndWait().then(()=>{this.context.subscriptions.push(u.languages.registerHoverProvider("*",new mv(this.manager,this._stateManager,this.context,this.telemetry))),this.context.subscriptions.push(u.languages.registerHoverProvider("*",new Rv(this.manager,this.telemetry))),this.context.subscriptions.push(u.languages.registerCodeActionsProvider("*",new bv(this.context)))})}dispose(){}registerCompletionProviders(){const e=[{provider:pv,trigger:"#",disposable:void 0,configuration:Pv},{provider:Sv,trigger:"@",disposable:void 0,configuration:Nv}];for(const r of e)u.workspace.getConfiguration(ir).get(r.configuration,!0)&&this.context.subscriptions.push(r.disposable=u.languages.registerCompletionItemProvider(this.documentFilters,new r.provider(this._stateManager,this.manager,this.context),r.trigger));this.context.subscriptions.push(u.workspace.onDidChangeConfiguration(r=>{for(const n of e)if(r.affectsConfiguration(`${ir}.${n.configuration}`)){const i=u.workspace.getConfiguration(ir).get(n.configuration,!0);!i&&n.disposable?(n.disposable.dispose(),n.disposable=void 0):i&&!n.disposable&&this.context.subscriptions.push(n.disposable=u.languages.registerCompletionItemProvider(this.documentFilters,new n.provider(this._stateManager,this.manager,this.context),n.trigger));break}}))}async createIssue(){var e,r;let n=(e=u.window.activeTextEditor)==null?void 0:e.document.uri;if(n||(n=(r=await this.chooseRepo("Select the repo to create the issue in."))==null?void 0:r.repository.rootUri),n)return this.makeNewIssueFile(n)}async createIssueFromFile(){var e,r,n,i;let a;if(!u.window.activeTextEditor||u.window.activeTextEditor.document.uri.scheme!==Ln)return;a=u.window.activeTextEditor.document.getText();const o=a.indexOf(`\r
\r
`),m=a.indexOf(`

`);let E;if(o<0&&m<0)return;o<0?E=m:m<0?E=o:E=Math.min(o,m);const k=a.substring(0,E);let P;if(a=a.substring(E+2).trim(),a.startsWith(Lu)){const ce=a.split(/\r\n|\n/,1);ce.length===1&&(P=ce[0].substring(Lu.length).split(",").map(me=>(me=me.trim(),me.startsWith("@")&&(me=me.substring(1)),me)),a=a.substring(ce[0].length).trim())}let U;if(a.startsWith(io)){const ce=a.split(/\r\n|\n/,1);ce.length===1&&(U=ce[0].substring(io.length).split(",").map(me=>me.trim()).filter(me=>me),a=a.substring(ce[0].length).trim())}const z=a;if(!k||!z)return;const le=await this.doCreateIssue((e=this.createIssueInfo)==null?void 0:e.document,(r=this.createIssueInfo)==null?void 0:r.newIssue,k,z,P,U,(n=this.createIssueInfo)==null?void 0:n.lineNumber,(i=this.createIssueInfo)==null?void 0:i.insertIndex,qu(u.window.activeTextEditor.document.uri));this.createIssueInfo=void 0,le&&await u.commands.executeCommand("workbench.action.closeActiveEditor")}async editQuery(e){const r=u.workspace.getConfiguration(ir),n=r.inspect($s);let i;if(n==null?void 0:n.workspaceValue)i="workbench.action.openWorkspaceSettingsFile";else{const o=r.get($s);(n==null?void 0:n.defaultValue)&&JSON.stringify(n==null?void 0:n.defaultValue)===JSON.stringify(o)&&r.update($s,n.defaultValue,u.ConfigurationTarget.Global),i="workbench.action.openSettingsJson"}await u.commands.executeCommand(i);const a=u.window.activeTextEditor;if(a){const m=a.document.getText().search(e.labelAsString);if(m>=0){const E=a.document.positionAt(m);a.revealRange(new u.Range(E,E)),a.selection=new u.Selection(E,E)}}}getCurrent(){const e=this._stateManager.currentIssues();if(e.length>0)return{owner:e[0].issue.remote.owner,repo:e[0].issue.remote.repositoryName,number:e[0].issue.number}}refreshView(){this._stateManager.refreshCacheNeeded()}async suggestRefresh(){return await u.commands.executeCommand("hideSuggestWidget"),await this._stateManager.refresh(),u.commands.executeCommand("editor.action.triggerSuggest")}openIssue(e){if(e instanceof gr)return u.env.openExternal(u.Uri.parse(e.html_url))}async doStartWorking(e,r,n){let i=e,a=r.githubRepository,o=r.remote;if(!i){if(i=await this.chooseRepo("Choose which repository you want to work on this isssue in."),!i)return;a=await i.getOrigin(),o=a.remote}const m=await i.findUpstreamForItem({githubRepository:a,remote:o});m.needsFork&&await i.tryOfferToFork(a)===void 0||await this._stateManager.setCurrentIssue(i,new hp(r,i,this._stateManager,m.remote,n))}async startWorking(e){e instanceof gr&&this.doStartWorking(this.manager.getManagerForIssueModel(e),e)}async startWorkingBranchPrompt(e){e instanceof gr&&this.doStartWorking(this.manager.getManagerForIssueModel(e),e,!0)}async stopWorking(e){var r;let n=this.manager.getManagerForIssueModel(e);!n&&(n=await this.chooseRepo("Choose which repository you want to stop working on this issue in."),!n)||e instanceof gr&&((r=this._stateManager.currentIssue(n.repository.rootUri))==null?void 0:r.issue.number)===e.number&&await this._stateManager.setCurrentIssue(n,void 0)}async statusBarActions(e){const r=`$(globe) Open #${e.issue.number} ${e.issue.title}`,n=`$(git-pull-request) Create pull request for #${e.issue.number} (pushes branch)`;let i;try{i=await e.manager.getPullRequestDefaults()}catch(E){}const a=`$(primitive-square) Stop working on #${e.issue.number}`,o=e.branchName&&i?[r,n,a]:[r,n,a];switch(await u.window.showQuickPick(o,{placeHolder:"Current issue options"})){case r:return this.openIssue(e.issue);case n:{const E=Pi.getReviewManagerForFolderManager(this.reviewManagers,e.manager);if(E)return yf(e.manager,E,this._stateManager);break}case a:return this._stateManager.setCurrentIssue(e.manager,void 0)}}async statusBar(){const e=this._stateManager.currentIssues();if(e.length===1)return this.statusBarActions(e[0]);{const r=e.map(i=>({label:`#${i.issue.number} from ${i.issue.githubRepository.remote.owner}/${i.issue.githubRepository.remote.repositoryName}`,currentIssue:i})),n=await u.window.showQuickPick(r);if(n)return this.statusBarActions(n.currentIssue)}}stringToUint8Array(e){return new TextEncoder().encode(e)}copyIssueNumber(e){if(e instanceof gr)return u.env.clipboard.writeText(e.number.toString())}copyIssueUrl(e){if(e instanceof gr)return u.env.clipboard.writeText(e.html_url)}async createTodoIssueClipboard(){return this.createTodoIssue(void 0,await u.env.clipboard.readText())}async createTodoIssueBody(e,r){if(r||(e==null?void 0:e.document.isUntitled))return r;let n="";if(e){const i=Uc(this.gitAPI,e.document.uri);(i==null?void 0:i.state.workingTreeChanges.find(o=>o.uri.toString()===e.document.uri.toString()))&&(n=`\`\`\`
${e.line}
\`\`\`

`)}return n+=(await Nc(this.gitAPI,e)).permalink,n}async createTodoIssue(e,r){let n,i,a,o,m,E;if(!e&&u.window.activeTextEditor)n=u.window.activeTextEditor.document,E=n.getText(u.window.activeTextEditor.selection);else if(e)n=e.document,a=e.insertIndex,o=e.lineNumber,i=e.line.substring(a,e.line.length).trim(),E=n.getText(e.range.isEmpty?n.lineAt(e.range.start.line).range:e.range);else return;const k=E.match(Tc);k&&k.length===2&&(await this._stateManager.getUserMap(n.uri)).has(k[1])&&(m=[k[1]]);let P;const U=await this.createTodoIssueBody(e,r),z=u.window.createInputBox();z.value=i!=null?i:"",z.prompt="Set the issue title. Confirm to create the issue now or use the edit button to edit the issue title and description.",z.title="Create Issue",z.buttons=[{iconPath:new u.ThemeIcon("edit"),tooltip:"Edit Description"}],z.onDidAccept(async()=>{P=z.value,P&&(z.busy=!0,await this.doCreateIssue(n,e,P,U,m,void 0,o,a),z.busy=!1),z.hide()}),z.onDidTriggerButton(async()=>{P=z.value,z.busy=!0,this.createIssueInfo={document:n,newIssue:e,lineNumber:o,insertIndex:a},this.makeNewIssueFile(n.uri,P,U,m),z.busy=!1,z.hide()}),z.show()}async makeNewIssueFile(e,r,n,i){const a=`?{"origin":"${e.toString()}"}`,o=u.Uri.parse(`${Ln}:/${cv}${a}`);if(u.window.visibleTextEditors.filter(me=>me.document.uri.scheme===Ln).length>0)return;await u.workspace.fs.delete(o);const m=`${Lu} ${i&&i.length>0?i.map(me=>"@"+me).join(", ")+" ":""}`,E=`${io} `,k=`${r!=null?r:"Issue Title"}

${m}
${E}

${n!=null?n:""}

<!-- Edit the body of your new issue then click the \u2713 "Create Issue" button in the top right of the editor. The first line will be the issue title. Assignees and Labels follow after a blank line. Leave an empty line before beginning the body of the issue. -->`;await u.workspace.fs.writeFile(o,this.stringToUint8Array(k));const P=u.window.createTextEditorDecorationType({after:{contentText:" Comma-separated usernames, either @username or just username.",fontStyle:"italic",color:new u.ThemeColor("issues.newIssueDecoration")}}),U=u.window.createTextEditorDecorationType({after:{contentText:" Comma-separated labels.",fontStyle:"italic",color:new u.ThemeColor("issues.newIssueDecoration")}}),z=u.window.onDidChangeActiveTextEditor(me=>{if((me==null?void 0:me.document.uri.scheme)===Ln){const Te=me.document.lineAt(2);Te.text.startsWith(Lu)&&me.setDecorations(P,[new u.Range(new u.Position(2,0),new u.Position(2,Te.text.length))]);const Re=me.document.lineAt(3);Re.text.startsWith(io)&&me.setDecorations(U,[new u.Range(new u.Position(3,0),new u.Position(3,Re.text.length))])}}),le=await u.window.showTextDocument(o),ce=u.workspace.onDidCloseTextDocument(me=>{me===le.document&&(z.dispose(),ce.dispose())})}async verifyLabels(e,r){var n;if(!r.labels)return!0;const i=(await e.getLabels(void 0,r)).map(m=>m.name),a=[],o=[];if((n=r.labels)==null||n.forEach(m=>{let E=typeof m=="string"?m:m.name;!E||(i.includes(E)?o.push(E):a.push(E))}),a.length>0){const m="Yes",E="No";switch(await u.window.showInformationMessage(`The following labels don't exist in this repository: ${a.join(", ")}. 
Do you want to create these labels?`,{modal:!0},m,E)){case m:return!0;case E:return r.labels=o,!0;default:return!1}}return!0}async chooseRepo(e){const r=[];for(const i of this.manager.folderManagers)try{const a=await i.getPullRequestDefaults();r.push({label:`${a.owner}/${a.repo}`,repo:i})}catch(a){}if(r.length===0)return;if(r.length===1)return r[0].repo;const n=await u.window.showQuickPick(r,{placeHolder:e});return n==null?void 0:n.repo}async doCreateIssue(e,r,n,i,a,o,m,E,k){let P,U;if(e?U=this.manager.getManagerForFile(e.uri):k&&(U=this.manager.getManagerForFile(k)),U||(U=await this.chooseRepo("Choose where to create the issue.")),!U)return!1;try{P=await U.getPullRequestDefaults()}catch(me){return u.window.showErrorMessage("There is no remote. Can't create an issue."),!1}const z=i||(r==null?void 0:r.document.isUntitled)?i:(await Nc(this.gitAPI,r)).permalink,le={owner:P.owner,repo:P.repo,title:n,body:z,assignees:a,labels:o};if(!await this.verifyLabels(U,le))return!1;const ce=await U.createIssue(le);if(ce){if(e!==void 0&&E!==void 0&&m!==void 0){const me=new u.WorkspaceEdit,Te=u.workspace.getConfiguration(ir).get("createInsertFormat","number")==="number"?`#${ce.number}`:ce.html_url;me.insert(e.uri,new u.Position(m,E),` ${Te}`),await u.workspace.applyEdit(me)}else{const me="Copy URL",Te="Open Issue";u.window.showInformationMessage("Issue created",me,Te).then(async Re=>{switch(Re){case me:await u.env.clipboard.writeText(ce.html_url);break;case Te:await u.env.openExternal(u.Uri.parse(ce.html_url));break}})}return this._stateManager.refreshCacheNeeded(),!0}return!1}async getPermalinkWithError(e){const r=await Nc(this.gitAPI,void 0,e);return r.error&&u.window.showWarningMessage(`Unable to create a GitHub permalink for the selection. ${r.error}`),r}async getContextualizedPermalink(e,r){let n;try{n=await u.env.asExternalUri(e)}catch(m){return r}const i=n.scheme==="https"&&/^(vscode|github)\./.test(n.authority)?n.authority:void 0;if(!i)return r;const a=u.Uri.parse(r),o=/^(github)\./.test(n.authority)?a.path:`/github${a.path}`;return a.with({authority:i,path:o}).toString()}async copyPermalink(e){const r=await this.getPermalinkWithError(e);if(r.permalink)return u.env.clipboard.writeText(r.originalFile?await this.getContextualizedPermalink(r.originalFile,r.permalink):r.permalink)}getMarkdownLinkText(){if(!u.window.activeTextEditor)return;let e=u.window.activeTextEditor.selection;e.start.line!==e.end.line&&(e=new u.Range(e.start,new u.Position(e.start.line+1,0)));const r=u.window.activeTextEditor.document.getText(e);if(r)return r;if(e=u.window.activeTextEditor.document.getWordRangeAtPosition(e.start),e)return u.window.activeTextEditor.document.getText(e)}async copyMarkdownPermalink(){const e=await this.getPermalinkWithError(),r=this.getMarkdownLinkText();if(e.permalink&&r)return u.env.clipboard.writeText(`[${r.trim()}](${e.permalink})`)}async openPermalink(){const e=await this.getPermalinkWithError();if(e.permalink)return u.env.openExternal(u.Uri.parse(e.originalFile?await this.getContextualizedPermalink(e.originalFile,e.permalink):e.permalink))}}var Iv=Object.defineProperty,Ov=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Iv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Dv{constructor(){Ov(this,"_disposables"),this._disposables=[],this._disposables.push(u.window.registerFileDecorationProvider(this))}provideFileDecoration(e,r){if(e.scheme!=="filechange"&&e.scheme!==ii)return;const n=Li(e);if(n&&n.status!==void 0)return{propagate:!1,badge:this.letter(n.status),color:this.color(n.status)};const i=er(e);if(i&&i.status!==void 0)return{propagate:!1,badge:this.letter(i.status),color:this.color(i.status)}}color(e){let r;switch(e){case Ye.MODIFY:r="gitDecoration.modifiedResourceForeground";break;case Ye.ADD:r="gitDecoration.addedResourceForeground";break;case Ye.DELETE:r="gitDecoration.deletedResourceForeground";break;case Ye.RENAME:r="gitDecoration.renamedResourceForeground";break;case Ye.UNKNOWN:r=void 0;break;case Ye.UNMERGED:r="gitDecoration.conflictingResourceForeground";break}return r?new u.ThemeColor(r):void 0}letter(e){switch(e){case Ye.MODIFY:return"M";case Ye.ADD:return"A";case Ye.DELETE:return"D";case Ye.RENAME:return"R";case Ye.UNKNOWN:return"U";case Ye.UNMERGED:return"C"}return""}dispose(){this._disposables.forEach(e=>e.dispose())}}var xv=Object.defineProperty,Uu=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?xv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Mv extends Dr{constructor(e,r,n,i,a,o){super();this.parent=e,this.pullRequestManager=r,this.pullRequest=n,this.commit=i,this.comments=a,this.isCurrent=o,Uu(this,"sha"),Uu(this,"collapsibleState"),Uu(this,"iconPath"),Uu(this,"contextValue"),this.label=i.commit.message,this.sha=i.sha,this.collapsibleState=u.TreeItemCollapsibleState.Collapsed;let m;try{i.author&&i.author.avatar_url&&(m=u.Uri.parse(`${i.author.avatar_url}&s=${64}`))}catch(E){}this.iconPath=m,this.contextValue="commit"}getTreeItem(){return this}async getChildren(){var e;const n=((e=await this.pullRequest.getCommitChangedFiles(this.commit))!=null?e:[]).map(i=>{const a=this.comments.filter(k=>k.path===i.filename&&k.originalCommitId===this.commit.sha),o=i.filename,m=u.Uri.parse(L.posix.join(`commit~${this.commit.sha.substr(0,8)}`,o)),E=new Ws(this,this.pullRequestManager,this.pullRequest,ms(i.status),o,void 0,Yr(m,o,void 0,this.commit.sha,!0,{base:!1},this.pullRequestManager.repository.rootUri),Yr(m,o,void 0,this.commit.sha,!0,{base:!0},this.pullRequestManager.repository.rootUri),[],a,this.commit.sha,this.isCurrent);return E.useViewChangesCommand(),E});return Promise.resolve(n)}}var Fv=Object.defineProperty,so=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Fv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Lv extends Dr{constructor(e,r,n,i){super();so(this,"label","Commits"),so(this,"collapsibleState"),so(this,"_folderRepoManager"),so(this,"_pr"),so(this,"_comments"),this.parent=e,this._pr=n,this._folderRepoManager=r,this._comments=i,this.collapsibleState=u.TreeItemCollapsibleState.Collapsed}getTreeItem(){return this}async getChildren(){try{const e=await this._pr.getCommits(),r=e.map((n,i)=>new Mv(this,this._folderRepoManager,this._pr,n,this._comments,i===e.length-1));return Promise.resolve(r)}catch(e){return Promise.resolve([])}}}var qv=Object.defineProperty,sd=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?qv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Uv extends Dr{constructor(e,r){super();this.parent=e,this._fileChanges=r,sd(this,"label","Files"),sd(this,"collapsibleState"),sd(this,"directories",[]),this.collapsibleState=u.TreeItemCollapsibleState.Expanded;const n=new os(this,"");this._fileChanges.forEach(i=>n.addFile(i)),n.finalize(),n.label===""?this.directories=n.children:this.directories=[n]}getTreeItem(){return this}async getChildren(){let e;return u.workspace.getConfiguration("githubPullRequests").get("fileListLayout")==="tree"?e=this.directories:e=this._fileChanges,Promise.resolve(e)}}var $v=Object.defineProperty,$u=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?$v(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Gv extends as{constructor(e,r,n,i,a){super(e,r.title,r.userAvatarUri,r);this.parent=e,this._pullRequest=r,this._pullRequestManager=n,this._comments=i,this._localFileChanges=a,$u(this,"_filesCategoryNode"),$u(this,"_commitsCategoryNode"),$u(this,"collapsibleState",u.TreeItemCollapsibleState.Expanded),$u(this,"_disposables",[]),this.getTreeItem(),this._disposables.push(u.window.onDidChangeActiveTextEditor(o=>{const m=o==null?void 0:o.document.uri.toString();this.revealActiveEditorInTree(m)})),this._disposables.push(this.parent.view.onDidChangeVisibility(o=>{var m;const E=(m=u.window.activeTextEditor)==null?void 0:m.document.uri.toString();this.revealActiveEditorInTree(E)})),this._disposables.push(r.onDidInvalidate(()=>{this.refresh()}))}revealActiveEditorInTree(e){if(this.parent.view.visible&&e){const r=this._localFileChanges.find(n=>n.filePath.toString()===e);r&&this.reveal(r,{select:!0})}}async getChildren(){return(!this._filesCategoryNode||!this._commitsCategoryNode)&&(this._filesCategoryNode=new Uv(this.parent,this._localFileChanges),this._commitsCategoryNode=new Lv(this.parent,this._pullRequestManager,this._pullRequest,this._comments)),[this._filesCategoryNode,this._commitsCategoryNode]}getTreeItem(){return this.label=this._pullRequest.title,this}dispose(){this._disposables.forEach(e=>e.dispose()),this._disposables=[]}}var Hv=Object.defineProperty,ao=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Hv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class vp extends u.Disposable{constructor(e){super(()=>this.dispose());this._context=e,ao(this,"_onDidChangeTreeData",new u.EventEmitter),ao(this,"onDidChangeTreeData",this._onDidChangeTreeData.event),ao(this,"_disposables",[]),ao(this,"_pullRequestManagerMap",new Map),ao(this,"_view"),this._view=u.window.createTreeView("prStatus:github",{treeDataProvider:this,showCollapseAll:!0}),this._context.subscriptions.push(this._view),this._disposables.push(u.workspace.onDidChangeConfiguration(async r=>{if(r.affectsConfiguration(`${Or}.fileListLayout`)){this._onDidChangeTreeData.fire();const n=u.workspace.getConfiguration(`${Or}`).get("fileListLayout");await u.commands.executeCommand("setContext","fileListLayout:flat",n==="flat")}else r.affectsConfiguration("git.openDiffOnClick")&&this._onDidChangeTreeData.fire()}))}get view(){return this._view}refresh(){this._onDidChangeTreeData.fire()}updateViewTitle(){let e;if(this._pullRequestManagerMap.size===1){const r=this._pullRequestManagerMap.values().next();r.done||(e=r.value.pullRequestModel.number)}this._view.title=e?`Changes in Pull Request #${e}`:"Changes in Pull Request"}async addPrToView(e,r,n,i,a){const o=new Gv(this,r,e,i,n);this._pullRequestManagerMap.set(e,o),this.updateViewTitle(),await u.commands.executeCommand("setContext","github:inReviewMode",!0),this._onDidChangeTreeData.fire(),a&&this.reveal(o)}async removePrFromView(e){this._pullRequestManagerMap.delete(e),this.updateViewTitle(),this._pullRequestManagerMap.size===0&&this.hide(),this._onDidChangeTreeData.fire()}async hide(){await u.commands.executeCommand("setContext","github:inReviewMode",!1)}getTreeItem(e){return e.getTreeItem()}getParent(e){return e.getParent()}async reveal(e,r){try{await this._view.reveal(e,r)}catch(n){C.appendLine(n,"PullRequestChangesTreeDataProvider")}}async getChildren(e){if(e)return await e.getChildren();{const r=[];if(this._pullRequestManagerMap.size>=1)for(const n of this._pullRequestManagerMap.values())r.push(n);return r}}getDescriptionNode(e){return this._pullRequestManagerMap.get(e)}async resolveTreeItem(e,r){return r instanceof Ws&&await r.resolve(),r}dispose(){this._disposables.forEach(e=>e.dispose())}}const Bv="githubPullRequests";var Vv=Object.defineProperty,si=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Vv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const ad="queries";var Ni;(function(t){t[t.Empty=0]="Empty",t[t.More=1]="More",t[t.TryOtherRemotes=2]="TryOtherRemotes",t[t.Login=3]="Login",t[t.NoRemotes=4]="NoRemotes",t[t.NoGitRepositories=5]="NoGitRepositories",t[t.NoMatchingRemotes=6]="NoMatchingRemotes",t[t.ConfigureRemotes=7]="ConfigureRemotes",t[t.Initializing=8]="Initializing"})(Ni||(Ni={}));class ai extends Dr{constructor(e,r,n){super();switch(si(this,"collapsibleState"),si(this,"iconPath"),si(this,"type"),si(this,"command"),this.parent=e,this.type=r,this.collapsibleState=u.TreeItemCollapsibleState.None,r){case 0:this.label="0 pull requests in this category";break;case 1:this.label="Load more",this.command={title:"Load more",command:"pr.loadMore",arguments:[n]};break;case 2:this.label="Continue fetching from other remotes",this.command={title:"Load more",command:"pr.loadMore",arguments:[n]};break;case 3:this.label="Sign in",this.command={title:"Sign in",command:"pr.signinAndRefreshList",arguments:[]};break;case 4:this.label="No GitHub repositories found.";break;case 5:this.label="No git repositories found.";break;case 6:this.label="No remotes match the current setting.";break;case 7:this.label="Configure remotes...",this.command={title:"Configure remotes",command:"pr.configureRemotes",arguments:[]};break;case 8:this.label="Loading...";break;default:break}}getTreeItem(){return this}}class od extends Dr{constructor(e,r,n,i,a,o){super();switch(this.parent=e,this._folderRepoManager=r,this._telemetry=n,this._type=i,this._categoryQuery=o,si(this,"collapsibleState"),si(this,"prs"),si(this,"fetchNextPage",!1),si(this,"repositoryPageInformation",new Map),si(this,"contextValue"),this.prs=[],this.collapsibleState=this._type===Yt.All?u.TreeItemCollapsibleState.Expanded:u.TreeItemCollapsibleState.Collapsed,i){case Yt.All:this.label="All Open";break;case Yt.Query:this.label=a;break;case Yt.LocalPullRequest:this.label="Local Pull Request Branches";break;default:break}this._categoryQuery&&(this.contextValue="query")}async editQuery(){const e=u.workspace.getConfiguration(Bv),r=e.inspect(ad);let n;if(r==null?void 0:r.workspaceValue)n="workbench.action.openWorkspaceSettingsFile";else{const a=e.get(ad);(r==null?void 0:r.defaultValue)&&JSON.stringify(r==null?void 0:r.defaultValue)===JSON.stringify(a)&&e.update(ad,r.defaultValue,u.ConfigurationTarget.Global),n="workbench.action.openSettingsJson"}await u.commands.executeCommand(n);const i=u.window.activeTextEditor;if(i){const o=i.document.getText().search(this.label);if(o>=0){const m=i.document.positionAt(o);i.revealRange(new u.Range(m,m)),i.selection=new u.Selection(m,m)}}}async getChildren(){this.childrenDisposables&&this.childrenDisposables.length&&(this.childrenDisposables.forEach(i=>i.dispose()),this.childrenDisposables=[]);let e=!1,r=!1,n=!1;if(this._type===Yt.LocalPullRequest)try{this.prs=await this._folderRepoManager.getLocalPullRequests(),this._telemetry.sendTelemetryEvent("pr.expand.local")}catch(i){u.window.showErrorMessage(`Fetching local pull requests failed: ${be(i)}`),n=i instanceof Eu}else if(this.fetchNextPage){try{const i=await this._folderRepoManager.getPullRequests(this._type,{fetchNextPage:!0},this._categoryQuery);this.prs=this.prs.concat(i.items),e=i.hasMorePages,r=i.hasUnsearchedRepositories}catch(i){u.window.showErrorMessage(`Fetching pull requests failed: ${be(i)}`),n=i instanceof Eu}this.fetchNextPage=!1}else try{const i=await this._folderRepoManager.getPullRequests(this._type,{fetchNextPage:!1},this._categoryQuery);switch(this.prs=i.items,e=i.hasMorePages,r=i.hasUnsearchedRepositories,this._type){case Yt.All:this._telemetry.sendTelemetryEvent("pr.expand.all");break;case Yt.Query:this._telemetry.sendTelemetryEvent("pr.expand.query");break}}catch(i){u.window.showErrorMessage(`Fetching pull requests failed: ${be(i)}`),n=i instanceof Eu}if(this.prs&&this.prs.length){const i=this.prs.map(a=>new Xs(this,this._folderRepoManager,a,this._type===Yt.LocalPullRequest));return e?i.push(new ai(this,1,this)):r&&i.push(new ai(this,2,this)),this.childrenDisposables=i,i}else{const i=n?3:0,a=[new ai(this,i)];return this.childrenDisposables=a,a}}getTreeItem(){return this}}var jv=Object.defineProperty,yp=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?jv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const bp="queries";class oo extends Dr{constructor(e,r,n,i){super();this.folderManager=n,this.telemetry=i,yp(this,"collapsibleState"),yp(this,"iconPath"),this.parent=e,this.collapsibleState=u.TreeItemCollapsibleState.Expanded,this.label=L.basename(r.fsPath)}static getQueries(e){return u.workspace.getConfiguration(Or,e.repository.rootUri).get(bp)||[]}getTreeItem(){return this}async getChildren(){return oo.getCategoryTreeNodes(this.folderManager,this.telemetry,this)}static getCategoryTreeNodes(e,r,n){const i=oo.getQueries(e).map(a=>new od(n,e,r,Yt.Query,a.label,a.query));return[new od(n,e,r,Yt.LocalPullRequest),...i,new od(n,e,r,Yt.All)]}}var zv=Object.defineProperty,Ai=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?zv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class _p{constructor(e){this._telemetry=e,Ai(this,"_onDidChangeTreeData",new u.EventEmitter),Ai(this,"onDidChangeTreeData",this._onDidChangeTreeData.event),Ai(this,"_onDidChange",new u.EventEmitter),Ai(this,"_disposables"),Ai(this,"_childrenDisposables"),Ai(this,"_view"),Ai(this,"_reposManager"),Ai(this,"_initialized",!1),this._disposables=[],this._disposables.push(u.workspace.registerTextDocumentContentProvider("pr",ip())),this._disposables.push(u.window.registerFileDecorationProvider(Yh)),this._disposables.push(u.window.registerFileDecorationProvider(jc)),this._disposables.push(u.commands.registerCommand("pr.refreshList",r=>{this._onDidChangeTreeData.fire()})),this._disposables.push(u.commands.registerCommand("pr.loadMore",r=>{r.fetchNextPage=!0,this._onDidChangeTreeData.fire(r)})),this._view=u.window.createTreeView("pr:github",{treeDataProvider:this,showCollapseAll:!0}),this._disposables.push(this._view),this._childrenDisposables=[],this._disposables.push(u.commands.registerCommand("pr.configurePRViewlet",async()=>{switch(await u.window.showQuickPick(["Configure Remotes...","Configure Queries..."])){case"Configure Queries...":return u.commands.executeCommand("workbench.action.openSettings",`@ext:${wn} queries`);case"Configure Remotes...":return u.commands.executeCommand("workbench.action.openSettings",`@ext:${wn} remotes`);default:return}})),this._disposables.push(u.workspace.onDidChangeConfiguration(r=>{r.affectsConfiguration(`${Or}.fileListLayout`)&&this._onDidChangeTreeData.fire()}))}get onDidChange(){return this._onDidChange.event}get view(){return this._view}async reveal(e,r){return this._view.reveal(e,r)}initialize(e){if(this._initialized)throw new Error("Tree has already been initialized!");this._initialized=!0,this._reposManager=e,this._disposables.push(this._reposManager.onDidChangeState(()=>{this._onDidChangeTreeData.fire()})),this._disposables.push(...this._reposManager.folderManagers.map(r=>r.onDidChangeRepositories(()=>{this._onDidChangeTreeData.fire()}))),this.initializeCategories(),this.refresh()}async initializeCategories(){this._disposables.push(u.workspace.onDidChangeConfiguration(async e=>{e.affectsConfiguration(`${Or}.${bp}`)&&this.refresh()}))}refresh(e){return e?this._onDidChangeTreeData.fire(e):this._onDidChangeTreeData.fire()}getTreeItem(e){return e.getTreeItem()}async resolveTreeItem(e,r){return r instanceof Mu&&await r.resolve(),r}needsRemotes(){var e;return((e=this._reposManager)==null?void 0:e.state)===en.NeedsAuthentication?Promise.resolve([]):u.workspace.getConfiguration(Or).get(Wa)?Promise.resolve([new ai(this,Ni.NoMatchingRemotes),new ai(this,Ni.ConfigureRemotes)]):Promise.resolve([new ai(this,Ni.NoRemotes)])}async getChildren(e){if(!this._reposManager)return u.workspace.workspaceFolders?Promise.resolve([new ai(this,Ni.NoGitRepositories)]):[];if(this._reposManager.state===en.Initializing)return Promise.resolve([new ai(this,Ni.Initializing)]);if(this._reposManager.folderManagers.filter(r=>r.getGitHubRemotes().length>0).length===0)return this.needsRemotes();if(!e){this._childrenDisposables&&this._childrenDisposables.length&&this._childrenDisposables.forEach(n=>n.dispose());let r;return this._reposManager.folderManagers.length===1?r=oo.getCategoryTreeNodes(this._reposManager.folderManagers[0],this._telemetry,this):r=this._reposManager.folderManagers.map(n=>new oo(this,n.repository.rootUri,n,this._telemetry)),this._childrenDisposables=r,Promise.resolve(r)}return this._reposManager.folderManagers.filter(r=>r.repository.state.remotes.length>0).length===0?Promise.resolve([new ai(this,Ni.Empty)]):e.getChildren()}async getParent(e){return e.getParent()}dispose(){this._disposables.forEach(e=>e.dispose())}}var Qv=Object.defineProperty,wp=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Qv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Wv{constructor(e){this.gitAPI=e,wp(this,"_onDidChange",new u.EventEmitter),wp(this,"_fallback")}get onDidChange(){return this._onDidChange.event}async provideTextDocumentContent(e,r){if(!this._fallback)return"";const{path:n,commit:i,rootPath:a}=li(e.query);if(!n||!i)return"";const o=Uc(this.gitAPI,u.Uri.file(a));if(!o)return u.window.showErrorMessage(`We couldn't find an open repository for ${i} locally.`),"";const m=L.join(o.rootUri.fsPath,n).replace(/\\/g,"/");let E;try{if(E=await o.show(i,m),!E)throw new Error}catch(k){if(E=await this._fallback(e),!E)try{await o.getCommit(i)}catch(P){u.window.showErrorMessage(`We couldn't find commit ${i} locally. You may want to sync the branch with remote. Sometimes commits can disappear after a force-push`)}}return E||""}registerTextDocumentContentFallback(e){this._fallback=e}}var Kv=Object.defineProperty,Ep=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Kv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class kp{constructor(e,r,n,i,a,o,m){this._context=e,this._reposManager=r,this._reviewManagers=n,this._prsTreeDataProvider=i,this._prFileChangesProvider=a,this._telemetry=o,Ep(this,"_disposables"),this._disposables=[];const E=new Wv(m);E.registerTextDocumentContentFallback(this.provideTextDocumentContent.bind(this)),this._disposables.push(u.workspace.registerTextDocumentContentProvider("review",E)),this.registerListeners(),this._disposables.push(this._prsTreeDataProvider)}registerListeners(){this._disposables.push(u.workspace.onDidChangeConfiguration(async e=>{if(e.affectsConfiguration("githubPullRequests.showInSCM")){if(this._prFileChangesProvider){this._prFileChangesProvider.dispose(),this._prFileChangesProvider=new vp(this._context);for(const r of this._reviewManagers)r.updateState(!0)}this._prsTreeDataProvider.dispose(),this._prsTreeDataProvider=new _p(this._telemetry),this._prsTreeDataProvider.initialize(this._reposManager),this._disposables.push(this._prsTreeDataProvider)}}))}async provideTextDocumentContent(e){for(const r of this._reviewManagers)if(e.fsPath.startsWith(r.repository.rootUri.fsPath))return r.provideTextDocumentContent(e);return""}dispose(){this._disposables.forEach(e=>{e.dispose()})}}Ep(kp,"ID","Reviews");const Yv="AIF-d9b70cd4-b9f9-4d70-929b-a071c400b217";let kr;const Sp="prompts",Tp="createPROnPublish";async function Rp(t,e,r,n,i,a,o){t.subscriptions.push(C),C.appendLine("Git repository found, initializing review manager and pr tree view."),u.authentication.onDidChangeSessions(async Re=>{Re.provider.id==="github"&&(await P.clearCredentialCache(),z&&z.forEach(xe=>xe.updateState(!0)))}),t.subscriptions.push(e.onDidPublish(async Re=>{if(!Re.branch||Xd(Sp,Tp)===!1)return;const xe=z.find(Mt=>Mt.repository.rootUri.toString()===Re.repository.rootUri.toString());if(xe==null?void 0:xe.isCreatingPullRequest)return;const Oe=k.find(Mt=>Mt.repository.rootUri.toString()===Re.repository.rootUri.toString());if(!Oe||Oe.gitHubRepositories.length===0||(await Oe.getPullRequestDefaults()).base===Re.branch)return;const He="Create Pull Request...",ft="Don't Show Again",gt=await u.window.showInformationMessage(`Would you like to create a Pull Request for branch '${Re.branch}'?`,He,ft);gt===He?xe==null||xe.createPullRequest(Re.branch):gt===ft&&Jd(Sp,Tp,!1)})),t.subscriptions.push(u.window.registerUriHandler(mo)),t.subscriptions.push(new Dv);const m=u.workspace.workspaceFolders;m&&(n=n.sort((Re,xe)=>{let Oe=m.length,Ae=m.length;for(let He=0;He<m.length&&(m[He].uri.toString()===Re.rootUri.toString()?Oe=He:m[He].uri.toString()===xe.rootUri.toString()&&(Ae=He),!(Oe!==m.length&&Ae!==m.length));He++);return Oe-Ae}));const E=new qg(t),k=n.map(Re=>new Vs(t,Re,kr,e,r,E));t.subscriptions.push(...k);const P=new up(k,r,kr,E);t.subscriptions.push(P),a.then(Re=>{Re&&Re.registerContactServiceProvider("github-pr",new sv(P))});const U=new vp(t);t.subscriptions.push(U);const z=k.map(Re=>new Pi(t,Re.repository,Re,kr,U,o,E)),le=new kp(t,P,z,i,U,kr,e);t.subscriptions.push(le),e.onDidChangeState(()=>{C.appendLine(`Git initialization state changed: state=${e.state}`),z.forEach(Re=>Re.updateState(!0))}),e.onDidOpenRepository(Re=>{const xe=Re.state.onDidChange(()=>{if(C.appendLine(`Repo state for ${Re.rootUri} changed.`),P.getManagerForFile(Re.rootUri)){C.appendLine(`Repo ${Re.rootUri} has already been setup.`);return}const Ae=new Vs(t,Re,kr,e,r,E);P.insertFolderManager(Ae);const He=new Pi(t,Ae.repository,Ae,kr,U,o,E);z.push(He),i.refresh(),xe.dispose()})}),e.onDidCloseRepository(Re=>{P.removeRepo(Re);const xe=z.findIndex(Oe=>Oe.repository.rootUri.toString()===Re.rootUri.toString());if(xe){const Oe=z[xe];z.splice(xe),Oe.dispose()}i.refresh()}),i.initialize(P),Km(t),Fg(t,E,P,z,kr,r,i);const ce=u.workspace.getConfiguration("githubPullRequests").get("fileListLayout");await u.commands.executeCommand("setContext","fileListLayout:flat",ce==="flat");const me=new Av(e,P,z,t,kr);t.subscriptions.push(me),await me.initialize(),t.subscriptions.push(new ov),await u.commands.executeCommand("setContext","github:initialized",!0);const Te=await Bg(t,kr);await Te.initializePromise,await Te.isCachedFlightEnabled("githubaa"),kr.sendTelemetryEvent("startup")}async function Xv(t){if(wn==="GitHub.vscode-pull-request-github-insiders"&&u.extensions.getExtension("github.vscode-pull-request-github")!==void 0)throw new Error("GitHub Pull Requests and Issues Nightly cannot be used while GitHub Pull Requests and Issues is also installed. Please ensure that only one version of the extension is installed.");const e=new Ng;u.commands.registerCommand("github.api.preloadPullRequest",async a=>{await u.commands.executeCommand("setContext",ci,!0),await u.commands.executeCommand("github:activePullRequest:welcome.focus"),e.shouldShow=a});const r=u.workspace.getConfiguration("git").get("openDiffOnClick",!0);await u.commands.executeCommand("setContext","openDiffOnClick",r),Xr.initialize(t),C.debug("Creating API implementation.","Activation");const n=new $n,i=u.extensions.getExtension(wn).packageJSON.version;return kr=new $g(new(M())(wn,i,Yv)),t.subscriptions.push(kr),Jv(t,n,e),n}async function Cp(t,e,r){const n=await nv(e,r);return n?(t.subscriptions.push(n),!0):!1}async function Jv(t,e,r){C.debug("Initializing state.","Activation"),Um(t),ds.init(t),C.debug("Creating credential store.","Activation");const n=new jm(kr);if(t.subscriptions.push(n),await n.create({silent:!0}),C.debug("Registering built in git provider.","Activation"),!await Cp(t,n,e)){const E=u.extensions.onDidChange(async()=>{await Cp(t,n,e)&&E.dispose()});t.subscriptions.push(E)}C.debug("Registering live share git provider.","Activation");const i=rv(e);t.subscriptions.push(i);const a=i.initialize();t.subscriptions.push(e),C.debug("Creating tree view.","Activation");const o=new _p(kr);t.subscriptions.push(o),C.appendLine("Looking for git repository");const m=e.repositories;C.appendLine(`Found ${m.length} repositories during activation`),m.length>0?await Rp(t,e,n,m,o,a,r):(C.appendLine("Waiting for git repository"),J(e.onDidOpenRepository)(async E=>{C.appendLine(`Repository ${E.rootUri} opened`),await Rp(t,e,n,[E],o,a,r)}))}async function Zv(){kr&&kr.dispose()}})(),module.exports=Gu})();
