import{e,t,o,D as s,n as i,V as n,r as a,T as l,i as c,a as r,h as d,u as h,A as v,x as u,c as p,s as m,E as b,F as g,G as x,H as f,I as $,J as k,K as _}from"./dd4c9c27.js";function y(e,t,o){var s,i,n;void 0===t&&(t=50),void 0===o&&(o={});var a=null!=(s=o.isImmediate)&&s,l=null!=(i=o.callback)&&i,c=o.maxWait,r=Date.now(),d=[];function h(){if(void 0!==c){var e=Date.now()-r;if(e+t>=c)return c-e}return t}var v=function(){var t=[].slice.call(arguments),o=this;return new Promise((function(s,i){var c=a&&void 0===n;if(void 0!==n&&clearTimeout(n),n=setTimeout((function(){if(n=void 0,r=Date.now(),!a){var s=e.apply(o,t);l&&l(s),d.forEach((function(e){return(0,e.resolve)(s)})),d=[]}}),h()),c){var v=e.apply(o,t);return l&&l(v),s(v)}d.push({resolve:s,reject:i})}))};return v.cancel=function(e){void 0!==n&&clearTimeout(n),d.forEach((function(t){return(0,t.reject)(e)})),d=[]},v}var w=function(e,t,o,s){for(var i,n=arguments.length,a=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,o):s,l=e.length-1;l>=0;l--)(i=e[l])&&(a=(n<3?i(a):n>3?i(t,o,a):i(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a};let C=class extends n{constructor(){super(...arguments),this.shadow=!0,this.scrolled=!1,this._isDragging=!1,this._thumbHeight=0,this._thumbY=0,this._thumbVisible=!1,this._thumbFade=!1,this._thumbActive=!1,this._scrollThumbStartY=0,this._mouseStartY=0,this._scrollbarVisible=!0,this._scrollbarTrackZ=0,this._resizeObserverCallbackBound=this._resizeObserverCallback.bind(this),this._onScrollThumbMouseMoveBound=this._onScrollThumbMouseMove.bind(this),this._onScrollThumbMouseUpBound=this._onScrollThumbMouseUp.bind(this),this._onComponentMouseOverBound=this._onComponentMouseOver.bind(this),this._onComponentMouseOutBound=this._onComponentMouseOut.bind(this)}set scrollPos(e){this._scrollableContainer.scrollTop=e}get scrollPos(){return this._scrollableContainer.scrollTop}get scrollMax(){return this._scrollableContainer.scrollHeight}connectedCallback(){super.connectedCallback(),this._resizeObserver=new ResizeObserver(this._resizeObserverCallbackBound),this.requestUpdate(),this.updateComplete.then((()=>{this._scrollableContainer.addEventListener("scroll",this._onScrollableContainerScroll.bind(this)),this._resizeObserver.observe(this._contentElement)})),this.addEventListener("mouseover",this._onComponentMouseOverBound),this.addEventListener("mouseout",this._onComponentMouseOutBound)}disconnectedCallback(){super.disconnectedCallback(),this._resizeObserver.unobserve(this),this._resizeObserver.disconnect(),this.removeEventListener("mouseover",this._onComponentMouseOverBound),this.removeEventListener("mouseout",this._onComponentMouseOutBound)}_resizeObserverCallback(){this._updateScrollbar()}_updateScrollbar(){const e=this.getBoundingClientRect(),t=this._contentElement.getBoundingClientRect();e.height>=t.height?this._scrollbarVisible=!1:(this._scrollbarVisible=!0,this._thumbHeight=e.height*(e.height/t.height)),this.requestUpdate()}_zIndexFix(){let e=0;this._assignedNodes.forEach((t=>{if("style"in t){const o=window.getComputedStyle(t).zIndex;/([0-9-])+/g.test(o)&&(e=Number(o)>e?Number(o):e)}})),this._scrollbarTrackZ=e+1,this.requestUpdate()}_onSlotChange(){this._updateScrollbar(),this._zIndexFix()}_onScrollThumbMouseDown(e){const t=this.getBoundingClientRect(),o=this._scrollThumbElement.getBoundingClientRect();this._mouseStartY=e.screenY,this._scrollThumbStartY=o.top-t.top,this._isDragging=!0,this._thumbActive=!0,document.addEventListener("mousemove",this._onScrollThumbMouseMoveBound),document.addEventListener("mouseup",this._onScrollThumbMouseUpBound)}_onScrollThumbMouseMove(e){const t=this._scrollThumbStartY+(e.screenY-this._mouseStartY);let o=0;const s=this.getBoundingClientRect().height,i=this._scrollThumbElement.getBoundingClientRect().height,n=this._contentElement.getBoundingClientRect().height;o=t<0?0:t>s-i?s-i:t,this._thumbY=o,this._scrollableContainer.scrollTop=o/(s-i)*(n-s)}_onScrollThumbMouseUp(e){this._isDragging=!1,this._thumbActive=!1;const t=this.getBoundingClientRect(),{x:o,y:s,width:i,height:n}=t,{pageX:a,pageY:l}=e;(a>o+i||a<o||l>s+n||l<s)&&(this._thumbFade=!0,this._thumbVisible=!1),document.removeEventListener("mousemove",this._onScrollThumbMouseMoveBound),document.removeEventListener("mouseup",this._onScrollThumbMouseUpBound)}_onScrollableContainerScroll(){const e=this._scrollableContainer.scrollTop;this.scrolled=e>0;const t=this.getBoundingClientRect().height,o=this._scrollThumbElement.getBoundingClientRect().height,s=e/(this._contentElement.getBoundingClientRect().height-t);this._thumbY=s*(t-o)}_onComponentMouseOver(){this._thumbVisible=!0,this._thumbFade=!1}_onComponentMouseOut(){this._thumbActive||(this._thumbVisible=!1,this._thumbFade=!0)}static get styles(){return[super.styles,a`:host{display:block;position:relative}.scrollable-container{height:100%;overflow:auto}.scrollable-container::-webkit-scrollbar{cursor:default;width:0}.shadow{box-shadow:var(--vscode-scrollbar-shadow) 0 6px 6px -6px inset;display:none;height:3px;left:0;pointer-events:none;position:absolute;top:0;z-index:1;width:100%}.shadow.visible{display:block}.scrollbar-track{height:100%;position:absolute;right:0;top:0;width:10px;z-index:100}.scrollbar-track.hidden{display:none}.scrollbar-thumb{background-color:transparent;min-height:var(--min-thumb-height,20px);opacity:0;position:absolute;right:0;width:10px}.scrollbar-thumb.visible{background-color:var(--vscode-scrollbarSlider-background);opacity:1;transition:opacity .1s}.scrollbar-thumb.fade{background-color:var(--vscode-scrollbarSlider-background);opacity:0;transition:opacity .8s}.scrollbar-thumb.visible:hover{background-color:var(--vscode-scrollbarSlider-hoverBackground)}.scrollbar-thumb.visible.active,.scrollbar-thumb.visible.active:hover{background-color:var(--vscode-scrollbarSlider-activeBackground)}.content{overflow:hidden}`]}render(){return l`<div class="scrollable-container" style="${c({"user-select":this._isDragging?"none":"auto"})}"><div class="${r({shadow:!0,visible:this.scrolled})}"></div><div class="${r({"scrollbar-track":!0,hidden:!this._scrollbarVisible})}" style="${c({"z-index":String(this._scrollbarTrackZ)})}"><div class="${r({"scrollbar-thumb":!0,visible:this._thumbVisible,fade:this._thumbFade,active:this._thumbActive})}" style="${c({height:this._thumbHeight+"px",top:this._thumbY+"px"})}" @mousedown="${this._onScrollThumbMouseDown}"></div></div><div class="content"><slot @slotchange="${this._onSlotChange}"></slot></div></div>`}};w([e({type:Boolean,reflect:!0})],C.prototype,"shadow",void 0),w([e({type:Boolean,reflect:!0})],C.prototype,"scrolled",void 0),w([e({type:Number})],C.prototype,"scrollPos",null),w([e({type:Number})],C.prototype,"scrollMax",null),w([t()],C.prototype,"_isDragging",void 0),w([t()],C.prototype,"_thumbHeight",void 0),w([t()],C.prototype,"_thumbY",void 0),w([t()],C.prototype,"_thumbVisible",void 0),w([t()],C.prototype,"_thumbFade",void 0),w([t()],C.prototype,"_thumbActive",void 0),w([o(".content")],C.prototype,"_contentElement",void 0),w([o(".scrollbar-thumb")],C.prototype,"_scrollThumbElement",void 0),w([o(".scrollable-container")],C.prototype,"_scrollableContainer",void 0),w([s()],C.prototype,"_assignedNodes",void 0),C=w([i("vscode-scrollable")],C);var T=function(e,t,o,s){for(var i,n=arguments.length,a=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,o):s,l=e.length-1;l>=0;l--)(i=e[l])&&(a=(n<3?i(a):n>3?i(t,o,a):i(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a};let S=class extends d{constructor(){super(...arguments),this._options=[]}set options(e){this._options=[...e]}get options(){return this._options.filter((e=>!e.markedForDeletion)).map((({label:e,value:t,description:o})=>({label:e,value:t,description:o})))}_close(){this.dispatchEvent(new CustomEvent("close"))}_save(){this.dispatchEvent(new CustomEvent("save",{detail:this.options})),this._close()}_remove(e){this._toggleMarkedForDeletion(e,!0)}_undo(e){this._toggleMarkedForDeletion(e,!1)}_toggleMarkedForDeletion(e,t){const o=e.currentTarget,s=Number(o.dataset.index);this._options=this._options.map(((e,o)=>o===s?{...e,markedForDeletion:t}:e))}async _addOption(){this._options=[...this._options,{label:"",value:"",description:""}],await this.updateComplete,this._scrollableElement.scrollTop=this._scrollableElement.scrollHeight}_onInputChange(e){const t=e.currentTarget,{index:o,name:s}=t.dataset;this._options=this._options.map(((t,i)=>{const{label:n,value:a,description:l,markedForDeletion:c}=t;return i===Number(o)?{label:"label"===s?e.detail:n,value:"value"===s?e.detail:a,description:"description"===s?e.detail:l,markedForDeletion:c}:t}))}static get styles(){return a`:host{position:relative}.modal-background{background-color:rgba(0,0,0,.3);bottom:0;left:0;position:absolute;right:0;top:0}.modal-window{background-color:var(--vscode-editor-background);box-shadow:0 0 8px rgba(0,0,0,.16);inset:20px 150px;position:absolute}.modal-window .scrollable{inset:0 0 46px;position:absolute}.empty{align-items:center;display:flex;height:100%;justify-content:center;position:absolute;width:100%}.fieldset{display:flex;flex-wrap:wrap;justify-content:center;padding:20px 0;position:relative}.fieldset:nth-child(odd){background-color:rgba(130,130,130,.04)}.fieldset:not(:last-child){border-bottom:1px solid var(--vscode-editorGroup-border)}vscode-icon[name=trash]{position:absolute;right:10px;top:10px}vscode-form-group{margin:0 auto 10px;width:320px}vscode-form-group:last-child{margin-bottom:0}vscode-label{width:90px}.modal-window-footer{background-color:var(--vscode-editor-background);bottom:0;display:flex;height:26px;left:0;padding:10px;position:absolute;right:0}.modal-window-footer .save{margin-right:4px}.modal-window-footer .add-option{margin-right:auto}`}_renderRemoveButton(e){return l`<vscode-icon name="trash" action-icon title="remove" data-index="${e}" @click="${this._remove}"></vscode-icon>`}_renderUndoButton(e){return l`<vscode-button data-index="${e}" @click="${this._undo}" class="undo">Undo</vscode-button>`}_renderFields({label:e,value:t,description:o,index:s}){return l`<vscode-form-group variant="vertical"><vscode-label for="label-${s}">Label:</vscode-label><vscode-inputbox id="label-${s}" value="${e}" data-index="${s}" data-name="label" @vsc-input="${this._onInputChange}"></vscode-inputbox></vscode-form-group><vscode-form-group variant="vertical"><vscode-label for="value-${s}">Value:</vscode-label><vscode-inputbox id="value-${s}" value="${h(t)}" data-index="${s}" data-name="value" @vsc-input="${this._onInputChange}"></vscode-inputbox></vscode-form-group><vscode-form-group variant="vertical"><vscode-label for="description-${s}">Description:</vscode-label><vscode-inputbox id="description-${s}" value="${h(o)}" multiline lines="5" data-index="${s}" data-name="description" @vsc-input="${this._onInputChange}"></vscode-inputbox></vscode-form-group>`}_renderOptions(){return this._options.map((({label:e,value:t,description:o,markedForDeletion:s=!1},i)=>l`<div class="fieldset">${s?this._renderUndoButton(i):[this._renderRemoveButton(i),this._renderFields({label:e,value:t||"",description:o||"",index:i})]}</div>`))}render(){return l`<div class="modal-background"><div class="modal-window"><vscode-scrollable class="scrollable" id="scrollable">${this._options.length>0?this._renderOptions():l`<div class="empty">There is not any option configured yet.</div>`}</vscode-scrollable><div class="modal-window-footer"><vscode-button class="add-option" @click="${this._addOption}">Add option</vscode-button><vscode-button class="save" @click="${this._save}">Save</vscode-button><vscode-button class="cancel" secondary @click="${this._close}">Cancel</vscode-button></div></div></div>`}};T([e({type:Array})],S.prototype,"options",null),T([t()],S.prototype,"_options",void 0),T([o("#scrollable")],S.prototype,"_scrollableElement",void 0),S=T([i("cme-token-options-edit")],S);var M=function(e,t,o,s){for(var i,n=arguments.length,a=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,o):s,l=e.length-1;l>=0;l--)(i=e[l])&&(a=(n<3?i(a):n>3?i(t,o,a):i(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a};const O=e=>null==e;let L=class extends d{constructor(){super(...arguments),this.active=!1,this._label="",this._name="",this._type="text",this._description="",this._prefix="",this._suffix="",this._multiline=!1,this._lines="",this._maxLines="",this._maxLength="",this._multiple=!1,this._separator="",this._combobox=!1,this._options=[],this._isOptionsWindowVisible=!1}set token(e){const{label:t,name:o,type:s,description:i,prefix:n,suffix:a,maxLength:l,maxLines:c,multiline:r,multiple:d,separator:h,combobox:v,options:u,lines:p}=e;this._label=null!=t?t:"Untitled",this._name=null!=o?o:"untitled",this._type=null!=s?s:"text",this._description=null!=i?i:"",this._prefix=null!=n?n:"",this._suffix=null!=a?a:"",this._maxLength=O(l)?"":String(l),this._maxLines=O(c)?"":String(c),this._multiline=null!=r&&r,this._multiple=null!=d&&d,this._separator=null!=h?h:"",this._combobox=null!=v&&v,this._options=null!=u?u:[],this._lines=O(p)?"":String(p)}get token(){var e,t,o;const s={label:null!==(e=this._label)&&void 0!==e?e:"Untitled",name:null!==(t=this._name)&&void 0!==t?t:"untitled",type:null!==(o=this._type)&&void 0!==o?o:"text"};return this._description.length>0&&(s.description=this._description),this._prefix.length>0&&(s.prefix=this._prefix),this._suffix.length>0&&(s.suffix=this._suffix),this._maxLength.length&&(s.maxLength=parseInt(this._maxLength)),this._maxLines.length>0&&(s.maxLines=parseInt(this._maxLines)),this._multiline&&(s.multiline=!0),this._lines.length>0&&(s.lines=parseInt(this._lines)),this._multiple&&(s.multiple=!0),this._separator.length>0&&(s.separator=this._separator),this._combobox&&(s.combobox=!0),this._options.length>0&&(s.options=this._options),s}_onNameChange(e){this._name=e.detail}_onLabelChange(e){this._label=e.detail}_onTokenTypeChange(e){const t=e.detail.value.trim();this._type=t}_onDescriptionChange(e){this._description=e.detail}_onPrefixChange(e){this._prefix=e.detail}_onSuffixChange(e){this._suffix=e.detail}_onMultilineChange(e){this._multiline=e.detail.checked}_onLinesChange(e){this._lines=e.detail}_onMaxLinesChange(e){this._maxLines=e.detail}_onMaxLengthChange(e){this._maxLength=e.detail}_onMultipleChange(e){this._multiple=e.detail.checked}_onSeparatorChange(e){this._separator=e.detail}_onComboboxChange(e){this._combobox=e.detail.checked}_onOptionsButtonClick(){this._isOptionsWindowVisible=!0}_onOptionsSave(e){this._options=e.detail}_onEditClick(){this.active=!0}_onDeleteClick(){this.dispatchEvent(new CustomEvent("delete",{detail:{index:this.dataset.index?Number(this.dataset.index):-1}}))}_onWindowClose(){this._isOptionsWindowVisible=!1}_onSaveClick(){this.dispatchEvent(new CustomEvent("save",{detail:{index:this.dataset.index?Number(this.dataset.index):-1,data:this.token}})),this.active=!1}_onCancelClick(){this.active=!1}static get styles(){return a`:host{display:block}.wrapper.active{background-color:var(--vscode-settings-focusedRowBackground);outline:1px solid var(--vscode-settings-focusedRowBorder);outline-offset:-1px}.default{box-sizing:border-box;cursor:default;display:flex;padding:2px;width:100%}.default:hover{background-color:var(--vscode-list-hoverBackground)}.default-name{align-items:center;display:flex}.default-controls{margin-left:auto}vscode-form-container{margin-bottom:20px;max-width:none;padding-bottom:26px;padding-top:26px;position:relative}vscode-form-group{margin:0}vscode-form-group:not(:last-child){margin-bottom:10px}vscode-form-group.disabled{opacity:.3;pointer-events:none;user-select:none}.edit-options-button{display:block;margin-top:2px}cme-token-options-edit{inset:0;position:absolute;z-index:1}`}render(){const e=l`<vscode-form-group><vscode-label for="label">Label</vscode-label><vscode-inputbox value="${this._label}" id="label" name="label" @vsc-input="${this._onLabelChange}"></vscode-inputbox></vscode-form-group>`,t=l`<vscode-form-group><vscode-label for="name">Name</vscode-label><vscode-inputbox value="${this._name}" id="name" name="name" @vsc-input="${this._onNameChange}"></vscode-inputbox></vscode-form-group>`,o=l`<vscode-form-group variant="horizontal"><vscode-label for="type">Type:</vscode-label><vscode-single-select id="type" name="type" @vsc-change="${this._onTokenTypeChange}"><vscode-option ?selected="${"text"===this.token.type}">text</vscode-option><vscode-option ?selected="${"boolean"===this.token.type}">boolean</vscode-option><vscode-option ?selected="${"enum"===this.token.type}">enum</vscode-option></vscode-single-select></vscode-form-group>`,s=l`<vscode-form-group class="${r({disabled:"text"!==this._type})}"><vscode-label for="multiline">Multiline</vscode-label><vscode-checkbox id="multiline" name="flags" value="multiline" ?checked="${this._multiline}" @vsc-change="${this._onMultilineChange}"></vscode-checkbox></vscode-form-group>`,i=l`<vscode-form-group><vscode-label for="description">Description:</vscode-label><vscode-inputbox id="description" value="${this._description}" name="description" multiline @vsc-input="${this._onDescriptionChange}"></vscode-inputbox></vscode-form-group>`,n=l`<vscode-form-group><vscode-label for="prefix">Prefix</vscode-label><vscode-inputbox value="${this._prefix}" id="prefix" name="prefix" @vsc-input="${this._onPrefixChange}"></vscode-inputbox></vscode-form-group>`,a=l`<vscode-form-group><vscode-label for="suffix">Suffix</vscode-label><vscode-inputbox value="${this._suffix}" id="suffix" name="suffix" @vsc-input="${this._onSuffixChange}"></vscode-inputbox></vscode-form-group>`,c=l`<vscode-form-group class="${r({disabled:"text"!==this._type||!this._multiline})}"><vscode-label for="lines">Lines</vscode-label><vscode-inputbox value="${this._lines}" id="lines" name="lines" type="number" min="1" @vsc-input="${this._onLinesChange}"></vscode-inputbox></vscode-form-group>`,d=l`<vscode-form-group class="${r({disabled:"text"!==this._type||!this._multiline})}"><vscode-label for="maxLines">MaxLines</vscode-label><vscode-inputbox value="${this._maxLines}" id="maxLines" name="maxLines" type="number" min="1" @vsc-input="${this._onMaxLinesChange}"></vscode-inputbox></vscode-form-group>`,h=l`<vscode-form-group class="${r({disabled:"text"!==this._type})}"><vscode-label for="maxLength">MaxLength</vscode-label><vscode-inputbox value="${this._maxLength}" id="maxLength" name="maxLength" type="number" min="1" @vsc-input="${this._onMaxLengthChange}"></vscode-inputbox></vscode-form-group>`,u=l`<vscode-form-group class="${r({disabled:"enum"!==this._type})}"><vscode-label for="multiple">Multiple</vscode-label><vscode-checkbox id="multiple" name="flags" value="multiple" ?checked="${this._multiple}" @vsc-change="${this._onMultipleChange}"></vscode-checkbox></vscode-form-group>`,p=l`<vscode-form-group class="${r({disabled:"enum"!==this._type})}"><vscode-label for="combobox">Combobox</vscode-label><vscode-checkbox id="combobox" name="flags" value="combobox" ?checked="${this._combobox}" @vsc-change="${this._onComboboxChange}"></vscode-checkbox></vscode-form-group>`,m=l`<vscode-form-group class="${r({disabled:"enum"!==this._type||!this._multiple})}"><vscode-label for="separator">Separator</vscode-label><vscode-inputbox value="${this._separator}" id="separator" name="separator" @vsc-input="${this._onSeparatorChange}"></vscode-inputbox></vscode-form-group>`,b=l`<vscode-form-group class="${r({disabled:"enum"!==this._type})}"><vscode-label>Options ${this._options.length?`(${this._options.length})`:""}</vscode-label><vscode-icon class="edit-options-button" name="list-unordered" action-icon @click="${this._onOptionsButtonClick}"></vscode-icon></vscode-form-group>`,g=l`<cme-token-options-edit @close="${this._onWindowClose}" @save="${this._onOptionsSave}" .options="${this._options}"></cme-token-options-edit>`,x=l`<div class="default"><div class="default-name">${this._name}</div><div class="default-controls"><vscode-icon name="edit" action-icon @click="${this._onEditClick}"></vscode-icon><vscode-icon name="x" action-icon @click="${this._onDeleteClick}"></vscode-icon></div></div>`,f=l`<div><vscode-form-container id="form" responsive>${t} ${e} ${o} ${i} ${n} ${a} ${s} ${c} ${d} ${h} ${u} ${m} ${p} ${b} ${this._isOptionsWindowVisible?g:v}<vscode-form-group><vscode-button @click="${this._onSaveClick}">Save</vscode-button><vscode-button secondary @click="${this._onCancelClick}">Cancel</vscode-button></vscode-form-group></vscode-form-container></div>`;return l`<div class="${r({wrapper:!0,active:this.active})}">${this.active?f:x}</div>`}};M([e({type:Object})],L.prototype,"token",null),M([e({type:Boolean})],L.prototype,"active",void 0),M([t()],L.prototype,"_label",void 0),M([t()],L.prototype,"_name",void 0),M([t()],L.prototype,"_type",void 0),M([t()],L.prototype,"_description",void 0),M([t()],L.prototype,"_prefix",void 0),M([t()],L.prototype,"_suffix",void 0),M([t()],L.prototype,"_multiline",void 0),M([t()],L.prototype,"_lines",void 0),M([t()],L.prototype,"_maxLines",void 0),M([t()],L.prototype,"_maxLength",void 0),M([t()],L.prototype,"_multiple",void 0),M([t()],L.prototype,"_separator",void 0),M([t()],L.prototype,"_combobox",void 0),M([t()],L.prototype,"_options",void 0),M([t()],L.prototype,"_isOptionsWindowVisible",void 0),L=M([i("cme-token-item-edit")],L);var D=function(e,t,o,s){for(var i,n=arguments.length,a=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,o):s,l=e.length-1;l>=0;l--)(i=e[l])&&(a=(n<3?i(a):n>3?i(t,o,a):i(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a};const B=u();var j;!function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace",e[e.workspaceFolder=3]="workspaceFolder"}(j||(j={}));let E=class extends(p(m)(d)){constructor(){super(...arguments),this._shareableConfig={staticTemplate:[],dynamicTemplate:[],tokens:[]},this._staticTemplate=[],this._dynamicTemplate=[],this._tokens=[],this._statusMessage="",this._statusMessageType="invisible",this._configurationTarget=j.Global,this._onStaticTplChangeDebounced=y(this._onStaticTplChange,400),this._onDynamicTplChangeDebounced=y(this._onDynamicTplChange,400)}stateChanged(e){const{statusMessage:t,statusMessageType:o}=e,{staticTemplate:s,dynamicTemplate:i,tokens:n}=e.shareableConfig;this._staticTemplate=s,this._dynamicTemplate=i,this._tokens=n,this._statusMessage=t,this._statusMessageType=o}connectedCallback(){super.connectedCallback(),B.postMessage({command:"loadCurrentConfig"})}_onErrorCloseClick(){m.dispatch(b({statusMessage:"",statusMessageType:"invisible"}))}_onImportButtonClick(){B.postMessage({command:"importConfig"})}_onExportButtonClick(){B.postMessage({command:"exportConfig",payload:{staticTemplate:this._staticTemplate,dynamicTemplate:this._dynamicTemplate,tokens:this._tokens}})}_onTokenSave(e){const{index:t,data:o}=e.detail;m.dispatch(g({index:t,data:o}))}_onTokenDelete(e){const{index:t}=e.detail;m.dispatch(x({index:t}))}_onAddItemClick(){m.dispatch(f({name:"untitled",label:"Untitled",type:"text"}))}_onConfigTargetSelectChange(e){this._configurationTarget=Number(e.detail.value)}_onSaveSettingsClick(){B.postMessage({command:"saveToSettings",payload:{configurationTarget:this._configurationTarget,configuration:{staticTemplate:this._staticTemplate,dynamicTemplate:this._dynamicTemplate,tokens:this._tokens}}})}_onStaticTplChange(e){m.dispatch($(e.detail))}_onDynamicTplChange(e){m.dispatch(k(e.detail))}static get styles(){return a`h1{font-family:var(--vscode-font-family);font-size:24px;font-weight:600;padding-left:14px;padding-right:14px}.settings-content{margin:0 auto;max-width:727px;padding-top:15px}.header-toolbar{display:flex;flex-wrap:wrap;margin-bottom:10px;margin-left:14px;margin-right:14px;position:relative}.import-export{display:flex;margin-bottom:5px;margin-top:5px;max-width:727px}.import-export vscode-button{display:block;margin-right:4px}.persist{align-items:center;display:flex;justify-content:center;margin-bottom:5px;margin-left:auto;margin-top:5px}.persist vscode-label{margin-right:4px}.persist vscode-single-select{margin-right:4px;width:140px}.status{align-items:center;border-color:transparent;border-style:solid;border-width:1px;box-sizing:border-box;display:flex;margin-top:10px;max-width:699px;min-height:30px;padding:3px 6px;position:relative;width:100%}.status.error{background-color:var(--vscode-inputValidation-errorBackground);border-color:var(--vscode-inputValidation-errorBorder)}.status.success{background-color:var(--vscode-inputValidation-infoBackground);border-color:var(--vscode-inputValidation-infoBorder)}.status vscode-icon[name='x']{position:absolute;right:3px}.template-inputbox{box-sizing:border-box;display:block;width:100%}.tokens{padding:18px 14px;max-width:727px}.tokens-list{margin-bottom:10px}cme-token-item-edit{margin:0 auto;max-width:727px}`}render(){return l`<div class="settings-content"><h1>Edit commit templates</h1><div class="header-toolbar"><div class="import-export"><vscode-button @click="${this._onImportButtonClick}" icon="folder-opened">Import</vscode-button><vscode-button @click="${this._onExportButtonClick}" icon="save">Export</vscode-button></div><div class="persist"><vscode-label for="context">Save settings to:</vscode-label><vscode-single-select id="context" @vsc-change="${this._onConfigTargetSelectChange}"><vscode-option value="${j.Global}">User</vscode-option><vscode-option value="${j.Workspace}">Workspace</vscode-option></vscode-single-select><vscode-button @click="${this._onSaveSettingsClick}">Save</vscode-button></div>${"invisible"!==this._statusMessageType?l`<div class="${r({status:!0,[this._statusMessageType]:!0})}">${this._statusMessage}<vscode-icon name="x" action-icon @click="${this._onErrorCloseClick}"></vscode-icon></div>`:l`${v}`}</div><vscode-form-group variant="settings-group"><vscode-label for="staticTemplate">Static template</vscode-label><vscode-form-helper>Template for the text view</vscode-form-helper><vscode-inputbox id="staticTemplate" name="staticTemplate" lines="5" multiline value="${this._staticTemplate.join("\n")}" class="template-inputbox" @vsc-input="${this._onStaticTplChangeDebounced}"></vscode-inputbox></vscode-form-group><vscode-form-group variant="settings-group"><vscode-label for="dynamicTemplate">Dynamic template</vscode-label><vscode-form-helper>Template for the form view</vscode-form-helper><vscode-inputbox id="dynamicTemplate" name="dynamicTemplate" lines="5" multiline value="${this._dynamicTemplate.join("\n")}" class="template-inputbox" @vsc-input="${this._onDynamicTplChangeDebounced}"></vscode-inputbox></vscode-form-group><div class="tokens"><vscode-label>Tokens</vscode-label><div class="tokens-list">${this._tokens.map(((e,t)=>l`<cme-token-item-edit data-index="${t}" .token="${e}" slot="body" @save="${this._onTokenSave}" @delete="${this._onTokenDelete}"></cme-token-item-edit>`))}</div><vscode-button @click="${this._onAddItemClick}">Add item</vscode-button></div></div>`}};D([t()],E.prototype,"_shareableConfig",void 0),D([t()],E.prototype,"_staticTemplate",void 0),D([t()],E.prototype,"_dynamicTemplate",void 0),D([t()],E.prototype,"_tokens",void 0),D([t()],E.prototype,"_statusMessage",void 0),D([t()],E.prototype,"_statusMessageType",void 0),E=D([i("cme-settings-content")],E);var z=function(e,t,o,s){for(var i,n=arguments.length,a=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,o):s,l=e.length-1;l>=0;l--)(i=e[l])&&(a=(n<3?i(a):n>3?i(t,o,a):i(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a};let N=class extends(p(m)(d)){constructor(){super(...arguments),this._handlePostMessagesBound=this._handlePostMessages.bind(this)}connectedCallback(){super.connectedCallback(),window.addEventListener("message",this._handlePostMessagesBound)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("message",this._handlePostMessagesBound)}_handlePostMessages(e){const{command:t,payload:o}=e.data;switch(t){case"receiveImportedConfig":m.dispatch(_(o));break;case"statusMessage":m.dispatch(b(o));break;case"loadCurrentConfig":m.dispatch(_(o))}}render(){return l`<cme-settings-content></cme-settings-content>`}};N=z([i("cme-settings-page")],N);export{N as SettingsPage};
