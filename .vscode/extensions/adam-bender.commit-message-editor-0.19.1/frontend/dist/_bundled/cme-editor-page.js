import{e,n as t,V as s,r as i,T as o,t as n,o as c,h as r,i as l,A as a,a as d,c as h,s as u,b as v,d as p,f as m,g as b,j as f,Z as g,k as x,l as y,m as $,w as k,p as w,q as C,u as _,v as S,x as I,y as A,z as T,B as z,C as O}from"./dd4c9c27.js";var B=function(e,t,s,i){for(var o,n=arguments.length,c=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i,r=e.length-1;r>=0;r--)(o=e[r])&&(c=(n<3?o(c):n>3?o(t,s,c):o(t,s))||c);return n>3&&c&&Object.defineProperty(t,s,c),c};let E=class extends s{constructor(){super(),this._headerSlot=null,this._mainSlot=null,this._selectedIndex=0}set selectedIndex(e){this._selectedIndex=e,this._setActiveTab()}get selectedIndex(){return this._selectedIndex}_setActiveTab(){this._mainSlot&&this._headerSlot&&(Array.from(this._mainSlot.assignedElements()).forEach(((e,t)=>{e.style.display=t===this._selectedIndex?"block":"none"})),Array.from(this._headerSlot.assignedElements()).forEach(((e,t)=>{e.dataset.index=String(t),e.classList.toggle("is-active",t===this._selectedIndex)})),this.dispatchEvent(new CustomEvent("vsc-select",{detail:{selectedIndex:this._selectedIndex},composed:!0})))}_onSlotChanged(){this._setActiveTab()}_onHeaderClick(e){const t=e.target.dataset.index;t&&(this._selectedIndex=Number(t),this._setActiveTab())}firstUpdated(){this._headerSlot=this.shadowRoot.querySelector("slot[name=header]"),this._mainSlot=this.shadowRoot.querySelector("slot:not([name=header])"),this._mainSlot.addEventListener("slotchange",this._onSlotChanged.bind(this))}static get styles(){return[super.styles,i`:host{display:block}.header{display:flex;font-family:var(--vscode-font-family);font-size:var(--vscode-font-size);font-weight:var(--vscode-font-weight);width:100%}:host-context(.vscode-light) .header{border-bottom:1px solid #ccc}::slotted(header){border-bottom:1px solid transparent;color:var(--vscode-foreground);cursor:pointer;display:block;margin-bottom:-1px;overflow:hidden;padding:7px 8px;text-overflow:ellipsis;user-select:none;white-space:nowrap}::slotted(.is-active){border-bottom-color:var(--vscode-settings-headerForeground);color:var(--vscode-settings-headerForeground)}`]}render(){return o`<div class="header" @click="${this._onHeaderClick}"><slot name="header"></slot></div><slot></slot>`}};B([e({type:Number})],E.prototype,"selectedIndex",null),E=B([t("vscode-tabs")],E);class j{constructor(e=10){this._history=[],this._undoSteps=0,this._length=e}clear(){this._history=[]}add(e){var t;const{value:s,type:i,caretPos:o}=e,n=this._history.length;this._undoSteps>0&&(this._history=this._history.slice(0,0-this._undoSteps),this._undoSteps=0),"inputchange"===i&&"inputchange"===(null===(t=this._history[n-1])||void 0===t?void 0:t.type)?(this._history[n-1].value=s,this._history[n-1].caretPos=o):this._history.push({value:s,type:i,caretPos:o}),this._history.length>this._length&&this._history.shift()}undo(){let e=void 0;const t=this._history.length-2-this._undoSteps;return this._history[t]&&(this._undoSteps++,e=this._history[t]),e}redo(){let e=void 0;const t=this._history.length-this._undoSteps;return this._history[t]&&(this._undoSteps--,e=this._history[t]),e}}const L=e=>{const t=[];let s=0,i=-2;for(;-1!==i;)i=e.indexOf("\n",s),i>-1&&(s=i+1,t.push(i));return t},P=e=>{const{selectionStart:t,selectionEnd:s}=e;return{textBeforeSelection:e.value.substring(0,t),textAfterSelection:e.value.substring(s,e.value.length),selectionStart:t,selectionEnd:s}},F=e=>e.value.split("\n").reduce(((e,t)=>t.length>e?t.length:e),0),N=(e,t=!0)=>{const{selectionStart:s,selectionEnd:i,textBeforeSelection:o,textAfterSelection:n}=P(e),c=o+"\n"+n;if(t){const t=i-(i-s),o=L(c),n=c.split("\n"),r=function(e,t){let s,i=0,o=e.length-1;for(;i<=o;){if(s=Math.floor((i+o)/2),e[s]===t)return s;e[s]<t?i=s+1:o=s-1}return-1}(o,t),l=/^\s+/g.exec(n[r]),a=l?l[0]:"";n[r+1]=a+n[r+1];let d=0;n.forEach(((e,t)=>{t<=r&&(d+=e.length+1)})),e.value=n.join("\n"),e.selectionStart=e.selectionEnd=d+a.length}else e.value=c,e.selectionStart=e.selectionEnd=s+1};var M=function(e,t,s,i){for(var o,n=arguments.length,c=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i,r=e.length-1;r>=0;r--)(o=e[r])&&(c=(n<3?o(c):n>3?o(t,s,c):o(t,s))||c);return n>3&&c&&Object.defineProperty(t,s,c),c};const R=-1!==navigator.userAgent.indexOf("Mac")?1.5:1.35;let W=class extends r{constructor(){super(...arguments),this.rulers=[],this.lines=10,this.tabSize=2,this.useTabs=!1,this._value="",this._linefeedPositions=[],this._history=new j(50),this._lineHeight=0,this._longestLineStrLength=0,this._charWidth=0}set value(e){this._value=e,this._history.clear(),this._history.add({type:"initializing",value:e,caretPos:e.length}),this._linefeedPositions=L(e)}get value(){return this.renderRoot.querySelector("#inputElement").value}connectedCallback(){super.connectedCallback();const e=this._measureCharacter();this._lineHeight=e.h,this._charWidth=e.w}_measureCharacter(){var e;const t=getComputedStyle(document.body).getPropertyValue("--vscode-editor-font-size"),s=parseInt(t),i=Math.round(s*R),o=document.createElement("span");o.innerHTML="M",o.style.display="inline-block",o.style.fontSize=t,o.style.fontFamily=getComputedStyle(document.body).getPropertyValue("--vscode-editor-font-family"),o.style.lineHeight=i+"px",null===(e=this.shadowRoot)||void 0===e||e.appendChild(o);const n=o.getBoundingClientRect();return o.remove(),{w:n.width,h:n.height}}_handleWrapperClick(){var e;const t=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#inputElement");t&&(t.focus(),this._linefeedPositions=L(t.value))}_handleInput(e){const t=e.composedPath()[0];this._history.add({type:"inputchange",value:t.value,caretPos:t.selectionEnd}),this._linefeedPositions=L(t.value),this._longestLineStrLength=F(t)}_handleChange(e){const t=e.composedPath().find((e=>"TEXTAREA"===e.nodeName.toUpperCase()));this.dispatchEvent(new CustomEvent("vsc-change",{detail:t.value}))}_scrollCaretToVisibleArea(e){const t=((e,t)=>{const{selectionStart:s,selectionEnd:i}=e;if(s!==i)return-1;const o=s;return 0===t.length?0:o>t[t.length-1]?t.length:t.findIndex(((e,t,s)=>0===t?o>=0&&o<=e:o>s[t-1]&&o<=e))})(e,L(e.value))+1;this._lineHeight*t<this._wrapperEl.scrollTop?setTimeout((()=>{this._wrapperEl.scrollTop=this._lineHeight*(t-1)+4}),100):this._lineHeight*t>=this._wrapperEl.scrollTop+this.lines*this._lineHeight&&setTimeout((()=>{this._wrapperEl.scrollTop=this._lineHeight*t-this.lines*this._lineHeight}),1)}_handleKeyDown(e){const t=e.composedPath()[0];if("Tab"===e.key&&(e.preventDefault(),((e,t=!0,s=2)=>{const{selectionStart:i,textBeforeSelection:o,textAfterSelection:n}=P(e),c=t?"\t":"".padEnd(s," ");e.value=o+c+n,e.selectionStart=e.selectionEnd=i+c.length})(t,this.useTabs,this.tabSize),this._history.add({type:"keypress",value:t.value,caretPos:t.selectionEnd}),this._scrollCaretToVisibleArea(t)),"Enter"===e.key&&(e.preventDefault(),N(t),this._history.add({type:"keypress",value:t.value,caretPos:t.selectionEnd}),this._wrapperEl.scrollLeft=0,this._scrollCaretToVisibleArea(t)),"z"===e.key&&e.ctrlKey){e.preventDefault(),e.stopPropagation();const s=this._history.undo();if(s){const{value:e,caretPos:i}=s;t.value=e,t.selectionStart=t.selectionEnd=i}}if("y"===e.key&&e.ctrlKey){e.preventDefault(),e.stopPropagation();const s=this._history.redo();if(s){const{value:e,caretPos:i}=s;t.value=e,t.selectionStart=t.selectionEnd=i}}this._linefeedPositions=L(t.value),this._longestLineStrLength=F(t)}_handleKeyUp(e){if("ArrowUp"===e.key||"ArrowDown"===e.key){const t=e.composedPath()[0];this._linefeedPositions=L(t.value)}}static get styles(){return i`:host{display:block}.wrapper{background-color:var(--vscode-editorWidget-background);border:1px solid var(--vscode-editorWidget-background);box-sizing:border-box;overflow-y:auto;padding:4px;position:relative}.wrapper::-webkit-scrollbar{cursor:default;height:10px;width:10px}.wrapper::-webkit-scrollbar-thumb{background-color:var(--vscode-scrollbarSlider-background)}.wrapper::-webkit-scrollbar-corner{background-color:var(--vscode-editorWidget-background)}.editable-area-wrapper{cursor:text;min-height:100%;min-width:100%;overflow:visible;position:relative;width:100%;z-index:2}.textarea-scroller{height:100%;min-width:100%}.textarea{background-color:transparent;border:0;box-sizing:border-box;color:var(--vscode-editorWidget-foreground);display:block;font-family:var(--vscode-editor-font-family);font-size:var(--vscode-editor-font-size);font-weight:var(--vscode-font-weight);height:200px;line-height:1.3;min-width:100%;overflow:hidden;padding:0;position:relative;resize:none;width:100%;white-space:pre;z-index:1}.textarea::selection{background-color:var(--vscode-editor-selectionBackground)}.textarea:focus{outline:0}.rulers{display:block;left:0;margin-left:4px;min-height:100%;overflow:hidden;pointer-events:none;position:absolute;top:0;width:calc(100% - 4px);z-index:1}.ruler{border-right:1px solid var(--vscode-editorRuler-foreground);display:flex;height:100%;left:0;position:absolute;top:0}.ruler-placeholder{font-family:var(--vscode-editor-font-family);font-size:var(--vscode-editor-font-size);font-weight:var(--vscode-font-weight);white-space:pre}`}render(){const e=this._linefeedPositions.length+1,t=this._lineHeight*e,s=this._longestLineStrLength*this._charWidth,i=l({height:this.lines*this._lineHeight+8+2+"px"}),n=l({width:s+"px"}),c=l({height:t+"px",lineHeight:this._lineHeight+"px",tabSize:String(this.tabSize)}),r=l({height:t+8+"px"}),a=this.rulers.map((e=>o`<div class="ruler"><div class="ruler-placeholder">${"".padStart(e," ")}</div></div>`));return o`<div class="wrapper" style="${i}" @click="${this._handleWrapperClick}"><div class="editable-area-wrapper" style="${n}"><textarea id="inputElement" class="textarea" spellcheck="false" @keydown="${this._handleKeyDown}" @keyup="${this._handleKeyUp}" @input="${this._handleInput}" @change="${this._handleChange}" .value="${this._value}" style="${c}"></textarea></div><div class="rulers" style="${r}">${a}</div></div>`}};M([e()],W.prototype,"value",null),M([e({type:Array})],W.prototype,"rulers",void 0),M([e({type:Number})],W.prototype,"lines",void 0),M([e({type:Number})],W.prototype,"tabSize",void 0),M([e({type:Boolean})],W.prototype,"useTabs",void 0),M([n()],W.prototype,"_value",void 0),M([n()],W.prototype,"_linefeedPositions",void 0),M([c(".wrapper")],W.prototype,"_wrapperEl",void 0),W=M([t("cme-code-editor")],W);var V,D,H=function(e,t,s,i){for(var o,n=arguments.length,c=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i,r=e.length-1;r>=0;r--)(o=e[r])&&(c=(n<3?o(c):n>3?o(t,s,c):o(t,s))||c);return n>3&&c&&Object.defineProperty(t,s,c),c};!function(e){e.ARROW_DOWN="ArrowDown",e.ARROW_UP="ArrowUp",e.ENTER="Enter",e.ESCAPE="Escape",e.SPACE=" "}(V||(V={})),function(e){e.BRANCH="branch",e.LEAF="leaf"}(D||(D={}));const K=(e,t=[])=>{const s=[];return e.forEach(((e,i)=>{const{label:o,subItems:n,open:c,selected:r,focused:l,icons:a,value:d}=e,h=[...t,i],u={label:o,path:h,open:!!c,selected:!!r,focused:!!l,icons:{...a},value:d};n&&(u.subItems=K(n,h)),s.push(u)})),s};let U=class extends s{constructor(){super(...arguments),this.indent=8,this.arrows=!1,this.multiline=!1,this.tabindex=0,this._data=[],this._selectedItem=null,this._focusedItem=null,this.onComponentKeyDownBound=this.onComponentKeyDown.bind(this)}set data(e){const t=this._data;this._data=K(e),this.requestUpdate("data",t)}get data(){return this._data}getItemByPath(e){let t=this._data,s=null;return e.forEach(((i,o)=>{o===e.length-1?s=t[i]:t=t[i].subItems})),s}getItemType(e){return e.subItems&&Array.isArray(e.subItems)&&e.subItems.length>0?D.BRANCH:D.LEAF}getIconName(e){if(!e.icons)return;const{icons:t}=e,s=this.getItemType(e),i=e.open||!1;return s===D.BRANCH&&i?t.open||void 0:s!==D.BRANCH||i?s===D.LEAF&&t.leaf||void 0:t.branch||void 0}renderTreeItem({indentLevel:e,label:t,path:s,iconName:i,open:n=!1,itemType:c,selected:r=!1,focused:d=!1,subItems:h}){const u=n?"chevron-down":"chevron-right",v=["contents"],p=n?["open"]:[],m=e*this.indent,b=this.arrows&&c===D.LEAF?18+m:m,f=this.arrows&&c===D.BRANCH?o`<vscode-icon name="${u}" class="icon-arrow"></vscode-icon>`:a,g=i?o`<vscode-icon name="${i}" class="label-icon"></vscode-icon>`:a,x=n&&c===D.BRANCH?o`<ul>${this.renderTree(h,s)}</ul>`:a,y=o`<span class="label">${t}</span>`;return p.push(c===D.LEAF?"leaf":"branch"),r&&v.push("selected"),d&&v.push("focused"),o`<li data-path="${s.join("/")}" class="${p.join(" ")}"><span class="${v.join(" ")}" style="${l({paddingLeft:b+"px"})}">${f} ${g} ${y} </span>${x}</li>`}renderTree(e,t=[]){const s=[];return e?(e.forEach(((e,i)=>{const o=[...t,i],n=o.length-1,c=this.getItemType(e),r=this.getIconName(e),{label:l,open:a=!1,selected:d=!1,focused:h=!1,subItems:u=[]}=e;d&&(this._selectedItem=e),h&&(this._focusedItem=e),s.push(this.renderTreeItem({indentLevel:n,label:l,path:o,open:a,iconName:r,itemType:c,selected:d,focused:h,subItems:u}))})),s):a}toggleSubTreeOpen(e){e.subItems&&(e.open=!e.open)}selectTreeItem(e){this._selectedItem&&(this._selectedItem.selected=!1),this._selectedItem=e,e.selected=!0}focusTreeItem(e){this._focusedItem&&(this._focusedItem.focused=!1),this._focusedItem=e,e.focused=!0}closeSubTreeRecursively(e){e.forEach((e=>{e.open=!1,e.subItems&&e.subItems.length>0&&this.closeSubTreeRecursively(e.subItems)}))}emitSelectEvent(e,t){const{icons:s,label:i,open:o,value:n}=e,c={icons:s,itemType:this.getItemType(e),label:i,open:o||!1,value:n||i,path:t};this.dispatchEvent(new CustomEvent("vsc-select",{bubbles:!0,composed:!0,detail:c}))}_focusItem(e){this._focusedItem&&(this._focusedItem.focused=!1),this._focusedItem=e,this._focusedItem.focused=!0}_focusPrevItem(){var e;if(!this._focusedItem)return void this._focusItem(this._data[0]);const{path:t}=this._focusedItem;if(t&&(null==t?void 0:t.length)>0){const s=t[t.length-1],i=t.length>1;if(s>0){const i=[...t];i[i.length-1]=s-1;const o=this.getItemByPath(i);let n=o;if((null==o?void 0:o.open)&&(null===(e=o.subItems)||void 0===e?void 0:e.length)){const{subItems:e}=o;n=e[e.length-1]}this._focusItem(n)}else if(i){const e=[...t];e.pop(),this._focusItem(this.getItemByPath(e))}}else this._focusItem(this._data[0])}_focusNextItem(){if(!this._focusedItem)return void this._focusItem(this._data[0]);const{path:e,open:t}=this._focusedItem;if(t&&Array.isArray(this._focusedItem.subItems)&&this._focusedItem.subItems.length>0)return void this._focusItem(this._focusedItem.subItems[0]);const s=[...e];s[s.length-1]+=1;let i=this.getItemByPath(s);i?this._focusItem(i):(s.pop(),s.length>0&&(s[s.length-1]+=1,i=this.getItemByPath(s),i&&this._focusItem(i)))}onComponentClick(e){const t=e.composedPath().find((e=>e.tagName&&"LI"===e.tagName.toUpperCase()));if(t){const e=t.dataset.path||"",s=e.split("/").map((e=>Number(e))),i=this.getItemByPath(s);this.toggleSubTreeOpen(i),this.selectTreeItem(i),this.focusTreeItem(i),this.emitSelectEvent(i,e),this.requestUpdate()}else this._focusedItem&&(this._focusedItem.focused=!1),this._focusedItem=null}onComponentKeyDown(e){[V.ARROW_DOWN,V.ARROW_UP,V.ENTER,V.ESCAPE,V.SPACE].includes(e.key)&&(e.stopPropagation(),e.preventDefault()),e.key===V.ESCAPE&&(this._focusedItem=null),e.key===V.ARROW_UP&&this._focusPrevItem(),e.key===V.ARROW_DOWN&&this._focusNextItem(),e.key!==V.ENTER&&e.key!==V.SPACE||(this._selectedItem&&(this._selectedItem.selected=!1),this._focusedItem&&(this._selectedItem=this._focusedItem),this._selectedItem&&(this._selectedItem.selected=!0,this._selectedItem.open=!this._selectedItem.open,this.emitSelectEvent(this._selectedItem,this._selectedItem.path.join("/")),this.requestUpdate()))}closeAll(){this.closeSubTreeRecursively(this.data),this.requestUpdate()}connectedCallback(){super.connectedCallback(),this.addEventListener("keydown",this.onComponentKeyDownBound)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("keydown",this.onComponentKeyDownBound)}static get styles(){return[super.styles,i`:host{display:block;outline:0;user-select:none}.wrapper{height:100%}:host(:focus) .wrapper.focused-none{outline:1px solid var(--vscode-list-focusOutline)}li{list-style:none}li,ul{margin:0;padding:0}.contents{align-items:center;display:flex;font-family:var(--vscode-font-family);font-size:var(--vscode-font-size);font-weight:var(--vscode-font-weight)}.multi .contents{align-items:flex-start}.contents:hover{background-color:var(--vscode-list-hoverBackground);color:var(--vscode-list-hoverForeground);cursor:pointer}.contents.selected{background-color:var(--vscode-list-inactiveSelectionBackground)}:host(:focus) .contents.focused{background-color:var(--vscode-list-focusBackground);outline:1px solid var(--vscode-list-focusOutline);outline-offset:-1px}:host(:focus) .contents.selected,:host(:focus) .contents.selected.focused{background-color:var(--vscode-list-activeSelectionBackground);color:var(--vscode-list-activeSelectionForeground)}.icon-arrow{display:block;margin:3px 2px 3px 0}.label-icon{display:block;margin-right:6px}:host(:focus) .contents.selected .label-icon,:host(:focus) .contents.selected.focused .label-icon{color:var(--vscode-list-activeSelectionForeground)}.multi .contents .label-icon{margin-top:3px}.label{display:block;line-height:22px}.single .label{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}`]}render(){const e=d({multi:this.multiline,single:!this.multiline,wrapper:!0,"focused-none":!this._focusedItem,"selection-none":!this._selectedItem,"selection-single":null!==this._selectedItem});return o`<div @click="${this.onComponentClick}" class="${e}"><ul>${this.renderTree(this._data)}</ul></div>`}};H([e({type:Array,reflect:!1})],U.prototype,"data",null),H([e({type:Number})],U.prototype,"indent",void 0),H([e({type:Boolean})],U.prototype,"arrows",void 0),H([e({type:Boolean})],U.prototype,"multiline",void 0),H([e({type:Number,reflect:!0})],U.prototype,"tabindex",void 0),H([n()],U.prototype,"_selectedItem",void 0),H([n()],U.prototype,"_focusedItem",void 0),U=H([t("vscode-tree")],U);var q=function(e,t,s,i){for(var o,n=arguments.length,c=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i,r=e.length-1;r>=0;r--)(o=e[r])&&(c=(n<3?o(c):n>3?o(t,s,c):o(t,s))||c);return n>3&&c&&Object.defineProperty(t,s,c),c};let X=class extends r{constructor(){super(...arguments),this.data=[],this.loading=!1,this.maxItems=10}_handleItemSelect(e){this.dispatchEvent(new CustomEvent("cme-select",{detail:e.detail.value}))}static get styles(){return i`@keyframes pulse{0%{opacity:.03}50%{opacity:.1}100%{opacity:.03}}:host{display:block;user-select:none}.title{color:var(--vscode-settings-headerForeground);font-size:var(--vscode-font-size);font-weight:600;line-height:22px;margin:0}.spinner-wrapper{display:flex;justify-content:center;margin:8px 0}.placeholder-item{animation:pulse 1.5s infinite;box-sizing:border-box;height:22px;margin-left:22px;opacity:.1;padding-top:7px;position:relative}.placeholder-item:before{background-color:var(--vscode-editor-foreground);content:'';display:block;height:16px;left:-22px;position:absolute;top:3px;width:16px}.placeholder-item:after{background-color:var(--vscode-editor-foreground);content:'';display:block;height:9px}`}render(){const e=void 0!==this.data?((e,t)=>{if(!Array.isArray(e))return[];let s=e;return e.length>t&&(s=e.slice(0,t)),s.map((e=>{const{message:t}=e;return{label:t.split("\n")[0],value:t}}))})(this.data,this.maxItems).map((({label:e,value:t})=>({icons:{leaf:"git-commit"},label:e,value:t}))):[],t=Array(this.maxItems).fill(o`<div class="placeholder-item"></div>`);return o`<h2 class="title">Recent commits:</h2>${this.loading?o`<div class="placeholder">${t}</div>`:o`<vscode-tree tabindex="0" .data="${e}" @vsc-select="${this._handleItemSelect}"></vscode-tree>`}`}};q([e({type:Array})],X.prototype,"data",void 0),q([e({type:Boolean})],X.prototype,"loading",void 0),q([e({type:Number})],X.prototype,"maxItems",void 0),X=q([t("cme-recent-commits")],X);var G=function(e,t,s,i){for(var o,n=arguments.length,c=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i,r=e.length-1;r>=0;r--)(o=e[r])&&(c=(n<3?o(c):n>3?o(t,s,c):o(t,s))||c);return n>3&&c&&Object.defineProperty(t,s,c),c};let J=class extends(h(u)(r)){constructor(){super(...arguments),this._numberOfRepositories=1,this._selectedRepositoryPath=""}stateChanged(e){const{numberOfRepositories:t,selectedRepositoryPath:s}=e;this._numberOfRepositories=t,this._selectedRepositoryPath=s}static get styles(){return i`.repo-info{align-items:center;color:var(--vscode-input-foreground);display:flex;font-size:var(--vscode-font-size);margin:10px 0}`}render(){if(this._numberOfRepositories<2)return o`${a}`;const e=this._selectedRepositoryPath.split("/"),t=e[e.length-1];return o`<div class="repo-info" title="${this._selectedRepositoryPath}"><vscode-icon name="repo"></vscode-icon>  <b>Selected repository:</b>  ${t}</div>`}};G([n()],J.prototype,"_numberOfRepositories",void 0),G([n()],J.prototype,"_selectedRepositoryPath",void 0),J=G([t("cme-repo-info")],J);const Q=e=>{Array.from(e).forEach((e=>{const t=e.value;e.value=""===t?" ":"",e.value=t}))};var Y=function(e,t,s,i){for(var o,n=arguments.length,c=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i,r=e.length-1;r>=0;r--)(o=e[r])&&(c=(n<3?o(c):n>3?o(t,s,c):o(t,s))||c);return n>3&&c&&Object.defineProperty(t,s,c),c};let Z=class extends(h(u)(r)){constructor(){super(...arguments),this._showRecentCommits=!1,this._isCommitsLoading=!1,this._commits=void 0,this._saveAndClose=!1,this._inputBoxValue="",this._useMonospaceEditor=!1,this._tabSize=4,this._useTabs=!1,this._rulers=[],this._visibleLines=10,this._staticTemplate="",this._amendCbChecked=!1}visibleCallback(){var e;const t=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelectorAll("vscode-inputbox[multiline]");Q(t)}_handleLoadTemplateButtonClick(e){e.stopPropagation(),e.preventDefault(),u.dispatch(v(this._staticTemplate))}_handleInputBoxChange(e){this._inputBoxValue=e.detail,u.dispatch(v(this._inputBoxValue))}_handleSuccessButtonClick(){this._amendCbChecked?u.dispatch(p(this._inputBoxValue)):this._saveAndClose?(u.dispatch(m(this._inputBoxValue)),u.dispatch(b())):u.dispatch(m(this._inputBoxValue))}_handleCancelButtonClick(){u.dispatch(b())}_handleCheckBoxChange(e){const{checked:t}=e.detail;this._amendCbChecked=t,t&&this._commits&&this._commits.length>0&&u.dispatch(v(this._commits[0].message))}_handleSelect(e){u.dispatch(v(e.detail))}stateChanged(e){const{config:t}=e,{saveAndClose:s,showRecentCommits:i,useMonospaceEditor:o,tabSize:n,useTabs:c,rulers:r,visibleLines:l}=t.view;this._saveAndClose=s,this._staticTemplate=t.staticTemplate.join("\n"),this._showRecentCommits=i,this._useMonospaceEditor=o,this._tabSize=n,this._useTabs=c,this._rulers=r,this._visibleLines=l,this._isCommitsLoading=e.recentCommitsLoading,this._inputBoxValue=e.textareaValue,this._visibleLines=t.view.visibleLines,void 0!==e.recentCommits&&this._showRecentCommits&&(this._commits=e.recentCommits),void 0===e.recentCommits&&this._showRecentCommits&&!this._isCommitsLoading&&u.dispatch(f())}connectedCallback(){super.connectedCallback(),void 0===this._commits&&this._showRecentCommits&&u.dispatch(f())}static get styles(){return i`.inputbox{width:100%}.editor-toolbar{display:block;overflow:visible}.editor-toolbar p{color:var(--vscode-descriptionForeground);margin:10px 0}.editor-toolbar a{align-items:center;color:var(--vscode-textLink-foreground);display:inline-flex;outline-color:var(--vscode-focusBorder);text-decoration:none}.editor-toolbar a:active,.editor-toolbar a:focus,.editor-toolbar a:hover{color:var(--vscode-textLink-activeForeground)}.editor-toolbar vscode-icon{cursor:pointer;margin-right:2px}.buttons{align-items:center;display:flex;margin-top:10px}.buttons .cb-amend{margin-left:20px}.buttons vscode-button{margin-right:10px}cme-recent-commits{margin-top:30px}`}render(){let e=a;this._showRecentCommits&&(e=o`<cme-recent-commits .data="${this._commits}" ?loading="${this._isCommitsLoading}" @cme-select="${this._handleSelect}"></cme-recent-commits>`);const t=o`<vscode-inputbox ?multiline="${!0}" id="message-box" lines="${this._visibleLines}" maxlines="${this._visibleLines}" value="${this._inputBoxValue}" @vsc-change="${this._handleInputBoxChange}" class="inputbox"></vscode-inputbox>`,s=o`<cme-code-editor value="${this._inputBoxValue}" lines="${this._visibleLines}" tabsize="${this._tabSize}" .useTabs="${this._useTabs}" .rulers="${this._rulers}" @vsc-change="${this._handleInputBoxChange}"></cme-code-editor>`;return o`<div class="editor-toolbar"><p><a href="#" title="Load configured template" @click="${this._handleLoadTemplateButtonClick}"><vscode-icon name="file"></vscode-icon>Load template</a></p></div>${this._useMonospaceEditor?s:t}<cme-repo-info></cme-repo-info><div class="buttons"><vscode-button @click="${this._handleSuccessButtonClick}">${this._saveAndClose?"Save and close":"Save"}</vscode-button><vscode-button @click="${this._handleCancelButtonClick}">Cancel</vscode-button><vscode-checkbox label="Amend previous commit" class="cb-amend" id="text-amend-checkbox" @vsc-change="${this._handleCheckBoxChange}"></vscode-checkbox></div>${e}`}};Y([n()],Z.prototype,"_showRecentCommits",void 0),Y([n()],Z.prototype,"_isCommitsLoading",void 0),Y([n()],Z.prototype,"_commits",void 0),Y([n()],Z.prototype,"_saveAndClose",void 0),Y([n()],Z.prototype,"_inputBoxValue",void 0),Y([n()],Z.prototype,"_useMonospaceEditor",void 0),Y([n()],Z.prototype,"_tabSize",void 0),Y([n()],Z.prototype,"_useTabs",void 0),Y([n()],Z.prototype,"_rulers",void 0),Y([n()],Z.prototype,"_visibleLines",void 0),Z=Y([t("cme-text-view")],Z);const{H:ee}=g,te=()=>document.createComment(""),se=(e,t,s)=>{var i;const o=e._$AA.parentNode,n=void 0===t?e._$AB:t._$AA;if(void 0===s){const t=o.insertBefore(te(),n),i=o.insertBefore(te(),n);s=new ee(t,i,e,e.options)}else{const t=s._$AB.nextSibling,c=s._$AM,r=c!==e;if(r){let t;null===(i=s._$AQ)||void 0===i||i.call(s,e),s._$AM=e,void 0!==s._$AP&&(t=e._$AU)!==c._$AU&&s._$AP(t)}if(t!==n||r){let e=s._$AA;for(;e!==t;){const t=e.nextSibling;o.insertBefore(e,n),e=t}}}return s},ie=(e,t,s=e)=>(e._$AI(t,s),e),oe={},ne=e=>{var t;null===(t=e._$AP)||void 0===t||t.call(e,!1,!0);let s=e._$AA;const i=e._$AB.nextSibling;for(;s!==i;){const e=s.nextSibling;s.remove(),s=e}},ce=(e,t,s)=>{const i=new Map;for(let o=t;o<=s;o++)i.set(e[o],o);return i},re=x(class extends y{constructor(e){if(super(e),e.type!==$.CHILD)throw Error("repeat() can only be used in text expressions")}ht(e,t,s){let i;void 0===s?s=t:void 0!==t&&(i=t);const o=[],n=[];let c=0;for(const t of e)o[c]=i?i(t,c):c,n[c]=s(t,c),c++;return{values:n,keys:o}}render(e,t,s){return this.ht(e,t,s).values}update(e,[t,s,i]){var o;const n=(e=>e._$AH)(e),{values:c,keys:r}=this.ht(t,s,i);if(!n)return this.dt=r,c;const l=null!==(o=this.dt)&&void 0!==o?o:this.dt=[],a=[];let d,h,u=0,v=n.length-1,p=0,m=c.length-1;for(;u<=v&&p<=m;)if(null===n[u])u++;else if(null===n[v])v--;else if(l[u]===r[p])a[p]=ie(n[u],c[p]),u++,p++;else if(l[v]===r[m])a[m]=ie(n[v],c[m]),v--,m--;else if(l[u]===r[m])a[m]=ie(n[u],c[m]),se(e,a[m+1],n[u]),u++,m--;else if(l[v]===r[p])a[p]=ie(n[v],c[p]),se(e,n[u],n[v]),v--,p++;else if(void 0===d&&(d=ce(r,p,m),h=ce(l,u,v)),d.has(l[u]))if(d.has(l[v])){const t=h.get(r[p]),s=void 0!==t?n[t]:null;if(null===s){const t=se(e,n[u]);ie(t,c[p]),a[p]=t}else a[p]=ie(s,c[p]),se(e,n[u],s),n[t]=null;p++}else ne(n[v]),v--;else ne(n[u]),u++;for(;p<=m;){const t=se(e,a[m+1]);ie(t,c[p]),a[p++]=t}for(;u<=v;){const e=n[u++];null!==e&&ne(e)}return this.dt=r,((e,t=oe)=>{e._$AH=t})(e,a),k}});var le=function(e,t,s,i){for(var o,n=arguments.length,c=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i,r=e.length-1;r>=0;r--)(o=e[r])&&(c=(n<3?o(c):n>3?o(t,s,c):o(t,s))||c);return n>3&&c&&Object.defineProperty(t,s,c),c};let ae=class extends w{constructor(){super(...arguments),this._multiple=!0}set selectedIndexes(e){this._selectedIndexes=e}get selectedIndexes(){return this._selectedIndexes}set value(e){this._values=e}get value(){return this._values}_onOptionClick(e){const t=e.composedPath().find((e=>"matches"in e&&e.matches("li.option")));if(!t)return;const s=Number(t.dataset.index);this._options[s]&&(this._options[s].selected=!this._options[s].selected),this._selectedIndexes=[],this._values=[],this._options.forEach((e=>{e.selected&&(this._selectedIndexes.push(e.index),this._values.push(e.value))})),this._dispatchChangeEvent()}_onMultiAcceptClick(){this._toggleDropdown(!1)}_onMultiDeselectAllClick(){this._selectedIndexes=[],this._values=[],this._options=this._options.map((e=>({...e,selected:!1}))),this._dispatchChangeEvent()}_onMultiSelectAllClick(){this._selectedIndexes=[],this._values=[],this._options=this._options.map((e=>({...e,selected:!0}))),this._options.forEach(((e,t)=>{this._selectedIndexes.push(t),this._values.push(e.value),this._dispatchChangeEvent()}))}_renderLabel(){switch(this._selectedIndexes.length){case 0:return o`<span class="select-face-badge no-item">No items selected</span>`;case 1:return o`<span class="select-face-badge">1 item selected</span>`;default:return o`<span class="select-face-badge">${this._selectedIndexes.length} items selected</span>`}}_renderSelectFace(){return o`<div class="select-face multiselect" @click="${this._onFaceClick}">${this._renderLabel()} ${C}</div>`}_renderComboboxFace(){const e=this._selectedIndex>-1?this._options[this._selectedIndex].label:"";return o`<div class="combobox-face">${this._renderLabel()} <input class="combobox-input" spellcheck="false" type="text" .value="${e}" @focus="${this._onComboboxInputFocus}" @input="${this._onComboboxInputInput}"> <button class="combobox-button" type="button" @click="${this._onComboboxButtonClick}" @keydown="${this._onComboboxButtonKeyDown}">${C}</button></div>`}_renderOptions(){const e=this.combobox?this._filteredOptions:this._options;return o`<ul class="options" @click="${this._onOptionClick}" @mouseover="${this._onOptionMouseOver}">${re(e,(e=>e.index),((e,t)=>{const s=this._selectedIndexes.includes(e.index),i=d({active:t===this._activeIndex,option:!0,selected:s}),n=d({"checkbox-icon":!0,checked:s});return o`<li class="${i}" data-index="${e.index}" data-filtered-index="${t}"><span class="${n}"></span> <span class="option-label">${e.label}</span></li>`}))}</ul>`}_renderDropdownControls(){return o`<div class="dropdown-controls"><button type="button" @click="${this._onMultiSelectAllClick}" title="Select all" class="action-icon"><vscode-icon name="checklist"></vscode-icon></button> <button type="button" @click="${this._onMultiDeselectAllClick}" title="Deselect all" class="action-icon"><vscode-icon name="clear-all"></vscode-icon></button><vscode-button @click="${this._onMultiAcceptClick}">OK</vscode-button></div>`}};le([e({type:Array})],ae.prototype,"selectedIndexes",null),le([e({type:Array})],ae.prototype,"value",null),ae=le([t("vscode-multi-select")],ae);var de=()=>{};class he{constructor(){this._tokens=[],this._handleFormItemChange=de}set tokens(e){this._tokens=e}get tokens(){return this._tokens}set formItemChangeHandler(e){this._handleFormItemChange=e}build(){return this._tokens.map((e=>{switch(e.type){case"enum":return this._renderEnumTypeWidget(e);case"text":return this._renderTextTypeWidget(e);case"boolean":return this._renderBooleanTypeWidget(e);default:return o`${a}`}}))}_renderFormItem(e,t,s=""){let i=o`${a}`;return s&&(i=o`<vscode-form-helper>${s}</vscode-form-helper>`),o`<vscode-form-group variant="settings-group"><vscode-label>${t}</vscode-label>${i} ${e}</vscode-form-group>`}_renderEnumTypeWidget(e){var t;const{description:s,label:i,name:n,multiple:c,combobox:r}=e,l=r||!1,a=null===(t=e.options)||void 0===t?void 0:t.map((e=>{const{label:t,value:s,description:i}=e;return o`<vscode-option value="${_(s)}" description="${_(i)}">${t}</vscode-option>`})),d=c?o`<vscode-multi-select name="${n}" @vsc-change="${this._handleFormItemChange}" .combobox="${l}" class="vscode-select">${a}</vscode-multi-select>`:o`<vscode-single-select data-name="${n}" name="${n}" @vsc-change="${this._handleFormItemChange}" .combobox="${l}" class="vscode-select">${a}</vscode-single-select>`;return this._renderFormItem(d,i,s)}_renderTextTypeWidget(e){const{description:t,label:s,multiline:i,name:n,lines:c,maxLines:r,maxLength:l}=e,a=o`<vscode-inputbox data-name="${n}" name="${n}" ?multiline="${i}" @vsc-change="${this._handleFormItemChange}" lines="${_(c)}" maxLines="${_(r)}" maxLength="${_(l)}" style="width:100%"></vscode-inputbox>`;return this._renderFormItem(a,s,t)}_renderBooleanTypeWidget(e){const{description:t,label:s,name:i}=e,n=o`<vscode-checkbox data-name="${i}" name="${i}" label="${s}" @vsc-change="${this._handleFormItemChange}"></vscode-checkbox>`;return this._renderFormItem(n,s,t)}}class ue{constructor(e,t,s){this._template="",this._tokens=[],this._tokenValues={},this._template=e.join("\n"),this._tokens=t,this._tokenValues=s}compile(){let e=this._template;return this._tokens.forEach((({name:t,prefix:s="",suffix:i=""})=>{let o=this._tokenValues[t]||"";o=o?s+o+i:"",e=e.replace(new RegExp(`{${t}}`,"g"),o)})),e=e.replace(/\n{3,}/g,"\n"),e=e.replace(/\n+$/g,""),e}}var ve=function(e,t,s,i){for(var o,n=arguments.length,c=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i,r=e.length-1;r>=0;r--)(o=e[r])&&(c=(n<3?o(c):n>3?o(t,s,c):o(t,s))||c);return n>3&&c&&Object.defineProperty(t,s,c),c};let pe=class extends(h(u)(r)){constructor(){super(...arguments),this._saveAndClose=!1,this._tokens=[],this._amendCbChecked=!1,this._tokenValues={},this._dynamicTemplate=[]}visibleCallback(){var e;const t=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelectorAll("vscode-inputbox[multiline]");Q(t)}connectedCallback(){super.connectedCallback(),this.updateComplete.then((()=>{requestAnimationFrame((()=>{this._updateTokenValues()}))}))}stateChanged(e){const{config:t,tokenValues:s}=e,{view:i,tokens:o,dynamicTemplate:n}=t;this._saveAndClose=i.saveAndClose,this._tokens=o,this._tokenValues=s,this._dynamicTemplate=n}_updateTokenValues(){const e=this._formContainer.data,t={};this._tokens.forEach((s=>{const{name:i,type:o,separator:n=""}=s,c=e[i];switch(o){case"enum":t[i]=Array.isArray(c)?c.join(n):c;break;case"text":t[i]=String(c);break;case"boolean":t[i]=c[0]}})),u.dispatch(S(t))}_handleFormItemChange(){this._updateTokenValues()}_handleSuccessButtonClick(){const e=new ue(this._dynamicTemplate,this._tokens,this._tokenValues).compile();this._amendCbChecked?u.dispatch(p(e)):this._saveAndClose?(u.dispatch(m(e)),u.dispatch(b())):u.dispatch(m(e))}_handleCancelButtonClick(){u.dispatch(b())}_handleCheckBoxChange(e){const{checked:t}=e.detail;this._amendCbChecked=t}static get styles(){return i`.edit-form{margin:0 auto}.edit-form vscode-form-container{max-width:none;width:100%}.edit-form vscode-form-group{max-width:none;padding-left:0;padding-right:0}.vscode-select{display:block}.buttons{align-items:center;display:flex;margin-top:10px}.buttons .cb-amend{margin-left:20px}.buttons vscode-button{margin-right:10px}`}render(){const e=new he;e.formItemChangeHandler=this._handleFormItemChange,e.tokens=this._tokens;const t=e.build();return o`<div id="edit-form" class="edit-form"><vscode-form-container id="form-container">${t}</vscode-form-container></div><cme-repo-info></cme-repo-info><div class="buttons"><vscode-button id="success-button-form" @click="${this._handleSuccessButtonClick}">${this._saveAndClose?"Save and close":"Save"}</vscode-button><vscode-button id="cancel-button-form" @click="${this._handleCancelButtonClick}">Cancel</vscode-button><vscode-checkbox label="Amend previous commit" class="cb-amend" id="form-amend-checkbox" @vsc-change="${this._handleCheckBoxChange}"></vscode-checkbox></div>`}};ve([c("#form-container")],pe.prototype,"_formContainer",void 0),ve([n()],pe.prototype,"_saveAndClose",void 0),ve([n()],pe.prototype,"_tokens",void 0),ve([n()],pe.prototype,"_amendCbChecked",void 0),ve([n()],pe.prototype,"_tokenValues",void 0),pe=ve([t("cme-form-view")],pe);var me=function(e,t,s,i){for(var o,n=arguments.length,c=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i,r=e.length-1;r>=0;r--)(o=e[r])&&(c=(n<3?o(c):n>3?o(t,s,c):o(t,s))||c);return n>3&&c&&Object.defineProperty(t,s,c),c};const be=I();let fe=class extends(h(u)(r)){constructor(){super(...arguments),this._selectedIndex=0,this._visibleViews="both",this._fullWidth=!1}stateChanged(e){const{defaultView:t,visibleViews:s,fullWidth:i}=e.config.view;this._selectedIndex="text"===t?0:1,this._visibleViews=s,this._fullWidth=i}static get styles(){return i`:host{display:block;position:relative}.wrapper{margin:0 auto 30px;max-width:727px;position:relative;width:100%}.wrapper.full{max-width:none}vscode-icon[name=settings-gear]{position:absolute;right:0}.wrapper.both vscode-icon[name=settings-gear]{top:7px}.wrapper.text vscode-icon[name=settings-gear]{top:0}.wrapper.form vscode-icon[name=settings-gear]{top:12px}`}_handleTabChange(e){var t;const s=0===e.detail.selectedIndex?"cme-text-view":"cme-form-view";(null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector(s)).visibleCallback()}_onSettingsIconClick(){be.postMessage({command:"openConfigurationPage"})}_renderPortableSettingsButton(){return o`<vscode-icon name="settings-gear" action-icon title="Edit commit templates" @click="${this._onSettingsIconClick}"></vscode-icon>`}render(){const e=o`<cme-text-view></cme-text-view>`,t=o`<cme-form-view></cme-form-view>`,s=o`<div class="${d({wrapper:!0,full:this._fullWidth,both:!0})}">${this._renderPortableSettingsButton()}<vscode-tabs selectedIndex="${this._selectedIndex}" @vsc-select="${this._handleTabChange}"><header slot="header">Edit as text</header><section>${e}</section><header slot="header">Edit as form</header><section>${t}</section></vscode-tabs></div>`;let i;switch(this._visibleViews){case"text":i=o`<div class="${d({wrapper:!0,full:this._fullWidth,text:!0})}">${this._renderPortableSettingsButton()} ${e}</div>`;break;case"form":i=o`<div class="${d({wrapper:!0,full:this._fullWidth,form:!0})}">${this._renderPortableSettingsButton()} ${t}</div>`;break;default:i=s}return i}};me([n()],fe.prototype,"_selectedIndex",void 0),me([n()],fe.prototype,"_visibleViews",void 0),me([n()],fe.prototype,"_fullWidth",void 0),fe=me([t("cme-editor")],fe);var ge=function(e,t,s,i){for(var o,n=arguments.length,c=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i,r=e.length-1;r>=0;r--)(o=e[r])&&(c=(n<3?o(c):n>3?o(t,s,c):o(t,s))||c);return n>3&&c&&Object.defineProperty(t,s,c),c};const xe=I();let ye=class extends(h(u)(r)){constructor(){super(),this._handlePostMessagesBound=this._handlePostMessages.bind(this),xe.postMessage({command:"requestConfig"})}connectedCallback(){super.connectedCallback(),window.addEventListener("message",this._handlePostMessagesBound)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("message",this._handlePostMessagesBound)}static get styles(){return i`:host{display:block}`}render(){return o`<cme-editor></cme-editor>`}_handlePostMessages(e){const{command:t,payload:s}=e.data,i=u.getState(),{saveAndClose:o}=i.config.view;switch(t){case"amendPerformed":o&&u.dispatch(b());break;case"receiveConfig":u.dispatch(O(s));break;case"repositoryInfo":u.dispatch(z(s));break;case"recentCommitMessages":u.dispatch(T(s));break;case"copyFromSCMInputBox":u.dispatch(A(s))}}};ye=ge([t("cme-editor-page")],ye);export{ye as EditorPage};
