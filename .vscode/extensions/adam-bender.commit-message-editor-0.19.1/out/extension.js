var Oc=Object.create;var vr=Object.defineProperty;var Rc=Object.getOwnPropertyDescriptor;var Ic=Object.getOwnPropertyNames;var kc=Object.getPrototypeOf,jc=Object.prototype.hasOwnProperty;var so=t=>vr(t,"__esModule",{value:!0});var S=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Ac=(t,e)=>{so(t);for(var r in e)vr(t,r,{get:e[r],enumerable:!0})},Dc=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Ic(e))!jc.call(t,s)&&s!=="default"&&vr(t,s,{get:()=>e[s],enumerable:!(r=Rc(e,s))||r.enumerable});return t},de=t=>Dc(so(vr(t!=null?Oc(kc(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var Se=(t,e,r)=>new Promise((s,n)=>{var o=d=>{try{c(r.next(d))}catch(p){n(p)}},a=d=>{try{c(r.throw(d))}catch(p){n(p)}},c=d=>d.done?s(d.value):Promise.resolve(d.value).then(o,a);c((r=r.apply(t,e)).next())});var Jt=S(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.regexpCode=U.getProperty=U.safeStringify=U.stringify=U.strConcat=U.addCodeArg=U.str=U._=U.nil=U._Code=U.Name=U.IDENTIFIER=U._CodeOrName=void 0;var wr=class{};U._CodeOrName=wr;U.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var Ct=class extends wr{constructor(e){super();if(!U.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};U.Name=Ct;var Me=class extends wr{constructor(e){super();this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,s)=>`${r}${s}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,s)=>(s instanceof Ct&&(r[s.str]=(r[s.str]||0)+1),r),{})}};U._Code=Me;U.nil=new Me("");function yo(t,...e){let r=[t[0]],s=0;for(;s<e.length;)is(r,e[s]),r.push(t[++s]);return new Me(r)}U._=yo;var as=new Me("+");function go(t,...e){let r=[Gt(t[0])],s=0;for(;s<e.length;)r.push(as),is(r,e[s]),r.push(as,Gt(t[++s]));return Lc(r),new Me(r)}U.str=go;function is(t,e){e instanceof Me?t.push(...e._items):e instanceof Ct?t.push(e):t.push(Hc(e))}U.addCodeArg=is;function Lc(t){let e=1;for(;e<t.length-1;){if(t[e]===as){let r=zc(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function zc(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof Ct||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof Ct))return`"${t}${e.slice(1)}`}function Kc(t,e){return e.emptyStr()?t:t.emptyStr()?e:go`${t}${e}`}U.strConcat=Kc;function Hc(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:Gt(Array.isArray(t)?t.join(","):t)}function Gc(t){return new Me(Gt(t))}U.stringify=Gc;function Gt(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}U.safeStringify=Gt;function Jc(t){return typeof t=="string"&&U.IDENTIFIER.test(t)?new Me(`.${t}`):yo`[${t}]`}U.getProperty=Jc;function Wc(t){return new Me(t.toString())}U.regexpCode=Wc});var ds=S(ce=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});ce.ValueScope=ce.ValueScopeName=ce.Scope=ce.varKinds=ce.UsedValueState=void 0;var fe=Jt(),vo=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`);this.value=e.value}},cs;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(cs=ce.UsedValueState||(ce.UsedValueState={}));ce.varKinds={const:new fe.Name("const"),let:new fe.Name("let"),var:new fe.Name("var")};var us=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof fe.Name?e:this.name(e)}name(e){return new fe.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,s;if(((s=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||s===void 0?void 0:s.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};ce.Scope=us;var ls=class extends fe.Name{constructor(e,r){super(r);this.prefix=e}setValue(e,{property:r,itemIndex:s}){this.value=e,this.scopePath=fe._`.${new fe.Name(r)}[${s}]`}};ce.ValueScopeName=ls;var Bc=fe._`\n`,_o=class extends us{constructor(e){super(e);this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?Bc:fe.nil}}get(){return this._scope}name(e){return new ls(e,this._newName(e))}value(e,r){var s;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let n=this.toName(e),{prefix:o}=n,a=(s=r.key)!==null&&s!==void 0?s:r.ref,c=this._values[o];if(c){let f=c.get(a);if(f)return f}else c=this._values[o]=new Map;c.set(a,n);let d=this._scope[o]||(this._scope[o]=[]),p=d.length;return d[p]=r.ref,n.setValue(r,{property:o,itemIndex:p}),n}getValue(e,r){let s=this._values[e];if(!!s)return s.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,s=>{if(s.scopePath===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return fe._`${e}${s.scopePath}`})}scopeCode(e=this._values,r,s){return this._reduceValues(e,n=>{if(n.value===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return n.value.code},r,s)}_reduceValues(e,r,s={},n){let o=fe.nil;for(let a in e){let c=e[a];if(!c)continue;let d=s[a]=s[a]||new Map;c.forEach(p=>{if(d.has(p))return;d.set(p,cs.Started);let f=r(p);if(f){let y=this.opts.es5?ce.varKinds.var:ce.varKinds.const;o=fe._`${o}${y} ${p} = ${f};${this.opts._n}`}else if(f=n==null?void 0:n(p))o=fe._`${o}${f}${this.opts._n}`;else throw new vo(p);d.set(p,cs.Completed)})}return o}};ce.ValueScope=_o});var k=S(R=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});R.or=R.and=R.not=R.CodeGen=R.operators=R.varKinds=R.ValueScopeName=R.ValueScope=R.Scope=R.Name=R.regexpCode=R.stringify=R.getProperty=R.nil=R.strConcat=R.str=R._=void 0;var j=Jt(),Pe=ds(),Be=Jt();Object.defineProperty(R,"_",{enumerable:!0,get:function(){return Be._}});Object.defineProperty(R,"str",{enumerable:!0,get:function(){return Be.str}});Object.defineProperty(R,"strConcat",{enumerable:!0,get:function(){return Be.strConcat}});Object.defineProperty(R,"nil",{enumerable:!0,get:function(){return Be.nil}});Object.defineProperty(R,"getProperty",{enumerable:!0,get:function(){return Be.getProperty}});Object.defineProperty(R,"stringify",{enumerable:!0,get:function(){return Be.stringify}});Object.defineProperty(R,"regexpCode",{enumerable:!0,get:function(){return Be.regexpCode}});Object.defineProperty(R,"Name",{enumerable:!0,get:function(){return Be.Name}});var Er=ds();Object.defineProperty(R,"Scope",{enumerable:!0,get:function(){return Er.Scope}});Object.defineProperty(R,"ValueScope",{enumerable:!0,get:function(){return Er.ValueScope}});Object.defineProperty(R,"ValueScopeName",{enumerable:!0,get:function(){return Er.ValueScopeName}});Object.defineProperty(R,"varKinds",{enumerable:!0,get:function(){return Er.varKinds}});R.operators={GT:new j._Code(">"),GTE:new j._Code(">="),LT:new j._Code("<"),LTE:new j._Code("<="),EQ:new j._Code("==="),NEQ:new j._Code("!=="),NOT:new j._Code("!"),OR:new j._Code("||"),AND:new j._Code("&&"),ADD:new j._Code("+")};var Ye=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},$o=class extends Ye{constructor(e,r,s){super();this.varKind=e,this.name=r,this.rhs=s}render({es5:e,_n:r}){let s=e?Pe.varKinds.var:this.varKind,n=this.rhs===void 0?"":` = ${this.rhs}`;return`${s} ${this.name}${n};`+r}optimizeNames(e,r){if(!!e[this.name.str])return this.rhs&&(this.rhs=Nt(this.rhs,e,r)),this}get names(){return this.rhs instanceof j._CodeOrName?this.rhs.names:{}}},fs=class extends Ye{constructor(e,r,s){super();this.lhs=e,this.rhs=r,this.sideEffects=s}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof j.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=Nt(this.rhs,e,r),this}get names(){let e=this.lhs instanceof j.Name?{}:{...this.lhs.names};return Nr(e,this.rhs)}},wo=class extends fs{constructor(e,r,s,n){super(e,s,n);this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},Eo=class extends Ye{constructor(e){super();this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},bo=class extends Ye{constructor(e){super();this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},So=class extends Ye{constructor(e){super();this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},Po=class extends Ye{constructor(e){super();this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=Nt(this.code,e,r),this}get names(){return this.code instanceof j._CodeOrName?this.code.names:{}}},br=class extends Ye{constructor(e=[]){super();this.nodes=e}render(e){return this.nodes.reduce((r,s)=>r+s.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let s=e[r].optimizeNodes();Array.isArray(s)?e.splice(r,1,...s):s?e[r]=s:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:s}=this,n=s.length;for(;n--;){let o=s[n];o.optimizeNames(e,r)||(Yc(e,o.names),s.splice(n,1))}return s.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>ct(e,r.names),{})}},Qe=class extends br{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},Co=class extends br{},Wt=class extends Qe{};Wt.kind="else";var Ve=class extends Qe{constructor(e,r){super(r);this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let s=r.optimizeNodes();r=this.else=Array.isArray(s)?new Wt(s):s}if(r)return e===!1?r instanceof Ve?r:r.nodes:this.nodes.length?this:new Ve(Io(e),r instanceof Ve?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var s;if(this.else=(s=this.else)===null||s===void 0?void 0:s.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=Nt(this.condition,e,r),this}get names(){let e=super.names;return Nr(e,this.condition),this.else&&ct(e,this.else.names),e}};Ve.kind="if";var Tt=class extends Qe{};Tt.kind="for";var To=class extends Tt{constructor(e){super();this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(!!super.optimizeNames(e,r))return this.iteration=Nt(this.iteration,e,r),this}get names(){return ct(super.names,this.iteration.names)}},No=class extends Tt{constructor(e,r,s,n){super();this.varKind=e,this.name=r,this.from=s,this.to=n}render(e){let r=e.es5?Pe.varKinds.var:this.varKind,{name:s,from:n,to:o}=this;return`for(${r} ${s}=${n}; ${s}<${o}; ${s}++)`+super.render(e)}get names(){let e=Nr(super.names,this.from);return Nr(e,this.to)}},ps=class extends Tt{constructor(e,r,s,n){super();this.loop=e,this.varKind=r,this.name=s,this.iterable=n}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(!!super.optimizeNames(e,r))return this.iterable=Nt(this.iterable,e,r),this}get names(){return ct(super.names,this.iterable.names)}},Sr=class extends Qe{constructor(e,r,s){super();this.name=e,this.args=r,this.async=s}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};Sr.kind="func";var Pr=class extends br{render(e){return"return "+super.render(e)}};Pr.kind="return";var Oo=class extends Qe{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var s,n;return super.optimizeNames(e,r),(s=this.catch)===null||s===void 0||s.optimizeNames(e,r),(n=this.finally)===null||n===void 0||n.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&ct(e,this.catch.names),this.finally&&ct(e,this.finally.names),e}},Cr=class extends Qe{constructor(e){super();this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};Cr.kind="catch";var Tr=class extends Qe{render(e){return"finally"+super.render(e)}};Tr.kind="finally";var Ro=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=e,this._scope=new Pe.Scope({parent:e}),this._nodes=[new Co]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let s=this._extScope.value(e,r);return(this._values[s.prefix]||(this._values[s.prefix]=new Set)).add(s),s}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,s,n){let o=this._scope.toName(r);return s!==void 0&&n&&(this._constants[o.str]=s),this._leafNode(new $o(e,o,s)),o}const(e,r,s){return this._def(Pe.varKinds.const,e,r,s)}let(e,r,s){return this._def(Pe.varKinds.let,e,r,s)}var(e,r,s){return this._def(Pe.varKinds.var,e,r,s)}assign(e,r,s){return this._leafNode(new fs(e,r,s))}add(e,r){return this._leafNode(new wo(e,R.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==j.nil&&this._leafNode(new Po(e)),this}object(...e){let r=["{"];for(let[s,n]of e)r.length>1&&r.push(","),r.push(s),(s!==n||this.opts.es5)&&(r.push(":"),j.addCodeArg(r,n));return r.push("}"),new j._Code(r)}if(e,r,s){if(this._blockNode(new Ve(e)),r&&s)this.code(r).else().code(s).endIf();else if(r)this.code(r).endIf();else if(s)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new Ve(e))}else(){return this._elseNode(new Wt)}endIf(){return this._endBlockNode(Ve,Wt)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new To(e),r)}forRange(e,r,s,n,o=this.opts.es5?Pe.varKinds.var:Pe.varKinds.let){let a=this._scope.toName(e);return this._for(new No(o,a,r,s),()=>n(a))}forOf(e,r,s,n=Pe.varKinds.const){let o=this._scope.toName(e);if(this.opts.es5){let a=r instanceof j.Name?r:this.var("_arr",r);return this.forRange("_i",0,j._`${a}.length`,c=>{this.var(o,j._`${a}[${c}]`),s(o)})}return this._for(new ps("of",n,o,r),()=>s(o))}forIn(e,r,s,n=this.opts.es5?Pe.varKinds.var:Pe.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,j._`Object.keys(${r})`,s);let o=this._scope.toName(e);return this._for(new ps("in",n,o,r),()=>s(o))}endFor(){return this._endBlockNode(Tt)}label(e){return this._leafNode(new Eo(e))}break(e){return this._leafNode(new bo(e))}return(e){let r=new Pr;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(Pr)}try(e,r,s){if(!r&&!s)throw new Error('CodeGen: "try" without "catch" and "finally"');let n=new Oo;if(this._blockNode(n),this.code(e),r){let o=this.name("e");this._currNode=n.catch=new Cr(o),r(o)}return s&&(this._currNode=n.finally=new Tr,this.code(s)),this._endBlockNode(Cr,Tr)}throw(e){return this._leafNode(new So(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let s=this._nodes.length-r;if(s<0||e!==void 0&&s!==e)throw new Error(`CodeGen: wrong number of nodes: ${s} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=j.nil,s,n){return this._blockNode(new Sr(e,r,s)),n&&this.code(n).endFunc(),this}endFunc(){return this._endBlockNode(Sr)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let s=this._currNode;if(s instanceof e||r&&s instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof Ve))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};R.CodeGen=Ro;function ct(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function Nr(t,e){return e instanceof j._CodeOrName?ct(t,e.names):t}function Nt(t,e,r){if(t instanceof j.Name)return s(t);if(!n(t))return t;return new j._Code(t._items.reduce((o,a)=>(a instanceof j.Name&&(a=s(a)),a instanceof j._Code?o.push(...a._items):o.push(a),o),[]));function s(o){let a=r[o.str];return a===void 0||e[o.str]!==1?o:(delete e[o.str],a)}function n(o){return o instanceof j._Code&&o._items.some(a=>a instanceof j.Name&&e[a.str]===1&&r[a.str]!==void 0)}}function Yc(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function Io(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:j._`!${ms(t)}`}R.not=Io;var Qc=ko(R.operators.AND);function Xc(...t){return t.reduce(Qc)}R.and=Xc;var Zc=ko(R.operators.OR);function eu(...t){return t.reduce(Zc)}R.or=eu;function ko(t){return(e,r)=>e===j.nil?r:r===j.nil?e:j._`${ms(e)} ${t} ${ms(r)}`}function ms(t){return t instanceof j.Name?t:j._`(${t})`}});var V=S(I=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0});I.checkStrictMode=I.getErrorPath=I.Type=I.useFunc=I.setEvaluated=I.evaluatedPropsToName=I.mergeEvaluated=I.eachItem=I.unescapeJsonPointer=I.escapeJsonPointer=I.escapeFragment=I.unescapeFragment=I.schemaRefOrVal=I.schemaHasRulesButRef=I.schemaHasRules=I.checkUnknownRules=I.alwaysValidSchema=I.toHash=void 0;var G=k(),tu=Jt();function ru(t){let e={};for(let r of t)e[r]=!0;return e}I.toHash=ru;function su(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(jo(t,e),!Ao(e,t.self.RULES.all))}I.alwaysValidSchema=su;function jo(t,e=t.schema){let{opts:r,self:s}=t;if(!r.strictSchema||typeof e=="boolean")return;let n=s.RULES.keywords;for(let o in e)n[o]||Uo(t,`unknown keyword: "${o}"`)}I.checkUnknownRules=jo;function Ao(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}I.schemaHasRules=Ao;function nu(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}I.schemaHasRulesButRef=nu;function ou({topSchemaRef:t,schemaPath:e},r,s,n){if(!n){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return G._`${r}`}return G._`${t}${e}${G.getProperty(s)}`}I.schemaRefOrVal=ou;function au(t){return Do(decodeURIComponent(t))}I.unescapeFragment=au;function iu(t){return encodeURIComponent(hs(t))}I.escapeFragment=iu;function hs(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}I.escapeJsonPointer=hs;function Do(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}I.unescapeJsonPointer=Do;function cu(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}I.eachItem=cu;function qo({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:s}){return(n,o,a,c)=>{let d=a===void 0?o:a instanceof G.Name?(o instanceof G.Name?t(n,o,a):e(n,o,a),a):o instanceof G.Name?(e(n,a,o),o):r(o,a);return c===G.Name&&!(d instanceof G.Name)?s(n,d):d}}I.mergeEvaluated={props:qo({mergeNames:(t,e,r)=>t.if(G._`${r} !== true && ${e} !== undefined`,()=>{t.if(G._`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,G._`${r} || {}`).code(G._`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if(G._`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,G._`${r} || {}`),ys(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:Mo}),items:qo({mergeNames:(t,e,r)=>t.if(G._`${r} !== true && ${e} !== undefined`,()=>t.assign(r,G._`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if(G._`${r} !== true`,()=>t.assign(r,e===!0?!0:G._`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function Mo(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",G._`{}`);return e!==void 0&&ys(t,r,e),r}I.evaluatedPropsToName=Mo;function ys(t,e,r){Object.keys(r).forEach(s=>t.assign(G._`${e}${G.getProperty(s)}`,!0))}I.setEvaluated=ys;var Vo={};function uu(t,e){return t.scopeValue("func",{ref:e,code:Vo[e.code]||(Vo[e.code]=new tu._Code(e.code))})}I.useFunc=uu;var Fo;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(Fo=I.Type||(I.Type={}));function lu(t,e,r){if(t instanceof G.Name){let s=e===Fo.Num;return r?s?G._`"[" + ${t} + "]"`:G._`"['" + ${t} + "']"`:s?G._`"/" + ${t}`:G._`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?G.getProperty(t).toString():"/"+hs(t)}I.getErrorPath=lu;function Uo(t,e,r=t.opts.strictSchema){if(!!r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}I.checkStrictMode=Uo});var Je=S(gs=>{"use strict";Object.defineProperty(gs,"__esModule",{value:!0});var ae=k(),du={data:new ae.Name("data"),valCxt:new ae.Name("valCxt"),instancePath:new ae.Name("instancePath"),parentData:new ae.Name("parentData"),parentDataProperty:new ae.Name("parentDataProperty"),rootData:new ae.Name("rootData"),dynamicAnchors:new ae.Name("dynamicAnchors"),vErrors:new ae.Name("vErrors"),errors:new ae.Name("errors"),this:new ae.Name("this"),self:new ae.Name("self"),scope:new ae.Name("scope"),json:new ae.Name("json"),jsonPos:new ae.Name("jsonPos"),jsonLen:new ae.Name("jsonLen"),jsonPart:new ae.Name("jsonPart")};gs.default=du});var Bt=S(ie=>{"use strict";Object.defineProperty(ie,"__esModule",{value:!0});ie.extendErrors=ie.resetErrorsCount=ie.reportExtraError=ie.reportError=ie.keyword$DataError=ie.keywordError=void 0;var D=k(),Or=V(),ue=Je();ie.keywordError={message:({keyword:t})=>D.str`must pass "${t}" keyword validation`};ie.keyword$DataError={message:({keyword:t,schemaType:e})=>e?D.str`"${t}" keyword must be ${e} ($data)`:D.str`"${t}" keyword is invalid ($data)`};function fu(t,e=ie.keywordError,r,s){let{it:n}=t,{gen:o,compositeRule:a,allErrors:c}=n,d=zo(t,e,r);s??(a||c)?xo(o,d):Lo(n,D._`[${d}]`)}ie.reportError=fu;function pu(t,e=ie.keywordError,r){let{it:s}=t,{gen:n,compositeRule:o,allErrors:a}=s,c=zo(t,e,r);xo(n,c),o||a||Lo(s,ue.default.vErrors)}ie.reportExtraError=pu;function mu(t,e){t.assign(ue.default.errors,e),t.if(D._`${ue.default.vErrors} !== null`,()=>t.if(e,()=>t.assign(D._`${ue.default.vErrors}.length`,e),()=>t.assign(ue.default.vErrors,null)))}ie.resetErrorsCount=mu;function hu({gen:t,keyword:e,schemaValue:r,data:s,errsCount:n,it:o}){if(n===void 0)throw new Error("ajv implementation error");let a=t.name("err");t.forRange("i",n,ue.default.errors,c=>{t.const(a,D._`${ue.default.vErrors}[${c}]`),t.if(D._`${a}.instancePath === undefined`,()=>t.assign(D._`${a}.instancePath`,D.strConcat(ue.default.instancePath,o.errorPath))),t.assign(D._`${a}.schemaPath`,D.str`${o.errSchemaPath}/${e}`),o.opts.verbose&&(t.assign(D._`${a}.schema`,r),t.assign(D._`${a}.data`,s))})}ie.extendErrors=hu;function xo(t,e){let r=t.const("err",e);t.if(D._`${ue.default.vErrors} === null`,()=>t.assign(ue.default.vErrors,D._`[${r}]`),D._`${ue.default.vErrors}.push(${r})`),t.code(D._`${ue.default.errors}++`)}function Lo(t,e){let{gen:r,validateName:s,schemaEnv:n}=t;n.$async?r.throw(D._`new ${t.ValidationError}(${e})`):(r.assign(D._`${s}.errors`,e),r.return(!1))}var ut={keyword:new D.Name("keyword"),schemaPath:new D.Name("schemaPath"),params:new D.Name("params"),propertyName:new D.Name("propertyName"),message:new D.Name("message"),schema:new D.Name("schema"),parentSchema:new D.Name("parentSchema")};function zo(t,e,r){let{createErrors:s}=t.it;return s===!1?D._`{}`:yu(t,e,r)}function yu(t,e,r={}){let{gen:s,it:n}=t,o=[gu(n,r),vu(t,r)];return _u(t,e,o),s.object(...o)}function gu({errorPath:t},{instancePath:e}){let r=e?D.str`${t}${Or.getErrorPath(e,Or.Type.Str)}`:t;return[ue.default.instancePath,D.strConcat(ue.default.instancePath,r)]}function vu({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:s}){let n=s?e:D.str`${e}/${t}`;return r&&(n=D.str`${n}${Or.getErrorPath(r,Or.Type.Str)}`),[ut.schemaPath,n]}function _u(t,{params:e,message:r},s){let{keyword:n,data:o,schemaValue:a,it:c}=t,{opts:d,propertyName:p,topSchemaRef:f,schemaPath:y}=c;s.push([ut.keyword,n],[ut.params,typeof e=="function"?e(t):e||D._`{}`]),d.messages&&s.push([ut.message,typeof r=="function"?r(t):r]),d.verbose&&s.push([ut.schema,a],[ut.parentSchema,D._`${f}${y}`],[ue.default.data,o]),p&&s.push([ut.propertyName,p])}});var Ho=S(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});Ot.boolOrEmptySchema=Ot.topBoolOrEmptySchema=void 0;var $u=Bt(),wu=k(),Eu=Je(),bu={message:"boolean schema is false"};function Su(t){let{gen:e,schema:r,validateName:s}=t;r===!1?Ko(t,!1):typeof r=="object"&&r.$async===!0?e.return(Eu.default.data):(e.assign(wu._`${s}.errors`,null),e.return(!0))}Ot.topBoolOrEmptySchema=Su;function Pu(t,e){let{gen:r,schema:s}=t;s===!1?(r.var(e,!1),Ko(t)):r.var(e,!0)}Ot.boolOrEmptySchema=Pu;function Ko(t,e){let{gen:r,data:s}=t,n={gen:r,keyword:"false schema",data:s,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};$u.reportError(n,bu,void 0,e)}});var vs=S(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.getRules=Rt.isJSONType=void 0;var Cu=["string","number","integer","boolean","null","object","array"],Tu=new Set(Cu);function Nu(t){return typeof t=="string"&&Tu.has(t)}Rt.isJSONType=Nu;function Ou(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}Rt.getRules=Ou});var _s=S(Xe=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0});Xe.shouldUseRule=Xe.shouldUseGroup=Xe.schemaHasRulesForType=void 0;function Ru({schema:t,self:e},r){let s=e.RULES.types[r];return s&&s!==!0&&Go(t,s)}Xe.schemaHasRulesForType=Ru;function Go(t,e){return e.rules.some(r=>Jo(t,r))}Xe.shouldUseGroup=Go;function Jo(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(s=>t[s]!==void 0))}Xe.shouldUseRule=Jo});var Qt=S(re=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0});re.reportTypeError=re.checkDataTypes=re.checkDataType=re.coerceAndCheckDataType=re.getJSONTypes=re.getSchemaTypes=re.DataType=void 0;var Iu=vs(),ku=_s(),ju=Bt(),N=k(),Wo=V(),Yt;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(Yt=re.DataType||(re.DataType={}));function Au(t){let e=Bo(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}re.getSchemaTypes=Au;function Bo(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(Iu.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}re.getJSONTypes=Bo;function Du(t,e){let{gen:r,data:s,opts:n}=t,o=qu(e,n.coerceTypes),a=e.length>0&&!(o.length===0&&e.length===1&&ku.schemaHasRulesForType(t,e[0]));if(a){let c=ws(e,s,n.strictNumbers,Yt.Wrong);r.if(c,()=>{o.length?Mu(t,e,o):Es(t)})}return a}re.coerceAndCheckDataType=Du;var Yo=new Set(["string","number","integer","boolean","null"]);function qu(t,e){return e?t.filter(r=>Yo.has(r)||e==="array"&&r==="array"):[]}function Mu(t,e,r){let{gen:s,data:n,opts:o}=t,a=s.let("dataType",N._`typeof ${n}`),c=s.let("coerced",N._`undefined`);o.coerceTypes==="array"&&s.if(N._`${a} == 'object' && Array.isArray(${n}) && ${n}.length == 1`,()=>s.assign(n,N._`${n}[0]`).assign(a,N._`typeof ${n}`).if(ws(e,n,o.strictNumbers),()=>s.assign(c,n))),s.if(N._`${c} !== undefined`);for(let p of r)(Yo.has(p)||p==="array"&&o.coerceTypes==="array")&&d(p);s.else(),Es(t),s.endIf(),s.if(N._`${c} !== undefined`,()=>{s.assign(n,c),Vu(t,c)});function d(p){switch(p){case"string":s.elseIf(N._`${a} == "number" || ${a} == "boolean"`).assign(c,N._`"" + ${n}`).elseIf(N._`${n} === null`).assign(c,N._`""`);return;case"number":s.elseIf(N._`${a} == "boolean" || ${n} === null
              || (${a} == "string" && ${n} && ${n} == +${n})`).assign(c,N._`+${n}`);return;case"integer":s.elseIf(N._`${a} === "boolean" || ${n} === null
              || (${a} === "string" && ${n} && ${n} == +${n} && !(${n} % 1))`).assign(c,N._`+${n}`);return;case"boolean":s.elseIf(N._`${n} === "false" || ${n} === 0 || ${n} === null`).assign(c,!1).elseIf(N._`${n} === "true" || ${n} === 1`).assign(c,!0);return;case"null":s.elseIf(N._`${n} === "" || ${n} === 0 || ${n} === false`),s.assign(c,null);return;case"array":s.elseIf(N._`${a} === "string" || ${a} === "number"
              || ${a} === "boolean" || ${n} === null`).assign(c,N._`[${n}]`)}}}function Vu({gen:t,parentData:e,parentDataProperty:r},s){t.if(N._`${e} !== undefined`,()=>t.assign(N._`${e}[${r}]`,s))}function $s(t,e,r,s=Yt.Correct){let n=s===Yt.Correct?N.operators.EQ:N.operators.NEQ,o;switch(t){case"null":return N._`${e} ${n} null`;case"array":o=N._`Array.isArray(${e})`;break;case"object":o=N._`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":o=a(N._`!(${e} % 1) && !isNaN(${e})`);break;case"number":o=a();break;default:return N._`typeof ${e} ${n} ${t}`}return s===Yt.Correct?o:N.not(o);function a(c=N.nil){return N.and(N._`typeof ${e} == "number"`,c,r?N._`isFinite(${e})`:N.nil)}}re.checkDataType=$s;function ws(t,e,r,s){if(t.length===1)return $s(t[0],e,r,s);let n,o=Wo.toHash(t);if(o.array&&o.object){let a=N._`typeof ${e} != "object"`;n=o.null?a:N._`!${e} || ${a}`,delete o.null,delete o.array,delete o.object}else n=N.nil;o.number&&delete o.integer;for(let a in o)n=N.and(n,$s(a,e,r,s));return n}re.checkDataTypes=ws;var Fu={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?N._`{type: ${t}}`:N._`{type: ${e}}`};function Es(t){let e=Uu(t);ju.reportError(e,Fu)}re.reportTypeError=Es;function Uu(t){let{gen:e,data:r,schema:s}=t,n=Wo.schemaRefOrVal(t,s,"type");return{gen:e,keyword:"type",data:r,schema:s.type,schemaCode:n,schemaValue:n,parentSchema:s,params:{},it:t}}});var Xo=S(Rr=>{"use strict";Object.defineProperty(Rr,"__esModule",{value:!0});Rr.assignDefaults=void 0;var It=k(),xu=V();function Lu(t,e){let{properties:r,items:s}=t.schema;if(e==="object"&&r)for(let n in r)Qo(t,n,r[n].default);else e==="array"&&Array.isArray(s)&&s.forEach((n,o)=>Qo(t,o,n.default))}Rr.assignDefaults=Lu;function Qo(t,e,r){let{gen:s,compositeRule:n,data:o,opts:a}=t;if(r===void 0)return;let c=It._`${o}${It.getProperty(e)}`;if(n){xu.checkStrictMode(t,`default is ignored for: ${c}`);return}let d=It._`${c} === undefined`;a.useDefaults==="empty"&&(d=It._`${d} || ${c} === null || ${c} === ""`),s.if(d,It._`${c} = ${It.stringify(r)}`)}});var Ee=S(L=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});L.validateUnion=L.validateArray=L.usePattern=L.callValidateCode=L.schemaProperties=L.allSchemaProperties=L.noPropertyInData=L.propertyInData=L.isOwnProperty=L.hasPropFunc=L.reportMissingProp=L.checkMissingProp=L.checkReportMissingProp=void 0;var W=k(),bs=V(),Ze=Je();function zu(t,e){let{gen:r,data:s,it:n}=t;r.if(Ps(r,s,e,n.opts.ownProperties),()=>{t.setParams({missingProperty:W._`${e}`},!0),t.error()})}L.checkReportMissingProp=zu;function Ku({gen:t,data:e,it:{opts:r}},s,n){return W.or(...s.map(o=>W.and(Ps(t,e,o,r.ownProperties),W._`${n} = ${o}`)))}L.checkMissingProp=Ku;function Hu(t,e){t.setParams({missingProperty:e},!0),t.error()}L.reportMissingProp=Hu;function Zo(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:W._`Object.prototype.hasOwnProperty`})}L.hasPropFunc=Zo;function Ss(t,e,r){return W._`${Zo(t)}.call(${e}, ${r})`}L.isOwnProperty=Ss;function Gu(t,e,r,s){let n=W._`${e}${W.getProperty(r)} !== undefined`;return s?W._`${n} && ${Ss(t,e,r)}`:n}L.propertyInData=Gu;function Ps(t,e,r,s){let n=W._`${e}${W.getProperty(r)} === undefined`;return s?W.or(n,W.not(Ss(t,e,r))):n}L.noPropertyInData=Ps;function ea(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}L.allSchemaProperties=ea;function Ju(t,e){return ea(e).filter(r=>!bs.alwaysValidSchema(t,e[r]))}L.schemaProperties=Ju;function Wu({schemaCode:t,data:e,it:{gen:r,topSchemaRef:s,schemaPath:n,errorPath:o},it:a},c,d,p){let f=p?W._`${t}, ${e}, ${s}${n}`:e,y=[[Ze.default.instancePath,W.strConcat(Ze.default.instancePath,o)],[Ze.default.parentData,a.parentData],[Ze.default.parentDataProperty,a.parentDataProperty],[Ze.default.rootData,Ze.default.rootData]];a.opts.dynamicRef&&y.push([Ze.default.dynamicAnchors,Ze.default.dynamicAnchors]);let $=W._`${f}, ${r.object(...y)}`;return d!==W.nil?W._`${c}.call(${d}, ${$})`:W._`${c}(${$})`}L.callValidateCode=Wu;function Bu({gen:t,it:{opts:e}},r){let s=e.unicodeRegExp?"u":"";return t.scopeValue("pattern",{key:r,ref:new RegExp(r,s),code:W._`new RegExp(${r}, ${s})`})}L.usePattern=Bu;function Yu(t){let{gen:e,data:r,keyword:s,it:n}=t,o=e.name("valid");if(n.allErrors){let c=e.let("valid",!0);return a(()=>e.assign(c,!1)),c}return e.var(o,!0),a(()=>e.break()),o;function a(c){let d=e.const("len",W._`${r}.length`);e.forRange("i",0,d,p=>{t.subschema({keyword:s,dataProp:p,dataPropType:bs.Type.Num},o),e.if(W.not(o),c)})}}L.validateArray=Yu;function Qu(t){let{gen:e,schema:r,keyword:s,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(d=>bs.alwaysValidSchema(n,d))&&!n.opts.unevaluated)return;let a=e.let("valid",!1),c=e.name("_valid");e.block(()=>r.forEach((d,p)=>{let f=t.subschema({keyword:s,schemaProp:p,compositeRule:!0},c);e.assign(a,W._`${a} || ${c}`),t.mergeValidEvaluated(f,c)||e.if(W.not(a))})),t.result(a,()=>t.reset(),()=>t.error(!0))}L.validateUnion=Qu});var sa=S(Fe=>{"use strict";Object.defineProperty(Fe,"__esModule",{value:!0});Fe.validateKeywordUsage=Fe.validSchemaType=Fe.funcKeywordCode=Fe.macroKeywordCode=void 0;var le=k(),lt=Je(),Xu=Ee(),Zu=Bt();function el(t,e){let{gen:r,keyword:s,schema:n,parentSchema:o,it:a}=t,c=e.macro.call(a.self,n,o,a),d=ra(r,s,c);a.opts.validateSchema!==!1&&a.self.validateSchema(c,!0);let p=r.name("valid");t.subschema({schema:c,schemaPath:le.nil,errSchemaPath:`${a.errSchemaPath}/${s}`,topSchemaRef:d,compositeRule:!0},p),t.pass(p,()=>t.error(!0))}Fe.macroKeywordCode=el;function tl(t,e){var r;let{gen:s,keyword:n,schema:o,parentSchema:a,$data:c,it:d}=t;sl(d,e);let p=!c&&e.compile?e.compile.call(d.self,o,a,d):e.validate,f=ra(s,n,p),y=s.let("valid");t.block$data(y,$),t.ok((r=e.valid)!==null&&r!==void 0?r:y);function $(){if(e.errors===!1)w(),e.modifying&&ta(t),E(()=>t.error());else{let _=e.async?v():g();e.modifying&&ta(t),E(()=>rl(t,_))}}function v(){let _=s.let("ruleErrs",null);return s.try(()=>w(le._`await `),O=>s.assign(y,!1).if(le._`${O} instanceof ${d.ValidationError}`,()=>s.assign(_,le._`${O}.errors`),()=>s.throw(O))),_}function g(){let _=le._`${f}.errors`;return s.assign(_,null),w(le.nil),_}function w(_=e.async?le._`await `:le.nil){let O=d.opts.passContext?lt.default.this:lt.default.self,te=!("compile"in e&&!c||e.schema===!1);s.assign(y,le._`${_}${Xu.callValidateCode(t,f,O,te)}`,e.modifying)}function E(_){var O;s.if(le.not((O=e.valid)!==null&&O!==void 0?O:y),_)}}Fe.funcKeywordCode=tl;function ta(t){let{gen:e,data:r,it:s}=t;e.if(s.parentData,()=>e.assign(r,le._`${s.parentData}[${s.parentDataProperty}]`))}function rl(t,e){let{gen:r}=t;r.if(le._`Array.isArray(${e})`,()=>{r.assign(lt.default.vErrors,le._`${lt.default.vErrors} === null ? ${e} : ${lt.default.vErrors}.concat(${e})`).assign(lt.default.errors,le._`${lt.default.vErrors}.length`),Zu.extendErrors(t)},()=>t.error())}function sl({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function ra(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:le.stringify(r)})}function nl(t,e,r=!1){return!e.length||e.some(s=>s==="array"?Array.isArray(t):s==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==s||r&&typeof t=="undefined")}Fe.validSchemaType=nl;function ol({schema:t,opts:e,self:r,errSchemaPath:s},n,o){if(Array.isArray(n.keyword)?!n.keyword.includes(o):n.keyword!==o)throw new Error("ajv implementation error");let a=n.dependencies;if(a==null?void 0:a.some(c=>!Object.prototype.hasOwnProperty.call(t,c)))throw new Error(`parent schema must have dependencies of ${o}: ${a.join(",")}`);if(n.validateSchema&&!n.validateSchema(t[o])){let d=`keyword "${o}" value is invalid at path "${s}": `+r.errorsText(n.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(d);else throw new Error(d)}}Fe.validateKeywordUsage=ol});var oa=S(et=>{"use strict";Object.defineProperty(et,"__esModule",{value:!0});et.extendSubschemaMode=et.extendSubschemaData=et.getSubschema=void 0;var Ue=k(),na=V();function al(t,{keyword:e,schemaProp:r,schema:s,schemaPath:n,errSchemaPath:o,topSchemaRef:a}){if(e!==void 0&&s!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let c=t.schema[e];return r===void 0?{schema:c,schemaPath:Ue._`${t.schemaPath}${Ue.getProperty(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:c[r],schemaPath:Ue._`${t.schemaPath}${Ue.getProperty(e)}${Ue.getProperty(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${na.escapeFragment(r)}`}}if(s!==void 0){if(n===void 0||o===void 0||a===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:s,schemaPath:n,topSchemaRef:a,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')}et.getSubschema=al;function il(t,e,{dataProp:r,dataPropType:s,data:n,dataTypes:o,propertyName:a}){if(n!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:c}=e;if(r!==void 0){let{errorPath:p,dataPathArr:f,opts:y}=e,$=c.let("data",Ue._`${e.data}${Ue.getProperty(r)}`,!0);d($),t.errorPath=Ue.str`${p}${na.getErrorPath(r,s,y.jsPropertySyntax)}`,t.parentDataProperty=Ue._`${r}`,t.dataPathArr=[...f,t.parentDataProperty]}if(n!==void 0){let p=n instanceof Ue.Name?n:c.let("data",n,!0);d(p),a!==void 0&&(t.propertyName=a)}o&&(t.dataTypes=o);function d(p){t.data=p,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,p]}}et.extendSubschemaData=il;function cl(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:s,createErrors:n,allErrors:o}){s!==void 0&&(t.compositeRule=s),n!==void 0&&(t.createErrors=n),o!==void 0&&(t.allErrors=o),t.jtdDiscriminator=e,t.jtdMetadata=r}et.extendSubschemaMode=cl});var Cs=S((ym,aa)=>{"use strict";aa.exports=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var s,n,o;if(Array.isArray(e)){if(s=e.length,s!=r.length)return!1;for(n=s;n--!=0;)if(!t(e[n],r[n]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(o=Object.keys(e),s=o.length,s!==Object.keys(r).length)return!1;for(n=s;n--!=0;)if(!Object.prototype.hasOwnProperty.call(r,o[n]))return!1;for(n=s;n--!=0;){var a=o[n];if(!t(e[a],r[a]))return!1}return!0}return e!==e&&r!==r}});var ca=S((gm,ia)=>{"use strict";var tt=ia.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var s=typeof r=="function"?r:r.pre||function(){},n=r.post||function(){};Ir(e,s,n,t,"",t)};tt.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};tt.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};tt.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};tt.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Ir(t,e,r,s,n,o,a,c,d,p){if(s&&typeof s=="object"&&!Array.isArray(s)){e(s,n,o,a,c,d,p);for(var f in s){var y=s[f];if(Array.isArray(y)){if(f in tt.arrayKeywords)for(var $=0;$<y.length;$++)Ir(t,e,r,y[$],n+"/"+f+"/"+$,o,n,f,s,$)}else if(f in tt.propsKeywords){if(y&&typeof y=="object")for(var v in y)Ir(t,e,r,y[v],n+"/"+f+"/"+ul(v),o,n,f,s,v)}else(f in tt.keywords||t.allKeys&&!(f in tt.skipKeywords))&&Ir(t,e,r,y,n+"/"+f,o,n,f,s)}r(s,n,o,a,c,d,p)}}function ul(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var Ts=S((kr,ua)=>{(function(t,e){typeof kr=="object"&&typeof ua!="undefined"?e(kr):typeof define=="function"&&define.amd?define(["exports"],e):e(t.URI=t.URI||{})})(kr,function(t){"use strict";function e(){for(var u=arguments.length,i=Array(u),l=0;l<u;l++)i[l]=arguments[l];if(i.length>1){i[0]=i[0].slice(0,-1);for(var m=i.length-1,h=1;h<m;++h)i[h]=i[h].slice(1,-1);return i[m]=i[m].slice(1),i.join("")}else return i[0]}function r(u){return"(?:"+u+")"}function s(u){return u===void 0?"undefined":u===null?"null":Object.prototype.toString.call(u).split(" ").pop().split("]").shift().toLowerCase()}function n(u){return u.toUpperCase()}function o(u){return u!=null?u instanceof Array?u:typeof u.length!="number"||u.split||u.setInterval||u.call?[u]:Array.prototype.slice.call(u):[]}function a(u,i){var l=u;if(i)for(var m in i)l[m]=i[m];return l}function c(u){var i="[A-Za-z]",l="[\\x0D]",m="[0-9]",h="[\\x22]",b=e(m,"[A-Fa-f]"),T="[\\x0A]",q="[\\x20]",F=r(r("%[EFef]"+b+"%"+b+b+"%"+b+b)+"|"+r("%[89A-Fa-f]"+b+"%"+b+b)+"|"+r("%"+b+b)),X="[\\:\\/\\?\\#\\[\\]\\@]",A="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",B=e(X,A),Z=u?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",J=u?"[\\uE000-\\uF8FF]":"[]",M=e(i,m,"[\\-\\.\\_\\~]",Z),Y=r(i+e(i,m,"[\\+\\-\\.]")+"*"),x=r(r(F+"|"+e(M,A,"[\\:]"))+"*"),ot=r(r("25[0-5]")+"|"+r("2[0-4]"+m)+"|"+r("1"+m+m)+"|"+r("[1-9]"+m)+"|"+m),he=r(r("25[0-5]")+"|"+r("2[0-4]"+m)+"|"+r("1"+m+m)+"|"+r("0?[1-9]"+m)+"|0?0?"+m),$e=r(he+"\\."+he+"\\."+he+"\\."+he),H=r(b+"{1,4}"),ye=r(r(H+"\\:"+H)+"|"+$e),we=r(r(H+"\\:")+"{6}"+ye),De=r("\\:\\:"+r(H+"\\:")+"{5}"+ye),at=r(r(H)+"?\\:\\:"+r(H+"\\:")+"{4}"+ye),Ke=r(r(r(H+"\\:")+"{0,1}"+H)+"?\\:\\:"+r(H+"\\:")+"{3}"+ye),xt=r(r(r(H+"\\:")+"{0,2}"+H)+"?\\:\\:"+r(H+"\\:")+"{2}"+ye),hr=r(r(r(H+"\\:")+"{0,3}"+H)+"?\\:\\:"+H+"\\:"+ye),yr=r(r(r(H+"\\:")+"{0,4}"+H)+"?\\:\\:"+ye),$t=r(r(r(H+"\\:")+"{0,5}"+H)+"?\\:\\:"+H),wt=r(r(r(H+"\\:")+"{0,6}"+H)+"?\\:\\:"),He=r([we,De,at,Ke,xt,hr,yr,$t,wt].join("|")),Et=r(r(M+"|"+F)+"+"),ns=r(He+"\\%25"+Et),it=r(He+r("\\%25|\\%(?!"+b+"{2})")+Et),Ec=r("[vV]"+b+"+\\."+e(M,A,"[\\:]")+"+"),bc=r("\\["+r(it+"|"+He+"|"+Ec)+"\\]"),Zn=r(r(F+"|"+e(M,A))+"*"),Lt=r(bc+"|"+$e+"(?!"+Zn+")|"+Zn),zt=r(m+"*"),eo=r(r(x+"@")+"?"+Lt+r("\\:"+zt)+"?"),Kt=r(F+"|"+e(M,A,"[\\:\\@]")),Sc=r(Kt+"*"),to=r(Kt+"+"),Pc=r(r(F+"|"+e(M,A,"[\\@]"))+"+"),Ge=r(r("\\/"+Sc)+"*"),bt=r("\\/"+r(to+Ge)+"?"),os=r(Pc+Ge),gr=r(to+Ge),St="(?!"+Kt+")",Dp=r(Ge+"|"+bt+"|"+os+"|"+gr+"|"+St),Pt=r(r(Kt+"|"+e("[\\/\\?]",J))+"*"),Ht=r(r(Kt+"|[\\/\\?]")+"*"),ro=r(r("\\/\\/"+eo+Ge)+"|"+bt+"|"+gr+"|"+St),Cc=r(Y+"\\:"+ro+r("\\?"+Pt)+"?"+r("\\#"+Ht)+"?"),Tc=r(r("\\/\\/"+eo+Ge)+"|"+bt+"|"+os+"|"+St),Nc=r(Tc+r("\\?"+Pt)+"?"+r("\\#"+Ht)+"?"),qp=r(Cc+"|"+Nc),Mp=r(Y+"\\:"+ro+r("\\?"+Pt)+"?"),Vp="^("+Y+")\\:"+r(r("\\/\\/("+r("("+x+")@")+"?("+Lt+")"+r("\\:("+zt+")")+"?)")+"?("+Ge+"|"+bt+"|"+gr+"|"+St+")")+r("\\?("+Pt+")")+"?"+r("\\#("+Ht+")")+"?$",Fp="^(){0}"+r(r("\\/\\/("+r("("+x+")@")+"?("+Lt+")"+r("\\:("+zt+")")+"?)")+"?("+Ge+"|"+bt+"|"+os+"|"+St+")")+r("\\?("+Pt+")")+"?"+r("\\#("+Ht+")")+"?$",Up="^("+Y+")\\:"+r(r("\\/\\/("+r("("+x+")@")+"?("+Lt+")"+r("\\:("+zt+")")+"?)")+"?("+Ge+"|"+bt+"|"+gr+"|"+St+")")+r("\\?("+Pt+")")+"?$",xp="^"+r("\\#("+Ht+")")+"?$",Lp="^"+r("("+x+")@")+"?("+Lt+")"+r("\\:("+zt+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",i,m,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",M,A),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",M,A),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",M,A),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",M,A),"g"),NOT_QUERY:new RegExp(e("[^\\%]",M,A,"[\\:\\@\\/\\?]",J),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",M,A,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",M,A),"g"),UNRESERVED:new RegExp(M,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",M,B),"g"),PCT_ENCODED:new RegExp(F,"g"),IPV4ADDRESS:new RegExp("^("+$e+")$"),IPV6ADDRESS:new RegExp("^\\[?("+He+")"+r(r("\\%25|\\%(?!"+b+"{2})")+"("+Et+")")+"?\\]?$")}}var d=c(!1),p=c(!0),f=function(){function u(i,l){var m=[],h=!0,b=!1,T=void 0;try{for(var q=i[Symbol.iterator](),F;!(h=(F=q.next()).done)&&(m.push(F.value),!(l&&m.length===l));h=!0);}catch(X){b=!0,T=X}finally{try{!h&&q.return&&q.return()}finally{if(b)throw T}}return m}return function(i,l){if(Array.isArray(i))return i;if(Symbol.iterator in Object(i))return u(i,l);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),y=function(u){if(Array.isArray(u)){for(var i=0,l=Array(u.length);i<u.length;i++)l[i]=u[i];return l}else return Array.from(u)},$=2147483647,v=36,g=1,w=26,E=38,_=700,O=72,te=128,z="-",K=/^xn--/,ve=/[^\0-\x7E]/,Re=/[\x2E\u3002\uFF0E\uFF61]/g,Vt={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ht=v-g,Ie=Math.floor,Zr=String.fromCharCode;function nt(u){throw new RangeError(Vt[u])}function Qi(u,i){for(var l=[],m=u.length;m--;)l[m]=i(u[m]);return l}function An(u,i){var l=u.split("@"),m="";l.length>1&&(m=l[0]+"@",u=l[1]),u=u.replace(Re,".");var h=u.split("."),b=Qi(h,i).join(".");return m+b}function Dn(u){for(var i=[],l=0,m=u.length;l<m;){var h=u.charCodeAt(l++);if(h>=55296&&h<=56319&&l<m){var b=u.charCodeAt(l++);(b&64512)==56320?i.push(((h&1023)<<10)+(b&1023)+65536):(i.push(h),l--)}else i.push(h)}return i}var Xi=function(i){return String.fromCodePoint.apply(String,y(i))},Zi=function(i){return i-48<10?i-22:i-65<26?i-65:i-97<26?i-97:v},qn=function(i,l){return i+22+75*(i<26)-((l!=0)<<5)},Mn=function(i,l,m){var h=0;for(i=m?Ie(i/_):i>>1,i+=Ie(i/l);i>ht*w>>1;h+=v)i=Ie(i/ht);return Ie(h+(ht+1)*i/(i+E))},Vn=function(i){var l=[],m=i.length,h=0,b=te,T=O,q=i.lastIndexOf(z);q<0&&(q=0);for(var F=0;F<q;++F)i.charCodeAt(F)>=128&&nt("not-basic"),l.push(i.charCodeAt(F));for(var X=q>0?q+1:0;X<m;){for(var A=h,B=1,Z=v;;Z+=v){X>=m&&nt("invalid-input");var J=Zi(i.charCodeAt(X++));(J>=v||J>Ie(($-h)/B))&&nt("overflow"),h+=J*B;var M=Z<=T?g:Z>=T+w?w:Z-T;if(J<M)break;var Y=v-M;B>Ie($/Y)&&nt("overflow"),B*=Y}var x=l.length+1;T=Mn(h-A,x,A==0),Ie(h/x)>$-b&&nt("overflow"),b+=Ie(h/x),h%=x,l.splice(h++,0,b)}return String.fromCodePoint.apply(String,l)},Fn=function(i){var l=[];i=Dn(i);var m=i.length,h=te,b=0,T=O,q=!0,F=!1,X=void 0;try{for(var A=i[Symbol.iterator](),B;!(q=(B=A.next()).done);q=!0){var Z=B.value;Z<128&&l.push(Zr(Z))}}catch(it){F=!0,X=it}finally{try{!q&&A.return&&A.return()}finally{if(F)throw X}}var J=l.length,M=J;for(J&&l.push(z);M<m;){var Y=$,x=!0,ot=!1,he=void 0;try{for(var $e=i[Symbol.iterator](),H;!(x=(H=$e.next()).done);x=!0){var ye=H.value;ye>=h&&ye<Y&&(Y=ye)}}catch(it){ot=!0,he=it}finally{try{!x&&$e.return&&$e.return()}finally{if(ot)throw he}}var we=M+1;Y-h>Ie(($-b)/we)&&nt("overflow"),b+=(Y-h)*we,h=Y;var De=!0,at=!1,Ke=void 0;try{for(var xt=i[Symbol.iterator](),hr;!(De=(hr=xt.next()).done);De=!0){var yr=hr.value;if(yr<h&&++b>$&&nt("overflow"),yr==h){for(var $t=b,wt=v;;wt+=v){var He=wt<=T?g:wt>=T+w?w:wt-T;if($t<He)break;var Et=$t-He,ns=v-He;l.push(Zr(qn(He+Et%ns,0))),$t=Ie(Et/ns)}l.push(Zr(qn($t,0))),T=Mn(b,we,M==J),b=0,++M}}}catch(it){at=!0,Ke=it}finally{try{!De&&xt.return&&xt.return()}finally{if(at)throw Ke}}++b,++h}return l.join("")},ec=function(i){return An(i,function(l){return K.test(l)?Vn(l.slice(4).toLowerCase()):l})},tc=function(i){return An(i,function(l){return ve.test(l)?"xn--"+Fn(l):l})},yt={version:"2.1.0",ucs2:{decode:Dn,encode:Xi},decode:Vn,encode:Fn,toASCII:tc,toUnicode:ec},_e={};function ke(u){var i=u.charCodeAt(0),l=void 0;return i<16?l="%0"+i.toString(16).toUpperCase():i<128?l="%"+i.toString(16).toUpperCase():i<2048?l="%"+(i>>6|192).toString(16).toUpperCase()+"%"+(i&63|128).toString(16).toUpperCase():l="%"+(i>>12|224).toString(16).toUpperCase()+"%"+(i>>6&63|128).toString(16).toUpperCase()+"%"+(i&63|128).toString(16).toUpperCase(),l}function gt(u){for(var i="",l=0,m=u.length;l<m;){var h=parseInt(u.substr(l+1,2),16);if(h<128)i+=String.fromCharCode(h),l+=3;else if(h>=194&&h<224){if(m-l>=6){var b=parseInt(u.substr(l+4,2),16);i+=String.fromCharCode((h&31)<<6|b&63)}else i+=u.substr(l,6);l+=6}else if(h>=224){if(m-l>=9){var T=parseInt(u.substr(l+4,2),16),q=parseInt(u.substr(l+7,2),16);i+=String.fromCharCode((h&15)<<12|(T&63)<<6|q&63)}else i+=u.substr(l,9);l+=9}else i+=u.substr(l,3),l+=3}return i}function es(u,i){function l(m){var h=gt(m);return h.match(i.UNRESERVED)?h:m}return u.scheme&&(u.scheme=String(u.scheme).replace(i.PCT_ENCODED,l).toLowerCase().replace(i.NOT_SCHEME,"")),u.userinfo!==void 0&&(u.userinfo=String(u.userinfo).replace(i.PCT_ENCODED,l).replace(i.NOT_USERINFO,ke).replace(i.PCT_ENCODED,n)),u.host!==void 0&&(u.host=String(u.host).replace(i.PCT_ENCODED,l).toLowerCase().replace(i.NOT_HOST,ke).replace(i.PCT_ENCODED,n)),u.path!==void 0&&(u.path=String(u.path).replace(i.PCT_ENCODED,l).replace(u.scheme?i.NOT_PATH:i.NOT_PATH_NOSCHEME,ke).replace(i.PCT_ENCODED,n)),u.query!==void 0&&(u.query=String(u.query).replace(i.PCT_ENCODED,l).replace(i.NOT_QUERY,ke).replace(i.PCT_ENCODED,n)),u.fragment!==void 0&&(u.fragment=String(u.fragment).replace(i.PCT_ENCODED,l).replace(i.NOT_FRAGMENT,ke).replace(i.PCT_ENCODED,n)),u}function ts(u){return u.replace(/^0*(.*)/,"$1")||"0"}function rs(u,i){var l=u.match(i.IPV4ADDRESS)||[],m=f(l,2),h=m[1];return h?h.split(".").map(ts).join("."):u}function Un(u,i){var l=u.match(i.IPV6ADDRESS)||[],m=f(l,3),h=m[1],b=m[2];if(h){for(var T=h.toLowerCase().split("::").reverse(),q=f(T,2),F=q[0],X=q[1],A=X?X.split(":").map(ts):[],B=F.split(":").map(ts),Z=i.IPV4ADDRESS.test(B[B.length-1]),J=Z?7:8,M=B.length-J,Y=Array(J),x=0;x<J;++x)Y[x]=A[x]||B[M+x]||"";Z&&(Y[J-1]=rs(Y[J-1],i));var ot=Y.reduce(function(we,De,at){if(!De||De==="0"){var Ke=we[we.length-1];Ke&&Ke.index+Ke.length===at?Ke.length++:we.push({index:at,length:1})}return we},[]),he=ot.sort(function(we,De){return De.length-we.length})[0],$e=void 0;if(he&&he.length>1){var H=Y.slice(0,he.index),ye=Y.slice(he.index+he.length);$e=H.join(":")+"::"+ye.join(":")}else $e=Y.join(":");return b&&($e+="%"+b),$e}else return u}var rc=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,sc="".match(/(){0}/)[1]===void 0;function Le(u){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l={},m=i.iri!==!1?p:d;i.reference==="suffix"&&(u=(i.scheme?i.scheme+":":"")+"//"+u);var h=u.match(rc);if(h){sc?(l.scheme=h[1],l.userinfo=h[3],l.host=h[4],l.port=parseInt(h[5],10),l.path=h[6]||"",l.query=h[7],l.fragment=h[8],isNaN(l.port)&&(l.port=h[5])):(l.scheme=h[1]||void 0,l.userinfo=u.indexOf("@")!==-1?h[3]:void 0,l.host=u.indexOf("//")!==-1?h[4]:void 0,l.port=parseInt(h[5],10),l.path=h[6]||"",l.query=u.indexOf("?")!==-1?h[7]:void 0,l.fragment=u.indexOf("#")!==-1?h[8]:void 0,isNaN(l.port)&&(l.port=u.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?h[4]:void 0)),l.host&&(l.host=Un(rs(l.host,m),m)),l.scheme===void 0&&l.userinfo===void 0&&l.host===void 0&&l.port===void 0&&!l.path&&l.query===void 0?l.reference="same-document":l.scheme===void 0?l.reference="relative":l.fragment===void 0?l.reference="absolute":l.reference="uri",i.reference&&i.reference!=="suffix"&&i.reference!==l.reference&&(l.error=l.error||"URI is not a "+i.reference+" reference.");var b=_e[(i.scheme||l.scheme||"").toLowerCase()];if(!i.unicodeSupport&&(!b||!b.unicodeSupport)){if(l.host&&(i.domainHost||b&&b.domainHost))try{l.host=yt.toASCII(l.host.replace(m.PCT_ENCODED,gt).toLowerCase())}catch(T){l.error=l.error||"Host's domain name can not be converted to ASCII via punycode: "+T}es(l,d)}else es(l,m);b&&b.parse&&b.parse(l,i)}else l.error=l.error||"URI can not be parsed.";return l}function nc(u,i){var l=i.iri!==!1?p:d,m=[];return u.userinfo!==void 0&&(m.push(u.userinfo),m.push("@")),u.host!==void 0&&m.push(Un(rs(String(u.host),l),l).replace(l.IPV6ADDRESS,function(h,b,T){return"["+b+(T?"%25"+T:"")+"]"})),(typeof u.port=="number"||typeof u.port=="string")&&(m.push(":"),m.push(String(u.port))),m.length?m.join(""):void 0}var xn=/^\.\.?\//,Ln=/^\/\.(\/|$)/,zn=/^\/\.\.(\/|$)/,oc=/^\/?(?:.|\n)*?(?=\/|$)/;function vt(u){for(var i=[];u.length;)if(u.match(xn))u=u.replace(xn,"");else if(u.match(Ln))u=u.replace(Ln,"/");else if(u.match(zn))u=u.replace(zn,"/"),i.pop();else if(u==="."||u==="..")u="";else{var l=u.match(oc);if(l){var m=l[0];u=u.slice(m.length),i.push(m)}else throw new Error("Unexpected dot segment condition")}return i.join("")}function je(u){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=i.iri?p:d,m=[],h=_e[(i.scheme||u.scheme||"").toLowerCase()];if(h&&h.serialize&&h.serialize(u,i),u.host&&!l.IPV6ADDRESS.test(u.host)){if(i.domainHost||h&&h.domainHost)try{u.host=i.iri?yt.toUnicode(u.host):yt.toASCII(u.host.replace(l.PCT_ENCODED,gt).toLowerCase())}catch(q){u.error=u.error||"Host's domain name can not be converted to "+(i.iri?"Unicode":"ASCII")+" via punycode: "+q}}es(u,l),i.reference!=="suffix"&&u.scheme&&(m.push(u.scheme),m.push(":"));var b=nc(u,i);if(b!==void 0&&(i.reference!=="suffix"&&m.push("//"),m.push(b),u.path&&u.path.charAt(0)!=="/"&&m.push("/")),u.path!==void 0){var T=u.path;!i.absolutePath&&(!h||!h.absolutePath)&&(T=vt(T)),b===void 0&&(T=T.replace(/^\/\//,"/%2F")),m.push(T)}return u.query!==void 0&&(m.push("?"),m.push(u.query)),u.fragment!==void 0&&(m.push("#"),m.push(u.fragment)),m.join("")}function Kn(u,i){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},m=arguments[3],h={};return m||(u=Le(je(u,l),l),i=Le(je(i,l),l)),l=l||{},!l.tolerant&&i.scheme?(h.scheme=i.scheme,h.userinfo=i.userinfo,h.host=i.host,h.port=i.port,h.path=vt(i.path||""),h.query=i.query):(i.userinfo!==void 0||i.host!==void 0||i.port!==void 0?(h.userinfo=i.userinfo,h.host=i.host,h.port=i.port,h.path=vt(i.path||""),h.query=i.query):(i.path?(i.path.charAt(0)==="/"?h.path=vt(i.path):((u.userinfo!==void 0||u.host!==void 0||u.port!==void 0)&&!u.path?h.path="/"+i.path:u.path?h.path=u.path.slice(0,u.path.lastIndexOf("/")+1)+i.path:h.path=i.path,h.path=vt(h.path)),h.query=i.query):(h.path=u.path,i.query!==void 0?h.query=i.query:h.query=u.query),h.userinfo=u.userinfo,h.host=u.host,h.port=u.port),h.scheme=u.scheme),h.fragment=i.fragment,h}function ac(u,i,l){var m=a({scheme:"null"},l);return je(Kn(Le(u,m),Le(i,m),m,!0),m)}function ic(u,i){return typeof u=="string"?u=je(Le(u,i),i):s(u)==="object"&&(u=Le(je(u,i),i)),u}function cc(u,i,l){return typeof u=="string"?u=je(Le(u,l),l):s(u)==="object"&&(u=je(u,l)),typeof i=="string"?i=je(Le(i,l),l):s(i)==="object"&&(i=je(i,l)),u===i}function uc(u,i){return u&&u.toString().replace(!i||!i.iri?d.ESCAPE:p.ESCAPE,ke)}function ze(u,i){return u&&u.toString().replace(!i||!i.iri?d.PCT_ENCODED:p.PCT_ENCODED,gt)}var Ft={scheme:"http",domainHost:!0,parse:function(i,l){return i.host||(i.error=i.error||"HTTP URIs must have a host."),i},serialize:function(i,l){var m=String(i.scheme).toLowerCase()==="https";return(i.port===(m?443:80)||i.port==="")&&(i.port=void 0),i.path||(i.path="/"),i}},Hn={scheme:"https",domainHost:Ft.domainHost,parse:Ft.parse,serialize:Ft.serialize};function Gn(u){return typeof u.secure=="boolean"?u.secure:String(u.scheme).toLowerCase()==="wss"}var Ut={scheme:"ws",domainHost:!0,parse:function(i,l){var m=i;return m.secure=Gn(m),m.resourceName=(m.path||"/")+(m.query?"?"+m.query:""),m.path=void 0,m.query=void 0,m},serialize:function(i,l){if((i.port===(Gn(i)?443:80)||i.port==="")&&(i.port=void 0),typeof i.secure=="boolean"&&(i.scheme=i.secure?"wss":"ws",i.secure=void 0),i.resourceName){var m=i.resourceName.split("?"),h=f(m,2),b=h[0],T=h[1];i.path=b&&b!=="/"?b:void 0,i.query=T,i.resourceName=void 0}return i.fragment=void 0,i}},Jn={scheme:"wss",domainHost:Ut.domainHost,parse:Ut.parse,serialize:Ut.serialize},lc={},dc=!0,Wn="[A-Za-z0-9\\-\\.\\_\\~"+(dc?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",Ae="[0-9A-Fa-f]",fc=r(r("%[EFef]"+Ae+"%"+Ae+Ae+"%"+Ae+Ae)+"|"+r("%[89A-Fa-f]"+Ae+"%"+Ae+Ae)+"|"+r("%"+Ae+Ae)),pc="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",mc="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",hc=e(mc,'[\\"\\\\]'),yc="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",gc=new RegExp(Wn,"g"),_t=new RegExp(fc,"g"),vc=new RegExp(e("[^]",pc,"[\\.]",'[\\"]',hc),"g"),Bn=new RegExp(e("[^]",Wn,yc),"g"),_c=Bn;function ss(u){var i=gt(u);return i.match(gc)?i:u}var Yn={scheme:"mailto",parse:function(i,l){var m=i,h=m.to=m.path?m.path.split(","):[];if(m.path=void 0,m.query){for(var b=!1,T={},q=m.query.split("&"),F=0,X=q.length;F<X;++F){var A=q[F].split("=");switch(A[0]){case"to":for(var B=A[1].split(","),Z=0,J=B.length;Z<J;++Z)h.push(B[Z]);break;case"subject":m.subject=ze(A[1],l);break;case"body":m.body=ze(A[1],l);break;default:b=!0,T[ze(A[0],l)]=ze(A[1],l);break}}b&&(m.headers=T)}m.query=void 0;for(var M=0,Y=h.length;M<Y;++M){var x=h[M].split("@");if(x[0]=ze(x[0]),l.unicodeSupport)x[1]=ze(x[1],l).toLowerCase();else try{x[1]=yt.toASCII(ze(x[1],l).toLowerCase())}catch(ot){m.error=m.error||"Email address's domain name can not be converted to ASCII via punycode: "+ot}h[M]=x.join("@")}return m},serialize:function(i,l){var m=i,h=o(i.to);if(h){for(var b=0,T=h.length;b<T;++b){var q=String(h[b]),F=q.lastIndexOf("@"),X=q.slice(0,F).replace(_t,ss).replace(_t,n).replace(vc,ke),A=q.slice(F+1);try{A=l.iri?yt.toUnicode(A):yt.toASCII(ze(A,l).toLowerCase())}catch(M){m.error=m.error||"Email address's domain name can not be converted to "+(l.iri?"Unicode":"ASCII")+" via punycode: "+M}h[b]=X+"@"+A}m.path=h.join(",")}var B=i.headers=i.headers||{};i.subject&&(B.subject=i.subject),i.body&&(B.body=i.body);var Z=[];for(var J in B)B[J]!==lc[J]&&Z.push(J.replace(_t,ss).replace(_t,n).replace(Bn,ke)+"="+B[J].replace(_t,ss).replace(_t,n).replace(_c,ke));return Z.length&&(m.query=Z.join("&")),m}},$c=/^([^\:]+)\:(.*)/,Qn={scheme:"urn",parse:function(i,l){var m=i.path&&i.path.match($c),h=i;if(m){var b=l.scheme||h.scheme||"urn",T=m[1].toLowerCase(),q=m[2],F=b+":"+(l.nid||T),X=_e[F];h.nid=T,h.nss=q,h.path=void 0,X&&(h=X.parse(h,l))}else h.error=h.error||"URN can not be parsed.";return h},serialize:function(i,l){var m=l.scheme||i.scheme||"urn",h=i.nid,b=m+":"+(l.nid||h),T=_e[b];T&&(i=T.serialize(i,l));var q=i,F=i.nss;return q.path=(h||l.nid)+":"+F,q}},wc=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Xn={scheme:"urn:uuid",parse:function(i,l){var m=i;return m.uuid=m.nss,m.nss=void 0,!l.tolerant&&(!m.uuid||!m.uuid.match(wc))&&(m.error=m.error||"UUID is not valid."),m},serialize:function(i,l){var m=i;return m.nss=(i.uuid||"").toLowerCase(),m}};_e[Ft.scheme]=Ft,_e[Hn.scheme]=Hn,_e[Ut.scheme]=Ut,_e[Jn.scheme]=Jn,_e[Yn.scheme]=Yn,_e[Qn.scheme]=Qn,_e[Xn.scheme]=Xn,t.SCHEMES=_e,t.pctEncChar=ke,t.pctDecChars=gt,t.parse=Le,t.removeDotSegments=vt,t.serialize=je,t.resolveComponents=Kn,t.resolve=ac,t.normalize=ic,t.equal=cc,t.escapeComponent=uc,t.unescapeComponent=ze,Object.defineProperty(t,"__esModule",{value:!0})})});var Xt=S(pe=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0});pe.getSchemaRefs=pe.resolveUrl=pe.normalizeId=pe._getFullPath=pe.getFullPath=pe.inlineRef=void 0;var ll=V(),dl=Cs(),fl=ca(),jr=Ts(),pl=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function ml(t,e=!0){return typeof t=="boolean"?!0:e===!0?!Ns(t):e?la(t)<=e:!1}pe.inlineRef=ml;var hl=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function Ns(t){for(let e in t){if(hl.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(Ns)||typeof r=="object"&&Ns(r))return!0}return!1}function la(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!pl.has(r)&&(typeof t[r]=="object"&&ll.eachItem(t[r],s=>e+=la(s)),e===1/0))return 1/0}return e}function da(t="",e){e!==!1&&(t=kt(t));let r=jr.parse(t);return fa(r)}pe.getFullPath=da;function fa(t){return jr.serialize(t).split("#")[0]+"#"}pe._getFullPath=fa;var yl=/#\/?$/;function kt(t){return t?t.replace(yl,""):""}pe.normalizeId=kt;function gl(t,e){return e=kt(e),jr.resolve(t,e)}pe.resolveUrl=gl;var vl=/^[a-z_][-a-z0-9._]*$/i;function _l(t){if(typeof t=="boolean")return{};let{schemaId:e}=this.opts,r=kt(t[e]),s={"":r},n=da(r,!1),o={},a=new Set;return fl(t,{allKeys:!0},(p,f,y,$)=>{if($===void 0)return;let v=n+f,g=s[$];typeof p[e]=="string"&&(g=w.call(this,p[e])),E.call(this,p.$anchor),E.call(this,p.$dynamicAnchor),s[f]=g;function w(_){if(_=kt(g?jr.resolve(g,_):_),a.has(_))throw d(_);a.add(_);let O=this.refs[_];return typeof O=="string"&&(O=this.refs[O]),typeof O=="object"?c(p,O.schema,_):_!==kt(v)&&(_[0]==="#"?(c(p,o[_],_),o[_]=p):this.refs[_]=v),_}function E(_){if(typeof _=="string"){if(!vl.test(_))throw new Error(`invalid anchor "${_}"`);w.call(this,`#${_}`)}}}),o;function c(p,f,y){if(f!==void 0&&!dl(p,f))throw d(y)}function d(p){return new Error(`reference "${p}" resolves to more than one schema`)}}pe.getSchemaRefs=_l});var tr=S(rt=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0});rt.getData=rt.KeywordCxt=rt.validateFunctionCode=void 0;var pa=Ho(),ma=Qt(),Os=_s(),Ar=Qt(),$l=Xo(),Zt=sa(),Rs=oa(),P=k(),C=Je(),wl=Xt(),We=V(),er=Bt();function El(t){if(va(t)&&(_a(t),ga(t))){Pl(t);return}ha(t,()=>pa.topBoolOrEmptySchema(t))}rt.validateFunctionCode=El;function ha({gen:t,validateName:e,schema:r,schemaEnv:s,opts:n},o){n.code.es5?t.func(e,P._`${C.default.data}, ${C.default.valCxt}`,s.$async,()=>{t.code(P._`"use strict"; ${ya(r,n)}`),Sl(t,n),t.code(o)}):t.func(e,P._`${C.default.data}, ${bl(n)}`,s.$async,()=>t.code(ya(r,n)).code(o))}function bl(t){return P._`{${C.default.instancePath}="", ${C.default.parentData}, ${C.default.parentDataProperty}, ${C.default.rootData}=${C.default.data}${t.dynamicRef?P._`, ${C.default.dynamicAnchors}={}`:P.nil}}={}`}function Sl(t,e){t.if(C.default.valCxt,()=>{t.var(C.default.instancePath,P._`${C.default.valCxt}.${C.default.instancePath}`),t.var(C.default.parentData,P._`${C.default.valCxt}.${C.default.parentData}`),t.var(C.default.parentDataProperty,P._`${C.default.valCxt}.${C.default.parentDataProperty}`),t.var(C.default.rootData,P._`${C.default.valCxt}.${C.default.rootData}`),e.dynamicRef&&t.var(C.default.dynamicAnchors,P._`${C.default.valCxt}.${C.default.dynamicAnchors}`)},()=>{t.var(C.default.instancePath,P._`""`),t.var(C.default.parentData,P._`undefined`),t.var(C.default.parentDataProperty,P._`undefined`),t.var(C.default.rootData,C.default.data),e.dynamicRef&&t.var(C.default.dynamicAnchors,P._`{}`)})}function Pl(t){let{schema:e,opts:r,gen:s}=t;ha(t,()=>{r.$comment&&e.$comment&&wa(t),Rl(t),s.let(C.default.vErrors,null),s.let(C.default.errors,0),r.unevaluated&&Cl(t),$a(t),jl(t)})}function Cl(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",P._`${r}.evaluated`),e.if(P._`${t.evaluated}.dynamicProps`,()=>e.assign(P._`${t.evaluated}.props`,P._`undefined`)),e.if(P._`${t.evaluated}.dynamicItems`,()=>e.assign(P._`${t.evaluated}.items`,P._`undefined`))}function ya(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?P._`/*# sourceURL=${r} */`:P.nil}function Tl(t,e){if(va(t)&&(_a(t),ga(t))){Nl(t,e);return}pa.boolOrEmptySchema(t,e)}function ga({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function va(t){return typeof t.schema!="boolean"}function Nl(t,e){let{schema:r,gen:s,opts:n}=t;n.$comment&&r.$comment&&wa(t),Il(t),kl(t);let o=s.const("_errs",C.default.errors);$a(t,o),s.var(e,P._`${o} === ${C.default.errors}`)}function _a(t){We.checkUnknownRules(t),Ol(t)}function $a(t,e){if(t.opts.jtd)return Ea(t,[],!1,e);let r=ma.getSchemaTypes(t.schema),s=ma.coerceAndCheckDataType(t,r);Ea(t,r,!s,e)}function Ol(t){let{schema:e,errSchemaPath:r,opts:s,self:n}=t;e.$ref&&s.ignoreKeywordsWithRef&&We.schemaHasRulesButRef(e,n.RULES)&&n.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function Rl(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&We.checkStrictMode(t,"default is ignored in the schema root")}function Il(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=wl.resolveUrl(t.baseId,e))}function kl(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function wa({gen:t,schemaEnv:e,schema:r,errSchemaPath:s,opts:n}){let o=r.$comment;if(n.$comment===!0)t.code(P._`${C.default.self}.logger.log(${o})`);else if(typeof n.$comment=="function"){let a=P.str`${s}/$comment`,c=t.scopeValue("root",{ref:e.root});t.code(P._`${C.default.self}.opts.$comment(${o}, ${a}, ${c}.schema)`)}}function jl(t){let{gen:e,schemaEnv:r,validateName:s,ValidationError:n,opts:o}=t;r.$async?e.if(P._`${C.default.errors} === 0`,()=>e.return(C.default.data),()=>e.throw(P._`new ${n}(${C.default.vErrors})`)):(e.assign(P._`${s}.errors`,C.default.vErrors),o.unevaluated&&Al(t),e.return(P._`${C.default.errors} === 0`))}function Al({gen:t,evaluated:e,props:r,items:s}){r instanceof P.Name&&t.assign(P._`${e}.props`,r),s instanceof P.Name&&t.assign(P._`${e}.items`,s)}function Ea(t,e,r,s){let{gen:n,schema:o,data:a,allErrors:c,opts:d,self:p}=t,{RULES:f}=p;if(o.$ref&&(d.ignoreKeywordsWithRef||!We.schemaHasRulesButRef(o,f))){n.block(()=>Pa(t,"$ref",f.all.$ref.definition));return}d.jtd||Dl(t,e),n.block(()=>{for(let $ of f.rules)y($);y(f.post)});function y($){!Os.shouldUseGroup(o,$)||($.type?(n.if(Ar.checkDataType($.type,a,d.strictNumbers)),ba(t,$),e.length===1&&e[0]===$.type&&r&&(n.else(),Ar.reportTypeError(t)),n.endIf()):ba(t,$),c||n.if(P._`${C.default.errors} === ${s||0}`))}}function ba(t,e){let{gen:r,schema:s,opts:{useDefaults:n}}=t;n&&$l.assignDefaults(t,e.type),r.block(()=>{for(let o of e.rules)Os.shouldUseRule(s,o)&&Pa(t,o.keyword,o.definition,e.type)})}function Dl(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(ql(t,e),t.opts.allowUnionTypes||Ml(t,e),Vl(t,t.dataTypes))}function ql(t,e){if(!!e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{Sa(t.dataTypes,r)||Is(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),t.dataTypes=t.dataTypes.filter(r=>Sa(e,r))}}function Ml(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&Is(t,"use allowUnionTypes to allow union type keyword")}function Vl(t,e){let r=t.self.RULES.all;for(let s in r){let n=r[s];if(typeof n=="object"&&Os.shouldUseRule(t.schema,n)){let{type:o}=n.definition;o.length&&!o.some(a=>Fl(e,a))&&Is(t,`missing type "${o.join(",")}" for keyword "${s}"`)}}}function Fl(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function Sa(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function Is(t,e){e+=` at "${t.schemaEnv.baseId+t.errSchemaPath}" (strictTypes)`,We.checkStrictMode(t,e,t.opts.strictTypes)}var ks=class{constructor(e,r,s){if(Zt.validateKeywordUsage(e,r,s),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=s,this.data=e.data,this.schema=e.schema[s],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=We.schemaRefOrVal(e,this.schema,s,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",Ca(this.$data,e));else if(this.schemaCode=this.schemaValue,!Zt.validSchemaType(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${s} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",C.default.errors))}result(e,r,s){this.failResult(P.not(e),r,s)}failResult(e,r,s){this.gen.if(e),s?s():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult(P.not(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail(P._`${r} !== undefined && (${P.or(this.invalid$data(),e)})`)}error(e,r,s){if(r){this.setParams(r),this._error(e,s),this.setParams({});return}this._error(e,s)}_error(e,r){(e?er.reportExtraError:er.reportError)(this,this.def.error,r)}$dataError(){er.reportError(this,this.def.$dataError||er.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');er.resetErrorsCount(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,s=P.nil){this.gen.block(()=>{this.check$data(e,s),r()})}check$data(e=P.nil,r=P.nil){if(!this.$data)return;let{gen:s,schemaCode:n,schemaType:o,def:a}=this;s.if(P.or(P._`${n} === undefined`,r)),e!==P.nil&&s.assign(e,!0),(o.length||a.validateSchema)&&(s.elseIf(this.invalid$data()),this.$dataError(),e!==P.nil&&s.assign(e,!1)),s.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:s,def:n,it:o}=this;return P.or(a(),c());function a(){if(s.length){if(!(r instanceof P.Name))throw new Error("ajv implementation error");let d=Array.isArray(s)?s:[s];return P._`${Ar.checkDataTypes(d,r,o.opts.strictNumbers,Ar.DataType.Wrong)}`}return P.nil}function c(){if(n.validateSchema){let d=e.scopeValue("validate$data",{ref:n.validateSchema});return P._`!${d}(${r})`}return P.nil}}subschema(e,r){let s=Rs.getSubschema(this.it,e);Rs.extendSubschemaData(s,this.it,e),Rs.extendSubschemaMode(s,e);let n={...this.it,...s,items:void 0,props:void 0};return Tl(n,r),n}mergeEvaluated(e,r){let{it:s,gen:n}=this;!s.opts.unevaluated||(s.props!==!0&&e.props!==void 0&&(s.props=We.mergeEvaluated.props(n,e.props,s.props,r)),s.items!==!0&&e.items!==void 0&&(s.items=We.mergeEvaluated.items(n,e.items,s.items,r)))}mergeValidEvaluated(e,r){let{it:s,gen:n}=this;if(s.opts.unevaluated&&(s.props!==!0||s.items!==!0))return n.if(r,()=>this.mergeEvaluated(e,P.Name)),!0}};rt.KeywordCxt=ks;function Pa(t,e,r,s){let n=new ks(t,r,e);"code"in r?r.code(n,s):n.$data&&r.validate?Zt.funcKeywordCode(n,r):"macro"in r?Zt.macroKeywordCode(n,r):(r.compile||r.validate)&&Zt.funcKeywordCode(n,r)}var Ul=/^\/(?:[^~]|~0|~1)*$/,xl=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Ca(t,{dataLevel:e,dataNames:r,dataPathArr:s}){let n,o;if(t==="")return C.default.rootData;if(t[0]==="/"){if(!Ul.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);n=t,o=C.default.rootData}else{let p=xl.exec(t);if(!p)throw new Error(`Invalid JSON-pointer: ${t}`);let f=+p[1];if(n=p[2],n==="#"){if(f>=e)throw new Error(d("property/index",f));return s[e-f]}if(f>e)throw new Error(d("data",f));if(o=r[e-f],!n)return o}let a=o,c=n.split("/");for(let p of c)p&&(o=P._`${o}${P.getProperty(We.unescapeJsonPointer(p))}`,a=P._`${a} && ${o}`);return a;function d(p,f){return`Cannot access ${p} ${f} levels up, current level is ${e}`}}rt.getData=Ca});var As=S(js=>{"use strict";Object.defineProperty(js,"__esModule",{value:!0});var Ta=class extends Error{constructor(e){super("validation failed");this.errors=e,this.ajv=this.validation=!0}};js.default=Ta});var Ms=S(qs=>{"use strict";Object.defineProperty(qs,"__esModule",{value:!0});var Ds=Xt(),Na=class extends Error{constructor(e,r,s){super(s||`can't resolve reference ${r} from id ${e}`);this.missingRef=Ds.resolveUrl(e,r),this.missingSchema=Ds.normalizeId(Ds.getFullPath(this.missingRef))}};qs.default=Na});var Us=S(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});be.resolveSchema=be.getCompilingSchema=be.resolveRef=be.compileSchema=be.SchemaEnv=void 0;var Ce=k(),Ll=As(),dt=Je(),Te=Xt(),Oa=V(),zl=tr(),Kl=Ts(),rr=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let s;typeof e.schema=="object"&&(s=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:Te.normalizeId(s==null?void 0:s[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=s==null?void 0:s.$async,this.refs={}}};be.SchemaEnv=rr;function Vs(t){let e=Ra.call(this,t);if(e)return e;let r=Te.getFullPath(t.root.baseId),{es5:s,lines:n}=this.opts.code,{ownProperties:o}=this.opts,a=new Ce.CodeGen(this.scope,{es5:s,lines:n,ownProperties:o}),c;t.$async&&(c=a.scopeValue("Error",{ref:Ll.default,code:Ce._`require("ajv/dist/runtime/validation_error").default`}));let d=a.scopeName("validate");t.validateName=d;let p={gen:a,allErrors:this.opts.allErrors,data:dt.default.data,parentData:dt.default.parentData,parentDataProperty:dt.default.parentDataProperty,dataNames:[dt.default.data],dataPathArr:[Ce.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:a.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:Ce.stringify(t.schema)}:{ref:t.schema}),validateName:d,ValidationError:c,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:Ce.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:Ce._`""`,opts:this.opts,self:this},f;try{this._compilations.add(t),zl.validateFunctionCode(p),a.optimize(this.opts.code.optimize);let y=a.toString();f=`${a.scopeRefs(dt.default.scope)}return ${y}`,this.opts.code.process&&(f=this.opts.code.process(f,t));let v=new Function(`${dt.default.self}`,`${dt.default.scope}`,f)(this,this.scope.get());if(this.scope.value(d,{ref:v}),v.errors=null,v.schema=t.schema,v.schemaEnv=t,t.$async&&(v.$async=!0),this.opts.code.source===!0&&(v.source={validateName:d,validateCode:y,scopeValues:a._values}),this.opts.unevaluated){let{props:g,items:w}=p;v.evaluated={props:g instanceof Ce.Name?void 0:g,items:w instanceof Ce.Name?void 0:w,dynamicProps:g instanceof Ce.Name,dynamicItems:w instanceof Ce.Name},v.source&&(v.source.evaluated=Ce.stringify(v.evaluated))}return t.validate=v,t}catch(y){throw delete t.validate,delete t.validateName,f&&this.logger.error("Error compiling schema, function code:",f),y}finally{this._compilations.delete(t)}}be.compileSchema=Vs;function Hl(t,e,r){var s;r=Te.resolveUrl(e,r);let n=t.refs[r];if(n)return n;let o=Wl.call(this,t,r);if(o===void 0){let a=(s=t.localRefs)===null||s===void 0?void 0:s[r],{schemaId:c}=this.opts;a&&(o=new rr({schema:a,schemaId:c,root:t,baseId:e}))}if(o!==void 0)return t.refs[r]=Gl.call(this,o)}be.resolveRef=Hl;function Gl(t){return Te.inlineRef(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:Vs.call(this,t)}function Ra(t){for(let e of this._compilations)if(Jl(e,t))return e}be.getCompilingSchema=Ra;function Jl(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function Wl(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||Dr.call(this,t,e)}function Dr(t,e){let r=Kl.parse(e),s=Te._getFullPath(r),n=Te.getFullPath(t.baseId);if(Object.keys(t.schema).length>0&&s===n)return Fs.call(this,r,t);let o=Te.normalizeId(s),a=this.refs[o]||this.schemas[o];if(typeof a=="string"){let c=Dr.call(this,t,a);return typeof(c==null?void 0:c.schema)!="object"?void 0:Fs.call(this,r,c)}if(typeof(a==null?void 0:a.schema)=="object"){if(a.validate||Vs.call(this,a),o===Te.normalizeId(e)){let{schema:c}=a,{schemaId:d}=this.opts,p=c[d];return p&&(n=Te.resolveUrl(n,p)),new rr({schema:c,schemaId:d,root:t,baseId:n})}return Fs.call(this,r,a)}}be.resolveSchema=Dr;var Bl=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Fs(t,{baseId:e,schema:r,root:s}){var n;if(((n=t.fragment)===null||n===void 0?void 0:n[0])!=="/")return;for(let c of t.fragment.slice(1).split("/")){if(typeof r=="boolean"||(r=r[Oa.unescapeFragment(c)],r===void 0))return;let d=typeof r=="object"&&r[this.opts.schemaId];!Bl.has(c)&&d&&(e=Te.resolveUrl(e,d))}let o;if(typeof r!="boolean"&&r.$ref&&!Oa.schemaHasRulesButRef(r,this.RULES)){let c=Te.resolveUrl(e,r.$ref);o=Dr.call(this,s,c)}let{schemaId:a}=this.opts;if(o=o||new rr({schema:r,schemaId:a,root:s,baseId:e}),o.schema!==o.root.schema)return o}});var Ia=S((bm,Yl)=>{Yl.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var Va=S(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.CodeGen=se.Name=se.nil=se.stringify=se.str=se._=se.KeywordCxt=void 0;var Ql=tr();Object.defineProperty(se,"KeywordCxt",{enumerable:!0,get:function(){return Ql.KeywordCxt}});var jt=k();Object.defineProperty(se,"_",{enumerable:!0,get:function(){return jt._}});Object.defineProperty(se,"str",{enumerable:!0,get:function(){return jt.str}});Object.defineProperty(se,"stringify",{enumerable:!0,get:function(){return jt.stringify}});Object.defineProperty(se,"nil",{enumerable:!0,get:function(){return jt.nil}});Object.defineProperty(se,"Name",{enumerable:!0,get:function(){return jt.Name}});Object.defineProperty(se,"CodeGen",{enumerable:!0,get:function(){return jt.CodeGen}});var Xl=As(),ka=Ms(),Zl=vs(),sr=Us(),ed=k(),nr=Xt(),qr=Qt(),xs=V(),ja=Ia(),td=["removeAdditional","useDefaults","coerceTypes"],rd=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),sd={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},nd={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},Aa=200;function od(t){var e,r,s,n,o,a,c,d,p,f,y,$,v,g,w,E,_,O,te,z,K,ve;let Re=t.strict,Vt=(e=t.code)===null||e===void 0?void 0:e.optimize,ht=Vt===!0||Vt===void 0?1:Vt||0;return{strictSchema:(s=(r=t.strictSchema)!==null&&r!==void 0?r:Re)!==null&&s!==void 0?s:!0,strictNumbers:(o=(n=t.strictNumbers)!==null&&n!==void 0?n:Re)!==null&&o!==void 0?o:!0,strictTypes:(c=(a=t.strictTypes)!==null&&a!==void 0?a:Re)!==null&&c!==void 0?c:"log",strictTuples:(p=(d=t.strictTuples)!==null&&d!==void 0?d:Re)!==null&&p!==void 0?p:"log",strictRequired:(y=(f=t.strictRequired)!==null&&f!==void 0?f:Re)!==null&&y!==void 0?y:!1,code:t.code?{...t.code,optimize:ht}:{optimize:ht},loopRequired:($=t.loopRequired)!==null&&$!==void 0?$:Aa,loopEnum:(v=t.loopEnum)!==null&&v!==void 0?v:Aa,meta:(g=t.meta)!==null&&g!==void 0?g:!0,messages:(w=t.messages)!==null&&w!==void 0?w:!0,inlineRefs:(E=t.inlineRefs)!==null&&E!==void 0?E:!0,schemaId:(_=t.schemaId)!==null&&_!==void 0?_:"$id",addUsedSchema:(O=t.addUsedSchema)!==null&&O!==void 0?O:!0,validateSchema:(te=t.validateSchema)!==null&&te!==void 0?te:!0,validateFormats:(z=t.validateFormats)!==null&&z!==void 0?z:!0,unicodeRegExp:(K=t.unicodeRegExp)!==null&&K!==void 0?K:!0,int32range:(ve=t.int32range)!==null&&ve!==void 0?ve:!0}}var Mr=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...od(e)};let{es5:r,lines:s}=this.opts.code;this.scope=new ed.ValueScope({scope:{},prefixes:rd,es5:r,lines:s}),this.logger=dd(e.logger);let n=e.validateFormats;e.validateFormats=!1,this.RULES=Zl.getRules(),Da.call(this,sd,e,"NOT SUPPORTED"),Da.call(this,nd,e,"DEPRECATED","warn"),this._metaOpts=ud.call(this),e.formats&&id.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&cd.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),ad.call(this),e.validateFormats=n}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:s}=this.opts,n=ja;s==="id"&&(n={...ja},n.id=n.$id,delete n.$id),r&&e&&this.addMetaSchema(n,n[s],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let s;if(typeof e=="string"){if(s=this.getSchema(e),!s)throw new Error(`no schema with key or ref "${e}"`)}else s=this.compile(e);let n=s(r);return"$async"in s||(this.errors=s.errors),n}compile(e,r){let s=this._addSchema(e,r);return s.validate||this._compileSchemaEnv(s)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:s}=this.opts;return n.call(this,e,r);async function n(f,y){await o.call(this,f.$schema);let $=this._addSchema(f,y);return $.validate||a.call(this,$)}async function o(f){f&&!this.getSchema(f)&&await n.call(this,{$ref:f},!0)}async function a(f){try{return this._compileSchemaEnv(f)}catch(y){if(!(y instanceof ka.default))throw y;return c.call(this,y),await d.call(this,y.missingSchema),a.call(this,f)}}function c({missingSchema:f,missingRef:y}){if(this.refs[f])throw new Error(`AnySchema ${f} is loaded but ${y} cannot be resolved`)}async function d(f){let y=await p.call(this,f);this.refs[f]||await o.call(this,y.$schema),this.refs[f]||this.addSchema(y,f,r)}async function p(f){let y=this._loading[f];if(y)return y;try{return await(this._loading[f]=s(f))}finally{delete this._loading[f]}}}addSchema(e,r,s,n=this.opts.validateSchema){if(Array.isArray(e)){for(let a of e)this.addSchema(a,void 0,s,n);return this}let o;if(typeof e=="object"){let{schemaId:a}=this.opts;if(o=e[a],o!==void 0&&typeof o!="string")throw new Error(`schema ${a} must be string`)}return r=nr.normalizeId(r||o),this._checkUnique(r),this.schemas[r]=this._addSchema(e,s,r,n,!0),this}addMetaSchema(e,r,s=this.opts.validateSchema){return this.addSchema(e,r,!0,s),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let s;if(s=e.$schema,s!==void 0&&typeof s!="string")throw new Error("$schema must be a string");if(s=s||this.opts.defaultMeta||this.defaultMeta(),!s)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let n=this.validate(s,e);if(!n&&r){let o="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(o);else throw new Error(o)}return n}getSchema(e){let r;for(;typeof(r=qa.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:s}=this.opts,n=new sr.SchemaEnv({schema:{},schemaId:s});if(r=sr.resolveSchema.call(this,n,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=qa.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let s=e[this.opts.schemaId];return s&&(s=nr.normalizeId(s),delete this.schemas[s],delete this.refs[s]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let s;if(typeof e=="string")s=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=s);else if(typeof e=="object"&&r===void 0){if(r=e,s=r.keyword,Array.isArray(s)&&!s.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(pd.call(this,s,r),!r)return xs.eachItem(s,o=>Ls.call(this,o)),this;hd.call(this,r);let n={...r,type:qr.getJSONTypes(r.type),schemaType:qr.getJSONTypes(r.schemaType)};return xs.eachItem(s,n.type.length===0?o=>Ls.call(this,o,n):o=>n.type.forEach(a=>Ls.call(this,o,n,a))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let s of r.rules){let n=s.rules.findIndex(o=>o.keyword===e);n>=0&&s.rules.splice(n,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:s="data"}={}){return!e||e.length===0?"No errors":e.map(n=>`${s}${n.instancePath} ${n.message}`).reduce((n,o)=>n+r+o)}$dataMetaSchema(e,r){let s=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let n of r){let o=n.split("/").slice(1),a=e;for(let c of o)a=a[c];for(let c in s){let d=s[c];if(typeof d!="object")continue;let{$data:p}=d.definition,f=a[c];p&&f&&(a[c]=Ma(f))}}return e}_removeAllSchemas(e,r){for(let s in e){let n=e[s];(!r||r.test(s))&&(typeof n=="string"?delete e[s]:n&&!n.meta&&(this._cache.delete(n.schema),delete e[s]))}}_addSchema(e,r,s,n=this.opts.validateSchema,o=this.opts.addUsedSchema){let a,{schemaId:c}=this.opts;if(typeof e=="object")a=e[c];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let d=this._cache.get(e);if(d!==void 0)return d;let p=nr.getSchemaRefs.call(this,e);return s=nr.normalizeId(a||s),d=new sr.SchemaEnv({schema:e,schemaId:c,meta:r,baseId:s,localRefs:p}),this._cache.set(d.schema,d),o&&!s.startsWith("#")&&(s&&this._checkUnique(s),this.refs[s]=d),n&&this.validateSchema(e,!0),d}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):sr.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{sr.compileSchema.call(this,e)}finally{this.opts=r}}};se.default=Mr;Mr.ValidationError=Xl.default;Mr.MissingRefError=ka.default;function Da(t,e,r,s="error"){for(let n in t){let o=n;o in e&&this.logger[s](`${r}: option ${n}. ${t[o]}`)}}function qa(t){return t=nr.normalizeId(t),this.schemas[t]||this.refs[t]}function ad(){let t=this.opts.schemas;if(!!t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function id(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function cd(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function ud(){let t={...this.opts};for(let e of td)delete t[e];return t}var ld={log(){},warn(){},error(){}};function dd(t){if(t===!1)return ld;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var fd=/^[a-z_$][a-z0-9_$:-]*$/i;function pd(t,e){let{RULES:r}=this;if(xs.eachItem(t,s=>{if(r.keywords[s])throw new Error(`Keyword ${s} is already defined`);if(!fd.test(s))throw new Error(`Keyword ${s} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function Ls(t,e,r){var s;let n=e==null?void 0:e.post;if(r&&n)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:o}=this,a=n?o.post:o.rules.find(({type:d})=>d===r);if(a||(a={type:r,rules:[]},o.rules.push(a)),o.keywords[t]=!0,!e)return;let c={keyword:t,definition:{...e,type:qr.getJSONTypes(e.type),schemaType:qr.getJSONTypes(e.schemaType)}};e.before?md.call(this,a,c,e.before):a.rules.push(c),o.all[t]=c,(s=e.implements)===null||s===void 0||s.forEach(d=>this.addKeyword(d))}function md(t,e,r){let s=t.rules.findIndex(n=>n.keyword===r);s>=0?t.rules.splice(s,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function hd(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=Ma(e)),t.validateSchema=this.compile(e,!0))}var yd={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Ma(t){return{anyOf:[t,yd]}}});var Fa=S(zs=>{"use strict";Object.defineProperty(zs,"__esModule",{value:!0});var gd={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};zs.default=gd});var za=S(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});ft.callRef=ft.getValidate=void 0;var vd=Ms(),Ua=Ee(),me=k(),At=Je(),xa=Us(),Vr=V(),_d={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:s}=t,{baseId:n,schemaEnv:o,validateName:a,opts:c,self:d}=s,{root:p}=o;if((r==="#"||r==="#/")&&n===p.baseId)return y();let f=xa.resolveRef.call(d,p,n,r);if(f===void 0)throw new vd.default(n,r);if(f instanceof xa.SchemaEnv)return $(f);return v(f);function y(){if(o===p)return Fr(t,a,o,o.$async);let g=e.scopeValue("root",{ref:p});return Fr(t,me._`${g}.validate`,p,p.$async)}function $(g){let w=La(t,g);Fr(t,w,g,g.$async)}function v(g){let w=e.scopeValue("schema",c.code.source===!0?{ref:g,code:me.stringify(g)}:{ref:g}),E=e.name("valid"),_=t.subschema({schema:g,dataTypes:[],schemaPath:me.nil,topSchemaRef:w,errSchemaPath:r},E);t.mergeEvaluated(_),t.ok(E)}}};function La(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):me._`${r.scopeValue("wrapper",{ref:e})}.validate`}ft.getValidate=La;function Fr(t,e,r,s){let{gen:n,it:o}=t,{allErrors:a,schemaEnv:c,opts:d}=o,p=d.passContext?At.default.this:me.nil;s?f():y();function f(){if(!c.$async)throw new Error("async schema referenced by sync schema");let g=n.let("valid");n.try(()=>{n.code(me._`await ${Ua.callValidateCode(t,e,p)}`),v(e),a||n.assign(g,!0)},w=>{n.if(me._`!(${w} instanceof ${o.ValidationError})`,()=>n.throw(w)),$(w),a||n.assign(g,!1)}),t.ok(g)}function y(){t.result(Ua.callValidateCode(t,e,p),()=>v(e),()=>$(e))}function $(g){let w=me._`${g}.errors`;n.assign(At.default.vErrors,me._`${At.default.vErrors} === null ? ${w} : ${At.default.vErrors}.concat(${w})`),n.assign(At.default.errors,me._`${At.default.vErrors}.length`)}function v(g){var w;if(!o.opts.unevaluated)return;let E=(w=r==null?void 0:r.validate)===null||w===void 0?void 0:w.evaluated;if(o.props!==!0)if(E&&!E.dynamicProps)E.props!==void 0&&(o.props=Vr.mergeEvaluated.props(n,E.props,o.props));else{let _=n.var("props",me._`${g}.evaluated.props`);o.props=Vr.mergeEvaluated.props(n,_,o.props,me.Name)}if(o.items!==!0)if(E&&!E.dynamicItems)E.items!==void 0&&(o.items=Vr.mergeEvaluated.items(n,E.items,o.items));else{let _=n.var("items",me._`${g}.evaluated.items`);o.items=Vr.mergeEvaluated.items(n,_,o.items,me.Name)}}}ft.callRef=Fr;ft.default=_d});var Ka=S(Ks=>{"use strict";Object.defineProperty(Ks,"__esModule",{value:!0});var $d=Fa(),wd=za(),Ed=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",$d.default,wd.default];Ks.default=Ed});var Ha=S(Hs=>{"use strict";Object.defineProperty(Hs,"__esModule",{value:!0});var Ur=k(),st=Ur.operators,xr={maximum:{okStr:"<=",ok:st.LTE,fail:st.GT},minimum:{okStr:">=",ok:st.GTE,fail:st.LT},exclusiveMaximum:{okStr:"<",ok:st.LT,fail:st.GTE},exclusiveMinimum:{okStr:">",ok:st.GT,fail:st.LTE}},bd={message:({keyword:t,schemaCode:e})=>Ur.str`must be ${xr[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>Ur._`{comparison: ${xr[t].okStr}, limit: ${e}}`},Sd={keyword:Object.keys(xr),type:"number",schemaType:"number",$data:!0,error:bd,code(t){let{keyword:e,data:r,schemaCode:s}=t;t.fail$data(Ur._`${r} ${xr[e].fail} ${s} || isNaN(${r})`)}};Hs.default=Sd});var Ga=S(Gs=>{"use strict";Object.defineProperty(Gs,"__esModule",{value:!0});var or=k(),Pd={message:({schemaCode:t})=>or.str`must be multiple of ${t}`,params:({schemaCode:t})=>or._`{multipleOf: ${t}}`},Cd={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Pd,code(t){let{gen:e,data:r,schemaCode:s,it:n}=t,o=n.opts.multipleOfPrecision,a=e.let("res"),c=o?or._`Math.abs(Math.round(${a}) - ${a}) > 1e-${o}`:or._`${a} !== parseInt(${a})`;t.fail$data(or._`(${s} === 0 || (${a} = ${r}/${s}, ${c}))`)}};Gs.default=Cd});var Wa=S(Js=>{"use strict";Object.defineProperty(Js,"__esModule",{value:!0});function Ja(t){let e=t.length,r=0,s=0,n;for(;s<e;)r++,n=t.charCodeAt(s++),n>=55296&&n<=56319&&s<e&&(n=t.charCodeAt(s),(n&64512)==56320&&s++);return r}Js.default=Ja;Ja.code='require("ajv/dist/runtime/ucs2length").default'});var Ba=S(Ws=>{"use strict";Object.defineProperty(Ws,"__esModule",{value:!0});var pt=k(),Td=V(),Nd=Wa(),Od={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return pt.str`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>pt._`{limit: ${t}}`},Rd={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Od,code(t){let{keyword:e,data:r,schemaCode:s,it:n}=t,o=e==="maxLength"?pt.operators.GT:pt.operators.LT,a=n.opts.unicode===!1?pt._`${r}.length`:pt._`${Td.useFunc(t.gen,Nd.default)}(${r})`;t.fail$data(pt._`${a} ${o} ${s}`)}};Ws.default=Rd});var Ya=S(Bs=>{"use strict";Object.defineProperty(Bs,"__esModule",{value:!0});var Id=Ee(),Lr=k(),kd={message:({schemaCode:t})=>Lr.str`must match pattern "${t}"`,params:({schemaCode:t})=>Lr._`{pattern: ${t}}`},jd={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:kd,code(t){let{data:e,$data:r,schema:s,schemaCode:n,it:o}=t,a=o.opts.unicodeRegExp?"u":"",c=r?Lr._`(new RegExp(${n}, ${a}))`:Id.usePattern(t,s);t.fail$data(Lr._`!${c}.test(${e})`)}};Bs.default=jd});var Qa=S(Ys=>{"use strict";Object.defineProperty(Ys,"__esModule",{value:!0});var ar=k(),Ad={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return ar.str`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>ar._`{limit: ${t}}`},Dd={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Ad,code(t){let{keyword:e,data:r,schemaCode:s}=t,n=e==="maxProperties"?ar.operators.GT:ar.operators.LT;t.fail$data(ar._`Object.keys(${r}).length ${n} ${s}`)}};Ys.default=Dd});var Xa=S(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});var ir=Ee(),cr=k(),qd=V(),Md={message:({params:{missingProperty:t}})=>cr.str`must have required property '${t}'`,params:({params:{missingProperty:t}})=>cr._`{missingProperty: ${t}}`},Vd={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Md,code(t){let{gen:e,schema:r,schemaCode:s,data:n,$data:o,it:a}=t,{opts:c}=a;if(!o&&r.length===0)return;let d=r.length>=c.loopRequired;if(a.allErrors?p():f(),c.strictRequired){let v=t.parentSchema.properties,{definedProperties:g}=t.it;for(let w of r)if((v==null?void 0:v[w])===void 0&&!g.has(w)){let E=a.schemaEnv.baseId+a.errSchemaPath,_=`required property "${w}" is not defined at "${E}" (strictRequired)`;qd.checkStrictMode(a,_,a.opts.strictRequired)}}function p(){if(d||o)t.block$data(cr.nil,y);else for(let v of r)ir.checkReportMissingProp(t,v)}function f(){let v=e.let("missing");if(d||o){let g=e.let("valid",!0);t.block$data(g,()=>$(v,g)),t.ok(g)}else e.if(ir.checkMissingProp(t,r,v)),ir.reportMissingProp(t,v),e.else()}function y(){e.forOf("prop",s,v=>{t.setParams({missingProperty:v}),e.if(ir.noPropertyInData(e,n,v,c.ownProperties),()=>t.error())})}function $(v,g){t.setParams({missingProperty:v}),e.forOf(v,s,()=>{e.assign(g,ir.propertyInData(e,n,v,c.ownProperties)),e.if(cr.not(g),()=>{t.error(),e.break()})},cr.nil)}}};Qs.default=Vd});var Za=S(Xs=>{"use strict";Object.defineProperty(Xs,"__esModule",{value:!0});var ur=k(),Fd={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return ur.str`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>ur._`{limit: ${t}}`},Ud={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Fd,code(t){let{keyword:e,data:r,schemaCode:s}=t,n=e==="maxItems"?ur.operators.GT:ur.operators.LT;t.fail$data(ur._`${r}.length ${n} ${s}`)}};Xs.default=Ud});var zr=S(Zs=>{"use strict";Object.defineProperty(Zs,"__esModule",{value:!0});var ei=Cs();ei.code='require("ajv/dist/runtime/equal").default';Zs.default=ei});var ti=S(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});var en=Qt(),ne=k(),xd=V(),Ld=zr(),zd={message:({params:{i:t,j:e}})=>ne.str`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>ne._`{i: ${t}, j: ${e}}`},Kd={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:zd,code(t){let{gen:e,data:r,$data:s,schema:n,parentSchema:o,schemaCode:a,it:c}=t;if(!s&&!n)return;let d=e.let("valid"),p=o.items?en.getSchemaTypes(o.items):[];t.block$data(d,f,ne._`${a} === false`),t.ok(d);function f(){let g=e.let("i",ne._`${r}.length`),w=e.let("j");t.setParams({i:g,j:w}),e.assign(d,!0),e.if(ne._`${g} > 1`,()=>(y()?$:v)(g,w))}function y(){return p.length>0&&!p.some(g=>g==="object"||g==="array")}function $(g,w){let E=e.name("item"),_=en.checkDataTypes(p,E,c.opts.strictNumbers,en.DataType.Wrong),O=e.const("indices",ne._`{}`);e.for(ne._`;${g}--;`,()=>{e.let(E,ne._`${r}[${g}]`),e.if(_,ne._`continue`),p.length>1&&e.if(ne._`typeof ${E} == "string"`,ne._`${E} += "_"`),e.if(ne._`typeof ${O}[${E}] == "number"`,()=>{e.assign(w,ne._`${O}[${E}]`),t.error(),e.assign(d,!1).break()}).code(ne._`${O}[${E}] = ${g}`)})}function v(g,w){let E=xd.useFunc(e,Ld.default),_=e.name("outer");e.label(_).for(ne._`;${g}--;`,()=>e.for(ne._`${w} = ${g}; ${w}--;`,()=>e.if(ne._`${E}(${r}[${g}], ${r}[${w}])`,()=>{t.error(),e.assign(d,!1).break(_)})))}}};tn.default=Kd});var ri=S(sn=>{"use strict";Object.defineProperty(sn,"__esModule",{value:!0});var rn=k(),Hd=V(),Gd=zr(),Jd={message:"must be equal to constant",params:({schemaCode:t})=>rn._`{allowedValue: ${t}}`},Wd={keyword:"const",$data:!0,error:Jd,code(t){let{gen:e,data:r,$data:s,schemaCode:n,schema:o}=t;s||o&&typeof o=="object"?t.fail$data(rn._`!${Hd.useFunc(e,Gd.default)}(${r}, ${n})`):t.fail(rn._`${o} !== ${r}`)}};sn.default=Wd});var si=S(nn=>{"use strict";Object.defineProperty(nn,"__esModule",{value:!0});var lr=k(),Bd=V(),Yd=zr(),Qd={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>lr._`{allowedValues: ${t}}`},Xd={keyword:"enum",schemaType:"array",$data:!0,error:Qd,code(t){let{gen:e,data:r,$data:s,schema:n,schemaCode:o,it:a}=t;if(!s&&n.length===0)throw new Error("enum must have non-empty array");let c=n.length>=a.opts.loopEnum,d=Bd.useFunc(e,Yd.default),p;if(c||s)p=e.let("valid"),t.block$data(p,f);else{if(!Array.isArray(n))throw new Error("ajv implementation error");let $=e.const("vSchema",o);p=lr.or(...n.map((v,g)=>y($,g)))}t.pass(p);function f(){e.assign(p,!1),e.forOf("v",o,$=>e.if(lr._`${d}(${r}, ${$})`,()=>e.assign(p,!0).break()))}function y($,v){let g=n[v];return typeof g=="object"&&g!==null?lr._`${d}(${r}, ${$}[${v}])`:lr._`${r} === ${g}`}}};nn.default=Xd});var ni=S(on=>{"use strict";Object.defineProperty(on,"__esModule",{value:!0});var Zd=Ha(),ef=Ga(),tf=Ba(),rf=Ya(),sf=Qa(),nf=Xa(),of=Za(),af=ti(),cf=ri(),uf=si(),lf=[Zd.default,ef.default,tf.default,rf.default,sf.default,nf.default,of.default,af.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},cf.default,uf.default];on.default=lf});var cn=S(dr=>{"use strict";Object.defineProperty(dr,"__esModule",{value:!0});dr.validateAdditionalItems=void 0;var mt=k(),an=V(),df={message:({params:{len:t}})=>mt.str`must NOT have more than ${t} items`,params:({params:{len:t}})=>mt._`{limit: ${t}}`},ff={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:df,code(t){let{parentSchema:e,it:r}=t,{items:s}=e;if(!Array.isArray(s)){an.checkStrictMode(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}oi(t,s)}};function oi(t,e){let{gen:r,schema:s,data:n,keyword:o,it:a}=t;a.items=!0;let c=r.const("len",mt._`${n}.length`);if(s===!1)t.setParams({len:e.length}),t.pass(mt._`${c} <= ${e.length}`);else if(typeof s=="object"&&!an.alwaysValidSchema(a,s)){let p=r.var("valid",mt._`${c} <= ${e.length}`);r.if(mt.not(p),()=>d(p)),t.ok(p)}function d(p){r.forRange("i",e.length,c,f=>{t.subschema({keyword:o,dataProp:f,dataPropType:an.Type.Num},p),a.allErrors||r.if(mt.not(p),()=>r.break())})}}dr.validateAdditionalItems=oi;dr.default=ff});var un=S(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});fr.validateTuple=void 0;var ai=k(),Kr=V(),pf=Ee(),mf={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return ii(t,"additionalItems",e);r.items=!0,!Kr.alwaysValidSchema(r,e)&&t.ok(pf.validateArray(t))}};function ii(t,e,r=t.schema){let{gen:s,parentSchema:n,data:o,keyword:a,it:c}=t;f(n),c.opts.unevaluated&&r.length&&c.items!==!0&&(c.items=Kr.mergeEvaluated.items(s,r.length,c.items));let d=s.name("valid"),p=s.const("len",ai._`${o}.length`);r.forEach((y,$)=>{Kr.alwaysValidSchema(c,y)||(s.if(ai._`${p} > ${$}`,()=>t.subschema({keyword:a,schemaProp:$,dataProp:$},d)),t.ok(d))});function f(y){let{opts:$,errSchemaPath:v}=c,g=r.length,w=g===y.minItems&&(g===y.maxItems||y[e]===!1);if($.strictTuples&&!w){let E=`"${a}" is ${g}-tuple, but minItems or maxItems/${e} are not specified or different at path "${v}"`;Kr.checkStrictMode(c,E,$.strictTuples)}}}fr.validateTuple=ii;fr.default=mf});var ci=S(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});var hf=un(),yf={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>hf.validateTuple(t,"items")};ln.default=yf});var li=S(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});var ui=k(),gf=V(),vf=Ee(),_f=cn(),$f={message:({params:{len:t}})=>ui.str`must NOT have more than ${t} items`,params:({params:{len:t}})=>ui._`{limit: ${t}}`},wf={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:$f,code(t){let{schema:e,parentSchema:r,it:s}=t,{prefixItems:n}=r;s.items=!0,!gf.alwaysValidSchema(s,e)&&(n?_f.validateAdditionalItems(t,n):t.ok(vf.validateArray(t)))}};dn.default=wf});var di=S(fn=>{"use strict";Object.defineProperty(fn,"__esModule",{value:!0});var Ne=k(),Hr=V(),Ef={message:({params:{min:t,max:e}})=>e===void 0?Ne.str`must contain at least ${t} valid item(s)`:Ne.str`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?Ne._`{minContains: ${t}}`:Ne._`{minContains: ${t}, maxContains: ${e}}`},bf={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Ef,code(t){let{gen:e,schema:r,parentSchema:s,data:n,it:o}=t,a,c,{minContains:d,maxContains:p}=s;o.opts.next?(a=d===void 0?1:d,c=p):a=1;let f=e.const("len",Ne._`${n}.length`);if(t.setParams({min:a,max:c}),c===void 0&&a===0){Hr.checkStrictMode(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(c!==void 0&&a>c){Hr.checkStrictMode(o,'"minContains" > "maxContains" is always invalid'),t.fail();return}if(Hr.alwaysValidSchema(o,r)){let g=Ne._`${f} >= ${a}`;c!==void 0&&(g=Ne._`${g} && ${f} <= ${c}`),t.pass(g);return}o.items=!0;let y=e.name("valid");if(c===void 0&&a===1)$(y,()=>e.if(y,()=>e.break()));else{e.let(y,!1);let g=e.name("_valid"),w=e.let("count",0);$(g,()=>e.if(g,()=>v(w)))}t.result(y,()=>t.reset());function $(g,w){e.forRange("i",0,f,E=>{t.subschema({keyword:"contains",dataProp:E,dataPropType:Hr.Type.Num,compositeRule:!0},g),w()})}function v(g){e.code(Ne._`${g}++`),c===void 0?e.if(Ne._`${g} >= ${a}`,()=>e.assign(y,!0).break()):(e.if(Ne._`${g} > ${c}`,()=>e.assign(y,!1).break()),a===1?e.assign(y,!0):e.if(Ne._`${g} >= ${a}`,()=>e.assign(y,!0)))}}};fn.default=bf});var mi=S(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.validateSchemaDeps=xe.validatePropertyDeps=xe.error=void 0;var pn=k(),Sf=V(),pr=Ee();xe.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let s=e===1?"property":"properties";return pn.str`must have ${s} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:s}})=>pn._`{property: ${t},
    missingProperty: ${s},
    depsCount: ${e},
    deps: ${r}}`};var Pf={keyword:"dependencies",type:"object",schemaType:"object",error:xe.error,code(t){let[e,r]=Cf(t);fi(t,e),pi(t,r)}};function Cf({schema:t}){let e={},r={};for(let s in t){if(s==="__proto__")continue;let n=Array.isArray(t[s])?e:r;n[s]=t[s]}return[e,r]}function fi(t,e=t.schema){let{gen:r,data:s,it:n}=t;if(Object.keys(e).length===0)return;let o=r.let("missing");for(let a in e){let c=e[a];if(c.length===0)continue;let d=pr.propertyInData(r,s,a,n.opts.ownProperties);t.setParams({property:a,depsCount:c.length,deps:c.join(", ")}),n.allErrors?r.if(d,()=>{for(let p of c)pr.checkReportMissingProp(t,p)}):(r.if(pn._`${d} && (${pr.checkMissingProp(t,c,o)})`),pr.reportMissingProp(t,o),r.else())}}xe.validatePropertyDeps=fi;function pi(t,e=t.schema){let{gen:r,data:s,keyword:n,it:o}=t,a=r.name("valid");for(let c in e)Sf.alwaysValidSchema(o,e[c])||(r.if(pr.propertyInData(r,s,c,o.opts.ownProperties),()=>{let d=t.subschema({keyword:n,schemaProp:c},a);t.mergeValidEvaluated(d,a)},()=>r.var(a,!0)),t.ok(a))}xe.validateSchemaDeps=pi;xe.default=Pf});var yi=S(mn=>{"use strict";Object.defineProperty(mn,"__esModule",{value:!0});var hi=k(),Tf=V(),Nf={message:"property name must be valid",params:({params:t})=>hi._`{propertyName: ${t.propertyName}}`},Of={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Nf,code(t){let{gen:e,schema:r,data:s,it:n}=t;if(Tf.alwaysValidSchema(n,r))return;let o=e.name("valid");e.forIn("key",s,a=>{t.setParams({propertyName:a}),t.subschema({keyword:"propertyNames",data:a,dataTypes:["string"],propertyName:a,compositeRule:!0},o),e.if(hi.not(o),()=>{t.error(!0),n.allErrors||e.break()})}),t.ok(o)}};mn.default=Of});var yn=S(hn=>{"use strict";Object.defineProperty(hn,"__esModule",{value:!0});var Gr=Ee(),Oe=k(),Rf=Je(),Jr=V(),If={message:"must NOT have additional properties",params:({params:t})=>Oe._`{additionalProperty: ${t.additionalProperty}}`},kf={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:If,code(t){let{gen:e,schema:r,parentSchema:s,data:n,errsCount:o,it:a}=t;if(!o)throw new Error("ajv implementation error");let{allErrors:c,opts:d}=a;if(a.props=!0,d.removeAdditional!=="all"&&Jr.alwaysValidSchema(a,r))return;let p=Gr.allSchemaProperties(s.properties),f=Gr.allSchemaProperties(s.patternProperties);y(),t.ok(Oe._`${o} === ${Rf.default.errors}`);function y(){e.forIn("key",n,E=>{!p.length&&!f.length?g(E):e.if($(E),()=>g(E))})}function $(E){let _;if(p.length>8){let O=Jr.schemaRefOrVal(a,s.properties,"properties");_=Gr.isOwnProperty(e,O,E)}else p.length?_=Oe.or(...p.map(O=>Oe._`${E} === ${O}`)):_=Oe.nil;return f.length&&(_=Oe.or(_,...f.map(O=>Oe._`${Gr.usePattern(t,O)}.test(${E})`))),Oe.not(_)}function v(E){e.code(Oe._`delete ${n}[${E}]`)}function g(E){if(d.removeAdditional==="all"||d.removeAdditional&&r===!1){v(E);return}if(r===!1){t.setParams({additionalProperty:E}),t.error(),c||e.break();return}if(typeof r=="object"&&!Jr.alwaysValidSchema(a,r)){let _=e.name("valid");d.removeAdditional==="failing"?(w(E,_,!1),e.if(Oe.not(_),()=>{t.reset(),v(E)})):(w(E,_),c||e.if(Oe.not(_),()=>e.break()))}}function w(E,_,O){let te={keyword:"additionalProperties",dataProp:E,dataPropType:Jr.Type.Str};O===!1&&Object.assign(te,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(te,_)}}};hn.default=kf});var _i=S(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});var jf=tr(),gi=Ee(),gn=V(),vi=yn(),Af={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:s,data:n,it:o}=t;o.opts.removeAdditional==="all"&&s.additionalProperties===void 0&&vi.default.code(new jf.KeywordCxt(o,vi.default,"additionalProperties"));let a=gi.allSchemaProperties(r);for(let y of a)o.definedProperties.add(y);o.opts.unevaluated&&a.length&&o.props!==!0&&(o.props=gn.mergeEvaluated.props(e,gn.toHash(a),o.props));let c=a.filter(y=>!gn.alwaysValidSchema(o,r[y]));if(c.length===0)return;let d=e.name("valid");for(let y of c)p(y)?f(y):(e.if(gi.propertyInData(e,n,y,o.opts.ownProperties)),f(y),o.allErrors||e.else().var(d,!0),e.endIf()),t.it.definedProperties.add(y),t.ok(d);function p(y){return o.opts.useDefaults&&!o.compositeRule&&r[y].default!==void 0}function f(y){t.subschema({keyword:"properties",schemaProp:y,dataProp:y},d)}}};vn.default=Af});var bi=S(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});var $i=Ee(),Wr=k(),wi=V(),Ei=V(),Df={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:s,parentSchema:n,it:o}=t,{opts:a}=o,c=$i.allSchemaProperties(r),d=c.filter(w=>wi.alwaysValidSchema(o,r[w]));if(c.length===0||d.length===c.length&&(!o.opts.unevaluated||o.props===!0))return;let p=a.strictSchema&&!a.allowMatchingProperties&&n.properties,f=e.name("valid");o.props!==!0&&!(o.props instanceof Wr.Name)&&(o.props=Ei.evaluatedPropsToName(e,o.props));let{props:y}=o;$();function $(){for(let w of c)p&&v(w),o.allErrors?g(w):(e.var(f,!0),g(w),e.if(f))}function v(w){for(let E in p)new RegExp(w).test(E)&&wi.checkStrictMode(o,`property ${E} matches pattern ${w} (use allowMatchingProperties)`)}function g(w){e.forIn("key",s,E=>{e.if(Wr._`${$i.usePattern(t,w)}.test(${E})`,()=>{let _=d.includes(w);_||t.subschema({keyword:"patternProperties",schemaProp:w,dataProp:E,dataPropType:Ei.Type.Str},f),o.opts.unevaluated&&y!==!0?e.assign(Wr._`${y}[${E}]`,!0):!_&&!o.allErrors&&e.if(Wr.not(f),()=>e.break())})})}}};_n.default=Df});var Si=S($n=>{"use strict";Object.defineProperty($n,"__esModule",{value:!0});var qf=V(),Mf={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:s}=t;if(qf.alwaysValidSchema(s,r)){t.fail();return}let n=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},n),t.failResult(n,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};$n.default=Mf});var Pi=S(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});var Vf=Ee(),Ff={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Vf.validateUnion,error:{message:"must match a schema in anyOf"}};wn.default=Ff});var Ci=S(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});var Br=k(),Uf=V(),xf={message:"must match exactly one schema in oneOf",params:({params:t})=>Br._`{passingSchemas: ${t.passing}}`},Lf={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:xf,code(t){let{gen:e,schema:r,parentSchema:s,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(n.opts.discriminator&&s.discriminator)return;let o=r,a=e.let("valid",!1),c=e.let("passing",null),d=e.name("_valid");t.setParams({passing:c}),e.block(p),t.result(a,()=>t.reset(),()=>t.error(!0));function p(){o.forEach((f,y)=>{let $;Uf.alwaysValidSchema(n,f)?e.var(d,!0):$=t.subschema({keyword:"oneOf",schemaProp:y,compositeRule:!0},d),y>0&&e.if(Br._`${d} && ${a}`).assign(a,!1).assign(c,Br._`[${c}, ${y}]`).else(),e.if(d,()=>{e.assign(a,!0),e.assign(c,y),$&&t.mergeEvaluated($,Br.Name)})})}}};En.default=Lf});var Ti=S(bn=>{"use strict";Object.defineProperty(bn,"__esModule",{value:!0});var zf=V(),Kf={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let n=e.name("valid");r.forEach((o,a)=>{if(zf.alwaysValidSchema(s,o))return;let c=t.subschema({keyword:"allOf",schemaProp:a},n);t.ok(n),t.mergeEvaluated(c)})}};bn.default=Kf});var Ri=S(Sn=>{"use strict";Object.defineProperty(Sn,"__esModule",{value:!0});var Yr=k(),Ni=V(),Hf={message:({params:t})=>Yr.str`must match "${t.ifClause}" schema`,params:({params:t})=>Yr._`{failingKeyword: ${t.ifClause}}`},Gf={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Hf,code(t){let{gen:e,parentSchema:r,it:s}=t;r.then===void 0&&r.else===void 0&&Ni.checkStrictMode(s,'"if" without "then" and "else" is ignored');let n=Oi(s,"then"),o=Oi(s,"else");if(!n&&!o)return;let a=e.let("valid",!0),c=e.name("_valid");if(d(),t.reset(),n&&o){let f=e.let("ifClause");t.setParams({ifClause:f}),e.if(c,p("then",f),p("else",f))}else n?e.if(c,p("then")):e.if(Yr.not(c),p("else"));t.pass(a,()=>t.error(!0));function d(){let f=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},c);t.mergeEvaluated(f)}function p(f,y){return()=>{let $=t.subschema({keyword:f},c);e.assign(a,c),t.mergeValidEvaluated($,a),y?e.assign(y,Yr._`${f}`):t.setParams({ifClause:f})}}}};function Oi(t,e){let r=t.schema[e];return r!==void 0&&!Ni.alwaysValidSchema(t,r)}Sn.default=Gf});var Ii=S(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});var Jf=V(),Wf={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&Jf.checkStrictMode(r,`"${t}" without "if" is ignored`)}};Pn.default=Wf});var ki=S(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});var Bf=cn(),Yf=ci(),Qf=un(),Xf=li(),Zf=di(),ep=mi(),tp=yi(),rp=yn(),sp=_i(),np=bi(),op=Si(),ap=Pi(),ip=Ci(),cp=Ti(),up=Ri(),lp=Ii();function dp(t=!1){let e=[op.default,ap.default,ip.default,cp.default,up.default,lp.default,tp.default,rp.default,ep.default,sp.default,np.default];return t?e.push(Yf.default,Xf.default):e.push(Bf.default,Qf.default),e.push(Zf.default),e}Cn.default=dp});var ji=S(Tn=>{"use strict";Object.defineProperty(Tn,"__esModule",{value:!0});var Q=k(),fp={message:({schemaCode:t})=>Q.str`must match format "${t}"`,params:({schemaCode:t})=>Q._`{format: ${t}}`},pp={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:fp,code(t,e){let{gen:r,data:s,$data:n,schema:o,schemaCode:a,it:c}=t,{opts:d,errSchemaPath:p,schemaEnv:f,self:y}=c;if(!d.validateFormats)return;n?$():v();function $(){let g=r.scopeValue("formats",{ref:y.formats,code:d.code.formats}),w=r.const("fDef",Q._`${g}[${a}]`),E=r.let("fType"),_=r.let("format");r.if(Q._`typeof ${w} == "object" && !(${w} instanceof RegExp)`,()=>r.assign(E,Q._`${w}.type || "string"`).assign(_,Q._`${w}.validate`),()=>r.assign(E,Q._`"string"`).assign(_,w)),t.fail$data(Q.or(O(),te()));function O(){return d.strictSchema===!1?Q.nil:Q._`${a} && !${_}`}function te(){let z=f.$async?Q._`(${w}.async ? await ${_}(${s}) : ${_}(${s}))`:Q._`${_}(${s})`,K=Q._`(typeof ${_} == "function" ? ${z} : ${_}.test(${s}))`;return Q._`${_} && ${_} !== true && ${E} === ${e} && !${K}`}}function v(){let g=y.formats[o];if(!g){O();return}if(g===!0)return;let[w,E,_]=te(g);w===e&&t.pass(z());function O(){if(d.strictSchema===!1){y.logger.warn(K());return}throw new Error(K());function K(){return`unknown format "${o}" ignored in schema at path "${p}"`}}function te(K){let ve=K instanceof RegExp?Q.regexpCode(K):d.code.formats?Q._`${d.code.formats}${Q.getProperty(o)}`:void 0,Re=r.scopeValue("formats",{key:o,ref:K,code:ve});return typeof K=="object"&&!(K instanceof RegExp)?[K.type||"string",K.validate,Q._`${Re}.validate`]:["string",K,Re]}function z(){if(typeof g=="object"&&!(g instanceof RegExp)&&g.async){if(!f.$async)throw new Error("async format in sync schema");return Q._`await ${_}(${s})`}return typeof E=="function"?Q._`${_}(${s})`:Q._`${_}.test(${s})`}}}};Tn.default=pp});var Ai=S(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});var mp=ji(),hp=[mp.default];Nn.default=hp});var Di=S(Dt=>{"use strict";Object.defineProperty(Dt,"__esModule",{value:!0});Dt.contentVocabulary=Dt.metadataVocabulary=void 0;Dt.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Dt.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var Mi=S(On=>{"use strict";Object.defineProperty(On,"__esModule",{value:!0});var yp=Ka(),gp=ni(),vp=ki(),_p=Ai(),qi=Di(),$p=[yp.default,gp.default,vp.default(),_p.default,qi.metadataVocabulary,qi.contentVocabulary];On.default=$p});var Vi=S(mr=>{"use strict";Object.defineProperty(mr,"__esModule",{value:!0});mr.DiscrError=void 0;var wp;(function(t){t.Tag="tag",t.Mapping="mapping"})(wp=mr.DiscrError||(mr.DiscrError={}))});var Fi=S(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});var qt=k(),Rn=Vi(),Ep={message:({params:{discrError:t,tagName:e}})=>t===Rn.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>qt._`{error: ${t}, tag: ${r}, tagValue: ${e}}`},bp={keyword:"discriminator",type:"object",schemaType:"object",error:Ep,code(t){let{gen:e,data:r,schema:s,parentSchema:n,it:o}=t,{oneOf:a}=n;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");let c=s.propertyName;if(typeof c!="string")throw new Error("discriminator: requires propertyName");if(s.mapping)throw new Error("discriminator: mapping is not supported");if(!a)throw new Error("discriminator: requires oneOf keyword");let d=e.let("valid",!1),p=e.const("tag",qt._`${r}${qt.getProperty(c)}`);e.if(qt._`typeof ${p} == "string"`,()=>f(),()=>t.error(!1,{discrError:Rn.DiscrError.Tag,tag:p,tagName:c})),t.ok(d);function f(){let v=$();e.if(!1);for(let g in v)e.elseIf(qt._`${p} === ${g}`),e.assign(d,y(v[g]));e.else(),t.error(!1,{discrError:Rn.DiscrError.Mapping,tag:p,tagName:c}),e.endIf()}function y(v){let g=e.name("valid"),w=t.subschema({keyword:"oneOf",schemaProp:v},g);return t.mergeEvaluated(w,qt.Name),g}function $(){var v;let g={},w=_(n),E=!0;for(let z=0;z<a.length;z++){let K=a[z],ve=(v=K.properties)===null||v===void 0?void 0:v[c];if(typeof ve!="object")throw new Error(`discriminator: oneOf schemas must have "properties/${c}"`);E=E&&(w||_(K)),O(ve,z)}if(!E)throw new Error(`discriminator: "${c}" must be required`);return g;function _({required:z}){return Array.isArray(z)&&z.includes(c)}function O(z,K){if(z.const)te(z.const,K);else if(z.enum)for(let ve of z.enum)te(ve,K);else throw new Error(`discriminator: "properties/${c}" must have "const" or "enum"`)}function te(z,K){if(typeof z!="string"||z in g)throw new Error(`discriminator: "${c}" values must be unique strings`);g[z]=K}}}};In.default=bp});var Ui=S((lh,Sp)=>{Sp.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var zi=S((ee,Li)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0});ee.CodeGen=ee.Name=ee.nil=ee.stringify=ee.str=ee._=ee.KeywordCxt=void 0;var Pp=Va(),Cp=Mi(),Tp=Fi(),xi=Ui(),Np=["/properties"],Qr="http://json-schema.org/draft-07/schema",kn=class extends Pp.default{_addVocabularies(){super._addVocabularies(),Cp.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(Tp.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(xi,Np):xi;this.addMetaSchema(e,Qr,!1),this.refs["http://json-schema.org/schema"]=Qr}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Qr)?Qr:void 0)}};Li.exports=ee=kn;Object.defineProperty(ee,"__esModule",{value:!0});ee.default=kn;var Op=tr();Object.defineProperty(ee,"KeywordCxt",{enumerable:!0,get:function(){return Op.KeywordCxt}});var Mt=k();Object.defineProperty(ee,"_",{enumerable:!0,get:function(){return Mt._}});Object.defineProperty(ee,"str",{enumerable:!0,get:function(){return Mt.str}});Object.defineProperty(ee,"stringify",{enumerable:!0,get:function(){return Mt.stringify}});Object.defineProperty(ee,"nil",{enumerable:!0,get:function(){return Mt.nil}});Object.defineProperty(ee,"Name",{enumerable:!0,get:function(){return Mt.Name}});Object.defineProperty(ee,"CodeGen",{enumerable:!0,get:function(){return Mt.CodeGen}})});Ac(exports,{activate:()=>jp,deactivate:()=>Ap});var Yi=de(require("vscode"));var no=de(require("vscode")),oo=class{constructor(){this.isGitAvailable=!1;this.onRepositoryDidChange=e=>{var r;(r=this.api)==null||r.repositories.forEach(s=>{s.ui.onDidChange(e)})};this.gitExtension=no.extensions.getExtension("vscode.git"),!!this.gitExtension&&(this.isGitAvailable=!0,this.api=this.gitExtension.exports.getAPI(1))}getSelectedRepository(){var r,s;let e=(r=this.api)==null?void 0:r.repositories.find(n=>n.ui.selected);return e||((s=this.api)==null?void 0:s.repositories[0])}getNumberOfRepositories(){var e;return((e=this.api)==null?void 0:e.repositories.length)||0}getSelectedRepositoryPath(){let e=this.getSelectedRepository();return e==null?void 0:e.rootUri.path}isAvailable(){return this.isGitAvailable}getSCMInputBoxMessage(){let e=this.getSelectedRepository();return e?e.inputBox.value:""}setSCMInputBoxMessage(e){let r=this.getSelectedRepository();r&&(r.inputBox.value=e)}getRecentCommitMessages(e=32){return Se(this,null,function*(){let r=this.getSelectedRepository(),s;if(!r)return Promise.resolve([]);try{s=yield r.log({maxEntries:e})}catch(n){Promise.reject(n)}return s?Promise.resolve(s):Promise.resolve([])})}},ao=oo;var oe=de(require("vscode")),lo=de(require("os"));var qc=(t,e=void 0)=>({command:t,payload:e}),qe=qc;var io=de(require("path")),co=de(require("vscode"));var Mc=()=>{let t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<32;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t},_r=Mc;var Vc=({extensionPath:t,platform:e,webview:r})=>{let s=c=>{let d=c.split("/"),p=co.Uri.file(io.join(t,...d));return r.asWebviewUri(p)},{cspSource:n}=r,o=_r();return`
    <!DOCTYPE html>
    <html lang="en">
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta
        http-equiv="Content-Security-Policy"
        content="default-src 'none'; img-src ${n}; script-src ${n} nonce-${o}; style-src 'unsafe-inline' ${n}; style-src-elem 'unsafe-inline' ${n}; font-src ${n}"
      />
      <title>Commit message editor</title>
      <link rel="stylesheet" href="${s("node_modules/vscode-codicons/dist/codicon.css")}" nonce="${o}" id="vscode-codicon-stylesheet">
      <style>body { padding: 0 10px; }</style>
    </head>
    <body class="${e}">
      <cme-editor-page></cme-editor-page>
      <script src="${s("frontend/dist/_bundled/cme-editor-page.js")}" nonce="${o}" type="module"><\/script>
    </body>
    </html>
  `},uo=Vc;var Fc=({context:t,currentPanel:e,git:r})=>oe.commands.registerCommand("commitMessageEditor.openEditor",()=>{let s=oe.window.activeTextEditor?oe.window.activeTextEditor.viewColumn:void 0,n=()=>{r.getRecentCommitMessages(10).then(f=>{let y=qe("recentCommitMessages",f);e&&e.webview.postMessage(y)}).catch(f=>{oe.window.showErrorMessage("Something went wrong",f)})},o=f=>Se(void 0,null,function*(){if(!oe.workspace.getConfiguration("commit-message-editor").get("confirmAmend")){a(f);return}let $="Yes",v="Always",g=yield oe.window.showWarningMessage("Are you sure want to continue? Your last commit will be undone.",{modal:!0},$,v);[$,v].includes(g)&&a(f),g===v&&oe.workspace.getConfiguration("commit-message-editor").update("confirmAmend",!1,oe.ConfigurationTarget.Global)}),a=f=>Se(void 0,null,function*(){yield oe.commands.executeCommand("git.undoCommit"),r.setSCMInputBoxMessage(f),n(),e&&e.webview.postMessage(qe("amendPerformed"))}),c=()=>{let f={numberOfRepositories:r.getNumberOfRepositories(),selectedRepositoryPath:r.getSelectedRepositoryPath()};return qe("repositoryInfo",f)};if(e){e.reveal(s);return}e=oe.window.createWebviewPanel("editCommitMessage","Edit commit message",s,{enableScripts:!0,retainContextWhenHidden:!0});let{webview:d}=e,{extensionPath:p}=t;e.webview.html=uo({extensionPath:p,platform:(0,lo.platform)(),webview:d}),e.webview.onDidReceiveMessage(f=>{let{command:y,payload:$}=f;switch(y){case"copyFromExtensionMessageBox":r.setSCMInputBoxMessage($);break;case"closeTab":e.dispose();break;case"requestConfig":e.webview.postMessage(qe("receiveConfig",oe.workspace.getConfiguration("commit-message-editor")));break;case"requestRecentCommits":n();break;case"confirmAmend":o($);break;case"openConfigurationPage":oe.commands.executeCommand("commitMessageEditor.openSettingsPage");break;default:break}},void 0,t.subscriptions),e.onDidDispose(()=>{e=void 0},null,t.subscriptions),r.onRepositoryDidChange(()=>{e==null||e.webview.postMessage(c()),n()}),e.webview.postMessage(qe("copyFromSCMInputBox",r.getSCMInputBoxMessage())),e.webview.postMessage(c())}),fo=Fc;var po=de(require("vscode"));var Uc=({currentPanel:t,git:e})=>po.commands.registerCommand("commitMessageEditor.copyFromSCMInputBox",()=>{!t||t.webview.postMessage(qe("copyFromSCMInputBox",e.getSCMInputBoxMessage()))}),mo=Uc;var $r=de(require("vscode"));var xc=({currentPanel:t})=>$r.commands.registerCommand("commitMessageEditor.loadTemplate",()=>{!t||t.webview.postMessage(qe("receiveConfig",$r.workspace.getConfiguration("commit-message-editor")))}),ho=xc;var Xr=de(require("fs")),jn=de(require("util")),ge=de(require("vscode")),Ji=de(zi());var Ki=de(require("path")),Hi=de(require("vscode"));var Rp=({extensionPath:t,webview:e})=>{let r=a=>{let c=a.split("/"),d=Hi.Uri.file(Ki.join(t,...c));return e.asWebviewUri(d)},{cspSource:s}=e,n=_r();return`
    <!DOCTYPE html>
    <html lang="en">
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta
        http-equiv="Content-Security-Policy"
        content="default-src 'none'; img-src ${s}; script-src ${s} nonce-${n}; style-src 'unsafe-inline' ${s}; style-src-elem 'unsafe-inline' ${s}; font-src ${s}"
      />
      <title>Commit message editor</title>
      <link rel="stylesheet" href="${r("node_modules/vscode-codicons/dist/codicon.css")}" nonce="${n}" id="vscode-codicon-stylesheet">
      <style>body { padding: 0 10px; }</style>
    </head>
    <body>
      <cme-settings-page></cme-esettings-page>
      <script src="${r("frontend/dist/_bundled/cme-settings-page.js")}" nonce="${n}" type="module"><\/script>
    </body>
    </html>
  `},Gi=Rp;var Ip=jn.promisify(Xr.readFile),kp=jn.promisify(Xr.writeFile),Wi=class{constructor({context:e}){this._context=e}run(){this._openPanel(),this._activateWebviewMessageListener()}_showStatus(e,r="success"){var s;(s=this._currentPanel)==null||s.webview.postMessage({command:"statusMessage",payload:{statusMessage:e,statusMessageType:r}})}_showError(e){let r="";e.toString?r=e.toString():typeof e=="string"?r=e:r="unknown error",this._showStatus(r,"error")}_readJSON(e){return Se(this,null,function*(){let s=(yield Ip(e)).toString("utf-8");try{return JSON.parse(s)}catch(n){return Promise.reject(n)}})}_readSchema(){return Se(this,null,function*(){return this._readJSON(this._context.asAbsolutePath("docs/schemas/config-v1.schema.json"))})}_processConfigFile(){return Se(this,null,function*(){let e=yield ge.window.showOpenDialog({canSelectMany:!1,filters:{JSON:["json"]}});if(!!e)try{let r=yield this._readJSON(e[0].fsPath),s=yield this._readSchema(),n=new Ji.default,o=n.compile(s);if(!o(r))throw new Error(n.errorsText(o.errors));return r}catch(r){return r instanceof Error?Promise.reject(r.message):Promise.reject(r)}})}_importConfig(){return Se(this,null,function*(){var e,r;try{let s=yield this._processConfigFile();(e=this._currentPanel)==null||e.webview.postMessage({command:"receiveImportedConfig",payload:s})}catch(s){(r=this._currentPanel)==null||r.webview.postMessage({command:"statusMessage",payload:{statusMessage:s,statusMessageType:"error"}})}})}_exportConfig(e){return Se(this,null,function*(){let r=yield ge.window.showSaveDialog({filters:{"JSON files":["json"]}}),{staticTemplate:s,dynamicTemplate:n,tokens:o}=e,a={$schema:"https://bendera.github.io/vscode-commit-message-editor/schemas/config-v1.schema.json",configVersion:"1",staticTemplate:s,dynamicTemplate:n,tokens:o},c=JSON.stringify(a,null,2);if(r==null?void 0:r.fsPath)try{yield kp(r.fsPath,c,"utf-8"),this._showStatus(`File saved successfully to ${r.fsPath}`)}catch(d){this._showError(d)}})}_loadCurrentConfig(){var o;let e=ge.workspace.getConfiguration("commit-message-editor"),{staticTemplate:r,dynamicTemplate:s,tokens:n}=e;(o=this._currentPanel)==null||o.webview.postMessage({command:"loadCurrentConfig",payload:{staticTemplate:r,dynamicTemplate:s,tokens:n}})}_saveToSettings(e){let{configurationTarget:r,configuration:s}=e,{staticTemplate:n,dynamicTemplate:o,tokens:a}=s,c=ge.workspace.getConfiguration("commit-message-editor").update("staticTemplate",n,r),d=ge.workspace.getConfiguration("commit-message-editor").update("dynamicTemplate",o,r),p=ge.workspace.getConfiguration("commit-message-editor").update("tokens",a,r);Promise.all([c,d,p]).then(()=>{this._showStatus("Settings saved")}).catch(f=>{this._showError(f)})}_webviewMessageListener(e){let{command:r,payload:s}=e;switch(r){case"importConfig":this._importConfig();break;case"exportConfig":this._exportConfig(s);break;case"loadCurrentConfig":this._loadCurrentConfig();break;case"saveToSettings":this._saveToSettings(s);break}}_activateWebviewMessageListener(){var e;(e=this._currentPanel)==null||e.webview.onDidReceiveMessage(this._webviewMessageListener,this,this._context.subscriptions)}_openPanel(){let e=ge.window.activeTextEditor?ge.window.activeTextEditor.viewColumn:ge.ViewColumn.One;this._currentPanel?this._currentPanel.reveal(e):(this._currentPanel=ge.window.createWebviewPanel("cmeSettingsPage","Edit commit templates",e,{enableScripts:!0,retainContextWhenHidden:!0}),this._currentPanel.webview.html=Gi({extensionPath:this._context.extensionPath,webview:this._currentPanel.webview}),this._currentPanel.onDidDispose(()=>{this._currentPanel=void 0},null,this._context.subscriptions))}},Bi=Wi;function jp(t){let e=new ao,r,s=new Bi({context:t});t.subscriptions.push(fo({context:t,currentPanel:r,git:e})),t.subscriptions.push(mo({currentPanel:r,git:e})),t.subscriptions.push(ho({currentPanel:r})),t.subscriptions.push(Yi.commands.registerCommand("commitMessageEditor.openSettingsPage",s.run,s))}function Ap(){}0&&(module.exports={activate,deactivate});
/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */
